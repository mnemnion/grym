<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="1681pt" height="634pt"
 viewBox="0.00 0.00 1681.00 633.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 629.8005)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-629.8005 1677,-629.8005 1677,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="635" cy="-607.8005" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="635" y="-603.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 58</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="635" cy="-535.8005" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="635" y="-531.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;58</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M635,-589.6319C635,-581.9315 635,-572.7749 635,-564.2172"/>
<polygon fill="#000000" stroke="#000000" points="638.5001,-564.2138 635,-554.2138 631.5001,-564.2138 638.5001,-564.2138"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="87" cy="-463.8005" rx="36.7923" ry="18"/>
<text text-anchor="middle" x="87" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : File</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M575.4317,-532.1967C483.7895,-525.967 302.9873,-510.9552 152,-481.8005 144.1587,-480.2864 135.8818,-478.3015 127.9582,-476.204"/>
<polygon fill="#000000" stroke="#000000" points="128.7397,-472.7891 118.1697,-473.5141 126.8848,-479.5389 128.7397,-472.7891"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="193" cy="-463.8005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="193" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M575.8353,-531.5182C498.4541,-525.0408 359.074,-510.3565 243,-481.8005 238.319,-480.6489 233.466,-479.2176 228.7061,-477.6687"/>
<polygon fill="#000000" stroke="#000000" points="229.7463,-474.3252 219.1515,-474.3761 227.4656,-480.9433 229.7463,-474.3252"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="320" cy="-463.8005" rx="67.748" ry="18"/>
<text text-anchor="middle" x="320" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;9</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M586.8154,-524.7869C531.7483,-512.2001 441.5014,-491.5723 381.4284,-477.8413"/>
<polygon fill="#000000" stroke="#000000" points="381.8466,-474.3467 371.3181,-475.5304 380.2868,-481.1707 381.8466,-474.3467"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="549" cy="-463.8005" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="549" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;15</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M614.6192,-518.7375C603.5364,-509.4589 589.6512,-497.8341 577.5109,-487.6701"/>
<polygon fill="#000000" stroke="#000000" points="579.7463,-484.9769 569.8319,-481.2412 575.2527,-490.3443 579.7463,-484.9769"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="759" cy="-463.8005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="759" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 18&#45;22</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M662.828,-519.6423C680.0098,-509.6658 702.2835,-496.7327 721.068,-485.8256"/>
<polygon fill="#000000" stroke="#000000" points="723.0811,-488.7039 729.9716,-480.6558 719.5662,-482.6504 723.0811,-488.7039"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="988" cy="-463.8005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="988" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 24&#45;28</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M685.2014,-525.5611C746.7039,-513.0167 851.1718,-491.7088 919.8829,-477.6941"/>
<polygon fill="#000000" stroke="#000000" points="920.653,-481.1092 929.7517,-475.6812 919.254,-474.2504 920.653,-481.1092"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1262" cy="-463.8005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1262" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 30&#45;53</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M691.7479,-529.284C803.7183,-516.4262 1053.3542,-487.7599 1181.9802,-472.9894"/>
<polygon fill="#000000" stroke="#000000" points="1182.6235,-476.4386 1192.1589,-471.8206 1181.8249,-469.4843 1182.6235,-476.4386"/>
</g>
<!-- codeblock_9 -->
<g id="node10" class="node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="1531" cy="-463.8005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1531" y="-459.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;58</text>
</g>
<!-- section_1&#45;&gt;codeblock_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;codeblock_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M694.6624,-531.7365C817.1668,-523.2917 1105.9127,-502.8712 1348,-481.8005 1381.4332,-478.8906 1418.2666,-475.3353 1450.07,-472.1553"/>
<polygon fill="#000000" stroke="#000000" points="1450.6081,-475.619 1460.2084,-471.1374 1449.9087,-468.654 1450.6081,-475.619"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="58,-260.9003 0,-260.9003 0,-224.9003 58,-224.9003 58,-260.9003"/>
<text text-anchor="middle" x="29" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">* File</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M79.7378,-445.9992C75.6505,-435.5654 70.6505,-422.0654 67,-409.8005 52.6954,-361.7397 40.7387,-304.5248 34.2495,-271.1038"/>
<polygon fill="#000000" stroke="#000000" points="37.658,-270.2934 32.3387,-261.1307 30.783,-271.6106 37.658,-270.2934"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="103" cy="-242.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="103" y="-238.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M173.6889,-449.3267C161.8975,-439.4649 147.5007,-425.4009 139,-409.8005 114.8117,-365.4103 106.8743,-306.0938 104.2704,-271.4386"/>
<polygon fill="#000000" stroke="#000000" points="107.74,-270.8555 103.5985,-261.1037 100.7547,-271.3097 107.74,-270.8555"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="395.5,-277.5015 148.5,-277.5015 148.5,-208.299 395.5,-208.299 395.5,-277.5015"/>
<text text-anchor="middle" x="272" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;walk/path&quot;</text>
<text text-anchor="middle" x="272" y="-247.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">local lfs = require &quot;lfs&quot;</text>
<text text-anchor="middle" x="272" y="-231.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="272" y="-216.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">local isfile = pl_path.isfile</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M316.072,-445.7233C308.6304,-411.4764 292.2789,-336.2255 281.7208,-287.6363"/>
<polygon fill="#000000" stroke="#000000" points="285.1047,-286.7257 279.5611,-277.697 278.2643,-288.2121 285.1047,-286.7257"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="646.5,-270.1007 413.5,-270.1007 413.5,-215.6998 646.5,-215.6998 646.5,-270.1007"/>
<text text-anchor="middle" x="530" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function __tostring(file)</text>
<text text-anchor="middle" x="530" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return file.path.str</text>
<text text-anchor="middle" x="530" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M547.4452,-445.7233C544.3405,-409.6281 537.3182,-327.9835 533.1921,-280.0128"/>
<polygon fill="#000000" stroke="#000000" points="536.6775,-279.6917 532.3333,-270.0285 529.7033,-280.2916 536.6775,-279.6917"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="891,-270.1007 665,-270.1007 665,-215.6998 891,-215.6998 891,-270.1007"/>
<text text-anchor="middle" x="778" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = {}</text>
<text text-anchor="middle" x="778" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local __Files = {}</text>
<text text-anchor="middle" x="778" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">File.it = require &quot;core/check&quot;</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M760.5548,-445.7233C763.6595,-409.6281 770.6818,-327.9835 774.8079,-280.0128"/>
<polygon fill="#000000" stroke="#000000" points="778.2967,-280.2916 775.6667,-270.0285 771.3225,-279.6917 778.2967,-280.2916"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1142.5,-270.1007 909.5,-270.1007 909.5,-215.6998 1142.5,-215.6998 1142.5,-270.1007"/>
<text text-anchor="middle" x="1026" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">function File.exists(file)</text>
<text text-anchor="middle" x="1026" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return isfile(file.path.str)</text>
<text text-anchor="middle" x="1026" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_7&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M991.1097,-445.7233C997.3189,-409.6281 1011.3637,-327.9835 1019.6158,-280.0128"/>
<polygon fill="#000000" stroke="#000000" points="1023.0872,-280.4771 1021.3333,-270.0285 1016.1886,-279.2903 1023.0872,-280.4771"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1527,-409.7009 1161,-409.7009 1161,-76.0997 1527,-76.0997 1527,-409.7009"/>
<text text-anchor="middle" x="1344" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local FileMeta = { __index = File,</text>
<text text-anchor="middle" x="1344" y="-363.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__tostring = __tostring}</text>
<text text-anchor="middle" x="1344" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(file_path)</text>
<text text-anchor="middle" x="1344" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;file_str = tostring(file_path)</text>
<text text-anchor="middle" x="1344" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if __Files[file_str] then</text>
<text text-anchor="middle" x="1344" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return nil, &quot;won&#39;t make the same file twice&quot;</text>
<text text-anchor="middle" x="1344" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1344" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local file = setmetatable({}, FileMeta)</text>
<text text-anchor="middle" x="1344" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if type(file_path) == &quot;string&quot; then</text>
<text text-anchor="middle" x="1344" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;file.path = Path(file_path)</text>
<text text-anchor="middle" x="1344" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif file_path.idEst == Path</text>
<text text-anchor="middle" x="1344" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;and not file_path.isDir then</text>
<text text-anchor="middle" x="1344" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;file.path = file_path</text>
<text text-anchor="middle" x="1344" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1344" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;__Files[file_str] = true</text>
<text text-anchor="middle" x="1344" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return file</text>
<text text-anchor="middle" x="1344" y="-84.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_8&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1268.7104,-445.7233C1271.3754,-438.5442 1274.7092,-429.5632 1278.4805,-419.4037"/>
<polygon fill="#000000" stroke="#000000" points="1281.8614,-420.353 1282.0603,-409.76 1275.2989,-417.9169 1281.8614,-420.353"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1673,-262.2008 1545,-262.2008 1545,-223.5997 1673,-223.5997 1673,-262.2008"/>
<text text-anchor="middle" x="1609" y="-247.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">File.idEst = new</text>
<text text-anchor="middle" x="1609" y="-231.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_9&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1537.3831,-445.7233C1550.8741,-407.5161 1582.3857,-318.2734 1598.741,-271.9542"/>
<polygon fill="#000000" stroke="#000000" points="1602.0541,-273.0833 1602.0834,-262.4885 1595.4535,-270.7526 1602.0541,-273.0833"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="130,-40 76,-40 76,0 130,0 130,-40"/>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M103,-224.6594C103,-186.3644 103,-97.259 103,-50.2615"/>
<polygon fill="#000000" stroke="#000000" points="106.5001,-50.0893 103,-40.0893 99.5001,-50.0893 106.5001,-50.0893"/>
</g>
</g>
</svg>