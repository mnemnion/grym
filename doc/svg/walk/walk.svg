<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2483pt" height="950pt"
 viewBox="0.00 0.00 2482.50 950.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 946.4011)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-946.4011 2478.5,-946.4011 2478.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="847.5" cy="-924.4011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="847.5" y="-920.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 91</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="847.5" cy="-852.4011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="847.5" y="-848.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;64</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M847.5,-906.2325C847.5,-898.5321 847.5,-889.3755 847.5,-880.8178"/>
<polygon fill="#000000" stroke="#000000" points="851.0001,-880.8144 847.5,-870.8144 844.0001,-880.8144 851.0001,-880.8144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="347.5" cy="-780.4011" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="347.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M789.7879,-846.5632C708.9269,-838.0164 557.4585,-820.6665 429.5,-798.4011 423.3749,-797.3353 417.0143,-796.1249 410.6668,-794.8478"/>
<polygon fill="#000000" stroke="#000000" points="411.2399,-791.3923 400.7386,-792.7969 409.8238,-798.2476 411.2399,-791.3923"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="470.5" cy="-780.4011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="470.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M788.8317,-847.53C720.9767,-840.8562 606.4278,-826.3694 511.5,-798.4011 509.0858,-797.6898 506.6265,-796.8706 504.1722,-795.982"/>
<polygon fill="#000000" stroke="#000000" points="505.4225,-792.7128 494.8359,-792.2934 502.8503,-799.2231 505.4225,-792.7128"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="593.5" cy="-780.4011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="593.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M803.5466,-839.9419C761.4808,-828.0177 697.7688,-809.9576 651.5457,-796.855"/>
<polygon fill="#000000" stroke="#000000" points="652.2442,-793.4152 641.6687,-794.0552 650.3351,-800.1498 652.2442,-793.4152"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="761.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="761.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M827.1192,-835.3381C816.0364,-826.0595 802.1512,-814.4347 790.0109,-804.2707"/>
<polygon fill="#000000" stroke="#000000" points="792.2463,-801.5775 782.3319,-797.8418 787.7527,-806.9449 792.2463,-801.5775"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="934.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="934.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;44</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M868.1178,-835.3381C879.3294,-826.0595 893.3761,-814.4347 905.6576,-804.2707"/>
<polygon fill="#000000" stroke="#000000" points="907.9534,-806.9139 913.4259,-797.8418 903.4904,-801.5211 907.9534,-806.9139"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1107.5" cy="-780.4011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1107.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M891.9002,-840.1057C941.6253,-826.3357 1021.4289,-804.2362 1068.7329,-791.1366"/>
<polygon fill="#000000" stroke="#000000" points="1069.8928,-794.4472 1078.596,-788.4053 1068.0246,-787.7011 1069.8928,-794.4472"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1359.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1359.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;63</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M902.7794,-844.6275C994.6193,-831.7125 1178.8221,-805.8089 1283.0493,-791.152"/>
<polygon fill="#000000" stroke="#000000" points="1283.774,-794.5846 1293.1891,-789.7261 1282.7991,-787.6528 1283.774,-794.5846"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2024.5" cy="-780.4011" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2024.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 65&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M907.0794,-848.7565C1103.9636,-836.7126 1733.4585,-798.2049 1950.279,-784.9414"/>
<polygon fill="#000000" stroke="#000000" points="1950.5209,-788.4332 1960.2885,-784.3291 1950.0934,-781.4463 1950.5209,-788.4332"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="256.5" cy="-552.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="256.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M445.5966,-768.7263C440.3409,-766.4727 434.7854,-764.243 429.5,-762.4011 370.0505,-741.6837 335.8148,-772.0879 292.5,-726.4011 254.9626,-686.8082 252.0803,-618.913 253.9054,-580.5926"/>
<polygon fill="#000000" stroke="#000000" points="257.4264,-580.363 254.5547,-570.1648 250.4399,-579.9279 257.4264,-580.363"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="625.5,-726.2016 301.5,-726.2016 301.5,-378 625.5,-378 625.5,-726.2016"/>
<text text-anchor="middle" x="463.5" y="-711.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="463.5" y="-679.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="463.5" y="-664.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="463.5" y="-649.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="463.5" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="463.5" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="463.5" y="-586.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="463.5" y="-571.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="463.5" y="-556.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="463.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="463.5" y="-525.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="463.5" y="-509.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="463.5" y="-494.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="463.5" y="-479.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="463.5" y="-463.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="463.5" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="463.5" y="-432.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="463.5" y="-417.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="463.5" y="-386.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_4&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M583.2991,-762.4868C579.0956,-755.1048 573.7915,-745.7898 567.7676,-735.211"/>
<polygon fill="#000000" stroke="#000000" points="570.7794,-733.4269 562.7896,-726.4688 564.6964,-736.8907 570.7794,-733.4269"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="743.5,-570.1008 643.5,-570.1008 643.5,-534.1008 743.5,-534.1008 743.5,-570.1008"/>
<text text-anchor="middle" x="693.5" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_5&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M756.0502,-762.1043C744.1588,-722.1806 715.8239,-627.0503 701.7394,-579.7635"/>
<polygon fill="#000000" stroke="#000000" points="705.0904,-578.7527 698.8813,-570.1679 698.3816,-580.751 705.0904,-578.7527"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1107,-617.9012 762,-617.9012 762,-486.3005 1107,-486.3005 1107,-617.9012"/>
<text text-anchor="middle" x="934.5" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="934.5" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="934.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-525.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="934.5" y="-509.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="934.5" y="-494.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M934.5,-762.1043C934.5,-733.3198 934.5,-675.8376 934.5,-628.2795"/>
<polygon fill="#000000" stroke="#000000" points="938.0001,-627.9863 934.5,-617.9863 931.0001,-627.9864 938.0001,-627.9863"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-552.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_7&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1111.0311,-762.4868C1118.8324,-722.9079 1137.5864,-627.7628 1146.9648,-580.1825"/>
<polygon fill="#000000" stroke="#000000" points="1150.423,-580.736 1148.9231,-570.2479 1143.5552,-579.3822 1150.423,-580.736"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1767,-648.4013 1198,-648.4013 1198,-455.8003 1767,-455.8003 1767,-648.4013"/>
<text text-anchor="middle" x="1482.5" y="-633.301" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="1482.5" y="-617.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="1482.5" y="-602.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="1482.5" y="-587.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="1482.5" y="-571.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="1482.5" y="-556.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="1482.5" y="-540.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1) </text>
<text text-anchor="middle" x="1482.5" y="-525.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="1482.5" y="-510.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1482.5" y="-494.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="1482.5" y="-479.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end </text>
<text text-anchor="middle" x="1482.5" y="-463.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_8&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1369.1516,-762.4868C1381.5506,-739.473 1404.0714,-697.6722 1425.7905,-657.3593"/>
<polygon fill="#000000" stroke="#000000" points="1428.8923,-658.9811 1430.5542,-648.5174 1422.7298,-655.661 1428.8923,-658.9811"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1879.5" cy="-552.1008" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="1879.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_9&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2010.3215,-762.7677C2002.1787,-752.3899 1991.9287,-738.8899 1983.5,-726.4011 1949.3547,-675.8085 1913.8035,-613.8825 1894.3811,-579.1221"/>
<polygon fill="#000000" stroke="#000000" points="1897.2654,-577.1073 1889.3452,-570.0702 1891.1483,-580.5105 1897.2654,-577.1073"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2024.5" cy="-552.1008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2024.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_9&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2024.5,-762.1043C2024.5,-722.348 2024.5,-627.8471 2024.5,-580.3608"/>
<polygon fill="#000000" stroke="#000000" points="2028.0001,-580.1679 2024.5,-570.1679 2021.0001,-580.1679 2028.0001,-580.1679"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="2152.5" cy="-552.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2152.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;85</text>
</g>
<!-- section_9&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_9&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2039.4228,-762.5129C2047.6152,-752.2754 2057.6698,-738.9972 2065.5,-726.4011 2096.2961,-676.8611 2125.086,-614.9574 2140.5943,-579.8363"/>
<polygon fill="#000000" stroke="#000000" points="2143.984,-580.8205 2144.7877,-570.2562 2137.5714,-578.0135 2143.984,-580.8205"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="2382.5" cy="-552.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2382.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;91</text>
</g>
<!-- section_9&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_9&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2087.6086,-774.9778C2132.5517,-768.7202 2192.8326,-755.2708 2238.5,-726.4011 2298.1426,-688.6967 2345.0281,-617.9979 2367.6632,-579.2347"/>
<polygon fill="#000000" stroke="#000000" points="2370.9577,-580.5246 2372.8884,-570.1072 2364.8827,-577.0469 2370.9577,-580.5246"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-242.2006 0,-242.2006 0,-171.5999 513,-171.5999 513,-242.2006"/>
<text text-anchor="middle" x="256.5" y="-195.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-179.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex. &#160;</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M256.5,-534.0274C256.5,-481.8248 256.5,-329.6519 256.5,-252.6558"/>
<polygon fill="#000000" stroke="#000000" points="260.0001,-252.3084 256.5,-242.3085 253.0001,-252.3085 260.0001,-252.3084"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1370.5,-234.2007 934.5,-234.2007 934.5,-179.5998 1370.5,-179.5998 1370.5,-234.2007"/>
<text text-anchor="middle" x="1152.5" y="-203.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="1152.5" y="-187.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">with =swap=, returning the new string.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1152.5,-534.0274C1152.5,-479.9482 1152.5,-318.582 1152.5,-244.6518"/>
<polygon fill="#000000" stroke="#000000" points="1156.0001,-244.4016 1152.5,-234.4016 1149.0001,-244.4017 1156.0001,-244.4016"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="1875.5" cy="-206.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="1875.5" y="-202.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_19&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2025.0349,-533.9124C2025.0967,-499.6418 2020.6178,-424.7393 1983.5,-377.8005 1961.3085,-349.7374 1934.1066,-369.5303 1911.5,-341.8005 1886.5365,-311.1797 1878.7674,-264.8693 1876.4174,-235.2588"/>
<polygon fill="#000000" stroke="#000000" points="1879.9032,-234.9226 1875.7749,-225.1652 1872.9173,-235.3673 1879.9032,-234.9226"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2384.5,-341.7009 1920.5,-341.7009 1920.5,-72.0997 2384.5,-72.0997 2384.5,-341.7009"/>
<text text-anchor="middle" x="2152.5" y="-326.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2152.5" y="-311.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2152.5" y="-295.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2152.5" y="-280.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2152.5" y="-265.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2152.5" y="-249.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2152.5" y="-234.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2152.5" y="-218.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2152.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2152.5" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2152.5" y="-172.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2152.5" y="-157.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2152.5" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2152.5" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file)</text>
<text text-anchor="middle" x="2152.5" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2152.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2152.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_20&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2152.5,-534.0274C2152.5,-499.9138 2152.5,-423.109 2152.5,-352.49"/>
<polygon fill="#000000" stroke="#000000" points="2156.0001,-352.1214 2152.5,-342.1215 2149.0001,-352.1215 2156.0001,-352.1214"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="2474.5,-224.9003 2402.5,-224.9003 2402.5,-188.9003 2474.5,-188.9003 2474.5,-224.9003"/>
<text text-anchor="middle" x="2438.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_21&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2385.432,-534.0274C2394.5962,-477.5362 2422.7522,-303.9744 2433.8931,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="2437.3829,-235.6427 2435.5295,-225.2113 2430.4733,-234.5217 2437.3829,-235.6427"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1902.5,-36 1848.5,-36 1848.5,0 1902.5,0 1902.5,-36"/>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1875.5,-188.7877C1875.5,-155.7841 1875.5,-85.6375 1875.5,-46.2843"/>
<polygon fill="#000000" stroke="#000000" points="1879.0001,-46.0577 1875.5,-36.0577 1872.0001,-46.0577 1879.0001,-46.0577"/>
</g>
</g>
</svg>