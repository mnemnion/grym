<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3025pt" height="2321pt"
 viewBox="0.00 0.00 3024.50 2320.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2316.8035)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2316.8035 3020.5,-2316.8035 3020.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-2294.8035" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-2290.6035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 91</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-2222.8035" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-2218.6035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;64</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1152.5,-2276.6349C1152.5,-2268.9344 1152.5,-2259.7778 1152.5,-2251.2201"/>
<polygon fill="#000000" stroke="#000000" points="1156.0001,-2251.2167 1152.5,-2241.2168 1149.0001,-2251.2168 1156.0001,-2251.2167"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="529.5" cy="-1660.7027" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="529.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1092.1006,-2220.8623C958.2916,-2215.988 645.9523,-2201.2314 611.5,-2168.8035 473.4637,-2038.8782 507.8981,-1775.3466 523.7439,-1688.881"/>
<polygon fill="#000000" stroke="#000000" points="527.1916,-1689.4854 525.6157,-1679.0084 520.3141,-1688.1814 527.1916,-1689.4854"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="666.5" cy="-1660.7027" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="666.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;5</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1092.5486,-2219.3703C980.2295,-2212.3558 747.0777,-2194.8149 721.5,-2168.8035 589.5207,-2034.5862 638.5158,-1773.8763 659.172,-1688.5032"/>
<polygon fill="#000000" stroke="#000000" points="662.5787,-1689.3066 661.5935,-1678.7577 655.7853,-1687.6186 662.5787,-1689.3066"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="781.5" cy="-1660.7027" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="781.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 6&#45;30</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1094.319,-2217.5072C1028.6656,-2210.3349 927.4866,-2195.2831 900.5,-2168.8035 763.4461,-2034.3245 771.7592,-1774.2695 778.6816,-1688.7289"/>
<polygon fill="#000000" stroke="#000000" points="782.1711,-1689.0001 779.5507,-1678.7344 775.1974,-1688.3936 782.1711,-1689.0001"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="965.5" cy="-1660.7027" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="965.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 31&#45;34</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1125.8163,-2206.6285C1112.4112,-2197.1892 1097.0335,-2184.1248 1087.5,-2168.8035 987.2528,-2007.6961 969.3759,-1770.6664 966.1901,-1689.3253"/>
<polygon fill="#000000" stroke="#000000" points="969.6734,-1688.7786 965.831,-1678.9051 962.6776,-1689.0197 969.6734,-1688.7786"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-1660.7027" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;46</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1152.5,-2204.738C1152.5,-2123.2321 1152.5,-1789.3884 1152.5,-1689.2359"/>
<polygon fill="#000000" stroke="#000000" points="1156.0001,-1688.9833 1152.5,-1678.9834 1149.0001,-1688.9834 1156.0001,-1688.9833"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1377.5" cy="-1660.7027" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1377.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;49</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1178.7578,-2206.3531C1192.0423,-2196.8358 1207.4405,-2183.7847 1217.5,-2168.8035 1325.5539,-2007.8821 1363.924,-1769.8836 1374.2849,-1688.879"/>
<polygon fill="#000000" stroke="#000000" points="1377.7603,-1689.2929 1375.5148,-1678.9388 1370.8132,-1688.4333 1377.7603,-1689.2929"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1785.5" cy="-1660.7027" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1785.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 50&#45;64</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1210.602,-2217.321C1283.967,-2209.4984 1405.1378,-2193.3114 1442.5,-2168.8035 1632.1327,-2044.4127 1743.7212,-1775.065 1775.803,-1688.2612"/>
<polygon fill="#000000" stroke="#000000" points="1779.1873,-1689.1962 1779.3211,-1678.6023 1772.61,-1686.8005 1779.1873,-1689.1962"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2216.5" cy="-1660.7027" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2216.5" y="-1656.5027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 65&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1213.1111,-2221.0212C1372.6285,-2215.9237 1795.6306,-2199.631 1850.5,-2168.8035 2053.1259,-2054.9614 2172.5714,-1776.9134 2206.4548,-1688.3084"/>
<polygon fill="#000000" stroke="#000000" points="2209.8257,-1689.2885 2210.077,-1678.6966 2203.2753,-1686.8199 2209.8257,-1689.2885"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2869,-2168.9043 2300,-2168.9043 2300,-1152.501 2869,-1152.501 2869,-2168.9043"/>
<text text-anchor="middle" x="2584.5" y="-2153.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">* Walk module</text>
<text text-anchor="middle" x="2584.5" y="-2122.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">	Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="2584.5" y="-2106.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex. &#160;</text>
<text text-anchor="middle" x="2584.5" y="-2075.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2584.5" y="-2060.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2584.5" y="-2028.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="2584.5" y="-2013.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1997.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1982.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="2584.5" y="-1951.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1920.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1904.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="2584.5" y="-1889.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="2584.5" y="-1874.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="2584.5" y="-1858.603" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="2584.5" y="-1843.203" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="2584.5" y="-1827.803" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="2584.5" y="-1812.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="2584.5" y="-1797.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="2584.5" y="-1781.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="2584.5" y="-1766.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="2584.5" y="-1734.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="2584.5" y="-1719.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2584.5" y="-1688.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2584.5" y="-1672.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
<text text-anchor="middle" x="2584.5" y="-1657.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2584.5" y="-1625.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2584.5" y="-1610.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="2584.5" y="-1595.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="2584.5" y="-1579.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2584.5" y="-1548.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="2584.5" y="-1532.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="2584.5" y="-1517.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="2584.5" y="-1502.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2584.5" y="-1486.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2584.5" y="-1439.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="2584.5" y="-1423.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">with =swap=, returning the new string.</text>
<text text-anchor="middle" x="2584.5" y="-1392.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2584.5" y="-1377.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="2584.5" y="-1361.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="2584.5" y="-1346.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="2584.5" y="-1330.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="2584.5" y="-1315.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="2584.5" y="-1300.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="2584.5" y="-1284.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1) </text>
<text text-anchor="middle" x="2584.5" y="-1269.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="2584.5" y="-1253.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2584.5" y="-1238.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="2584.5" y="-1223.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end </text>
<text text-anchor="middle" x="2584.5" y="-1207.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2584.5" y="-1192.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2584.5" y="-1160.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">**</text>
</g>
<!-- section_1&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>section_1&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1213.3143,-2221.5307C1434.0073,-2216.7125 2184.8854,-2198.5106 2290.4697,-2167.2912"/>
<polygon fill="#000000" stroke="#000000" points="2291.9159,-2170.4825 2299.9034,-2163.5217 2289.3185,-2163.9822 2291.9159,-2170.4825"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-930.8019 0,-930.8019 0,-876.2011 513,-876.2011 513,-930.8019"/>
<text text-anchor="middle" x="256.5" y="-899.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-884.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex. &#160;</text>
</g>
<!-- block_3&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_3&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M670.5426,-1642.6106C685.3024,-1571.5835 729.4859,-1308.1085 611.5,-1152.6018 585.4601,-1118.281 558.6951,-1138.3395 521.5,-1116.6018 431.9924,-1064.2915 340.5889,-983.4745 292.0073,-937.8737"/>
<polygon fill="#000000" stroke="#000000" points="294.2593,-935.1864 284.5848,-930.8672 289.4542,-940.2768 294.2593,-935.1864"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="603.5" cy="-903.5015" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="603.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- block_4&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>block_4&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M783.4657,-1642.4307C790.0168,-1573.9107 806.176,-1327.2384 721.5,-1152.6018 711.6279,-1132.2415 697.8315,-1135.5738 685.5,-1116.6018 646.1663,-1056.0871 621.3044,-973.859 610.2251,-931.4129"/>
<polygon fill="#000000" stroke="#000000" points="613.5644,-930.343 607.7048,-921.516 606.7809,-932.0705 613.5644,-930.343"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="748.5,-921.5015 694.5,-921.5015 694.5,-885.5015 748.5,-885.5015 748.5,-921.5015"/>
</g>
<!-- block_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>block_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780.0466,-1642.3604C772.0554,-1541.5116 733.473,-1054.6004 723.7355,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="727.2134,-931.2946 722.9343,-921.6023 720.2352,-931.8476 727.2134,-931.2946"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="843.5" cy="-903.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="843.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- block_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M962.5447,-1642.3604C946.296,-1541.5116 867.845,-1054.6004 848.0455,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="851.4626,-930.9182 846.4164,-921.6023 844.5517,-932.0318 851.4626,-930.9182"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="992.5,-921.5015 938.5,-921.5015 938.5,-885.5015 992.5,-885.5015 992.5,-921.5015"/>
</g>
<!-- block_5&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>block_5&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M965.5,-1642.3604C965.5,-1541.5116 965.5,-1054.6004 965.5,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="969.0001,-931.6023 965.5,-921.6023 962.0001,-931.6024 969.0001,-931.6023"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="1087.5" cy="-903.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1087.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;44</text>
</g>
<!-- block_6&#45;&gt;codeblock_17 -->
<g id="edge17" class="edge">
<title>block_6&#45;&gt;codeblock_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1150.9255,-1642.3604C1142.2683,-1541.5116 1100.4707,-1054.6004 1089.9218,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="1093.3964,-931.2663 1089.0538,-921.6023 1086.422,-931.8651 1093.3964,-931.2663"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1236.5,-921.5015 1182.5,-921.5015 1182.5,-885.5015 1236.5,-885.5015 1236.5,-921.5015"/>
</g>
<!-- block_6&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>block_6&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1153.8808,-1642.3604C1161.4724,-1541.5116 1198.1257,-1054.6004 1207.3763,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="1210.8768,-931.8369 1208.1374,-921.6023 1203.8966,-931.3114 1210.8768,-931.8369"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1690.5,-922.8021 1254.5,-922.8021 1254.5,-884.2009 1690.5,-884.2009 1690.5,-922.8021"/>
<text text-anchor="middle" x="1472.5" y="-907.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="1472.5" y="-892.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">with =swap=, returning the new string.</text>
</g>
<!-- block_7&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_7&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1379.8013,-1642.3604C1392.4116,-1541.8491 1453.1345,-1057.8547 1468.8042,-932.9593"/>
<polygon fill="#000000" stroke="#000000" points="1472.285,-933.3303 1470.0571,-922.9723 1465.3394,-932.4588 1472.285,-933.3303"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1785.5" cy="-903.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1785.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;63</text>
</g>
<!-- block_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>block_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1785.5,-1642.3604C1785.5,-1541.5116 1785.5,-1054.6004 1785.5,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="1789.0001,-931.6023 1785.5,-921.6023 1782.0001,-931.6024 1789.0001,-931.6023"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1934.5,-921.5015 1880.5,-921.5015 1880.5,-885.5015 1934.5,-885.5015 1934.5,-921.5015"/>
</g>
<!-- block_8&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_8&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1788.4553,-1642.3604C1804.704,-1541.5116 1883.155,-1054.6004 1902.9545,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="1906.4483,-932.0318 1904.5836,-921.6023 1899.5374,-930.9182 1906.4483,-932.0318"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="2047.5" cy="-903.5015" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="2047.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2212.4891,-1642.7321C2190.1472,-1542.6293 2081.0729,-1053.924 2053.727,-931.4012"/>
<polygon fill="#000000" stroke="#000000" points="2057.1427,-930.6375 2051.5484,-921.64 2050.3108,-932.1623 2057.1427,-930.6375"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="2216.5" cy="-903.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2216.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 65&#45;66</text>
</g>
<!-- section_9&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2216.5,-1642.3604C2216.5,-1541.5116 2216.5,-1054.6004 2216.5,-931.7135"/>
<polygon fill="#000000" stroke="#000000" points="2220.0001,-931.6023 2216.5,-921.6023 2213.0001,-931.6024 2220.0001,-931.6023"/>
</g>
<!-- block_26 -->
<g id="node27" class="node">
<title>block_26</title>
<ellipse fill="none" stroke="#000000" cx="2346.5" cy="-903.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2346.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 67&#45;88</text>
</g>
<!-- section_9&#45;&gt;block_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;block_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2218.6252,-1642.6197C2226.4786,-1576.7119 2255.24,-1343.2538 2290.5,-1152.6018 2305.4572,-1071.7279 2328.1508,-977.2292 2339.5089,-931.341"/>
<polygon fill="#000000" stroke="#000000" points="2342.9314,-932.081 2341.9477,-921.5319 2336.1382,-930.3919 2342.9314,-932.081"/>
</g>
<!-- block_27 -->
<g id="node28" class="node">
<title>block_27</title>
<ellipse fill="none" stroke="#000000" cx="2478.5" cy="-903.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2478.5" y="-899.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 89&#45;91</text>
</g>
<!-- section_9&#45;&gt;block_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;block_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2212.9561,-1642.6767C2199.9372,-1570.7855 2161.9116,-1301.2646 2290.5,-1152.6018 2327.2053,-1110.1664 2371.5209,-1155.9684 2411.5,-1116.6018 2462.7939,-1066.0938 2474.9281,-976.796 2477.7231,-931.5132"/>
<polygon fill="#000000" stroke="#000000" points="2481.2192,-931.6782 2478.2306,-921.5137 2474.2282,-931.3234 2481.2192,-931.6782"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3016.5,-1116.7022 2552.5,-1116.7022 2552.5,-690.3007 3016.5,-690.3007 3016.5,-1116.7022"/>
<text text-anchor="middle" x="2784.5" y="-1101.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">** Update on change</text>
<text text-anchor="middle" x="2784.5" y="-1070.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2784.5" y="-1054.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2784.5" y="-1039.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2784.5" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2784.5" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2784.5" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2784.5" y="-977.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2784.5" y="-962.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2784.5" y="-946.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2784.5" y="-931.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2784.5" y="-916.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2784.5" y="-900.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2784.5" y="-885.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2784.5" y="-869.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2784.5" y="-854.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file)</text>
<text text-anchor="middle" x="2784.5" y="-839.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2784.5" y="-823.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2784.5" y="-808.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2784.5" y="-792.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2784.5" y="-729.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2784.5" y="-714.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
<text text-anchor="middle" x="2784.5" y="-698.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
</g>
<!-- section_9&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>section_9&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2212.447,-1642.6061C2197.1979,-1569.2946 2150.9681,-1291.6768 2290.5,-1152.6018 2368.6646,-1074.6932 2436.4477,-1159.1644 2542.8171,-1116.4866"/>
<polygon fill="#000000" stroke="#000000" points="2544.4265,-1119.604 2552.2172,-1112.4238 2541.6493,-1113.1784 2544.4265,-1119.604"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="765.5,-654.2016 441.5,-654.2016 441.5,-306 765.5,-306 765.5,-654.2016"/>
<text text-anchor="middle" x="603.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="603.5" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="603.5" y="-592.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="603.5" y="-577.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="603.5" y="-561.601" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="603.5" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="603.5" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="603.5" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="603.5" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="603.5" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="603.5" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="603.5" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="603.5" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="603.5" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="603.5" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="603.5" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="603.5" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="603.5" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="603.5" y="-314.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M603.5,-885.3085C603.5,-846.5962 603.5,-752.4073 603.5,-664.5758"/>
<polygon fill="#000000" stroke="#000000" points="607.0001,-664.4527 603.5,-654.4527 600.0001,-664.4528 607.0001,-664.4527"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="893.5,-498.1008 793.5,-498.1008 793.5,-462.1008 893.5,-462.1008 893.5,-498.1008"/>
<text text-anchor="middle" x="843.5" y="-476.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M843.5,-885.3085C843.5,-818.9432 843.5,-589.5373 843.5,-508.6251"/>
<polygon fill="#000000" stroke="#000000" points="847.0001,-508.226 843.5,-498.226 840.0001,-508.2261 847.0001,-508.226"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1260,-545.9012 915,-545.9012 915,-414.3005 1260,-414.3005 1260,-545.9012"/>
<text text-anchor="middle" x="1087.5" y="-530.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="1087.5" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="1087.5" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1087.5" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="1087.5" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="1087.5" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="1087.5" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1087.5,-885.3085C1087.5,-829.3 1087.5,-657.1676 1087.5,-556.1711"/>
<polygon fill="#000000" stroke="#000000" points="1091.0001,-556.0247 1087.5,-546.0248 1084.0001,-556.0248 1091.0001,-556.0247"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2068,-576.4013 1499,-576.4013 1499,-383.8003 2068,-383.8003 2068,-576.4013"/>
<text text-anchor="middle" x="1783.5" y="-561.301" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="1783.5" y="-545.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="1783.5" y="-530.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="1783.5" y="-515.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="1783.5" y="-499.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="1783.5" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="1783.5" y="-468.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1) </text>
<text text-anchor="middle" x="1783.5" y="-453.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="1783.5" y="-438.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1783.5" y="-422.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="1783.5" y="-407.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end </text>
<text text-anchor="middle" x="1783.5" y="-391.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1785.4141,-885.3085C1785.1746,-834.6048 1784.4855,-688.7328 1784.0032,-586.6241"/>
<polygon fill="#000000" stroke="#000000" points="1787.503,-586.5576 1783.9557,-576.5742 1780.5031,-586.5907 1787.503,-586.5576"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2140.5,-498.1008 2086.5,-498.1008 2086.5,-462.1008 2140.5,-462.1008 2140.5,-498.1008"/>
</g>
<!-- block_25&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_25&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2211.256,-885.4666C2199.4495,-844.5648 2170.1994,-741.5436 2149.5,-654.4011 2137.3336,-603.1818 2125.416,-542.936 2118.8048,-508.3648"/>
<polygon fill="#000000" stroke="#000000" points="2122.2353,-507.6688 2116.9291,-498.4985 2115.3585,-508.9763 2122.2353,-507.6688"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2235.5" cy="-480.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2235.5" y="-475.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;85</text>
</g>
<!-- block_26&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>block_26&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2341.7305,-885.3085C2324.2964,-818.8075 2263.944,-588.5983 2242.8484,-508.1306"/>
<polygon fill="#000000" stroke="#000000" points="2246.1734,-507.0116 2240.2518,-498.226 2239.4022,-508.7868 2246.1734,-507.0116"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2384.5,-500.1008 2330.5,-500.1008 2330.5,-460.1008 2384.5,-460.1008 2384.5,-500.1008"/>
</g>
<!-- block_26&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>block_26&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2346.9727,-885.3085C2348.6846,-819.4134 2354.5726,-592.7799 2356.7137,-510.3673"/>
<polygon fill="#000000" stroke="#000000" points="2360.2177,-510.2541 2356.9787,-500.1666 2353.2201,-510.0722 2360.2177,-510.2541"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="2479.5" cy="-480.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2479.5" y="-475.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;91</text>
</g>
<!-- block_27&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>block_27&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2478.543,-885.3085C2478.6997,-818.9432 2479.2415,-589.5373 2479.4326,-508.6251"/>
<polygon fill="#000000" stroke="#000000" points="2482.9335,-508.2343 2479.4572,-498.226 2475.9335,-508.2177 2482.9335,-508.2343"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2628.5,-498.1008 2574.5,-498.1008 2574.5,-462.1008 2628.5,-462.1008 2628.5,-498.1008"/>
</g>
<!-- block_27&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>block_27&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2482.4174,-885.2666C2490.8331,-847.7313 2512.4277,-759.5524 2543.5,-690.4011 2551.1854,-673.2973 2558.6126,-671.8415 2565.5,-654.4011 2584.991,-605.0459 2594.5322,-543.4702 2598.7017,-508.2809"/>
<polygon fill="#000000" stroke="#000000" points="2602.1902,-508.5782 2599.8282,-498.25 2595.2339,-507.7969 2602.1902,-508.5782"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2446.5,-269.7009 1982.5,-269.7009 1982.5,-.0997 2446.5,-.0997 2446.5,-269.7009"/>
<text text-anchor="middle" x="2214.5" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2214.5" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2214.5" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2214.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2214.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2214.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2214.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2214.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2214.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2214.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2214.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2214.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2214.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2214.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file)</text>
<text text-anchor="middle" x="2214.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2214.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2214.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2234.4005,-462.0274C2232.3252,-427.9138 2227.6529,-351.109 2223.3568,-280.49"/>
<polygon fill="#000000" stroke="#000000" points="2226.8269,-279.8904 2222.7261,-270.1215 2219.8398,-280.3156 2226.8269,-279.8904"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2536.5,-152.9003 2464.5,-152.9003 2464.5,-116.9003 2536.5,-116.9003 2536.5,-152.9003"/>
<text text-anchor="middle" x="2500.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2480.5995,-462.0274C2484.0361,-405.5362 2494.5946,-231.9744 2498.7724,-163.2987"/>
<polygon fill="#000000" stroke="#000000" points="2502.2723,-163.4054 2499.3861,-153.2113 2495.2852,-162.9803 2502.2723,-163.4054"/>
</g>
</g>
</svg>