<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2986pt" height="951pt"
 viewBox="0.00 0.00 2985.50 951.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 947.0011)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-947.0011 2981.5,-947.0011 2981.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="959.5" cy="-925.0011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="959.5" y="-920.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 95</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="959.5" cy="-853.0011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="959.5" y="-848.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;67</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M959.5,-906.8325C959.5,-899.132 959.5,-889.9754 959.5,-881.4177"/>
<polygon fill="#000000" stroke="#000000" points="963.0001,-881.4143 959.5,-871.4144 956.0001,-881.4144 963.0001,-881.4143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="217.5" cy="-781.0011" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="217.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M901.6466,-847.5168C799.7524,-837.841 581.6277,-817.0534 397.5,-799.0011 364.0787,-795.7244 327.1735,-792.0446 295.5255,-788.8702"/>
<polygon fill="#000000" stroke="#000000" points="295.7455,-785.3748 285.4459,-787.8584 295.0463,-792.3398 295.7455,-785.3748"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="438.5" cy="-781.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="438.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M901.7947,-847.1209C818.931,-838.3711 661.5542,-820.6123 528.5,-799.0011 512.1143,-796.3397 494.1601,-792.8634 478.6276,-789.6763"/>
<polygon fill="#000000" stroke="#000000" points="479.3143,-786.2442 468.8111,-787.6351 477.8891,-793.0977 479.3143,-786.2442"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="610.5" cy="-781.0011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="610.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M909.4968,-842.6852C848.2738,-830.0547 744.3891,-808.6229 676.6158,-794.641"/>
<polygon fill="#000000" stroke="#000000" points="676.9755,-791.1416 666.4746,-792.5489 675.5611,-797.9972 676.9755,-791.1416"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="802.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="802.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;36</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M926.2043,-837.7317C903.1378,-827.1535 872.172,-812.9526 846.9928,-801.4054"/>
<polygon fill="#000000" stroke="#000000" points="848.2032,-798.1101 837.6544,-797.1229 845.2852,-804.4729 848.2032,-798.1101"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1011.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1011.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;47</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3539,-835.2033C978.479,-826.7225 985.925,-816.4126 992.672,-807.0707"/>
<polygon fill="#000000" stroke="#000000" points="995.5962,-808.9997 998.6137,-798.8436 989.9214,-804.9012 995.5962,-808.9997"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1390.5" cy="-781.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1390.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1012.7813,-844.1003C1099.9696,-829.5352 1271.2456,-800.9229 1349.6098,-787.8319"/>
<polygon fill="#000000" stroke="#000000" points="1350.3004,-791.2652 1359.587,-786.1652 1349.147,-784.3608 1350.3004,-791.2652"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1705.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1705.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;66</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1017.4166,-847.4113C1149.1838,-834.6938 1471.7093,-803.5653 1623.7113,-788.8949"/>
<polygon fill="#000000" stroke="#000000" points="1624.2971,-792.3547 1633.9145,-787.9101 1623.6245,-785.3871 1624.2971,-792.3547"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2434.5" cy="-781.0011" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2434.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 68&#45;95</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1019.6093,-850.0669C1253.3757,-838.656 2101.7143,-797.2455 2359.615,-784.6565"/>
<polygon fill="#000000" stroke="#000000" points="2359.815,-788.151 2369.6324,-784.1675 2359.4736,-781.1593 2359.815,-788.151"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="211,-570.7008 104,-570.7008 104,-534.7008 211,-534.7008 211,-570.7008"/>
<text text-anchor="middle" x="157.5" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">* Walk module</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M212.6914,-762.7042C202.221,-722.8642 177.3024,-628.0489 164.8484,-580.6615"/>
<polygon fill="#000000" stroke="#000000" points="168.1752,-579.5498 162.2482,-570.7679 161.4051,-581.3291 168.1752,-579.5498"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="256.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="256.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M406.6798,-778.1131C373.186,-773.319 321.3939,-760.6099 292.5,-727.0011 257.024,-685.7362 253.3215,-618.7557 254.4653,-580.9713"/>
<polygon fill="#000000" stroke="#000000" points="257.9747,-580.833 254.9198,-570.6882 250.9816,-580.5239 257.9747,-580.833"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="625.5,-726.8016 301.5,-726.8016 301.5,-378.6 625.5,-378.6 625.5,-726.8016"/>
<text text-anchor="middle" x="463.5" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="463.5" y="-680.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="463.5" y="-665.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="463.5" y="-649.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="463.5" y="-634.201" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="463.5" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="463.5" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="463.5" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="463.5" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="463.5" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="463.5" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="463.5" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="463.5" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="463.5" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="463.5" y="-464.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="463.5" y="-448.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="463.5" y="-433.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="463.5" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="463.5" y="-386.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M598.9652,-763.0868C594.1649,-755.6317 588.0953,-746.2052 581.2,-735.4964"/>
<polygon fill="#000000" stroke="#000000" points="584.1301,-733.5819 575.7736,-727.0688 578.2446,-737.3715 584.1301,-733.5819"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="891,-587.3021 644,-587.3021 644,-518.0995 891,-518.0995 891,-587.3021"/>
<text text-anchor="middle" x="767.5" y="-572.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
<text text-anchor="middle" x="767.5" y="-556.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">W.Path = require &quot;walk/path&quot;</text>
<text text-anchor="middle" x="767.5" y="-541.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">W.Dir &#160;= require &quot;walk/directory&quot;</text>
<text text-anchor="middle" x="767.5" y="-526.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">W.File = require &quot;walk/file&quot;</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M799.695,-762.7042C794.2468,-727.1667 782.0926,-647.8866 774.3749,-597.5445"/>
<polygon fill="#000000" stroke="#000000" points="777.8216,-596.9297 772.8465,-587.5756 770.9024,-597.9905 777.8216,-596.9297"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1254,-618.5012 909,-618.5012 909,-486.9004 1254,-486.9004 1254,-618.5012"/>
<text text-anchor="middle" x="1081.5" y="-603.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="1081.5" y="-588.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="1081.5" y="-572.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1081.5" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="1081.5" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="1081.5" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="1081.5" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1017.1101,-762.7042C1025.9728,-733.7991 1043.7086,-675.9551 1058.3258,-628.2818"/>
<polygon fill="#000000" stroke="#000000" points="1061.7133,-629.173 1061.2986,-618.5863 1055.0209,-627.121 1061.7133,-629.173"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1299.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="1299.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_7&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1370.78,-766.6249C1358.7499,-756.8021 1344.0829,-742.7448 1335.5,-727.0011 1309.9663,-680.1645 1302.499,-617.2298 1300.3434,-581.21"/>
<polygon fill="#000000" stroke="#000000" points="1303.8252,-580.7562 1299.8308,-570.9432 1296.8339,-581.1053 1303.8252,-580.7562"/>
</g>
<!-- prespace_17 -->
<g id="node18" class="node">
<title>prespace_17</title>
<ellipse fill="none" stroke="#000000" cx="1390.5" cy="-552.7008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1390.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_7&#45;&gt;prespace_17 -->
<g id="edge17" class="edge">
<title>prose_7&#45;&gt;prespace_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1390.5,-762.7042C1390.5,-722.9479 1390.5,-628.447 1390.5,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="1394.0001,-580.7678 1390.5,-570.7679 1387.0001,-580.7679 1394.0001,-580.7678"/>
</g>
<!-- literal_18 -->
<g id="node19" class="node">
<title>literal_18</title>
<ellipse fill="none" stroke="#000000" cx="1486.5" cy="-552.7008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1486.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_7&#45;&gt;literal_18 -->
<g id="edge18" class="edge">
<title>prose_7&#45;&gt;literal_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1410.0738,-766.5439C1422.0457,-756.6889 1436.7026,-742.626 1445.5,-727.0011 1471.8995,-680.1137 1481.3433,-616.9461 1484.6913,-580.9497"/>
<polygon fill="#000000" stroke="#000000" points="1488.2029,-580.9552 1485.5466,-570.6988 1481.2271,-580.3731 1488.2029,-580.9552"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1562.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="1562.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_7&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1422.2145,-777.1022C1453.4854,-771.5284 1500.2873,-758.2325 1526.5,-727.0011 1561.3939,-685.4263 1565.3513,-618.8402 1564.3986,-581.1417"/>
<polygon fill="#000000" stroke="#000000" points="1567.8853,-580.7299 1563.9979,-570.8741 1560.8906,-581.0029 1567.8853,-580.7299"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2177,-649.0013 1608,-649.0013 1608,-456.4003 2177,-456.4003 2177,-649.0013"/>
<text text-anchor="middle" x="1892.5" y="-633.901" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="1892.5" y="-618.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="1892.5" y="-603.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="1892.5" y="-587.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="1892.5" y="-572.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="1892.5" y="-556.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="1892.5" y="-541.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1)</text>
<text text-anchor="middle" x="1892.5" y="-526.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="1892.5" y="-510.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1892.5" y="-495.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="1892.5" y="-479.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1892.5" y="-464.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_8&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1720.1736,-763.0868C1739.1821,-739.88 1773.8383,-697.5698 1807.1136,-656.9454"/>
<polygon fill="#000000" stroke="#000000" points="1809.8965,-659.0714 1813.5255,-649.1174 1804.4812,-654.6357 1809.8965,-659.0714"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2289.5" cy="-552.7008" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="2289.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2420.3215,-763.3677C2412.1787,-752.9898 2401.9287,-739.4898 2393.5,-727.0011 2359.3547,-676.4084 2323.8035,-614.4825 2304.3811,-579.722"/>
<polygon fill="#000000" stroke="#000000" points="2307.2654,-577.7073 2299.3452,-570.6701 2301.1483,-581.1104 2307.2654,-577.7073"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2434.5" cy="-552.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2434.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2434.5,-762.7042C2434.5,-722.9479 2434.5,-628.447 2434.5,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="2438.0001,-580.7678 2434.5,-570.7679 2431.0001,-580.7679 2438.0001,-580.7678"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2624.5" cy="-552.7008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2624.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 70&#45;88</text>
</g>
<!-- section_9&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2449.409,-763.0868C2482.9149,-722.8267 2564.2707,-625.0711 2603.1383,-578.3686"/>
<polygon fill="#000000" stroke="#000000" points="2605.9536,-580.4572 2609.6603,-570.5319 2600.5731,-575.9794 2605.9536,-580.4572"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2885.5" cy="-552.7008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2885.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 92&#45;94</text>
</g>
<!-- section_9&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2494.3005,-773.4468C2563.8421,-763.9463 2673.795,-746.4992 2710.5,-727.0011 2779.3289,-690.4385 2838.6356,-617.9341 2867.2469,-578.9536"/>
<polygon fill="#000000" stroke="#000000" points="2870.1807,-580.8693 2873.2026,-570.7146 2864.5077,-576.7685 2870.1807,-580.8693"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-242.5006 0,-242.5006 0,-171.8999 513,-171.8999 513,-242.5006"/>
<text text-anchor="middle" x="256.5" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M256.5,-534.6116C256.5,-482.3637 256.5,-330.0585 256.5,-252.9955"/>
<polygon fill="#000000" stroke="#000000" points="260.0001,-252.6392 256.5,-242.6392 253.0001,-252.6393 260.0001,-252.6392"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1351.5,-234.5007 915.5,-234.5007 915.5,-179.8998 1351.5,-179.8998 1351.5,-234.5007"/>
<text text-anchor="middle" x="1133.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="1133.5" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">with</text>
</g>
<!-- raw_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1298.2488,-534.5842C1295.4449,-501.992 1286.866,-431.8881 1262.5,-378.4005 1238.719,-326.1972 1196.8074,-274.7909 1167.2204,-242.148"/>
<polygon fill="#000000" stroke="#000000" points="1169.6974,-239.6706 1160.3579,-234.6682 1164.5394,-244.4029 1169.6974,-239.6706"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1423.5,-225.2002 1369.5,-225.2002 1369.5,-189.2002 1423.5,-189.2002 1423.5,-225.2002"/>
<text text-anchor="middle" x="1396.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_17&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prespace_17&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1390.8141,-534.6116C1391.796,-478.0714 1394.8127,-304.3587 1396.0064,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1399.5075,-235.5865 1396.1817,-225.5272 1392.5085,-235.4649 1399.5075,-235.5865"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1501.5,-225.2002 1447.5,-225.2002 1447.5,-189.2002 1501.5,-189.2002 1501.5,-225.2002"/>
<text text-anchor="middle" x="1474.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">swap</text>
</g>
<!-- literal_18&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>literal_18&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1485.8717,-534.6116C1483.908,-478.0714 1477.8745,-304.3587 1475.4872,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1478.9816,-235.3996 1475.1365,-225.5272 1471.9859,-235.6427 1478.9816,-235.3996"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1725,-225.2002 1520,-225.2002 1520,-189.2002 1725,-189.2002 1725,-225.2002"/>
<text text-anchor="middle" x="1622.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">, returning the new string.</text>
</g>
<!-- raw_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1565.6414,-534.6116C1575.4602,-478.0714 1605.6274,-304.3587 1617.564,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1621.0546,-235.9786 1619.3173,-225.5272 1614.1579,-234.7808 1621.0546,-235.9786"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2333,-225.2002 2184,-225.2002 2184,-189.2002 2333,-189.2002 2333,-225.2002"/>
<text text-anchor="middle" x="2258.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">** Update on change</text>
</g>
<!-- header_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>header_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2287.877,-534.6116C2282.8039,-478.0714 2267.2175,-304.3587 2261.0503,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="2264.5241,-235.1743 2260.1444,-225.5272 2257.5521,-235.8 2264.5241,-235.1743"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="2378.5" cy="-207.2002" rx="27" ry="18"/>
<text text-anchor="middle" x="2378.5" y="-203.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_26&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2431.568,-534.6116C2422.3824,-477.9396 2394.1164,-303.5483 2383.0293,-235.1445"/>
<polygon fill="#000000" stroke="#000000" points="2386.4579,-234.4215 2381.4029,-225.1103 2379.5481,-235.5415 2386.4579,-234.4215"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2887.5,-342.601 2423.5,-342.601 2423.5,-71.7995 2887.5,-71.7995 2887.5,-342.601"/>
<text text-anchor="middle" x="2655.5" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2655.5" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2655.5" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2655.5" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2655.5" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2655.5" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2655.5" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2655.5" y="-219.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2655.5" y="-204.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2655.5" y="-188.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2655.5" y="-173.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2655.5" y="-157.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2655.5" y="-142.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2655.5" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2655.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2655.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_27&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2626.123,-534.6116C2629.1865,-500.4685 2636.0838,-423.5968 2642.4256,-352.9165"/>
<polygon fill="#000000" stroke="#000000" points="2645.949,-352.8117 2643.3567,-342.5389 2638.977,-352.1861 2645.949,-352.8117"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2977.5,-225.2002 2905.5,-225.2002 2905.5,-189.2002 2977.5,-189.2002 2977.5,-225.2002"/>
<text text-anchor="middle" x="2941.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_28&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2888.432,-534.6116C2897.5962,-478.0714 2925.7522,-304.3587 2936.8931,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="2940.3844,-235.9584 2938.5295,-225.5272 2933.4746,-234.8383 2940.3844,-235.9584"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2405.5,-36 2351.5,-36 2351.5,0 2405.5,0 2405.5,-36"/>
</g>
<!-- raw_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2378.5,-189.0589C2378.5,-156.0029 2378.5,-85.7449 2378.5,-46.3292"/>
<polygon fill="#000000" stroke="#000000" points="2382.0001,-46.0864 2378.5,-36.0864 2375.0001,-46.0864 2382.0001,-46.0864"/>
</g>
</g>
</svg>