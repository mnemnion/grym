<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2892pt" height="904pt"
 viewBox="0.00 0.00 2891.96 904.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 900.201)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-900.201 2887.9605,-900.201 2887.9605,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1099.5" cy="-878.201" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="1099.5" y="-874.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 88</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1099.5" cy="-806.201" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1099.5" y="-802.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;64</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1099.5,-860.0324C1099.5,-852.332 1099.5,-843.1754 1099.5,-834.6177"/>
<polygon fill="#000000" stroke="#000000" points="1103.0001,-834.6143 1099.5,-824.6143 1096.0001,-834.6143 1103.0001,-834.6143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="657.5" cy="-734.201" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="657.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1043.4939,-798.9874C972.527,-789.5745 846.553,-771.9567 739.5,-752.201 733.6234,-751.1166 727.5259,-749.9178 721.429,-748.6691"/>
<polygon fill="#000000" stroke="#000000" points="721.7125,-745.1527 711.2078,-746.5319 720.2798,-752.0046 721.7125,-745.1527"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="794.5" cy="-734.201" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="794.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;5</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1047.8936,-796.6757C997.079,-786.9166 917.4322,-770.6008 849.5,-752.201 846.0998,-751.2801 842.5993,-750.2737 839.0897,-749.2227"/>
<polygon fill="#000000" stroke="#000000" points="839.8385,-745.7906 829.2506,-746.1759 837.7678,-752.4774 839.8385,-745.7906"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="909.5" cy="-734.201" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="909.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 6&#45;30</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1061.9621,-791.9761C1030.8577,-780.1892 986.5891,-763.4137 953.7609,-750.9736"/>
<polygon fill="#000000" stroke="#000000" points="954.9887,-747.696 944.3973,-747.4253 952.5082,-754.2418 954.9887,-747.696"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1034.5" cy="-734.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1034.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 31&#45;34</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1083.7653,-788.7718C1075.7607,-779.9052 1065.8876,-768.9688 1057.0869,-759.2204"/>
<polygon fill="#000000" stroke="#000000" points="1059.6141,-756.7966 1050.3151,-751.7193 1054.4182,-761.4873 1059.6141,-756.7966"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1164.5" cy="-734.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1164.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;46</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1115.2347,-788.7718C1123.2393,-779.9052 1133.1124,-768.9688 1141.9131,-759.2204"/>
<polygon fill="#000000" stroke="#000000" points="1144.5818,-761.4873 1148.6849,-751.7193 1139.3859,-756.7966 1144.5818,-761.4873"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1433.5" cy="-734.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1433.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;49</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1148.7829,-795.5772C1209.6717,-782.4515 1313.0396,-760.1685 1377.0554,-746.3687"/>
<polygon fill="#000000" stroke="#000000" points="1377.9413,-749.7582 1386.9791,-744.2295 1376.4661,-742.9154 1377.9413,-749.7582"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1632.5" cy="-734.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1632.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 50&#45;64</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1154.7822,-798.7333C1255.0362,-785.1905 1466.133,-756.6746 1570.8702,-742.5263"/>
<polygon fill="#000000" stroke="#000000" points="1571.5301,-745.969 1580.9715,-741.1617 1570.5929,-739.032 1571.5301,-745.969"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2429.5" cy="-734.201" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2429.5" y="-730.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 65&#45;88</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1159.6665,-802.9439C1376.2796,-791.2175 2116.1007,-751.167 2354.6847,-738.2512"/>
<polygon fill="#000000" stroke="#000000" points="2355.1934,-741.7289 2364.9895,-737.6933 2354.8149,-734.7391 2355.1934,-741.7289"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="444.5" cy="-662.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="444.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_3&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>block_3&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M760.0886,-722.1502C753.3119,-720.0012 746.2192,-717.9072 739.5,-716.201 650.1852,-693.5221 543.3675,-676.3913 485.9367,-667.977"/>
<polygon fill="#000000" stroke="#000000" points="486.2019,-664.4789 475.8032,-666.5079 485.1975,-671.4065 486.2019,-664.4789"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="724.5" cy="-662.201" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="724.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- block_4&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_4&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M875.1365,-720.8271C846.5379,-709.6969 805.4711,-693.7141 773.4374,-681.247"/>
<polygon fill="#000000" stroke="#000000" points="774.3983,-677.8652 763.8098,-677.5 771.8595,-684.3886 774.3983,-677.8652"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="957.5" cy="-662.201" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="957.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- block_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1016.2521,-717.138C1006.5897,-708.1031 994.5482,-696.8435 983.8867,-686.8743"/>
<polygon fill="#000000" stroke="#000000" points="986.1158,-684.1669 976.4211,-679.8934 981.3348,-689.2799 986.1158,-684.1669"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1164.5" cy="-662.201" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1164.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;44</text>
</g>
<!-- block_6&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>block_6&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1164.5,-716.0324C1164.5,-708.332 1164.5,-699.1754 1164.5,-690.6177"/>
<polygon fill="#000000" stroke="#000000" points="1168.0001,-690.6143 1164.5,-680.6143 1161.0001,-690.6143 1168.0001,-690.6143"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="1538.5" cy="-662.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1538.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_7&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>block_7&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1457.3261,-717.8631C1472.744,-707.2909 1492.9211,-693.4551 1509.3016,-682.2228"/>
<polygon fill="#000000" stroke="#000000" points="1511.6889,-684.8296 1517.9569,-676.2877 1507.7302,-679.0565 1511.6889,-684.8296"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="1667.5" cy="-662.201" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1667.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;63</text>
</g>
<!-- block_8&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>block_8&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1641.1517,-716.4033C1645.1181,-708.2438 1649.9074,-698.3914 1654.309,-689.3368"/>
<polygon fill="#000000" stroke="#000000" points="1657.4805,-690.818 1658.7047,-680.2941 1651.185,-687.7576 1657.4805,-690.818"/>
</g>
<!-- header_22 -->
<g id="node23" class="node">
<title>header_22</title>
<ellipse fill="none" stroke="#000000" cx="2260.5" cy="-662.201" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="2260.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_22 -->
<g id="edge22" class="edge">
<title>section_9&#45;&gt;header_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2393.6594,-718.9317C2368.8711,-708.371 2335.608,-694.1997 2308.5287,-682.6629"/>
<polygon fill="#000000" stroke="#000000" points="2309.804,-679.4019 2299.2323,-678.7024 2307.0603,-685.8418 2309.804,-679.4019"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2429.5" cy="-662.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2429.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 65&#45;66</text>
</g>
<!-- section_9&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_9&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.5,-716.0324C2429.5,-708.332 2429.5,-699.1754 2429.5,-690.6177"/>
<polygon fill="#000000" stroke="#000000" points="2433.0001,-690.6143 2429.5,-680.6143 2426.0001,-690.6143 2433.0001,-690.6143"/>
</g>
<!-- block_24 -->
<g id="node25" class="node">
<title>block_24</title>
<ellipse fill="none" stroke="#000000" cx="2559.5" cy="-662.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2559.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 67&#45;85</text>
</g>
<!-- section_9&#45;&gt;block_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;block_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2458.6745,-718.0428C2477.5007,-707.616 2502.1577,-693.9598 2522.3756,-682.7622"/>
<polygon fill="#000000" stroke="#000000" points="2524.2636,-685.7176 2531.3157,-677.8108 2520.872,-679.5941 2524.2636,-685.7176"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="2767.5" cy="-662.201" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2767.5" y="-658.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 86&#45;88</text>
</g>
<!-- section_9&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2481.5718,-723.1088C2543.6205,-709.8913 2646.916,-687.8876 2710.896,-674.2587"/>
<polygon fill="#000000" stroke="#000000" points="2711.7632,-677.6526 2720.8145,-672.1459 2710.3047,-670.8062 2711.7632,-677.6526"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-461.2012 0,-461.2012 0,-406.6003 513,-406.6003 513,-461.2012"/>
<text text-anchor="middle" x="256.5" y="-430.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-414.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex. &#160;</text>
</g>
<!-- prose_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>prose_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M430.9795,-645.7822C400.7531,-609.0765 327.1282,-519.669 285.8283,-469.516"/>
<polygon fill="#000000" stroke="#000000" points="288.3031,-467.0154 279.2444,-461.5208 282.8995,-471.4652 288.3031,-467.0154"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="855.5,-608.0016 531.5,-608.0016 531.5,-259.7999 855.5,-259.7999 855.5,-608.0016"/>
<text text-anchor="middle" x="693.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="693.5" y="-561.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="693.5" y="-546.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="693.5" y="-530.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="693.5" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="693.5" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="693.5" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="693.5" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="693.5" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="693.5" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="693.5" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="693.5" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="693.5" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="693.5" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="693.5" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="693.5" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="693.5" y="-314.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="693.5" y="-299.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="693.5" y="-267.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M722.0155,-643.9042C721.0673,-636.9207 719.8897,-628.2481 718.5576,-618.4378"/>
<polygon fill="#000000" stroke="#000000" points="721.9905,-617.7069 717.1767,-608.2688 715.0542,-618.6488 721.9905,-617.7069"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="973.5,-451.9007 873.5,-451.9007 873.5,-415.9007 973.5,-415.9007 973.5,-451.9007"/>
<text text-anchor="middle" x="923.5" y="-430.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M954.7751,-643.9042C948.8419,-604.0642 934.7213,-509.2488 927.6641,-461.8614"/>
<polygon fill="#000000" stroke="#000000" points="931.1256,-461.3431 926.1907,-451.9678 924.202,-462.3743 931.1256,-461.3431"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1337,-499.7011 992,-499.7011 992,-368.1004 1337,-368.1004 1337,-499.7011"/>
<text text-anchor="middle" x="1164.5" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="1164.5" y="-469.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="1164.5" y="-453.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1164.5" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="1164.5" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="1164.5" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="1164.5" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1164.5,-643.9042C1164.5,-615.1197 1164.5,-557.6375 1164.5,-510.0794"/>
<polygon fill="#000000" stroke="#000000" points="1168.0001,-509.7862 1164.5,-499.7862 1161.0001,-509.7863 1168.0001,-509.7862"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1791.5,-453.2013 1355.5,-453.2013 1355.5,-414.6002 1791.5,-414.6002 1791.5,-453.2013"/>
<text text-anchor="middle" x="1573.5" y="-438.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="1573.5" y="-422.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">with =swap=, returning the new string.</text>
</g>
<!-- prose_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>prose_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.305,-643.9042C1547.3525,-604.4577 1561.6623,-511.1164 1568.9961,-463.2793"/>
<polygon fill="#000000" stroke="#000000" points="1572.4779,-463.6643 1570.5337,-453.2493 1565.5587,-462.6034 1572.4779,-463.6643"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2379,-530.2012 1810,-530.2012 1810,-337.6003 2379,-337.6003 2379,-530.2012"/>
<text text-anchor="middle" x="2094.5" y="-515.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="2094.5" y="-499.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="2094.5" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="2094.5" y="-468.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="2094.5" y="-453.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="2094.5" y="-438.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="2094.5" y="-422.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1) </text>
<text text-anchor="middle" x="2094.5" y="-407.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="2094.5" y="-391.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2094.5" y="-376.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="2094.5" y="-361.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end </text>
<text text-anchor="middle" x="2094.5" y="-345.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1709.5413,-646.9814C1736.0681,-636.928 1770.8066,-622.928 1800.5,-608.201 1844.3888,-586.4336 1890.548,-560.5773 1932.9482,-535.5336"/>
<polygon fill="#000000" stroke="#000000" points="1934.8392,-538.4814 1941.656,-530.3707 1931.2692,-532.4601 1934.8392,-538.4814"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2429.5" cy="-433.9007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2429.5" y="-429.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_23&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>block_23&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.5,-643.9042C2429.5,-604.1479 2429.5,-509.647 2429.5,-462.1607"/>
<polygon fill="#000000" stroke="#000000" points="2433.0001,-461.9678 2429.5,-451.9678 2426.0001,-461.9679 2433.0001,-461.9678"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2559.5" cy="-433.9007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2559.5" y="-429.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;82</text>
</g>
<!-- block_24&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>block_24&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2559.5,-643.9042C2559.5,-604.1479 2559.5,-509.647 2559.5,-462.1607"/>
<polygon fill="#000000" stroke="#000000" points="2563.0001,-461.9678 2559.5,-451.9678 2556.0001,-461.9679 2563.0001,-461.9678"/>
</g>
<!-- codeblock_30 -->
<g id="node31" class="node">
<title>codeblock_30</title>
<ellipse fill="none" stroke="#000000" cx="2806.5" cy="-433.9007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2806.5" y="-429.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 86&#45;88</text>
</g>
<!-- block_25&#45;&gt;codeblock_30 -->
<g id="edge30" class="edge">
<title>block_25&#45;&gt;codeblock_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2770.6256,-643.9042C2777.4314,-604.0642 2793.6285,-509.2488 2801.7235,-461.8614"/>
<polygon fill="#000000" stroke="#000000" points="2805.1797,-462.4144 2803.4136,-451.9678 2798.2797,-461.2356 2805.1797,-462.4144"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2309.5,-129.8002 2255.5,-129.8002 2255.5,-93.8002 2309.5,-93.8002 2309.5,-129.8002"/>
</g>
<!-- prose_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>prose_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.9855,-415.7511C2429.9641,-381.5459 2425.3505,-306.7493 2388.5,-259.6004 2366.9565,-232.0363 2341.1351,-250.2754 2318.5,-223.6004 2298.388,-199.8989 2289.4632,-164.7815 2285.5336,-140.2482"/>
<polygon fill="#000000" stroke="#000000" points="2288.9672,-139.5326 2284.0972,-130.1234 2282.0366,-140.5159 2288.9672,-139.5326"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2791.5,-223.401 2327.5,-223.401 2327.5,-.1994 2791.5,-.1994 2791.5,-223.401"/>
<text text-anchor="middle" x="2559.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2559.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2559.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2559.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2559.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2559.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2559.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2559.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2559.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2559.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2559.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2559.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file)</text>
<text text-anchor="middle" x="2559.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2559.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2559.5,-415.6603C2559.5,-380.8415 2559.5,-302.2629 2559.5,-233.7391"/>
<polygon fill="#000000" stroke="#000000" points="2563.0001,-233.7084 2559.5,-223.7084 2556.0001,-233.7084 2563.0001,-233.7084"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2881.5,-129.8002 2809.5,-129.8002 2809.5,-93.8002 2881.5,-93.8002 2881.5,-129.8002"/>
<text text-anchor="middle" x="2845.5" y="-108.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2808.7086,-415.6603C2815.1976,-362.0675 2834.2392,-204.8028 2842.0732,-140.1022"/>
<polygon fill="#000000" stroke="#000000" points="2845.5882,-140.1888 2843.3157,-129.8406 2838.6389,-139.3473 2845.5882,-140.1888"/>
</g>
</g>
</svg>