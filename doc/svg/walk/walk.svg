<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2839pt" height="950pt"
 viewBox="0.00 0.00 2838.50 950.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 946.4011)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-946.4011 2834.5,-946.4011 2834.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="830.5" cy="-924.4011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="830.5" y="-920.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 91</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="830.5" cy="-852.4011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="830.5" y="-848.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;64</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.5,-906.2325C830.5,-898.5321 830.5,-889.3755 830.5,-880.8178"/>
<polygon fill="#000000" stroke="#000000" points="834.0001,-880.8144 830.5,-870.8144 827.0001,-880.8144 834.0001,-880.8144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="190.5" cy="-780.4011" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="190.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.0675,-846.4811C680.4885,-836.8663 492.5426,-817.0496 333.5,-798.4011 311.5093,-795.8226 287.6361,-792.8761 265.8089,-790.1241"/>
<polygon fill="#000000" stroke="#000000" points="265.9684,-786.6164 255.6082,-788.8334 265.0897,-793.561 265.9684,-786.6164"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="374.5" cy="-780.4011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="374.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.099,-846.3281C697.5791,-837.8871 560.9071,-821.0537 445.5,-798.4011 434.9091,-796.3223 423.5365,-793.6433 413.0647,-790.9907"/>
<polygon fill="#000000" stroke="#000000" points="413.9138,-787.5952 403.3557,-788.4759 412.1586,-794.3716 413.9138,-787.5952"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="527.5" cy="-780.4011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="527.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M782.8229,-841.0719C730.7836,-828.7061 647.2541,-808.8576 589.9996,-795.2525"/>
<polygon fill="#000000" stroke="#000000" points="590.5216,-791.7792 579.9833,-792.8724 588.9032,-798.5895 590.5216,-791.7792"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="710.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="710.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M803.5697,-836.2429C786.9421,-826.2664 765.3869,-813.3333 747.2084,-802.4262"/>
<polygon fill="#000000" stroke="#000000" points="748.9677,-799.4001 738.592,-797.2564 745.3662,-805.4026 748.9677,-799.4001"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="900.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="900.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;44</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M847.445,-834.9719C856.0863,-826.0838 866.7495,-815.1159 876.2444,-805.3497"/>
<polygon fill="#000000" stroke="#000000" points="878.7634,-807.7798 883.2247,-798.17 873.7444,-802.9002 878.7634,-807.7798"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-780.4011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M883.2262,-843.2091C966.6144,-828.6717 1127.1835,-800.6791 1202.5488,-787.5403"/>
<polygon fill="#000000" stroke="#000000" points="1203.3505,-790.9534 1212.6007,-785.7879 1202.1482,-784.0574 1203.3505,-790.9534"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1558.5" cy="-780.4011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1558.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;63</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M888.2334,-846.6912C1017.1034,-833.9458 1328.52,-803.1464 1477.0512,-788.4565"/>
<polygon fill="#000000" stroke="#000000" points="1477.4205,-791.9371 1487.0274,-787.4698 1476.7314,-784.9711 1477.4205,-791.9371"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2287.5" cy="-780.4011" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2287.5" y="-776.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 65&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M890.7907,-849.4218C1122.6621,-837.9635 1956.7193,-796.7472 2212.4332,-784.1107"/>
<polygon fill="#000000" stroke="#000000" points="2212.9153,-787.5912 2222.7304,-783.6018 2212.5698,-780.5997 2212.9153,-787.5912"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="211,-570.1008 104,-570.1008 104,-534.1008 211,-534.1008 211,-570.1008"/>
<text text-anchor="middle" x="157.5" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">* Walk module</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M187.8553,-762.1043C182.1086,-722.348 168.4489,-627.8471 161.5849,-580.3608"/>
<polygon fill="#000000" stroke="#000000" points="165.0062,-579.5643 160.1115,-570.1679 158.0782,-580.5658 165.0062,-579.5643"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="256.5" cy="-552.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="256.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M348.2836,-769.7297C329.8317,-760.8558 306.0883,-746.432 292.5,-726.4011 262.3173,-681.9081 256.5331,-617.3754 255.9244,-580.5991"/>
<polygon fill="#000000" stroke="#000000" points="259.4225,-580.1149 255.8803,-570.1298 252.4225,-580.1445 259.4225,-580.1149"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="625.5,-726.2016 301.5,-726.2016 301.5,-378 625.5,-378 625.5,-726.2016"/>
<text text-anchor="middle" x="463.5" y="-711.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="463.5" y="-679.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="463.5" y="-664.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="463.5" y="-649.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="463.5" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="463.5" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="463.5" y="-586.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="463.5" y="-571.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="463.5" y="-556.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="463.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="463.5" y="-525.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="463.5" y="-509.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="463.5" y="-494.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="463.5" y="-479.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="463.5" y="-463.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="463.5" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="463.5" y="-432.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="463.5" y="-417.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="463.5" y="-386.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M522.3708,-762.1043C520.3927,-755.0481 517.9312,-746.2673 515.1457,-736.331"/>
<polygon fill="#000000" stroke="#000000" points="518.4505,-735.1529 512.381,-726.4688 511.7103,-737.0424 518.4505,-735.1529"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="743.5,-570.1008 643.5,-570.1008 643.5,-534.1008 743.5,-534.1008 743.5,-570.1008"/>
<text text-anchor="middle" x="693.5" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M709.1376,-762.1043C706.1772,-722.348 699.1403,-627.8471 695.6043,-580.3608"/>
<polygon fill="#000000" stroke="#000000" points="699.0783,-579.8804 694.8453,-570.1679 692.0977,-580.4002 699.0783,-579.8804"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1107,-617.9012 762,-617.9012 762,-486.3005 1107,-486.3005 1107,-617.9012"/>
<text text-anchor="middle" x="934.5" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="934.5" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="934.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-525.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="934.5" y="-509.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="934.5" y="-494.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M903.2249,-762.1043C907.5207,-733.2594 916.1082,-675.5965 923.1995,-627.9806"/>
<polygon fill="#000000" stroke="#000000" points="926.6766,-628.3928 924.6879,-617.9863 919.753,-627.3617 926.6766,-628.3928"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-552.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_7&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1223.78,-766.0249C1211.7499,-756.2022 1197.0829,-742.1449 1188.5,-726.4011 1162.9663,-679.5645 1155.499,-616.6299 1153.3434,-580.6101"/>
<polygon fill="#000000" stroke="#000000" points="1156.8252,-580.1562 1152.8308,-570.3432 1149.8339,-580.5053 1156.8252,-580.1562"/>
</g>
<!-- prespace_17 -->
<g id="node18" class="node">
<title>prespace_17</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-552.1008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_7&#45;&gt;prespace_17 -->
<g id="edge17" class="edge">
<title>prose_7&#45;&gt;prespace_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1243.5,-762.1043C1243.5,-722.348 1243.5,-627.8471 1243.5,-580.3608"/>
<polygon fill="#000000" stroke="#000000" points="1247.0001,-580.1679 1243.5,-570.1679 1240.0001,-580.1679 1247.0001,-580.1679"/>
</g>
<!-- literal_18 -->
<g id="node19" class="node">
<title>literal_18</title>
<ellipse fill="none" stroke="#000000" cx="1339.5" cy="-552.1008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1339.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_7&#45;&gt;literal_18 -->
<g id="edge18" class="edge">
<title>prose_7&#45;&gt;literal_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1263.0738,-765.944C1275.0457,-756.0889 1289.7026,-742.026 1298.5,-726.4011 1324.8995,-679.5137 1334.3433,-616.3461 1337.6913,-580.3497"/>
<polygon fill="#000000" stroke="#000000" points="1341.2029,-580.3553 1338.5466,-570.0988 1334.2271,-579.7731 1341.2029,-580.3553"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1415.5" cy="-552.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1415.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_7&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1275.2145,-776.5022C1306.4854,-770.9285 1353.2873,-757.6325 1379.5,-726.4011 1414.3939,-684.8263 1418.3513,-618.2402 1417.3986,-580.5417"/>
<polygon fill="#000000" stroke="#000000" points="1420.8853,-580.13 1416.9979,-570.2741 1413.8906,-580.403 1420.8853,-580.13"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-648.4013 1461,-648.4013 1461,-455.8003 2030,-455.8003 2030,-648.4013"/>
<text text-anchor="middle" x="1745.5" y="-633.301" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="1745.5" y="-617.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="1745.5" y="-602.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="1745.5" y="-587.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="1745.5" y="-571.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="1745.5" y="-556.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="1745.5" y="-540.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1) </text>
<text text-anchor="middle" x="1745.5" y="-525.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="1745.5" y="-510.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1745.5" y="-494.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="1745.5" y="-479.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end </text>
<text text-anchor="middle" x="1745.5" y="-463.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_8&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1573.1736,-762.4868C1592.1821,-739.28 1626.8383,-696.9698 1660.1136,-656.3455"/>
<polygon fill="#000000" stroke="#000000" points="1662.8965,-658.4714 1666.5255,-648.5174 1657.4812,-654.0357 1662.8965,-658.4714"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2142.5" cy="-552.1008" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="2142.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2273.3215,-762.7677C2265.1787,-752.3899 2254.9287,-738.8899 2246.5,-726.4011 2212.3547,-675.8085 2176.8035,-613.8825 2157.3811,-579.1221"/>
<polygon fill="#000000" stroke="#000000" points="2160.2654,-577.1073 2152.3452,-570.0702 2154.1483,-580.5105 2160.2654,-577.1073"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2287.5" cy="-552.1008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2287.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2287.5,-762.1043C2287.5,-722.348 2287.5,-627.8471 2287.5,-580.3608"/>
<polygon fill="#000000" stroke="#000000" points="2291.0001,-580.1679 2287.5,-570.1679 2284.0001,-580.1679 2291.0001,-580.1679"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2477.5" cy="-552.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2477.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;85</text>
</g>
<!-- section_9&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2302.409,-762.4868C2335.9149,-722.2267 2417.2707,-624.4712 2456.1383,-577.7686"/>
<polygon fill="#000000" stroke="#000000" points="2458.9536,-579.8572 2462.6603,-569.932 2453.5731,-575.3794 2458.9536,-579.8572"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2738.5" cy="-552.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2738.5" y="-547.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;91</text>
</g>
<!-- section_9&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2347.3005,-772.8468C2416.8421,-763.3463 2526.795,-745.8992 2563.5,-726.4011 2632.3289,-689.8385 2691.6356,-617.3342 2720.2469,-578.3536"/>
<polygon fill="#000000" stroke="#000000" points="2723.1807,-580.2694 2726.2026,-570.1146 2717.5077,-576.1685 2723.1807,-580.2694"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-242.2006 0,-242.2006 0,-171.5999 513,-171.5999 513,-242.2006"/>
<text text-anchor="middle" x="256.5" y="-195.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-179.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex. &#160;</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M256.5,-534.0274C256.5,-481.8248 256.5,-329.6519 256.5,-252.6558"/>
<polygon fill="#000000" stroke="#000000" points="260.0001,-252.3084 256.5,-242.3085 253.0001,-252.3085 260.0001,-252.3084"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1204.5,-234.2007 768.5,-234.2007 768.5,-179.5998 1204.5,-179.5998 1204.5,-234.2007"/>
<text text-anchor="middle" x="986.5" y="-203.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="986.5" y="-187.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">with</text>
</g>
<!-- raw_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1151.2533,-533.9821C1148.4565,-501.3867 1139.8886,-431.2778 1115.5,-377.8005 1091.7236,-325.6656 1049.811,-274.354 1020.2226,-241.7758"/>
<polygon fill="#000000" stroke="#000000" points="1022.7043,-239.3038 1013.3597,-234.3109 1017.5512,-244.0414 1022.7043,-239.3038"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1276.5,-224.9003 1222.5,-224.9003 1222.5,-188.9003 1276.5,-188.9003 1276.5,-224.9003"/>
<text text-anchor="middle" x="1249.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_17&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prespace_17&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1243.8141,-534.0274C1244.796,-477.5362 1247.8127,-303.9744 1249.0064,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="1252.5073,-235.2706 1249.1817,-225.2113 1245.5084,-235.1489 1252.5073,-235.2706"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1354.5,-224.9003 1300.5,-224.9003 1300.5,-188.9003 1354.5,-188.9003 1354.5,-224.9003"/>
<text text-anchor="middle" x="1327.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">swap</text>
</g>
<!-- literal_18&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>literal_18&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1338.8717,-534.0274C1336.908,-477.5362 1330.8745,-303.9744 1328.4872,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="1331.9819,-235.0836 1328.1365,-225.2113 1324.9862,-235.3269 1331.9819,-235.0836"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1578,-224.9003 1373,-224.9003 1373,-188.9003 1578,-188.9003 1578,-224.9003"/>
<text text-anchor="middle" x="1475.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">, returning the new string.</text>
</g>
<!-- raw_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1418.6414,-534.0274C1428.4602,-477.5362 1458.6274,-303.9744 1470.564,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="1474.0531,-235.6629 1472.3173,-225.2113 1467.1565,-234.4642 1474.0531,-235.6629"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2186,-224.9003 2037,-224.9003 2037,-188.9003 2186,-188.9003 2186,-224.9003"/>
<text text-anchor="middle" x="2111.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">** Update on change</text>
</g>
<!-- header_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>header_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2140.877,-534.0274C2135.8039,-477.5362 2120.2175,-303.9744 2114.0503,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="2117.5249,-234.8581 2113.1444,-225.2113 2110.5529,-235.4843 2117.5249,-234.8581"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="2231.5" cy="-206.9003" rx="27" ry="18"/>
<text text-anchor="middle" x="2231.5" y="-202.7003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_26&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2284.568,-534.0274C2275.4038,-477.5362 2247.2478,-303.9744 2236.1069,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="2239.5267,-234.5217 2234.4705,-225.2113 2232.6171,-235.6427 2239.5267,-234.5217"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2740.5,-341.7009 2276.5,-341.7009 2276.5,-72.0997 2740.5,-72.0997 2740.5,-341.7009"/>
<text text-anchor="middle" x="2508.5" y="-326.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2508.5" y="-311.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2508.5" y="-295.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2508.5" y="-280.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2508.5" y="-265.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2508.5" y="-249.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2508.5" y="-234.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2508.5" y="-218.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2508.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2508.5" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2508.5" y="-172.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2508.5" y="-157.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2508.5" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2508.5" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2508.5" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2508.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2508.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_27&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2479.123,-534.0274C2482.1865,-499.9138 2489.0838,-423.109 2495.4256,-352.49"/>
<polygon fill="#000000" stroke="#000000" points="2498.9482,-352.3945 2496.3567,-342.1215 2491.9763,-351.7683 2498.9482,-352.3945"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2830.5,-224.9003 2758.5,-224.9003 2758.5,-188.9003 2830.5,-188.9003 2830.5,-224.9003"/>
<text text-anchor="middle" x="2794.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_28&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2741.432,-534.0274C2750.5962,-477.5362 2778.7522,-303.9744 2789.8931,-235.2987"/>
<polygon fill="#000000" stroke="#000000" points="2793.3829,-235.6427 2791.5295,-225.2113 2786.4733,-234.5217 2793.3829,-235.6427"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2258.5,-36 2204.5,-36 2204.5,0 2258.5,0 2258.5,-36"/>
</g>
<!-- raw_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2231.5,-188.7877C2231.5,-155.7841 2231.5,-85.6375 2231.5,-46.2843"/>
<polygon fill="#000000" stroke="#000000" points="2235.0001,-46.0577 2231.5,-36.0577 2228.0001,-46.0577 2235.0001,-46.0577"/>
</g>
</g>
</svg>