<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2839pt" height="951pt"
 viewBox="0.00 0.00 2838.50 951.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 947.0011)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-947.0011 2834.5,-947.0011 2834.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="830.5" cy="-925.0011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="830.5" y="-920.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 92</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="830.5" cy="-853.0011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="830.5" y="-848.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;64</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.5,-906.8325C830.5,-899.132 830.5,-889.9754 830.5,-881.4177"/>
<polygon fill="#000000" stroke="#000000" points="834.0001,-881.4143 830.5,-871.4144 827.0001,-881.4144 834.0001,-881.4143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="190.5" cy="-781.0011" rx="73.3717" ry="18"/>
<text text-anchor="middle" x="190.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Walk module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.0675,-847.0811C680.4885,-837.4663 492.5426,-817.6495 333.5,-799.0011 311.5093,-796.4226 287.6361,-793.4761 265.8089,-790.724"/>
<polygon fill="#000000" stroke="#000000" points="265.9684,-787.2164 255.6082,-789.4334 265.0897,-794.161 265.9684,-787.2164"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="374.5" cy="-781.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="374.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.099,-846.9281C697.5791,-838.4871 560.9071,-821.6537 445.5,-799.0011 434.9091,-796.9223 423.5365,-794.2433 413.0647,-791.5907"/>
<polygon fill="#000000" stroke="#000000" points="413.9138,-788.1952 403.3557,-789.0759 412.1586,-794.9715 413.9138,-788.1952"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="527.5" cy="-781.0011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="527.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M782.8229,-841.6719C730.7836,-829.3061 647.2541,-809.4575 589.9996,-795.8525"/>
<polygon fill="#000000" stroke="#000000" points="590.5216,-792.3791 579.9833,-793.4724 588.9032,-799.1895 590.5216,-792.3791"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="710.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="710.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M803.5697,-836.8429C786.9421,-826.8664 765.3869,-813.9333 747.2084,-803.0261"/>
<polygon fill="#000000" stroke="#000000" points="748.9677,-800.0001 738.592,-797.8563 745.3662,-806.0026 748.9677,-800.0001"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="900.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="900.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;44</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M847.445,-835.5719C856.0863,-826.6838 866.7495,-815.7159 876.2444,-805.9497"/>
<polygon fill="#000000" stroke="#000000" points="878.7634,-808.3797 883.2247,-798.77 873.7444,-803.5002 878.7634,-808.3797"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-781.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M883.2262,-843.8091C966.6144,-829.2717 1127.1835,-801.279 1202.5488,-788.1403"/>
<polygon fill="#000000" stroke="#000000" points="1203.3505,-791.5534 1212.6007,-786.3879 1202.1482,-784.6574 1203.3505,-791.5534"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1558.5" cy="-781.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1558.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;63</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M888.2334,-847.2912C1017.1034,-834.5458 1328.52,-803.7464 1477.0512,-789.0565"/>
<polygon fill="#000000" stroke="#000000" points="1477.4205,-792.5371 1487.0274,-788.0698 1476.7314,-785.5711 1477.4205,-792.5371"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2287.5" cy="-781.0011" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2287.5" y="-776.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 65&#45;92</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M890.7907,-850.0217C1122.6621,-838.5634 1956.7193,-797.3472 2212.4332,-784.7106"/>
<polygon fill="#000000" stroke="#000000" points="2212.9153,-788.1912 2222.7304,-784.2018 2212.5698,-781.1997 2212.9153,-788.1912"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="211,-570.7008 104,-570.7008 104,-534.7008 211,-534.7008 211,-570.7008"/>
<text text-anchor="middle" x="157.5" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">* Walk module</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M187.8553,-762.7042C182.1086,-722.9479 168.4489,-628.447 161.5849,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="165.0062,-580.1643 160.1115,-570.7679 158.0782,-581.1658 165.0062,-580.1643"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="256.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="256.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M348.2836,-770.3297C329.8317,-761.4557 306.0883,-747.032 292.5,-727.0011 262.3173,-682.508 256.5331,-617.9753 255.9244,-581.1991"/>
<polygon fill="#000000" stroke="#000000" points="259.4225,-580.7149 255.8803,-570.7298 252.4225,-580.7444 259.4225,-580.7149"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="625.5,-726.8016 301.5,-726.8016 301.5,-378.6 625.5,-378.6 625.5,-726.8016"/>
<text text-anchor="middle" x="463.5" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="463.5" y="-680.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="463.5" y="-665.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="463.5" y="-649.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="463.5" y="-634.201" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="463.5" y="-602.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="463.5" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="463.5" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="463.5" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="463.5" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="463.5" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="463.5" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="463.5" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="463.5" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="463.5" y="-464.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="463.5" y="-448.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="463.5" y="-433.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="463.5" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="463.5" y="-386.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M522.3708,-762.7042C520.3927,-755.648 517.9312,-746.8673 515.1457,-736.9309"/>
<polygon fill="#000000" stroke="#000000" points="518.4505,-735.7529 512.381,-727.0688 511.7103,-737.6424 518.4505,-735.7529"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="743.5,-570.7008 643.5,-570.7008 643.5,-534.7008 743.5,-534.7008 743.5,-570.7008"/>
<text text-anchor="middle" x="693.5" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local W = {}</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M709.1376,-762.7042C706.1772,-722.9479 699.1403,-628.447 695.6043,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="699.0783,-580.4803 694.8453,-570.7679 692.0977,-581.0002 699.0783,-580.4803"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1107,-618.5012 762,-618.5012 762,-486.9004 1107,-486.9004 1107,-618.5012"/>
<text text-anchor="middle" x="934.5" y="-603.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.strHas(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-588.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(epeg.anyP(substr), str)</text>
<text text-anchor="middle" x="934.5" y="-572.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="934.5" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.endsWith(substr, str)</text>
<text text-anchor="middle" x="934.5" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(L.P(string.reverse(substr)),</text>
<text text-anchor="middle" x="934.5" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;string.reverse(str))</text>
<text text-anchor="middle" x="934.5" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M903.2249,-762.7042C907.5207,-733.8594 916.1082,-676.1965 923.1995,-628.5805"/>
<polygon fill="#000000" stroke="#000000" points="926.6766,-628.9928 924.6879,-618.5863 919.753,-627.9616 926.6766,-628.9928"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1152.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="1152.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_7&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1223.78,-766.6249C1211.7499,-756.8021 1197.0829,-742.7448 1188.5,-727.0011 1162.9663,-680.1645 1155.499,-617.2298 1153.3434,-581.21"/>
<polygon fill="#000000" stroke="#000000" points="1156.8252,-580.7562 1152.8308,-570.9432 1149.8339,-581.1053 1156.8252,-580.7562"/>
</g>
<!-- prespace_17 -->
<g id="node18" class="node">
<title>prespace_17</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-552.7008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_7&#45;&gt;prespace_17 -->
<g id="edge17" class="edge">
<title>prose_7&#45;&gt;prespace_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1243.5,-762.7042C1243.5,-722.9479 1243.5,-628.447 1243.5,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="1247.0001,-580.7678 1243.5,-570.7679 1240.0001,-580.7679 1247.0001,-580.7678"/>
</g>
<!-- literal_18 -->
<g id="node19" class="node">
<title>literal_18</title>
<ellipse fill="none" stroke="#000000" cx="1339.5" cy="-552.7008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1339.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_7&#45;&gt;literal_18 -->
<g id="edge18" class="edge">
<title>prose_7&#45;&gt;literal_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1263.0738,-766.5439C1275.0457,-756.6889 1289.7026,-742.626 1298.5,-727.0011 1324.8995,-680.1137 1334.3433,-616.9461 1337.6913,-580.9497"/>
<polygon fill="#000000" stroke="#000000" points="1341.2029,-580.9552 1338.5466,-570.6988 1334.2271,-580.3731 1341.2029,-580.9552"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1415.5" cy="-552.7008" rx="27" ry="18"/>
<text text-anchor="middle" x="1415.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_7&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1275.2145,-777.1022C1306.4854,-771.5284 1353.2873,-758.2325 1379.5,-727.0011 1414.3939,-685.4263 1418.3513,-618.8402 1417.3986,-581.1417"/>
<polygon fill="#000000" stroke="#000000" points="1420.8853,-580.7299 1416.9979,-570.8741 1413.8906,-581.0029 1420.8853,-580.7299"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2030,-649.0013 1461,-649.0013 1461,-456.4003 2030,-456.4003 2030,-649.0013"/>
<text text-anchor="middle" x="1745.5" y="-633.901" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.subLastFor(match, swap, str)</text>
<text text-anchor="middle" x="1745.5" y="-618.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local trs, hctam = string.reverse(str), string.reverse(match)</text>
<text text-anchor="middle" x="1745.5" y="-603.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local first, last = W.strHas(hctam, trs)</text>
<text text-anchor="middle" x="1745.5" y="-587.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if last then</text>
<text text-anchor="middle" x="1745.5" y="-572.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; There is some way to do this without reversing the string twice,</text>
<text text-anchor="middle" x="1745.5" y="-556.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; but I can&#39;t be arsed to find it. ONE BASED INDEXES ARE A MISTAKE</text>
<text text-anchor="middle" x="1745.5" y="-541.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return string.reverse(trs:sub(1, first &#45; 1)</text>
<text text-anchor="middle" x="1745.5" y="-526.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. string.reverse(swap) .. trs:sub(last, &#45;1))</text>
<text text-anchor="middle" x="1745.5" y="-510.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1745.5" y="-495.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;didn&#39;t find an instance of &quot; .. match .. &quot; in string: &quot; .. str)</text>
<text text-anchor="middle" x="1745.5" y="-479.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1745.5" y="-464.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_8&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1573.1736,-763.0868C1592.1821,-739.88 1626.8383,-697.5698 1660.1136,-656.9454"/>
<polygon fill="#000000" stroke="#000000" points="1662.8965,-659.0714 1666.5255,-649.1174 1657.4812,-654.6357 1662.8965,-659.0714"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2142.5" cy="-552.7008" rx="94.8539" ry="18"/>
<text text-anchor="middle" x="2142.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Update on change</text>
</g>
<!-- section_9&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2273.3215,-763.3677C2265.1787,-752.9898 2254.9287,-739.4898 2246.5,-727.0011 2212.3547,-676.4084 2176.8035,-614.4825 2157.3811,-579.722"/>
<polygon fill="#000000" stroke="#000000" points="2160.2654,-577.7073 2152.3452,-570.6701 2154.1483,-581.1104 2160.2654,-577.7073"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2287.5" cy="-552.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2287.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2287.5,-762.7042C2287.5,-722.9479 2287.5,-628.447 2287.5,-580.9608"/>
<polygon fill="#000000" stroke="#000000" points="2291.0001,-580.7678 2287.5,-570.7679 2284.0001,-580.7679 2291.0001,-580.7678"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2477.5" cy="-552.7008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2477.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;85</text>
</g>
<!-- section_9&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_9&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2302.409,-763.0868C2335.9149,-722.8267 2417.2707,-625.0711 2456.1383,-578.3686"/>
<polygon fill="#000000" stroke="#000000" points="2458.9536,-580.4572 2462.6603,-570.5319 2453.5731,-575.9794 2458.9536,-580.4572"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2738.5" cy="-552.7008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2738.5" y="-548.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 89&#45;91</text>
</g>
<!-- section_9&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>section_9&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2347.3005,-773.4468C2416.8421,-763.9463 2526.795,-746.4992 2563.5,-727.0011 2632.3289,-690.4385 2691.6356,-617.9341 2720.2469,-578.9536"/>
<polygon fill="#000000" stroke="#000000" points="2723.1807,-580.8693 2726.2026,-570.7146 2717.5077,-576.7685 2723.1807,-580.8693"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-242.5006 0,-242.5006 0,-171.8999 513,-171.8999 513,-242.5006"/>
<text text-anchor="middle" x="256.5" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Contains common functions for recursively executing over some part of</text>
<text text-anchor="middle" x="256.5" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">a codex.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M256.5,-534.6116C256.5,-482.3637 256.5,-330.0585 256.5,-252.9955"/>
<polygon fill="#000000" stroke="#000000" points="260.0001,-252.6392 256.5,-242.6392 253.0001,-252.6393 260.0001,-252.6392"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1204.5,-234.5007 768.5,-234.5007 768.5,-179.8998 1204.5,-179.8998 1204.5,-234.5007"/>
<text text-anchor="middle" x="986.5" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">Finds the last match for a literal substring and replaces it</text>
<text text-anchor="middle" x="986.5" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">with</text>
</g>
<!-- raw_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1151.2488,-534.5842C1148.4449,-501.992 1139.866,-431.8881 1115.5,-378.4005 1091.719,-326.1972 1049.8074,-274.7909 1020.2204,-242.148"/>
<polygon fill="#000000" stroke="#000000" points="1022.6974,-239.6706 1013.3579,-234.6682 1017.5394,-244.4029 1022.6974,-239.6706"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1276.5,-225.2002 1222.5,-225.2002 1222.5,-189.2002 1276.5,-189.2002 1276.5,-225.2002"/>
<text text-anchor="middle" x="1249.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_17&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prespace_17&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1243.8141,-534.6116C1244.796,-478.0714 1247.8127,-304.3587 1249.0064,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1252.5075,-235.5865 1249.1817,-225.5272 1245.5085,-235.4649 1252.5075,-235.5865"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1354.5,-225.2002 1300.5,-225.2002 1300.5,-189.2002 1354.5,-189.2002 1354.5,-225.2002"/>
<text text-anchor="middle" x="1327.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">swap</text>
</g>
<!-- literal_18&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>literal_18&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1338.8717,-534.6116C1336.908,-478.0714 1330.8745,-304.3587 1328.4872,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1331.9816,-235.3996 1328.1365,-225.5272 1324.9859,-235.6427 1331.9816,-235.3996"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1578,-225.2002 1373,-225.2002 1373,-189.2002 1578,-189.2002 1578,-225.2002"/>
<text text-anchor="middle" x="1475.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">, returning the new string.</text>
</g>
<!-- raw_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1418.6414,-534.6116C1428.4602,-478.0714 1458.6274,-304.3587 1470.564,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="1474.0546,-235.9786 1472.3173,-225.5272 1467.1579,-234.7808 1474.0546,-235.9786"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2186,-225.2002 2037,-225.2002 2037,-189.2002 2186,-189.2002 2186,-225.2002"/>
<text text-anchor="middle" x="2111.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">** Update on change</text>
</g>
<!-- header_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>header_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2140.877,-534.6116C2135.8039,-478.0714 2120.2175,-304.3587 2114.0503,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="2117.5241,-235.1743 2113.1444,-225.5272 2110.5521,-235.8 2117.5241,-235.1743"/>
</g>
<!-- raw_30 -->
<g id="node31" class="node">
<title>raw_30</title>
<ellipse fill="none" stroke="#000000" cx="2231.5" cy="-207.2002" rx="27" ry="18"/>
<text text-anchor="middle" x="2231.5" y="-203.0002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_30 -->
<g id="edge30" class="edge">
<title>prose_26&#45;&gt;raw_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2284.568,-534.6116C2275.3824,-477.9396 2247.1164,-303.5483 2236.0293,-235.1445"/>
<polygon fill="#000000" stroke="#000000" points="2239.4579,-234.4215 2234.4029,-225.1103 2232.5481,-235.5415 2239.4579,-234.4215"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2740.5,-342.601 2276.5,-342.601 2276.5,-71.7995 2740.5,-71.7995 2740.5,-342.601"/>
<text text-anchor="middle" x="2508.5" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.writeOnChange(newest, current, out_file, depth)</text>
<text text-anchor="middle" x="2508.5" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="2508.5" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="2508.5" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2508.5" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="2508.5" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2508.5" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="2508.5" y="-219.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="2508.5" y="-204.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_file))</text>
<text text-anchor="middle" x="2508.5" y="-188.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="2508.5" y="-173.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2508.5" y="-157.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2508.5" y="-142.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="2508.5" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="2508.5" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2508.5" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_27&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2479.123,-534.6116C2482.1865,-500.4685 2489.0838,-423.5968 2495.4256,-352.9165"/>
<polygon fill="#000000" stroke="#000000" points="2498.949,-352.8117 2496.3567,-342.5389 2491.977,-352.1861 2498.949,-352.8117"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2830.5,-225.2002 2758.5,-225.2002 2758.5,-189.2002 2830.5,-189.2002 2830.5,-225.2002"/>
<text text-anchor="middle" x="2794.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_28&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2741.432,-534.6116C2750.5962,-478.0714 2778.7522,-304.3587 2789.8931,-235.6234"/>
<polygon fill="#000000" stroke="#000000" points="2793.3844,-235.9584 2791.5295,-225.5272 2786.4746,-234.8383 2793.3844,-235.9584"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2258.5,-36 2204.5,-36 2204.5,0 2258.5,0 2258.5,-36"/>
</g>
<!-- raw_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2231.5,-189.0589C2231.5,-156.0029 2231.5,-85.7449 2231.5,-46.3292"/>
<polygon fill="#000000" stroke="#000000" points="2235.0001,-46.0864 2231.5,-36.0864 2228.0001,-46.0864 2235.0001,-46.0864"/>
</g>
</g>
</svg>