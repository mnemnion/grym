<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="8415pt" height="1753pt"
 viewBox="0.00 0.00 8415.00 1752.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1748.6025)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1748.6025 8411,-1748.6025 8411,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1840" cy="-1726.6025" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="1840" y="-1722.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 211</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1840" cy="-1654.6025" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="1840" y="-1650.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;6</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1840,-1708.4338C1840,-1700.7334 1840,-1691.5768 1840,-1683.0191"/>
<polygon fill="#000000" stroke="#000000" points="1843.5001,-1683.0157 1840,-1673.0157 1836.5001,-1683.0158 1843.5001,-1683.0157"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1699" cy="-1582.6025" rx="91.3932" ry="18"/>
<text text-anchor="middle" x="1699" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grammar Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1810.0975,-1639.3331C1790.0799,-1629.1114 1763.4382,-1615.5071 1741.2621,-1604.1831"/>
<polygon fill="#000000" stroke="#000000" points="1742.5616,-1600.9168 1732.0638,-1599.4861 1739.3781,-1607.1511 1742.5616,-1600.9168"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1840" cy="-1582.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1840" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1840,-1636.4338C1840,-1628.7334 1840,-1619.5768 1840,-1611.0191"/>
<polygon fill="#000000" stroke="#000000" points="1843.5001,-1611.0157 1840,-1601.0157 1836.5001,-1611.0158 1843.5001,-1611.0157"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="2102" cy="-1582.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2102" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 7&#45;101</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1882.6779,-1642.8742C1927.0374,-1630.6838 1996.6879,-1611.5432 2045.5693,-1598.1101"/>
<polygon fill="#000000" stroke="#000000" points="2046.6463,-1601.444 2055.3614,-1595.4192 2044.7914,-1594.6942 2046.6463,-1601.444"/>
</g>
<!-- raw_5 -->
<g id="node6" class="node">
<title>raw_5</title>
<ellipse fill="none" stroke="#000000" cx="1695" cy="-1510.6025" rx="27" ry="18"/>
<text text-anchor="middle" x="1695" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_5 -->
<g id="edge5" class="edge">
<title>prose_3&#45;&gt;raw_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1815.7303,-1570.5513C1791.0659,-1558.3042 1752.7722,-1539.2893 1725.9426,-1525.9671"/>
<polygon fill="#000000" stroke="#000000" points="1727.4851,-1522.8253 1716.9719,-1521.5127 1724.3719,-1529.0949 1727.4851,-1522.8253"/>
</g>
<!-- header_7 -->
<g id="node8" class="node">
<title>header_7</title>
<ellipse fill="none" stroke="#000000" cx="1820" cy="-1510.6025" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="1820" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parameters</text>
</g>
<!-- section_4&#45;&gt;header_7 -->
<g id="edge7" class="edge">
<title>section_4&#45;&gt;header_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2053.8429,-1570.307C2005.5172,-1557.9686 1930.9985,-1538.9425 1879.1158,-1525.6959"/>
<polygon fill="#000000" stroke="#000000" points="1879.9347,-1522.2927 1869.3796,-1523.21 1878.2029,-1529.0752 1879.9347,-1522.2927"/>
</g>
<!-- prose_8 -->
<g id="node9" class="node">
<title>prose_8</title>
<ellipse fill="none" stroke="#000000" cx="1938" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1938" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;prose_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2067.2198,-1567.3331C2039.38,-1555.1108 2000.5246,-1538.0523 1972.7047,-1525.8387"/>
<polygon fill="#000000" stroke="#000000" points="1973.9243,-1522.5517 1963.3609,-1521.7365 1971.1103,-1528.9612 1973.9243,-1522.5517"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="2020" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2020" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2082.1501,-1565.1733C2071.0588,-1555.4346 2057.1239,-1543.199 2045.2613,-1532.7831"/>
<polygon fill="#000000" stroke="#000000" points="2047.264,-1529.8839 2037.4403,-1525.9159 2042.6454,-1535.144 2047.264,-1529.8839"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="2102" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2102" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2102,-1564.4338C2102,-1556.7334 2102,-1547.5768 2102,-1539.0191"/>
<polygon fill="#000000" stroke="#000000" points="2105.5001,-1539.0157 2102,-1529.0157 2098.5001,-1539.0158 2105.5001,-1539.0157"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="2377" cy="-1510.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2377" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 17&#45;46</text>
</g>
<!-- section_4&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_4&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2149.5874,-1570.1432C2196.7145,-1557.8045 2268.9356,-1538.8957 2319.3049,-1525.7081"/>
<polygon fill="#000000" stroke="#000000" points="2320.2861,-1529.0693 2329.0735,-1523.1505 2318.513,-1522.2975 2320.2861,-1529.0693"/>
</g>
<!-- section_12 -->
<g id="node13" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="4731" cy="-1510.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4731" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;70</text>
</g>
<!-- section_4&#45;&gt;section_12 -->
<g id="edge12" class="edge">
<title>section_4&#45;&gt;section_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2167.6428,-1580.8047C2528.5878,-1570.9196 4269.4405,-1523.2431 4655.1958,-1512.6785"/>
<polygon fill="#000000" stroke="#000000" points="4655.5046,-1516.1715 4665.405,-1512.3989 4655.3129,-1509.1741 4655.5046,-1516.1715"/>
</g>
<!-- section_13 -->
<g id="node14" class="node">
<title>section_13</title>
<ellipse fill="none" stroke="#000000" cx="6276" cy="-1510.6025" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6276" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 71&#45;101</text>
</g>
<!-- section_4&#45;&gt;section_13 -->
<g id="edge13" class="edge">
<title>section_4&#45;&gt;section_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2167.5636,-1581.4715C2651.1683,-1573.1295 5661.4005,-1521.2041 6195.1416,-1511.9972"/>
<polygon fill="#000000" stroke="#000000" points="6195.4999,-1515.4917 6205.438,-1511.8196 6195.3791,-1508.4927 6195.4999,-1515.4917"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="7307" cy="-1510.6025" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="7307" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 102&#45;211</text>
</g>
<!-- section_4&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_4&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2167.6145,-1581.9231C2561.3585,-1577.8145 4650.9676,-1555.5599 6356,-1528.6025 6675.8151,-1523.546 7056.0954,-1515.8367 7222.2571,-1512.3836"/>
<polygon fill="#000000" stroke="#000000" points="7222.4848,-1515.8797 7232.4098,-1512.1723 7222.3392,-1508.8812 7222.4848,-1515.8797"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="1735,-1456.5027 1313,-1456.5027 1313,-1369.9021 1735,-1369.9021 1735,-1456.5027"/>
<text text-anchor="middle" x="1524" y="-1393.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The grammar module returns one function, which generates</text>
<text text-anchor="middle" x="1524" y="-1378.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">a grammar. </text>
</g>
<!-- raw_5&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>raw_5&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1674.3734,-1498.8537C1657.8386,-1489.4357 1633.4512,-1475.5448 1609.1063,-1461.6782"/>
<polygon fill="#000000" stroke="#000000" points="1610.5753,-1458.487 1600.1537,-1456.5789 1607.1107,-1464.5695 1610.5753,-1458.487"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="1780" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1780" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_8&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_8&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1912.4017,-1499.3583C1876.9319,-1483.7659 1817.0392,-1457.3884 1816,-1456.6025 1809.1924,-1451.454 1802.8461,-1444.7783 1797.4365,-1438.2129"/>
<polygon fill="#000000" stroke="#000000" points="1800.0185,-1435.8312 1791.1211,-1430.079 1794.4894,-1440.1242 1800.0185,-1435.8312"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1852" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1852" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_9&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1994.4736,-1499.2218C1989.3634,-1496.9926 1984.0222,-1494.6975 1979,-1492.6025 1938.8583,-1475.8575 1923.208,-1482.1397 1888,-1456.6025 1880.9794,-1451.5103 1874.5065,-1444.7448 1869.0431,-1438.0741"/>
<polygon fill="#000000" stroke="#000000" points="1871.5631,-1435.609 1862.6974,-1429.8083 1866.0107,-1439.8717 1871.5631,-1435.609"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1924" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1924" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_10&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_10&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2076.5294,-1499.0848C2071.4146,-1496.8669 2066.0574,-1494.611 2061,-1492.6025 2016.7098,-1475.0128 1999.0505,-1483.9167 1960,-1456.6025 1952.8931,-1451.6315 1946.3936,-1444.9033 1940.9323,-1438.2296"/>
<polygon fill="#000000" stroke="#000000" points="1943.4537,-1435.7644 1934.6024,-1429.9416 1937.8906,-1440.0133 1943.4537,-1435.7644"/>
</g>
<!-- header_21 -->
<g id="node22" class="node">
<title>header_21</title>
<ellipse fill="none" stroke="#000000" cx="2066" cy="-1413.2024" rx="96.7227" ry="18"/>
<text text-anchor="middle" x="2066" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : grammar_template</text>
</g>
<!-- section_11&#45;&gt;header_21 -->
<g id="edge21" class="edge">
<title>section_11&#45;&gt;header_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2325.9068,-1499.1131C2284.0983,-1489.2428 2223.6521,-1473.8966 2172,-1456.6025 2152.2491,-1449.9895 2130.9157,-1441.5226 2112.601,-1433.8259"/>
<polygon fill="#000000" stroke="#000000" points="2113.8956,-1430.5732 2103.3231,-1429.8851 2111.1589,-1437.0161 2113.8956,-1430.5732"/>
</g>
<!-- prose_22 -->
<g id="node23" class="node">
<title>prose_22</title>
<ellipse fill="none" stroke="#000000" cx="2213" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2213" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_22 -->
<g id="edge22" class="edge">
<title>section_11&#45;&gt;prose_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2334.6665,-1496.8188C2309.8748,-1487.6111 2278.6892,-1473.9967 2254,-1456.6025 2246.448,-1451.2819 2239.185,-1444.4057 2232.9251,-1437.7019"/>
<polygon fill="#000000" stroke="#000000" points="2235.3442,-1435.1556 2226.0801,-1430.015 2230.1165,-1439.8108 2235.3442,-1435.1556"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2295" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2295" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_11&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2361.9599,-1492.7378C2348.9272,-1477.2575 2329.9495,-1454.7157 2315.5228,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="2317.9701,-1435.052 2308.8522,-1429.6562 2312.6151,-1439.5603 2317.9701,-1435.052"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2377" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2377" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_11&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2377,-1492.2823C2377,-1477.9977 2377,-1457.9071 2377,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="2380.5001,-1441.4405 2377,-1431.4405 2373.5001,-1441.4405 2380.5001,-1441.4405"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2459" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2459" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_11&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2392.0401,-1492.7378C2405.0728,-1477.2575 2424.0505,-1454.7157 2438.4772,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="2441.3849,-1439.5603 2445.1478,-1429.6562 2436.0299,-1435.052 2441.3849,-1439.5603"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2541" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2541" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_11&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2419.3335,-1496.8188C2444.1252,-1487.6111 2475.3108,-1473.9967 2500,-1456.6025 2507.552,-1451.2819 2514.815,-1444.4057 2521.0749,-1437.7019"/>
<polygon fill="#000000" stroke="#000000" points="2523.8835,-1439.8108 2527.9199,-1430.015 2518.6558,-1435.1556 2523.8835,-1439.8108"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2687" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2687" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_11&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2428.1086,-1499.159C2469.9261,-1489.3154 2530.3768,-1473.9827 2582,-1456.6025 2606.0458,-1448.5068 2632.4362,-1437.5897 2652.7445,-1428.7303"/>
<polygon fill="#000000" stroke="#000000" points="2654.1623,-1431.9304 2661.9021,-1424.6953 2651.3397,-1425.5246 2654.1623,-1431.9304"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2982" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2982" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_11&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2434.8088,-1502.0091C2504.4161,-1491.5924 2624.8462,-1473.3489 2728,-1456.6025 2803.2371,-1444.3881 2890.8372,-1429.2079 2941.017,-1420.4202"/>
<polygon fill="#000000" stroke="#000000" points="2941.8938,-1423.8199 2951.139,-1418.6454 2940.6847,-1416.9251 2941.8938,-1423.8199"/>
</g>
<!-- header_43 -->
<g id="node44" class="node">
<title>header_43</title>
<ellipse fill="none" stroke="#000000" cx="4552" cy="-1413.2024" rx="46.4563" ry="18"/>
<text text-anchor="middle" x="4552" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : metas</text>
</g>
<!-- section_12&#45;&gt;header_43 -->
<g id="edge43" class="edge">
<title>section_12&#45;&gt;header_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4691.5649,-1496.1634C4666.8176,-1486.4125 4634.6597,-1472.4565 4608,-1456.6025 4597.9632,-1450.6338 4587.669,-1443.1233 4578.6887,-1436.0354"/>
<polygon fill="#000000" stroke="#000000" points="4580.8325,-1433.2678 4570.856,-1429.7013 4576.4309,-1438.7108 4580.8325,-1433.2678"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="4649" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4649" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_12&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4715.9599,-1492.7378C4702.9272,-1477.2575 4683.9495,-1454.7157 4669.5228,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="4671.9701,-1435.052 4662.8522,-1429.6562 4666.6151,-1439.5603 4671.9701,-1435.052"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="4731" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4731" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_12&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4731,-1492.2823C4731,-1477.9977 4731,-1457.9071 4731,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="4734.5001,-1441.4405 4731,-1431.4405 4727.5001,-1441.4405 4734.5001,-1441.4405"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="4939" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4939" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_12&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4764.4188,-1494.9535C4802.9539,-1476.9086 4865.9677,-1447.4012 4904.8213,-1429.2073"/>
<polygon fill="#000000" stroke="#000000" points="4906.5772,-1432.2498 4914.1492,-1424.8393 4903.6086,-1425.9105 4906.5772,-1432.2498"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="5339" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5339" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_12&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4787.9259,-1501.4831C4909.4877,-1482.0092 5191.9766,-1436.7552 5297.9013,-1419.7863"/>
<polygon fill="#000000" stroke="#000000" points="5298.5628,-1423.2251 5307.8832,-1418.1873 5297.4555,-1416.3132 5298.5628,-1423.2251"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="5680" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5680" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_12&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4795.1481,-1506.5603C4911.7789,-1498.9229 5166.2779,-1480.9304 5380,-1456.6025 5472.7875,-1446.0405 5581.0886,-1429.2674 5638.8109,-1419.9692"/>
<polygon fill="#000000" stroke="#000000" points="5639.6726,-1423.3754 5648.9852,-1418.3232 5638.5546,-1416.4652 5639.6726,-1423.3754"/>
</g>
<!-- header_59 -->
<g id="node60" class="node">
<title>header_59</title>
<ellipse fill="none" stroke="#000000" cx="6107" cy="-1413.2024" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="6107" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_13&#45;&gt;header_59 -->
<g id="edge59" class="edge">
<title>section_13&#45;&gt;header_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6242.3396,-1494.5851C6221.4601,-1484.3339 6194.2711,-1470.4084 6171,-1456.6025 6160.0855,-1450.1273 6148.5049,-1442.5163 6138.2384,-1435.4914"/>
<polygon fill="#000000" stroke="#000000" points="6140.1815,-1432.5797 6129.9671,-1429.7661 6136.1974,-1438.3354 6140.1815,-1432.5797"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="6212" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6212" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>section_13&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6264.2614,-1492.7378C6254.3049,-1477.5853 6239.9029,-1455.6672 6228.7378,-1438.6753"/>
<polygon fill="#000000" stroke="#000000" points="6231.6515,-1436.7359 6223.2349,-1430.3006 6225.8014,-1440.5799 6231.6515,-1436.7359"/>
</g>
<!-- codeblock_61 -->
<g id="node62" class="node">
<title>codeblock_61</title>
<ellipse fill="none" stroke="#000000" cx="6340" cy="-1413.2024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6340" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;78</text>
</g>
<!-- section_13&#45;&gt;codeblock_61 -->
<g id="edge61" class="edge">
<title>section_13&#45;&gt;codeblock_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6287.7386,-1492.7378C6297.421,-1478.0023 6311.3077,-1456.8685 6322.3331,-1440.0892"/>
<polygon fill="#000000" stroke="#000000" points="6325.5527,-1441.563 6328.1191,-1431.2837 6319.7026,-1437.719 6325.5527,-1441.563"/>
</g>
<!-- prose_62 -->
<g id="node63" class="node">
<title>prose_62</title>
<ellipse fill="none" stroke="#000000" cx="6487" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6487" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_62 -->
<g id="edge62" class="edge">
<title>section_13&#45;&gt;prose_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6323.3395,-1497.2126C6353.5792,-1487.7833 6393.1368,-1473.7938 6426,-1456.6025 6437.8765,-1450.3897 6450.0832,-1442.1396 6460.4268,-1434.5018"/>
<polygon fill="#000000" stroke="#000000" points="6462.7715,-1437.1166 6468.6292,-1428.2883 6458.5446,-1431.5368 6462.7715,-1437.1166"/>
</g>
<!-- codeblock_63 -->
<g id="node64" class="node">
<title>codeblock_63</title>
<ellipse fill="none" stroke="#000000" cx="6673" cy="-1413.2024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6673" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 84&#45;99</text>
</g>
<!-- section_13&#45;&gt;codeblock_63 -->
<g id="edge63" class="edge">
<title>section_13&#45;&gt;codeblock_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6332.599,-1499.8161C6383.8706,-1489.7272 6461.3623,-1473.6859 6528,-1456.6025 6557.9242,-1448.931 6590.9435,-1439.1528 6617.9044,-1430.8206"/>
<polygon fill="#000000" stroke="#000000" points="6619.0364,-1434.134 6627.5463,-1427.8229 6616.9581,-1427.4496 6619.0364,-1434.134"/>
</g>
<!-- header_70 -->
<g id="node71" class="node">
<title>header_70</title>
<ellipse fill="none" stroke="#000000" cx="7072" cy="-1413.2024" rx="46.4822" ry="18"/>
<text text-anchor="middle" x="7072" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : define</text>
</g>
<!-- section_14&#45;&gt;header_70 -->
<g id="edge70" class="edge">
<title>section_14&#45;&gt;header_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7249.7211,-1498.9858C7213.5369,-1490.2966 7166.5135,-1476.465 7128,-1456.6025 7117.4541,-1451.1636 7106.9041,-1443.661 7097.8507,-1436.4222"/>
<polygon fill="#000000" stroke="#000000" points="7099.9329,-1433.6021 7090.0002,-1429.9154 7095.4659,-1438.9915 7099.9329,-1433.6021"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="7169" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7169" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_14&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7272.6336,-1494.3552C7253.6312,-1484.631 7230.0772,-1471.3196 7211,-1456.6025 7203.6009,-1450.8944 7196.2631,-1443.9005 7189.8408,-1437.208"/>
<polygon fill="#000000" stroke="#000000" points="7192.1387,-1434.5385 7182.7732,-1429.585 7187.0055,-1439.2978 7192.1387,-1434.5385"/>
</g>
<!-- codeblock_72 -->
<g id="node73" class="node">
<title>codeblock_72</title>
<ellipse fill="none" stroke="#000000" cx="7307" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7307" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 104&#45;179</text>
</g>
<!-- section_14&#45;&gt;codeblock_72 -->
<g id="edge72" class="edge">
<title>section_14&#45;&gt;codeblock_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7307,-1492.2823C7307,-1477.9977 7307,-1457.9071 7307,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="7310.5001,-1441.4405 7307,-1431.4405 7303.5001,-1441.4405 7310.5001,-1441.4405"/>
</g>
<!-- codeblock_73 -->
<g id="node74" class="node">
<title>codeblock_73</title>
<ellipse fill="none" stroke="#000000" cx="7608" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7608" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 181&#45;190</text>
</g>
<!-- section_14&#45;&gt;codeblock_73 -->
<g id="edge73" class="edge">
<title>section_14&#45;&gt;codeblock_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7351.7377,-1496.1259C7404.8383,-1478.9432 7493.4573,-1450.2671 7551.3122,-1431.5459"/>
<polygon fill="#000000" stroke="#000000" points="7552.5947,-1434.8097 7561.0314,-1428.4009 7550.4395,-1428.1497 7552.5947,-1434.8097"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="7957" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7957" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 193&#45;207</text>
</g>
<!-- section_14&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_14&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7373.482,-1502.2757C7452.4148,-1492.2239 7587.9834,-1474.4381 7704,-1456.6025 7763.6496,-1447.4323 7830.9876,-1435.8195 7881.1884,-1426.9143"/>
<polygon fill="#000000" stroke="#000000" points="7882.0791,-1430.3109 7891.3118,-1425.114 7880.8534,-1423.419 7882.0791,-1430.3109"/>
</g>
<!-- codeblock_75 -->
<g id="node76" class="node">
<title>codeblock_75</title>
<ellipse fill="none" stroke="#000000" cx="8283" cy="-1413.2024" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="8283" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 209&#45;211</text>
</g>
<!-- section_14&#45;&gt;codeblock_75 -->
<g id="edge75" class="edge">
<title>section_14&#45;&gt;codeblock_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7381.1362,-1508.0432C7515.535,-1502.7802 7808.1809,-1488.4554 8053,-1456.6025 8107.133,-1449.5593 8167.7888,-1437.9567 8213.2145,-1428.5195"/>
<polygon fill="#000000" stroke="#000000" points="8214.1799,-1431.8934 8223.2504,-1426.4184 8212.7454,-1425.0419 8214.1799,-1431.8934"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1279.5,-786.4028 962.5,-786.4028 962.5,-730.5998 1279.5,-730.5998 1279.5,-786.4028"/>
<text text-anchor="middle" x="1121" y="-739.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">This function takes two parameters, namely:</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1770.6313,-1396.2708C1764.4031,-1386.764 1755.2962,-1375.6638 1744,-1369.8024 1653.9712,-1323.0876 1367.687,-1397.8009 1289,-1333.8024 1120.8199,-1197.0166 1115.1112,-901.8276 1118.8138,-796.6668"/>
<polygon fill="#000000" stroke="#000000" points="1122.3172,-796.6513 1119.2224,-786.5185 1115.3228,-796.3696 1122.3172,-796.6513"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1874,-785.8018 1298,-785.8018 1298,-731.2009 1874,-731.2009 1874,-785.8018"/>
<text text-anchor="middle" x="1586" y="-754.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; grammar_template : &#160;A function with one parameter, which must be =_ENV=.</text>
<text text-anchor="middle" x="1586" y="-739.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; metas : &#160;A map with keys of string and values of Node subclass constructors.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1844.8851,-1395.6908C1809.3299,-1308.1794 1650.6492,-917.6214 1600.9404,-795.274"/>
<polygon fill="#000000" stroke="#000000" points="1604.153,-793.8825 1597.1463,-785.9355 1597.6679,-796.5175 1604.153,-793.8825"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2167.5,-786.4028 1892.5,-786.4028 1892.5,-730.5998 2167.5,-730.5998 2167.5,-786.4028"/>
<text text-anchor="middle" x="2030" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">Both of these are reasonably complex.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1926.9457,-1395.0087C1941.2738,-1306.512 2003.804,-920.2992 2023.8159,-796.6967"/>
<polygon fill="#000000" stroke="#000000" points="2027.3118,-797.0033 2025.4551,-786.5724 2020.4018,-795.8844 2027.3118,-797.0033"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="2213" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2213" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_22&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_22&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2213,-1395.0087C2213,-1303.9697 2213,-897.8636 2213,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2216.5001,-786.6071 2213,-776.6072 2209.5001,-786.6072 2216.5001,-786.6071"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="2290" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2290" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_23&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2294.8611,-1395.0087C2294.1658,-1303.9697 2291.0643,-897.8636 2290.2154,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2293.7146,-786.5801 2290.1383,-776.6072 2286.7148,-786.6336 2293.7146,-786.5801"/>
</g>
<!-- raw_33 -->
<g id="node34" class="node">
<title>raw_33</title>
<ellipse fill="none" stroke="#000000" cx="2370" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2370" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_33 -->
<g id="edge33" class="edge">
<title>prose_24&#45;&gt;raw_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.8055,-1395.0087C2375.8321,-1303.9697 2371.49,-897.8636 2370.3016,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2373.8004,-786.5691 2370.1936,-776.6072 2366.8008,-786.644 2373.8004,-786.5691"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="2451" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2451" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_25&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2458.7777,-1395.0087C2457.6653,-1303.9697 2452.7029,-897.8636 2451.3447,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2454.8433,-786.5636 2451.2212,-776.6072 2447.8438,-786.6492 2454.8433,-786.5636"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="2532" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2532" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_26&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2540.7499,-1395.0087C2539.4984,-1303.9697 2533.9158,-897.8636 2532.3877,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2535.8861,-786.5581 2532.2489,-776.6072 2528.8868,-786.6544 2535.8861,-786.5581"/>
</g>
<!-- raw_39 -->
<g id="node40" class="node">
<title>raw_39</title>
<ellipse fill="none" stroke="#000000" cx="2815" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2815" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_39 -->
<g id="edge39" class="edge">
<title>prose_27&#45;&gt;raw_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2690.557,-1395.0087C2708.356,-1303.9697 2787.7534,-897.8636 2809.4854,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2812.9763,-787.093 2811.4601,-776.6072 2806.1063,-785.7498 2812.9763,-787.093"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="3103" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="3103" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_28&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2985.3625,-1395.0087C3002.1881,-1303.9697 3077.2435,-897.8636 3097.787,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="3101.278,-787.0767 3099.6537,-776.6072 3094.3945,-785.8045 3101.278,-787.0767"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="562,-116.8005 0,-116.8005 0,-30.3998 562,-30.3998 562,-116.8005"/>
<text text-anchor="middle" x="281" y="-69.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The internal function @define creates a custom environment variable, neatly</text>
<text text-anchor="middle" x="281" y="-54.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">sidestepping lua&#39;s pedantic insistance on prepending =local= to all values of </text>
<text text-anchor="middle" x="281" y="-38.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">significance. </text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2214.8981,-740.4692C2223.8176,-651.6333 2257.8054,-261.6557 2176,-183.2002 2143.8148,-152.333 615.1859,-153.2237 571,-147.2002 526.0224,-141.0688 477.9581,-130.5467 434.1559,-119.3461"/>
<polygon fill="#000000" stroke="#000000" points="434.8518,-115.911 424.2939,-116.7948 433.0986,-122.6879 434.8518,-115.911"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1121.5,-100.9006 580.5,-100.9006 580.5,-46.2997 1121.5,-46.2997 1121.5,-100.9006"/>
<text text-anchor="middle" x="851" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">More relevantly, it constructs a full grammar, which will return a table of</text>
<text text-anchor="middle" x="851" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">type Node. </text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2291.7482,-740.4752C2299.9322,-651.6683 2330.7333,-261.8076 2249,-183.2002 2204.1699,-140.0847 1191.5457,-156.1901 1130,-147.2002 1067.1201,-138.0155 998.0502,-119.8611 944.3648,-103.8818"/>
<polygon fill="#000000" stroke="#000000" points="945.1087,-100.4508 934.5245,-100.926 943.0949,-107.1549 945.1087,-100.4508"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="1680.5,-116.2012 1139.5,-116.2012 1139.5,-30.9991 1680.5,-30.9991 1680.5,-116.2012"/>
<text text-anchor="middle" x="1410" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">If you stick to =lpeg= patterns, as you should, all array values will be of</text>
<text text-anchor="middle" x="1410" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">Node, as is intended. &#160;Captures will interpolate various other sorts of Lua</text>
<text text-anchor="middle" x="1410" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">values, which will induce halting in some places and silently corrupt</text>
<text text-anchor="middle" x="1410" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">execution in others. </text>
</g>
<!-- raw_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2371.609,-740.5074C2379.1138,-651.8545 2407.0096,-262.6153 2326,-183.2002 2275.377,-133.5736 1759.0167,-158.2977 1689,-147.2002 1646.3116,-140.4343 1600.7066,-129.8688 1558.9997,-118.8335"/>
<polygon fill="#000000" stroke="#000000" points="1559.8923,-115.4493 1549.3276,-116.2478 1558.0844,-122.2118 1559.8923,-115.4493"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2253.5,-116.2012 1698.5,-116.2012 1698.5,-30.9991 2253.5,-30.9991 2253.5,-116.2012"/>
<text text-anchor="middle" x="1976" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">Though as yet poorly thought through, the [[elpatt module][./elpatt]] is</text>
<text text-anchor="middle" x="1976" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">intended to provide only those patterns which are allowed in Grammars, while</text>
<text text-anchor="middle" x="1976" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">expanding the scope of some favorites to properly respect utf&#45;8 and otherwise</text>
<text text-anchor="middle" x="1976" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">behave. </text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2456.1337,-740.797C2477.3009,-663.753 2550.1153,-353.9126 2406,-183.2002 2363.7229,-133.1208 2326.5201,-163.3405 2263,-147.2002 2226.9602,-138.0427 2188.389,-128.1881 2151.5899,-118.7604"/>
<polygon fill="#000000" stroke="#000000" points="2152.326,-115.336 2141.7702,-116.244 2150.5883,-122.1169 2152.326,-115.336"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2736,-93.5022 2272,-93.5022 2272,-53.698 2736,-53.698 2736,-93.5022"/>
<text text-anchor="middle" x="2504" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">There are examples of the format in the [[spec module][./spec]].</text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2531.2511,-740.1819C2527.4222,-646.5255 2510.029,-221.0744 2505.2297,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2508.7235,-103.4546 2504.8179,-93.606 2501.7294,-103.7406 2508.7235,-103.4546"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2931.5,-93.5022 2754.5,-93.5022 2754.5,-53.698 2931.5,-53.698 2931.5,-93.5022"/>
<text text-anchor="middle" x="2843" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Special fields include:</text>
</g>
<!-- raw_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>raw_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2815.7489,-740.1819C2819.5778,-646.5255 2836.971,-221.0744 2841.7703,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2845.2706,-103.7406 2842.1821,-93.606 2838.2765,-103.4546 2845.2706,-103.7406"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3498,-132.1003 2950,-132.1003 2950,-15.1 3498,-15.1 3498,-132.1003"/>
<text text-anchor="middle" x="3224" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;START : &#160;a string which must be the same as the starting rule.</text>
<text text-anchor="middle" x="3224" y="-85.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;SUPPRESS : &#160;either a string or an array of strings. These rules will be</text>
<text text-anchor="middle" x="3224" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;removed from the Node. </text>
<text text-anchor="middle" x="3224" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;P : &#160;The lpeg P function. &#160;Recognizes a certain pattern.</text>
<text text-anchor="middle" x="3224" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;V : &#160;The lpeg V function. &#160;Used for non&#45;terminal rvalues in a grammar. </text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3106.1743,-740.5339C3121.1188,-655.9428 3184.8661,-295.111 3211.8536,-142.3529"/>
<polygon fill="#000000" stroke="#000000" points="3215.3614,-142.615 3213.6546,-132.1586 3208.4682,-141.3971 3215.3614,-142.615"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="4264" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4264" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_44&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_44&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4638.9001,-1396.0273C4586.2114,-1306.4291 4342.8716,-892.6242 4279.2531,-784.4395"/>
<polygon fill="#000000" stroke="#000000" points="4282.0803,-782.3425 4273.9942,-775.4966 4276.0462,-785.8909 4282.0803,-782.3425"/>
</g>
<!-- raw_51 -->
<g id="node52" class="node">
<title>raw_51</title>
<ellipse fill="none" stroke="#000000" cx="4668" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4668" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_45&#45;&gt;raw_51 -->
<g id="edge51" class="edge">
<title>prose_45&#45;&gt;raw_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4729.2493,-1395.0087C4720.4888,-1303.9697 4681.4104,-897.8636 4670.7142,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4674.1841,-786.2259 4669.7423,-776.6072 4667.2163,-786.8965 4674.1841,-786.2259"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="4971" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4971" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_46&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_46&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4939.8893,-1395.0087C4944.339,-1303.9697 4964.1884,-897.8636 4969.6213,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4973.1226,-786.7661 4970.115,-776.6072 4966.1309,-786.4243 4973.1226,-786.7661"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="5467" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5467" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_47&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5342.557,-1395.0087C5360.356,-1303.9697 5439.7534,-897.8636 5461.4854,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="5464.9763,-787.093 5463.4601,-776.6072 5458.1063,-785.7498 5464.9763,-787.093"/>
</g>
<!-- raw_57 -->
<g id="node58" class="node">
<title>raw_57</title>
<ellipse fill="none" stroke="#000000" cx="5892" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5892" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_48&#45;&gt;raw_57 -->
<g id="edge57" class="edge">
<title>prose_48&#45;&gt;raw_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5685.7804,-1395.3512C5715.0959,-1304.8187 5847.3373,-896.4293 5883.0743,-786.0659"/>
<polygon fill="#000000" stroke="#000000" points="5886.4738,-786.9285 5886.2247,-776.3366 5879.8143,-784.772 5886.4738,-786.9285"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4113.5,-108.9005 3516.5,-108.9005 3516.5,-38.2998 4113.5,-38.2998 4113.5,-108.9005"/>
<text text-anchor="middle" x="3815" y="-61.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;By default a node will inherit from the Node class. &#160;If you want custom behavior,</text>
<text text-anchor="middle" x="3815" y="-46.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">you must pass in a table of metatable constructors.</text>
</g>
<!-- raw_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4253.1235,-741.9105C4196.2488,-655.1542 3932.3033,-252.5337 3843.9232,-117.7193"/>
<polygon fill="#000000" stroke="#000000" points="3846.7694,-115.677 3838.3597,-109.2328 3840.9152,-119.5149 3846.7694,-115.677"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="4700.5,-147.3005 4131.5,-147.3005 4131.5,.1003 4700.5,.1003 4700.5,-147.3005"/>
<text text-anchor="middle" x="4416" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">That&#39;s a fairly specific beast. &#160;Any rule defined above will have an =id=</text>
<text text-anchor="middle" x="4416" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">corresonding to the name of the rule. &#160;Unless =SUPPRESS=ed, this will become</text>
<text text-anchor="middle" x="4416" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node. &#160;If the =metas= parameter has a key corresponding to =id=, then it</text>
<text text-anchor="middle" x="4416" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">must return a function taking two parameters:</text>
<text text-anchor="middle" x="4416" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;</text>
<text text-anchor="middle" x="4416" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; node : &#160;The node under construction, which under normal circumstances will</text>
<text text-anchor="middle" x="4416" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;already have the =first= and =last= fields.</text>
<text text-anchor="middle" x="4416" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;: &#160;The entire str the grammar is parsing.</text>
</g>
<!-- raw_51&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>raw_51&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4661.5175,-740.8828C4631.5981,-659.566 4505.8046,-317.6766 4446.799,-157.3075"/>
<polygon fill="#000000" stroke="#000000" points="4449.9199,-155.6536 4443.1821,-147.4773 4443.3505,-158.0708 4449.9199,-155.6536"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="5287.5,-93.5022 4718.5,-93.5022 4718.5,-53.698 5287.5,-53.698 5287.5,-93.5022"/>
<text text-anchor="middle" x="5003" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Which must return that same node, decorated in whatever fashion is appropriate.</text>
</g>
<!-- raw_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4971.8559,-740.1819C4976.2317,-646.5255 4996.1097,-221.0744 5001.5946,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="5005.0947,-103.7585 5002.0653,-93.606 4998.1023,-103.4317 5005.0947,-103.7585"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="5882,-108.8005 5306,-108.8005 5306,-38.3997 5882,-38.3997 5882,-108.8005"/>
<text text-anchor="middle" x="5594" y="-77.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">The node will not have a metatable at this point, and the function must attach a</text>
<text text-anchor="middle" x="5594" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">metatable with =__index= equal to some table which itself has the =__index=</text>
<text text-anchor="middle" x="5594" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">Node as some recursive backstop.</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5470.3317,-740.5339C5486.8857,-651.2595 5560.4913,-254.31 5585.5859,-118.9765"/>
<polygon fill="#000000" stroke="#000000" points="5589.0647,-119.4126 5587.4466,-108.9421 5582.182,-118.1363 5589.0647,-119.4126"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="6427.5,-108.9005 5900.5,-108.9005 5900.5,-38.2998 6427.5,-38.2998 6427.5,-108.9005"/>
<text text-anchor="middle" x="6164" y="-77.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">You might say the return value must /inherit/ from Node, if we were using</text>
<text text-anchor="middle" x="6164" y="-62.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">a language that did that sort of thing. </text>
</g>
<!-- raw_57&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>raw_57&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5898.997,-740.8828C5934.2042,-652.2302 6092.4078,-253.8707 6146.1042,-118.6621"/>
<polygon fill="#000000" stroke="#000000" points="6149.4974,-119.6004 6149.9356,-109.0147 6142.9917,-117.0167 6149.4974,-119.6004"/>
</g>
<!-- raw_64 -->
<g id="node65" class="node">
<title>raw_64</title>
<ellipse fill="none" stroke="#000000" cx="6175" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6175" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_60&#45;&gt;raw_64 -->
<g id="edge64" class="edge">
<title>prose_60&#45;&gt;raw_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6210.9718,-1395.0087C6205.8268,-1303.9697 6182.876,-897.8636 6176.5941,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6180.082,-786.3937 6176.0232,-776.6072 6173.0932,-786.7888 6180.082,-786.3937"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="6460,-793.7017 6220,-793.7017 6220,-723.3009 6460,-723.3009 6460,-793.7017"/>
<text text-anchor="middle" x="6340" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="6340" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; </text>
<text text-anchor="middle" x="6340" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
</g>
<!-- codeblock_61&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_61&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6340,-1395.0087C6340,-1308.1438 6340,-934.4408 6340,-803.7985"/>
<polygon fill="#000000" stroke="#000000" points="6343.5001,-803.7298 6340,-793.7299 6336.5001,-803.7299 6343.5001,-803.7298"/>
</g>
<!-- raw_67 -->
<g id="node68" class="node">
<title>raw_67</title>
<ellipse fill="none" stroke="#000000" cx="6505" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6505" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_62&#45;&gt;raw_67 -->
<g id="edge67" class="edge">
<title>prose_62&#45;&gt;raw_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6487.5002,-1395.0087C6490.0032,-1303.9697 6501.1684,-897.8636 6504.2245,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6507.726,-786.6996 6504.5022,-776.6072 6500.7286,-786.5072 6507.726,-786.6996"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="6909.5,-870.1021 6550.5,-870.1021 6550.5,-646.9005 6909.5,-646.9005 6909.5,-870.1021"/>
<text text-anchor="middle" x="6730" y="-855.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="6730" y="-839.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="6730" y="-824.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">local V = string.sub( assert( _VERSION ), &#45;4 )</text>
<text text-anchor="middle" x="6730" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local _G = assert( _G )</text>
<text text-anchor="middle" x="6730" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="6730" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="6730" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="6730" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="6730" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="6730" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="6730" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="6730" y="-685.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="6730" y="-670.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local getfenv = assert( getfenv )</text>
<text text-anchor="middle" x="6730" y="-654.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6674.584,-1395.0087C6680.9726,-1321.6293 6705.182,-1043.5604 6719.4015,-880.236"/>
<polygon fill="#000000" stroke="#000000" points="6722.9006,-880.3971 6720.2812,-870.1312 6715.927,-879.7899 6722.9006,-880.3971"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="6500,-91.6001 6446,-91.6001 6446,-55.6001 6500,-55.6001 6500,-91.6001"/>
</g>
<!-- raw_64&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>raw_64&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6169.2421,-740.7845C6145.1909,-663.0368 6060.7969,-348.5889 6211,-183.2002 6279.0856,-108.2312 6354.278,-207.0126 6436,-147.2002 6450.9579,-136.2526 6460.2539,-117.5246 6465.787,-101.7006"/>
<polygon fill="#000000" stroke="#000000" points="6469.2294,-102.422 6468.9013,-91.8323 6462.5539,-100.3153 6469.2294,-102.422"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="6849.5,-93.5022 6518.5,-93.5022 6518.5,-53.698 6849.5,-53.698 6849.5,-93.5022"/>
<text text-anchor="middle" x="6684" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s the kind of thing I&#39;d like to automate. </text>
</g>
<!-- raw_67&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>raw_67&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6501.1047,-740.6302C6485.9486,-666.6126 6436.7424,-378.8153 6541,-183.2002 6561.0371,-145.6053 6600.2286,-116.9914 6632.5225,-98.4432"/>
<polygon fill="#000000" stroke="#000000" points="6634.3962,-101.4059 6641.4264,-93.4795 6630.9877,-95.2917 6634.3962,-101.4059"/>
</g>
<!-- raw_76 -->
<g id="node77" class="node">
<title>raw_76</title>
<ellipse fill="none" stroke="#000000" cx="6955" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6955" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_71&#45;&gt;raw_76 -->
<g id="edge76" class="edge">
<title>prose_71&#45;&gt;raw_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7156.3248,-1396.1632C7148.7495,-1387.1024 7138.397,-1376.4844 7127,-1369.8024 7073.0608,-1338.1782 7030.668,-1382.1344 6991,-1333.8024 6921.7094,-1249.3779 6944.4067,-890.6813 6952.6008,-786.7982"/>
<polygon fill="#000000" stroke="#000000" points="6956.0959,-786.9992 6953.4116,-776.75 6949.1186,-786.4361 6956.0959,-786.9992"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="7506,-1333.6035 7000,-1333.6035 7000,-183.3991 7506,-183.3991 7506,-1333.6035"/>
<text text-anchor="middle" x="7253" y="-1318.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(id, first, t, last, str, metas, offset)</text>
<text text-anchor="middle" x="7253" y="-1303.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="7253" y="-1287.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.first = first + offset</text>
<text text-anchor="middle" x="7253" y="-1272.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.last &#160;= last + offset &#45; 1</text>
<text text-anchor="middle" x="7253" y="-1257.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.str &#160;&#160;= str</text>
<text text-anchor="middle" x="7253" y="-1241.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if metas[id] then</text>
<text text-anchor="middle" x="7253" y="-1226.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t = metas[id](t, str)</text>
<text text-anchor="middle" x="7253" y="-1210.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;assert(t.id == id)</text>
<text text-anchor="middle" x="7253" y="-1195.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="7253" y="-1180.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="7253" y="-1164.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t, {__index = Node,</text>
<text text-anchor="middle" x="7253" y="-1149.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__tostring = Node.toString})</text>
<text text-anchor="middle" x="7253" y="-1133.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="7253" y="-1118.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.isNode, &quot;failed isNode: &quot; .. id)</text>
<text text-anchor="middle" x="7253" y="-1103.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.str)</text>
<text text-anchor="middle" x="7253" y="-1087.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return t</text>
<text text-anchor="middle" x="7253" y="-1072.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="7253" y="-1024.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; some useful/common lpeg patterns</text>
<text text-anchor="middle" x="7253" y="-1009.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cp = L.Cp</text>
<text text-anchor="middle" x="7253" y="-994.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cc = L.Cc</text>
<text text-anchor="middle" x="7253" y="-978.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ct = L.Ct</text>
<text text-anchor="middle" x="7253" y="-963.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg1_str = L.Carg(1)</text>
<text text-anchor="middle" x="7253" y="-947.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg2_metas = L.Carg(2)</text>
<text text-anchor="middle" x="7253" y="-932.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg3_offset = L.Carg(3)</text>
<text text-anchor="middle" x="7253" y="-885.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="7253" y="-869.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; with lots of syntax sugar</text>
<text text-anchor="middle" x="7253" y="-854.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function define(func, g, e)</text>
<text text-anchor="middle" x="7253" y="-838.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="7253" y="-823.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if e == nil then</text>
<text text-anchor="middle" x="7253" y="-808.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;e = V == &quot; 5.1&quot; and getfenv(func) or _G</text>
<text text-anchor="middle" x="7253" y="-792.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7253" y="-777.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="7253" y="-761.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="7253" y="-746.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="7253" y="-731.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function(name) g[1] = name end,</text>
<text text-anchor="middle" x="7253" y="-715.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function(...)</text>
<text text-anchor="middle" x="7253" y="-700.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="7253" y="-684.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select(&#39;#&#39;, ...) do</text>
<text text-anchor="middle" x="7253" y="-669.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[select(i, ... )] = true</text>
<text text-anchor="middle" x="7253" y="-654.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7253" y="-638.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="7253" y="-623.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;V = L.V,</text>
<text text-anchor="middle" x="7253" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;P = L.P,</text>
<text text-anchor="middle" x="7253" y="-592.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="7253" y="-561.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env_index, { __index = e })</text>
<text text-anchor="middle" x="7253" y="-545.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env, {</text>
<text text-anchor="middle" x="7253" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="7253" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="7253" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] then</text>
<text text-anchor="middle" x="7253" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = val</text>
<text text-anchor="middle" x="7253" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7253" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = (Cc(name) </text>
<text text-anchor="middle" x="7253" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp() </text>
<text text-anchor="middle" x="7253" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Ct(val)</text>
<text text-anchor="middle" x="7253" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp()</text>
<text text-anchor="middle" x="7253" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg1_str</text>
<text text-anchor="middle" x="7253" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg2_metas)</text>
<text text-anchor="middle" x="7253" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg3_offset / make_ast_node</text>
<text text-anchor="middle" x="7253" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7253" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7253" y="-314.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;})</text>
<text text-anchor="middle" x="7253" y="-299.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="7253" y="-283.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="7253" y="-268.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="7253" y="-253.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7253" y="-237.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="7253" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="7253" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="7253" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_72&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_72&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7305.4994,-1395.0087C7304.5097,-1383.0094 7303.0685,-1365.5369 7301.2911,-1343.9877"/>
<polygon fill="#000000" stroke="#000000" points="7304.7615,-1343.4832 7300.4513,-1333.8048 7297.7852,-1344.0587 7304.7615,-1343.4832"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="7799.5,-824.2017 7524.5,-824.2017 7524.5,-692.8009 7799.5,-692.8009 7799.5,-824.2017"/>
<text text-anchor="middle" x="7662" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function refineMetas(metas)</text>
<text text-anchor="middle" x="7662" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for _,v in pairs(metas) do</text>
<text text-anchor="middle" x="7662" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not v[&quot;__tostring&quot;] then</text>
<text text-anchor="middle" x="7662" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;v[&quot;__tostring&quot;] = Node.toString</text>
<text text-anchor="middle" x="7662" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7662" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7662" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return metas</text>
<text text-anchor="middle" x="7662" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_73&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>codeblock_73&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7609.5006,-1395.0087C7616.1695,-1314.1546 7643.336,-984.7857 7655.7535,-834.2346"/>
<polygon fill="#000000" stroke="#000000" points="7659.2517,-834.3993 7656.5857,-824.1454 7652.2754,-833.8238 7659.2517,-834.3993"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="8302.5,-862.7018 7817.5,-862.7018 7817.5,-654.3008 8302.5,-654.3008 8302.5,-862.7018"/>
<text text-anchor="middle" x="8060" y="-847.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(grammar_template, metas)</text>
<text text-anchor="middle" x="8060" y="-832.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(grammar_template) == &#39;function&#39; then</text>
<text text-anchor="middle" x="8060" y="-816.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local metas = metas or {}</text>
<text text-anchor="middle" x="8060" y="-801.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grammar = define(grammar_template, nil, metas)</text>
<text text-anchor="middle" x="8060" y="-785.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parse = function(str, offset)</text>
<text text-anchor="middle" x="8060" y="-770.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="8060" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return L.match(grammar, str, 1, str, metas, offset) &#45;&#45; other </text>
<text text-anchor="middle" x="8060" y="-739.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8060" y="-724.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return parse</text>
<text text-anchor="middle" x="8060" y="-708.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8060" y="-693.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no way to build grammar out of &quot; .. type(template))</text>
<text text-anchor="middle" x="8060" y="-678.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8060" y="-662.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>codeblock_74&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7959.8623,-1395.0087C7971.5817,-1320.5168 8016.4874,-1035.0812 8042.0044,-872.8873"/>
<polygon fill="#000000" stroke="#000000" points="8045.4844,-873.2873 8043.5812,-862.8648 8038.5695,-872.1993 8045.4844,-873.2873"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="8407,-776.5013 8321,-776.5013 8321,-740.5013 8407,-740.5013 8407,-776.5013"/>
<text text-anchor="middle" x="8364" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_75&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>codeblock_75&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8291.1914,-1395.0014C8297.9406,-1379.1661 8307.1605,-1355.4273 8312,-1333.8024 8358.1598,-1127.5403 8363.5597,-870.9636 8364.0268,-786.7242"/>
<polygon fill="#000000" stroke="#000000" points="8367.5269,-786.6714 8364.0628,-776.6589 8360.5269,-786.6463 8367.5269,-786.6714"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="6982,-91.6001 6928,-91.6001 6928,-55.6001 6982,-55.6001 6982,-91.6001"/>
</g>
<!-- raw_76&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>raw_76&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6955,-740.1819C6955,-646.0016 6955,-216.3039 6955,-101.7393"/>
<polygon fill="#000000" stroke="#000000" points="6958.5001,-101.658 6955,-91.658 6951.5001,-101.658 6958.5001,-101.658"/>
</g>
</g>
</svg>