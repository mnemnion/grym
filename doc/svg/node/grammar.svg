<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1035pt" height="463pt"
 viewBox="0.00 0.00 1035.20 463.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 459.0005)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-459.0005 1031.1964,-459.0005 1031.1964,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="350.1964" cy="-437.0005" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="350.1964" y="-432.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 34</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="350.1964" cy="-365.0005" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="350.1964" y="-360.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;34</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M350.1964,-418.8318C350.1964,-411.1314 350.1964,-401.9748 350.1964,-393.4171"/>
<polygon fill="#000000" stroke="#000000" points="353.6965,-393.4137 350.1964,-383.4137 346.6965,-393.4138 353.6965,-393.4137"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="91.1964" cy="-293.0005" rx="91.3932" ry="18"/>
<text text-anchor="middle" x="91.1964" y="-288.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grammar Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M305.6727,-352.6232C263.814,-340.9868 200.7479,-323.4549 153.8245,-310.4106"/>
<polygon fill="#000000" stroke="#000000" points="154.6422,-307.0052 144.0701,-307.6989 152.7673,-313.7495 154.6422,-307.0052"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="232.1964" cy="-293.0005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="232.1964" y="-288.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M323.4204,-348.6626C305.4222,-337.6806 281.6528,-323.1773 262.8894,-311.7284"/>
<polygon fill="#000000" stroke="#000000" points="264.4871,-308.6032 254.1277,-306.3823 260.841,-314.5787 264.4871,-308.6032"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="350.1964" cy="-293.0005" rx="67.748" ry="18"/>
<text text-anchor="middle" x="350.1964" y="-288.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;9</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M350.1964,-346.8318C350.1964,-339.1314 350.1964,-329.9748 350.1964,-321.4171"/>
<polygon fill="#000000" stroke="#000000" points="353.6965,-321.4137 350.1964,-311.4137 346.6965,-321.4138 353.6965,-321.4137"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="627.1964" cy="-293.0005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="627.1964" y="-288.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;30</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M395.9373,-353.1111C442.1805,-341.0913 513.9566,-322.4346 565.275,-309.0956"/>
<polygon fill="#000000" stroke="#000000" points="566.4544,-312.4054 575.2523,-306.5022 564.6934,-305.6305 566.4544,-312.4054"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="920.1964" cy="-293.0005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="920.1964" y="-288.8005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;34</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M406.1489,-357.9328C508.3567,-345.0223 725.4448,-317.6007 842.1304,-302.8614"/>
<polygon fill="#000000" stroke="#000000" points="842.5893,-306.3314 852.0718,-301.6057 841.712,-299.3866 842.5893,-306.3314"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="141.1964,-139.5002 87.1964,-139.5002 87.1964,-99.5002 141.1964,-99.5002 141.1964,-139.5002"/>
</g>
<!-- prose_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M206.5017,-281.958C188.3092,-272.8995 164.6617,-258.4076 150.1964,-239.0005 130.5075,-212.5852 121.5071,-175.3919 117.4441,-149.5424"/>
<polygon fill="#000000" stroke="#000000" points="120.8984,-148.9723 116.0309,-139.5618 113.9675,-149.9537 120.8984,-148.9723"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="427.1964,-154.7006 159.1964,-154.7006 159.1964,-84.2999 427.1964,-84.2999 427.1964,-154.7006"/>
<text text-anchor="middle" x="293.1964" y="-139.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="293.1964" y="-108.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; </text>
<text text-anchor="middle" x="293.1964" y="-92.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local define = require &quot;node/define&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>codeblock_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M344.2041,-274.7608C335.6868,-248.8353 319.8061,-200.4965 308.018,-164.6151"/>
<polygon fill="#000000" stroke="#000000" points="311.2576,-163.2621 304.8112,-154.8541 304.6073,-165.4469 311.2576,-163.2621"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="923.1964,-239.0007 445.1964,-239.0007 445.1964,.0002 923.1964,.0002 923.1964,-239.0007"/>
<text text-anchor="middle" x="684.1964" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(grammar_template, metas)</text>
<text text-anchor="middle" x="684.1964" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local metas = metas or {}</text>
<text text-anchor="middle" x="684.1964" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(grammar_template) == &#39;function&#39; then</text>
<text text-anchor="middle" x="684.1964" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grammar = define.define(grammar_template, nil, metas)</text>
<text text-anchor="middle" x="684.1964" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;type of grammar is &quot; .. type(grammar) .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="684.1964" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for k,v in pairs(grammar) do</text>
<text text-anchor="middle" x="684.1964" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;io.write(&quot; &#160;&quot; .. tostring(k) .. &quot; &#160;&quot; .. tostring(v) .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="684.1964" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="684.1964" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return function(str)</text>
<text text-anchor="middle" x="684.1964" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return L.match(grammar, str, 1, str) &#45;&#45; other </text>
<text text-anchor="middle" x="684.1964" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="684.1964" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="684.1964" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no way to build grammar out of &quot; .. type(template))</text>
<text text-anchor="middle" x="684.1964" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="684.1964" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_5&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M633.1887,-274.7608C635.5497,-267.5742 638.4765,-258.6654 641.7251,-248.7771"/>
<polygon fill="#000000" stroke="#000000" points="645.1343,-249.6135 644.9304,-239.0207 638.484,-247.4287 645.1343,-249.6135"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1027.1964,-137.5002 941.1964,-137.5002 941.1964,-101.5002 1027.1964,-101.5002 1027.1964,-137.5002"/>
<text text-anchor="middle" x="984.1964" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_6&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M926.9246,-274.7608C938.1119,-244.4325 960.6136,-183.4317 973.8373,-147.583"/>
<polygon fill="#000000" stroke="#000000" points="977.2852,-148.3492 977.4624,-137.7558 970.7178,-145.9266 977.2852,-148.3492"/>
</g>
</g>
</svg>