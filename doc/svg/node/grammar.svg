<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="8487pt" height="1753pt"
 viewBox="0.00 0.00 8487.00 1752.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1748.6025)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1748.6025 8483,-1748.6025 8483,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1559" cy="-1726.6025" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="1559" y="-1722.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 211</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1559" cy="-1654.6025" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="1559" y="-1650.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;6</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1559,-1708.4338C1559,-1700.7334 1559,-1691.5768 1559,-1683.0191"/>
<polygon fill="#000000" stroke="#000000" points="1562.5001,-1683.0157 1559,-1673.0157 1555.5001,-1683.0158 1562.5001,-1683.0157"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1418" cy="-1582.6025" rx="91.3932" ry="18"/>
<text text-anchor="middle" x="1418" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grammar Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1529.0975,-1639.3331C1509.0799,-1629.1114 1482.4382,-1615.5071 1460.2621,-1604.1831"/>
<polygon fill="#000000" stroke="#000000" points="1461.5616,-1600.9168 1451.0638,-1599.4861 1458.3781,-1607.1511 1461.5616,-1600.9168"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1559" cy="-1582.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1559" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1559,-1636.4338C1559,-1628.7334 1559,-1619.5768 1559,-1611.0191"/>
<polygon fill="#000000" stroke="#000000" points="1562.5001,-1611.0157 1559,-1601.0157 1555.5001,-1611.0158 1562.5001,-1611.0157"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="1990" cy="-1582.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1990" y="-1578.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 7&#45;101</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1608.8622,-1646.2728C1686.6611,-1633.2762 1836.9862,-1608.1639 1923.7853,-1593.6639"/>
<polygon fill="#000000" stroke="#000000" points="1924.5016,-1597.0928 1933.7882,-1591.9928 1923.3481,-1590.1885 1924.5016,-1597.0928"/>
</g>
<!-- leaf_5 -->
<g id="node6" class="node">
<title>leaf_5</title>
<polygon fill="none" stroke="#c0c0c0" points="1445,-1528.6025 1391,-1528.6025 1391,-1492.6025 1445,-1492.6025 1445,-1528.6025"/>
</g>
<!-- header_2&#45;&gt;leaf_5 -->
<g id="edge5" class="edge">
<title>header_2&#45;&gt;leaf_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1418,-1564.4338C1418,-1556.7334 1418,-1547.5768 1418,-1539.0191"/>
<polygon fill="#000000" stroke="#000000" points="1421.5001,-1539.0157 1418,-1529.0157 1414.5001,-1539.0158 1421.5001,-1539.0157"/>
</g>
<!-- raw_6 -->
<g id="node7" class="node">
<title>raw_6</title>
<ellipse fill="none" stroke="#000000" cx="1524" cy="-1510.6025" rx="27" ry="18"/>
<text text-anchor="middle" x="1524" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;raw_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1550.5275,-1565.1733C1546.4003,-1556.6831 1541.3507,-1546.2953 1536.7689,-1536.8699"/>
<polygon fill="#000000" stroke="#000000" points="1539.9143,-1535.3346 1532.3945,-1527.8712 1533.6187,-1538.395 1539.9143,-1535.3346"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="1708" cy="-1510.6025" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="1708" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parameters</text>
</g>
<!-- section_4&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1941.8429,-1570.307C1893.5172,-1557.9686 1818.9985,-1538.9425 1767.1158,-1525.6959"/>
<polygon fill="#000000" stroke="#000000" points="1767.9347,-1522.2927 1757.3796,-1523.21 1766.2029,-1529.0752 1767.9347,-1522.2927"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1826" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1826" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1955.2198,-1567.3331C1927.38,-1555.1108 1888.5246,-1538.0523 1860.7047,-1525.8387"/>
<polygon fill="#000000" stroke="#000000" points="1861.9243,-1522.5517 1851.3609,-1521.7365 1859.1103,-1528.9612 1861.9243,-1522.5517"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="1908" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1908" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1970.1501,-1565.1733C1959.0588,-1555.4346 1945.1239,-1543.199 1933.2613,-1532.7831"/>
<polygon fill="#000000" stroke="#000000" points="1935.264,-1529.8839 1925.4403,-1525.9159 1930.6454,-1535.144 1935.264,-1529.8839"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="1990" cy="-1510.6025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1990" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_4&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1990,-1564.4338C1990,-1556.7334 1990,-1547.5768 1990,-1539.0191"/>
<polygon fill="#000000" stroke="#000000" points="1993.5001,-1539.0157 1990,-1529.0157 1986.5001,-1539.0158 1993.5001,-1539.0157"/>
</g>
<!-- section_12 -->
<g id="node13" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="2377" cy="-1510.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2377" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 17&#45;46</text>
</g>
<!-- section_4&#45;&gt;section_12 -->
<g id="edge12" class="edge">
<title>section_4&#45;&gt;section_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2044.6268,-1572.4393C2115.0705,-1559.3335 2237.4137,-1536.572 2312.3955,-1522.6219"/>
<polygon fill="#000000" stroke="#000000" points="2313.4599,-1525.984 2322.651,-1520.7139 2312.1795,-1519.1021 2313.4599,-1525.984"/>
</g>
<!-- section_13 -->
<g id="node14" class="node">
<title>section_13</title>
<ellipse fill="none" stroke="#000000" cx="4679" cy="-1510.6025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4679" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;70</text>
</g>
<!-- section_4&#45;&gt;section_13 -->
<g id="edge13" class="edge">
<title>section_4&#45;&gt;section_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2055.4696,-1580.8495C2421.5405,-1571.0476 4212.4231,-1523.0954 4603.4824,-1512.6245"/>
<polygon fill="#000000" stroke="#000000" points="4603.6501,-1516.1214 4613.5528,-1512.3549 4603.4627,-1509.1239 4603.6501,-1516.1214"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="6273" cy="-1510.6025" rx="70.655" ry="18"/>
<text text-anchor="middle" x="6273" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 71&#45;101</text>
</g>
<!-- section_4&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_4&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2055.5618,-1581.5003C2547.0739,-1573.2377 5650.8484,-1521.0612 6192.4384,-1511.9568"/>
<polygon fill="#000000" stroke="#000000" points="6192.563,-1515.4553 6202.5027,-1511.7876 6192.4453,-1508.4562 6192.563,-1515.4553"/>
</g>
<!-- section_15 -->
<g id="node16" class="node">
<title>section_15</title>
<ellipse fill="none" stroke="#000000" cx="7325" cy="-1510.6025" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="7325" y="-1506.4025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 102&#45;211</text>
</g>
<!-- section_4&#45;&gt;section_15 -->
<g id="edge15" class="edge">
<title>section_4&#45;&gt;section_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2055.6654,-1581.9413C2455.3256,-1577.8856 4601.9098,-1555.6525 6353,-1528.6025 6681.0732,-1523.5345 7071.401,-1515.7836 7240.2419,-1512.347"/>
<polygon fill="#000000" stroke="#000000" points="7240.3831,-1515.845 7250.3097,-1512.1419 7240.2404,-1508.8464 7240.3831,-1515.845"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-1456.5027 1241,-1456.5027 1241,-1369.9021 1663,-1369.9021 1663,-1456.5027"/>
<text text-anchor="middle" x="1452" y="-1393.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The grammar module returns one function, which generates</text>
<text text-anchor="middle" x="1452" y="-1378.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">a grammar. </text>
</g>
<!-- raw_6&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>raw_6&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1511.7862,-1494.0799C1505.7116,-1485.8623 1498.0016,-1475.4324 1490.1546,-1464.8171"/>
<polygon fill="#000000" stroke="#000000" points="1492.9109,-1462.6578 1484.152,-1456.697 1487.2819,-1466.8189 1492.9109,-1462.6578"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1735,-1431.2024 1681,-1431.2024 1681,-1395.2024 1735,-1395.2024 1735,-1431.2024"/>
</g>
<!-- header_8&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_8&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1708,-1492.2823C1708,-1477.9977 1708,-1457.9071 1708,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="1711.5001,-1441.4405 1708,-1431.4405 1704.5001,-1441.4405 1711.5001,-1441.4405"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1780" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1780" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_9&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1817.7761,-1493.1893C1810.7769,-1478.3692 1800.6118,-1456.8456 1792.5888,-1439.8579"/>
<polygon fill="#000000" stroke="#000000" points="1795.588,-1438.0125 1788.1527,-1430.4649 1789.2584,-1441.0018 1795.588,-1438.0125"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1852" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1852" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_10&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_10&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1897.9883,-1493.1893C1889.3348,-1478.1384 1876.7061,-1456.1735 1866.871,-1439.0674"/>
<polygon fill="#000000" stroke="#000000" points="1869.7561,-1437.0634 1861.7375,-1430.1387 1863.6876,-1440.5525 1869.7561,-1437.0634"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1924" cy="-1413.2024" rx="27" ry="18"/>
<text text-anchor="middle" x="1924" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_11&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1978.5037,-1493.6367C1968.1251,-1478.3204 1952.7202,-1455.5865 1940.9331,-1438.1915"/>
<polygon fill="#000000" stroke="#000000" points="1943.6518,-1435.9643 1935.1447,-1429.6493 1937.8569,-1439.8911 1943.6518,-1435.9643"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2066" cy="-1413.2024" rx="96.7227" ry="18"/>
<text text-anchor="middle" x="2066" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : grammar_template</text>
</g>
<!-- section_12&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_12&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2325.9068,-1499.1131C2284.0983,-1489.2428 2223.6521,-1473.8966 2172,-1456.6025 2152.2491,-1449.9895 2130.9157,-1441.5226 2112.601,-1433.8259"/>
<polygon fill="#000000" stroke="#000000" points="2113.8956,-1430.5732 2103.3231,-1429.8851 2111.1589,-1437.0161 2113.8956,-1430.5732"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2213" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2213" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_12&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2334.6665,-1496.8188C2309.8748,-1487.6111 2278.6892,-1473.9967 2254,-1456.6025 2246.448,-1451.2819 2239.185,-1444.4057 2232.9251,-1437.7019"/>
<polygon fill="#000000" stroke="#000000" points="2235.3442,-1435.1556 2226.0801,-1430.015 2230.1165,-1439.8108 2235.3442,-1435.1556"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2295" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2295" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_12&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2361.9599,-1492.7378C2348.9272,-1477.2575 2329.9495,-1454.7157 2315.5228,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="2317.9701,-1435.052 2308.8522,-1429.6562 2312.6151,-1439.5603 2317.9701,-1435.052"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2377" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2377" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_12&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2377,-1492.2823C2377,-1477.9977 2377,-1457.9071 2377,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="2380.5001,-1441.4405 2377,-1431.4405 2373.5001,-1441.4405 2380.5001,-1441.4405"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2459" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2459" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_12&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2392.0401,-1492.7378C2405.0728,-1477.2575 2424.0505,-1454.7157 2438.4772,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="2441.3849,-1439.5603 2445.1478,-1429.6562 2436.0299,-1435.052 2441.3849,-1439.5603"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2541" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2541" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_12&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2419.3335,-1496.8188C2444.1252,-1487.6111 2475.3108,-1473.9967 2500,-1456.6025 2507.552,-1451.2819 2514.815,-1444.4057 2521.0749,-1437.7019"/>
<polygon fill="#000000" stroke="#000000" points="2523.8835,-1439.8108 2527.9199,-1430.015 2518.6558,-1435.1556 2523.8835,-1439.8108"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="2687" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2687" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_12&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2428.1086,-1499.159C2469.9261,-1489.3154 2530.3768,-1473.9827 2582,-1456.6025 2606.0458,-1448.5068 2632.4362,-1437.5897 2652.7445,-1428.7303"/>
<polygon fill="#000000" stroke="#000000" points="2654.1623,-1431.9304 2661.9021,-1424.6953 2651.3397,-1425.5246 2654.1623,-1431.9304"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2982" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2982" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_12&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2434.8088,-1502.0091C2504.4161,-1491.5924 2624.8462,-1473.3489 2728,-1456.6025 2803.2371,-1444.3881 2890.8372,-1429.2079 2941.017,-1420.4202"/>
<polygon fill="#000000" stroke="#000000" points="2941.8938,-1423.8199 2951.139,-1418.6454 2940.6847,-1416.9251 2941.8938,-1423.8199"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="4500" cy="-1413.2024" rx="46.4563" ry="18"/>
<text text-anchor="middle" x="4500" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : metas</text>
</g>
<!-- section_13&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_13&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4639.5649,-1496.1634C4614.8176,-1486.4125 4582.6597,-1472.4565 4556,-1456.6025 4545.9632,-1450.6338 4535.669,-1443.1233 4526.6887,-1436.0354"/>
<polygon fill="#000000" stroke="#000000" points="4528.8325,-1433.2678 4518.856,-1429.7013 4524.4309,-1438.7108 4528.8325,-1433.2678"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="4597" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4597" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_13&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4663.9599,-1492.7378C4650.9272,-1477.2575 4631.9495,-1454.7157 4617.5228,-1437.5796"/>
<polygon fill="#000000" stroke="#000000" points="4619.9701,-1435.052 4610.8522,-1429.6562 4614.6151,-1439.5603 4619.9701,-1435.052"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="4679" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4679" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_13&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4679,-1492.2823C4679,-1477.9977 4679,-1457.9071 4679,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="4682.5001,-1441.4405 4679,-1431.4405 4675.5001,-1441.4405 4682.5001,-1441.4405"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="4887" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4887" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>section_13&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4712.4188,-1494.9535C4750.9539,-1476.9086 4813.9677,-1447.4012 4852.8213,-1429.2073"/>
<polygon fill="#000000" stroke="#000000" points="4854.5772,-1432.2498 4862.1492,-1424.8393 4851.6086,-1425.9105 4854.5772,-1432.2498"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="5287" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5287" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_13&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4735.9259,-1501.4831C4857.4877,-1482.0092 5139.9766,-1436.7552 5245.9013,-1419.7863"/>
<polygon fill="#000000" stroke="#000000" points="5246.5628,-1423.2251 5255.8832,-1418.1873 5245.4555,-1416.3132 5246.5628,-1423.2251"/>
</g>
<!-- prose_51 -->
<g id="node52" class="node">
<title>prose_51</title>
<ellipse fill="none" stroke="#000000" cx="5678" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5678" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_51 -->
<g id="edge51" class="edge">
<title>section_13&#45;&gt;prose_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4742.6426,-1506.1635C4858.9891,-1497.858 5113.7608,-1478.789 5328,-1456.6025 5439.8639,-1445.0179 5571.3786,-1427.7155 5636.7617,-1418.8635"/>
<polygon fill="#000000" stroke="#000000" points="5637.2363,-1422.3313 5646.6744,-1417.5175 5636.2944,-1415.3949 5637.2363,-1422.3313"/>
</g>
<!-- header_63 -->
<g id="node64" class="node">
<title>header_63</title>
<ellipse fill="none" stroke="#000000" cx="6103" cy="-1413.2024" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="6103" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_14&#45;&gt;header_63 -->
<g id="edge63" class="edge">
<title>section_14&#45;&gt;header_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6239.3744,-1494.5262C6218.508,-1484.2528 6191.3205,-1470.3247 6168,-1456.6025 6156.9449,-1450.0974 6145.1912,-1442.4787 6134.7623,-1435.4558"/>
<polygon fill="#000000" stroke="#000000" points="6136.5939,-1432.4687 6126.358,-1429.7342 6132.6545,-1438.255 6136.5939,-1432.4687"/>
</g>
<!-- prose_64 -->
<g id="node65" class="node">
<title>prose_64</title>
<ellipse fill="none" stroke="#000000" cx="6209" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6209" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_64 -->
<g id="edge64" class="edge">
<title>section_14&#45;&gt;prose_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6261.2614,-1492.7378C6251.3049,-1477.5853 6236.9029,-1455.6672 6225.7378,-1438.6753"/>
<polygon fill="#000000" stroke="#000000" points="6228.6515,-1436.7359 6220.2349,-1430.3006 6222.8014,-1440.5799 6228.6515,-1436.7359"/>
</g>
<!-- codeblock_65 -->
<g id="node66" class="node">
<title>codeblock_65</title>
<ellipse fill="none" stroke="#000000" cx="6338" cy="-1413.2024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6338" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;78</text>
</g>
<!-- section_14&#45;&gt;codeblock_65 -->
<g id="edge65" class="edge">
<title>section_14&#45;&gt;codeblock_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6284.922,-1492.7378C6294.8468,-1477.8659 6309.1209,-1456.4766 6320.3674,-1439.6243"/>
<polygon fill="#000000" stroke="#000000" points="6323.2937,-1441.5444 6325.9335,-1431.2837 6317.4712,-1437.6587 6323.2937,-1441.5444"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="6486" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6486" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_14&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6320.6149,-1497.1716C6351.0401,-1487.7259 6390.8586,-1473.7336 6424,-1456.6025 6436.2491,-1450.2708 6448.8746,-1441.8368 6459.5094,-1434.0883"/>
<polygon fill="#000000" stroke="#000000" points="6461.6462,-1436.8609 6467.5664,-1428.0744 6457.459,-1431.2513 6461.6462,-1436.8609"/>
</g>
<!-- codeblock_67 -->
<g id="node68" class="node">
<title>codeblock_67</title>
<ellipse fill="none" stroke="#000000" cx="6672" cy="-1413.2024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6672" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 84&#45;99</text>
</g>
<!-- section_14&#45;&gt;codeblock_67 -->
<g id="edge67" class="edge">
<title>section_14&#45;&gt;codeblock_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6329.8007,-1499.9012C6381.4801,-1489.8396 6459.7335,-1473.7893 6527,-1456.6025 6556.9304,-1448.9551 6589.9502,-1439.1789 6616.9099,-1430.8418"/>
<polygon fill="#000000" stroke="#000000" points="6618.0426,-1434.1549 6626.5512,-1427.8419 6615.9629,-1427.471 6618.0426,-1434.1549"/>
</g>
<!-- header_75 -->
<g id="node76" class="node">
<title>header_75</title>
<ellipse fill="none" stroke="#000000" cx="6989" cy="-1413.2024" rx="46.4822" ry="18"/>
<text text-anchor="middle" x="6989" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : define</text>
</g>
<!-- section_15&#45;&gt;header_75 -->
<g id="edge75" class="edge">
<title>section_15&#45;&gt;header_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7261.7115,-1500.8982C7211.3561,-1492.1842 7139.5447,-1477.5237 7079,-1456.6025 7060.4973,-1450.2089 7040.8181,-1441.0184 7024.5952,-1432.7393"/>
<polygon fill="#000000" stroke="#000000" points="7025.9647,-1429.5066 7015.4778,-1427.9981 7022.7351,-1435.717 7025.9647,-1429.5066"/>
</g>
<!-- prose_76 -->
<g id="node77" class="node">
<title>prose_76</title>
<ellipse fill="none" stroke="#000000" cx="7120" cy="-1413.2024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7120" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_76 -->
<g id="edge76" class="edge">
<title>section_15&#45;&gt;prose_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7291.1484,-1494.5188C7253.0924,-1476.4376 7191.6705,-1447.2547 7153.6835,-1429.2062"/>
<polygon fill="#000000" stroke="#000000" points="7155.0935,-1426.0012 7144.5591,-1424.871 7152.0894,-1432.3239 7155.0935,-1426.0012"/>
</g>
<!-- codeblock_77 -->
<g id="node78" class="node">
<title>codeblock_77</title>
<ellipse fill="none" stroke="#000000" cx="7325" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7325" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 104&#45;179</text>
</g>
<!-- section_15&#45;&gt;codeblock_77 -->
<g id="edge77" class="edge">
<title>section_15&#45;&gt;codeblock_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7325,-1492.2823C7325,-1477.9977 7325,-1457.9071 7325,-1441.5509"/>
<polygon fill="#000000" stroke="#000000" points="7328.5001,-1441.4405 7325,-1431.4405 7321.5001,-1441.4405 7328.5001,-1441.4405"/>
</g>
<!-- codeblock_78 -->
<g id="node79" class="node">
<title>codeblock_78</title>
<ellipse fill="none" stroke="#000000" cx="7626" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7626" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 181&#45;190</text>
</g>
<!-- section_15&#45;&gt;codeblock_78 -->
<g id="edge78" class="edge">
<title>section_15&#45;&gt;codeblock_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7369.7377,-1496.1259C7422.8383,-1478.9432 7511.4573,-1450.2671 7569.3122,-1431.5459"/>
<polygon fill="#000000" stroke="#000000" points="7570.5947,-1434.8097 7579.0314,-1428.4009 7568.4395,-1428.1497 7570.5947,-1434.8097"/>
</g>
<!-- codeblock_79 -->
<g id="node80" class="node">
<title>codeblock_79</title>
<ellipse fill="none" stroke="#000000" cx="7975" cy="-1413.2024" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7975" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 193&#45;207</text>
</g>
<!-- section_15&#45;&gt;codeblock_79 -->
<g id="edge79" class="edge">
<title>section_15&#45;&gt;codeblock_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7391.482,-1502.2757C7470.4148,-1492.2239 7605.9834,-1474.4381 7722,-1456.6025 7781.6496,-1447.4323 7848.9876,-1435.8195 7899.1884,-1426.9143"/>
<polygon fill="#000000" stroke="#000000" points="7900.0791,-1430.3109 7909.3118,-1425.114 7898.8534,-1423.419 7900.0791,-1430.3109"/>
</g>
<!-- codeblock_80 -->
<g id="node81" class="node">
<title>codeblock_80</title>
<ellipse fill="none" stroke="#000000" cx="8301" cy="-1413.2024" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="8301" y="-1409.0024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 209&#45;211</text>
</g>
<!-- section_15&#45;&gt;codeblock_80 -->
<g id="edge80" class="edge">
<title>section_15&#45;&gt;codeblock_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7399.1362,-1508.0432C7533.535,-1502.7802 7826.1809,-1488.4554 8071,-1456.6025 8125.133,-1449.5593 8185.7888,-1437.9567 8231.2145,-1428.5195"/>
<polygon fill="#000000" stroke="#000000" points="8232.1799,-1431.8934 8241.2504,-1426.4184 8230.7454,-1425.0419 8232.1799,-1431.8934"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1182.5,-786.4028 865.5,-786.4028 865.5,-730.5998 1182.5,-730.5998 1182.5,-786.4028"/>
<text text-anchor="middle" x="1024" y="-739.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">This function takes two parameters, namely:</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1770.6606,-1396.2139C1764.4428,-1386.6869 1755.3365,-1375.5856 1744,-1369.8024 1634.4983,-1313.9411 1287.901,-1410.7057 1192,-1333.8024 1022.6818,-1198.0256 1017.7489,-901.575 1021.7297,-796.4217"/>
<polygon fill="#000000" stroke="#000000" points="1025.2329,-796.4198 1022.1651,-786.2789 1018.2393,-796.1195 1025.2329,-796.4198"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1777,-785.8018 1201,-785.8018 1201,-731.2009 1777,-731.2009 1777,-785.8018"/>
<text text-anchor="middle" x="1489" y="-754.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; grammar_template : &#160;A function with one parameter, which must be =_ENV=.</text>
<text text-anchor="middle" x="1489" y="-739.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; metas : &#160;A map with keys of string and values of Node subclass constructors.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1838.6735,-1397.1189C1831.8898,-1388.9363 1823.5103,-1378.8356 1816,-1369.8024 1802.6848,-1353.7873 1797.5121,-1351.1589 1786,-1333.8024 1658.7866,-1142.0067 1545.0744,-888.9881 1504.6463,-795.3752"/>
<polygon fill="#000000" stroke="#000000" points="1507.7994,-793.8478 1500.6321,-786.0452 1501.3693,-796.6144 1507.7994,-793.8478"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2070.5,-786.4028 1795.5,-786.4028 1795.5,-730.5998 2070.5,-730.5998 2070.5,-786.4028"/>
<text text-anchor="middle" x="1933" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">Both of these are reasonably complex.</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1924.2501,-1395.0087C1925.4666,-1306.512 1930.7758,-920.2992 1932.4749,-796.6967"/>
<polygon fill="#000000" stroke="#000000" points="1935.9762,-796.6196 1932.6141,-786.5724 1928.9769,-796.5233 1935.9762,-796.6196"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2143,-776.5013 2089,-776.5013 2089,-740.5013 2143,-740.5013 2143,-776.5013"/>
</g>
<!-- header_23&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>header_23&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2069.5053,-1394.9821C2072.4674,-1378.9343 2076.6005,-1354.8981 2079,-1333.8024 2102.7853,-1124.6893 2112.4601,-870.9439 2115.1571,-786.9836"/>
<polygon fill="#000000" stroke="#000000" points="2118.6568,-787.0444 2115.4722,-776.9396 2111.6603,-786.8249 2118.6568,-787.0444"/>
</g>
<!-- raw_32 -->
<g id="node33" class="node">
<title>raw_32</title>
<ellipse fill="none" stroke="#000000" cx="2205" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2205" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_32 -->
<g id="edge32" class="edge">
<title>prose_24&#45;&gt;raw_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2212.7777,-1395.0087C2211.6653,-1303.9697 2206.7029,-897.8636 2205.3447,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2208.8433,-786.5636 2205.2212,-776.6072 2201.8438,-786.6492 2208.8433,-786.5636"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="2286" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2286" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_25&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_25&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2294.7499,-1395.0087C2293.4984,-1303.9697 2287.9158,-897.8636 2286.3877,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2289.8861,-786.5581 2286.2489,-776.6072 2282.8868,-786.6544 2289.8861,-786.5581"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="2368" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2368" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_26&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.7499,-1395.0087C2375.4984,-1303.9697 2369.9158,-897.8636 2368.3877,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2371.8861,-786.5581 2368.2489,-776.6072 2364.8868,-786.6544 2371.8861,-786.5581"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2450" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2450" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_27&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2458.7499,-1395.0087C2457.4984,-1303.9697 2451.9158,-897.8636 2450.3877,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2453.8861,-786.5581 2450.2489,-776.6072 2446.8868,-786.6544 2453.8861,-786.5581"/>
</g>
<!-- raw_40 -->
<g id="node41" class="node">
<title>raw_40</title>
<ellipse fill="none" stroke="#000000" cx="2532" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2532" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_40 -->
<g id="edge40" class="edge">
<title>prose_28&#45;&gt;raw_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2540.7499,-1395.0087C2539.4984,-1303.9697 2533.9158,-897.8636 2532.3877,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2535.8861,-786.5581 2532.2489,-776.6072 2528.8868,-786.6544 2535.8861,-786.5581"/>
</g>
<!-- raw_42 -->
<g id="node43" class="node">
<title>raw_42</title>
<ellipse fill="none" stroke="#000000" cx="2815" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="2815" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_42 -->
<g id="edge42" class="edge">
<title>prose_29&#45;&gt;raw_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2690.557,-1395.0087C2708.356,-1303.9697 2787.7534,-897.8636 2809.4854,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="2812.9763,-787.093 2811.4601,-776.6072 2806.1063,-785.7498 2812.9763,-787.093"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3103" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="3103" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_30&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2985.3625,-1395.0087C3002.1881,-1303.9697 3077.2435,-897.8636 3097.787,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="3101.278,-787.0767 3099.6537,-776.6072 3094.3945,-785.8045 3101.278,-787.0767"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="562,-116.8005 0,-116.8005 0,-30.3998 562,-30.3998 562,-116.8005"/>
<text text-anchor="middle" x="281" y="-69.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The internal function @define creates a custom environment variable, neatly</text>
<text text-anchor="middle" x="281" y="-54.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">sidestepping lua&#39;s pedantic insistance on prepending =local= to all values of </text>
<text text-anchor="middle" x="281" y="-38.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">significance. </text>
</g>
<!-- raw_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2206.3592,-740.4311C2212.6289,-651.4129 2235.048,-260.6991 2152,-183.2002 2119.8837,-153.2299 614.5245,-153.1411 571,-147.2002 526.0234,-141.0612 477.9594,-130.5366 434.1573,-119.3362"/>
<polygon fill="#000000" stroke="#000000" points="434.8532,-115.901 424.2953,-116.7849 433.1,-122.6779 434.8532,-115.901"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="1121.5,-100.9006 580.5,-100.9006 580.5,-46.2997 1121.5,-46.2997 1121.5,-100.9006"/>
<text text-anchor="middle" x="851" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">More relevantly, it constructs a full grammar, which will return a table of</text>
<text text-anchor="middle" x="851" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">type Node. </text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2287.6132,-740.466C2295.1336,-651.6146 2323.0379,-261.5745 2241,-183.2002 2196.3472,-140.5416 1191.1051,-156.133 1130,-147.2002 1067.1211,-138.0082 998.0513,-119.8538 944.3656,-103.8762"/>
<polygon fill="#000000" stroke="#000000" points="945.1094,-100.4452 934.5253,-100.9208 943.0959,-107.1494 945.1094,-100.4452"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="1680.5,-116.2012 1139.5,-116.2012 1139.5,-30.9991 1680.5,-30.9991 1680.5,-116.2012"/>
<text text-anchor="middle" x="1410" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">If you stick to =lpeg= patterns, as you should, all array values will be of</text>
<text text-anchor="middle" x="1410" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">Node, as is intended. &#160;Captures will interpolate various other sorts of Lua</text>
<text text-anchor="middle" x="1410" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">values, which will induce halting in some places and silently corrupt</text>
<text text-anchor="middle" x="1410" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">execution in others. </text>
</g>
<!-- raw_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2369.5412,-740.5033C2376.7128,-651.8305 2403.1545,-262.5111 2322,-183.2002 2271.6175,-133.9623 1758.5765,-158.2406 1689,-147.2002 1646.3128,-140.4267 1600.7082,-129.8588 1559.0013,-118.8235"/>
<polygon fill="#000000" stroke="#000000" points="1559.8939,-115.4393 1549.3292,-116.2378 1558.086,-122.2018 1559.8939,-115.4393"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2253.5,-116.2012 1698.5,-116.2012 1698.5,-30.9991 2253.5,-30.9991 2253.5,-116.2012"/>
<text text-anchor="middle" x="1976" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">Though as yet poorly thought through, the [[elpatt module][./elpatt]] is</text>
<text text-anchor="middle" x="1976" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">intended to provide only those patterns which are allowed in Grammars, while</text>
<text text-anchor="middle" x="1976" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">expanding the scope of some favorites to properly respect utf&#45;8 and otherwise</text>
<text text-anchor="middle" x="1976" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">behave. </text>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2455.0822,-740.804C2476.029,-663.7892 2547.996,-354.0532 2404,-183.2002 2362.319,-133.7452 2325.6582,-163.2334 2263,-147.2002 2227.09,-138.0115 2188.656,-128.1641 2151.9642,-118.7569"/>
<polygon fill="#000000" stroke="#000000" points="2152.7285,-115.3397 2142.1725,-116.2463 2150.9899,-122.1203 2152.7285,-115.3397"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2736,-93.5022 2272,-93.5022 2272,-53.698 2736,-53.698 2736,-93.5022"/>
<text text-anchor="middle" x="2504" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">There are examples of the format in the [[spec module][./spec]].</text>
</g>
<!-- raw_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>raw_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2531.2511,-740.1819C2527.4222,-646.5255 2510.029,-221.0744 2505.2297,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2508.7235,-103.4546 2504.8179,-93.606 2501.7294,-103.7406 2508.7235,-103.4546"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2931.5,-93.5022 2754.5,-93.5022 2754.5,-53.698 2931.5,-53.698 2931.5,-93.5022"/>
<text text-anchor="middle" x="2843" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Special fields include:</text>
</g>
<!-- raw_42&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>raw_42&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2815.7489,-740.1819C2819.5778,-646.5255 2836.971,-221.0744 2841.7703,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="2845.2706,-103.7406 2842.1821,-93.606 2838.2765,-103.4546 2845.2706,-103.7406"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3498,-132.1003 2950,-132.1003 2950,-15.1 3498,-15.1 3498,-132.1003"/>
<text text-anchor="middle" x="3224" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;START : &#160;a string which must be the same as the starting rule.</text>
<text text-anchor="middle" x="3224" y="-85.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;SUPPRESS : &#160;either a string or an array of strings. These rules will be</text>
<text text-anchor="middle" x="3224" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;removed from the Node. </text>
<text text-anchor="middle" x="3224" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;P : &#160;The lpeg P function. &#160;Recognizes a certain pattern.</text>
<text text-anchor="middle" x="3224" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; &#160;V : &#160;The lpeg V function. &#160;Used for non&#45;terminal rvalues in a grammar. </text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3106.1743,-740.5339C3121.1188,-655.9428 3184.8661,-295.111 3211.8536,-142.3529"/>
<polygon fill="#000000" stroke="#000000" points="3215.3614,-142.615 3213.6546,-132.1586 3208.4682,-141.3971 3215.3614,-142.615"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="4527,-776.5013 4473,-776.5013 4473,-740.5013 4527,-740.5013 4527,-776.5013"/>
</g>
<!-- header_46&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>header_46&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4500,-1395.0087C4500,-1303.9697 4500,-897.8636 4500,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4503.5001,-786.6071 4500,-776.6072 4496.5001,-786.6072 4503.5001,-786.6071"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="4585" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4585" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_47&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4596.6665,-1395.0087C4594.9979,-1303.9697 4587.5544,-897.8636 4585.517,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4589.0146,-786.5413 4585.3319,-776.6072 4582.0158,-786.6697 4589.0146,-786.5413"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="4668" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4668" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_48&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_48&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4678.6943,-1395.0087C4677.1647,-1303.9697 4670.3415,-897.8636 4668.4739,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4671.9718,-786.5469 4668.3042,-776.6072 4664.9728,-786.6646 4671.9718,-786.5469"/>
</g>
<!-- raw_57 -->
<g id="node58" class="node">
<title>raw_57</title>
<ellipse fill="none" stroke="#000000" cx="4945" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="4945" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_49&#45;&gt;raw_57 -->
<g id="edge57" class="edge">
<title>prose_49&#45;&gt;raw_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4888.6118,-1395.0087C4896.6769,-1303.9697 4932.6539,-897.8636 4942.5012,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="4945.9998,-786.877 4943.396,-776.6072 4939.0271,-786.2593 4945.9998,-786.877"/>
</g>
<!-- raw_59 -->
<g id="node60" class="node">
<title>raw_59</title>
<ellipse fill="none" stroke="#000000" cx="5441" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5441" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_50&#45;&gt;raw_59 -->
<g id="edge59" class="edge">
<title>prose_50&#45;&gt;raw_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5291.199,-1395.3512C5312.4728,-1304.91 5408.3627,-897.2524 5434.4375,-786.4005"/>
<polygon fill="#000000" stroke="#000000" points="5437.922,-786.8723 5436.8048,-776.3366 5431.1079,-785.2695 5437.922,-786.8723"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="5855" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="5855" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_51&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_51&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5682.8261,-1395.3512C5707.3018,-1304.8187 5817.7108,-896.4293 5847.5479,-786.0659"/>
<polygon fill="#000000" stroke="#000000" points="5850.947,-786.9035 5850.1782,-776.3366 5844.1896,-785.0765 5850.947,-786.9035"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4113.5,-108.9005 3516.5,-108.9005 3516.5,-38.2998 4113.5,-38.2998 4113.5,-108.9005"/>
<text text-anchor="middle" x="3815" y="-61.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;By default a node will inherit from the Node class. &#160;If you want custom behavior,</text>
<text text-anchor="middle" x="3815" y="-46.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">you must pass in a table of metatable constructors.</text>
</g>
<!-- raw_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4590.4842,-740.7055C4613.5361,-661.9599 4694.2778,-341.7585 4536,-183.2002 4503.3793,-150.5217 4167.5763,-154.603 4122,-147.2002 4066.359,-138.1628 4005.8745,-124.5075 3953.4189,-111.4036"/>
<polygon fill="#000000" stroke="#000000" points="3954.2724,-108.0093 3943.7207,-108.9645 3952.565,-114.7979 3954.2724,-108.0093"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4700.5,-147.3005 4131.5,-147.3005 4131.5,.1003 4700.5,.1003 4700.5,-147.3005"/>
<text text-anchor="middle" x="4416" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">That&#39;s a fairly specific beast. &#160;Any rule defined above will have an =id=</text>
<text text-anchor="middle" x="4416" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">corresonding to the name of the rule. &#160;Unless =SUPPRESS=ed, this will become</text>
<text text-anchor="middle" x="4416" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node. &#160;If the =metas= parameter has a key corresponding to =id=, then it</text>
<text text-anchor="middle" x="4416" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">must return a function taking two parameters:</text>
<text text-anchor="middle" x="4416" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;</text>
<text text-anchor="middle" x="4416" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; node : &#160;The node under construction, which under normal circumstances will</text>
<text text-anchor="middle" x="4416" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;already have the =first= and =last= fields.</text>
<text text-anchor="middle" x="4416" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;: &#160;The entire str the grammar is parsing.</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4672.1913,-740.5963C4688.7624,-665.2425 4743.0433,-369.2057 4621,-183.2002 4614.0996,-172.6833 4605.8407,-163.1027 4596.6564,-154.3862"/>
<polygon fill="#000000" stroke="#000000" points="4598.8731,-151.6724 4589.1006,-147.5797 4594.1879,-156.8733 4598.8731,-151.6724"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5287.5,-93.5022 4718.5,-93.5022 4718.5,-53.698 5287.5,-53.698 5287.5,-93.5022"/>
<text text-anchor="middle" x="5003" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">Which must return that same node, decorated in whatever fashion is appropriate.</text>
</g>
<!-- raw_57&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>raw_57&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4946.5514,-740.1819C4954.4825,-646.5255 4990.5113,-221.0744 5000.4527,-103.6804"/>
<polygon fill="#000000" stroke="#000000" points="5003.9494,-103.8657 5001.3058,-93.606 4996.9744,-103.275 5003.9494,-103.8657"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5882,-108.8005 5306,-108.8005 5306,-38.3997 5882,-38.3997 5882,-108.8005"/>
<text text-anchor="middle" x="5594" y="-77.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">The node will not have a metatable at this point, and the function must attach a</text>
<text text-anchor="middle" x="5594" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">metatable with =__index= equal to some table which itself has the =__index=</text>
<text text-anchor="middle" x="5594" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">Node as some recursive backstop.</text>
</g>
<!-- raw_59&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>raw_59&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5445.0137,-740.5339C5464.9567,-651.2595 5553.6312,-254.31 5583.8634,-118.9765"/>
<polygon fill="#000000" stroke="#000000" points="5587.3405,-119.4646 5586.105,-108.9421 5580.5089,-117.9384 5587.3405,-119.4646"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6427.5,-108.9005 5900.5,-108.9005 5900.5,-38.2998 6427.5,-38.2998 6427.5,-108.9005"/>
<text text-anchor="middle" x="6164" y="-77.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">You might say the return value must /inherit/ from Node, if we were using</text>
<text text-anchor="middle" x="6164" y="-62.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">a language that did that sort of thing. </text>
</g>
<!-- raw_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5859.0363,-740.5039C5876.0024,-667.1577 5946.3011,-385.1175 6067,-183.2002 6081.3869,-159.1325 6101.3944,-135.4489 6119.5036,-116.2903"/>
<polygon fill="#000000" stroke="#000000" points="6122.1912,-118.5449 6126.5973,-108.9097 6117.1443,-113.6942 6122.1912,-118.5449"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="6130,-776.5013 6076,-776.5013 6076,-740.5013 6130,-740.5013 6130,-776.5013"/>
</g>
<!-- header_63&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>header_63&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6103,-1395.0087C6103,-1303.9697 6103,-897.8636 6103,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6106.5001,-786.6071 6103,-776.6072 6099.5001,-786.6072 6106.5001,-786.6071"/>
</g>
<!-- raw_69 -->
<g id="node70" class="node">
<title>raw_69</title>
<ellipse fill="none" stroke="#000000" cx="6175" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6175" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_64&#45;&gt;raw_69 -->
<g id="edge69" class="edge">
<title>prose_64&#45;&gt;raw_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6208.0552,-1395.0087C6203.3273,-1303.9697 6182.2374,-897.8636 6176.4648,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6179.9543,-786.4122 6175.9403,-776.6072 6172.9637,-786.7753 6179.9543,-786.4122"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="6460,-793.7017 6220,-793.7017 6220,-723.3009 6460,-723.3009 6460,-793.7017"/>
<text text-anchor="middle" x="6340" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="6340" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; </text>
<text text-anchor="middle" x="6340" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
</g>
<!-- codeblock_65&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>codeblock_65&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6338.0556,-1395.0087C6338.3209,-1308.1438 6339.4625,-934.4408 6339.8616,-803.7985"/>
<polygon fill="#000000" stroke="#000000" points="6343.3617,-803.7406 6339.8924,-793.7299 6336.3618,-803.7191 6343.3617,-803.7406"/>
</g>
<!-- raw_72 -->
<g id="node73" class="node">
<title>raw_72</title>
<ellipse fill="none" stroke="#000000" cx="6505" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="6505" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_66&#45;&gt;raw_72 -->
<g id="edge72" class="edge">
<title>prose_66&#45;&gt;raw_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6486.528,-1395.0087C6489.17,-1303.9697 6500.9556,-897.8636 6504.1814,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6507.6829,-786.7045 6504.4746,-776.6072 6500.6858,-786.5014 6507.6829,-786.7045"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="6909.5,-870.1021 6550.5,-870.1021 6550.5,-646.9005 6909.5,-646.9005 6909.5,-870.1021"/>
<text text-anchor="middle" x="6730" y="-855.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="6730" y="-839.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="6730" y="-824.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">local V = string.sub( assert( _VERSION ), &#45;4 )</text>
<text text-anchor="middle" x="6730" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local _G = assert( _G )</text>
<text text-anchor="middle" x="6730" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="6730" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="6730" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="6730" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="6730" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="6730" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="6730" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="6730" y="-685.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="6730" y="-670.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local getfenv = assert( getfenv )</text>
<text text-anchor="middle" x="6730" y="-654.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_67&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>codeblock_67&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6673.6118,-1395.0087C6680.1125,-1321.6293 6704.7466,-1043.5604 6719.2155,-880.236"/>
<polygon fill="#000000" stroke="#000000" points="6722.7145,-880.4011 6720.1107,-870.1312 6715.7418,-879.7833 6722.7145,-880.4011"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="6500,-91.6001 6446,-91.6001 6446,-55.6001 6500,-55.6001 6500,-91.6001"/>
</g>
<!-- raw_69&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>raw_69&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6173.2619,-740.3942C6165.1912,-652.0364 6134.8892,-267.0058 6211,-183.2002 6279.0856,-108.2312 6354.278,-207.0126 6436,-147.2002 6450.9579,-136.2526 6460.2539,-117.5246 6465.787,-101.7006"/>
<polygon fill="#000000" stroke="#000000" points="6469.2294,-102.422 6468.9013,-91.8323 6462.5539,-100.3153 6469.2294,-102.422"/>
</g>
<!-- leaf_73 -->
<g id="node74" class="node">
<title>leaf_73</title>
<polygon fill="none" stroke="#c0c0c0" points="6849.5,-93.5022 6518.5,-93.5022 6518.5,-53.698 6849.5,-53.698 6849.5,-93.5022"/>
<text text-anchor="middle" x="6684" y="-62.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s the kind of thing I&#39;d like to automate. </text>
</g>
<!-- raw_72&#45;&gt;leaf_73 -->
<g id="edge73" class="edge">
<title>raw_72&#45;&gt;leaf_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6501.1047,-740.6302C6485.9486,-666.6126 6436.7424,-378.8153 6541,-183.2002 6561.0371,-145.6053 6600.2286,-116.9914 6632.5225,-98.4432"/>
<polygon fill="#000000" stroke="#000000" points="6634.3962,-101.4059 6641.4264,-93.4795 6630.9877,-95.2917 6634.3962,-101.4059"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="6982,-776.5013 6928,-776.5013 6928,-740.5013 6982,-740.5013 6982,-776.5013"/>
</g>
<!-- header_75&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>header_75&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6988.0552,-1395.0087C6983.3273,-1303.9697 6962.2374,-897.8636 6956.4648,-786.7078"/>
<polygon fill="#000000" stroke="#000000" points="6959.9543,-786.4122 6955.9403,-776.6072 6952.9637,-786.7753 6959.9543,-786.4122"/>
</g>
<!-- raw_82 -->
<g id="node83" class="node">
<title>raw_82</title>
<ellipse fill="none" stroke="#000000" cx="7027" cy="-758.5013" rx="27" ry="18"/>
<text text-anchor="middle" x="7027" y="-754.3013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_76&#45;&gt;raw_82 -->
<g id="edge82" class="edge">
<title>prose_76&#45;&gt;raw_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7104.2447,-1397.1547C7090.6218,-1382.1497 7071.7778,-1358.4163 7063,-1333.8024 6991.9192,-1134.4851 7013.702,-871.9257 7023.4344,-786.5897"/>
<polygon fill="#000000" stroke="#000000" points="7026.9134,-786.9728 7024.6088,-776.6317 7019.9616,-786.1529 7026.9134,-786.9728"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="7578,-1333.6035 7072,-1333.6035 7072,-183.3991 7578,-183.3991 7578,-1333.6035"/>
<text text-anchor="middle" x="7325" y="-1318.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(id, first, t, last, str, metas, offset)</text>
<text text-anchor="middle" x="7325" y="-1303.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="7325" y="-1287.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.first = first + offset</text>
<text text-anchor="middle" x="7325" y="-1272.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.last &#160;= last + offset &#45; 1</text>
<text text-anchor="middle" x="7325" y="-1257.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;t.str &#160;&#160;= str</text>
<text text-anchor="middle" x="7325" y="-1241.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if metas[id] then</text>
<text text-anchor="middle" x="7325" y="-1226.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t = metas[id](t, str)</text>
<text text-anchor="middle" x="7325" y="-1210.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;assert(t.id == id)</text>
<text text-anchor="middle" x="7325" y="-1195.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="7325" y="-1180.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="7325" y="-1164.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t, {__index = Node,</text>
<text text-anchor="middle" x="7325" y="-1149.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;__tostring = Node.toString})</text>
<text text-anchor="middle" x="7325" y="-1133.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="7325" y="-1118.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.isNode, &quot;failed isNode: &quot; .. id)</text>
<text text-anchor="middle" x="7325" y="-1103.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;assert(t.str)</text>
<text text-anchor="middle" x="7325" y="-1087.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return t</text>
<text text-anchor="middle" x="7325" y="-1072.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="7325" y="-1024.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; some useful/common lpeg patterns</text>
<text text-anchor="middle" x="7325" y="-1009.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cp = L.Cp</text>
<text text-anchor="middle" x="7325" y="-994.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cc = L.Cc</text>
<text text-anchor="middle" x="7325" y="-978.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ct = L.Ct</text>
<text text-anchor="middle" x="7325" y="-963.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg1_str = L.Carg(1)</text>
<text text-anchor="middle" x="7325" y="-947.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg2_metas = L.Carg(2)</text>
<text text-anchor="middle" x="7325" y="-932.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local arg3_offset = L.Carg(3)</text>
<text text-anchor="middle" x="7325" y="-885.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="7325" y="-869.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45; with lots of syntax sugar</text>
<text text-anchor="middle" x="7325" y="-854.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function define(func, g, e)</text>
<text text-anchor="middle" x="7325" y="-838.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="7325" y="-823.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if e == nil then</text>
<text text-anchor="middle" x="7325" y="-808.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;e = V == &quot; 5.1&quot; and getfenv(func) or _G</text>
<text text-anchor="middle" x="7325" y="-792.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7325" y="-777.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="7325" y="-761.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="7325" y="-746.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="7325" y="-731.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function(name) g[1] = name end,</text>
<text text-anchor="middle" x="7325" y="-715.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function(...)</text>
<text text-anchor="middle" x="7325" y="-700.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="7325" y="-684.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select(&#39;#&#39;, ...) do</text>
<text text-anchor="middle" x="7325" y="-669.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[select(i, ... )] = true</text>
<text text-anchor="middle" x="7325" y="-654.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7325" y="-638.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="7325" y="-623.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;V = L.V,</text>
<text text-anchor="middle" x="7325" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;P = L.P,</text>
<text text-anchor="middle" x="7325" y="-592.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="7325" y="-561.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env_index, { __index = e })</text>
<text text-anchor="middle" x="7325" y="-545.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable(env, {</text>
<text text-anchor="middle" x="7325" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="7325" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="7325" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] then</text>
<text text-anchor="middle" x="7325" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = val</text>
<text text-anchor="middle" x="7325" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7325" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = (Cc(name) </text>
<text text-anchor="middle" x="7325" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp() </text>
<text text-anchor="middle" x="7325" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Ct(val)</text>
<text text-anchor="middle" x="7325" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Cp()</text>
<text text-anchor="middle" x="7325" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg1_str</text>
<text text-anchor="middle" x="7325" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg2_metas)</text>
<text text-anchor="middle" x="7325" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* arg3_offset / make_ast_node</text>
<text text-anchor="middle" x="7325" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7325" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7325" y="-314.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;})</text>
<text text-anchor="middle" x="7325" y="-299.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="7325" y="-283.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if V == &quot; 5.1&quot; then</text>
<text text-anchor="middle" x="7325" y="-268.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="7325" y="-253.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7325" y="-237.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="7325" y="-222.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="7325" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="7325" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_77&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>codeblock_77&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7325,-1395.0087C7325,-1383.0094 7325,-1365.5369 7325,-1343.9877"/>
<polygon fill="#000000" stroke="#000000" points="7328.5001,-1343.8048 7325,-1333.8048 7321.5001,-1343.8049 7328.5001,-1343.8048"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="7871.5,-824.2017 7596.5,-824.2017 7596.5,-692.8009 7871.5,-692.8009 7871.5,-824.2017"/>
<text text-anchor="middle" x="7734" y="-808.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function refineMetas(metas)</text>
<text text-anchor="middle" x="7734" y="-793.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for _,v in pairs(metas) do</text>
<text text-anchor="middle" x="7734" y="-778.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not v[&quot;__tostring&quot;] then</text>
<text text-anchor="middle" x="7734" y="-762.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;v[&quot;__tostring&quot;] = Node.toString</text>
<text text-anchor="middle" x="7734" y="-747.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7734" y="-731.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="7734" y="-716.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return metas</text>
<text text-anchor="middle" x="7734" y="-701.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_78&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>codeblock_78&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7629.0013,-1395.0087C7642.339,-1314.1546 7696.672,-984.7857 7721.507,-834.2346"/>
<polygon fill="#000000" stroke="#000000" points="7724.9969,-834.5817 7723.1713,-824.1454 7718.0903,-833.4423 7724.9969,-834.5817"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="8374.5,-862.7018 7889.5,-862.7018 7889.5,-654.3008 8374.5,-654.3008 8374.5,-862.7018"/>
<text text-anchor="middle" x="8132" y="-847.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(grammar_template, metas)</text>
<text text-anchor="middle" x="8132" y="-832.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(grammar_template) == &#39;function&#39; then</text>
<text text-anchor="middle" x="8132" y="-816.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local metas = metas or {}</text>
<text text-anchor="middle" x="8132" y="-801.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grammar = define(grammar_template, nil, metas)</text>
<text text-anchor="middle" x="8132" y="-785.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parse = function(str, offset)</text>
<text text-anchor="middle" x="8132" y="-770.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local offset = offset or 0</text>
<text text-anchor="middle" x="8132" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return L.match(grammar, str, 1, str, metas, offset) &#45;&#45; other </text>
<text text-anchor="middle" x="8132" y="-739.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8132" y="-724.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return parse</text>
<text text-anchor="middle" x="8132" y="-708.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8132" y="-693.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no way to build grammar out of &quot; .. type(template))</text>
<text text-anchor="middle" x="8132" y="-678.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8132" y="-662.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_79&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>codeblock_79&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7979.3629,-1395.0087C7997.2264,-1320.5168 8065.675,-1035.0812 8104.5698,-872.8873"/>
<polygon fill="#000000" stroke="#000000" points="8108.0447,-873.4053 8106.9732,-862.8648 8101.2377,-871.7729 8108.0447,-873.4053"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="8479,-776.5013 8393,-776.5013 8393,-740.5013 8479,-740.5013 8479,-776.5013"/>
<text text-anchor="middle" x="8436" y="-755.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_80&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>codeblock_80&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8327.6042,-1395.7631C8346.8353,-1381.5624 8371.5394,-1359.6736 8384,-1333.8024 8476.2284,-1142.3142 8451.3894,-873.5855 8440.106,-786.748"/>
<polygon fill="#000000" stroke="#000000" points="8443.5461,-786.0678 8438.7428,-776.6244 8436.6087,-787.002 8443.5461,-786.0678"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="7054,-91.6001 7000,-91.6001 7000,-55.6001 7054,-55.6001 7054,-91.6001"/>
</g>
<!-- raw_82&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>raw_82&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7027,-740.1819C7027,-646.0016 7027,-216.3039 7027,-101.7393"/>
<polygon fill="#000000" stroke="#000000" points="7030.5001,-101.658 7027,-91.658 7023.5001,-101.658 7030.5001,-101.658"/>
</g>
</g>
</svg>