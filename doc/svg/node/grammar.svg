<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1024pt" height="432pt"
 viewBox="0.00 0.00 1024.20 432.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 428.2004)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-428.2004 1020.1964,-428.2004 1020.1964,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="355.1964" cy="-406.2004" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="355.1964" y="-402.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 33</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="355.1964" cy="-334.2004" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="355.1964" y="-330.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;33</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M355.1964,-388.0318C355.1964,-380.3314 355.1964,-371.1748 355.1964,-362.617"/>
<polygon fill="#000000" stroke="#000000" points="358.6965,-362.6136 355.1964,-352.6137 351.6965,-362.6137 358.6965,-362.6136"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="91.1964" cy="-262.2004" rx="91.3932" ry="18"/>
<text text-anchor="middle" x="91.1964" y="-258.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grammar Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M310.4124,-321.9866C267.61,-310.3132 202.6623,-292.6002 154.5608,-279.4816"/>
<polygon fill="#000000" stroke="#000000" points="155.4403,-276.0937 144.8718,-276.8391 153.5985,-282.8471 155.4403,-276.0937"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="232.1964" cy="-262.2004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="232.1964" y="-258.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M327.5928,-318.0422C308.5519,-306.8963 283.2069,-292.0602 263.4271,-280.4818"/>
<polygon fill="#000000" stroke="#000000" points="265.1716,-277.4474 254.7733,-275.4161 261.6353,-283.4885 265.1716,-277.4474"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="355.1964" cy="-262.2004" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="355.1964" y="-258.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;10</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M355.1964,-316.0318C355.1964,-308.3314 355.1964,-299.1748 355.1964,-290.617"/>
<polygon fill="#000000" stroke="#000000" points="358.6965,-290.6136 355.1964,-280.6137 351.6965,-290.6137 358.6965,-290.6136"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="629.1964" cy="-262.2004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="629.1964" y="-258.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 15&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M400.7495,-322.2302C446.4017,-310.2341 516.9862,-291.6863 567.6121,-278.3831"/>
<polygon fill="#000000" stroke="#000000" points="568.6757,-281.7226 577.4578,-275.7959 566.8966,-274.9524 568.6757,-281.7226"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="914.1964" cy="-262.2004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="914.1964" y="-258.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M411.0968,-327.0004C511.3482,-314.0878 721.8909,-286.9696 836.2564,-272.2392"/>
<polygon fill="#000000" stroke="#000000" points="836.872,-275.6889 846.343,-270.94 835.9778,-268.7462 836.872,-275.6889"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="150.1964,-124.1002 96.1964,-124.1002 96.1964,-84.1002 150.1964,-84.1002 150.1964,-124.1002"/>
</g>
<!-- prose_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M208.5174,-249.7395C192.5734,-240.2641 172.1665,-225.8618 159.1964,-208.2004 142.9755,-186.1124 133.6341,-156.1328 128.5531,-134.0182"/>
<polygon fill="#000000" stroke="#000000" points="131.9604,-133.2142 126.4492,-124.1656 125.1148,-134.6761 131.9604,-133.2142"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="436.1964,-146.7013 168.1964,-146.7013 168.1964,-61.4991 436.1964,-61.4991 436.1964,-146.7013"/>
<text text-anchor="middle" x="302.1964" y="-131.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="302.1964" y="-100.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; </text>
<text text-anchor="middle" x="302.1964" y="-84.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">local define = require &quot;node/define&quot;</text>
<text text-anchor="middle" x="302.1964" y="-69.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">local Root = require &quot;node/root&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>codeblock_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M349.1166,-244.0643C342.0015,-222.8397 329.903,-186.7497 319.7737,-156.5337"/>
<polygon fill="#000000" stroke="#000000" points="323.06,-155.325 316.563,-146.9561 316.423,-157.55 323.06,-155.325"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="911.6964,-208.3007 454.6964,-208.3007 454.6964,.1003 911.6964,.1003 911.6964,-208.3007"/>
<text text-anchor="middle" x="683.1964" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(grammar_template, metas)</text>
<text text-anchor="middle" x="683.1964" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(grammar_template) == &#39;function&#39; then</text>
<text text-anchor="middle" x="683.1964" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local metas = metas or {}</text>
<text text-anchor="middle" x="683.1964" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grammar = define.define(grammar_template, nil, metas)</text>
<text text-anchor="middle" x="683.1964" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parse = function(str)</text>
<text text-anchor="middle" x="683.1964" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local root = Root(str)</text>
<text text-anchor="middle" x="683.1964" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return L.match(grammar, str, 1, root) &#45;&#45; other </text>
<text text-anchor="middle" x="683.1964" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="683.1964" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return parse</text>
<text text-anchor="middle" x="683.1964" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="683.1964" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no way to build grammar out of &quot; .. type(template))</text>
<text text-anchor="middle" x="683.1964" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="683.1964" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_5&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M635.3909,-244.0643C637.8472,-236.8728 640.8863,-227.9748 644.2329,-218.1769"/>
<polygon fill="#000000" stroke="#000000" points="647.6064,-219.1281 647.5266,-208.5336 640.9822,-216.8655 647.6064,-219.1281"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1016.1964,-122.1002 930.1964,-122.1002 930.1964,-86.1002 1016.1964,-86.1002 1016.1964,-122.1002"/>
<text text-anchor="middle" x="973.1964" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">return new</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_6&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M920.9644,-244.0643C931.1793,-216.6919 950.6208,-164.5952 962.6878,-132.2596"/>
<polygon fill="#000000" stroke="#000000" points="966.1083,-133.1044 966.3255,-122.5118 959.5501,-130.6569 966.1083,-133.1044"/>
</g>
</g>
</svg>