<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1423pt" height="416pt"
 viewBox="0.00 0.00 1423.00 416.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 412.4002)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-412.4002 1419,-412.4002 1419,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="espalier/node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="374.5" cy="-390.4002" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="374.5" y="-386.2002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 30</text>
</g>
<!-- section_1 -->
<g id="node2" class="espalier/node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="374.5" cy="-318.4002" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="374.5" y="-314.2002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;5</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M374.5,-372.2315C374.5,-364.5311 374.5,-355.3745 374.5,-346.8168"/>
<polygon fill="#000000" stroke="#000000" points="378.0001,-346.8134 374.5,-336.8135 371.0001,-346.8135 378.0001,-346.8134"/>
</g>
<!-- header_2 -->
<g id="node3" class="espalier/node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="241.5" cy="-246.4002" rx="82.2406" ry="18"/>
<text text-anchor="middle" x="241.5" y="-242.2002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Root metatable</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M345.641,-302.7773C326.8736,-292.6175 302.1425,-279.2292 281.4902,-268.049"/>
<polygon fill="#000000" stroke="#000000" points="283.0826,-264.9311 272.6222,-263.2483 279.7501,-271.087 283.0826,-264.9311"/>
</g>
<!-- prose_3 -->
<g id="node4" class="espalier/node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="374.5" cy="-246.4002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="374.5" y="-242.2002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M374.5,-300.2315C374.5,-292.5311 374.5,-283.3745 374.5,-274.8168"/>
<polygon fill="#000000" stroke="#000000" points="378.0001,-274.8134 374.5,-264.8135 371.0001,-274.8135 378.0001,-274.8134"/>
</g>
<!-- section_4 -->
<g id="node5" class="espalier/node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="673.5" cy="-246.4002" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="673.5" y="-242.2002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;30</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M419.2633,-307.6211C471.6698,-295.0014 558.5833,-274.0724 615.9553,-260.2571"/>
<polygon fill="#000000" stroke="#000000" points="617.0534,-263.5928 625.9561,-257.8489 615.4146,-256.7873 617.0534,-263.5928"/>
</g>
<!-- leaf_5 -->
<g id="node6" class="espalier/node">
<title>leaf_5</title>
<polygon fill="none" stroke="#c0c0c0" points="373,-192.6013 0,-192.6013 0,-120.799 373,-120.799 373,-192.6013"/>
<text text-anchor="middle" x="186.5" y="-129.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We instantiate a new one of these for each parse.</text>
</g>
<!-- prose_3&#45;&gt;leaf_5 -->
<g id="edge5" class="edge">
<title>prose_3&#45;&gt;leaf_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M349.9223,-234.6735C329.6251,-224.9891 299.5708,-210.6494 270.752,-196.8991"/>
<polygon fill="#000000" stroke="#000000" points="271.9851,-193.6095 261.4526,-192.4621 268.9707,-199.9273 271.9851,-193.6095"/>
</g>
<!-- header_6 -->
<g id="node7" class="espalier/node">
<title>header_6</title>
<ellipse fill="none" stroke="#000000" cx="445.5" cy="-156.7002" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="445.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_6 -->
<g id="edge6" class="edge">
<title>section_4&#45;&gt;header_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M628.7926,-234.1913C595.3261,-224.4537 548.7537,-209.6225 509.5,-192.4002 499.8007,-188.1447 489.6416,-182.8816 480.3475,-177.7162"/>
<polygon fill="#000000" stroke="#000000" points="481.8139,-174.5239 471.3908,-172.6244 478.3544,-180.6093 481.8139,-174.5239"/>
</g>
<!-- prose_7 -->
<g id="node8" class="espalier/node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="550.5" cy="-156.7002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="550.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_4&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M646.6619,-230.0072C630.3402,-219.7267 609.2849,-205.9029 591.5,-192.4002 585.9443,-188.1822 580.1793,-183.4242 574.7888,-178.7895"/>
<polygon fill="#000000" stroke="#000000" points="577.0553,-176.1219 567.2272,-172.1647 572.4424,-181.3871 577.0553,-176.1219"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="espalier/node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="673.5" cy="-156.7002" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="673.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;12</text>
</g>
<!-- section_4&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M673.5,-228.2481C673.5,-215.8466 673.5,-199.1634 673.5,-185.0265"/>
<polygon fill="#000000" stroke="#000000" points="677.0001,-184.8253 673.5,-174.8253 670.0001,-184.8253 677.0001,-184.8253"/>
</g>
<!-- codeblock_9 -->
<g id="node10" class="espalier/node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="841.5" cy="-156.7002" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="841.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 16&#45;18</text>
</g>
<!-- section_4&#45;&gt;codeblock_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;codeblock_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M703.1483,-230.5701C730.4658,-215.9845 771.2231,-194.223 801.4316,-178.0938"/>
<polygon fill="#000000" stroke="#000000" points="803.2686,-181.0807 810.4414,-173.2832 799.9715,-174.9058 803.2686,-181.0807"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="espalier/node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1053.5" cy="-156.7002" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1053.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 20&#45;26</text>
</g>
<!-- section_4&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M724.8119,-236.535C776.2792,-226.3952 857.7019,-209.6874 927.5,-192.4002 950.0831,-186.8069 974.7441,-179.9812 996.2136,-173.8019"/>
<polygon fill="#000000" stroke="#000000" points="997.2032,-177.1592 1005.8345,-171.015 995.2555,-170.4356 997.2032,-177.1592"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="espalier/node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="1296.5" cy="-156.7002" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1296.5" y="-152.5002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 28&#45;30</text>
</g>
<!-- section_4&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_4&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M732.274,-241.6452C820.9345,-234.0091 993.9973,-217.2982 1139.5,-192.4002 1170.9241,-187.023 1205.5106,-179.3511 1234.2044,-172.4964"/>
<polygon fill="#000000" stroke="#000000" points="1235.1927,-175.8585 1244.0931,-170.1111 1233.5512,-169.0537 1235.1927,-175.8585"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="espalier/node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="459.5,-60.5001 405.5,-60.5001 405.5,-24.5001 459.5,-24.5001 459.5,-60.5001"/>
</g>
<!-- prose_7&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>prose_7&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M532.7126,-141.2052C509.0431,-120.5778 469.9759,-86.4994 468.5,-85.0002 463.4864,-79.9073 458.3672,-74.2128 453.6212,-68.6885"/>
<polygon fill="#000000" stroke="#000000" points="456.1065,-66.2058 446.9906,-60.8065 450.7498,-70.7121 456.1065,-66.2058"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="espalier/node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="717.5,-61.8007 477.5,-61.8007 477.5,-23.1995 717.5,-23.1995 717.5,-61.8007"/>
<text text-anchor="middle" x="597.5" y="-46.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="597.5" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;util&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_8&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M661.625,-138.8564C649.4431,-120.5514 630.3184,-91.8141 616.1213,-70.4811"/>
<polygon fill="#000000" stroke="#000000" points="619.0189,-68.5177 610.5649,-62.1318 613.1914,-72.3959 619.0189,-68.5177"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="espalier/node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="947.5,-60.5001 735.5,-60.5001 735.5,-24.5001 947.5,-24.5001 947.5,-60.5001"/>
<text text-anchor="middle" x="841.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local R, r = u.inherit(Node)</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_9&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M841.5,-138.6048C841.5,-120.3117 841.5,-91.7878 841.5,-70.5604"/>
<polygon fill="#000000" stroke="#000000" points="845.0001,-70.5107 841.5,-60.5108 838.0001,-70.5108 845.0001,-70.5107"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="espalier/node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1219.5,-85.0002 965.5,-85.0002 965.5,.0001 1219.5,.0001 1219.5,-85.0002"/>
<text text-anchor="middle" x="1092.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Root, str)</text>
<text text-anchor="middle" x="1092.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local root = setmetatable({}, R)</text>
<text text-anchor="middle" x="1092.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;root.str = str</text>
<text text-anchor="middle" x="1092.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return root</text>
<text text-anchor="middle" x="1092.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_10&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1059.6797,-138.6048C1063.7351,-126.7298 1069.2628,-110.5435 1074.6254,-94.8406"/>
<polygon fill="#000000" stroke="#000000" points="1078.0088,-95.7631 1077.9284,-85.1686 1071.3844,-93.5008 1078.0088,-95.7631"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="espalier/node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1415,-60.5001 1238,-60.5001 1238,-24.5001 1415,-24.5001 1415,-60.5001"/>
<text text-anchor="middle" x="1326.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(r, new)</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_11&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1301.2536,-138.6048C1306.0811,-120.2282 1313.6208,-91.527 1319.2049,-70.2701"/>
<polygon fill="#000000" stroke="#000000" points="1322.613,-71.0719 1321.7687,-60.5108 1315.8427,-69.2933 1322.613,-71.0719"/>
</g>
</g>
</svg>