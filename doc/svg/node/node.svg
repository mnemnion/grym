<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5310pt" height="592pt"
 viewBox="0.00 0.00 5310.34 592.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 588.4008)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-588.4008 5306.3424,-588.4008 5306.3424,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-566.4008" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 272</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-292.2004" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;177</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M65.6592,-547.984C65.6592,-501.1542 65.6592,-377.2571 65.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="69.1593,-320.537 65.6592,-310.5371 62.1593,-320.5371 69.1593,-320.537"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-18" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-13.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M65.6592,-273.7836C65.6592,-226.9538 65.6592,-103.0567 65.6592,-46.6708"/>
<polygon fill="#000000" stroke="#000000" points="69.1593,-46.3366 65.6592,-36.3367 62.1593,-46.3367 69.1593,-46.3366"/>
</g>
<!-- section_3 -->
<g id="node4" class="node">
<title>section_3</title>
<ellipse fill="none" stroke="#000000" cx="204.6592" cy="-566.4008" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="204.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_3</text>
</g>
<!-- header_6 -->
<g id="node5" class="node">
<title>header_6</title>
<ellipse fill="none" stroke="#000000" cx="204.6592" cy="-292.2004" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="204.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_3&#45;&gt;header_6 -->
<g id="edge3" class="edge">
<title>section_3&#45;&gt;header_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M204.6592,-547.984C204.6592,-501.1542 204.6592,-377.2571 204.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="208.1593,-320.537 204.6592,-310.5371 201.1593,-320.5371 208.1593,-320.537"/>
</g>
<!-- codeblock_7 -->
<g id="node6" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="390.6592" cy="-566.4008" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="390.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_7</text>
</g>
<!-- leaf_8 -->
<g id="node7" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="503.6592,-311.501 277.6592,-311.501 277.6592,-272.8998 503.6592,-272.8998 503.6592,-311.501"/>
<text text-anchor="middle" x="390.6592" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="390.6592" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_8 -->
<g id="edge4" class="edge">
<title>codeblock_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M390.6592,-547.984C390.6592,-501.395 390.6592,-378.5295 390.6592,-321.7466"/>
<polygon fill="#000000" stroke="#000000" points="394.1593,-321.6293 390.6592,-311.6294 387.1593,-321.6294 394.1593,-321.6293"/>
</g>
<!-- section_4 -->
<g id="node8" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="606.6592" cy="-566.4008" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="606.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_4</text>
</g>
<!-- header_9 -->
<g id="node9" class="node">
<title>header_9</title>
<ellipse fill="none" stroke="#000000" cx="606.6592" cy="-292.2004" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="606.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_4&#45;&gt;header_9 -->
<g id="edge5" class="edge">
<title>section_4&#45;&gt;header_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M606.6592,-547.984C606.6592,-501.1542 606.6592,-377.2571 606.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="610.1593,-320.537 606.6592,-310.5371 603.1593,-320.5371 610.1593,-320.537"/>
</g>
<!-- codeblock_10 -->
<g id="node10" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="769.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="769.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_10</text>
</g>
<!-- leaf_13 -->
<g id="node11" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="830.1592,-327.4008 709.1592,-327.4008 709.1592,-257 830.1592,-257 830.1592,-327.4008"/>
<text text-anchor="middle" x="769.6592" y="-296.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="769.6592" y="-280.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="769.6592" y="-265.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_13 -->
<g id="edge6" class="edge">
<title>codeblock_10&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M769.6592,-547.984C769.6592,-505.4178 769.6592,-399.1788 769.6592,-337.8421"/>
<polygon fill="#000000" stroke="#000000" points="773.1593,-337.6687 769.6592,-327.6687 766.1593,-337.6687 773.1593,-337.6687"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="904.6592" cy="-566.4008" rx="52.4608" ry="18"/>
<text text-anchor="middle" x="904.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_11</text>
</g>
<!-- header_14 -->
<g id="node13" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="904.6592" cy="-292.2004" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="904.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_11&#45;&gt;header_14 -->
<g id="edge7" class="edge">
<title>section_11&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M904.6592,-547.984C904.6592,-501.1542 904.6592,-377.2571 904.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="908.1593,-320.537 904.6592,-310.5371 901.1593,-320.5371 908.1593,-320.537"/>
</g>
<!-- section_12 -->
<g id="node14" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="1027.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="1027.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_12</text>
</g>
<!-- header_15 -->
<g id="node15" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="1027.6592" cy="-292.2004" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1027.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_12&#45;&gt;header_15 -->
<g id="edge8" class="edge">
<title>section_12&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1027.6592,-547.984C1027.6592,-501.1542 1027.6592,-377.2571 1027.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="1031.1593,-320.537 1027.6592,-310.5371 1024.1593,-320.5371 1031.1593,-320.537"/>
</g>
<!-- codeblock_16 -->
<g id="node16" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1344.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="1344.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_16</text>
</g>
<!-- leaf_22 -->
<g id="node17" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1587.1592,-403.8012 1102.1592,-403.8012 1102.1592,-180.5996 1587.1592,-180.5996 1587.1592,-403.8012"/>
<text text-anchor="middle" x="1344.6592" y="-388.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1344.6592" y="-373.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1344.6592" y="-358.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1344.6592" y="-342.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1344.6592" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1344.6592" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1344.6592" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1344.6592" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1344.6592" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1344.6592" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1344.6592" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1344.6592" y="-219.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1344.6592" y="-204.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1344.6592" y="-188.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_22 -->
<g id="edge9" class="edge">
<title>codeblock_16&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1344.6592,-547.984C1344.6592,-520.3476 1344.6592,-465.871 1344.6592,-414.2694"/>
<polygon fill="#000000" stroke="#000000" points="1348.1593,-413.9962 1344.6592,-403.9962 1341.1593,-413.9963 1348.1593,-413.9962"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="1802.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="1802.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_17</text>
</g>
<!-- leaf_23 -->
<g id="node19" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1999.6592,-443.6012 1605.6592,-443.6012 1605.6592,-140.7996 1999.6592,-140.7996 1999.6592,-443.6012"/>
<text text-anchor="middle" x="1802.6592" y="-428.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="1802.6592" y="-412.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="1802.6592" y="-397.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1802.6592" y="-366.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="1802.6592" y="-350.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="1802.6592" y="-335.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="1802.6592" y="-319.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1802.6592" y="-304.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="1802.6592" y="-289.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1802.6592" y="-273.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1802.6592" y="-242.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="1802.6592" y="-226.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="1802.6592" y="-211.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1802.6592" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="1802.6592" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="1802.6592" y="-149.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_23 -->
<g id="edge10" class="edge">
<title>codeblock_17&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1802.6592,-547.984C1802.6592,-527.3716 1802.6592,-491.8286 1802.6592,-453.6836"/>
<polygon fill="#000000" stroke="#000000" points="1806.1593,-453.404 1802.6592,-443.404 1799.1593,-453.404 1806.1593,-453.404"/>
</g>
<!-- section_18 -->
<g id="node20" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="2087.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="2087.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_18</text>
</g>
<!-- header_24 -->
<g id="node21" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="2087.6592" cy="-292.2004" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2087.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkDeep</text>
</g>
<!-- section_18&#45;&gt;header_24 -->
<g id="edge11" class="edge">
<title>section_18&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2087.6592,-547.984C2087.6592,-501.1542 2087.6592,-377.2571 2087.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="2091.1593,-320.537 2087.6592,-310.5371 2084.1593,-320.5371 2091.1593,-320.537"/>
</g>
<!-- codeblock_25 -->
<g id="node22" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2379.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="2379.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_25</text>
</g>
<!-- leaf_26 -->
<g id="node23" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2583.6592,-404.5009 2175.6592,-404.5009 2175.6592,-179.8999 2583.6592,-179.8999 2583.6592,-404.5009"/>
<text text-anchor="middle" x="2379.6592" y="-389.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2379.6592" y="-374.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2379.6592" y="-358.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2379.6592" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2379.6592" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2379.6592" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2379.6592" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2379.6592" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2379.6592" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2379.6592" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2379.6592" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2379.6592" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_26 -->
<g id="edge12" class="edge">
<title>codeblock_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2379.6592,-547.984C2379.6592,-520.4602 2379.6592,-466.3144 2379.6592,-414.9001"/>
<polygon fill="#000000" stroke="#000000" points="2383.1593,-414.6623 2379.6592,-404.6624 2376.1593,-414.6624 2383.1593,-414.6623"/>
</g>
<!-- section_19 -->
<g id="node24" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="2650.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="2650.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_19</text>
</g>
<!-- header_27 -->
<g id="node25" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="2650.6592" cy="-292.2004" rx="48.8618" ry="18"/>
<text text-anchor="middle" x="2650.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walk</text>
</g>
<!-- section_19&#45;&gt;header_27 -->
<g id="edge13" class="edge">
<title>section_19&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2650.6592,-547.984C2650.6592,-501.1542 2650.6592,-377.2571 2650.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="2654.1593,-320.537 2650.6592,-310.5371 2647.1593,-320.5371 2654.1593,-320.537"/>
</g>
<!-- codeblock_28 -->
<g id="node26" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2914.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="2914.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_28</text>
</g>
<!-- leaf_29 -->
<g id="node27" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3111.6592,-404.5009 2717.6592,-404.5009 2717.6592,-179.8999 3111.6592,-179.8999 3111.6592,-404.5009"/>
<text text-anchor="middle" x="2914.6592" y="-389.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="2914.6592" y="-374.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2914.6592" y="-358.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2914.6592" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2914.6592" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2914.6592" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2914.6592" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2914.6592" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2914.6592" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2914.6592" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2914.6592" y="-203.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2914.6592" y="-188.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_29 -->
<g id="edge14" class="edge">
<title>codeblock_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2914.6592,-547.984C2914.6592,-520.4602 2914.6592,-466.3144 2914.6592,-414.9001"/>
<polygon fill="#000000" stroke="#000000" points="2918.1593,-414.6623 2914.6592,-404.6624 2911.1593,-414.6624 2918.1593,-414.6623"/>
</g>
<!-- section_20 -->
<g id="node28" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="3232.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="3232.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_20</text>
</g>
<!-- header_30 -->
<g id="node29" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="3232.6592" cy="-292.2004" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3232.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.select(node, pred)</text>
</g>
<!-- section_20&#45;&gt;header_30 -->
<g id="edge15" class="edge">
<title>section_20&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3232.6592,-547.984C3232.6592,-501.1542 3232.6592,-377.2571 3232.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="3236.1593,-320.537 3232.6592,-310.5371 3229.1593,-320.5371 3236.1593,-320.537"/>
</g>
<!-- codeblock_31 -->
<g id="node30" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="3620.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="3620.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_31</text>
</g>
<!-- leaf_32 -->
<g id="node31" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3887.6592,-512.6014 3353.6592,-512.6014 3353.6592,-71.7994 3887.6592,-71.7994 3887.6592,-512.6014"/>
<text text-anchor="middle" x="3620.6592" y="-497.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="3620.6592" y="-481.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="3620.6592" y="-466.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="3620.6592" y="-451.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; and node.isNode and node.id == pred then</text>
<text text-anchor="middle" x="3620.6592" y="-435.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="3620.6592" y="-420.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3620.6592" y="-404.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="3620.6592" y="-389.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-374.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="3620.6592" y="-358.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="3620.6592" y="-343.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3620.6592" y="-327.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="3620.6592" y="-312.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-297.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3620.6592" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="3620.6592" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3620.6592" y="-219.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-204.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="3620.6592" y="-188.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3620.6592" y="-173.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3620.6592" y="-157.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-142.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-127.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3620.6592" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3620.6592" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge16" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3620.6592,-547.984C3620.6592,-541.0946 3620.6592,-532.5372 3620.6592,-522.7723"/>
<polygon fill="#000000" stroke="#000000" points="3624.1593,-522.6218 3620.6592,-512.6218 3617.1593,-522.6218 3624.1593,-522.6218"/>
</g>
<!-- section_21 -->
<g id="node32" class="node">
<title>section_21</title>
<ellipse fill="none" stroke="#000000" cx="3988.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="3988.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_21</text>
</g>
<!-- header_33 -->
<g id="node33" class="node">
<title>header_33</title>
<ellipse fill="none" stroke="#000000" cx="3988.6592" cy="-292.2004" rx="82.7165" ry="18"/>
<text text-anchor="middle" x="3988.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.tokens(node)</text>
</g>
<!-- section_21&#45;&gt;header_33 -->
<g id="edge17" class="edge">
<title>section_21&#45;&gt;header_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3988.6592,-547.984C3988.6592,-501.1542 3988.6592,-377.2571 3988.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="3992.1593,-320.537 3988.6592,-310.5371 3985.1593,-320.5371 3992.1593,-320.537"/>
</g>
<!-- codeblock_34 -->
<g id="node34" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="4286.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="4286.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_34</text>
</g>
<!-- leaf_35 -->
<g id="node35" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="4483.6592,-381.2007 4089.6592,-381.2007 4089.6592,-203.2001 4483.6592,-203.2001 4483.6592,-381.2007"/>
<text text-anchor="middle" x="4286.6592" y="-366.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.tokens(node)</text>
<text text-anchor="middle" x="4286.6592" y="-350.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4286.6592" y="-335.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in N.walk(ast) do</text>
<text text-anchor="middle" x="4286.6592" y="-319.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not node[1] then</text>
<text text-anchor="middle" x="4286.6592" y="-304.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(node:toValue())</text>
<text text-anchor="middle" x="4286.6592" y="-289.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4286.6592" y="-273.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4286.6592" y="-258.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4286.6592" y="-226.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4286.6592" y="-211.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end &#160;</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge18" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4286.6592,-547.984C4286.6592,-516.2669 4286.6592,-449.1981 4286.6592,-391.695"/>
<polygon fill="#000000" stroke="#000000" points="4290.1593,-391.4504 4286.6592,-381.4504 4283.1593,-391.4505 4290.1593,-391.4504"/>
</g>
<!-- section_5 -->
<g id="node36" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="4585.6592" cy="-566.4008" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="4585.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_5</text>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="4585.6592" cy="-292.2004" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="4585.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_5&#45;&gt;header_36 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4585.6592,-547.984C4585.6592,-501.1542 4585.6592,-377.2571 4585.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="4589.1593,-320.537 4585.6592,-310.5371 4582.1593,-320.5371 4589.1593,-320.537"/>
</g>
<!-- section_37 -->
<g id="node38" class="node">
<title>section_37</title>
<ellipse fill="none" stroke="#000000" cx="4733.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="4733.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_37</text>
</g>
<!-- header_39 -->
<g id="node39" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="4733.6592" cy="-292.2004" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="4733.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_37&#45;&gt;header_39 -->
<g id="edge20" class="edge">
<title>section_37&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4733.6592,-547.984C4733.6592,-501.1542 4733.6592,-377.2571 4733.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="4737.1593,-320.537 4733.6592,-310.5371 4730.1593,-320.5371 4737.1593,-320.537"/>
</g>
<!-- section_40 -->
<g id="node40" class="node">
<title>section_40</title>
<ellipse fill="none" stroke="#000000" cx="4906.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="4906.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_40</text>
</g>
<!-- header_41 -->
<g id="node41" class="node">
<title>header_41</title>
<ellipse fill="none" stroke="#000000" cx="4906.6592" cy="-292.2004" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="4906.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_40&#45;&gt;header_41 -->
<g id="edge21" class="edge">
<title>section_40&#45;&gt;header_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4906.6592,-547.984C4906.6592,-501.1542 4906.6592,-377.2571 4906.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="4910.1593,-320.537 4906.6592,-310.5371 4903.1593,-320.5371 4910.1593,-320.537"/>
</g>
<!-- section_38 -->
<g id="node42" class="node">
<title>section_38</title>
<ellipse fill="none" stroke="#000000" cx="5101.6592" cy="-566.4008" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="5101.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_38</text>
</g>
<!-- header_42 -->
<g id="node43" class="node">
<title>header_42</title>
<ellipse fill="none" stroke="#000000" cx="5101.6592" cy="-292.2004" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="5101.6592" y="-288.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_38&#45;&gt;header_42 -->
<g id="edge22" class="edge">
<title>section_38&#45;&gt;header_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5101.6592,-547.984C5101.6592,-501.1542 5101.6592,-377.2571 5101.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="5105.1593,-320.537 5101.6592,-310.5371 5098.1593,-320.5371 5105.1593,-320.537"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="5237.6592" cy="-566.4008" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="5237.6592" y="-562.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_43</text>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="5273.6592,-310.2004 5201.6592,-310.2004 5201.6592,-274.2004 5273.6592,-274.2004 5273.6592,-310.2004"/>
<text text-anchor="middle" x="5237.6592" y="-288.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_44 -->
<g id="edge23" class="edge">
<title>codeblock_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5237.6592,-547.984C5237.6592,-501.1542 5237.6592,-377.2571 5237.6592,-320.8713"/>
<polygon fill="#000000" stroke="#000000" points="5241.1593,-320.537 5237.6592,-310.5371 5234.1593,-320.5371 5241.1593,-320.537"/>
</g>
</g>
</svg>