<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12318pt" height="1335pt"
 viewBox="0.00 0.00 12317.50 1335.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1331.2015)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1331.2015 12313.5,-1331.2015 12313.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="465.5" cy="-1309.2015" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="465.5" y="-1305.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 274</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="465.5" cy="-1237.2015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="465.5" y="-1233.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;179</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M465.5,-1291.0329C465.5,-1283.3325 465.5,-1274.1758 465.5,-1265.6181"/>
<polygon fill="#000000" stroke="#000000" points="469.0001,-1265.6147 465.5,-1255.6148 462.0001,-1265.6148 469.0001,-1265.6147"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="260.5" cy="-1165.2015" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="260.5" y="-1161.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M424.9986,-1222.9766C389.908,-1210.6521 339.2888,-1192.8737 303.4885,-1180.2999"/>
<polygon fill="#000000" stroke="#000000" points="304.4039,-1176.9119 293.8091,-1176.9003 302.0843,-1183.5164 304.4039,-1176.9119"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="354.5" cy="-1165.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="354.5" y="-1161.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M439.7554,-1220.5023C423.176,-1209.7481 401.5669,-1195.7314 384.2528,-1184.5006"/>
<polygon fill="#000000" stroke="#000000" points="385.9338,-1181.4192 375.6395,-1178.9136 382.1245,-1187.2919 385.9338,-1181.4192"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="465.5" cy="-1165.2015" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="465.5" y="-1161.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M465.5,-1219.0329C465.5,-1211.3325 465.5,-1202.1758 465.5,-1193.6181"/>
<polygon fill="#000000" stroke="#000000" points="469.0001,-1193.6147 465.5,-1183.6148 462.0001,-1193.6148 469.0001,-1193.6147"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="900.5" cy="-1165.2015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="900.5" y="-1161.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M521.9227,-1227.8626C602.1107,-1214.5901 748.755,-1190.3179 834.0839,-1176.1945"/>
<polygon fill="#000000" stroke="#000000" points="834.8831,-1179.6099 844.1773,-1174.5239 833.7399,-1172.7039 834.8831,-1179.6099"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="5444.5" cy="-1165.2015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5444.5" y="-1161.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 180&#45;239</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M531.1937,-1236.2515C1069.5074,-1228.4671 4749.7069,-1175.2487 5359.104,-1166.4364"/>
<polygon fill="#000000" stroke="#000000" points="5359.1845,-1169.9357 5369.1328,-1166.2914 5359.0833,-1162.9364 5359.1845,-1169.9357"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="189.5" cy="-1093.2015" rx="27" ry="18"/>
<text text-anchor="middle" x="189.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M328.9161,-1153.9555C323.8106,-1151.7153 318.4859,-1149.3816 313.5,-1147.2015 282.352,-1133.582 246.7744,-1118.0957 221.7401,-1107.2104"/>
<polygon fill="#000000" stroke="#000000" points="222.9294,-1103.911 212.3631,-1103.1338 220.1385,-1110.3306 222.9294,-1103.911"/>
</g>
<!-- header_9 -->
<g id="node10" class="node">
<title>header_9</title>
<ellipse fill="none" stroke="#000000" cx="299.5" cy="-1093.2015" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="299.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;header_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M431.1047,-1150.2831C405.28,-1139.082 369.7624,-1123.6768 342.1334,-1111.6931"/>
<polygon fill="#000000" stroke="#000000" points="343.2854,-1108.3778 332.7185,-1107.6095 340.5,-1114.7997 343.2854,-1108.3778"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="404.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="404.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M450.4213,-1147.4037C442.8139,-1138.4244 433.4694,-1127.3949 425.2003,-1117.6346"/>
<polygon fill="#000000" stroke="#000000" points="427.7035,-1115.1747 418.5688,-1109.8073 422.3626,-1119.6997 427.7035,-1115.1747"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="526.5" cy="-1093.2015" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="526.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- section_4&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_4&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M480.5787,-1147.4037C487.9105,-1138.7498 496.8557,-1128.1915 504.8968,-1118.7003"/>
<polygon fill="#000000" stroke="#000000" points="507.5896,-1120.9364 511.3834,-1111.044 502.2487,-1116.4114 507.5896,-1120.9364"/>
</g>
<!-- header_15 -->
<g id="node16" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="701.5" cy="-1093.2015" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="701.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M860.7077,-1150.8043C830.1504,-1139.7484 787.6709,-1124.3789 754.2761,-1112.2964"/>
<polygon fill="#000000" stroke="#000000" points="755.2666,-1108.9328 744.6724,-1108.8217 752.885,-1115.5152 755.2666,-1108.9328"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="836.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="836.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M884.6798,-1147.4037C876.6184,-1138.3347 866.6979,-1127.1741 857.9584,-1117.3422"/>
<polygon fill="#000000" stroke="#000000" points="860.5204,-1114.9562 851.2607,-1109.8073 855.2885,-1119.6067 860.5204,-1114.9562"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="964.5" cy="-1093.2015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="964.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- section_5&#45;&gt;codeblock_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;codeblock_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M916.3202,-1147.4037C924.0126,-1138.7498 933.3978,-1128.1915 941.8344,-1118.7003"/>
<polygon fill="#000000" stroke="#000000" points="944.6122,-1120.8434 948.64,-1111.044 939.3803,-1116.1929 944.6122,-1120.8434"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="1125.5" cy="-1093.2015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1125.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.3504,-1151.4894C980.1411,-1139.7164 1033.316,-1122.7004 1072.7228,-1110.0902"/>
<polygon fill="#000000" stroke="#000000" points="1073.969,-1113.3663 1082.4265,-1106.985 1071.8356,-1106.6993 1073.969,-1113.3663"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="1949.5" cy="-1093.2015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1949.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;161</text>
</g>
<!-- section_5&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M964.5406,-1160.806C1147.4115,-1148.2543 1671.6221,-1112.2741 1871.1285,-1098.5807"/>
<polygon fill="#000000" stroke="#000000" points="1871.5001,-1102.0635 1881.237,-1097.8869 1871.0208,-1095.0799 1871.5001,-1102.0635"/>
</g>
<!-- header_63 -->
<g id="node64" class="node">
<title>header_63</title>
<ellipse fill="none" stroke="#000000" cx="5146.5" cy="-1093.2015" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="5146.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_63 -->
<g id="edge63" class="edge">
<title>section_6&#45;&gt;header_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5391.2236,-1152.3293C5341.1057,-1140.2203 5265.9307,-1122.0572 5212.1346,-1109.0595"/>
<polygon fill="#000000" stroke="#000000" points="5212.8917,-1105.6418 5202.3493,-1106.6953 5211.2476,-1112.446 5212.8917,-1105.6418"/>
</g>
<!-- prose_64 -->
<g id="node65" class="node">
<title>prose_64</title>
<ellipse fill="none" stroke="#000000" cx="5280.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5280.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_64 -->
<g id="edge64" class="edge">
<title>section_6&#45;&gt;prose_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5408.1031,-1149.2224C5380.4153,-1137.0668 5342.5566,-1120.4458 5315.2766,-1108.4693"/>
<polygon fill="#000000" stroke="#000000" points="5316.6659,-1105.2568 5306.1025,-1104.4416 5313.8519,-1111.6663 5316.6659,-1105.2568"/>
</g>
<!-- prose_65 -->
<g id="node66" class="node">
<title>prose_65</title>
<ellipse fill="none" stroke="#000000" cx="5362.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5362.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_65 -->
<g id="edge65" class="edge">
<title>section_6&#45;&gt;prose_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5424.6501,-1147.7723C5413.5588,-1138.0336 5399.6239,-1125.7981 5387.7613,-1115.3822"/>
<polygon fill="#000000" stroke="#000000" points="5389.764,-1112.4829 5379.9403,-1108.5149 5385.1454,-1117.743 5389.764,-1112.4829"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="5444.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5444.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_6&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5444.5,-1147.0329C5444.5,-1139.3325 5444.5,-1130.1758 5444.5,-1121.6181"/>
<polygon fill="#000000" stroke="#000000" points="5448.0001,-1121.6147 5444.5,-1111.6148 5441.0001,-1121.6148 5448.0001,-1121.6147"/>
</g>
<!-- prose_67 -->
<g id="node68" class="node">
<title>prose_67</title>
<ellipse fill="none" stroke="#000000" cx="5556.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5556.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_67 -->
<g id="edge67" class="edge">
<title>section_6&#45;&gt;prose_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5470.759,-1148.3207C5487.4968,-1137.5607 5509.2283,-1123.5905 5526.6246,-1112.4071"/>
<polygon fill="#000000" stroke="#000000" points="5528.7581,-1115.1964 5535.2773,-1106.8447 5524.9728,-1109.3082 5528.7581,-1115.1964"/>
</g>
<!-- prose_68 -->
<g id="node69" class="node">
<title>prose_68</title>
<ellipse fill="none" stroke="#000000" cx="5839.5" cy="-1093.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5839.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_68 -->
<g id="edge68" class="edge">
<title>section_6&#45;&gt;prose_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5504.492,-1154.2662C5585.5785,-1139.4859 5728.0564,-1113.5153 5798.1622,-1100.7365"/>
<polygon fill="#000000" stroke="#000000" points="5799.1582,-1104.1127 5808.3685,-1098.8761 5797.9029,-1097.2262 5799.1582,-1104.1127"/>
</g>
<!-- section_69 -->
<g id="node70" class="node">
<title>section_69</title>
<ellipse fill="none" stroke="#000000" cx="6859.5" cy="-1093.2015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6859.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 204&#45;226</text>
</g>
<!-- section_6&#45;&gt;section_69 -->
<g id="edge69" class="edge">
<title>section_6&#45;&gt;section_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5518.5843,-1161.4318C5759.4787,-1149.1743 6519.7166,-1110.4908 6774.9767,-1097.5023"/>
<polygon fill="#000000" stroke="#000000" points="6775.4885,-1100.9809 6785.2977,-1096.9772 6775.1327,-1093.99 6775.4885,-1100.9809"/>
</g>
<!-- section_70 -->
<g id="node71" class="node">
<title>section_70</title>
<ellipse fill="none" stroke="#000000" cx="10067.5" cy="-1093.2015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10067.5" y="-1089.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 240&#45;274</text>
</g>
<!-- section_6&#45;&gt;section_70 -->
<g id="edge70" class="edge">
<title>section_6&#45;&gt;section_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5519.9334,-1164.0267C6065.3973,-1155.5315 9400.9829,-1103.582 9981.4158,-1094.5422"/>
<polygon fill="#000000" stroke="#000000" points="9981.8519,-1098.0359 9991.7962,-1094.3805 9981.7428,-1091.0368 9981.8519,-1098.0359"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-1039.4026 0,-1039.4026 0,-967.6003 359,-967.6003 359,-1039.4026"/>
<text text-anchor="middle" x="179.5" y="-976.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M187.4764,-1075.0494C186.647,-1067.6104 185.646,-1058.6309 184.6374,-1049.5843"/>
<polygon fill="#000000" stroke="#000000" points="188.0909,-1048.9713 183.5044,-1039.4207 181.134,-1049.7469 188.0909,-1048.9713"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="404.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="404.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_10&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_10&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M404.5,-1075.0494C404.5,-1062.648 404.5,-1045.9647 404.5,-1031.8278"/>
<polygon fill="#000000" stroke="#000000" points="408.0001,-1031.6266 404.5,-1021.6266 401.0001,-1031.6267 408.0001,-1031.6266"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="675.5,-1022.8021 449.5,-1022.8021 449.5,-984.2009 675.5,-984.2009 675.5,-1022.8021"/>
<text text-anchor="middle" x="562.5" y="-1007.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="562.5" y="-992.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_11&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M533.7851,-1075.0494C538.6788,-1062.8559 545.2338,-1046.5231 550.8453,-1032.5411"/>
<polygon fill="#000000" stroke="#000000" points="554.2508,-1033.4525 554.7273,-1022.8684 547.7545,-1030.8453 554.2508,-1033.4525"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="431.5,-798.6012 377.5,-798.6012 377.5,-762.6012 431.5,-762.6012 431.5,-798.6012"/>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M404.5,-985.2606C404.5,-946.4687 404.5,-855.5392 404.5,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="408.0001,-808.7815 404.5,-798.7815 401.0001,-808.7815 408.0001,-808.7815"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="807.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="807.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_16&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M830.7705,-1075.4797C826.6794,-1062.8254 821.0962,-1045.5561 816.4242,-1031.1049"/>
<polygon fill="#000000" stroke="#000000" points="819.6241,-1029.6249 813.2176,-1021.1865 812.9636,-1031.7783 819.6241,-1029.6249"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="995,-1038.7019 874,-1038.7019 874,-968.3011 995,-968.3011 995,-1038.7019"/>
<text text-anchor="middle" x="934.5" y="-1007.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="934.5" y="-992.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="934.5" y="-976.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_17&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M958.4291,-1075.0494C955.8368,-1067.2985 952.6851,-1057.875 949.5316,-1048.446"/>
<polygon fill="#000000" stroke="#000000" points="952.7591,-1047.0613 946.268,-1038.6878 946.1206,-1049.2816 952.7591,-1047.0613"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="1058.5" cy="-1003.5015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1058.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_18&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_18&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1112.263,-1075.4797C1102.3803,-1062.2486 1088.729,-1043.9722 1077.6556,-1029.1471"/>
<polygon fill="#000000" stroke="#000000" points="1080.27,-1026.7986 1071.4816,-1020.8813 1074.6617,-1030.9876 1080.27,-1026.7986"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="1154.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1154.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_18&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1131.3686,-1075.0494C1135.4439,-1062.444 1140.9494,-1045.4148 1145.5669,-1031.1324"/>
<polygon fill="#000000" stroke="#000000" points="1148.9931,-1031.9123 1148.7391,-1021.3205 1142.3325,-1029.7589 1148.9931,-1031.9123"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="1541.5" cy="-1003.5015" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1541.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_19&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_19&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1880.3817,-1089.1716C1810.115,-1083.4947 1698.8893,-1070.1191 1607.5,-1039.2015 1596.6349,-1035.5258 1585.4364,-1030.1555 1575.419,-1024.6911"/>
<polygon fill="#000000" stroke="#000000" points="1577.021,-1021.576 1566.595,-1019.6922 1573.5706,-1027.6666 1577.021,-1021.576"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="1648.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1648.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_19&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1881.332,-1088.277C1827.287,-1082.2304 1751.0471,-1068.825 1690.5,-1039.2015 1683.6446,-1035.8474 1676.9844,-1031.1185 1671.0632,-1026.1968"/>
<polygon fill="#000000" stroke="#000000" points="1673.2987,-1023.5012 1663.4978,-1019.477 1668.6501,-1028.7347 1673.2987,-1023.5012"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="1776.5" cy="-1003.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1776.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- section_19&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_19&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1918.171,-1076.9575C1889.9335,-1062.3164 1848.2334,-1040.6951 1817.3804,-1024.6979"/>
<polygon fill="#000000" stroke="#000000" points="1818.6692,-1021.4237 1808.1805,-1019.9278 1815.4471,-1027.638 1818.6692,-1021.4237"/>
</g>
<!-- codeblock_30 -->
<g id="node31" class="node">
<title>codeblock_30</title>
<ellipse fill="none" stroke="#000000" cx="1949.5" cy="-1003.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1949.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;76</text>
</g>
<!-- section_19&#45;&gt;codeblock_30 -->
<g id="edge30" class="edge">
<title>section_19&#45;&gt;codeblock_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1949.5,-1075.0494C1949.5,-1062.648 1949.5,-1045.9647 1949.5,-1031.8278"/>
<polygon fill="#000000" stroke="#000000" points="1953.0001,-1031.6266 1949.5,-1021.6266 1946.0001,-1031.6267 1953.0001,-1031.6266"/>
</g>
<!-- section_31 -->
<g id="node32" class="node">
<title>section_31</title>
<ellipse fill="none" stroke="#000000" cx="2232.5" cy="-1003.5015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2232.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;98</text>
</g>
<!-- section_19&#45;&gt;section_31 -->
<g id="edge31" class="edge">
<title>section_19&#45;&gt;section_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1994.0301,-1079.0872C2044.2923,-1063.156 2126.0066,-1037.2557 2179.5099,-1020.2973"/>
<polygon fill="#000000" stroke="#000000" points="2180.6828,-1023.5972 2189.1579,-1017.2392 2178.5677,-1016.9244 2180.6828,-1023.5972"/>
</g>
<!-- section_32 -->
<g id="node33" class="node">
<title>section_32</title>
<ellipse fill="none" stroke="#000000" cx="2614.5" cy="-1003.5015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2614.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;121</text>
</g>
<!-- section_19&#45;&gt;section_32 -->
<g id="edge32" class="edge">
<title>section_19&#45;&gt;section_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2012.0616,-1084.7627C2135.7446,-1068.0795 2410.9007,-1030.9644 2542.146,-1013.2611"/>
<polygon fill="#000000" stroke="#000000" points="2542.6631,-1016.7232 2552.1054,-1011.9177 2541.7273,-1009.786 2542.6631,-1016.7232"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="3084.5" cy="-1003.5015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3084.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 122&#45;161</text>
</g>
<!-- section_19&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_19&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2017.8386,-1088.6824C2149.0563,-1079.909 2445.3788,-1059.6303 2694.5,-1039.2015 2801.6683,-1030.4133 2925.2657,-1018.8587 3004.0935,-1011.3096"/>
<polygon fill="#000000" stroke="#000000" points="3004.8148,-1014.7566 3014.4349,-1010.3177 3004.1463,-1007.7886 3004.8148,-1014.7566"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="3635.5" cy="-1003.5015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3635.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 162&#45;179</text>
</g>
<!-- section_19&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_19&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2019.6257,-1090.8815C2206.4721,-1084.5296 2731.8461,-1065.5564 3168.5,-1039.2015 3303.8422,-1031.0327 3461.0066,-1018.359 3554.1426,-1010.5149"/>
<polygon fill="#000000" stroke="#000000" points="3554.6724,-1013.9827 3564.3424,-1009.6536 3554.0833,-1007.0075 3554.6724,-1013.9827"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1024.5,-823.8015 490.5,-823.8015 490.5,-737.4009 1024.5,-737.4009 1024.5,-823.8015"/>
<text text-anchor="middle" x="757.5" y="-776.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="757.5" y="-761.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="757.5" y="-745.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- raw_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>raw_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M803.4928,-985.6374C796.1867,-953.0667 780.4387,-882.8622 769.4159,-833.7224"/>
<polygon fill="#000000" stroke="#000000" points="772.8133,-832.8767 767.2093,-823.8853 765.983,-834.4089 772.8133,-832.8767"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1069.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="1069.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_24&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1140.7397,-987.1614C1129.6987,-973.2635 1114.5909,-952.3447 1105.5,-931.8015 1087.527,-891.1868 1077.7837,-840.2953 1073.1172,-809.131"/>
<polygon fill="#000000" stroke="#000000" points="1076.5467,-808.3871 1071.6732,-798.9797 1069.6165,-809.373 1076.5467,-808.3871"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1211,-416.3007 698,-416.3007 698,-299.3004 1211,-299.3004 1211,-416.3007"/>
<text text-anchor="middle" x="954.5" y="-369.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="954.5" y="-353.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="954.5" y="-338.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="954.5" y="-322.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="954.5" y="-307.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1065.4657,-762.375C1059.0925,-733.8918 1046.1184,-677.1419 1033.5,-629.401 1015.0922,-559.7563 991.8409,-480.7472 975.341,-425.9733"/>
<polygon fill="#000000" stroke="#000000" points="978.6847,-424.9387 972.4445,-416.3766 971.9833,-426.9614 978.6847,-424.9387"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="1141.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="1141.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_28&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1634.1338,-987.344C1626.6648,-980.0613 1616.9268,-972.1376 1606.5,-967.8015 1518.1656,-931.0663 1250.0272,-994.1894 1177.5,-931.8015 1142.3356,-901.553 1138.1635,-843.7544 1139.2176,-809.042"/>
<polygon fill="#000000" stroke="#000000" points="1142.7328,-808.8019 1139.7107,-798.6472 1135.7407,-808.4701 1142.7328,-808.8019"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="1672,-892.202 1187,-892.202 1187,-669.0004 1672,-669.0004 1672,-892.202"/>
<text text-anchor="middle" x="1429.5" y="-877.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1429.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1429.5" y="-846.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1429.5" y="-831.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1429.5" y="-815.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429.5" y="-800.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1429.5" y="-784.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1429.5" y="-769.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1429.5" y="-754.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1429.5" y="-738.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1429.5" y="-723.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1429.5" y="-707.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1429.5" y="-692.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1429.5" y="-677.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_29&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1750.1338,-986.5648C1719.5828,-966.9399 1666.4457,-932.8066 1612.1136,-897.9056"/>
<polygon fill="#000000" stroke="#000000" points="1613.692,-894.7596 1603.3867,-892.2997 1609.9087,-900.6492 1613.692,-894.7596"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2084.5,-932.002 1690.5,-932.002 1690.5,-629.2005 2084.5,-629.2005 2084.5,-932.002"/>
<text text-anchor="middle" x="1887.5" y="-916.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="1887.5" y="-901.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="1887.5" y="-885.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1887.5" y="-854.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="1887.5" y="-839.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="1887.5" y="-823.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="1887.5" y="-808.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1887.5" y="-792.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="1887.5" y="-777.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1887.5" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1887.5" y="-730.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="1887.5" y="-715.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="1887.5" y="-699.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1887.5" y="-668.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="1887.5" y="-653.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="1887.5" y="-637.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_30&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_30&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1944.4263,-985.2606C1941.3516,-974.2068 1937.0995,-958.9195 1932.2913,-941.6335"/>
<polygon fill="#000000" stroke="#000000" points="1935.6188,-940.535 1929.5669,-931.8387 1928.8748,-942.4109 1935.6188,-940.535"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="2172.5" cy="-780.6012" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2172.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkDeep</text>
</g>
<!-- section_31&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_31&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2227.5899,-985.2606C2217.1039,-946.305 2192.4649,-854.7709 2180.0013,-808.4686"/>
<polygon fill="#000000" stroke="#000000" points="2183.3728,-807.528 2177.3937,-798.7815 2176.6134,-809.3476 2183.3728,-807.528"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="2292.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2292.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_31&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_31&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2237.4101,-985.2606C2247.9,-946.2904 2272.5536,-854.7022 2285.0127,-808.4165"/>
<polygon fill="#000000" stroke="#000000" points="2288.4702,-809.0372 2287.6898,-798.4712 2281.7108,-807.2177 2288.4702,-809.0372"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="2420.5" cy="-780.6012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2420.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 82&#45;97</text>
</g>
<!-- section_31&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_31&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2262.0732,-987.2245C2283.7247,-974.2613 2312.8154,-954.5555 2333.5,-931.8015 2367.8389,-894.027 2394.6762,-840.4442 2409.003,-808.2483"/>
<polygon fill="#000000" stroke="#000000" points="2412.2537,-809.5497 2413.042,-798.9842 2405.8371,-806.752 2412.2537,-809.5497"/>
</g>
<!-- header_45 -->
<g id="node46" class="node">
<title>header_45</title>
<ellipse fill="none" stroke="#000000" cx="2564.5" cy="-780.6012" rx="48.8618" ry="18"/>
<text text-anchor="middle" x="2564.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walk</text>
</g>
<!-- section_32&#45;&gt;header_45 -->
<g id="edge45" class="edge">
<title>section_32&#45;&gt;header_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2610.4083,-985.2606C2601.6883,-946.3868 2581.2236,-855.1553 2570.8167,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="2574.1821,-807.7729 2568.5781,-798.7815 2567.3518,-809.3051 2574.1821,-807.7729"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="2663.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2663.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_32&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_32&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2618.5099,-985.2606C2627.0767,-946.2904 2647.2104,-854.7022 2657.3854,-808.4165"/>
<polygon fill="#000000" stroke="#000000" points="2660.8429,-808.9894 2659.5717,-798.4712 2654.0062,-807.4865 2660.8429,-808.9894"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="2800.5" cy="-780.6012" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2800.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 103&#45;119</text>
</g>
<!-- section_32&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_32&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2640.0673,-986.6268C2659.2019,-973.213 2685.2754,-953.2017 2704.5,-931.8015 2739.5266,-892.811 2770.0479,-839.6136 2786.8111,-807.8227"/>
<polygon fill="#000000" stroke="#000000" points="2790.0551,-809.1704 2791.5615,-798.6832 2783.844,-805.942 2790.0551,-809.1704"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="3007.5" cy="-780.6012" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3007.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.select(node, pred)</text>
</g>
<!-- section_33&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_33&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3078.1988,-985.2606C3064.7417,-946.305 3033.1216,-854.7709 3017.1267,-808.4686"/>
<polygon fill="#000000" stroke="#000000" points="3020.3537,-807.0906 3013.7803,-798.7815 3013.7373,-809.3763 3020.3537,-807.0906"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="3160.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3160.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_33&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3094.3925,-985.6496C3102.0024,-971.3913 3112.386,-950.7326 3119.5,-931.8015 3135.2472,-889.8964 3147.6938,-839.3738 3154.5744,-808.6375"/>
<polygon fill="#000000" stroke="#000000" points="3158.0439,-809.1556 3156.7723,-798.6374 3151.2071,-807.6529 3158.0439,-809.1556"/>
</g>
<!-- codeblock_53 -->
<g id="node54" class="node">
<title>codeblock_53</title>
<ellipse fill="none" stroke="#000000" cx="3353.5" cy="-780.6012" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3353.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 128&#45;159</text>
</g>
<!-- section_33&#45;&gt;codeblock_53 -->
<g id="edge53" class="edge">
<title>section_33&#45;&gt;codeblock_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3115.5963,-987.0711C3139.947,-973.5967 3174.1569,-953.2989 3201.5,-931.8015 3251.6732,-892.3547 3302.8264,-837.9176 3331.1376,-806.2682"/>
<polygon fill="#000000" stroke="#000000" points="3333.8041,-808.5365 3337.8287,-798.7358 3328.5707,-803.8876 3333.8041,-808.5365"/>
</g>
<!-- header_57 -->
<g id="node58" class="node">
<title>header_57</title>
<ellipse fill="none" stroke="#000000" cx="3568.5" cy="-780.6012" rx="82.7165" ry="18"/>
<text text-anchor="middle" x="3568.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.tokens(node)</text>
</g>
<!-- section_34&#45;&gt;header_57 -->
<g id="edge57" class="edge">
<title>section_34&#45;&gt;header_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3630.0171,-985.2606C3618.3077,-946.305 3590.7941,-854.7709 3576.8765,-808.4686"/>
<polygon fill="#000000" stroke="#000000" points="3580.1952,-807.3507 3573.9647,-798.7815 3573.4915,-809.3658 3580.1952,-807.3507"/>
</g>
<!-- prose_58 -->
<g id="node59" class="node">
<title>prose_58</title>
<ellipse fill="none" stroke="#000000" cx="3701.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3701.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_58 -->
<g id="edge58" class="edge">
<title>section_34&#45;&gt;prose_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3642.2287,-985.3479C3647.4783,-970.9233 3654.8094,-950.188 3660.5,-931.8015 3673.6636,-889.269 3686.757,-839.3061 3694.4875,-808.8069"/>
<polygon fill="#000000" stroke="#000000" points="3697.9406,-809.4268 3696.9895,-798.8747 3691.1526,-807.7168 3697.9406,-809.4268"/>
</g>
<!-- codeblock_59 -->
<g id="node60" class="node">
<title>codeblock_59</title>
<ellipse fill="none" stroke="#000000" cx="3839.5" cy="-780.6012" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3839.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 166&#45;178</text>
</g>
<!-- section_34&#45;&gt;codeblock_59 -->
<g id="edge59" class="edge">
<title>section_34&#45;&gt;codeblock_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3667.0342,-986.9998C3689.782,-974.0578 3720.2724,-954.4775 3742.5,-931.8015 3779.4977,-894.0574 3810.0194,-840.0255 3826.4258,-807.8108"/>
<polygon fill="#000000" stroke="#000000" points="3829.7118,-809.0651 3831.0558,-798.5558 3823.4515,-805.9332 3829.7118,-809.0651"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="1283.5,-375.8005 1229.5,-375.8005 1229.5,-339.8005 1283.5,-339.8005 1283.5,-375.8005"/>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1142.2383,-762.4783C1144.1972,-732.6476 1151.3539,-672.2426 1177.5,-629.401 1190.3076,-608.415 1207.52,-614.8701 1219.5,-593.401 1256.9494,-526.2884 1259.5437,-432.6361 1258.1396,-386.2139"/>
<polygon fill="#000000" stroke="#000000" points="1261.6283,-385.8536 1257.7407,-375.9978 1254.6336,-386.1267 1261.6283,-385.8536"/>
</g>
<!-- raw_42 -->
<g id="node43" class="node">
<title>raw_42</title>
<ellipse fill="none" stroke="#000000" cx="2151.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="2151.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_42 -->
<g id="edge42" class="edge">
<title>prose_40&#45;&gt;raw_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2291.9802,-762.3155C2290.2214,-731.7113 2282.7476,-669.5302 2251.5,-629.401 2231.4493,-603.6511 2206.0624,-620.2435 2187.5,-593.401 2143.5048,-529.7807 2144.5663,-433.445 2148.3408,-386.0978"/>
<polygon fill="#000000" stroke="#000000" points="2151.8423,-386.2372 2149.2522,-375.9639 2144.8705,-385.6102 2151.8423,-386.2372"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="2604.5,-470.101 2196.5,-470.101 2196.5,-245.5001 2604.5,-245.5001 2604.5,-470.101"/>
<text text-anchor="middle" x="2400.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2400.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2400.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2400.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2400.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2400.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2400.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2400.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2400.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2400.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2400.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2400.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_41&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2419.6406,-762.434C2417.3709,-714.4511 2411.0637,-581.1183 2406.3048,-480.5151"/>
<polygon fill="#000000" stroke="#000000" points="2409.7889,-480.094 2405.8202,-470.2705 2402.7967,-480.4248 2409.7889,-480.094"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2236.5,-71.0015 2066.5,-71.0015 2066.5,-15.1986 2236.5,-15.1986 2236.5,-71.0015"/>
<text text-anchor="middle" x="2151.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Depth&#45;first iterator. </text>
</g>
<!-- raw_42&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>raw_42&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2151.5,-339.5207C2151.5,-289.4637 2151.5,-149.3734 2151.5,-81.2549"/>
<polygon fill="#000000" stroke="#000000" points="2155.0001,-80.965 2151.5,-70.965 2148.0001,-80.9651 2155.0001,-80.965"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="2649.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="2649.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_46&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_46&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2662.8984,-762.434C2660.704,-696.1627 2653.1186,-467.0819 2650.4432,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="2653.9284,-385.7787 2650.0993,-375.9001 2646.9323,-386.0104 2653.9284,-385.7787"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3088.5,-470.101 2694.5,-470.101 2694.5,-245.5001 3088.5,-245.5001 3088.5,-470.101"/>
<text text-anchor="middle" x="2891.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="2891.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2891.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2891.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2891.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2891.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2891.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2891.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2891.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2891.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2891.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2891.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_47&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2804.4102,-762.434C2814.748,-714.4026 2843.493,-580.8488 2865.1536,-480.2104"/>
<polygon fill="#000000" stroke="#000000" points="2868.6104,-480.7831 2867.2929,-470.2705 2861.7671,-479.3102 2868.6104,-480.7831"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2818.5,-71.0015 2480.5,-71.0015 2480.5,-15.1986 2818.5,-15.1986 2818.5,-71.0015"/>
<text text-anchor="middle" x="2649.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Breadth&#45;first iterator. &#160;This is the default. </text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2649.5,-339.5207C2649.5,-289.4637 2649.5,-149.3734 2649.5,-81.2549"/>
<polygon fill="#000000" stroke="#000000" points="2653.0001,-80.965 2649.5,-70.965 2646.0001,-80.9651 2653.0001,-80.965"/>
</g>
<!-- raw_54 -->
<g id="node55" class="node">
<title>raw_54</title>
<ellipse fill="none" stroke="#000000" cx="3133.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="3133.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_54 -->
<g id="edge54" class="edge">
<title>prose_52&#45;&gt;raw_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3159.3398,-762.434C3155.1078,-696.1627 3140.4787,-467.0819 3135.319,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="3138.7861,-385.6566 3134.6558,-375.9001 3131.8003,-386.1028 3138.7861,-385.6566"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3670.5,-593.5014 3178.5,-593.5014 3178.5,-122.0996 3670.5,-122.0996 3670.5,-593.5014"/>
<text text-anchor="middle" x="3424.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="3424.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="3424.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="3424.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; </text>
<text text-anchor="middle" x="3424.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and node.id and node.id == pred then</text>
<text text-anchor="middle" x="3424.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="3424.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3424.5" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="3424.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="3424.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="3424.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3424.5" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="3424.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3424.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; depth first</text>
<text text-anchor="middle" x="3424.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="3424.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3424.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="3424.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3424.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3424.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3424.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3424.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_53&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>codeblock_53&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3356.5508,-762.434C3361.5346,-732.7558 3372.0015,-670.4259 3383.2596,-603.3845"/>
<polygon fill="#000000" stroke="#000000" points="3386.7213,-603.9038 3384.9258,-593.4622 3379.818,-602.7445 3386.7213,-603.9038"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3407.5,-86.3004 2859.5,-86.3004 2859.5,.1003 3407.5,.1003 3407.5,-86.3004"/>
<text text-anchor="middle" x="3133.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Takes the Node and walks it, yielding the Nodes which match the predicate.</text>
<text text-anchor="middle" x="3133.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">=pred= is either a string, which matches to =id=, or a function, which takes</text>
<text text-anchor="middle" x="3133.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node and returns true or false on some premise. </text>
</g>
<!-- raw_54&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>raw_54&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3133.5,-339.5207C3133.5,-292.9462 3133.5,-168.4298 3133.5,-96.4623"/>
<polygon fill="#000000" stroke="#000000" points="3137.0001,-96.241 3133.5,-86.241 3130.0001,-96.241 3137.0001,-96.241"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="3715.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="3715.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_58&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_58&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3702.1016,-762.434C3704.296,-696.1627 3711.8814,-467.0819 3714.5568,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="3718.0677,-386.0104 3714.9007,-375.9001 3711.0716,-385.7787 3718.0677,-386.0104"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4154.5,-446.8008 3760.5,-446.8008 3760.5,-268.8002 4154.5,-268.8002 4154.5,-446.8008"/>
<text text-anchor="middle" x="3957.5" y="-431.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.tokens(node)</text>
<text text-anchor="middle" x="3957.5" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3957.5" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in N.walk(ast) do</text>
<text text-anchor="middle" x="3957.5" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not node[1] then</text>
<text text-anchor="middle" x="3957.5" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(node:toValue())</text>
<text text-anchor="middle" x="3957.5" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3957.5" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3957.5" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3957.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3957.5" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end &#160;</text>
</g>
<!-- codeblock_59&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_59&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3844.5703,-762.434C3859.0573,-710.5261 3901.4211,-558.7342 3929.9401,-456.5491"/>
<polygon fill="#000000" stroke="#000000" points="3933.3383,-457.3929 3932.6554,-446.82 3926.596,-455.5111 3933.3383,-457.3929"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="3912.5,-71.0015 3518.5,-71.0015 3518.5,-15.1986 3912.5,-15.1986 3912.5,-71.0015"/>
<text text-anchor="middle" x="3715.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Iterator returning all &#39;captured&#39; values as strings.</text>
</g>
<!-- raw_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3715.5,-339.5207C3715.5,-289.4637 3715.5,-149.3734 3715.5,-81.2549"/>
<polygon fill="#000000" stroke="#000000" points="3719.0001,-80.965 3715.5,-70.965 3712.0001,-80.9651 3719.0001,-80.965"/>
</g>
<!-- raw_71 -->
<g id="node72" class="node">
<title>raw_71</title>
<ellipse fill="none" stroke="#000000" cx="4475.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="4475.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_64&#45;&gt;raw_71 -->
<g id="edge71" class="edge">
<title>prose_64&#45;&gt;raw_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5256.2406,-1081.0328C5250.8437,-1078.7579 5245.0686,-1076.645 5239.5,-1075.2015 5099.3444,-1038.8712 4646.4035,-1012.5446 4512.8769,-1005.4255"/>
<polygon fill="#000000" stroke="#000000" points="4512.9149,-1001.9227 4502.744,-1004.8895 4512.5451,-1008.9129 4512.9149,-1001.9227"/>
</g>
<!-- raw_73 -->
<g id="node74" class="node">
<title>raw_73</title>
<ellipse fill="none" stroke="#000000" cx="5041.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="5041.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_65&#45;&gt;raw_73 -->
<g id="edge73" class="edge">
<title>prose_65&#45;&gt;raw_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5337.6055,-1081.5009C5332.3492,-1079.2492 5326.7912,-1077.0268 5321.5,-1075.2015 5235.6699,-1045.5927 5131.2936,-1022.0205 5077.4637,-1010.7428"/>
<polygon fill="#000000" stroke="#000000" points="5077.8947,-1007.2577 5067.3922,-1008.653 5076.4725,-1014.1117 5077.8947,-1007.2577"/>
</g>
<!-- raw_75 -->
<g id="node76" class="node">
<title>raw_75</title>
<ellipse fill="none" stroke="#000000" cx="5386.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="5386.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_66&#45;&gt;raw_75 -->
<g id="edge75" class="edge">
<title>prose_66&#45;&gt;raw_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5433.317,-1075.9064C5424.7027,-1062.584 5412.664,-1043.9655 5402.9517,-1028.9449"/>
<polygon fill="#000000" stroke="#000000" points="5405.6254,-1026.634 5397.2565,-1020.1369 5399.7472,-1030.4349 5405.6254,-1026.634"/>
</g>
<!-- raw_77 -->
<g id="node78" class="node">
<title>raw_77</title>
<ellipse fill="none" stroke="#000000" cx="5673.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="5673.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_67&#45;&gt;raw_77 -->
<g id="edge77" class="edge">
<title>prose_67&#45;&gt;raw_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5575.5585,-1078.59C5595.1087,-1063.6015 5625.6595,-1040.1792 5647.4387,-1023.4818"/>
<polygon fill="#000000" stroke="#000000" points="5649.7953,-1026.0854 5655.6019,-1017.2234 5645.5363,-1020.5301 5649.7953,-1026.0854"/>
</g>
<!-- raw_79 -->
<g id="node80" class="node">
<title>raw_79</title>
<ellipse fill="none" stroke="#000000" cx="6240.5" cy="-1003.5015" rx="27" ry="18"/>
<text text-anchor="middle" x="6240.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_68&#45;&gt;raw_79 -->
<g id="edge79" class="edge">
<title>prose_68&#45;&gt;raw_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5869.6402,-1086.4594C5942.3301,-1070.1993 6127.0198,-1028.886 6204.9482,-1011.4541"/>
<polygon fill="#000000" stroke="#000000" points="6205.7845,-1014.8536 6214.7793,-1009.255 6204.2564,-1008.0224 6205.7845,-1014.8536"/>
</g>
<!-- header_81 -->
<g id="node82" class="node">
<title>header_81</title>
<ellipse fill="none" stroke="#000000" cx="6640.5" cy="-1003.5015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="6640.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_69&#45;&gt;header_81 -->
<g id="edge81" class="edge">
<title>section_69&#45;&gt;header_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6807.9412,-1079.9264C6774.9586,-1070.5429 6731.7227,-1056.5613 6695.5,-1039.2015 6687.1463,-1035.198 6678.546,-1030.1324 6670.7001,-1025.0846"/>
<polygon fill="#000000" stroke="#000000" points="6672.4824,-1022.0667 6662.2156,-1019.4505 6668.61,-1027.8981 6672.4824,-1022.0667"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="6736.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6736.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_69&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_69&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6831.911,-1076.3351C6815.6981,-1066.106 6795.0133,-1052.4981 6777.5,-1039.2015 6771.9443,-1034.9835 6766.1793,-1030.2255 6760.7888,-1025.5908"/>
<polygon fill="#000000" stroke="#000000" points="6763.0553,-1022.9232 6753.2272,-1018.966 6758.4424,-1028.1884 6763.0553,-1022.9232"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="6818.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6818.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_69&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_69&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6851.203,-1075.0494C6845.3474,-1062.2384 6837.4033,-1044.8582 6830.8111,-1030.4358"/>
<polygon fill="#000000" stroke="#000000" points="6833.846,-1028.6561 6826.5056,-1021.0162 6827.4795,-1031.5661 6833.846,-1028.6561"/>
</g>
<!-- prose_84 -->
<g id="node85" class="node">
<title>prose_84</title>
<ellipse fill="none" stroke="#000000" cx="6900.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6900.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_69&#45;&gt;prose_84 -->
<g id="edge84" class="edge">
<title>section_69&#45;&gt;prose_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6867.797,-1075.0494C6873.6526,-1062.2384 6881.5967,-1044.8582 6888.1889,-1030.4358"/>
<polygon fill="#000000" stroke="#000000" points="6891.5205,-1031.5661 6892.4944,-1021.0162 6885.154,-1028.6561 6891.5205,-1031.5661"/>
</g>
<!-- prose_85 -->
<g id="node86" class="node">
<title>prose_85</title>
<ellipse fill="none" stroke="#000000" cx="6982.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6982.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_69&#45;&gt;prose_85 -->
<g id="edge85" class="edge">
<title>section_69&#45;&gt;prose_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6887.089,-1076.3351C6903.3019,-1066.106 6923.9867,-1052.4981 6941.5,-1039.2015 6947.0557,-1034.9835 6952.8207,-1030.2255 6958.2112,-1025.5908"/>
<polygon fill="#000000" stroke="#000000" points="6960.5576,-1028.1884 6965.7728,-1018.966 6955.9447,-1022.9232 6960.5576,-1028.1884"/>
</g>
<!-- prose_86 -->
<g id="node87" class="node">
<title>prose_86</title>
<ellipse fill="none" stroke="#000000" cx="7170.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7170.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_69&#45;&gt;prose_86 -->
<g id="edge86" class="edge">
<title>section_69&#45;&gt;prose_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6907.7525,-1079.2843C6969.5573,-1061.4583 7075.433,-1030.9211 7132.0792,-1014.583"/>
<polygon fill="#000000" stroke="#000000" points="7133.0915,-1017.9338 7141.7299,-1011.7995 7131.1516,-1011.2079 7133.0915,-1017.9338"/>
</g>
<!-- section_87 -->
<g id="node88" class="node">
<title>section_87</title>
<ellipse fill="none" stroke="#000000" cx="7840.5" cy="-1003.5015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7840.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 227&#45;239</text>
</g>
<!-- section_69&#45;&gt;section_87 -->
<g id="edge87" class="edge">
<title>section_69&#45;&gt;section_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6930.0511,-1086.7505C7107.5673,-1070.5189 7571.9429,-1028.0576 7759.8433,-1010.8765"/>
<polygon fill="#000000" stroke="#000000" points="7760.2907,-1014.3503 7769.9304,-1009.9542 7759.6532,-1007.3794 7760.2907,-1014.3503"/>
</g>
<!-- header_111 -->
<g id="node112" class="node">
<title>header_111</title>
<ellipse fill="none" stroke="#000000" cx="9703.5" cy="-1003.5015" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="9703.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_70&#45;&gt;header_111 -->
<g id="edge111" class="edge">
<title>section_70&#45;&gt;header_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9999.6409,-1085.269C9940.7333,-1077.2471 9853.6489,-1062.6377 9780.5,-1039.2015 9767.9882,-1035.1928 9754.8511,-1029.6458 9743.0421,-1024.1183"/>
<polygon fill="#000000" stroke="#000000" points="9744.4226,-1020.8985 9733.8936,-1019.7193 9741.3891,-1027.2071 9744.4226,-1020.8985"/>
</g>
<!-- prose_112 -->
<g id="node113" class="node">
<title>prose_112</title>
<ellipse fill="none" stroke="#000000" cx="9821.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9821.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_112 -->
<g id="edge112" class="edge">
<title>section_70&#45;&gt;prose_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10002.3635,-1083.9105C9960.6128,-1076.0961 9906.2471,-1062.3666 9862.5,-1039.2015 9856.1113,-1035.8185 9849.8753,-1031.2641 9844.2725,-1026.5421"/>
<polygon fill="#000000" stroke="#000000" points="9846.3497,-1023.7031 9836.5729,-1019.6207 9841.67,-1028.9089 9846.3497,-1023.7031"/>
</g>
<!-- prose_113 -->
<g id="node114" class="node">
<title>prose_113</title>
<ellipse fill="none" stroke="#000000" cx="9903.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9903.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_113 -->
<g id="edge113" class="edge">
<title>section_70&#45;&gt;prose_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10024.9086,-1078.1896C10000.4614,-1068.6857 9969.7114,-1055.1857 9944.5,-1039.2015 9938.5017,-1035.3985 9932.4871,-1030.7467 9926.9842,-1026.0736"/>
<polygon fill="#000000" stroke="#000000" points="9929.155,-1023.3207 9919.3493,-1019.3081 9924.5125,-1028.5598 9929.155,-1023.3207"/>
</g>
<!-- prose_114 -->
<g id="node115" class="node">
<title>prose_114</title>
<ellipse fill="none" stroke="#000000" cx="9985.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9985.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_114 -->
<g id="edge114" class="edge">
<title>section_70&#45;&gt;prose_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10051.2994,-1075.4797C10038.6601,-1061.6535 10020.9843,-1042.3178 10007.1352,-1027.1683"/>
<polygon fill="#000000" stroke="#000000" points="10009.6192,-1024.6982 10000.2887,-1019.6789 10004.4527,-1029.4212 10009.6192,-1024.6982"/>
</g>
<!-- prose_115 -->
<g id="node116" class="node">
<title>prose_115</title>
<ellipse fill="none" stroke="#000000" cx="10067.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10067.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_115 -->
<g id="edge115" class="edge">
<title>section_70&#45;&gt;prose_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10067.5,-1075.0494C10067.5,-1062.648 10067.5,-1045.9647 10067.5,-1031.8278"/>
<polygon fill="#000000" stroke="#000000" points="10071.0001,-1031.6266 10067.5,-1021.6266 10064.0001,-1031.6267 10071.0001,-1031.6266"/>
</g>
<!-- prose_116 -->
<g id="node117" class="node">
<title>prose_116</title>
<ellipse fill="none" stroke="#000000" cx="10149.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10149.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_116 -->
<g id="edge116" class="edge">
<title>section_70&#45;&gt;prose_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10083.7006,-1075.4797C10096.3399,-1061.6535 10114.0157,-1042.3178 10127.8648,-1027.1683"/>
<polygon fill="#000000" stroke="#000000" points="10130.5473,-1029.4212 10134.7113,-1019.6789 10125.3808,-1024.6982 10130.5473,-1029.4212"/>
</g>
<!-- prose_117 -->
<g id="node118" class="node">
<title>prose_117</title>
<ellipse fill="none" stroke="#000000" cx="10231.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10231.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_117 -->
<g id="edge117" class="edge">
<title>section_70&#45;&gt;prose_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10110.0914,-1078.1896C10134.5386,-1068.6857 10165.2886,-1055.1857 10190.5,-1039.2015 10196.4983,-1035.3985 10202.5129,-1030.7467 10208.0158,-1026.0736"/>
<polygon fill="#000000" stroke="#000000" points="10210.4875,-1028.5598 10215.6507,-1019.3081 10205.845,-1023.3207 10210.4875,-1028.5598"/>
</g>
<!-- prose_118 -->
<g id="node119" class="node">
<title>prose_118</title>
<ellipse fill="none" stroke="#000000" cx="10313.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10313.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_118 -->
<g id="edge118" class="edge">
<title>section_70&#45;&gt;prose_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10132.6365,-1083.9105C10174.3872,-1076.0961 10228.7529,-1062.3666 10272.5,-1039.2015 10278.8887,-1035.8185 10285.1247,-1031.2641 10290.7275,-1026.5421"/>
<polygon fill="#000000" stroke="#000000" points="10293.33,-1028.9089 10298.4271,-1019.6207 10288.6503,-1023.7031 10293.33,-1028.9089"/>
</g>
<!-- prose_119 -->
<g id="node120" class="node">
<title>prose_119</title>
<ellipse fill="none" stroke="#000000" cx="10395.5" cy="-1003.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10395.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_70&#45;&gt;prose_119 -->
<g id="edge119" class="edge">
<title>section_70&#45;&gt;prose_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10134.2811,-1084.7644C10206.5373,-1074.9127 10316.5156,-1057.606 10354.5,-1039.2015 10361.1198,-1035.994 10367.509,-1031.4306 10373.1945,-1026.6342"/>
<polygon fill="#000000" stroke="#000000" points="10375.9196,-1028.8871 10380.9657,-1019.571 10371.2115,-1023.707 10375.9196,-1028.8871"/>
</g>
<!-- codeblock_120 -->
<g id="node121" class="node">
<title>codeblock_120</title>
<ellipse fill="none" stroke="#000000" cx="10533.5" cy="-1003.5015" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10533.5" y="-999.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 269&#45;271</text>
</g>
<!-- section_70&#45;&gt;codeblock_120 -->
<g id="edge120" class="edge">
<title>section_70&#45;&gt;codeblock_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10138.7541,-1087.1945C10213.7096,-1079.8521 10334.6908,-1065.0874 10436.5,-1039.2015 10452.7744,-1035.0636 10470.112,-1029.1806 10485.5609,-1023.3812"/>
<polygon fill="#000000" stroke="#000000" points="10486.825,-1026.6451 10494.9096,-1019.7975 10484.3194,-1020.1089 10486.825,-1026.6451"/>
</g>
<!-- leaf_72 -->
<g id="node73" class="node">
<title>leaf_72</title>
<polygon fill="none" stroke="#c0c0c0" points="4506.5,-815.9016 3944.5,-815.9016 3944.5,-745.3009 4506.5,-745.3009 4506.5,-815.9016"/>
<text text-anchor="middle" x="4225.5" y="-768.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="4225.5" y="-753.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- raw_71&#45;&gt;leaf_72 -->
<g id="edge72" class="edge">
<title>raw_71&#45;&gt;leaf_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4459.0968,-988.8764C4421.8507,-955.6677 4329.7305,-873.5333 4272.9352,-822.8945"/>
<polygon fill="#000000" stroke="#000000" points="4274.9583,-820.0091 4265.165,-815.9666 4270.2998,-825.234 4274.9583,-820.0091"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="5072.5,-815.8016 4524.5,-815.8016 4524.5,-745.4008 5072.5,-745.4008 5072.5,-815.8016"/>
<text text-anchor="middle" x="4798.5" y="-784.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="4798.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="4798.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- raw_73&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>raw_73&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5025.5561,-988.8764C4989.3529,-955.6677 4899.8121,-873.5333 4844.6071,-822.8945"/>
<polygon fill="#000000" stroke="#000000" points="4846.7896,-820.1471 4837.0544,-815.9666 4842.0578,-825.3056 4846.7896,-820.1471"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="5624.5,-815.8016 5090.5,-815.8016 5090.5,-745.4008 5624.5,-745.4008 5624.5,-815.8016"/>
<text text-anchor="middle" x="5357.5" y="-784.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="5357.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="5357.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- raw_75&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>raw_75&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5384.1268,-985.2606C5379.6308,-950.7036 5369.7518,-874.7715 5363.373,-825.7423"/>
<polygon fill="#000000" stroke="#000000" points="5366.8291,-825.1778 5362.0681,-815.713 5359.8876,-826.081 5366.8291,-825.1778"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="6170,-831.1014 5643,-831.1014 5643,-730.1011 6170,-730.1011 6170,-831.1014"/>
<text text-anchor="middle" x="5906.5" y="-799.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="5906.5" y="-784.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="5906.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="5906.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="5906.5" y="-738.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- raw_77&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>raw_77&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5689.1496,-988.5303C5720.7236,-958.3249 5793.526,-888.6782 5846.1877,-838.2992"/>
<polygon fill="#000000" stroke="#000000" points="5848.6719,-840.7663 5853.4784,-831.3245 5843.833,-835.7082 5848.6719,-840.7663"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="6694.5,-823.8015 6188.5,-823.8015 6188.5,-737.4009 6694.5,-737.4009 6694.5,-823.8015"/>
<text text-anchor="middle" x="6441.5" y="-792.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="6441.5" y="-777.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="6441.5" y="-761.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- raw_79&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>raw_79&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6254.6339,-987.8276C6283.4475,-955.8745 6350.084,-881.9776 6395.475,-831.6409"/>
<polygon fill="#000000" stroke="#000000" points="6398.1919,-833.8544 6402.2895,-824.084 6392.9934,-829.1666 6398.1919,-833.8544"/>
</g>
<!-- raw_88 -->
<g id="node89" class="node">
<title>raw_88</title>
<ellipse fill="none" stroke="#000000" cx="6739.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="6739.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_82&#45;&gt;raw_88 -->
<g id="edge88" class="edge">
<title>prose_82&#45;&gt;raw_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6736.7455,-985.2606C6737.2676,-946.4687 6738.4914,-855.5392 6739.117,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="6742.6203,-808.8277 6739.2553,-798.7815 6735.621,-808.7335 6742.6203,-808.8277"/>
</g>
<!-- raw_90 -->
<g id="node91" class="node">
<title>raw_90</title>
<ellipse fill="none" stroke="#000000" cx="6816.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="6816.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_83&#45;&gt;raw_90 -->
<g id="edge90" class="edge">
<title>prose_83&#45;&gt;raw_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6818.3363,-985.2606C6817.9883,-946.4687 6817.1724,-855.5392 6816.7553,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="6820.2528,-808.7497 6816.6631,-798.7815 6813.2531,-808.8125 6820.2528,-808.7497"/>
</g>
<!-- raw_92 -->
<g id="node93" class="node">
<title>raw_92</title>
<ellipse fill="none" stroke="#000000" cx="6894.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="6894.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_84&#45;&gt;raw_92 -->
<g id="edge92" class="edge">
<title>prose_84&#45;&gt;raw_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6900.009,-985.2606C6898.9648,-946.4687 6896.5172,-855.5392 6895.2659,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="6898.7573,-808.6837 6894.9894,-798.7815 6891.7598,-808.8721 6898.7573,-808.6837"/>
</g>
<!-- raw_94 -->
<g id="node95" class="node">
<title>raw_94</title>
<ellipse fill="none" stroke="#000000" cx="6982.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="6982.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_85&#45;&gt;raw_94 -->
<g id="edge94" class="edge">
<title>prose_85&#45;&gt;raw_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6982.5,-985.2606C6982.5,-946.4687 6982.5,-855.5392 6982.5,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="6986.0001,-808.7815 6982.5,-798.7815 6979.0001,-808.7815 6986.0001,-808.7815"/>
</g>
<!-- raw_96 -->
<g id="node97" class="node">
<title>raw_96</title>
<ellipse fill="none" stroke="#000000" cx="7274.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="7274.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_86&#45;&gt;raw_96 -->
<g id="edge96" class="edge">
<title>prose_86&#45;&gt;raw_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7178.6607,-986.0109C7196.8109,-947.11 7240.6132,-853.2298 7262.1392,-807.0938"/>
<polygon fill="#000000" stroke="#000000" points="7265.3207,-808.5526 7266.3772,-798.0106 7258.9772,-805.5928 7265.3207,-808.5526"/>
</g>
<!-- header_98 -->
<g id="node99" class="node">
<title>header_98</title>
<ellipse fill="none" stroke="#000000" cx="7640.5" cy="-780.6012" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="7640.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_87&#45;&gt;header_98 -->
<g id="edge98" class="edge">
<title>section_87&#45;&gt;header_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7818.5993,-986.2749C7801.4741,-972.3614 7777.4709,-951.8615 7758.5,-931.8015 7719.8109,-890.8912 7680.7473,-838.0545 7658.6851,-806.8978"/>
<polygon fill="#000000" stroke="#000000" points="7661.5438,-804.8784 7652.9277,-798.7129 7655.8184,-808.9058 7661.5438,-804.8784"/>
</g>
<!-- prose_99 -->
<g id="node100" class="node">
<title>prose_99</title>
<ellipse fill="none" stroke="#000000" cx="7799.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7799.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_99 -->
<g id="edge99" class="edge">
<title>section_87&#45;&gt;prose_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7837.1448,-985.2606C7829.9944,-946.3868 7813.2134,-855.1553 7804.6797,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="7808.0954,-807.9833 7802.8441,-798.7815 7801.2109,-809.2497 7808.0954,-807.9833"/>
</g>
<!-- prose_100 -->
<g id="node101" class="node">
<title>prose_100</title>
<ellipse fill="none" stroke="#000000" cx="7881.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7881.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_100 -->
<g id="edge100" class="edge">
<title>section_87&#45;&gt;prose_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7843.8552,-985.2606C7851.0056,-946.3868 7867.7866,-855.1553 7876.3203,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="7879.7891,-809.2497 7878.1559,-798.7815 7872.9046,-807.9833 7879.7891,-809.2497"/>
</g>
<!-- prose_101 -->
<g id="node102" class="node">
<title>prose_101</title>
<ellipse fill="none" stroke="#000000" cx="7963.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7963.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_101 -->
<g id="edge101" class="edge">
<title>section_87&#45;&gt;prose_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7867.1088,-986.5075C7885.2607,-973.5916 7908.4693,-954.2529 7922.5,-931.8015 7946.5869,-893.2585 7956.6979,-840.6071 7960.8154,-808.6899"/>
<polygon fill="#000000" stroke="#000000" points="7964.2968,-809.0525 7961.9935,-798.711 7957.3451,-808.2316 7964.2968,-809.0525"/>
</g>
<!-- prose_102 -->
<g id="node103" class="node">
<title>prose_102</title>
<ellipse fill="none" stroke="#000000" cx="8045.5" cy="-780.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8045.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_102 -->
<g id="edge102" class="edge">
<title>section_87&#45;&gt;prose_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7897.8124,-991.767C7933.3186,-981.6349 7977.2021,-963.4504 8004.5,-931.8015 8034.5045,-897.0145 8042.7639,-842.3108 8044.911,-809.1156"/>
<polygon fill="#000000" stroke="#000000" points="8048.4257,-808.9042 8045.4273,-798.7426 8041.4344,-808.5561 8048.4257,-808.9042"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="5666,-408.4014 5153,-408.4014 5153,-307.1996 5666,-307.1996 5666,-408.4014"/>
<text text-anchor="middle" x="5409.5" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="5409.5" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5409.5" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="5409.5" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- raw_88&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>raw_88&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6741.4289,-762.6225C6743.7911,-730.1464 6743.3798,-662.0488 6703.5,-629.401 6614.9772,-556.9314 5780.706,-635.9262 5674.5,-593.401 5582.8019,-556.6848 5501.9483,-473.4404 5454.3679,-416.4163"/>
<polygon fill="#000000" stroke="#000000" points="5456.9418,-414.0365 5447.8772,-408.5516 5451.543,-418.4921 5456.9418,-414.0365"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6169,-385.101 5684,-385.101 5684,-330.5001 6169,-330.5001 6169,-385.101"/>
<text text-anchor="middle" x="5926.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="5926.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- raw_90&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>raw_90&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6817.7136,-762.3947C6818.7675,-729.8629 6815.6861,-662.1054 6775.5,-629.401 6672.4154,-545.5081 6300.6032,-645.8916 6178.5,-593.401 6077.6972,-550.0671 5992.1149,-448.1001 5951.5914,-393.6102"/>
<polygon fill="#000000" stroke="#000000" points="5954.2198,-391.2763 5945.4791,-385.2888 5948.5782,-395.4202 5954.2198,-391.2763"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="6707.5,-393.0009 6187.5,-393.0009 6187.5,-322.6002 6707.5,-322.6002 6707.5,-393.0009"/>
<text text-anchor="middle" x="6447.5" y="-361.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="6447.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="6447.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- raw_92&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>raw_92&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6894.9025,-762.3883C6894.5664,-730.7559 6889.1307,-665.5883 6852.5,-629.401 6808.0189,-585.4582 6771.6972,-622.7743 6716.5,-593.401 6621.954,-543.0881 6532.675,-453.5934 6484.5001,-400.5737"/>
<polygon fill="#000000" stroke="#000000" points="6486.9903,-398.1087 6477.6949,-393.0248 6481.791,-402.7958 6486.9903,-398.1087"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="7239,-400.4016 6726,-400.4016 6726,-315.1995 7239,-315.1995 7239,-400.4016"/>
<text text-anchor="middle" x="6982.5" y="-369.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="6982.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="6982.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="6982.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- raw_94&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>raw_94&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6982.5,-762.434C6982.5,-702.0277 6982.5,-506.3538 6982.5,-411.0045"/>
<polygon fill="#000000" stroke="#000000" points="6986.0001,-410.7167 6982.5,-400.7167 6979.0001,-410.7167 6986.0001,-410.7167"/>
</g>
<!-- leaf_97 -->
<g id="node98" class="node">
<title>leaf_97</title>
<polygon fill="none" stroke="#c0c0c0" points="7756,-393.1009 7257,-393.1009 7257,-322.5002 7756,-322.5002 7756,-393.1009"/>
<text text-anchor="middle" x="7506.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="7506.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- raw_96&#45;&gt;leaf_97 -->
<g id="edge97" class="edge">
<title>raw_96&#45;&gt;leaf_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7283.882,-763.5033C7317.3546,-702.5023 7431.5994,-494.3006 7482.1268,-402.2186"/>
<polygon fill="#000000" stroke="#000000" points="7485.2149,-403.8664 7486.9572,-393.4157 7479.0781,-400.4989 7485.2149,-403.8664"/>
</g>
<!-- raw_103 -->
<g id="node104" class="node">
<title>raw_103</title>
<ellipse fill="none" stroke="#000000" cx="7801.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="7801.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_99&#45;&gt;raw_103 -->
<g id="edge103" class="edge">
<title>prose_99&#45;&gt;raw_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7799.5859,-762.434C7799.8994,-696.1627 7800.9831,-467.0819 7801.3653,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="7804.8669,-385.9165 7801.4144,-375.9001 7797.867,-385.8834 7804.8669,-385.9165"/>
</g>
<!-- raw_105 -->
<g id="node106" class="node">
<title>raw_105</title>
<ellipse fill="none" stroke="#000000" cx="7876.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="7876.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_100&#45;&gt;raw_105 -->
<g id="edge105" class="edge">
<title>prose_100&#45;&gt;raw_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7881.2852,-762.434C7880.5014,-696.1627 7877.7924,-467.0819 7876.8368,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="7880.3321,-385.8579 7876.714,-375.9001 7873.3326,-385.9408 7880.3321,-385.8579"/>
</g>
<!-- raw_107 -->
<g id="node108" class="node">
<title>raw_107</title>
<ellipse fill="none" stroke="#000000" cx="7968.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="7968.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_101&#45;&gt;raw_107 -->
<g id="edge107" class="edge">
<title>prose_101&#45;&gt;raw_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7963.7148,-762.434C7964.4986,-696.1627 7967.2076,-467.0819 7968.1632,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="7971.6674,-385.9408 7968.286,-375.9001 7964.6679,-385.8579 7971.6674,-385.9408"/>
</g>
<!-- raw_109 -->
<g id="node110" class="node">
<title>raw_109</title>
<ellipse fill="none" stroke="#000000" cx="8045.5" cy="-357.8005" rx="27" ry="18"/>
<text text-anchor="middle" x="8045.5" y="-353.6005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_102&#45;&gt;raw_109 -->
<g id="edge109" class="edge">
<title>prose_102&#45;&gt;raw_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8045.5,-762.434C8045.5,-696.1627 8045.5,-467.0819 8045.5,-386.2844"/>
<polygon fill="#000000" stroke="#000000" points="8049.0001,-385.9 8045.5,-375.9001 8042.0001,-385.9001 8049.0001,-385.9"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7473.5,-71.0015 6981.5,-71.0015 6981.5,-15.1986 7473.5,-15.1986 7473.5,-71.0015"/>
<text text-anchor="middle" x="7227.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- raw_103&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>raw_103&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7805.0388,-339.8727C7812.6057,-295.7202 7825.0793,-181.0593 7764.5,-122.2001 7719.1897,-78.1763 7544.992,-95.4663 7482.5,-86.2001 7454.3918,-82.0323 7424.5964,-77.291 7395.666,-72.5146"/>
<polygon fill="#000000" stroke="#000000" points="7395.9111,-69.0075 7385.4732,-70.8245 7394.766,-75.9132 7395.9111,-69.0075"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7871.5,-70.4005 7491.5,-70.4005 7491.5,-15.7996 7871.5,-15.7996 7871.5,-70.4005"/>
<text text-anchor="middle" x="7681.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="7681.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- raw_105&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_105&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7878.6374,-339.7887C7882.6768,-297.3801 7887.0281,-189.7332 7837.5,-122.2001 7822.7423,-102.0775 7801.3842,-86.723 7779.1839,-75.149"/>
<polygon fill="#000000" stroke="#000000" points="7780.4883,-71.889 7769.9749,-70.5778 7777.3759,-78.1591 7780.4883,-71.889"/>
</g>
<!-- leaf_108 -->
<g id="node109" class="node">
<title>leaf_108</title>
<polygon fill="none" stroke="#c0c0c0" points="8445,-70.4005 7890,-70.4005 7890,-15.7996 8445,-15.7996 8445,-70.4005"/>
<text text-anchor="middle" x="8167.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="8167.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- raw_107&#45;&gt;leaf_108 -->
<g id="edge108" class="edge">
<title>raw_107&#45;&gt;leaf_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7966.5226,-339.7569C7962.8584,-297.2795 7959.4515,-189.4948 8009.5,-122.2001 8024.6108,-101.8823 8046.4033,-86.4432 8068.9978,-74.8491"/>
<polygon fill="#000000" stroke="#000000" points="8070.5799,-77.9716 8078.0243,-70.4328 8067.5035,-71.6838 8070.5799,-77.9716"/>
</g>
<!-- leaf_110 -->
<g id="node111" class="node">
<title>leaf_110</title>
<polygon fill="none" stroke="#c0c0c0" points="8864,-71.0015 8463,-71.0015 8463,-15.1986 8864,-15.1986 8864,-71.0015"/>
<text text-anchor="middle" x="8663.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- raw_109&#45;&gt;leaf_110 -->
<g id="edge110" class="edge">
<title>raw_109&#45;&gt;leaf_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8041.7637,-339.7687C8033.7324,-295.3787 8020.1898,-180.2187 8081.5,-122.2001 8141.8242,-65.1145 8371.3729,-98.5662 8453.5,-86.2001 8478.1928,-82.482 8504.3669,-77.7524 8529.5499,-72.7968"/>
<polygon fill="#000000" stroke="#000000" points="8530.3955,-76.1972 8539.5203,-70.8132 8529.0296,-69.3318 8530.3955,-76.1972"/>
</g>
<!-- raw_121 -->
<g id="node122" class="node">
<title>raw_121</title>
<ellipse fill="none" stroke="#000000" cx="8858.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="8858.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_112&#45;&gt;raw_121 -->
<g id="edge121" class="edge">
<title>prose_112&#45;&gt;raw_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9807.1602,-987.0049C9799.9317,-979.8324 9790.5695,-972.0994 9780.5,-967.8015 9617.554,-898.2511 9557.6315,-964.4645 9383.5,-931.8015 9194.0006,-896.2557 8974.4336,-821.8294 8892.0245,-792.6783"/>
<polygon fill="#000000" stroke="#000000" points="8893.0356,-789.3232 8882.4409,-789.2731 8890.6919,-795.9192 8893.0356,-789.3232"/>
</g>
<!-- raw_123 -->
<g id="node124" class="node">
<title>raw_123</title>
<ellipse fill="none" stroke="#000000" cx="9419.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="9419.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_113&#45;&gt;raw_123 -->
<g id="edge123" class="edge">
<title>prose_113&#45;&gt;raw_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9888.4878,-987.2656C9881.2523,-980.3266 9872.0746,-972.7103 9862.5,-967.8015 9800.3368,-935.9309 9774.9806,-956.1386 9709.5,-931.8015 9608.7913,-894.3711 9498.5207,-829.6667 9447.8451,-798.4574"/>
<polygon fill="#000000" stroke="#000000" points="9449.4361,-795.3259 9439.0922,-793.0339 9445.7491,-801.2762 9449.4361,-795.3259"/>
</g>
<!-- raw_125 -->
<g id="node126" class="node">
<title>raw_125</title>
<ellipse fill="none" stroke="#000000" cx="9745.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="9745.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_114&#45;&gt;raw_125 -->
<g id="edge125" class="edge">
<title>prose_114&#45;&gt;raw_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9968.6237,-987.8276C9926.5782,-948.7778 9817.0827,-847.0837 9768.8697,-802.3059"/>
<polygon fill="#000000" stroke="#000000" points="9771.1188,-799.618 9761.4097,-795.3773 9766.3551,-804.7471 9771.1188,-799.618"/>
</g>
<!-- raw_127 -->
<g id="node128" class="node">
<title>raw_127</title>
<ellipse fill="none" stroke="#000000" cx="10067.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="10067.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_115&#45;&gt;raw_127 -->
<g id="edge127" class="edge">
<title>prose_115&#45;&gt;raw_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10067.5,-985.2606C10067.5,-946.4687 10067.5,-855.5392 10067.5,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="10071.0001,-808.7815 10067.5,-798.7815 10064.0001,-808.7815 10071.0001,-808.7815"/>
</g>
<!-- raw_129 -->
<g id="node130" class="node">
<title>raw_129</title>
<ellipse fill="none" stroke="#000000" cx="10157.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="10157.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_116&#45;&gt;raw_129 -->
<g id="edge129" class="edge">
<title>prose_116&#45;&gt;raw_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10150.1547,-985.2606C10151.5469,-946.4687 10154.8104,-855.5392 10156.4788,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="10159.9865,-808.9006 10156.8475,-798.7815 10152.991,-808.6495 10159.9865,-808.9006"/>
</g>
<!-- raw_131 -->
<g id="node132" class="node">
<title>raw_131</title>
<ellipse fill="none" stroke="#000000" cx="10258.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="10258.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_117&#45;&gt;raw_131 -->
<g id="edge131" class="edge">
<title>prose_117&#45;&gt;raw_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10233.7095,-985.2606C10238.4183,-946.3868 10249.4692,-855.1553 10255.089,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="10258.5698,-809.1299 10256.2978,-798.7815 10251.6206,-808.288 10258.5698,-809.1299"/>
</g>
<!-- raw_133 -->
<g id="node134" class="node">
<title>raw_133</title>
<ellipse fill="none" stroke="#000000" cx="10345.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="10345.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_118&#45;&gt;raw_133 -->
<g id="edge133" class="edge">
<title>prose_118&#45;&gt;raw_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10316.1187,-985.2606C10321.6995,-946.3868 10334.7969,-855.1553 10341.4573,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="10344.9333,-809.1774 10342.89,-798.7815 10338.0044,-808.1826 10344.9333,-809.1774"/>
</g>
<!-- raw_135 -->
<g id="node136" class="node">
<title>raw_135</title>
<ellipse fill="none" stroke="#000000" cx="10424.5" cy="-780.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="10424.5" y="-776.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_119&#45;&gt;raw_135 -->
<g id="edge135" class="edge">
<title>prose_119&#45;&gt;raw_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10397.8732,-985.2606C10402.9308,-946.3868 10414.8003,-855.1553 10420.8363,-808.761"/>
<polygon fill="#000000" stroke="#000000" points="10424.3152,-809.1495 10422.1347,-798.7815 10417.3737,-808.2464 10424.3152,-809.1495"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="10569.5,-798.6012 10497.5,-798.6012 10497.5,-762.6012 10569.5,-762.6012 10569.5,-798.6012"/>
<text text-anchor="middle" x="10533.5" y="-777.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_120&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>codeblock_120&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10533.5,-985.2606C10533.5,-946.4687 10533.5,-855.5392 10533.5,-809.0546"/>
<polygon fill="#000000" stroke="#000000" points="10537.0001,-808.7815 10533.5,-798.7815 10530.0001,-808.7815 10537.0001,-808.7815"/>
</g>
<!-- leaf_122 -->
<g id="node123" class="node">
<title>leaf_122</title>
<polygon fill="none" stroke="#c0c0c0" points="8646,-401.0009 8091,-401.0009 8091,-314.6002 8646,-314.6002 8646,-401.0009"/>
<text text-anchor="middle" x="8368.5" y="-353.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="8368.5" y="-338.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="8368.5" y="-322.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- raw_121&#45;&gt;leaf_122 -->
<g id="edge122" class="edge">
<title>raw_121&#45;&gt;leaf_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8841.916,-766.2916C8776.9398,-710.2263 8537.7981,-503.8808 8426.3614,-407.7267"/>
<polygon fill="#000000" stroke="#000000" points="8428.4205,-404.8806 8418.5628,-400.9976 8423.8475,-410.1804 8428.4205,-404.8806"/>
</g>
<!-- leaf_124 -->
<g id="node125" class="node">
<title>leaf_124</title>
<polygon fill="none" stroke="#c0c0c0" points="9226.5,-385.101 8664.5,-385.101 8664.5,-330.5001 9226.5,-330.5001 9226.5,-385.101"/>
<text text-anchor="middle" x="8945.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="8945.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- raw_123&#45;&gt;leaf_124 -->
<g id="edge124" class="edge">
<title>raw_123&#45;&gt;leaf_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9403.1838,-766.0475C9336.2188,-706.3157 9081.418,-479.0373 8983.8367,-391.9963"/>
<polygon fill="#000000" stroke="#000000" points="8986.054,-389.284 8976.2616,-385.2394 8981.3944,-394.5079 8986.054,-389.284"/>
</g>
<!-- leaf_126 -->
<g id="node127" class="node">
<title>leaf_126</title>
<polygon fill="none" stroke="#c0c0c0" points="9764.5,-385.101 9244.5,-385.101 9244.5,-330.5001 9764.5,-330.5001 9764.5,-385.101"/>
<text text-anchor="middle" x="9504.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="9504.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- raw_125&#45;&gt;leaf_126 -->
<g id="edge126" class="edge">
<title>raw_125&#45;&gt;leaf_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9735.9038,-763.766C9700.2648,-701.2424 9575.0079,-481.4968 9525.1749,-394.0718"/>
<polygon fill="#000000" stroke="#000000" points="9528.1678,-392.2545 9520.175,-385.3 9522.0864,-395.721 9528.1678,-392.2545"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="10352,-393.0009 9783,-393.0009 9783,-322.6002 10352,-322.6002 10352,-393.0009"/>
<text text-anchor="middle" x="10067.5" y="-361.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="10067.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="10067.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- raw_127&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>raw_127&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10067.5,-762.434C10067.5,-700.3387 10067.5,-495.3054 10067.5,-403.2467"/>
<polygon fill="#000000" stroke="#000000" points="10071.0001,-403.121 10067.5,-393.1211 10064.0001,-403.1211 10071.0001,-403.121"/>
</g>
<!-- leaf_130 -->
<g id="node131" class="node">
<title>leaf_130</title>
<polygon fill="none" stroke="#c0c0c0" points="10918.5,-400.4016 10370.5,-400.4016 10370.5,-315.1995 10918.5,-315.1995 10918.5,-400.4016"/>
<text text-anchor="middle" x="10644.5" y="-369.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="10644.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="10644.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="10644.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- raw_129&#45;&gt;leaf_130 -->
<g id="edge130" class="edge">
<title>raw_129&#45;&gt;leaf_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10160.0671,-762.4383C10165.5502,-730.5867 10181.4375,-664.6943 10222.5,-629.401 10270.5701,-588.0846 10304.0981,-622.325 10360.5,-593.401 10454.4155,-545.2393 10545.0743,-461.4893 10597.7715,-407.9043"/>
<polygon fill="#000000" stroke="#000000" points="10600.47,-410.1505 10604.9517,-400.5502 10595.4614,-405.2603 10600.47,-410.1505"/>
</g>
<!-- leaf_132 -->
<g id="node133" class="node">
<title>leaf_132</title>
<polygon fill="none" stroke="#c0c0c0" points="11198,-377.7026 10937,-377.7026 10937,-337.8984 11198,-337.8984 11198,-377.7026"/>
<text text-anchor="middle" x="11067.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- raw_131&#45;&gt;leaf_132 -->
<g id="edge132" class="edge">
<title>raw_131&#45;&gt;leaf_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10258.5586,-762.5165C10259.7498,-729.8679 10267.4357,-661.5003 10309.5,-629.401 10418.8614,-545.9472 10809.9641,-664.8835 10927.5,-593.401 11004.6746,-546.4652 11044.3785,-439.5771 11059.7454,-387.4669"/>
<polygon fill="#000000" stroke="#000000" points="11063.1229,-388.3857 11062.4982,-377.8093 11056.391,-386.4668 11063.1229,-388.3857"/>
</g>
<!-- leaf_134 -->
<g id="node135" class="node">
<title>leaf_134</title>
<polygon fill="none" stroke="#c0c0c0" points="11743,-385.101 11216,-385.101 11216,-330.5001 11743,-330.5001 11743,-385.101"/>
<text text-anchor="middle" x="11479.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="11479.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- raw_133&#45;&gt;leaf_134 -->
<g id="edge134" class="edge">
<title>raw_133&#45;&gt;leaf_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10344.4995,-762.5596C10343.7971,-729.9812 10347.6056,-661.7233 10388.5,-629.401 10459.8745,-572.9876 11121.9453,-626.9762 11206.5,-593.401 11313.3153,-550.9865 11407.3205,-448.2509 11451.9607,-393.5166"/>
<polygon fill="#000000" stroke="#000000" points="11454.8875,-395.4628 11458.4403,-385.4814 11449.4385,-391.0687 11454.8875,-395.4628"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="12309.5,-385.101 11761.5,-385.101 11761.5,-330.5001 12309.5,-330.5001 12309.5,-385.101"/>
<text text-anchor="middle" x="12035.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="12035.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- raw_135&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>raw_135&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10426.0579,-762.508C10429.9764,-729.5274 10443.4305,-660.1976 10488.5,-629.401 10604.4135,-550.1956 11620.1342,-642.9235 11751.5,-593.401 11862.0564,-551.7232 11960.7177,-447.8165 12007.2424,-392.9753"/>
<polygon fill="#000000" stroke="#000000" points="12009.9756,-395.163 12013.7236,-385.2532 12004.6139,-390.6628 12009.9756,-395.163"/>
</g>
</g>
</svg>