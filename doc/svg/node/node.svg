<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12885pt" height="1320pt"
 viewBox="0.00 0.00 12884.50 1319.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1315.8015)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1315.8015 12880.5,-1315.8015 12880.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="506.5" cy="-1293.8015" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="506.5" y="-1289.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 273</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="506.5" cy="-1221.8015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="506.5" y="-1217.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;178</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M506.5,-1275.6328C506.5,-1267.9324 506.5,-1258.7758 506.5,-1250.2181"/>
<polygon fill="#000000" stroke="#000000" points="510.0001,-1250.2147 506.5,-1240.2147 503.0001,-1250.2148 510.0001,-1250.2147"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="247.5" cy="-1149.8015" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="247.5" y="-1145.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M460.196,-1208.9293C413.1579,-1195.8531 340.724,-1175.717 293.7171,-1162.6495"/>
<polygon fill="#000000" stroke="#000000" points="294.3726,-1159.199 283.8005,-1159.8927 292.4977,-1165.9433 294.3726,-1159.199"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="377.5" cy="-1149.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="377.5" y="-1145.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M477.5499,-1205.6433C457.2314,-1194.3027 430.0683,-1179.1419 409.1726,-1167.4792"/>
<polygon fill="#000000" stroke="#000000" points="410.788,-1164.3726 400.3502,-1162.5551 407.3764,-1170.485 410.788,-1164.3726"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="506.5" cy="-1149.8015" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="506.5" y="-1145.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M506.5,-1203.6328C506.5,-1195.9324 506.5,-1186.7758 506.5,-1178.2181"/>
<polygon fill="#000000" stroke="#000000" points="510.0001,-1178.2147 506.5,-1168.2147 503.0001,-1178.2148 510.0001,-1178.2147"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1002.5" cy="-1149.8015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1002.5" y="-1145.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564.856,-1213.3304C657.1095,-1199.9388 836.2074,-1173.9407 934.2673,-1159.7062"/>
<polygon fill="#000000" stroke="#000000" points="934.9727,-1163.1406 944.3662,-1158.2403 933.9671,-1156.2132 934.9727,-1163.1406"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="5841.5" cy="-1149.8015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5841.5" y="-1145.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 179&#45;238</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M572.5081,-1220.9106C1135.0439,-1213.3188 5118.7156,-1159.556 5755.6959,-1150.9595"/>
<polygon fill="#000000" stroke="#000000" points="5755.7695,-1154.4589 5765.7213,-1150.8242 5755.6749,-1147.4595 5755.7695,-1154.4589"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="256.5,-1095.8015 202.5,-1095.8015 202.5,-1059.8015 256.5,-1059.8015 256.5,-1095.8015"/>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M242.9578,-1131.6328C241.0116,-1123.8478 238.6932,-1114.5744 236.5337,-1105.9362"/>
<polygon fill="#000000" stroke="#000000" points="239.9242,-1105.0673 234.1033,-1096.2147 233.1332,-1106.7651 239.9242,-1105.0673"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="301.5" cy="-1077.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="301.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M361.0091,-1134.1785C350.3371,-1124.0682 336.2903,-1110.7607 324.524,-1099.6137"/>
<polygon fill="#000000" stroke="#000000" points="326.8462,-1096.9924 317.1796,-1092.6558 322.032,-1102.0741 326.8462,-1096.9924"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="401.5" cy="-1077.8015" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="401.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M482.147,-1133.1022C467.7322,-1123.2178 449.2981,-1110.5773 433.6936,-1099.877"/>
<polygon fill="#000000" stroke="#000000" points="435.5856,-1096.9307 425.3589,-1094.1619 431.6269,-1102.7038 435.5856,-1096.9307"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="506.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="506.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_4&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M506.5,-1131.6328C506.5,-1123.9324 506.5,-1114.7758 506.5,-1106.2181"/>
<polygon fill="#000000" stroke="#000000" points="510.0001,-1106.2147 506.5,-1096.2147 503.0001,-1106.2148 510.0001,-1106.2147"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="628.5" cy="-1077.8015" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="628.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- section_4&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_4&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M533.8792,-1133.6433C550.9046,-1123.5955 573.0116,-1110.5487 591.5753,-1099.5931"/>
<polygon fill="#000000" stroke="#000000" points="593.5328,-1102.502 600.3659,-1094.4052 589.9749,-1096.4735 593.5328,-1102.502"/>
</g>
<!-- header_17 -->
<g id="node18" class="node">
<title>header_17</title>
<ellipse fill="none" stroke="#000000" cx="803.5" cy="-1077.8015" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="803.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;header_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M962.7077,-1135.4042C932.1504,-1124.3484 889.6709,-1108.9789 856.2761,-1096.8963"/>
<polygon fill="#000000" stroke="#000000" points="857.2666,-1093.5327 846.6724,-1093.4216 854.885,-1100.1151 857.2666,-1093.5327"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="938.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="938.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M986.6798,-1132.0037C978.6184,-1122.9346 968.6979,-1111.7741 959.9584,-1101.9421"/>
<polygon fill="#000000" stroke="#000000" points="962.5204,-1099.5561 953.2607,-1094.4073 957.2885,-1104.2067 962.5204,-1099.5561"/>
</g>
<!-- codeblock_19 -->
<g id="node20" class="node">
<title>codeblock_19</title>
<ellipse fill="none" stroke="#000000" cx="1066.5" cy="-1077.8015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1066.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- section_5&#45;&gt;codeblock_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;codeblock_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1018.3202,-1132.0037C1026.0126,-1123.3498 1035.3978,-1112.7914 1043.8344,-1103.3003"/>
<polygon fill="#000000" stroke="#000000" points="1046.6122,-1105.4434 1050.64,-1095.644 1041.3803,-1100.7928 1046.6122,-1105.4434"/>
</g>
<!-- section_20 -->
<g id="node21" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="1227.5" cy="-1077.8015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1227.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_20 -->
<g id="edge20" class="edge">
<title>section_5&#45;&gt;section_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1045.3504,-1136.0893C1082.1411,-1124.3163 1135.316,-1107.3003 1174.7228,-1094.6902"/>
<polygon fill="#000000" stroke="#000000" points="1175.969,-1097.9663 1184.4265,-1091.585 1173.8356,-1091.2993 1175.969,-1097.9663"/>
</g>
<!-- section_21 -->
<g id="node22" class="node">
<title>section_21</title>
<ellipse fill="none" stroke="#000000" cx="2118.5" cy="-1077.8015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2118.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;160</text>
</g>
<!-- section_5&#45;&gt;section_21 -->
<g id="edge21" class="edge">
<title>section_5&#45;&gt;section_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1066.5093,-1145.6718C1258.5837,-1133.2799 1829.6784,-1096.4351 2039.785,-1082.8799"/>
<polygon fill="#000000" stroke="#000000" points="2040.0603,-1086.3695 2049.8141,-1082.2328 2039.6095,-1079.384 2040.0603,-1086.3695"/>
</g>
<!-- header_72 -->
<g id="node73" class="node">
<title>header_72</title>
<ellipse fill="none" stroke="#000000" cx="5543.5" cy="-1077.8015" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="5543.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_72 -->
<g id="edge72" class="edge">
<title>section_6&#45;&gt;header_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5788.2236,-1136.9293C5738.1057,-1124.8203 5662.9307,-1106.6572 5609.1346,-1093.6595"/>
<polygon fill="#000000" stroke="#000000" points="5609.8917,-1090.2418 5599.3493,-1091.2953 5608.2476,-1097.046 5609.8917,-1090.2418"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5677.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5677.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_6&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5805.1031,-1133.8223C5777.4153,-1121.6667 5739.5566,-1105.0458 5712.2766,-1093.0692"/>
<polygon fill="#000000" stroke="#000000" points="5713.6659,-1089.8568 5703.1025,-1089.0416 5710.8519,-1096.2663 5713.6659,-1089.8568"/>
</g>
<!-- prose_74 -->
<g id="node75" class="node">
<title>prose_74</title>
<ellipse fill="none" stroke="#000000" cx="5759.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5759.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_74 -->
<g id="edge74" class="edge">
<title>section_6&#45;&gt;prose_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5821.6501,-1132.3723C5810.5588,-1122.6336 5796.6239,-1110.398 5784.7613,-1099.9821"/>
<polygon fill="#000000" stroke="#000000" points="5786.764,-1097.0829 5776.9403,-1093.1149 5782.1454,-1102.343 5786.764,-1097.0829"/>
</g>
<!-- prose_75 -->
<g id="node76" class="node">
<title>prose_75</title>
<ellipse fill="none" stroke="#000000" cx="5841.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5841.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_75 -->
<g id="edge75" class="edge">
<title>section_6&#45;&gt;prose_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5841.5,-1131.6328C5841.5,-1123.9324 5841.5,-1114.7758 5841.5,-1106.2181"/>
<polygon fill="#000000" stroke="#000000" points="5845.0001,-1106.2147 5841.5,-1096.2147 5838.0001,-1106.2148 5845.0001,-1106.2147"/>
</g>
<!-- prose_76 -->
<g id="node77" class="node">
<title>prose_76</title>
<ellipse fill="none" stroke="#000000" cx="5974.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5974.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_76 -->
<g id="edge76" class="edge">
<title>section_6&#45;&gt;prose_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5872.0129,-1133.2832C5892.9899,-1121.9273 5920.8035,-1106.8703 5942.1623,-1095.3076"/>
<polygon fill="#000000" stroke="#000000" points="5944.0496,-1098.2659 5951.1774,-1090.4272 5940.7171,-1092.1101 5944.0496,-1098.2659"/>
</g>
<!-- prose_77 -->
<g id="node78" class="node">
<title>prose_77</title>
<ellipse fill="none" stroke="#000000" cx="6286.5" cy="-1077.8015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6286.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_77 -->
<g id="edge77" class="edge">
<title>section_6&#45;&gt;prose_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5904.3138,-1139.6383C5996.8302,-1124.6694 6167.1981,-1097.1043 6245.3545,-1084.4587"/>
<polygon fill="#000000" stroke="#000000" points="6245.9961,-1087.9005 6255.3087,-1082.8481 6244.878,-1080.9904 6245.9961,-1087.9005"/>
</g>
<!-- section_78 -->
<g id="node79" class="node">
<title>section_78</title>
<ellipse fill="none" stroke="#000000" cx="7352.5" cy="-1077.8015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7352.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 203&#45;225</text>
</g>
<!-- section_6&#45;&gt;section_78 -->
<g id="edge78" class="edge">
<title>section_6&#45;&gt;section_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5915.6582,-1146.2678C6169.1289,-1134.1898 7000.1304,-1094.5921 7268.2737,-1081.8149"/>
<polygon fill="#000000" stroke="#000000" points="7268.5138,-1085.3075 7278.3359,-1081.3354 7268.1806,-1078.3155 7268.5138,-1085.3075"/>
</g>
<!-- section_79 -->
<g id="node80" class="node">
<title>section_79</title>
<ellipse fill="none" stroke="#000000" cx="10634.5" cy="-1077.8015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10634.5" y="-1073.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 239&#45;273</text>
</g>
<!-- section_6&#45;&gt;section_79 -->
<g id="edge79" class="edge">
<title>section_6&#45;&gt;section_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5917.2697,-1148.6633C6476.3169,-1140.2653 9956.3505,-1087.9886 10548.7978,-1079.0889"/>
<polygon fill="#000000" stroke="#000000" points="10549.0249,-1082.586 10558.9712,-1078.9361 10548.9197,-1075.5867 10549.0249,-1082.586"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-1024.0026 0,-1024.0026 0,-952.2003 359,-952.2003 359,-1024.0026"/>
<text text-anchor="middle" x="179.5" y="-960.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M283.2354,-1064.3725C270.725,-1055.1743 253.3954,-1042.4327 236.4798,-1029.9956"/>
<polygon fill="#000000" stroke="#000000" points="238.362,-1027.0353 228.2319,-1023.9314 234.2154,-1032.675 238.362,-1027.0353"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="431.5,-1006.1015 377.5,-1006.1015 377.5,-970.1015 431.5,-970.1015 431.5,-1006.1015"/>
</g>
<!-- header_10&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>header_10&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M402.1071,-1059.6493C402.5219,-1047.2479 403.0798,-1030.5647 403.5526,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="407.0575,-1016.338 403.8938,-1006.2266 400.0614,-1016.104 407.0575,-1016.338"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="480.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="480.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_11&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M501.2385,-1059.6493C497.5848,-1047.044 492.6488,-1030.0148 488.5089,-1015.7323"/>
<polygon fill="#000000" stroke="#000000" points="491.8106,-1014.5507 485.6649,-1005.9205 485.0873,-1016.4995 491.8106,-1014.5507"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="751.5,-1007.402 525.5,-1007.402 525.5,-968.8009 751.5,-968.8009 751.5,-1007.402"/>
<text text-anchor="middle" x="638.5" y="-992.3015" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="638.5" y="-976.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_12&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M630.5236,-1059.6493C631.8698,-1047.5743 633.6685,-1031.4398 635.2171,-1017.549"/>
<polygon fill="#000000" stroke="#000000" points="638.7113,-1017.7946 636.3409,-1007.4684 631.7544,-1017.019 638.7113,-1017.7946"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="507.5,-783.2012 453.5,-783.2012 453.5,-747.2012 507.5,-747.2012 507.5,-783.2012"/>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M480.5,-969.8606C480.5,-931.0686 480.5,-840.1391 480.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="484.0001,-793.3814 480.5,-783.3815 477.0001,-793.3815 484.0001,-793.3814"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="830.5,-1006.1015 776.5,-1006.1015 776.5,-970.1015 830.5,-970.1015 830.5,-1006.1015"/>
</g>
<!-- header_17&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>header_17&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M803.5,-1059.6493C803.5,-1047.2479 803.5,-1030.5647 803.5,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="807.0001,-1016.2266 803.5,-1006.2266 800.0001,-1016.2266 807.0001,-1016.2266"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="913.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="913.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_18&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_18&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M933.4409,-1059.6493C929.9277,-1047.044 925.1815,-1030.0148 921.2009,-1015.7323"/>
<polygon fill="#000000" stroke="#000000" points="924.5226,-1014.6137 918.4663,-1005.9205 917.7796,-1016.493 924.5226,-1014.6137"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1093,-1023.3018 972,-1023.3018 972,-952.9011 1093,-952.9011 1093,-1023.3018"/>
<text text-anchor="middle" x="1032.5" y="-992.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="1032.5" y="-976.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="1032.5" y="-961.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_19&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_19&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1059.6196,-1059.6493C1056.6508,-1051.8169 1053.0345,-1042.2764 1049.423,-1032.7482"/>
<polygon fill="#000000" stroke="#000000" points="1052.6543,-1031.3981 1045.8371,-1023.2878 1046.1087,-1033.8791 1052.6543,-1031.3981"/>
</g>
<!-- header_26 -->
<g id="node27" class="node">
<title>header_26</title>
<ellipse fill="none" stroke="#000000" cx="1156.5" cy="-988.1015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1156.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_20&#45;&gt;header_26 -->
<g id="edge26" class="edge">
<title>section_20&#45;&gt;header_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1213.4727,-1060.0796C1202.9021,-1046.725 1188.2629,-1028.2301 1176.4709,-1013.3323"/>
<polygon fill="#000000" stroke="#000000" points="1179.2073,-1011.15 1170.2566,-1005.4813 1173.7186,-1015.4945 1179.2073,-1011.15"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="1252.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1252.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_20&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1232.5591,-1059.6493C1236.0723,-1047.044 1240.8185,-1030.0148 1244.7991,-1015.7323"/>
<polygon fill="#000000" stroke="#000000" points="1248.2204,-1016.493 1247.5337,-1005.9205 1241.4774,-1014.6137 1248.2204,-1016.493"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="1403.5" cy="-988.1015" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1403.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_21&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_21&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2052.857,-1071.0284C1961.2875,-1061.4196 1790.062,-1042.8687 1644.5,-1023.8015 1583.0289,-1015.7493 1512.9444,-1005.2146 1464.2613,-997.6798"/>
<polygon fill="#000000" stroke="#000000" points="1464.6271,-994.1947 1454.2085,-996.1194 1463.5533,-1001.1119 1464.6271,-994.1947"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="1685.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1685.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_21&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2057.5215,-1068.6182C1996.0981,-1058.9737 1898.7609,-1042.6116 1815.5,-1023.8015 1784.3616,-1016.7668 1749.5011,-1007.0941 1723.7238,-999.5913"/>
<polygon fill="#000000" stroke="#000000" points="1724.5496,-996.1861 1713.9687,-996.7294 1722.579,-1002.903 1724.5496,-996.1861"/>
</g>
<!-- codeblock_33 -->
<g id="node34" class="node">
<title>codeblock_33</title>
<ellipse fill="none" stroke="#000000" cx="1901.5" cy="-988.1015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1901.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- section_21&#45;&gt;codeblock_33 -->
<g id="edge33" class="edge">
<title>section_21&#45;&gt;codeblock_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2081.1964,-1062.3815C2044.7012,-1047.2957 1988.9652,-1024.2564 1949.2513,-1007.8401"/>
<polygon fill="#000000" stroke="#000000" points="1950.353,-1004.5083 1939.7743,-1003.9227 1947.6788,-1010.9774 1950.353,-1004.5083"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="2118.5" cy="-988.1015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2118.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;76</text>
</g>
<!-- section_21&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_21&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2118.5,-1059.6493C2118.5,-1047.2479 2118.5,-1030.5647 2118.5,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="2122.0001,-1016.2266 2118.5,-1006.2266 2115.0001,-1016.2266 2122.0001,-1016.2266"/>
</g>
<!-- section_35 -->
<g id="node36" class="node">
<title>section_35</title>
<ellipse fill="none" stroke="#000000" cx="2463.5" cy="-988.1015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2463.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;98</text>
</g>
<!-- section_21&#45;&gt;section_35 -->
<g id="edge35" class="edge">
<title>section_21&#45;&gt;section_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2167.9301,-1064.9496C2230.8438,-1048.5921 2339.3306,-1020.3855 2405.9152,-1003.0735"/>
<polygon fill="#000000" stroke="#000000" points="2407.029,-1006.4004 2415.8264,-1000.4966 2405.2675,-999.6256 2407.029,-1006.4004"/>
</g>
<!-- section_36 -->
<g id="node37" class="node">
<title>section_36</title>
<ellipse fill="none" stroke="#000000" cx="2845.5" cy="-988.1015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2845.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;121</text>
</g>
<!-- section_21&#45;&gt;section_36 -->
<g id="edge36" class="edge">
<title>section_21&#45;&gt;section_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.0616,-1069.959C2316.5319,-1053.3675 2629.1626,-1014.794 2771.9706,-997.1738"/>
<polygon fill="#000000" stroke="#000000" points="2772.4584,-1000.6402 2781.9545,-995.9419 2771.6011,-993.6929 2772.4584,-1000.6402"/>
</g>
<!-- section_37 -->
<g id="node38" class="node">
<title>section_37</title>
<ellipse fill="none" stroke="#000000" cx="3410.5" cy="-988.1015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3410.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 122&#45;160</text>
</g>
<!-- section_21&#45;&gt;section_37 -->
<g id="edge37" class="edge">
<title>section_21&#45;&gt;section_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2187.0627,-1073.3682C2326.2634,-1064.3334 2652.0091,-1043.0171 2925.5,-1023.8015 3067.0366,-1013.857 3231.7513,-1001.5844 3328.2203,-994.3257"/>
<polygon fill="#000000" stroke="#000000" points="3328.4928,-997.8152 3338.2018,-993.5742 3327.9672,-990.8349 3328.4928,-997.8152"/>
</g>
<!-- section_38 -->
<g id="node39" class="node">
<title>section_38</title>
<ellipse fill="none" stroke="#000000" cx="4052.5" cy="-988.1015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4052.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 161&#45;178</text>
</g>
<!-- section_21&#45;&gt;section_38 -->
<g id="edge38" class="edge">
<title>section_21&#45;&gt;section_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2188.6949,-1075.6586C2391.2658,-1069.3428 2994.3081,-1049.6131 3494.5,-1023.8015 3663.3114,-1015.0902 3860.6455,-1001.7122 3969.5938,-994.0466"/>
<polygon fill="#000000" stroke="#000000" points="3970.1283,-997.5177 3979.8573,-993.323 3969.6359,-990.535 3970.1283,-997.5177"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1111.5,-808.4015 577.5,-808.4015 577.5,-722.0009 1111.5,-722.0009 1111.5,-808.4015"/>
<text text-anchor="middle" x="844.5" y="-761.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="844.5" y="-745.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="844.5" y="-730.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- raw_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M907.9701,-970.2374C897.8876,-937.6667 876.1554,-867.4621 860.944,-818.3224"/>
<polygon fill="#000000" stroke="#000000" points="864.1995,-817.003 857.8988,-808.4853 857.5125,-819.0731 864.1995,-817.003"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1183.5,-783.2012 1129.5,-783.2012 1129.5,-747.2012 1183.5,-747.2012 1183.5,-783.2012"/>
</g>
<!-- header_26&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>header_26&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1156.5,-969.8606C1156.5,-931.0686 1156.5,-840.1391 1156.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="1160.0001,-793.3814 1156.5,-783.3815 1153.0001,-793.3815 1160.0001,-793.3814"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="1228.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="1228.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_27&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1250.536,-969.8606C1246.3504,-930.9868 1236.5273,-839.7552 1231.532,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="1235.008,-792.9493 1230.4575,-783.3815 1228.0482,-793.6987 1235.008,-792.9493"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1406,-408.6007 893,-408.6007 893,-291.6004 1406,-291.6004 1406,-408.6007"/>
<text text-anchor="middle" x="1149.5" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="1149.5" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="1149.5" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="1149.5" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="1149.5" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1225.0547,-747.0979C1214.3417,-690.8073 1181.219,-516.7662 1162.5825,-418.8416"/>
<polygon fill="#000000" stroke="#000000" points="1165.9679,-417.9091 1160.6599,-408.7398 1159.0913,-419.2178 1165.9679,-417.9091"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="1327.5,-783.2012 1273.5,-783.2012 1273.5,-747.2012 1327.5,-747.2012 1327.5,-783.2012"/>
</g>
<!-- header_31&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>header_31&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1382.5967,-971.0714C1367.5778,-957.7239 1348.0223,-937.8671 1336.5,-916.4014 1315.3805,-877.0563 1306.5221,-825.3956 1302.8982,-793.7835"/>
<polygon fill="#000000" stroke="#000000" points="1306.3432,-793.0734 1301.8232,-783.4911 1299.3811,-793.8006 1306.3432,-793.0734"/>
</g>
<!-- raw_40 -->
<g id="node41" class="node">
<title>raw_40</title>
<ellipse fill="none" stroke="#000000" cx="1372.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="1372.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_40 -->
<g id="edge40" class="edge">
<title>prose_32&#45;&gt;raw_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.6016,-983.9985C1588.3247,-974.9636 1442.7591,-951.3366 1408.5,-916.4014 1376.2791,-883.5447 1371.0115,-827.3624 1371.0851,-793.5147"/>
<polygon fill="#000000" stroke="#000000" points="1374.5871,-793.4297 1371.2693,-783.3678 1367.5883,-793.3026 1374.5871,-793.4297"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="1903,-876.802 1418,-876.802 1418,-653.6004 1903,-653.6004 1903,-876.802"/>
<text text-anchor="middle" x="1660.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1660.5" y="-846.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1660.5" y="-831.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1660.5" y="-815.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1660.5" y="-800.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1660.5" y="-784.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1660.5" y="-769.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1660.5" y="-754.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1660.5" y="-738.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1660.5" y="-723.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1660.5" y="-707.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1660.5" y="-692.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1660.5" y="-677.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1660.5" y="-661.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_33&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>codeblock_33&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1882.5891,-970.6108C1861.5233,-951.1271 1825.5457,-917.8515 1788.6107,-883.6905"/>
<polygon fill="#000000" stroke="#000000" points="1790.933,-881.0708 1781.2151,-876.8503 1786.18,-886.2098 1790.933,-881.0708"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2315.5,-916.602 1921.5,-916.602 1921.5,-613.8004 2315.5,-613.8004 2315.5,-916.602"/>
<text text-anchor="middle" x="2118.5" y="-901.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="2118.5" y="-885.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="2118.5" y="-870.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2118.5" y="-839.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="2118.5" y="-823.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="2118.5" y="-808.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="2118.5" y="-792.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="2118.5" y="-777.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="2118.5" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2118.5" y="-746.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2118.5" y="-715.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="2118.5" y="-699.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="2118.5" y="-684.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2118.5" y="-653.001" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="2118.5" y="-637.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="2118.5" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_34&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2118.5,-969.8606C2118.5,-958.9091 2118.5,-943.8022 2118.5,-926.7131"/>
<polygon fill="#000000" stroke="#000000" points="2122.0001,-926.4387 2118.5,-916.4387 2115.0001,-926.4387 2122.0001,-926.4387"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="2403.5" cy="-765.2012" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2403.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkDeep</text>
</g>
<!-- section_35&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_35&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2458.5899,-969.8606C2448.1039,-930.905 2423.4649,-839.3709 2411.0013,-793.0686"/>
<polygon fill="#000000" stroke="#000000" points="2414.3728,-792.128 2408.3937,-783.3815 2407.6134,-793.9475 2414.3728,-792.128"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="2523.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2523.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_35&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_35&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2468.4101,-969.8606C2478.9,-930.8903 2503.5536,-839.3022 2516.0127,-793.0164"/>
<polygon fill="#000000" stroke="#000000" points="2519.4702,-793.6372 2518.6898,-783.0711 2512.7108,-791.8176 2519.4702,-793.6372"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="2651.5" cy="-765.2012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2651.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 82&#45;97</text>
</g>
<!-- section_35&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>section_35&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2493.0732,-971.8245C2514.7247,-958.8613 2543.8154,-939.1554 2564.5,-916.4014 2598.8389,-878.627 2625.6762,-825.0442 2640.003,-792.8482"/>
<polygon fill="#000000" stroke="#000000" points="2643.2537,-794.1496 2644.042,-783.5842 2636.8371,-791.352 2643.2537,-794.1496"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="2795.5" cy="-765.2012" rx="48.8618" ry="18"/>
<text text-anchor="middle" x="2795.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walk</text>
</g>
<!-- section_36&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_36&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2841.4083,-969.8606C2832.6883,-930.9868 2812.2236,-839.7552 2801.8167,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="2805.1821,-792.3729 2799.5781,-783.3815 2798.3518,-793.9051 2805.1821,-792.3729"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="2894.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2894.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_36&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2849.5099,-969.8606C2858.0767,-930.8903 2878.2104,-839.3022 2888.3854,-793.0164"/>
<polygon fill="#000000" stroke="#000000" points="2891.8429,-793.5894 2890.5717,-783.0711 2885.0062,-792.0864 2891.8429,-793.5894"/>
</g>
<!-- codeblock_53 -->
<g id="node54" class="node">
<title>codeblock_53</title>
<ellipse fill="none" stroke="#000000" cx="3070.5" cy="-765.2012" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="3070.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 103&#45;119</text>
</g>
<!-- section_36&#45;&gt;codeblock_53 -->
<g id="edge53" class="edge">
<title>section_36&#45;&gt;codeblock_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2869.3307,-970.8621C2888.0126,-956.9416 2914.3051,-936.4384 2935.5,-916.4014 2978.9278,-875.346 3024.1468,-822.2226 3049.6694,-791.1096"/>
<polygon fill="#000000" stroke="#000000" points="3052.4147,-793.2813 3056.0244,-783.3203 3046.9908,-788.8561 3052.4147,-793.2813"/>
</g>
<!-- header_58 -->
<g id="node59" class="node">
<title>header_58</title>
<ellipse fill="none" stroke="#000000" cx="3334.5" cy="-765.2012" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3334.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.select(node, pred)</text>
</g>
<!-- section_37&#45;&gt;header_58 -->
<g id="edge58" class="edge">
<title>section_37&#45;&gt;header_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3404.2806,-969.8606C3390.9983,-930.905 3359.7889,-839.3709 3344.0017,-793.0686"/>
<polygon fill="#000000" stroke="#000000" points="3347.2387,-791.7169 3340.6987,-783.3815 3340.6132,-793.976 3347.2387,-791.7169"/>
</g>
<!-- prose_59 -->
<g id="node60" class="node">
<title>prose_59</title>
<ellipse fill="none" stroke="#000000" cx="3487.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3487.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_59 -->
<g id="edge59" class="edge">
<title>section_37&#45;&gt;prose_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3420.8684,-969.992C3428.6979,-955.7643 3439.2897,-935.2674 3446.5,-916.4014 3462.4817,-874.5852 3474.8612,-824.0372 3481.664,-793.2714"/>
<polygon fill="#000000" stroke="#000000" points="3485.136,-793.7755 3483.8345,-783.2609 3478.2949,-792.2922 3485.136,-793.7755"/>
</g>
<!-- codeblock_60 -->
<g id="node61" class="node">
<title>codeblock_60</title>
<ellipse fill="none" stroke="#000000" cx="3680.5" cy="-765.2012" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3680.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 128&#45;158</text>
</g>
<!-- section_37&#45;&gt;codeblock_60 -->
<g id="edge60" class="edge">
<title>section_37&#45;&gt;codeblock_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3441.8747,-971.7162C3466.4405,-958.2669 3500.9459,-937.9805 3528.5,-916.4014 3578.7478,-877.0497 3629.8757,-822.5803 3658.1619,-790.8993"/>
<polygon fill="#000000" stroke="#000000" points="3660.832,-793.1635 3664.8468,-783.3588 3655.594,-788.5199 3660.832,-793.1635"/>
</g>
<!-- header_65 -->
<g id="node66" class="node">
<title>header_65</title>
<ellipse fill="none" stroke="#000000" cx="3986.5" cy="-765.2012" rx="82.7165" ry="18"/>
<text text-anchor="middle" x="3986.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.tokens(node)</text>
</g>
<!-- section_38&#45;&gt;header_65 -->
<g id="edge65" class="edge">
<title>section_38&#45;&gt;header_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4047.0989,-969.8606C4035.5643,-930.905 4008.4614,-839.3709 3994.7514,-793.0686"/>
<polygon fill="#000000" stroke="#000000" points="3998.0783,-791.9763 3991.8831,-783.3815 3991.3663,-793.9637 3998.0783,-791.9763"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="4119.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4119.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_38&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_38&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4059.5468,-969.9731C4065.0333,-955.5623 4072.6701,-934.8334 4078.5,-916.4014 4091.9266,-873.9513 4104.9467,-823.9654 4112.59,-793.4389"/>
<polygon fill="#000000" stroke="#000000" points="4116.0455,-794.0462 4115.0612,-783.4972 4109.2523,-792.3576 4116.0455,-794.0462"/>
</g>
<!-- codeblock_67 -->
<g id="node68" class="node">
<title>codeblock_67</title>
<ellipse fill="none" stroke="#000000" cx="4257.5" cy="-765.2012" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4257.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 165&#45;177</text>
</g>
<!-- section_38&#45;&gt;codeblock_67 -->
<g id="edge67" class="edge">
<title>section_38&#45;&gt;codeblock_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4084.338,-971.6583C4107.3028,-958.7454 4138.0799,-939.1758 4160.5,-916.4014 4197.5787,-878.7369 4228.0742,-824.6792 4244.4535,-792.4381"/>
<polygon fill="#000000" stroke="#000000" points="4247.7425,-793.6856 4249.0753,-783.1749 4241.4789,-790.5604 4247.7425,-793.6856"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="1478.5,-368.1005 1424.5,-368.1005 1424.5,-332.1005 1478.5,-332.1005 1478.5,-368.1005"/>
</g>
<!-- raw_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>raw_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1376.9143,-747.205C1384.993,-713.9268 1402.4336,-640.4644 1414.5,-578.0009 1428.3423,-506.3445 1441.2104,-421.3367 1447.4883,-378.2143"/>
<polygon fill="#000000" stroke="#000000" points="1450.971,-378.5852 1448.939,-368.187 1444.0431,-377.5828 1450.971,-378.5852"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2252.5,-368.1005 2198.5,-368.1005 2198.5,-332.1005 2252.5,-332.1005 2252.5,-368.1005"/>
</g>
<!-- header_44&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>header_44&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2397.7492,-746.864C2387.3628,-716.1839 2362.9178,-653.894 2324.5,-614.0009 2302.13,-590.772 2279.8197,-604.5412 2261.5,-578.0009 2219.2624,-516.8101 2219.3492,-424.5403 2222.5894,-378.4307"/>
<polygon fill="#000000" stroke="#000000" points="2226.0935,-378.52 2223.4094,-368.2709 2219.1162,-377.9569 2226.0935,-378.52"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="2297.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2297.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_45&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_45&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2524.1167,-747.1683C2524.1605,-715.5204 2519.4462,-649.9366 2482.5,-614.0009 2433.6632,-566.4999 2379.6986,-628.0716 2333.5,-578.0009 2282.4697,-522.6936 2286.9494,-425.8278 2292.9486,-378.1842"/>
<polygon fill="#000000" stroke="#000000" points="2296.4555,-378.3736 2294.3527,-367.9896 2289.521,-377.4185 2296.4555,-378.3736"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="2750.5,-462.401 2342.5,-462.401 2342.5,-237.8001 2750.5,-237.8001 2750.5,-462.401"/>
<text text-anchor="middle" x="2546.5" y="-447.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2546.5" y="-431.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2546.5" y="-416.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2546.5" y="-385.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2546.5" y="-369.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2546.5" y="-354.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2546.5" y="-338.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2546.5" y="-323.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2546.5" y="-308.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2546.5" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2546.5" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2546.5" y="-245.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_46&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2646.9208,-747.0979C2635.0216,-700.0564 2602.3212,-570.7808 2577.44,-472.4168"/>
<polygon fill="#000000" stroke="#000000" points="2580.8269,-471.5337 2574.9814,-462.6973 2574.0407,-473.2503 2580.8269,-471.5337"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2382.5,-71.0015 2212.5,-71.0015 2212.5,-15.1986 2382.5,-15.1986 2382.5,-71.0015"/>
<text text-anchor="middle" x="2297.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Depth&#45;first iterator. </text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2297.5,-331.8156C2297.5,-282.8037 2297.5,-147.7087 2297.5,-81.1586"/>
<polygon fill="#000000" stroke="#000000" points="2301.0001,-81.0899 2297.5,-71.0899 2294.0001,-81.09 2301.0001,-81.0899"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2822.5,-368.1005 2768.5,-368.1005 2768.5,-332.1005 2822.5,-332.1005 2822.5,-368.1005"/>
</g>
<!-- header_51&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>header_51&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2795.5,-747.0979C2795.5,-681.8206 2795.5,-458.1946 2795.5,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="2799.0001,-378.2991 2795.5,-368.2991 2792.0001,-378.2991 2799.0001,-378.2991"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="2867.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="2867.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_52&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2893.3225,-747.0979C2889.0766,-681.8206 2874.5309,-458.1946 2869.3505,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="2872.8255,-378.0508 2868.6837,-368.2991 2865.8403,-378.5052 2872.8255,-378.0508"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3306.5,-462.401 2912.5,-462.401 2912.5,-237.8001 3306.5,-237.8001 3306.5,-462.401"/>
<text text-anchor="middle" x="3109.5" y="-447.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="3109.5" y="-431.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3109.5" y="-416.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="3109.5" y="-385.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3109.5" y="-369.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3109.5" y="-354.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="3109.5" y="-338.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3109.5" y="-323.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3109.5" y="-308.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3109.5" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3109.5" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3109.5" y="-245.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_53&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>codeblock_53&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3072.2009,-747.0979C3076.6161,-700.1039 3088.7419,-571.0416 3097.98,-472.7147"/>
<polygon fill="#000000" stroke="#000000" points="3101.4703,-472.9809 3098.9212,-462.6973 3094.501,-472.3261 3101.4703,-472.9809"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3036.5,-71.0015 2698.5,-71.0015 2698.5,-15.1986 3036.5,-15.1986 3036.5,-71.0015"/>
<text text-anchor="middle" x="2867.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Breadth&#45;first iterator. &#160;This is the default. </text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2867.5,-331.8156C2867.5,-282.8037 2867.5,-147.7087 2867.5,-81.1586"/>
<polygon fill="#000000" stroke="#000000" points="2871.0001,-81.0899 2867.5,-71.0899 2864.0001,-81.09 2871.0001,-81.0899"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="3378.5,-368.1005 3324.5,-368.1005 3324.5,-332.1005 3378.5,-332.1005 3378.5,-368.1005"/>
</g>
<!-- header_58&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>header_58&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3335.2414,-747.0979C3337.9148,-681.8206 3347.0731,-458.1946 3350.3349,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="3353.8425,-378.434 3350.7547,-368.2991 3346.8483,-378.1475 3353.8425,-378.434"/>
</g>
<!-- raw_62 -->
<g id="node63" class="node">
<title>raw_62</title>
<ellipse fill="none" stroke="#000000" cx="3423.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="3423.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_59&#45;&gt;raw_62 -->
<g id="edge62" class="edge">
<title>prose_59&#45;&gt;raw_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3484.7088,-747.0979C3474.6444,-681.8206 3440.1659,-458.1946 3427.8864,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="3431.2888,-377.649 3426.3058,-368.2991 3424.3706,-378.7157 3431.2888,-377.649"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="4002.5,-577.9014 3468.5,-577.9014 3468.5,-122.2996 4002.5,-122.2996 4002.5,-577.9014"/>
<text text-anchor="middle" x="3735.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="3735.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="3735.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="3735.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; and node.isNode and node.id == pred then</text>
<text text-anchor="middle" x="3735.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="3735.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3735.5" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="3735.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="3735.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="3735.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3735.5" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="3735.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3735.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; depth first</text>
<text text-anchor="middle" x="3735.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="3735.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3735.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="3735.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3735.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3735.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3735.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3735.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_60&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_60&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3682.8986,-747.0979C3686.8319,-717.4128 3695.1039,-654.9811 3703.9477,-588.2349"/>
<polygon fill="#000000" stroke="#000000" points="3707.4697,-588.2986 3705.3137,-577.9255 3700.5304,-587.3791 3707.4697,-588.2986"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="3697.5,-86.3004 3149.5,-86.3004 3149.5,.1003 3697.5,.1003 3697.5,-86.3004"/>
<text text-anchor="middle" x="3423.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Takes the Node and walks it, yielding the Nodes which match the predicate.</text>
<text text-anchor="middle" x="3423.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">=pred= is either a string, which matches to =id=, or a function, which takes</text>
<text text-anchor="middle" x="3423.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node and returns true or false on some premise. </text>
</g>
<!-- raw_62&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>raw_62&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3423.5,-331.8156C3423.5,-286.3863 3423.5,-166.9988 3423.5,-96.7907"/>
<polygon fill="#000000" stroke="#000000" points="3427.0001,-96.3838 3423.5,-86.3839 3420.0001,-96.3839 3427.0001,-96.3838"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="4074.5,-368.1005 4020.5,-368.1005 4020.5,-332.1005 4074.5,-332.1005 4074.5,-368.1005"/>
</g>
<!-- header_65&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>header_65&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3989.1603,-747.0979C3998.753,-681.8206 4031.6153,-458.1946 4043.3193,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="4046.8345,-378.7017 4044.8257,-368.2991 4039.9089,-377.6839 4046.8345,-378.7017"/>
</g>
<!-- raw_69 -->
<g id="node70" class="node">
<title>raw_69</title>
<ellipse fill="none" stroke="#000000" cx="4119.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="4119.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_66&#45;&gt;raw_69 -->
<g id="edge69" class="edge">
<title>prose_66&#45;&gt;raw_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4119.5,-747.0979C4119.5,-681.8206 4119.5,-458.1946 4119.5,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="4123.0001,-378.2991 4119.5,-368.2991 4116.0001,-378.2991 4123.0001,-378.2991"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4558.5,-439.1008 4164.5,-439.1008 4164.5,-261.1002 4558.5,-261.1002 4558.5,-439.1008"/>
<text text-anchor="middle" x="4361.5" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.tokens(node)</text>
<text text-anchor="middle" x="4361.5" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4361.5" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in N.walk(ast) do</text>
<text text-anchor="middle" x="4361.5" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not node[1] then</text>
<text text-anchor="middle" x="4361.5" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(node:toValue())</text>
<text text-anchor="middle" x="4361.5" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4361.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4361.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4361.5" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4361.5" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">end &#160;</text>
</g>
<!-- codeblock_67&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>codeblock_67&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4262.0356,-747.0979C4274.7863,-696.2055 4311.6513,-549.0642 4336.7357,-448.9435"/>
<polygon fill="#000000" stroke="#000000" points="4340.1658,-449.6541 4339.2011,-439.1032 4333.3757,-447.9528 4340.1658,-449.6541"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="4316.5,-71.0015 3922.5,-71.0015 3922.5,-15.1986 4316.5,-15.1986 4316.5,-71.0015"/>
<text text-anchor="middle" x="4119.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Iterator returning all &#39;captured&#39; values as strings.</text>
</g>
<!-- raw_69&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>raw_69&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4119.5,-331.8156C4119.5,-282.8037 4119.5,-147.7087 4119.5,-81.1586"/>
<polygon fill="#000000" stroke="#000000" points="4123.0001,-81.0899 4119.5,-71.0899 4116.0001,-81.09 4123.0001,-81.0899"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="5570.5,-1006.1015 5516.5,-1006.1015 5516.5,-970.1015 5570.5,-970.1015 5570.5,-1006.1015"/>
</g>
<!-- header_72&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>header_72&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5543.5,-1059.6493C5543.5,-1047.2479 5543.5,-1030.5647 5543.5,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="5547.0001,-1016.2266 5543.5,-1006.2266 5540.0001,-1016.2266 5547.0001,-1016.2266"/>
</g>
<!-- raw_81 -->
<g id="node82" class="node">
<title>raw_81</title>
<ellipse fill="none" stroke="#000000" cx="5646.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="5646.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_73&#45;&gt;raw_81 -->
<g id="edge81" class="edge">
<title>prose_73&#45;&gt;raw_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5671.3754,-1060.0796C5666.9597,-1047.3025 5660.9179,-1029.8203 5655.8944,-1015.2847"/>
<polygon fill="#000000" stroke="#000000" points="5659.1864,-1014.0947 5652.6119,-1005.7865 5652.5703,-1016.3812 5659.1864,-1014.0947"/>
</g>
<!-- raw_83 -->
<g id="node84" class="node">
<title>raw_83</title>
<ellipse fill="none" stroke="#000000" cx="5738.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="5738.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_74&#45;&gt;raw_83 -->
<g id="edge83" class="edge">
<title>prose_74&#45;&gt;raw_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5755.2503,-1059.6493C5752.2992,-1047.044 5748.3125,-1030.0148 5744.9688,-1015.7323"/>
<polygon fill="#000000" stroke="#000000" points="5748.3591,-1014.8593 5742.6717,-1005.9205 5741.5434,-1016.4551 5748.3591,-1014.8593"/>
</g>
<!-- raw_85 -->
<g id="node86" class="node">
<title>raw_85</title>
<ellipse fill="none" stroke="#000000" cx="5826.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="5826.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_75&#45;&gt;raw_85 -->
<g id="edge85" class="edge">
<title>prose_75&#45;&gt;raw_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5838.4645,-1059.6493C5836.3907,-1047.2479 5833.6009,-1030.5647 5831.2368,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="5834.6324,-1015.5123 5829.531,-1006.2266 5827.7283,-1016.6669 5834.6324,-1015.5123"/>
</g>
<!-- raw_87 -->
<g id="node88" class="node">
<title>raw_87</title>
<ellipse fill="none" stroke="#000000" cx="6207.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="6207.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_76&#45;&gt;raw_87 -->
<g id="edge87" class="edge">
<title>prose_76&#45;&gt;raw_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6001.2281,-1067.5117C6043.9915,-1051.0487 6127.7016,-1018.8221 6174.259,-1000.8985"/>
<polygon fill="#000000" stroke="#000000" points="6175.8016,-1004.0551 6183.8765,-997.196 6173.2867,-997.5225 6175.8016,-1004.0551"/>
</g>
<!-- raw_89 -->
<g id="node90" class="node">
<title>raw_89</title>
<ellipse fill="none" stroke="#000000" cx="6629.5" cy="-988.1015" rx="27" ry="18"/>
<text text-anchor="middle" x="6629.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_77&#45;&gt;raw_89 -->
<g id="edge89" class="edge">
<title>prose_77&#45;&gt;raw_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6315.744,-1070.1537C6378.6149,-1053.7119 6526.4342,-1015.0548 6594.306,-997.3052"/>
<polygon fill="#000000" stroke="#000000" points="6595.3151,-1000.6591 6604.1042,-994.7429 6593.544,-993.8869 6595.3151,-1000.6591"/>
</g>
<!-- header_91 -->
<g id="node92" class="node">
<title>header_91</title>
<ellipse fill="none" stroke="#000000" cx="7133.5" cy="-988.1015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="7133.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_78&#45;&gt;header_91 -->
<g id="edge91" class="edge">
<title>section_78&#45;&gt;header_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7300.9412,-1064.5264C7267.9586,-1055.1428 7224.7227,-1041.1613 7188.5,-1023.8015 7180.1463,-1019.7979 7171.546,-1014.7324 7163.7001,-1009.6846"/>
<polygon fill="#000000" stroke="#000000" points="7165.4824,-1006.6667 7155.2156,-1004.0505 7161.61,-1012.4981 7165.4824,-1006.6667"/>
</g>
<!-- prose_92 -->
<g id="node93" class="node">
<title>prose_92</title>
<ellipse fill="none" stroke="#000000" cx="7229.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7229.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_78&#45;&gt;prose_92 -->
<g id="edge92" class="edge">
<title>section_78&#45;&gt;prose_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7324.911,-1060.9351C7308.6981,-1050.706 7288.0133,-1037.0981 7270.5,-1023.8015 7264.9443,-1019.5834 7259.1793,-1014.8254 7253.7888,-1010.1908"/>
<polygon fill="#000000" stroke="#000000" points="7256.0553,-1007.5232 7246.2272,-1003.566 7251.4424,-1012.7884 7256.0553,-1007.5232"/>
</g>
<!-- prose_93 -->
<g id="node94" class="node">
<title>prose_93</title>
<ellipse fill="none" stroke="#000000" cx="7311.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7311.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_78&#45;&gt;prose_93 -->
<g id="edge93" class="edge">
<title>section_78&#45;&gt;prose_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7344.203,-1059.6493C7338.3474,-1046.8384 7330.4033,-1029.4582 7323.8111,-1015.0358"/>
<polygon fill="#000000" stroke="#000000" points="7326.846,-1013.2561 7319.5056,-1005.6161 7320.4795,-1016.1661 7326.846,-1013.2561"/>
</g>
<!-- prose_94 -->
<g id="node95" class="node">
<title>prose_94</title>
<ellipse fill="none" stroke="#000000" cx="7393.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7393.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_78&#45;&gt;prose_94 -->
<g id="edge94" class="edge">
<title>section_78&#45;&gt;prose_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7360.797,-1059.6493C7366.6526,-1046.8384 7374.5967,-1029.4582 7381.1889,-1015.0358"/>
<polygon fill="#000000" stroke="#000000" points="7384.5205,-1016.1661 7385.4944,-1005.6161 7378.154,-1013.2561 7384.5205,-1016.1661"/>
</g>
<!-- prose_95 -->
<g id="node96" class="node">
<title>prose_95</title>
<ellipse fill="none" stroke="#000000" cx="7475.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7475.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_78&#45;&gt;prose_95 -->
<g id="edge95" class="edge">
<title>section_78&#45;&gt;prose_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7380.089,-1060.9351C7396.3019,-1050.706 7416.9867,-1037.0981 7434.5,-1023.8015 7440.0557,-1019.5834 7445.8207,-1014.8254 7451.2112,-1010.1908"/>
<polygon fill="#000000" stroke="#000000" points="7453.5576,-1012.7884 7458.7728,-1003.566 7448.9447,-1007.5232 7453.5576,-1012.7884"/>
</g>
<!-- prose_96 -->
<g id="node97" class="node">
<title>prose_96</title>
<ellipse fill="none" stroke="#000000" cx="7668.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7668.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_78&#45;&gt;prose_96 -->
<g id="edge96" class="edge">
<title>section_78&#45;&gt;prose_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7401.1825,-1063.9824C7464.0607,-1046.1338 7572.2448,-1015.4245 7629.8182,-999.0817"/>
<polygon fill="#000000" stroke="#000000" points="7630.9563,-1002.397 7639.6205,-996.2992 7629.0448,-995.663 7630.9563,-1002.397"/>
</g>
<!-- section_97 -->
<g id="node98" class="node">
<title>section_97</title>
<ellipse fill="none" stroke="#000000" cx="8407.5" cy="-988.1015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8407.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 226&#45;238</text>
</g>
<!-- section_78&#45;&gt;section_97 -->
<g id="edge97" class="edge">
<title>section_78&#45;&gt;section_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7423.7718,-1071.7417C7612.8152,-1055.6685 8126.1758,-1012.0207 8326.188,-995.0149"/>
<polygon fill="#000000" stroke="#000000" points="8326.6658,-998.487 8336.3333,-994.1523 8326.0727,-991.5122 8326.6658,-998.487"/>
</g>
<!-- header_123 -->
<g id="node124" class="node">
<title>header_123</title>
<ellipse fill="none" stroke="#000000" cx="10270.5" cy="-988.1015" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="10270.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_79&#45;&gt;header_123 -->
<g id="edge123" class="edge">
<title>section_79&#45;&gt;header_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10566.6409,-1069.869C10507.7333,-1061.847 10420.6489,-1047.2377 10347.5,-1023.8015 10334.9882,-1019.7928 10321.8511,-1014.2457 10310.0421,-1008.7182"/>
<polygon fill="#000000" stroke="#000000" points="10311.4226,-1005.4985 10300.8936,-1004.3192 10308.3891,-1011.8071 10311.4226,-1005.4985"/>
</g>
<!-- prose_124 -->
<g id="node125" class="node">
<title>prose_124</title>
<ellipse fill="none" stroke="#000000" cx="10388.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10388.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_124 -->
<g id="edge124" class="edge">
<title>section_79&#45;&gt;prose_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10569.3635,-1068.5104C10527.6128,-1060.6961 10473.2471,-1046.9665 10429.5,-1023.8015 10423.1113,-1020.4185 10416.8753,-1015.8641 10411.2725,-1011.1421"/>
<polygon fill="#000000" stroke="#000000" points="10413.3497,-1008.303 10403.5729,-1004.2207 10408.67,-1013.5089 10413.3497,-1008.303"/>
</g>
<!-- prose_125 -->
<g id="node126" class="node">
<title>prose_125</title>
<ellipse fill="none" stroke="#000000" cx="10470.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10470.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_125 -->
<g id="edge125" class="edge">
<title>section_79&#45;&gt;prose_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10591.9086,-1062.7896C10567.4614,-1053.2856 10536.7114,-1039.7856 10511.5,-1023.8015 10505.5017,-1019.9985 10499.4871,-1015.3466 10493.9842,-1010.6735"/>
<polygon fill="#000000" stroke="#000000" points="10496.155,-1007.9207 10486.3493,-1003.9081 10491.5125,-1013.1597 10496.155,-1007.9207"/>
</g>
<!-- prose_126 -->
<g id="node127" class="node">
<title>prose_126</title>
<ellipse fill="none" stroke="#000000" cx="10552.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10552.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_126 -->
<g id="edge126" class="edge">
<title>section_79&#45;&gt;prose_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10618.2994,-1060.0796C10605.6601,-1046.2535 10587.9843,-1026.9178 10574.1352,-1011.7682"/>
<polygon fill="#000000" stroke="#000000" points="10576.6192,-1009.2982 10567.2887,-1004.2789 10571.4527,-1014.0212 10576.6192,-1009.2982"/>
</g>
<!-- prose_127 -->
<g id="node128" class="node">
<title>prose_127</title>
<ellipse fill="none" stroke="#000000" cx="10634.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10634.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_127 -->
<g id="edge127" class="edge">
<title>section_79&#45;&gt;prose_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10634.5,-1059.6493C10634.5,-1047.2479 10634.5,-1030.5647 10634.5,-1016.4278"/>
<polygon fill="#000000" stroke="#000000" points="10638.0001,-1016.2266 10634.5,-1006.2266 10631.0001,-1016.2266 10638.0001,-1016.2266"/>
</g>
<!-- prose_128 -->
<g id="node129" class="node">
<title>prose_128</title>
<ellipse fill="none" stroke="#000000" cx="10716.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10716.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_128 -->
<g id="edge128" class="edge">
<title>section_79&#45;&gt;prose_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10650.7006,-1060.0796C10663.3399,-1046.2535 10681.0157,-1026.9178 10694.8648,-1011.7682"/>
<polygon fill="#000000" stroke="#000000" points="10697.5473,-1014.0212 10701.7113,-1004.2789 10692.3808,-1009.2982 10697.5473,-1014.0212"/>
</g>
<!-- prose_129 -->
<g id="node130" class="node">
<title>prose_129</title>
<ellipse fill="none" stroke="#000000" cx="10798.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10798.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_129 -->
<g id="edge129" class="edge">
<title>section_79&#45;&gt;prose_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10677.0914,-1062.7896C10701.5386,-1053.2856 10732.2886,-1039.7856 10757.5,-1023.8015 10763.4983,-1019.9985 10769.5129,-1015.3466 10775.0158,-1010.6735"/>
<polygon fill="#000000" stroke="#000000" points="10777.4875,-1013.1597 10782.6507,-1003.9081 10772.845,-1007.9207 10777.4875,-1013.1597"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="10880.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10880.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_79&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10699.6365,-1068.5104C10741.3872,-1060.6961 10795.7529,-1046.9665 10839.5,-1023.8015 10845.8887,-1020.4185 10852.1247,-1015.8641 10857.7275,-1011.1421"/>
<polygon fill="#000000" stroke="#000000" points="10860.33,-1013.5089 10865.4271,-1004.2207 10855.6503,-1008.303 10860.33,-1013.5089"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="10962.5" cy="-988.1015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10962.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_79&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_79&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10701.2811,-1069.3643C10773.5373,-1059.5127 10883.5156,-1042.206 10921.5,-1023.8015 10928.1198,-1020.594 10934.509,-1016.0306 10940.1945,-1011.2342"/>
<polygon fill="#000000" stroke="#000000" points="10942.9196,-1013.487 10947.9657,-1004.171 10938.2115,-1008.3069 10942.9196,-1013.487"/>
</g>
<!-- codeblock_132 -->
<g id="node133" class="node">
<title>codeblock_132</title>
<ellipse fill="none" stroke="#000000" cx="11100.5" cy="-988.1015" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="11100.5" y="-983.9015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 268&#45;270</text>
</g>
<!-- section_79&#45;&gt;codeblock_132 -->
<g id="edge132" class="edge">
<title>section_79&#45;&gt;codeblock_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10705.7541,-1071.7945C10780.7096,-1064.452 10901.6908,-1049.6874 11003.5,-1023.8015 11019.7744,-1019.6636 11037.112,-1013.7806 11052.5609,-1007.9812"/>
<polygon fill="#000000" stroke="#000000" points="11053.825,-1011.2451 11061.9096,-1004.3974 11051.3194,-1004.7089 11053.825,-1011.2451"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="4924.5,-800.5015 4362.5,-800.5015 4362.5,-729.9008 4924.5,-729.9008 4924.5,-800.5015"/>
<text text-anchor="middle" x="4643.5" y="-753.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="4643.5" y="-738.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- raw_81&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>raw_81&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5627.516,-975.1042C5614.5933,-967.0017 5596.763,-957.2278 5579.5,-952.4014 5302.5632,-874.9752 5210.781,-992.5855 4933.5,-916.4014 4848.3539,-893.0072 4759.6364,-842.2374 4703.109,-805.986"/>
<polygon fill="#000000" stroke="#000000" points="4704.9606,-803.0153 4694.6629,-800.5236 4701.1591,-808.8932 4704.9606,-803.0153"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="5490.5,-800.4016 4942.5,-800.4016 4942.5,-730.0008 5490.5,-730.0008 5490.5,-800.4016"/>
<text text-anchor="middle" x="5216.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="5216.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="5216.5" y="-738.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- raw_83&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>raw_83&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5720.7754,-974.3661C5710.2005,-966.8127 5696.2005,-957.8877 5682.5,-952.4014 5605.5484,-921.5866 5577.5786,-944.2375 5499.5,-916.4014 5419.8114,-887.9913 5335.0706,-840.0741 5279.3194,-805.7946"/>
<polygon fill="#000000" stroke="#000000" points="5280.9712,-802.7009 5270.6258,-800.4152 5277.2878,-808.6534 5280.9712,-802.7009"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="6042.5,-800.4016 5508.5,-800.4016 5508.5,-730.0008 6042.5,-730.0008 6042.5,-800.4016"/>
<text text-anchor="middle" x="5775.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="5775.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="5775.5" y="-738.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- raw_85&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>raw_85&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5822.4127,-970.2374C5814.5403,-935.8304 5797.0589,-859.4263 5785.8009,-810.2223"/>
<polygon fill="#000000" stroke="#000000" points="5789.2102,-809.4302 5783.5679,-800.4627 5782.3865,-810.9915 5789.2102,-809.4302"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="6588,-815.7013 6061,-815.7013 6061,-714.701 6588,-714.701 6588,-815.7013"/>
<text text-anchor="middle" x="6324.5" y="-784.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="6324.5" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="6324.5" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="6324.5" y="-738.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="6324.5" y="-722.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- raw_87&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>raw_87&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6216.4865,-970.981C6232.6567,-940.1746 6267.3663,-874.0484 6293.0977,-825.0267"/>
<polygon fill="#000000" stroke="#000000" points="6296.2427,-826.5657 6297.7913,-816.0847 6290.0446,-823.3124 6296.2427,-826.5657"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="7112.5,-808.4015 6606.5,-808.4015 6606.5,-722.0009 7112.5,-722.0009 7112.5,-808.4015"/>
<text text-anchor="middle" x="6859.5" y="-777.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="6859.5" y="-761.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="6859.5" y="-746.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- raw_89&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>raw_89&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6644.9481,-973.1302C6677.6547,-941.4332 6755.1776,-866.3033 6807.5128,-815.5836"/>
<polygon fill="#000000" stroke="#000000" points="6809.9778,-818.0687 6814.723,-808.5959 6805.1062,-813.042 6809.9778,-818.0687"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="7184.5,-783.2012 7130.5,-783.2012 7130.5,-747.2012 7184.5,-747.2012 7184.5,-783.2012"/>
</g>
<!-- header_91&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>header_91&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7135.464,-969.8606C7139.6496,-930.9868 7149.4727,-839.7552 7154.468,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="7157.9518,-793.6987 7155.5425,-783.3815 7150.992,-792.9493 7157.9518,-793.6987"/>
</g>
<!-- raw_99 -->
<g id="node100" class="node">
<title>raw_99</title>
<ellipse fill="none" stroke="#000000" cx="7229.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="7229.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_92&#45;&gt;raw_99 -->
<g id="edge99" class="edge">
<title>prose_92&#45;&gt;raw_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7229.5,-969.8606C7229.5,-931.0686 7229.5,-840.1391 7229.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="7233.0001,-793.3814 7229.5,-783.3815 7226.0001,-793.3815 7233.0001,-793.3814"/>
</g>
<!-- raw_101 -->
<g id="node102" class="node">
<title>raw_101</title>
<ellipse fill="none" stroke="#000000" cx="7306.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="7306.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_93&#45;&gt;raw_101 -->
<g id="edge101" class="edge">
<title>prose_93&#45;&gt;raw_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7311.0908,-969.8606C7310.2207,-931.0686 7308.181,-840.1391 7307.1383,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="7310.6313,-793.3004 7306.9078,-783.3815 7303.633,-793.4575 7310.6313,-793.3004"/>
</g>
<!-- raw_103 -->
<g id="node104" class="node">
<title>raw_103</title>
<ellipse fill="none" stroke="#000000" cx="7386.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="7386.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_94&#45;&gt;raw_103 -->
<g id="edge103" class="edge">
<title>prose_94&#45;&gt;raw_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7392.9272,-969.8606C7391.7089,-931.0686 7388.8534,-840.1391 7387.3936,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="7390.8832,-793.2667 7387.0709,-783.3815 7383.8866,-793.4864 7390.8832,-793.2667"/>
</g>
<!-- raw_105 -->
<g id="node106" class="node">
<title>raw_105</title>
<ellipse fill="none" stroke="#000000" cx="7475.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="7475.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_95&#45;&gt;raw_105 -->
<g id="edge105" class="edge">
<title>prose_95&#45;&gt;raw_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7475.5,-969.8606C7475.5,-931.0686 7475.5,-840.1391 7475.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="7479.0001,-793.3814 7475.5,-783.3815 7472.0001,-793.3815 7479.0001,-793.3814"/>
</g>
<!-- raw_107 -->
<g id="node108" class="node">
<title>raw_107</title>
<ellipse fill="none" stroke="#000000" cx="7889.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="7889.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_96&#45;&gt;raw_107 -->
<g id="edge107" class="edge">
<title>prose_96&#45;&gt;raw_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7684.3938,-972.071C7723.1271,-933.0046 7822.4838,-832.7936 7867.1554,-787.7379"/>
<polygon fill="#000000" stroke="#000000" points="7869.7817,-790.0602 7874.337,-780.4946 7864.8108,-785.1316 7869.7817,-790.0602"/>
</g>
<!-- header_109 -->
<g id="node110" class="node">
<title>header_109</title>
<ellipse fill="none" stroke="#000000" cx="8207.5" cy="-765.2012" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="8207.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_97&#45;&gt;header_109 -->
<g id="edge109" class="edge">
<title>section_97&#45;&gt;header_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8385.5993,-970.8748C8368.4741,-956.9614 8344.4709,-936.4615 8325.5,-916.4014 8286.8109,-875.4911 8247.7473,-822.6544 8225.6851,-791.4978"/>
<polygon fill="#000000" stroke="#000000" points="8228.5438,-789.4784 8219.9277,-783.3128 8222.8184,-793.5057 8228.5438,-789.4784"/>
</g>
<!-- prose_110 -->
<g id="node111" class="node">
<title>prose_110</title>
<ellipse fill="none" stroke="#000000" cx="8366.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8366.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_97&#45;&gt;prose_110 -->
<g id="edge110" class="edge">
<title>section_97&#45;&gt;prose_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8404.1448,-969.8606C8396.9944,-930.9868 8380.2134,-839.7552 8371.6797,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="8375.0954,-792.5833 8369.8441,-783.3815 8368.2109,-793.8497 8375.0954,-792.5833"/>
</g>
<!-- prose_111 -->
<g id="node112" class="node">
<title>prose_111</title>
<ellipse fill="none" stroke="#000000" cx="8448.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8448.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_97&#45;&gt;prose_111 -->
<g id="edge111" class="edge">
<title>section_97&#45;&gt;prose_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8410.8552,-969.8606C8418.0056,-930.9868 8434.7866,-839.7552 8443.3203,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="8446.7891,-793.8497 8445.1559,-783.3815 8439.9046,-792.5833 8446.7891,-793.8497"/>
</g>
<!-- prose_112 -->
<g id="node113" class="node">
<title>prose_112</title>
<ellipse fill="none" stroke="#000000" cx="8530.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8530.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_97&#45;&gt;prose_112 -->
<g id="edge112" class="edge">
<title>section_97&#45;&gt;prose_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8434.1088,-971.1074C8452.2607,-958.1916 8475.4693,-938.8529 8489.5,-916.4014 8513.5869,-877.8585 8523.6979,-825.207 8527.8154,-793.2899"/>
<polygon fill="#000000" stroke="#000000" points="8531.2968,-793.6524 8528.9935,-783.311 8524.3451,-792.8316 8531.2968,-793.6524"/>
</g>
<!-- prose_113 -->
<g id="node114" class="node">
<title>prose_113</title>
<ellipse fill="none" stroke="#000000" cx="8612.5" cy="-765.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8612.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_97&#45;&gt;prose_113 -->
<g id="edge113" class="edge">
<title>section_97&#45;&gt;prose_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8464.8124,-976.367C8500.3186,-966.2349 8544.2021,-948.0503 8571.5,-916.4014 8601.5045,-881.6145 8609.7639,-826.9108 8611.911,-793.7156"/>
<polygon fill="#000000" stroke="#000000" points="8615.4257,-793.5042 8612.4273,-783.3425 8608.4344,-793.1561 8615.4257,-793.5042"/>
</g>
<!-- leaf_100 -->
<g id="node101" class="node">
<title>leaf_100</title>
<polygon fill="none" stroke="#c0c0c0" points="6159,-400.7014 5646,-400.7014 5646,-299.4996 6159,-299.4996 6159,-400.7014"/>
<text text-anchor="middle" x="5902.5" y="-353.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="5902.5" y="-338.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5902.5" y="-322.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="5902.5" y="-307.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- raw_99&#45;&gt;leaf_100 -->
<g id="edge100" class="edge">
<title>raw_99&#45;&gt;leaf_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7231.4286,-747.2229C7233.7902,-714.7474 7233.3782,-646.6508 7193.5,-614.0009 7105.2387,-541.7379 6273.7401,-619.5346 6167.5,-578.0009 6077.8992,-542.9723 5997.6406,-463.9211 5949.5185,-408.8095"/>
<polygon fill="#000000" stroke="#000000" points="5952.1298,-406.4782 5942.9439,-401.1989 5946.8326,-411.0543 5952.1298,-406.4782"/>
</g>
<!-- leaf_102 -->
<g id="node103" class="node">
<title>leaf_102</title>
<polygon fill="none" stroke="#c0c0c0" points="6662,-377.4009 6177,-377.4009 6177,-322.8001 6662,-322.8001 6662,-377.4009"/>
<text text-anchor="middle" x="6419.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="6419.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- raw_101&#45;&gt;leaf_102 -->
<g id="edge102" class="edge">
<title>raw_101&#45;&gt;leaf_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7307.7126,-746.9958C7308.765,-714.466 7305.6811,-646.7115 7265.5,-614.0009 7162.9442,-530.5126 6793.4122,-629.2398 6671.5,-578.0009 6572.3928,-536.3469 6486.6782,-438.4962 6445.5171,-385.5744"/>
<polygon fill="#000000" stroke="#000000" points="6448.1669,-383.2785 6439.2983,-377.482 6442.6165,-387.5438 6448.1669,-383.2785"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7200.5,-385.3009 6680.5,-385.3009 6680.5,-314.9001 7200.5,-314.9001 7200.5,-385.3009"/>
<text text-anchor="middle" x="6940.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="6940.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="6940.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- raw_103&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>raw_103&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7386.6143,-746.989C7385.7866,-715.3576 7379.3792,-650.1917 7342.5,-614.0009 7298.792,-571.1088 7263.7156,-606.4753 7209.5,-578.0009 7116.7896,-529.3089 7027.8531,-443.9117 6979.0535,-392.6172"/>
<polygon fill="#000000" stroke="#000000" points="6981.5594,-390.173 6972.1491,-385.305 6976.4698,-394.9789 6981.5594,-390.173"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="7732,-392.7016 7219,-392.7016 7219,-307.4995 7732,-307.4995 7732,-392.7016"/>
<text text-anchor="middle" x="7475.5" y="-361.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="7475.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="7475.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="7475.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- raw_105&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>raw_105&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7475.5,-747.0979C7475.5,-687.6121 7475.5,-496.6294 7475.5,-402.9379"/>
<polygon fill="#000000" stroke="#000000" points="7479.0001,-402.8234 7475.5,-392.8234 7472.0001,-402.8234 7479.0001,-402.8234"/>
</g>
<!-- leaf_108 -->
<g id="node109" class="node">
<title>leaf_108</title>
<polygon fill="none" stroke="#c0c0c0" points="8249,-385.4009 7750,-385.4009 7750,-314.8002 8249,-314.8002 8249,-385.4009"/>
<text text-anchor="middle" x="7999.5" y="-354.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="7999.5" y="-338.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- raw_107&#45;&gt;leaf_108 -->
<g id="edge108" class="edge">
<title>raw_107&#45;&gt;leaf_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7894.2266,-747.3648C7910.3586,-686.4881 7963.5719,-485.6804 7987.5727,-395.11"/>
<polygon fill="#000000" stroke="#000000" points="7990.9668,-395.9651 7990.1452,-385.4022 7984.2004,-394.172 7990.9668,-395.9651"/>
</g>
<!-- leaf_114 -->
<g id="node115" class="node">
<title>leaf_114</title>
<polygon fill="none" stroke="#c0c0c0" points="8321.5,-368.1005 8267.5,-368.1005 8267.5,-332.1005 8321.5,-332.1005 8321.5,-368.1005"/>
</g>
<!-- header_109&#45;&gt;leaf_114 -->
<g id="edge114" class="edge">
<title>header_109&#45;&gt;leaf_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8213.0091,-747.0139C8222.9456,-713.7275 8244.0802,-640.663 8257.5,-578.0009 8272.7832,-506.6379 8285.0426,-421.5062 8290.8488,-378.2877"/>
<polygon fill="#000000" stroke="#000000" points="8294.3366,-378.6107 8292.1838,-368.2369 8287.3975,-377.689 8294.3366,-378.6107"/>
</g>
<!-- raw_115 -->
<g id="node116" class="node">
<title>raw_115</title>
<ellipse fill="none" stroke="#000000" cx="8366.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8366.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_110&#45;&gt;raw_115 -->
<g id="edge115" class="edge">
<title>prose_110&#45;&gt;raw_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8366.5,-747.0979C8366.5,-681.8206 8366.5,-458.1946 8366.5,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="8370.0001,-378.2991 8366.5,-368.2991 8363.0001,-378.2991 8370.0001,-378.2991"/>
</g>
<!-- raw_117 -->
<g id="node118" class="node">
<title>raw_117</title>
<ellipse fill="none" stroke="#000000" cx="8443.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8443.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_111&#45;&gt;raw_117 -->
<g id="edge117" class="edge">
<title>prose_111&#45;&gt;raw_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8448.2819,-747.0979C8447.4957,-681.8206 8444.802,-458.1946 8443.8427,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="8447.3395,-378.2562 8443.7192,-368.2991 8440.34,-378.3406 8447.3395,-378.2562"/>
</g>
<!-- raw_119 -->
<g id="node120" class="node">
<title>raw_119</title>
<ellipse fill="none" stroke="#000000" cx="8535.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8535.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_112&#45;&gt;raw_119 -->
<g id="edge119" class="edge">
<title>prose_112&#45;&gt;raw_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8530.7181,-747.0979C8531.5043,-681.8206 8534.198,-458.1946 8535.1573,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="8538.66,-378.3406 8535.2808,-368.2991 8531.6605,-378.2562 8538.66,-378.3406"/>
</g>
<!-- raw_121 -->
<g id="node122" class="node">
<title>raw_121</title>
<ellipse fill="none" stroke="#000000" cx="8612.5" cy="-350.1005" rx="27" ry="18"/>
<text text-anchor="middle" x="8612.5" y="-345.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_113&#45;&gt;raw_121 -->
<g id="edge121" class="edge">
<title>prose_113&#45;&gt;raw_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8612.5,-747.0979C8612.5,-681.8206 8612.5,-458.1946 8612.5,-378.5502"/>
<polygon fill="#000000" stroke="#000000" points="8616.0001,-378.2991 8612.5,-368.2991 8609.0001,-378.2991 8616.0001,-378.2991"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="8040.5,-71.0015 7548.5,-71.0015 7548.5,-15.1986 8040.5,-15.1986 8040.5,-71.0015"/>
<text text-anchor="middle" x="7794.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- raw_115&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>raw_115&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8370.0106,-332.125C8377.2903,-288.961 8388.8331,-178.8515 8330.5,-122.2001 8285.338,-78.3401 8111.7719,-95.4478 8049.5,-86.2001 8021.3927,-82.026 7991.5978,-77.2816 7962.6676,-72.5039"/>
<polygon fill="#000000" stroke="#000000" points="7962.9128,-68.9968 7952.4749,-70.8135 7961.7675,-75.9025 7962.9128,-68.9968"/>
</g>
<!-- leaf_118 -->
<g id="node119" class="node">
<title>leaf_118</title>
<polygon fill="none" stroke="#c0c0c0" points="8438.5,-70.4005 8058.5,-70.4005 8058.5,-15.7996 8438.5,-15.7996 8438.5,-70.4005"/>
<text text-anchor="middle" x="8248.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="8248.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- raw_117&#45;&gt;leaf_118 -->
<g id="edge118" class="edge">
<title>raw_117&#45;&gt;leaf_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8445.2923,-332.0563C8448.4308,-290.6022 8450.5711,-187.1503 8402.5,-122.2001 8387.6487,-102.1341 8366.2239,-86.7623 8344.0542,-75.151"/>
<polygon fill="#000000" stroke="#000000" points="8345.374,-71.898 8334.8636,-70.5634 8342.2477,-78.1611 8345.374,-71.898"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="9012,-70.4005 8457,-70.4005 8457,-15.7996 9012,-15.7996 9012,-70.4005"/>
<text text-anchor="middle" x="8734.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="8734.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- raw_119&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>raw_119&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8533.6612,-332.0217C8530.4251,-290.495 8528.0937,-186.9009 8576.5,-122.2001 8591.6686,-101.9254 8613.4817,-86.5017 8636.0775,-74.9086"/>
<polygon fill="#000000" stroke="#000000" points="8637.6595,-78.0311 8645.1035,-70.4919 8634.5828,-71.7434 8637.6595,-78.0311"/>
</g>
<!-- leaf_122 -->
<g id="node123" class="node">
<title>leaf_122</title>
<polygon fill="none" stroke="#c0c0c0" points="9431,-71.0015 9030,-71.0015 9030,-15.1986 9431,-15.1986 9431,-71.0015"/>
<text text-anchor="middle" x="9230.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- raw_121&#45;&gt;leaf_122 -->
<g id="edge122" class="edge">
<title>raw_121&#45;&gt;leaf_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8608.8776,-332.0081C8601.3496,-288.5844 8589.2974,-177.9421 8648.5,-122.2001 8708.9679,-65.2667 8938.3729,-98.5662 9020.5,-86.2001 9045.1928,-82.482 9071.3669,-77.7524 9096.5499,-72.7968"/>
<polygon fill="#000000" stroke="#000000" points="9097.3955,-76.1972 9106.5203,-70.8132 9096.0296,-69.3318 9097.3955,-76.1972"/>
</g>
<!-- leaf_133 -->
<g id="node134" class="node">
<title>leaf_133</title>
<polygon fill="none" stroke="#c0c0c0" points="10297.5,-783.2012 10243.5,-783.2012 10243.5,-747.2012 10297.5,-747.2012 10297.5,-783.2012"/>
</g>
<!-- header_123&#45;&gt;leaf_133 -->
<g id="edge133" class="edge">
<title>header_123&#45;&gt;leaf_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10270.5,-969.8606C10270.5,-931.0686 10270.5,-840.1391 10270.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="10274.0001,-793.3814 10270.5,-783.3815 10267.0001,-793.3815 10274.0001,-793.3814"/>
</g>
<!-- raw_134 -->
<g id="node135" class="node">
<title>raw_134</title>
<ellipse fill="none" stroke="#000000" cx="10365.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10365.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_124&#45;&gt;raw_134 -->
<g id="edge134" class="edge">
<title>prose_124&#45;&gt;raw_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10386.6178,-969.8606C10382.6066,-930.9868 10373.1929,-839.7552 10368.4057,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="10371.8839,-792.9694 10367.3759,-783.3815 10364.9209,-793.6879 10371.8839,-792.9694"/>
</g>
<!-- raw_136 -->
<g id="node137" class="node">
<title>raw_136</title>
<ellipse fill="none" stroke="#000000" cx="10453.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10453.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_125&#45;&gt;raw_136 -->
<g id="edge136" class="edge">
<title>prose_125&#45;&gt;raw_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10469.1088,-969.8606C10466.144,-930.9868 10459.186,-839.7552 10455.6477,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="10459.137,-793.0863 10454.8866,-783.3815 10452.1573,-793.6187 10459.137,-793.0863"/>
</g>
<!-- raw_138 -->
<g id="node139" class="node">
<title>raw_138</title>
<ellipse fill="none" stroke="#000000" cx="10538.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10538.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_126&#45;&gt;raw_138 -->
<g id="edge138" class="edge">
<title>prose_126&#45;&gt;raw_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10551.3543,-969.8606C10548.9179,-931.0686 10543.2067,-840.1391 10540.2871,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="10543.7619,-793.1424 10539.6419,-783.3815 10536.7757,-793.5812 10543.7619,-793.1424"/>
</g>
<!-- raw_140 -->
<g id="node141" class="node">
<title>raw_140</title>
<ellipse fill="none" stroke="#000000" cx="10634.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10634.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_127&#45;&gt;raw_140 -->
<g id="edge140" class="edge">
<title>prose_127&#45;&gt;raw_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10634.5,-969.8606C10634.5,-931.0686 10634.5,-840.1391 10634.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="10638.0001,-793.3814 10634.5,-783.3815 10631.0001,-793.3815 10638.0001,-793.3814"/>
</g>
<!-- raw_142 -->
<g id="node143" class="node">
<title>raw_142</title>
<ellipse fill="none" stroke="#000000" cx="10722.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10722.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_128&#45;&gt;raw_142 -->
<g id="edge142" class="edge">
<title>prose_128&#45;&gt;raw_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10716.991,-969.8606C10718.0352,-931.0686 10720.4828,-840.1391 10721.7341,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="10725.2402,-793.4721 10722.0106,-783.3815 10718.2427,-793.2836 10725.2402,-793.4721"/>
</g>
<!-- raw_144 -->
<g id="node145" class="node">
<title>raw_144</title>
<ellipse fill="none" stroke="#000000" cx="10837.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10837.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_144 -->
<g id="edge144" class="edge">
<title>prose_129&#45;&gt;raw_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10801.6915,-969.8606C10808.4931,-930.9868 10824.4556,-839.7552 10832.573,-793.361"/>
<polygon fill="#000000" stroke="#000000" points="10836.0431,-793.8351 10834.3191,-783.3815 10829.1479,-792.6286 10836.0431,-793.8351"/>
</g>
<!-- raw_146 -->
<g id="node147" class="node">
<title>raw_146</title>
<ellipse fill="none" stroke="#000000" cx="10931.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="10931.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_146 -->
<g id="edge146" class="edge">
<title>prose_130&#45;&gt;raw_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10884.5873,-970.2374C10893.4466,-931.5173 10914.4749,-839.6111 10925.1082,-793.137"/>
<polygon fill="#000000" stroke="#000000" points="10928.5746,-793.6791 10927.3932,-783.1503 10921.7509,-792.1178 10928.5746,-793.6791"/>
</g>
<!-- raw_148 -->
<g id="node149" class="node">
<title>raw_148</title>
<ellipse fill="none" stroke="#000000" cx="11014.5" cy="-765.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="11014.5" y="-761.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_148 -->
<g id="edge148" class="edge">
<title>prose_131&#45;&gt;raw_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10966.6675,-970.2374C10975.7004,-931.5173 10997.141,-839.6111 11007.9829,-793.137"/>
<polygon fill="#000000" stroke="#000000" points="11011.4492,-793.684 11010.3127,-783.1503 11004.6322,-792.0937 11011.4492,-793.684"/>
</g>
<!-- leaf_150 -->
<g id="node151" class="node">
<title>leaf_150</title>
<polygon fill="none" stroke="#c0c0c0" points="11136.5,-783.2012 11064.5,-783.2012 11064.5,-747.2012 11136.5,-747.2012 11136.5,-783.2012"/>
<text text-anchor="middle" x="11100.5" y="-761.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_132&#45;&gt;leaf_150 -->
<g id="edge150" class="edge">
<title>codeblock_132&#45;&gt;leaf_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11100.5,-969.8606C11100.5,-931.0686 11100.5,-840.1391 11100.5,-793.6546"/>
<polygon fill="#000000" stroke="#000000" points="11104.0001,-793.3814 11100.5,-783.3815 11097.0001,-793.3815 11104.0001,-793.3814"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="9213,-393.3008 8658,-393.3008 8658,-306.9002 9213,-306.9002 9213,-393.3008"/>
<text text-anchor="middle" x="8935.5" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="8935.5" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="8935.5" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- raw_134&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>raw_134&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10364.5389,-747.1802C10361.7084,-714.3184 10350.5429,-645.1769 10306.5,-614.0009 10208.138,-544.375 9335.6151,-619.5681 9222.5,-578.0009 9123.2546,-541.5305 9031.9181,-456.3723 8980.0445,-401.1069"/>
<polygon fill="#000000" stroke="#000000" points="8982.3612,-398.4583 8972.9901,-393.5153 8977.2333,-403.2233 8982.3612,-398.4583"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="9793.5,-377.4009 9231.5,-377.4009 9231.5,-322.8001 9793.5,-322.8001 9793.5,-377.4009"/>
<text text-anchor="middle" x="9512.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="9512.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- raw_136&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>raw_136&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10453.3099,-747.1123C10451.8834,-714.4571 10443.7149,-646.079 10401.5,-614.0009 10295.3243,-533.3208 9927.1594,-625.3569 9802.5,-578.0009 9692.9562,-536.3871 9591.8354,-437.8106 9543.0723,-384.9749"/>
<polygon fill="#000000" stroke="#000000" points="9545.5926,-382.5444 9536.2629,-377.5236 9540.4252,-387.2666 9545.5926,-382.5444"/>
</g>
<!-- leaf_139 -->
<g id="node140" class="node">
<title>leaf_139</title>
<polygon fill="none" stroke="#c0c0c0" points="10331.5,-377.4009 9811.5,-377.4009 9811.5,-322.8001 10331.5,-322.8001 10331.5,-377.4009"/>
<text text-anchor="middle" x="10071.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="10071.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- raw_138&#45;&gt;leaf_139 -->
<g id="edge139" class="edge">
<title>raw_138&#45;&gt;leaf_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10538.0637,-747.0877C10536.2781,-715.3135 10527.859,-649.5384 10489.5,-614.0009 10439.5235,-567.7005 10401.2414,-608.8533 10340.5,-578.0009 10242.1348,-528.0384 10148.9307,-435.4521 10102.3838,-385.0325"/>
<polygon fill="#000000" stroke="#000000" points="10104.9243,-382.6244 10095.5898,-377.6126 10099.7616,-387.3515 10104.9243,-382.6244"/>
</g>
<!-- leaf_141 -->
<g id="node142" class="node">
<title>leaf_141</title>
<polygon fill="none" stroke="#c0c0c0" points="10919,-385.3009 10350,-385.3009 10350,-314.9001 10919,-314.9001 10919,-385.3009"/>
<text text-anchor="middle" x="10634.5" y="-354.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="10634.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="10634.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- raw_140&#45;&gt;leaf_141 -->
<g id="edge141" class="edge">
<title>raw_140&#45;&gt;leaf_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10634.5,-747.0979C10634.5,-686.0065 10634.5,-486.2236 10634.5,-395.5683"/>
<polygon fill="#000000" stroke="#000000" points="10638.0001,-395.3287 10634.5,-385.3288 10631.0001,-395.3288 10638.0001,-395.3287"/>
</g>
<!-- leaf_143 -->
<g id="node144" class="node">
<title>leaf_143</title>
<polygon fill="none" stroke="#c0c0c0" points="11485.5,-392.7016 10937.5,-392.7016 10937.5,-307.4995 11485.5,-307.4995 11485.5,-392.7016"/>
<text text-anchor="middle" x="11211.5" y="-361.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="11211.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="11211.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="11211.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- raw_142&#45;&gt;leaf_143 -->
<g id="edge143" class="edge">
<title>raw_142&#45;&gt;leaf_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10726.8472,-747.3223C10735.4915,-715.619 10757.8792,-649.5512 10801.5,-614.0009 10846.6466,-577.2072 10875.7674,-604.7543 10927.5,-578.0009 11018.9407,-530.7126 11108.963,-451.3713 11162.3727,-399.8884"/>
<polygon fill="#000000" stroke="#000000" points="11164.9229,-402.2907 11169.6624,-392.815 11160.0483,-397.2669 11164.9229,-402.2907"/>
</g>
<!-- leaf_145 -->
<g id="node146" class="node">
<title>leaf_145</title>
<polygon fill="none" stroke="#c0c0c0" points="11765,-370.0026 11504,-370.0026 11504,-330.1984 11765,-330.1984 11765,-370.0026"/>
<text text-anchor="middle" x="11634.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- raw_144&#45;&gt;leaf_145 -->
<g id="edge145" class="edge">
<title>raw_144&#45;&gt;leaf_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10838.4406,-747.046C10841.216,-714.283 10852.181,-645.7363 10895.5,-614.0009 11003.073,-535.1935 11380.1219,-646.559 11494.5,-578.0009 11569.768,-532.8854 11610.2021,-430.1853 11626.2144,-379.5047"/>
<polygon fill="#000000" stroke="#000000" points="11629.6027,-380.3929 11629.1795,-369.8065 11622.9086,-378.3462 11629.6027,-380.3929"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="12310,-377.4009 11783,-377.4009 11783,-322.8001 12310,-322.8001 12310,-377.4009"/>
<text text-anchor="middle" x="12046.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="12046.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- raw_146&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>raw_146&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10931.0128,-747.1128C10931.2308,-714.4583 10936.9366,-646.0814 10978.5,-614.0009 11048.4984,-559.9731 11691.0737,-610.0116 11773.5,-578.0009 11878.6051,-537.1828 11972.683,-438.6216 12017.9778,-385.4754"/>
<polygon fill="#000000" stroke="#000000" points="12020.7936,-387.5655 12024.5626,-377.6637 12015.4414,-383.0539 12020.7936,-387.5655"/>
</g>
<!-- leaf_149 -->
<g id="node150" class="node">
<title>leaf_149</title>
<polygon fill="none" stroke="#c0c0c0" points="12876.5,-377.4009 12328.5,-377.4009 12328.5,-322.8001 12876.5,-322.8001 12876.5,-377.4009"/>
<text text-anchor="middle" x="12602.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="12602.5" y="-330.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- raw_148&#45;&gt;leaf_149 -->
<g id="edge149" class="edge">
<title>raw_148&#45;&gt;leaf_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11013.1951,-747.1256C11011.9549,-714.4921 11014.6933,-646.1479 11055.5,-614.0009 11110.6402,-570.5623 12252.6178,-602.2269 12318.5,-578.0009 12427.1403,-538.0522 12525.6576,-438.6635 12572.9561,-385.2985"/>
<polygon fill="#000000" stroke="#000000" points="12575.8693,-387.2849 12579.8298,-377.4582 12570.6057,-382.6702 12575.8693,-387.2849"/>
</g>
</g>
</svg>