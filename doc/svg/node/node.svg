<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="13921pt" height="1352pt"
 viewBox="0.00 0.00 13920.50 1352.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1348.2017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1348.2017 13916.5,-1348.2017 13916.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="607.5" cy="-1326.2017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="607.5" y="-1322.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 272</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="607.5" cy="-1254.2017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="607.5" y="-1250.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;177</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M607.5,-1308.033C607.5,-1300.3326 607.5,-1291.176 607.5,-1282.6183"/>
<polygon fill="#000000" stroke="#000000" points="611.0001,-1282.6149 607.5,-1272.6149 604.0001,-1282.615 611.0001,-1282.6149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="355.5" cy="-1182.2017" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="355.5" y="-1178.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M558.7323,-1242.0456C518.0682,-1231.6679 458.7193,-1215.9603 407.5,-1200.2017 404.5367,-1199.2899 401.4891,-1198.3201 398.4261,-1197.3216"/>
<polygon fill="#000000" stroke="#000000" points="399.269,-1193.9132 388.6753,-1194.0704 397.0548,-1200.5538 399.269,-1193.9132"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="472.5" cy="-1182.2017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="472.5" y="-1178.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;177</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M577.2034,-1238.0434C557.5651,-1227.5697 531.817,-1213.8374 510.7688,-1202.6117"/>
<polygon fill="#000000" stroke="#000000" points="512.2389,-1199.4291 501.7683,-1197.8114 508.9448,-1205.6056 512.2389,-1199.4291"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="607.5" cy="-1182.2017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="607.5" y="-1178.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M607.5,-1236.033C607.5,-1228.3326 607.5,-1219.176 607.5,-1210.6183"/>
<polygon fill="#000000" stroke="#000000" points="611.0001,-1210.6149 607.5,-1200.6149 604.0001,-1210.615 611.0001,-1210.6149"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1311.5" cy="-1182.2017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1311.5" y="-1178.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M669.0507,-1247.9067C799.1366,-1234.6025 1101.4016,-1203.689 1239.8814,-1189.5263"/>
<polygon fill="#000000" stroke="#000000" points="1240.3729,-1192.9944 1249.9649,-1188.495 1239.6606,-1186.0307 1240.3729,-1192.9944"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="5928.5" cy="-1182.2017" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5928.5" y="-1178.0017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 178&#45;237</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M673.3348,-1253.3108C1234.3945,-1245.719 5207.6123,-1191.9562 5842.921,-1183.3596"/>
<polygon fill="#000000" stroke="#000000" points="5842.9685,-1186.8594 5852.9201,-1183.2243 5842.8737,-1179.8601 5842.9685,-1186.8594"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-1128.4031 0,-1128.4031 0,-1072.6002 359,-1072.6002 359,-1128.4031"/>
<text text-anchor="middle" x="179.5" y="-1081.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- block_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>block_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M430.1609,-1170.2754C422.9349,-1168.2452 415.5028,-1166.1604 408.5,-1164.2017 369.7389,-1153.3599 327.2725,-1141.533 289.5507,-1131.0453"/>
<polygon fill="#000000" stroke="#000000" points="290.1298,-1127.5737 279.5577,-1128.2675 288.255,-1134.3179 290.1298,-1127.5737"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="431.5" cy="-1100.5016" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="431.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M574.8082,-1167.026C545.9793,-1153.6435 503.8326,-1134.0788 472.7034,-1119.6285"/>
<polygon fill="#000000" stroke="#000000" points="473.9674,-1116.3565 463.4233,-1115.3206 471.02,-1122.7058 473.9674,-1116.3565"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="550.5" cy="-1100.5016" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="550.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 6&#45;7</text>
</g>
<!-- section_4&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M595.1318,-1164.474C587.3105,-1153.2633 577.0722,-1138.5885 568.3747,-1126.1221"/>
<polygon fill="#000000" stroke="#000000" points="571.2405,-1124.1127 562.6482,-1117.9141 565.4996,-1128.118 571.2405,-1124.1127"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="665.5" cy="-1100.5016" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="665.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 8&#45;12</text>
</g>
<!-- section_4&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M620.0851,-1164.474C627.9896,-1153.3396 638.32,-1138.788 647.1309,-1126.3768"/>
<polygon fill="#000000" stroke="#000000" points="650.0046,-1128.375 652.9394,-1118.1947 644.2967,-1124.3228 650.0046,-1128.375"/>
</g>
<!-- header_15 -->
<g id="node16" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="1087.5" cy="-1100.5016" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="1087.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1271.9689,-1167.7834C1235.2257,-1154.382 1180.2466,-1134.3293 1139.8666,-1119.6014"/>
<polygon fill="#000000" stroke="#000000" points="1141.0473,-1116.3066 1130.4534,-1116.1681 1138.6487,-1122.8828 1141.0473,-1116.3066"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="1246.5" cy="-1100.5016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1246.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 13&#45;18</text>
</g>
<!-- section_5&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1297.396,-1164.474C1288.5375,-1153.3396 1276.9604,-1138.788 1267.0861,-1126.3768"/>
<polygon fill="#000000" stroke="#000000" points="1269.5414,-1123.8412 1260.5765,-1118.1947 1264.0635,-1128.1993 1269.5414,-1123.8412"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="1376.5" cy="-1100.5016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1376.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 19&#45;35</text>
</g>
<!-- section_5&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1325.604,-1164.474C1334.4625,-1153.3396 1346.0396,-1138.788 1355.9139,-1126.3768"/>
<polygon fill="#000000" stroke="#000000" points="1358.9365,-1128.1993 1362.4235,-1118.1947 1353.4586,-1123.8412 1358.9365,-1128.1993"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="1552.5" cy="-1100.5016" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1552.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1352.9294,-1168.1569C1394.0933,-1154.2022 1457.2982,-1132.7755 1501.5189,-1117.7844"/>
<polygon fill="#000000" stroke="#000000" points="1502.8618,-1121.0249 1511.2087,-1114.4996 1500.6144,-1114.3955 1502.8618,-1121.0249"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="2383.5" cy="-1100.5016" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2383.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;159</text>
</g>
<!-- section_5&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1374.9517,-1177.3658C1560.7224,-1163.2077 2103.091,-1121.8724 2305.8354,-1106.4207"/>
<polygon fill="#000000" stroke="#000000" points="2306.1047,-1109.9104 2315.8098,-1105.6605 2305.5727,-1102.9306 2306.1047,-1109.9104"/>
</g>
<!-- header_70 -->
<g id="node71" class="node">
<title>header_70</title>
<ellipse fill="none" stroke="#000000" cx="5462.5" cy="-1100.5016" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="5462.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_70 -->
<g id="edge70" class="edge">
<title>section_6&#45;&gt;header_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5858.8655,-1175.1904C5783.5279,-1166.8932 5660.1408,-1151.2311 5555.5,-1128.2017 5543.2965,-1125.5159 5530.3575,-1122.0611 5518.1338,-1118.5085"/>
<polygon fill="#000000" stroke="#000000" points="5519.0942,-1115.1427 5508.5116,-1115.6511 5517.1015,-1121.8531 5519.0942,-1115.1427"/>
</g>
<!-- block_71 -->
<g id="node72" class="node">
<title>block_71</title>
<ellipse fill="none" stroke="#000000" cx="5630.5" cy="-1100.5016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5630.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 178&#45;182</text>
</g>
<!-- section_6&#45;&gt;block_71 -->
<g id="edge71" class="edge">
<title>section_6&#45;&gt;block_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5870.8993,-1170.3381C5825.3458,-1160.4718 5760.341,-1145.3144 5704.5,-1128.2017 5695.6387,-1125.4861 5686.3004,-1122.2745 5677.3542,-1119.0179"/>
<polygon fill="#000000" stroke="#000000" points="5678.4345,-1115.6856 5667.8415,-1115.4878 5675.9991,-1122.2483 5678.4345,-1115.6856"/>
</g>
<!-- block_72 -->
<g id="node73" class="node">
<title>block_72</title>
<ellipse fill="none" stroke="#000000" cx="5779.5" cy="-1100.5016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5779.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 183&#45;186</text>
</g>
<!-- section_6&#45;&gt;block_72 -->
<g id="edge72" class="edge">
<title>section_6&#45;&gt;block_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5898.3476,-1165.6684C5875.1728,-1152.9611 5842.9962,-1135.318 5817.967,-1121.594"/>
<polygon fill="#000000" stroke="#000000" points="5819.5502,-1118.4705 5809.099,-1116.7314 5816.1846,-1124.6083 5819.5502,-1118.4705"/>
</g>
<!-- block_73 -->
<g id="node74" class="node">
<title>block_73</title>
<ellipse fill="none" stroke="#000000" cx="5928.5" cy="-1100.5016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5928.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 187&#45;190</text>
</g>
<!-- section_6&#45;&gt;block_73 -->
<g id="edge73" class="edge">
<title>section_6&#45;&gt;block_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5928.5,-1164.0698C5928.5,-1153.7039 5928.5,-1140.4764 5928.5,-1128.7746"/>
<polygon fill="#000000" stroke="#000000" points="5932.0001,-1128.5828 5928.5,-1118.5828 5925.0001,-1128.5829 5932.0001,-1128.5828"/>
</g>
<!-- block_74 -->
<g id="node75" class="node">
<title>block_74</title>
<ellipse fill="none" stroke="#000000" cx="6277.5" cy="-1100.5016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6277.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 191&#45;196</text>
</g>
<!-- section_6&#45;&gt;block_74 -->
<g id="edge74" class="edge">
<title>section_6&#45;&gt;block_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5982.6483,-1169.5257C6046.2963,-1154.6258 6151.5942,-1129.9759 6217.6243,-1114.5184"/>
<polygon fill="#000000" stroke="#000000" points="6218.5328,-1117.9004 6227.4718,-1112.2131 6216.9372,-1111.0847 6218.5328,-1117.9004"/>
</g>
<!-- block_75 -->
<g id="node76" class="node">
<title>block_75</title>
<ellipse fill="none" stroke="#000000" cx="6719.5" cy="-1100.5016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6719.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 197&#45;237</text>
</g>
<!-- section_6&#45;&gt;block_75 -->
<g id="edge75" class="edge">
<title>section_6&#45;&gt;block_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5998.0027,-1175.0229C6147.162,-1159.6167 6496.6498,-1123.5192 6647.7755,-1107.9098"/>
<polygon fill="#000000" stroke="#000000" points="6648.2863,-1111.3758 6657.8738,-1106.8668 6647.5671,-1104.4128 6648.2863,-1111.3758"/>
</g>
<!-- section_76 -->
<g id="node77" class="node">
<title>section_76</title>
<ellipse fill="none" stroke="#000000" cx="7582.5" cy="-1100.5016" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7582.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 202&#45;224</text>
</g>
<!-- section_6&#45;&gt;section_76 -->
<g id="edge76" class="edge">
<title>section_6&#45;&gt;section_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6002.5121,-1178.5458C6273.4881,-1165.1608 7210.6206,-1118.8708 7498.0279,-1104.6742"/>
<polygon fill="#000000" stroke="#000000" points="7498.5679,-1108.1519 7508.383,-1104.1627 7498.2225,-1101.1604 7498.5679,-1108.1519"/>
</g>
<!-- section_77 -->
<g id="node78" class="node">
<title>section_77</title>
<ellipse fill="none" stroke="#000000" cx="11513.5" cy="-1100.5016" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11513.5" y="-1096.3016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 238&#45;272</text>
</g>
<!-- section_6&#45;&gt;section_77 -->
<g id="edge77" class="edge">
<title>section_6&#45;&gt;section_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6004.0115,-1181.097C6617.3856,-1172.1243 10776.9261,-1111.2766 11427.8844,-1101.7541"/>
<polygon fill="#000000" stroke="#000000" points="11428.1743,-1105.2503 11438.1221,-1101.6043 11428.0719,-1098.251 11428.1743,-1105.2503"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="458.5,-1012.3015 404.5,-1012.3015 404.5,-976.3015 458.5,-976.3015 458.5,-1012.3015"/>
</g>
<!-- block_9&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_9&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M527.253,-1084.6987C509.9989,-1072.497 486.3043,-1054.7208 467.5,-1036.8016 462.2323,-1031.7818 456.9508,-1026.0409 452.1189,-1020.4366"/>
<polygon fill="#000000" stroke="#000000" points="454.5162,-1017.8475 445.4152,-1012.4233 449.1472,-1022.3391 454.5162,-1017.8475"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="548.5" cy="-994.3015" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="548.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- block_10&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_10&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M646.961,-1083.6739C627.6788,-1066.1716 597.3013,-1038.5982 575.3853,-1018.7052"/>
<polygon fill="#000000" stroke="#000000" points="577.487,-1015.886 567.7301,-1011.7565 572.7823,-1021.0692 577.487,-1015.886"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="692.5,-1012.3015 638.5,-1012.3015 638.5,-976.3015 692.5,-976.3015 692.5,-1012.3015"/>
</g>
<!-- block_10&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_10&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M665.5,-1082.4862C665.5,-1066.085 665.5,-1041.6008 665.5,-1022.5901"/>
<polygon fill="#000000" stroke="#000000" points="669.0001,-1022.4053 665.5,-1012.4053 662.0001,-1022.4054 669.0001,-1022.4053"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="661.5,-884.602 435.5,-884.602 435.5,-846.0008 661.5,-846.0008 661.5,-884.602"/>
<text text-anchor="middle" x="548.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="548.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M548.5,-976.0926C548.5,-954.9447 548.5,-919.7644 548.5,-894.7226"/>
<polygon fill="#000000" stroke="#000000" points="552.0001,-894.6816 548.5,-884.6816 545.0001,-894.6817 552.0001,-894.6816"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1244.5,-1029.5019 710.5,-1029.5019 710.5,-959.1012 1244.5,-959.1012 1244.5,-1029.5019"/>
<text text-anchor="middle" x="977.5" y="-998.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="977.5" y="-982.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="977.5" y="-967.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- block_16&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_16&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1213.1935,-1086.0395C1203.0488,-1081.7071 1191.8452,-1076.9948 1181.5,-1072.8016 1148.7704,-1059.5353 1112.8778,-1045.5403 1080.4472,-1033.0996"/>
<polygon fill="#000000" stroke="#000000" points="1081.5413,-1029.7708 1070.9509,-1029.4631 1079.0379,-1036.3079 1081.5413,-1029.7708"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1339.5" cy="-994.3015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1339.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- block_17&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>block_17&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1370.2235,-1082.4862C1364.4561,-1065.9325 1355.8201,-1041.1446 1349.1714,-1022.061"/>
<polygon fill="#000000" stroke="#000000" points="1352.4026,-1020.6971 1345.8073,-1012.4053 1345.7923,-1023.0001 1352.4026,-1020.6971"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1488.5,-1014.3015 1434.5,-1014.3015 1434.5,-974.3015 1488.5,-974.3015 1488.5,-1014.3015"/>
</g>
<!-- block_17&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_17&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1390.536,-1082.9649C1403.7389,-1066.469 1423.7245,-1041.4988 1439.1256,-1022.2564"/>
<polygon fill="#000000" stroke="#000000" points="1441.896,-1024.3962 1445.4122,-1014.4018 1436.4309,-1020.022 1441.896,-1024.3962"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="1552.5" cy="-994.3015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1552.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_18&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_18&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1552.5,-1082.4862C1552.5,-1066.085 1552.5,-1041.6008 1552.5,-1022.5901"/>
<polygon fill="#000000" stroke="#000000" points="1556.0001,-1022.4053 1552.5,-1012.4053 1549.0001,-1022.4054 1556.0001,-1022.4053"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="1672.5" cy="-994.3015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1672.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 28&#45;35</text>
</g>
<!-- section_18&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_18&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1572.0471,-1083.2024C1592.1272,-1065.4315 1623.522,-1037.6471 1645.8658,-1017.8729"/>
<polygon fill="#000000" stroke="#000000" points="1648.1892,-1020.4905 1653.3581,-1011.2421 1643.55,-1015.2485 1648.1892,-1020.4905"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="1934.5" cy="-994.3015" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1934.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_19&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_19&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2313.5976,-1097.5504C2234.8425,-1092.2799 2104.1745,-1077.6097 1999.5,-1036.8016 1986.9115,-1031.8939 1974.2185,-1024.3161 1963.4316,-1016.9105"/>
<polygon fill="#000000" stroke="#000000" points="1965.4025,-1014.0172 1955.2279,-1011.0627 1961.3393,-1019.7173 1965.4025,-1014.0172"/>
</g>
<!-- block_28 -->
<g id="node29" class="node">
<title>block_28</title>
<ellipse fill="none" stroke="#000000" cx="2064.5" cy="-994.3015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2064.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 36&#45;37</text>
</g>
<!-- section_19&#45;&gt;block_28 -->
<g id="edge28" class="edge">
<title>section_19&#45;&gt;block_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2322.886,-1091.1711C2270.2288,-1081.7055 2192.7059,-1064.4532 2129.5,-1036.8016 2117.437,-1031.5243 2105.1186,-1024.0886 2094.4951,-1016.9093"/>
<polygon fill="#000000" stroke="#000000" points="2096.2168,-1013.8429 2086.0127,-1010.992 2092.2118,-1019.584 2096.2168,-1013.8429"/>
</g>
<!-- block_29 -->
<g id="node30" class="node">
<title>block_29</title>
<ellipse fill="none" stroke="#000000" cx="2194.5" cy="-994.3015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2194.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 38&#45;54</text>
</g>
<!-- section_19&#45;&gt;block_29 -->
<g id="edge29" class="edge">
<title>section_19&#45;&gt;block_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2353.9688,-1083.9079C2320.8982,-1065.3253 2267.2531,-1035.1819 2231.4341,-1015.055"/>
<polygon fill="#000000" stroke="#000000" points="2232.7186,-1011.7621 2222.286,-1009.9147 2229.2895,-1017.8647 2232.7186,-1011.7621"/>
</g>
<!-- block_30 -->
<g id="node31" class="node">
<title>block_30</title>
<ellipse fill="none" stroke="#000000" cx="2383.5" cy="-994.3015" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2383.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 55&#45;159</text>
</g>
<!-- section_19&#45;&gt;block_30 -->
<g id="edge30" class="edge">
<title>section_19&#45;&gt;block_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2383.5,-1082.4862C2383.5,-1066.085 2383.5,-1041.6008 2383.5,-1022.5901"/>
<polygon fill="#000000" stroke="#000000" points="2387.0001,-1022.4053 2383.5,-1012.4053 2380.0001,-1022.4054 2387.0001,-1022.4053"/>
</g>
<!-- section_31 -->
<g id="node32" class="node">
<title>section_31</title>
<ellipse fill="none" stroke="#000000" cx="2598.5" cy="-994.3015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2598.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;98</text>
</g>
<!-- section_19&#45;&gt;section_31 -->
<g id="edge31" class="edge">
<title>section_19&#45;&gt;section_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2416.1539,-1084.3721C2453.9709,-1065.6923 2516.3204,-1034.8945 2557.402,-1014.602"/>
<polygon fill="#000000" stroke="#000000" points="2559.1776,-1017.6288 2566.5934,-1010.0619 2556.0774,-1011.3527 2559.1776,-1017.6288"/>
</g>
<!-- section_32 -->
<g id="node33" class="node">
<title>section_32</title>
<ellipse fill="none" stroke="#000000" cx="2986.5" cy="-994.3015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2986.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;121</text>
</g>
<!-- section_19&#45;&gt;section_32 -->
<g id="edge32" class="edge">
<title>section_19&#45;&gt;section_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2441.5919,-1090.2705C2553.449,-1070.5703 2798.2347,-1027.4587 2917.8985,-1006.3836"/>
<polygon fill="#000000" stroke="#000000" points="2918.795,-1009.7797 2928.0363,-1004.5981 2917.5808,-1002.8858 2918.795,-1009.7797"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="3663.5" cy="-994.3015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3663.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 122&#45;159</text>
</g>
<!-- section_19&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_19&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2450.9647,-1094.9042C2667.7823,-1076.9151 3346.3304,-1020.6167 3581.9368,-1001.0687"/>
<polygon fill="#000000" stroke="#000000" points="3582.4716,-1004.5365 3592.1479,-1000.2215 3581.8927,-997.5605 3582.4716,-1004.5365"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="4322.5" cy="-994.3015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4322.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 160&#45;177</text>
</g>
<!-- section_19&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_19&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2453.4507,-1097.9052C2654.6302,-1090.2931 3252.0478,-1066.6754 3747.5,-1036.8016 3923.3597,-1026.198 4129.1989,-1010.0857 4240.6682,-1001.0515"/>
<polygon fill="#000000" stroke="#000000" points="4241.1444,-1004.5244 4250.8282,-1000.2265 4240.5777,-997.5474 4241.1444,-1004.5244"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1346,-900.5018 1225,-900.5018 1225,-830.101 1346,-830.101 1346,-900.5018"/>
<text text-anchor="middle" x="1285.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="1285.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="1285.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1331.9915,-976.3646C1324.8407,-959.2821 1313.7842,-932.8694 1304.2475,-910.087"/>
<polygon fill="#000000" stroke="#000000" points="1307.3591,-908.4561 1300.2691,-900.5832 1300.902,-911.1591 1307.3591,-908.4561"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1877,-915.8015 1364,-915.8015 1364,-814.8012 1877,-814.8012 1877,-915.8015"/>
<text text-anchor="middle" x="1620.5" y="-884.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="1620.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="1620.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="1620.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="1620.5" y="-823.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- block_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1665.2696,-976.3646C1659.8743,-962.98 1652.1699,-943.8673 1644.6697,-925.261"/>
<polygon fill="#000000" stroke="#000000" points="1647.8828,-923.8701 1640.8979,-915.9039 1641.3904,-926.4872 1647.8828,-923.8701"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="1949.5,-883.3014 1895.5,-883.3014 1895.5,-847.3014 1949.5,-847.3014 1949.5,-883.3014"/>
</g>
<!-- block_28&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_28&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.3068,-978.2573C2015.6849,-963.654 1982.8886,-940.6362 1958.5,-915.8015 1951.5193,-908.6931 1944.8817,-900.1257 1939.2512,-892.0827"/>
<polygon fill="#000000" stroke="#000000" points="1942.0609,-889.9892 1933.5681,-883.6549 1936.2571,-893.9029 1942.0609,-889.9892"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="2044.5" cy="-865.3014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2044.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- block_29&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>block_29&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2174.8901,-977.437C2148.9036,-955.0886 2102.8719,-915.5013 2073.0332,-889.84"/>
<polygon fill="#000000" stroke="#000000" points="2074.9407,-886.8641 2065.0767,-882.9973 2070.3764,-892.1714 2074.9407,-886.8641"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2193.5,-883.3014 2139.5,-883.3014 2139.5,-847.3014 2193.5,-847.3014 2193.5,-883.3014"/>
</g>
<!-- block_29&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_29&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2190.5477,-976.0926C2185.8783,-954.5801 2178.0572,-918.5471 2172.6068,-893.4365"/>
<polygon fill="#000000" stroke="#000000" points="2175.9738,-892.4477 2170.4322,-883.4177 2169.1331,-893.9326 2175.9738,-892.4477"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="2288.5" cy="-865.3014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2288.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;76</text>
</g>
<!-- block_30&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>block_30&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2370.4898,-976.6351C2354.2365,-954.5647 2326.2939,-916.6216 2307.6092,-891.2497"/>
<polygon fill="#000000" stroke="#000000" points="2310.406,-889.1451 2301.6579,-883.1684 2304.7695,-893.296 2310.406,-889.1451"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2437.5,-883.3014 2383.5,-883.3014 2383.5,-847.3014 2437.5,-847.3014 2437.5,-883.3014"/>
</g>
<!-- block_30&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>block_30&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2387.3112,-976.0926C2391.8138,-954.5801 2399.3556,-918.5471 2404.6113,-893.4365"/>
<polygon fill="#000000" stroke="#000000" points="2408.0853,-893.9227 2406.7082,-883.4177 2401.2337,-892.4886 2408.0853,-893.9227"/>
</g>
<!-- header_42 -->
<g id="node43" class="node">
<title>header_42</title>
<ellipse fill="none" stroke="#000000" cx="2525.5" cy="-865.3014" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2525.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkDeep</text>
</g>
<!-- section_31&#45;&gt;header_42 -->
<g id="edge42" class="edge">
<title>section_31&#45;&gt;header_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2588.3497,-976.3646C2575.998,-954.5377 2555.0263,-917.4781 2540.7344,-892.2224"/>
<polygon fill="#000000" stroke="#000000" points="2543.7706,-890.4812 2535.7995,-883.5018 2537.6784,-893.9287 2543.7706,-890.4812"/>
</g>
<!-- block_43 -->
<g id="node44" class="node">
<title>block_43</title>
<ellipse fill="none" stroke="#000000" cx="2669.5" cy="-865.3014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2669.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;81</text>
</g>
<!-- section_31&#45;&gt;block_43 -->
<g id="edge43" class="edge">
<title>section_31&#45;&gt;block_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2608.3722,-976.3646C2620.4004,-954.5107 2640.8332,-917.3863 2654.7347,-892.1286"/>
<polygon fill="#000000" stroke="#000000" points="2657.956,-893.5344 2659.7116,-883.086 2651.8235,-890.1591 2657.956,-893.5344"/>
</g>
<!-- block_44 -->
<g id="node45" class="node">
<title>block_44</title>
<ellipse fill="none" stroke="#000000" cx="2799.5" cy="-865.3014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2799.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 82&#45;98</text>
</g>
<!-- section_31&#45;&gt;block_44 -->
<g id="edge44" class="edge">
<title>section_31&#45;&gt;block_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2628.9292,-978.2973C2656.9747,-963.185 2699.4347,-939.3814 2734.5,-915.8015 2746.8791,-907.4771 2759.9707,-897.5444 2771.1353,-888.6993"/>
<polygon fill="#000000" stroke="#000000" points="2773.6398,-891.1775 2779.2535,-882.1921 2769.2617,-885.7155 2773.6398,-891.1775"/>
</g>
<!-- header_49 -->
<g id="node50" class="node">
<title>header_49</title>
<ellipse fill="none" stroke="#000000" cx="2922.5" cy="-865.3014" rx="48.8618" ry="18"/>
<text text-anchor="middle" x="2922.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walk</text>
</g>
<!-- section_32&#45;&gt;header_49 -->
<g id="edge49" class="edge">
<title>section_32&#45;&gt;header_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2977.6011,-976.3646C2966.7588,-954.5107 2948.3405,-917.3863 2935.8096,-892.1286"/>
<polygon fill="#000000" stroke="#000000" points="2938.9031,-890.4886 2931.3233,-883.086 2932.6324,-893.5996 2938.9031,-890.4886"/>
</g>
<!-- block_50 -->
<g id="node51" class="node">
<title>block_50</title>
<ellipse fill="none" stroke="#000000" cx="3050.5" cy="-865.3014" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="3050.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 99&#45;102</text>
</g>
<!-- section_32&#45;&gt;block_50 -->
<g id="edge50" class="edge">
<title>section_32&#45;&gt;block_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2995.3989,-976.3646C3006.1803,-954.6335 3024.4528,-917.8029 3036.9786,-892.5554"/>
<polygon fill="#000000" stroke="#000000" points="3040.1613,-894.0155 3041.4703,-883.5018 3033.8906,-890.9044 3040.1613,-894.0155"/>
</g>
<!-- block_51 -->
<g id="node52" class="node">
<title>block_51</title>
<ellipse fill="none" stroke="#000000" cx="3305.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3305.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 103&#45;121</text>
</g>
<!-- section_32&#45;&gt;block_51 -->
<g id="edge51" class="edge">
<title>section_32&#45;&gt;block_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3024.3462,-978.997C3082.8998,-955.3185 3195.3065,-909.8624 3258.8163,-884.1798"/>
<polygon fill="#000000" stroke="#000000" points="3260.2381,-887.3802 3268.1966,-880.3865 3257.6138,-880.8907 3260.2381,-887.3802"/>
</g>
<!-- header_56 -->
<g id="node57" class="node">
<title>header_56</title>
<ellipse fill="none" stroke="#000000" cx="3570.5" cy="-865.3014" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3570.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.select(node, pred)</text>
</g>
<!-- section_33&#45;&gt;header_56 -->
<g id="edge56" class="edge">
<title>section_33&#45;&gt;header_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3650.5687,-976.3646C3634.7641,-954.442 3607.8812,-917.1527 3589.6691,-891.8908"/>
<polygon fill="#000000" stroke="#000000" points="3592.3084,-889.5668 3583.6212,-883.5018 3586.6302,-893.6604 3592.3084,-889.5668"/>
</g>
<!-- block_57 -->
<g id="node58" class="node">
<title>block_57</title>
<ellipse fill="none" stroke="#000000" cx="3756.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3756.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 122&#45;127</text>
</g>
<!-- section_33&#45;&gt;block_57 -->
<g id="edge57" class="edge">
<title>section_33&#45;&gt;block_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3676.4313,-976.3646C3692.3252,-954.3181 3719.423,-916.7309 3737.6388,-891.4638"/>
<polygon fill="#000000" stroke="#000000" points="3740.6696,-893.2446 3743.6786,-883.086 3734.9914,-889.1509 3740.6696,-893.2446"/>
</g>
<!-- block_58 -->
<g id="node59" class="node">
<title>block_58</title>
<ellipse fill="none" stroke="#000000" cx="4135.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4135.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 128&#45;159</text>
</g>
<!-- section_33&#45;&gt;block_58 -->
<g id="edge58" class="edge">
<title>section_33&#45;&gt;block_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3713.5654,-980.6184C3802.1554,-956.4063 3985.9399,-906.177 4078.9535,-880.7558"/>
<polygon fill="#000000" stroke="#000000" points="4080.027,-884.0909 4088.7505,-878.0783 4078.1815,-877.3386 4080.027,-884.0909"/>
</g>
<!-- header_63 -->
<g id="node64" class="node">
<title>header_63</title>
<ellipse fill="none" stroke="#000000" cx="4322.5" cy="-865.3014" rx="82.7165" ry="18"/>
<text text-anchor="middle" x="4322.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.tokens(node)</text>
</g>
<!-- section_34&#45;&gt;header_63 -->
<g id="edge63" class="edge">
<title>section_34&#45;&gt;header_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4322.5,-976.0926C4322.5,-954.5801 4322.5,-918.5471 4322.5,-893.4365"/>
<polygon fill="#000000" stroke="#000000" points="4326.0001,-893.4177 4322.5,-883.4177 4319.0001,-893.4178 4326.0001,-893.4177"/>
</g>
<!-- block_64 -->
<g id="node65" class="node">
<title>block_64</title>
<ellipse fill="none" stroke="#000000" cx="4499.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4499.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 160&#45;163</text>
</g>
<!-- section_34&#45;&gt;block_64 -->
<g id="edge64" class="edge">
<title>section_34&#45;&gt;block_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4346.0042,-977.1713C4377.2998,-954.3627 4432.7623,-913.9408 4467.7528,-888.4392"/>
<polygon fill="#000000" stroke="#000000" points="4470.1605,-891.0154 4476.1805,-882.297 4466.0376,-885.3584 4470.1605,-891.0154"/>
</g>
<!-- block_65 -->
<g id="node66" class="node">
<title>block_65</title>
<ellipse fill="none" stroke="#000000" cx="4811.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4811.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 164&#45;177</text>
</g>
<!-- section_34&#45;&gt;block_65 -->
<g id="edge65" class="edge">
<title>section_34&#45;&gt;block_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4351.2258,-977.4374C4367.0848,-968.7309 4387.39,-958.5487 4406.5,-951.8015 4407.5206,-951.4411 4636.4447,-902.6193 4749.6201,-878.4916"/>
<polygon fill="#000000" stroke="#000000" points="4750.4911,-881.8846 4759.5416,-876.3765 4749.0316,-875.0385 4750.4911,-881.8846"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2000,-739.2019 1515,-739.2019 1515,-516.0003 2000,-516.0003 2000,-739.2019"/>
<text text-anchor="middle" x="1757.5" y="-724.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1757.5" y="-708.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1757.5" y="-693.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1757.5" y="-678.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1757.5" y="-662.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1757.5" y="-647.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1757.5" y="-631.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1757.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1757.5" y="-601.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1757.5" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1757.5" y="-570.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1757.5" y="-554.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1757.5" y="-539.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1757.5" y="-524.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2023.3962,-847.8227C1996.6703,-825.6877 1948.2641,-785.5965 1900.0076,-745.6293"/>
<polygon fill="#000000" stroke="#000000" points="1902.2014,-742.9017 1892.2673,-739.2186 1897.7364,-748.2928 1902.2014,-742.9017"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2412.5,-779.0018 2018.5,-779.0018 2018.5,-476.2003 2412.5,-476.2003 2412.5,-779.0018"/>
<text text-anchor="middle" x="2215.5" y="-763.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="2215.5" y="-748.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="2215.5" y="-732.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2215.5" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="2215.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="2215.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="2215.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="2215.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="2215.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2215.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2215.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="2215.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="2215.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2215.5" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="2215.5" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="2215.5" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2282.893,-847.0441C2278.5942,-833.0464 2272.1953,-812.2106 2265.0245,-788.8613"/>
<polygon fill="#000000" stroke="#000000" points="2268.3017,-787.6103 2262.0201,-779.0785 2261.6102,-789.6654 2268.3017,-787.6103"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2600.5,-647.5031 2430.5,-647.5031 2430.5,-607.699 2600.5,-607.699 2600.5,-647.5031"/>
<text text-anchor="middle" x="2515.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">Depth&#45;first iterator. </text>
</g>
<!-- block_43&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_43&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2656.8252,-847.5879C2644.496,-830.228 2625.3573,-802.9346 2609.5,-778.8013 2581.812,-736.6629 2551.2429,-686.834 2532.7066,-656.2251"/>
<polygon fill="#000000" stroke="#000000" points="2535.5245,-654.1209 2527.3568,-647.3726 2529.5336,-657.7414 2535.5245,-654.1209"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="2695.5" cy="-627.6011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2695.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 82&#45;97</text>
</g>
<!-- block_44&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>block_44&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2791.6831,-847.4352C2773.6518,-806.2233 2729.048,-704.2776 2707.5136,-655.0592"/>
<polygon fill="#000000" stroke="#000000" points="2710.6226,-653.4331 2703.4076,-645.6745 2704.2095,-656.239 2710.6226,-653.4331"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="2844.5,-645.6011 2790.5,-645.6011 2790.5,-609.6011 2844.5,-609.6011 2844.5,-645.6011"/>
</g>
<!-- block_44&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>block_44&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2800.8825,-847.0441C2804.004,-805.823 2811.6161,-705.3011 2815.3555,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="2818.8476,-656.1563 2816.1127,-645.9205 2811.8676,-655.6277 2818.8476,-656.1563"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2899.5,-332.5009 2491.5,-332.5009 2491.5,-107.8999 2899.5,-107.8999 2899.5,-332.5009"/>
<text text-anchor="middle" x="2695.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2695.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2695.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2695.5" y="-255.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2695.5" y="-239.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2695.5" y="-224.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2695.5" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2695.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2695.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2695.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2695.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2695.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2695.5,-609.5699C2695.5,-563.6125 2695.5,-438.9397 2695.5,-342.9304"/>
<polygon fill="#000000" stroke="#000000" points="2699.0001,-342.8497 2695.5,-332.8497 2692.0001,-342.8498 2699.0001,-342.8497"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3200.5,-647.5031 2862.5,-647.5031 2862.5,-607.699 3200.5,-607.699 3200.5,-647.5031"/>
<text text-anchor="middle" x="3031.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">Breadth&#45;first iterator. &#160;This is the default. </text>
</g>
<!-- block_50&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>block_50&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3049.0407,-847.0441C3045.7862,-806.3294 3037.9075,-707.762 3033.911,-657.7636"/>
<polygon fill="#000000" stroke="#000000" points="3037.3831,-657.2735 3033.0973,-647.5842 3030.4053,-657.8313 3037.3831,-657.2735"/>
</g>
<!-- codeblock_53 -->
<g id="node54" class="node">
<title>codeblock_53</title>
<ellipse fill="none" stroke="#000000" cx="3305.5" cy="-627.6011" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="3305.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 103&#45;119</text>
</g>
<!-- block_51&#45;&gt;codeblock_53 -->
<g id="edge53" class="edge">
<title>block_51&#45;&gt;codeblock_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3305.5,-847.0441C3305.5,-805.823 3305.5,-705.3011 3305.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="3309.0001,-655.9205 3305.5,-645.9205 3302.0001,-655.9206 3309.0001,-655.9205"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3464.5,-645.6011 3410.5,-645.6011 3410.5,-609.6011 3464.5,-609.6011 3464.5,-645.6011"/>
</g>
<!-- block_51&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>block_51&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3331.5419,-848.5924C3353.5167,-833.1228 3384.0975,-808.1266 3401.5,-778.8013 3424.4122,-740.1914 3432.7485,-687.9003 3435.7772,-656.021"/>
<polygon fill="#000000" stroke="#000000" points="3439.2986,-655.9085 3436.6423,-645.6521 3432.3229,-655.3264 3439.2986,-655.9085"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="3502.5,-332.5009 3108.5,-332.5009 3108.5,-107.8999 3502.5,-107.8999 3502.5,-332.5009"/>
<text text-anchor="middle" x="3305.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="3305.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3305.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="3305.5" y="-255.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3305.5" y="-239.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3305.5" y="-224.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="3305.5" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3305.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3305.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3305.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3305.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3305.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3305.5,-609.5699C3305.5,-563.6125 3305.5,-438.9397 3305.5,-342.9304"/>
<polygon fill="#000000" stroke="#000000" points="3309.0001,-342.8497 3305.5,-332.8497 3302.0001,-342.8498 3309.0001,-342.8497"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4030.5,-662.8014 3482.5,-662.8014 3482.5,-592.4007 4030.5,-592.4007 4030.5,-662.8014"/>
<text text-anchor="middle" x="3756.5" y="-631.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Takes the Node and walks it, yielding the Nodes which match the predicate.</text>
<text text-anchor="middle" x="3756.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">=pred= is either a string, which matches to =id=, or a function, which takes</text>
<text text-anchor="middle" x="3756.5" y="-600.701" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node and returns true or false on some premise. </text>
</g>
<!-- block_57&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>block_57&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3756.5,-847.0441C3756.5,-810.15 3756.5,-725.7515 3756.5,-673.0341"/>
<polygon fill="#000000" stroke="#000000" points="3760.0001,-672.9365 3756.5,-662.9365 3753.0001,-672.9366 3760.0001,-672.9365"/>
</g>
<!-- codeblock_60 -->
<g id="node61" class="node">
<title>codeblock_60</title>
<ellipse fill="none" stroke="#000000" cx="4135.5" cy="-627.6011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4135.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 128&#45;157</text>
</g>
<!-- block_58&#45;&gt;codeblock_60 -->
<g id="edge60" class="edge">
<title>block_58&#45;&gt;codeblock_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4135.5,-847.0441C4135.5,-805.823 4135.5,-705.3011 4135.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="4139.0001,-655.9205 4135.5,-645.9205 4132.0001,-655.9206 4139.0001,-655.9205"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4294.5,-645.6011 4240.5,-645.6011 4240.5,-609.6011 4294.5,-609.6011 4294.5,-645.6011"/>
</g>
<!-- block_58&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>block_58&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4161.5419,-848.5924C4183.5167,-833.1228 4214.0975,-808.1266 4231.5,-778.8013 4254.4122,-740.1914 4262.7485,-687.9003 4265.7772,-656.021"/>
<polygon fill="#000000" stroke="#000000" points="4269.2986,-655.9085 4266.6423,-645.6521 4262.3229,-655.3264 4269.2986,-655.9085"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="4402.5,-440.6014 3868.5,-440.6014 3868.5,.2006 4402.5,.2006 4402.5,-440.6014"/>
<text text-anchor="middle" x="4135.5" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="4135.5" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="4135.5" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="4135.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; and node.isNode and node.id == pred then</text>
<text text-anchor="middle" x="4135.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="4135.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4135.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="4135.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="4135.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="4135.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4135.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="4135.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4135.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="4135.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="4135.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="4135.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="4135.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="4135.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4135.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4135.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>codeblock_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4135.5,-609.5699C4135.5,-579.8724 4135.5,-517.3056 4135.5,-450.8439"/>
<polygon fill="#000000" stroke="#000000" points="4139.0001,-450.5816 4135.5,-440.5817 4132.0001,-450.5817 4139.0001,-450.5816"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4706.5,-647.5031 4312.5,-647.5031 4312.5,-607.699 4706.5,-607.699 4706.5,-647.5031"/>
<text text-anchor="middle" x="4509.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Iterator returning all &#39;captured&#39; values as strings.</text>
</g>
<!-- block_64&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>block_64&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4500.2681,-847.0441C4501.9809,-806.3294 4506.1276,-707.762 4508.2311,-657.7636"/>
<polygon fill="#000000" stroke="#000000" points="4511.7358,-657.7225 4508.6593,-647.5842 4504.742,-657.4282 4511.7358,-657.7225"/>
</g>
<!-- codeblock_67 -->
<g id="node68" class="node">
<title>codeblock_67</title>
<ellipse fill="none" stroke="#000000" cx="4811.5" cy="-627.6011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4811.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 164&#45;176</text>
</g>
<!-- block_65&#45;&gt;codeblock_67 -->
<g id="edge67" class="edge">
<title>block_65&#45;&gt;codeblock_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4811.5,-847.0441C4811.5,-805.823 4811.5,-705.3011 4811.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="4815.0001,-655.9205 4811.5,-645.9205 4808.0001,-655.9206 4815.0001,-655.9205"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="4970.5,-645.6011 4916.5,-645.6011 4916.5,-609.6011 4970.5,-609.6011 4970.5,-645.6011"/>
</g>
<!-- block_65&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>block_65&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4837.5419,-848.5924C4859.5167,-833.1228 4890.0975,-808.1266 4907.5,-778.8013 4930.4122,-740.1914 4938.7485,-687.9003 4941.7772,-656.021"/>
<polygon fill="#000000" stroke="#000000" points="4945.2986,-655.9085 4942.6423,-645.6521 4938.3229,-655.3264 4945.2986,-655.9085"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="5008.5,-309.2007 4614.5,-309.2007 4614.5,-131.2001 5008.5,-131.2001 5008.5,-309.2007"/>
<text text-anchor="middle" x="4811.5" y="-294.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.tokens(node)</text>
<text text-anchor="middle" x="4811.5" y="-278.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4811.5" y="-263.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in N.walk(ast) do</text>
<text text-anchor="middle" x="4811.5" y="-247.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not node[1] then</text>
<text text-anchor="middle" x="4811.5" y="-232.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(node:toValue())</text>
<text text-anchor="middle" x="4811.5" y="-217.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4811.5" y="-201.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4811.5" y="-186.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4811.5" y="-154.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4811.5" y="-139.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end &#160;</text>
</g>
<!-- codeblock_67&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_67&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4811.5,-609.5699C4811.5,-559.8199 4811.5,-417.8266 4811.5,-319.807"/>
<polygon fill="#000000" stroke="#000000" points="4815.0001,-319.5717 4811.5,-309.5718 4808.0001,-319.5718 4815.0001,-319.5717"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="4977.5,-1021.602 4415.5,-1021.602 4415.5,-967.0011 4977.5,-967.0011 4977.5,-1021.602"/>
<text text-anchor="middle" x="4696.5" y="-990.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="4696.5" y="-975.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- block_71&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>block_71&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5595.6435,-1085.2347C5583.2064,-1080.4329 5568.9441,-1075.6459 5555.5,-1072.8016 5307.5928,-1020.3535 5238.5162,-1063.1955 4986.5,-1036.8016 4950.9962,-1033.0833 4913.1728,-1028.2112 4876.9676,-1023.097"/>
<polygon fill="#000000" stroke="#000000" points="4877.1957,-1019.5942 4866.802,-1021.6489 4876.2084,-1026.5243 4877.1957,-1019.5942"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="5543.5,-1021.502 4995.5,-1021.502 4995.5,-967.1011 5543.5,-967.1011 5543.5,-1021.502"/>
<text text-anchor="middle" x="5269.5" y="-1006.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="5269.5" y="-990.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="5269.5" y="-975.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- block_72&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>block_72&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5743.042,-1085.3675C5731.2138,-1080.8604 5717.9339,-1076.2182 5705.5,-1072.8016 5630.4428,-1052.1777 5546.5885,-1035.5917 5472.6235,-1023.0743"/>
<polygon fill="#000000" stroke="#000000" points="5473.1637,-1019.6161 5462.7224,-1021.4129 5472.0052,-1026.5196 5473.1637,-1019.6161"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="6095.5,-1021.502 5561.5,-1021.502 5561.5,-967.1011 6095.5,-967.1011 6095.5,-1021.502"/>
<text text-anchor="middle" x="5828.5" y="-1006.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="5828.5" y="-990.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="5828.5" y="-975.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- block_73&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>block_73&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5911.987,-1082.9649C5898.2017,-1068.3248 5878.1311,-1047.0098 5861.1237,-1028.948"/>
<polygon fill="#000000" stroke="#000000" points="5863.4532,-1026.3164 5854.0497,-1021.4353 5858.3569,-1031.1151 5863.4532,-1026.3164"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="6641,-1036.8017 6114,-1036.8017 6114,-951.8014 6641,-951.8014 6641,-1036.8017"/>
<text text-anchor="middle" x="6377.5" y="-1021.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="6377.5" y="-1006.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="6377.5" y="-990.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="6377.5" y="-975.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="6377.5" y="-960.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- block_74&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>block_74&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6294.013,-1082.9649C6303.9359,-1072.4267 6317.1155,-1058.4299 6330.0651,-1044.6775"/>
<polygon fill="#000000" stroke="#000000" points="6332.9062,-1046.7657 6337.2134,-1037.0859 6327.8099,-1041.9669 6332.9062,-1046.7657"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="7165.5,-1029.5019 6659.5,-1029.5019 6659.5,-959.1012 7165.5,-959.1012 7165.5,-1029.5019"/>
<text text-anchor="middle" x="6912.5" y="-1014.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="6912.5" y="-998.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="6912.5" y="-983.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- block_75&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>block_75&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6748.8125,-1084.3721C6772.9099,-1071.1124 6808.1037,-1051.7466 6839.6887,-1034.3667"/>
<polygon fill="#000000" stroke="#000000" points="6841.4154,-1037.4114 6848.4893,-1029.524 6838.0408,-1031.2786 6841.4154,-1037.4114"/>
</g>
<!-- header_83 -->
<g id="node84" class="node">
<title>header_83</title>
<ellipse fill="none" stroke="#000000" cx="7229.5" cy="-994.3015" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="7229.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_76&#45;&gt;header_83 -->
<g id="edge83" class="edge">
<title>section_76&#45;&gt;header_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7511.3417,-1094.2925C7449.1309,-1086.8002 7357.5721,-1070.6897 7284.5,-1036.8016 7273.9393,-1031.904 7263.5277,-1024.6624 7254.6525,-1017.5389"/>
<polygon fill="#000000" stroke="#000000" points="7256.8852,-1014.8435 7246.9735,-1011.1008 7252.3879,-1020.2077 7256.8852,-1014.8435"/>
</g>
<!-- block_84 -->
<g id="node85" class="node">
<title>block_84</title>
<ellipse fill="none" stroke="#000000" cx="7359.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7359.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 202&#45;208</text>
</g>
<!-- section_76&#45;&gt;block_84 -->
<g id="edge84" class="edge">
<title>section_76&#45;&gt;block_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7543.3319,-1085.0091C7513.1891,-1072.7601 7470.7019,-1054.7827 7434.5,-1036.8016 7421.6826,-1030.4354 7407.9761,-1022.8952 7395.8331,-1015.9464"/>
<polygon fill="#000000" stroke="#000000" points="7397.3016,-1012.7526 7386.8926,-1010.777 7393.7978,-1018.8125 7397.3016,-1012.7526"/>
</g>
<!-- block_85 -->
<g id="node86" class="node">
<title>block_85</title>
<ellipse fill="none" stroke="#000000" cx="7508.5" cy="-994.3015" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="7508.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 209&#45;211</text>
</g>
<!-- section_76&#45;&gt;block_85 -->
<g id="edge85" class="edge">
<title>section_76&#45;&gt;block_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7569.9469,-1082.4862C7558.075,-1065.4484 7540.1251,-1039.6879 7526.6866,-1020.4018"/>
<polygon fill="#000000" stroke="#000000" points="7529.4564,-1018.2546 7520.8677,-1012.0509 7523.7131,-1022.2565 7529.4564,-1018.2546"/>
</g>
<!-- block_86 -->
<g id="node87" class="node">
<title>block_86</title>
<ellipse fill="none" stroke="#000000" cx="7657.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7657.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 212&#45;215</text>
</g>
<!-- section_76&#45;&gt;block_86 -->
<g id="edge86" class="edge">
<title>section_76&#45;&gt;block_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7595.2227,-1082.4862C7607.2551,-1065.4484 7625.4475,-1039.6879 7639.0676,-1020.4018"/>
<polygon fill="#000000" stroke="#000000" points="7642.0554,-1022.2383 7644.9652,-1012.0509 7636.3375,-1018.2003 7642.0554,-1022.2383"/>
</g>
<!-- block_87 -->
<g id="node88" class="node">
<title>block_87</title>
<ellipse fill="none" stroke="#000000" cx="7806.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7806.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 216&#45;220</text>
</g>
<!-- section_76&#45;&gt;block_87 -->
<g id="edge87" class="edge">
<title>section_76&#45;&gt;block_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7622.2454,-1085.1355C7652.8211,-1072.9536 7695.8934,-1055.0048 7732.5,-1036.8016 7745.1853,-1030.4937 7758.7189,-1022.9682 7770.6971,-1016.015"/>
<polygon fill="#000000" stroke="#000000" points="7772.6621,-1018.92 7779.5139,-1010.839 7769.1182,-1012.8834 7772.6621,-1018.92"/>
</g>
<!-- block_88 -->
<g id="node89" class="node">
<title>block_88</title>
<ellipse fill="none" stroke="#000000" cx="8143.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8143.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 221&#45;224</text>
</g>
<!-- section_76&#45;&gt;block_88 -->
<g id="edge88" class="edge">
<title>section_76&#45;&gt;block_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7641.7409,-1089.287C7747.8515,-1069.1998 7969.4724,-1027.2458 8079.1632,-1006.4808"/>
<polygon fill="#000000" stroke="#000000" points="8079.9277,-1009.8983 8089.1022,-1004.5993 8078.6257,-1003.0205 8079.9277,-1009.8983"/>
</g>
<!-- section_89 -->
<g id="node90" class="node">
<title>section_89</title>
<ellipse fill="none" stroke="#000000" cx="8973.5" cy="-994.3015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8973.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 225&#45;237</text>
</g>
<!-- section_76&#45;&gt;section_89 -->
<g id="edge89" class="edge">
<title>section_76&#45;&gt;section_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7654.8417,-1094.9785C7891.3591,-1076.9209 8640.8733,-1019.6969 8891.1965,-1000.5853"/>
<polygon fill="#000000" stroke="#000000" points="8891.6111,-1004.0639 8901.3156,-999.8127 8891.0781,-997.0842 8891.6111,-1004.0639"/>
</g>
<!-- header_104 -->
<g id="node105" class="node">
<title>header_104</title>
<ellipse fill="none" stroke="#000000" cx="10915.5" cy="-994.3015" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="10915.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_77&#45;&gt;header_104 -->
<g id="edge104" class="edge">
<title>section_77&#45;&gt;header_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11441.3146,-1095.1612C11318.3007,-1085.4834 11073.4047,-1063.55 10991.5,-1036.8016 10976.8141,-1032.0055 10961.7419,-1024.2658 10948.9324,-1016.6969"/>
<polygon fill="#000000" stroke="#000000" points="10950.3999,-1013.4918 10940.0427,-1011.2603 10946.7478,-1019.4636 10950.3999,-1013.4918"/>
</g>
<!-- block_105 -->
<g id="node106" class="node">
<title>block_105</title>
<ellipse fill="none" stroke="#000000" cx="11066.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="11066.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 238&#45;243</text>
</g>
<!-- section_77&#45;&gt;block_105 -->
<g id="edge105" class="edge">
<title>section_77&#45;&gt;block_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11440.4223,-1095.6429C11363.7918,-1088.809 11240.8,-1072.8735 11140.5,-1036.8016 11126.365,-1031.7181 11111.8188,-1023.9947 11099.4044,-1016.5199"/>
<polygon fill="#000000" stroke="#000000" points="11101.1194,-1013.465 11090.7778,-1011.1623 11097.4263,-1019.4115 11101.1194,-1013.465"/>
</g>
<!-- block_106 -->
<g id="node107" class="node">
<title>block_106</title>
<ellipse fill="none" stroke="#000000" cx="11215.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="11215.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 244&#45;246</text>
</g>
<!-- section_77&#45;&gt;block_106 -->
<g id="edge106" class="edge">
<title>section_77&#45;&gt;block_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11456.9737,-1088.4737C11410.8855,-1077.7154 11344.6328,-1060.059 11289.5,-1036.8016 11276.1204,-1031.1575 11262.1384,-1023.6052 11249.9766,-1016.4333"/>
<polygon fill="#000000" stroke="#000000" points="11251.4418,-1013.2296 11241.0713,-1011.0609 11247.8259,-1019.2234 11251.4418,-1013.2296"/>
</g>
<!-- block_107 -->
<g id="node108" class="node">
<title>block_107</title>
<ellipse fill="none" stroke="#000000" cx="11364.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="11364.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 247&#45;249</text>
</g>
<!-- section_77&#45;&gt;block_107 -->
<g id="edge107" class="edge">
<title>section_77&#45;&gt;block_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11489.229,-1083.2024C11463.9696,-1065.1987 11424.2905,-1036.9174 11396.4863,-1017.0999"/>
<polygon fill="#000000" stroke="#000000" points="11398.4425,-1014.1961 11388.2678,-1011.2421 11394.3796,-1019.8964 11398.4425,-1014.1961"/>
</g>
<!-- block_108 -->
<g id="node109" class="node">
<title>block_108</title>
<ellipse fill="none" stroke="#000000" cx="11513.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="11513.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 250&#45;253</text>
</g>
<!-- section_77&#45;&gt;block_108 -->
<g id="edge108" class="edge">
<title>section_77&#45;&gt;block_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11513.5,-1082.4862C11513.5,-1066.085 11513.5,-1041.6008 11513.5,-1022.5901"/>
<polygon fill="#000000" stroke="#000000" points="11517.0001,-1022.4053 11513.5,-1012.4053 11510.0001,-1022.4054 11517.0001,-1022.4053"/>
</g>
<!-- block_109 -->
<g id="node110" class="node">
<title>block_109</title>
<ellipse fill="none" stroke="#000000" cx="11769.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="11769.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 254&#45;258</text>
</g>
<!-- section_77&#45;&gt;block_109 -->
<g id="edge109" class="edge">
<title>section_77&#45;&gt;block_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11551.2737,-1084.8314C11597.1712,-1065.7911 11674.5596,-1033.687 11723.7785,-1013.2689"/>
<polygon fill="#000000" stroke="#000000" points="11725.3334,-1016.4131 11733.229,-1009.3484 11722.6511,-1009.9474 11725.3334,-1016.4131"/>
</g>
<!-- block_110 -->
<g id="node111" class="node">
<title>block_110</title>
<ellipse fill="none" stroke="#000000" cx="12162.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="12162.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 259&#45;260</text>
</g>
<!-- section_77&#45;&gt;block_110 -->
<g id="edge110" class="edge">
<title>section_77&#45;&gt;block_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11576.0234,-1090.2705C11698.8208,-1070.1764 11970.4657,-1025.7254 12096.227,-1005.1462"/>
<polygon fill="#000000" stroke="#000000" points="12096.814,-1008.5968 12106.1175,-1003.5278 12095.6836,-1001.6887 12096.814,-1008.5968"/>
</g>
<!-- block_111 -->
<g id="node112" class="node">
<title>block_111</title>
<ellipse fill="none" stroke="#000000" cx="12565.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="12565.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 261&#45;263</text>
</g>
<!-- section_77&#45;&gt;block_111 -->
<g id="edge111" class="edge">
<title>section_77&#45;&gt;block_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11585.7863,-1095.1308C11716.1704,-1085.223 11999.3195,-1062.6995 12237.5,-1036.8016 12327.3611,-1027.0309 12430.7324,-1013.2062 12497.02,-1004.0079"/>
<polygon fill="#000000" stroke="#000000" points="12497.5064,-1007.474 12506.9286,-1002.6291 12496.5416,-1000.5408 12497.5064,-1007.474"/>
</g>
<!-- block_112 -->
<g id="node113" class="node">
<title>block_112</title>
<ellipse fill="none" stroke="#000000" cx="13044.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="13044.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 264&#45;266</text>
</g>
<!-- section_77&#45;&gt;block_112 -->
<g id="edge112" class="edge">
<title>section_77&#45;&gt;block_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11588.0938,-1097.5342C11768.8277,-1090.0722 12244.4578,-1068.8067 12640.5,-1036.8016 12757.7995,-1027.3224 12893.8269,-1012.144 12974.3327,-1002.7234"/>
<polygon fill="#000000" stroke="#000000" points="12974.8282,-1006.1893 12984.3519,-1001.5471 12974.012,-999.2371 12974.8282,-1006.1893"/>
</g>
<!-- block_113 -->
<g id="node114" class="node">
<title>block_113</title>
<ellipse fill="none" stroke="#000000" cx="13753.5" cy="-994.3015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="13753.5" y="-990.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 267&#45;272</text>
</g>
<!-- section_77&#45;&gt;block_113 -->
<g id="edge113" class="edge">
<title>section_77&#45;&gt;block_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11588.789,-1098.246C11818.4248,-1091.2091 12530.1709,-1068.236 13119.5,-1036.8016 13322.6086,-1025.9679 13562.0177,-1008.694 13680.083,-999.8763"/>
<polygon fill="#000000" stroke="#000000" points="13680.3822,-1003.3638 13690.0931,-999.1272 13679.8598,-996.3833 13680.3822,-1003.3638"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6490,-907.9024 5977,-907.9024 5977,-822.7003 6490,-822.7003 6490,-907.9024"/>
<text text-anchor="middle" x="6233.5" y="-876.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="6233.5" y="-861.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="6233.5" y="-846.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="6233.5" y="-830.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- block_84&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>block_84&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7336.1361,-977.2488C7321.9501,-967.899 7303.0509,-957.1491 7284.5,-951.8015 7116.4916,-903.3699 6672.1536,-936.219 6498.5,-915.8015 6483.4282,-914.0294 6467.9264,-911.8969 6452.3447,-909.5235"/>
<polygon fill="#000000" stroke="#000000" points="6452.5166,-906.0083 6442.0976,-907.9305 6451.4412,-912.9252 6452.5166,-906.0083"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6993,-884.602 6508,-884.602 6508,-846.0008 6993,-846.0008 6993,-884.602"/>
<text text-anchor="middle" x="6750.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="6750.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- block_85&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>block_85&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7485.078,-977.2849C7471.104,-968.0711 7452.604,-957.4461 7434.5,-951.8015 7250.5673,-894.4538 7193.2681,-942.7742 7002.5,-915.8015 6949.8075,-908.3513 6891.516,-896.8819 6844.2793,-886.7555"/>
<polygon fill="#000000" stroke="#000000" points="6844.8867,-883.306 6834.3733,-884.6169 6843.4095,-890.1484 6844.8867,-883.306"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="7531.5,-892.5019 7011.5,-892.5019 7011.5,-838.1009 7531.5,-838.1009 7531.5,-892.5019"/>
<text text-anchor="middle" x="7271.5" y="-877.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="7271.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="7271.5" y="-846.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- block_86&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>block_86&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7631.571,-977.5211C7617.4799,-968.945 7599.502,-958.8582 7582.5,-951.8015 7526.102,-928.3934 7461.3742,-909.2416 7405.6238,-894.9633"/>
<polygon fill="#000000" stroke="#000000" points="7406.236,-891.5079 7395.6827,-892.4443 7404.5166,-898.2934 7406.236,-891.5079"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="8063,-899.9027 7550,-899.9027 7550,-830.7001 8063,-830.7001 8063,-899.9027"/>
<text text-anchor="middle" x="7806.5" y="-884.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="7806.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="7806.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="7806.5" y="-838.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- block_87&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>block_87&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7806.5,-976.0926C7806.5,-958.9881 7806.5,-932.704 7806.5,-910.0291"/>
<polygon fill="#000000" stroke="#000000" points="7810.0001,-909.9108 7806.5,-899.9108 7803.0001,-909.9108 7810.0001,-909.9108"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="8580,-892.6018 8081,-892.6018 8081,-838.001 8580,-838.001 8580,-892.6018"/>
<text text-anchor="middle" x="8330.5" y="-877.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="8330.5" y="-862.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- block_88&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>block_88&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8167.947,-977.437C8196.8178,-957.5208 8245.5348,-923.9138 8282.1243,-898.6729"/>
<polygon fill="#000000" stroke="#000000" points="8284.43,-901.3344 8290.674,-892.775 8280.4552,-895.5724 8284.43,-901.3344"/>
</g>
<!-- header_95 -->
<g id="node96" class="node">
<title>header_95</title>
<ellipse fill="none" stroke="#000000" cx="8706.5" cy="-865.3014" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="8706.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_89&#45;&gt;header_95 -->
<g id="edge95" class="edge">
<title>section_89&#45;&gt;header_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8939.9546,-978.0942C8892.1247,-954.9853 8804.2418,-912.525 8751.0134,-886.8079"/>
<polygon fill="#000000" stroke="#000000" points="8752.3435,-883.5634 8741.8167,-882.3645 8749.2982,-889.8664 8752.3435,-883.5634"/>
</g>
<!-- block_96 -->
<g id="node97" class="node">
<title>block_96</title>
<ellipse fill="none" stroke="#000000" cx="8899.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8899.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 225&#45;228</text>
</g>
<!-- section_89&#45;&gt;block_96 -->
<g id="edge96" class="edge">
<title>section_89&#45;&gt;block_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8963.2106,-976.3646C8950.619,-954.4144 8929.1903,-917.0589 8914.6981,-891.7955"/>
<polygon fill="#000000" stroke="#000000" points="8917.7139,-890.0186 8909.702,-883.086 8911.6419,-893.5017 8917.7139,-890.0186"/>
</g>
<!-- block_97 -->
<g id="node98" class="node">
<title>block_97</title>
<ellipse fill="none" stroke="#000000" cx="9048.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9048.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 229&#45;231</text>
</g>
<!-- section_89&#45;&gt;block_97 -->
<g id="edge97" class="edge">
<title>section_89&#45;&gt;block_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8983.9284,-976.3646C8996.6902,-954.4144 9018.4085,-917.0589 9033.0965,-891.7955"/>
<polygon fill="#000000" stroke="#000000" points="9036.1597,-893.4902 9038.1601,-883.086 9030.1081,-889.9719 9036.1597,-893.4902"/>
</g>
<!-- block_98 -->
<g id="node99" class="node">
<title>block_98</title>
<ellipse fill="none" stroke="#000000" cx="9197.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9197.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 232&#45;234</text>
</g>
<!-- section_89&#45;&gt;block_98 -->
<g id="edge98" class="edge">
<title>section_89&#45;&gt;block_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9007.1786,-978.086C9037.9887,-962.9225 9084.562,-939.168 9123.5,-915.8015 9137.6952,-907.283 9152.8785,-897.1183 9165.7745,-888.1488"/>
<polygon fill="#000000" stroke="#000000" points="9168.1239,-890.7758 9174.2968,-882.165 9164.1014,-885.0469 9168.1239,-890.7758"/>
</g>
<!-- block_99 -->
<g id="node100" class="node">
<title>block_99</title>
<ellipse fill="none" stroke="#000000" cx="9346.5" cy="-865.3014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9346.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 235&#45;237</text>
</g>
<!-- section_89&#45;&gt;block_99 -->
<g id="edge99" class="edge">
<title>section_89&#45;&gt;block_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9036.3094,-984.2794C9098.3192,-972.9114 9194.8564,-951.2033 9272.5,-915.8015 9288.2884,-908.6027 9304.3695,-898.0876 9317.4898,-888.5137"/>
<polygon fill="#000000" stroke="#000000" points="9319.7444,-891.198 9325.6513,-882.4026 9315.5488,-885.5947 9319.7444,-891.198"/>
</g>
<!-- leaf_100 -->
<g id="node101" class="node">
<title>leaf_100</title>
<polygon fill="none" stroke="#c0c0c0" points="8672.5,-647.5031 8180.5,-647.5031 8180.5,-607.699 8672.5,-607.699 8672.5,-647.5031"/>
<text text-anchor="middle" x="8426.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- block_96&#45;&gt;leaf_100 -->
<g id="edge100" class="edge">
<title>block_96&#45;&gt;leaf_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8878.3627,-848.1487C8863.9449,-837.2077 8843.9964,-823.4989 8824.5,-814.8013 8764.6471,-788.1004 8742.0943,-803.774 8681.5,-778.8013 8598.4013,-744.5539 8510.015,-686.6722 8462.2234,-653.3369"/>
<polygon fill="#000000" stroke="#000000" points="8463.9777,-650.292 8453.7825,-647.4094 8459.9548,-656.0206 8463.9777,-650.292"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="9070.5,-646.9016 8690.5,-646.9016 8690.5,-608.3005 9070.5,-608.3005 9070.5,-646.9016"/>
<text text-anchor="middle" x="8880.5" y="-631.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="8880.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- block_97&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>block_97&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9035.8727,-847.4352C9006.7899,-806.2865 8934.914,-704.5905 8900.0671,-655.2862"/>
<polygon fill="#000000" stroke="#000000" points="8902.838,-653.1425 8894.2081,-646.9964 8897.1216,-657.1827 8902.838,-653.1425"/>
</g>
<!-- leaf_102 -->
<g id="node103" class="node">
<title>leaf_102</title>
<polygon fill="none" stroke="#c0c0c0" points="9644,-646.9016 9089,-646.9016 9089,-608.3005 9644,-608.3005 9644,-646.9016"/>
<text text-anchor="middle" x="9366.5" y="-631.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="9366.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- block_98&#45;&gt;leaf_102 -->
<g id="edge102" class="edge">
<title>block_98&#45;&gt;leaf_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9210.2025,-847.4352C9239.4583,-806.2865 9311.7621,-704.5905 9346.8164,-655.2862"/>
<polygon fill="#000000" stroke="#000000" points="9349.7683,-657.1745 9352.7103,-646.9964 9344.0633,-653.1183 9349.7683,-657.1745"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="10063,-647.5031 9662,-647.5031 9662,-607.699 10063,-607.699 10063,-647.5031"/>
<text text-anchor="middle" x="9862.5" y="-632.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- block_99&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>block_99&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9366.4496,-848.033C9380.5944,-836.7492 9400.5384,-822.6908 9420.5,-814.8013 9517.5406,-776.4475 9555.95,-818.3741 9652.5,-778.8013 9725.2662,-748.9768 9796.7074,-689.244 9834.6131,-654.4493"/>
<polygon fill="#000000" stroke="#000000" points="9837.2341,-656.7918 9842.1811,-647.4228 9832.4713,-651.6619 9837.2341,-656.7918"/>
</g>
<!-- leaf_114 -->
<g id="node115" class="node">
<title>leaf_114</title>
<polygon fill="none" stroke="#c0c0c0" points="9985,-900.5018 9430,-900.5018 9430,-830.101 9985,-830.101 9985,-900.5018"/>
<text text-anchor="middle" x="9707.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="9707.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="9707.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- block_105&#45;&gt;leaf_114 -->
<g id="edge114" class="edge">
<title>block_105&#45;&gt;leaf_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11043.8241,-977.4001C11029.8101,-967.9767 11011.0168,-957.0998 10992.5,-951.8015 10779.1406,-890.7511 10215.1971,-939.0861 9994.5,-915.8015 9962.241,-912.398 9928.1377,-907.5315 9895.1377,-902.1484"/>
<polygon fill="#000000" stroke="#000000" points="9895.3718,-898.6397 9884.935,-900.4623 9894.2304,-905.5461 9895.3718,-898.6397"/>
</g>
<!-- leaf_115 -->
<g id="node116" class="node">
<title>leaf_115</title>
<polygon fill="none" stroke="#c0c0c0" points="10565.5,-884.602 10003.5,-884.602 10003.5,-846.0008 10565.5,-846.0008 10565.5,-884.602"/>
<text text-anchor="middle" x="10284.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="10284.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- block_106&#45;&gt;leaf_115 -->
<g id="edge115" class="edge">
<title>block_106&#45;&gt;leaf_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11192.4455,-977.3675C11178.4479,-968.0585 11159.8007,-957.3098 11141.5,-951.8015 10899.7079,-879.0239 10825.2542,-945.5052 10574.5,-915.8015 10513.1073,-908.529 10444.9801,-896.8532 10390.1917,-886.5595"/>
<polygon fill="#000000" stroke="#000000" points="10390.5977,-883.0743 10380.1214,-884.6548 10389.2967,-889.9523 10390.5977,-883.0743"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="11103.5,-884.602 10583.5,-884.602 10583.5,-846.0008 11103.5,-846.0008 11103.5,-884.602"/>
<text text-anchor="middle" x="10843.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="10843.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- block_107&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>block_107&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11339.8341,-977.3782C11325.9062,-968.5442 11307.8564,-958.26 11290.5,-951.8015 11282.5749,-948.8524 11085.4172,-911.1773 10955.6177,-886.5313"/>
<polygon fill="#000000" stroke="#000000" points="10956.0921,-883.0589 10945.6148,-884.6324 10954.7865,-889.9361 10956.0921,-883.0589"/>
</g>
<!-- leaf_117 -->
<g id="node118" class="node">
<title>leaf_117</title>
<polygon fill="none" stroke="#c0c0c0" points="11691,-892.5019 11122,-892.5019 11122,-838.1009 11691,-838.1009 11691,-892.5019"/>
<text text-anchor="middle" x="11406.5" y="-877.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="11406.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="11406.5" y="-846.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- block_108&#45;&gt;leaf_117 -->
<g id="edge117" class="edge">
<title>block_108&#45;&gt;leaf_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11498.8465,-976.6351C11482.6296,-957.0839 11456.0809,-925.0766 11435.6018,-900.3868"/>
<polygon fill="#000000" stroke="#000000" points="11438.265,-898.1152 11429.1868,-892.6528 11432.8772,-902.5842 11438.265,-898.1152"/>
</g>
<!-- leaf_118 -->
<g id="node119" class="node">
<title>leaf_118</title>
<polygon fill="none" stroke="#c0c0c0" points="12257.5,-899.9027 11709.5,-899.9027 11709.5,-830.7001 12257.5,-830.7001 12257.5,-899.9027"/>
<text text-anchor="middle" x="11983.5" y="-884.9015" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="11983.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="11983.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="11983.5" y="-838.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- block_109&#45;&gt;leaf_118 -->
<g id="edge118" class="edge">
<title>block_109&#45;&gt;leaf_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11797.0387,-977.7011C11827.2224,-959.5062 11876.7327,-929.6612 11917.152,-905.2962"/>
<polygon fill="#000000" stroke="#000000" points="11919.1339,-908.1883 11925.8913,-900.0282 11915.5201,-902.1933 11919.1339,-908.1883"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="12537,-883.3014 12276,-883.3014 12276,-847.3014 12537,-847.3014 12537,-883.3014"/>
<text text-anchor="middle" x="12406.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- block_110&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>block_110&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12192.9094,-978.2244C12235.7551,-955.5723 12314.1181,-914.1427 12363.0826,-888.2557"/>
<polygon fill="#000000" stroke="#000000" points="12364.9614,-891.2215 12372.1661,-883.4534 12361.6896,-885.0331 12364.9614,-891.2215"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="13082,-884.602 12555,-884.602 12555,-846.0008 13082,-846.0008 13082,-884.602"/>
<text text-anchor="middle" x="12818.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="12818.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- block_111&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>block_111&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12596.7765,-978.3542C12640.4624,-956.0796 12720.1111,-915.4681 12771.1077,-889.4659"/>
<polygon fill="#000000" stroke="#000000" points="12772.9624,-892.4489 12780.2814,-884.7884 12769.7827,-886.2128 12772.9624,-892.4489"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="13648.5,-884.602 13100.5,-884.602 13100.5,-846.0008 13648.5,-846.0008 13648.5,-884.602"/>
<text text-anchor="middle" x="13374.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="13374.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- block_112&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>block_112&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13082.3552,-979.5036C13139.3966,-957.2056 13247.8775,-914.7994 13315.3949,-888.4061"/>
<polygon fill="#000000" stroke="#000000" points="13317.0089,-891.5332 13325.0483,-884.6325 13314.4603,-885.0136 13317.0089,-891.5332"/>
</g>
<!-- codeblock_122 -->
<g id="node123" class="node">
<title>codeblock_122</title>
<ellipse fill="none" stroke="#000000" cx="13753.5" cy="-865.3014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="13753.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 267&#45;269</text>
</g>
<!-- block_113&#45;&gt;codeblock_122 -->
<g id="edge122" class="edge">
<title>block_113&#45;&gt;codeblock_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13753.5,-976.0926C13753.5,-954.5801 13753.5,-918.5471 13753.5,-893.4365"/>
<polygon fill="#000000" stroke="#000000" points="13757.0001,-893.4177 13753.5,-883.4177 13750.0001,-893.4178 13757.0001,-893.4177"/>
</g>
<!-- leaf_124 -->
<g id="node125" class="node">
<title>leaf_124</title>
<polygon fill="none" stroke="#c0c0c0" points="13912.5,-885.3014 13858.5,-885.3014 13858.5,-845.3014 13912.5,-845.3014 13912.5,-885.3014"/>
</g>
<!-- block_113&#45;&gt;leaf_124 -->
<g id="edge124" class="edge">
<title>block_113&#45;&gt;leaf_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13777.4902,-977.4954C13797.8769,-962.583 13827.285,-939.5365 13849.5,-915.8015 13855.7401,-909.1344 13861.7969,-901.342 13867.1069,-893.9018"/>
<polygon fill="#000000" stroke="#000000" points="13870.1628,-895.6359 13872.9635,-885.4179 13864.4021,-891.6591 13870.1628,-895.6359"/>
</g>
<!-- leaf_123 -->
<g id="node124" class="node">
<title>leaf_123</title>
<polygon fill="none" stroke="#c0c0c0" points="13789.5,-645.6011 13717.5,-645.6011 13717.5,-609.6011 13789.5,-609.6011 13789.5,-645.6011"/>
<text text-anchor="middle" x="13753.5" y="-624.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_122&#45;&gt;leaf_123 -->
<g id="edge123" class="edge">
<title>codeblock_122&#45;&gt;leaf_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13753.5,-847.0441C13753.5,-805.823 13753.5,-705.3011 13753.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="13757.0001,-655.9205 13753.5,-645.9205 13750.0001,-655.9206 13757.0001,-655.9205"/>
</g>
</g>
</svg>