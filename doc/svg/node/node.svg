<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12764pt" height="1000pt"
 viewBox="0.00 0.00 12763.50 1000.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 996.201)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-996.201 12759.5,-996.201 12759.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-974.201" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="597.5" y="-970.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 259</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-902.201" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="597.5" y="-898.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;164</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-956.0324C597.5,-948.332 597.5,-939.1754 597.5,-930.6177"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-930.6143 597.5,-920.6143 594.0001,-930.6143 601.0001,-930.6143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392.5" cy="-830.201" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="392.5" y="-826.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M556.9986,-887.9761C521.908,-875.6516 471.2888,-857.8732 435.4885,-845.2994"/>
<polygon fill="#000000" stroke="#000000" points="436.4039,-841.9114 425.8091,-841.8998 434.0843,-848.5159 436.4039,-841.9114"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="486.5" cy="-830.201" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="486.5" y="-826.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M571.7554,-885.5018C555.176,-874.7476 533.5669,-860.7309 516.2528,-849.5001"/>
<polygon fill="#000000" stroke="#000000" points="517.9338,-846.4187 507.6395,-843.9132 514.1245,-852.2915 517.9338,-846.4187"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-830.201" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="597.5" y="-826.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-884.0324C597.5,-876.332 597.5,-867.1754 597.5,-858.6177"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-858.6143 597.5,-848.6143 594.0001,-858.6143 601.0001,-858.6143"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1439.5" cy="-830.201" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1439.5" y="-826.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;127</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M660.4425,-896.8188C812.0836,-883.8518 1197.2812,-850.9133 1362.4165,-836.7925"/>
<polygon fill="#000000" stroke="#000000" points="1362.8299,-840.27 1372.4953,-835.9306 1362.2334,-833.2955 1362.8299,-840.27"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="5465.5" cy="-830.201" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5465.5" y="-826.001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 165&#45;224</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M663.0893,-901.2309C1193.5531,-893.3851 4777.8511,-840.3717 5379.7918,-831.4687"/>
<polygon fill="#000000" stroke="#000000" points="5380.176,-834.9635 5390.1231,-831.3159 5380.0724,-827.9643 5380.176,-834.9635"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-776.4022 0,-776.4022 0,-704.5999 359,-704.5999 359,-776.4022"/>
<text text-anchor="middle" x="179.5" y="-713.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- prose_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M461.5875,-818.5521C456.3325,-816.2966 450.7796,-814.0596 445.5,-812.201 411.0664,-800.0791 373.5207,-788.8119 337.7793,-778.9674"/>
<polygon fill="#000000" stroke="#000000" points="338.3192,-775.4867 327.7503,-776.2289 336.4752,-782.2395 338.3192,-775.4867"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="431.5" cy="-740.501" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="431.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M567.5044,-814.5417C547.1344,-803.8534 519.6182,-789.3099 495.5,-776.201 486.5294,-771.3252 476.8938,-765.9982 467.8916,-760.9819"/>
<polygon fill="#000000" stroke="#000000" points="469.5858,-757.9193 459.1487,-756.0975 466.1717,-764.0303 469.5858,-757.9193"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="536.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="536.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M585.4484,-812.4792C576.3926,-799.1628 563.8614,-780.7357 553.7453,-765.8601"/>
<polygon fill="#000000" stroke="#000000" points="556.6303,-763.8783 548.1127,-757.5774 550.8419,-767.8147 556.6303,-763.8783"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="658.5" cy="-740.501" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="658.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- section_4&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.5516,-812.4792C618.3502,-799.541 630.4297,-781.7781 640.3872,-767.1357"/>
<polygon fill="#000000" stroke="#000000" points="643.5354,-768.7304 646.2646,-758.4931 637.747,-764.794 643.5354,-768.7304"/>
</g>
<!-- header_13 -->
<g id="node14" class="node">
<title>header_13</title>
<ellipse fill="none" stroke="#000000" cx="1015.5" cy="-740.501" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="1015.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;header_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1373.872,-823.3975C1306.6814,-815.5188 1199.6225,-800.4247 1109.5,-776.201 1093.8731,-772.0007 1077.2385,-766.1616 1062.3749,-760.4211"/>
<polygon fill="#000000" stroke="#000000" points="1063.4784,-757.094 1052.8916,-756.6813 1060.9103,-763.6059 1063.4784,-757.094"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1150.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1150.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1372.3612,-824.4473C1320.9547,-817.975 1249.4369,-804.4008 1192.5,-776.201 1185.6609,-772.8137 1179.0069,-768.0723 1173.0864,-763.1492"/>
<polygon fill="#000000" stroke="#000000" points="1175.3217,-760.4534 1165.5191,-756.4333 1170.6752,-765.6889 1175.3217,-760.4534"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1278.5" cy="-740.501" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1278.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- section_5&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1409.9701,-813.7487C1383.9212,-799.2357 1345.7762,-777.9835 1317.2751,-762.1043"/>
<polygon fill="#000000" stroke="#000000" points="1318.8271,-758.9624 1308.3879,-757.1528 1315.4201,-765.0774 1318.8271,-758.9624"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="1439.5" cy="-740.501" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1439.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1439.5,-812.0489C1439.5,-799.6475 1439.5,-782.9643 1439.5,-768.8273"/>
<polygon fill="#000000" stroke="#000000" points="1443.0001,-768.6261 1439.5,-758.6262 1436.0001,-768.6262 1443.0001,-768.6261"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="1653.5" cy="-740.501" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1653.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;80</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1476.2879,-814.781C1512.7533,-799.4963 1568.6974,-776.0468 1607.9504,-759.5935"/>
<polygon fill="#000000" stroke="#000000" points="1609.6788,-762.6642 1617.5483,-755.5705 1606.9727,-756.2084 1609.6788,-762.6642"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="2187.5" cy="-740.501" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2187.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 81&#45;101</text>
</g>
<!-- section_5&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1503.5974,-822.5145C1641.641,-805.9603 1966.3992,-767.0154 2113.1731,-749.4143"/>
<polygon fill="#000000" stroke="#000000" points="2113.9161,-752.8503 2123.4282,-748.1845 2113.0826,-745.9001 2113.9161,-752.8503"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="2868.5" cy="-740.501" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2868.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 102&#45;127</text>
</g>
<!-- section_5&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1508.4236,-825.8746C1745.5451,-810.9902 2527.2488,-761.9218 2785.1387,-745.7337"/>
<polygon fill="#000000" stroke="#000000" points="2785.4307,-749.2224 2795.1917,-745.1027 2784.9921,-742.2361 2785.4307,-749.2224"/>
</g>
<!-- section_20 -->
<g id="node21" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="3615.5" cy="-740.501" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3615.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 128&#45;164</text>
</g>
<!-- section_5&#45;&gt;section_20 -->
<g id="edge20" class="edge">
<title>section_5&#45;&gt;section_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1509.6505,-828.1495C1725.13,-821.7509 2396.4913,-801.0906 2952.5,-776.201 3160.8327,-766.8751 3405.8243,-752.9011 3531.6163,-745.5061"/>
<polygon fill="#000000" stroke="#000000" points="3532.1622,-748.9801 3541.9392,-744.8983 3531.7507,-741.9922 3532.1622,-748.9801"/>
</g>
<!-- header_48 -->
<g id="node49" class="node">
<title>header_48</title>
<ellipse fill="none" stroke="#000000" cx="5167.5" cy="-740.501" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="5167.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_48 -->
<g id="edge48" class="edge">
<title>section_6&#45;&gt;header_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5411.0816,-817.5801C5369.4973,-807.5239 5310.9388,-792.4718 5260.5,-776.201 5245.9232,-771.4988 5230.3018,-765.7774 5216.1031,-760.3049"/>
<polygon fill="#000000" stroke="#000000" points="5217.1191,-756.9444 5206.5308,-756.5715 5214.5755,-763.4659 5217.1191,-756.9444"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="5301.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5301.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>section_6&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5422.9086,-815.1892C5398.4614,-805.6852 5367.7114,-792.1852 5342.5,-776.201 5336.5017,-772.3981 5330.4871,-767.7462 5324.9842,-763.0731"/>
<polygon fill="#000000" stroke="#000000" points="5327.155,-760.3202 5317.3493,-756.3077 5322.5125,-765.5593 5327.155,-760.3202"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="5383.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5383.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_6&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5449.2994,-812.4792C5436.6601,-798.653 5418.9843,-779.3174 5405.1352,-764.1678"/>
<polygon fill="#000000" stroke="#000000" points="5407.6192,-761.6977 5398.2887,-756.6785 5402.4527,-766.4208 5407.6192,-761.6977"/>
</g>
<!-- prose_51 -->
<g id="node52" class="node">
<title>prose_51</title>
<ellipse fill="none" stroke="#000000" cx="5465.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5465.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_51 -->
<g id="edge51" class="edge">
<title>section_6&#45;&gt;prose_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5465.5,-812.0489C5465.5,-799.6475 5465.5,-782.9643 5465.5,-768.8273"/>
<polygon fill="#000000" stroke="#000000" points="5469.0001,-768.6261 5465.5,-758.6262 5462.0001,-768.6262 5469.0001,-768.6261"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="5664.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5664.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_6&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5501.0772,-814.1645C5537.6117,-797.6964 5594.0858,-772.2405 5630.1615,-755.9792"/>
<polygon fill="#000000" stroke="#000000" points="5631.6371,-759.1533 5639.3154,-751.8531 5628.7605,-752.7716 5631.6371,-759.1533"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="6089.5" cy="-740.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6089.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_6&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5530.2206,-820.8974C5658.4532,-802.464 5941.5829,-761.7641 6047.9905,-746.468"/>
<polygon fill="#000000" stroke="#000000" points="6048.6202,-749.9136 6058.0204,-745.0262 6047.6241,-742.9848 6048.6202,-749.9136"/>
</g>
<!-- section_54 -->
<g id="node55" class="node">
<title>section_54</title>
<ellipse fill="none" stroke="#000000" cx="6968.5" cy="-740.501" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="6968.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 189&#45;211</text>
</g>
<!-- section_6&#45;&gt;section_54 -->
<g id="edge54" class="edge">
<title>section_6&#45;&gt;section_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5538.7553,-825.8291C5790.4149,-810.8099 6618.7237,-761.3759 6885.1582,-745.4749"/>
<polygon fill="#000000" stroke="#000000" points="6885.7595,-748.9453 6895.5332,-744.8557 6885.3424,-741.9578 6885.7595,-748.9453"/>
</g>
<!-- section_55 -->
<g id="node56" class="node">
<title>section_55</title>
<ellipse fill="none" stroke="#000000" cx="10670.5" cy="-740.501" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10670.5" y="-736.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 225&#45;259</text>
</g>
<!-- section_6&#45;&gt;section_55 -->
<g id="edge55" class="edge">
<title>section_6&#45;&gt;section_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5540.8337,-828.9028C6127.675,-818.7895 9961.2472,-752.7239 10584.833,-741.9773"/>
<polygon fill="#000000" stroke="#000000" points="10585.1507,-745.4725 10595.0889,-741.8006 10585.03,-738.4735 10585.1507,-745.4725"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="344.5,-636.3009 290.5,-636.3009 290.5,-600.3009 344.5,-600.3009 344.5,-636.3009"/>
</g>
<!-- prose_9&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>prose_9&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M521.4485,-724.341C514.205,-717.4173 505.032,-709.792 495.5,-704.801 437.8206,-674.6001 407.2398,-705.5575 353.5,-668.801 344.7934,-662.8459 337.4784,-654.0529 331.765,-645.4662"/>
<polygon fill="#000000" stroke="#000000" points="334.6121,-643.4139 326.3996,-636.7202 328.6454,-647.0743 334.6121,-643.4139"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="588.5,-637.6015 362.5,-637.6015 362.5,-599.0003 588.5,-599.0003 588.5,-637.6015"/>
<text text-anchor="middle" x="475.5" y="-622.501" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="475.5" y="-607.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_10&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M633.0546,-723.5096C602.0004,-702.7728 549.2104,-667.5218 513.3764,-643.5933"/>
<polygon fill="#000000" stroke="#000000" points="514.9149,-640.412 504.6549,-637.7694 511.0276,-646.2335 514.9149,-640.412"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1140.5,-661.5012 606.5,-661.5012 606.5,-575.1006 1140.5,-575.1006 1140.5,-661.5012"/>
<text text-anchor="middle" x="873.5" y="-614.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="873.5" y="-598.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="873.5" y="-583.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- prose_14&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prose_14&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1134.8141,-724.4275C1127.585,-717.6857 1118.5999,-710.1801 1109.5,-704.801 1083.8499,-689.6387 1055.0934,-676.411 1026.7124,-665.1645"/>
<polygon fill="#000000" stroke="#000000" points="1027.6955,-661.7914 1017.1069,-661.4265 1025.1568,-668.3149 1027.6955,-661.7914"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1280,-653.5013 1159,-653.5013 1159,-583.1005 1280,-583.1005 1280,-653.5013"/>
<text text-anchor="middle" x="1219.5" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="1219.5" y="-606.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="1219.5" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_15&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1269.7943,-722.47C1262.2335,-706.8101 1250.9647,-683.4703 1241.0092,-662.8505"/>
<polygon fill="#000000" stroke="#000000" points="1244.0453,-661.0888 1236.5454,-653.6052 1237.7415,-664.1324 1244.0453,-661.0888"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-618.3009" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_16&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_16&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1425.5408,-722.7321C1409.2379,-701.9799 1382.1412,-667.488 1363.5811,-643.8625"/>
<polygon fill="#000000" stroke="#000000" points="1366.0952,-641.3971 1357.1652,-635.6956 1360.5906,-645.7215 1366.0952,-641.3971"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="1439.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1439.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_16&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1439.5,-722.47C1439.5,-702.4345 1439.5,-669.828 1439.5,-646.4301"/>
<polygon fill="#000000" stroke="#000000" points="1443.0001,-646.4059 1439.5,-636.4059 1436.0001,-646.406 1443.0001,-646.4059"/>
</g>
<!-- header_26 -->
<g id="node27" class="node">
<title>header_26</title>
<ellipse fill="none" stroke="#000000" cx="1546.5" cy="-618.3009" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1546.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_17&#45;&gt;header_26 -->
<g id="edge26" class="edge">
<title>section_17&#45;&gt;header_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1638.1695,-722.9927C1619.8947,-702.1218 1589.2216,-667.0914 1568.4388,-643.3563"/>
<polygon fill="#000000" stroke="#000000" points="1571.023,-640.9945 1561.8021,-635.7767 1565.7565,-645.6059 1571.023,-640.9945"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="1653.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1653.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.5,-722.47C1653.5,-702.4345 1653.5,-669.828 1653.5,-646.4301"/>
<polygon fill="#000000" stroke="#000000" points="1657.0001,-646.4059 1653.5,-636.4059 1650.0001,-646.406 1657.0001,-646.4059"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="1781.5" cy="-618.3009" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1781.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- section_17&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1671.8393,-722.9927C1693.7656,-702.0599 1730.6114,-666.8836 1755.4763,-643.1455"/>
<polygon fill="#000000" stroke="#000000" points="1757.9623,-645.611 1762.7785,-636.1741 1753.1286,-640.5479 1757.9623,-645.611"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="1954.5" cy="-618.3009" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1954.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;79</text>
</g>
<!-- section_17&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1700.4546,-727.7538C1744.5204,-715.0989 1811.803,-693.9824 1867.5,-668.801 1885.1926,-660.802 1903.9268,-650.2259 1919.4609,-640.8198"/>
<polygon fill="#000000" stroke="#000000" points="1921.5186,-643.6634 1928.2053,-635.4452 1917.8531,-637.6998 1921.5186,-643.6634"/>
</g>
<!-- header_33 -->
<g id="node34" class="node">
<title>header_33</title>
<ellipse fill="none" stroke="#000000" cx="2127.5" cy="-618.3009" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2127.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : N.walkDeep</text>
</g>
<!-- section_18&#45;&gt;header_33 -->
<g id="edge33" class="edge">
<title>section_18&#45;&gt;header_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2178.6468,-722.47C2168.6765,-702.1638 2152.3659,-668.9444 2140.8481,-645.4866"/>
<polygon fill="#000000" stroke="#000000" points="2143.9387,-643.8397 2136.3895,-636.4059 2137.6552,-646.9249 2143.9387,-643.8397"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="2247.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2247.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_18&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2196.3532,-722.47C2206.3808,-702.0471 2222.8218,-668.5621 2234.35,-645.0831"/>
<polygon fill="#000000" stroke="#000000" points="2237.5398,-646.5276 2238.8055,-636.0086 2231.2564,-643.4424 2237.5398,-646.5276"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="2467.5" cy="-618.3009" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2467.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 85&#45;100</text>
</g>
<!-- section_18&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>section_18&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2223.2466,-724.9002C2273.5585,-702.9426 2365.3117,-662.8988 2420.9125,-638.6331"/>
<polygon fill="#000000" stroke="#000000" points="2422.419,-641.7944 2430.1842,-634.5866 2419.619,-635.3788 2422.419,-641.7944"/>
</g>
<!-- header_38 -->
<g id="node39" class="node">
<title>header_38</title>
<ellipse fill="none" stroke="#000000" cx="2791.5" cy="-618.3009" rx="103.9559" ry="18"/>
<text text-anchor="middle" x="2791.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : N.walkBroad, N.walk</text>
</g>
<!-- section_19&#45;&gt;header_38 -->
<g id="edge38" class="edge">
<title>section_19&#45;&gt;header_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2857.1384,-722.47C2844.2863,-702.0735 2823.225,-668.6489 2808.4334,-645.1744"/>
<polygon fill="#000000" stroke="#000000" points="2811.2005,-643.0005 2802.9082,-636.4059 2805.2782,-646.7323 2811.2005,-643.0005"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="2945.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2945.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_19&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2879.8616,-722.47C2892.8614,-701.8391 2914.2603,-667.8788 2929.0742,-644.3689"/>
<polygon fill="#000000" stroke="#000000" points="2932.2204,-645.9411 2934.5904,-635.6147 2926.2981,-642.2093 2932.2204,-645.9411"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3206.5" cy="-618.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3206.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 106&#45;125</text>
</g>
<!-- section_19&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_19&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2910.2844,-725.3943C2971.7307,-703.1791 3086.4329,-661.7098 3153.6502,-637.4082"/>
<polygon fill="#000000" stroke="#000000" points="3154.9968,-640.6431 3163.211,-633.9516 3152.6167,-634.0602 3154.9968,-640.6431"/>
</g>
<!-- header_43 -->
<g id="node44" class="node">
<title>header_43</title>
<ellipse fill="none" stroke="#000000" cx="3539.5" cy="-618.3009" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3539.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : N.select(node, pred)</text>
</g>
<!-- section_20&#45;&gt;header_43 -->
<g id="edge43" class="edge">
<title>section_20&#45;&gt;header_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3604.2859,-722.47C3591.6008,-702.0735 3570.8129,-668.6489 3556.2135,-645.1744"/>
<polygon fill="#000000" stroke="#000000" points="3559.0134,-643.0492 3550.7601,-636.4059 3553.0693,-646.7461 3559.0134,-643.0492"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="3692.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3692.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_20&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3626.8616,-722.47C3639.8614,-701.8391 3661.2603,-667.8788 3676.0742,-644.3689"/>
<polygon fill="#000000" stroke="#000000" points="3679.2204,-645.9411 3681.5904,-635.6147 3673.2981,-642.2093 3679.2204,-645.9411"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="3830.5" cy="-618.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3830.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;163</text>
</g>
<!-- section_20&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_20&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3644.944,-723.7658C3683.0874,-702.0862 3749.6768,-664.2386 3791.8528,-640.2669"/>
<polygon fill="#000000" stroke="#000000" points="3793.7573,-643.2104 3800.7216,-635.2261 3790.2983,-637.1247 3793.7573,-643.2104"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1156,-370.1006 643,-370.1006 643,-253.1003 1156,-253.1003 1156,-370.1006"/>
<text text-anchor="middle" x="899.5" y="-322.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="899.5" y="-307.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="899.5" y="-292.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="899.5" y="-276.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="899.5" y="-261.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- prose_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prose_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1430.0125,-600.9488C1422.8743,-589.6276 1412.0162,-575.559 1398.5,-567.8008 1307.6221,-515.638 1261.0752,-574.7558 1165.5,-531.8008 1085.2369,-495.7277 1009.5672,-428.6305 959.6097,-377.9444"/>
<polygon fill="#000000" stroke="#000000" points="961.919,-375.2996 952.4281,-370.5908 956.9111,-380.1905 961.919,-375.2996"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1228.5,-329.6004 1174.5,-329.6004 1174.5,-293.6004 1228.5,-293.6004 1228.5,-329.6004"/>
</g>
<!-- prose_27&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_27&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1643.8225,-600.6934C1636.5287,-589.2581 1625.4107,-575.1582 1611.5,-567.8008 1537.6922,-528.7641 1298.4585,-588.858 1237.5,-531.8008 1184.5006,-482.1934 1189.8048,-387.2136 1196.4529,-339.874"/>
<polygon fill="#000000" stroke="#000000" points="1199.9533,-340.1366 1198.004,-329.7226 1193.0336,-339.0792 1199.9533,-340.1366"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1732,-423.2012 1247,-423.2012 1247,-199.9996 1732,-199.9996 1732,-423.2012"/>
<text text-anchor="middle" x="1489.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1489.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1489.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1489.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1489.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1489.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1489.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1489.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1489.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1489.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1489.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1489.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1489.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1489.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_28&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1764.5387,-600.4857C1733.2458,-567.6175 1664.0319,-494.919 1602.8697,-430.6777"/>
<polygon fill="#000000" stroke="#000000" points="1605.267,-428.1198 1595.8368,-423.2906 1600.1973,-432.9465 1605.267,-428.1198"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2144.5,-485.7013 1750.5,-485.7013 1750.5,-137.4996 2144.5,-137.4996 2144.5,-485.7013"/>
<text text-anchor="middle" x="1947.5" y="-470.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="1947.5" y="-455.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="1947.5" y="-439.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1947.5" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="1947.5" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="1947.5" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="1947.5" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1947.5" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="1947.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1947.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1947.5" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="1947.5" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="1947.5" y="-253.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1947.5" y="-222.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="1947.5" y="-207.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node.val then</text>
<text text-anchor="middle" x="1947.5" y="-191.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;node.val = node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="1947.5" y="-176.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1947.5" y="-160.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.val</text>
<text text-anchor="middle" x="1947.5" y="-145.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_29&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1954.0831,-600.0339C1953.5807,-578.0202 1952.6815,-538.6236 1951.706,-495.8822"/>
<polygon fill="#000000" stroke="#000000" points="1955.2041,-495.7574 1951.4768,-485.8399 1948.206,-495.9172 1955.2041,-495.7574"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2332.5,-339.5019 2162.5,-339.5019 2162.5,-283.699 2332.5,-283.699 2332.5,-339.5019"/>
<text text-anchor="middle" x="2247.5" y="-292.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">Depth&#45;first iterator. </text>
</g>
<!-- prose_34&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>prose_34&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2247.5,-600.0339C2247.5,-551.0698 2247.5,-416.1069 2247.5,-349.6218"/>
<polygon fill="#000000" stroke="#000000" points="2251.0001,-349.5629 2247.5,-339.563 2244.0001,-349.563 2251.0001,-349.5629"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2758.5,-423.9009 2350.5,-423.9009 2350.5,-199.3 2758.5,-199.3 2758.5,-423.9009"/>
<text text-anchor="middle" x="2554.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2554.5" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2554.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2554.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2554.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2554.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2554.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2554.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2554.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2554.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2554.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2554.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_35&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2472.6817,-600.0339C2481.9197,-567.4671 2501.9495,-496.8563 2519.8779,-433.6535"/>
<polygon fill="#000000" stroke="#000000" points="2523.2587,-434.5603 2522.6206,-423.9847 2516.5244,-432.65 2523.2587,-434.5603"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="3114.5,-339.5019 2776.5,-339.5019 2776.5,-283.699 3114.5,-283.699 3114.5,-339.5019"/>
<text text-anchor="middle" x="2945.5" y="-292.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">Breadth&#45;first iterator. &#160;This is the default. </text>
</g>
<!-- prose_39&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_39&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2945.5,-600.0339C2945.5,-551.0698 2945.5,-416.1069 2945.5,-349.6218"/>
<polygon fill="#000000" stroke="#000000" points="2949.0001,-349.5629 2945.5,-339.563 2942.0001,-349.563 2949.0001,-349.5629"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3526.5,-455.1009 3132.5,-455.1009 3132.5,-168.1 3526.5,-168.1 3526.5,-455.1009"/>
<text text-anchor="middle" x="3329.5" y="-439.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkBroad(node)</text>
<text text-anchor="middle" x="3329.5" y="-424.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3329.5" y="-409.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="3329.5" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3329.5" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3329.5" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="3329.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3329.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3329.5" y="-300.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3329.5" y="-285.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3329.5" y="-253.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3329.5" y="-238.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3329.5" y="-207.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="3329.5" y="-191.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return N.walkBroad(node)</text>
<text text-anchor="middle" x="3329.5" y="-176.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>codeblock_40&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3213.8259,-600.0339C3224.7771,-572.7269 3246.4554,-518.6721 3268.1147,-464.6646"/>
<polygon fill="#000000" stroke="#000000" points="3271.3977,-465.8813 3271.8715,-455.2971 3264.9007,-463.2757 3271.3977,-465.8813"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="4092.5,-354.8008 3544.5,-354.8008 3544.5,-268.4001 4092.5,-268.4001 4092.5,-354.8008"/>
<text text-anchor="middle" x="3818.5" y="-307.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Takes the Node and walks it, yielding the Nodes which match the predicate.</text>
<text text-anchor="middle" x="3818.5" y="-292.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">=pred= is either a string, which matches to =id=, or a function, which takes</text>
<text text-anchor="middle" x="3818.5" y="-276.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node and returns true or false on some premise. </text>
</g>
<!-- prose_44&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prose_44&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3699.8189,-600.4857C3718.4043,-555.2464 3767.9886,-434.5517 3796.8461,-364.3088"/>
<polygon fill="#000000" stroke="#000000" points="3800.2124,-365.325 3800.7751,-354.7451 3793.7375,-362.6649 3800.2124,-365.325"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="4644.5,-532.0014 4110.5,-532.0014 4110.5,-91.1994 4644.5,-91.1994 4644.5,-532.0014"/>
<text text-anchor="middle" x="4377.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="4377.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="4377.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="4377.5" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; and node.isNode and node.id == pred then</text>
<text text-anchor="middle" x="4377.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="4377.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4377.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="4377.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="4377.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="4377.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4377.5" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="4377.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4377.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="4377.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="4377.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="4377.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="4377.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="4377.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="4377.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4377.5" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_45&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3858.1099,-601.102C3876.7987,-590.1415 3902.3853,-576.4282 3926.5,-567.8008 3998.3451,-542.0973 4027.3104,-563.6591 4101.015,-531.7591"/>
<polygon fill="#000000" stroke="#000000" points="4102.5579,-534.9027 4110.2311,-527.597 4099.6768,-528.5231 4102.5579,-534.9027"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4497.5,-653.6013 3935.5,-653.6013 3935.5,-583.0006 4497.5,-583.0006 4497.5,-653.6013"/>
<text text-anchor="middle" x="4216.5" y="-606.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="4216.5" y="-591.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- prose_49&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>prose_49&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5287.6115,-724.1833C5280.3525,-716.8626 5270.8342,-708.9533 5260.5,-704.801 5104.8482,-642.2599 4673.2315,-687.2258 4506.5,-668.801 4474.8519,-665.3037 4441.4312,-660.5175 4408.9753,-655.2769"/>
<polygon fill="#000000" stroke="#000000" points="4409.3704,-651.7951 4398.9368,-653.6368 4408.2416,-658.7035 4409.3704,-651.7951"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="5063.5,-653.5013 4515.5,-653.5013 4515.5,-583.1005 5063.5,-583.1005 5063.5,-653.5013"/>
<text text-anchor="middle" x="4789.5" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="4789.5" y="-606.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="4789.5" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- prose_50&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_50&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5369.0769,-724.1938C5361.8303,-717.0628 5352.4768,-709.3101 5342.5,-704.801 5232.1819,-654.942 5192.1187,-687.439 5072.5,-668.801 5045.7091,-664.6267 5017.5439,-659.9497 4989.7941,-655.1714"/>
<polygon fill="#000000" stroke="#000000" points="4990.0429,-651.6626 4979.5927,-653.4072 4988.8499,-658.5602 4990.0429,-651.6626"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5615.5,-653.5013 5081.5,-653.5013 5081.5,-583.1005 5615.5,-583.1005 5615.5,-653.5013"/>
<text text-anchor="middle" x="5348.5" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="5348.5" y="-606.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="5348.5" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- prose_51&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>prose_51&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5450.2043,-724.5255C5434.789,-708.425 5410.3305,-682.8795 5389.2622,-660.8748"/>
<polygon fill="#000000" stroke="#000000" points="5391.709,-658.3694 5382.2652,-653.5668 5386.6528,-663.2104 5391.709,-658.3694"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="6161,-668.8011 5634,-668.8011 5634,-567.8008 6161,-567.8008 6161,-668.8011"/>
<text text-anchor="middle" x="5897.5" y="-637.601" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="5897.5" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="5897.5" y="-606.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="5897.5" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="5897.5" y="-576.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- prose_52&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>prose_52&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5688.1235,-728.1113C5712.7582,-715.1913 5753.1155,-694.0254 5791.8573,-673.7067"/>
<polygon fill="#000000" stroke="#000000" points="5793.9046,-676.5852 5801.1349,-668.8409 5790.6533,-670.386 5793.9046,-676.5852"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="6685.5,-661.5012 6179.5,-661.5012 6179.5,-575.1006 6685.5,-575.1006 6685.5,-661.5012"/>
<text text-anchor="middle" x="6432.5" y="-630.201" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="6432.5" y="-614.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="6432.5" y="-599.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- prose_53&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>prose_53&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6116.7013,-730.81C6156.6532,-716.5764 6233.8427,-689.0763 6301.9044,-664.828"/>
<polygon fill="#000000" stroke="#000000" points="6303.1975,-668.0829 6311.4429,-661.4298 6300.8482,-661.4889 6303.1975,-668.0829"/>
</g>
<!-- header_61 -->
<g id="node62" class="node">
<title>header_61</title>
<ellipse fill="none" stroke="#000000" cx="6749.5" cy="-618.3009" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="6749.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_54&#45;&gt;header_61 -->
<g id="edge61" class="edge">
<title>section_54&#45;&gt;header_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6924.7375,-725.8814C6890.5087,-713.4058 6842.5121,-693.5677 6804.5,-668.801 6793.1297,-661.3927 6781.8613,-651.5984 6772.5129,-642.6084"/>
<polygon fill="#000000" stroke="#000000" points="6774.7191,-639.8674 6765.1517,-635.316 6769.7927,-644.8403 6774.7191,-639.8674"/>
</g>
<!-- prose_62 -->
<g id="node63" class="node">
<title>prose_62</title>
<ellipse fill="none" stroke="#000000" cx="6845.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6845.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_62 -->
<g id="edge62" class="edge">
<title>section_54&#45;&gt;prose_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6946.7058,-723.1727C6929.6393,-709.2032 6905.6631,-688.6775 6886.5,-668.801 6878.8578,-660.8743 6871.0896,-651.6603 6864.3999,-643.2893"/>
<polygon fill="#000000" stroke="#000000" points="6867.0408,-640.9852 6858.1143,-635.2783 6861.5336,-645.3062 6867.0408,-640.9852"/>
</g>
<!-- prose_63 -->
<g id="node64" class="node">
<title>prose_63</title>
<ellipse fill="none" stroke="#000000" cx="6927.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6927.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_63 -->
<g id="edge63" class="edge">
<title>section_54&#45;&gt;prose_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6962.4503,-722.47C6955.659,-702.2286 6944.5628,-669.1564 6936.6967,-645.7116"/>
<polygon fill="#000000" stroke="#000000" points="6939.9404,-644.3759 6933.4412,-636.0086 6933.304,-646.6026 6939.9404,-644.3759"/>
</g>
<!-- prose_64 -->
<g id="node65" class="node">
<title>prose_64</title>
<ellipse fill="none" stroke="#000000" cx="7009.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7009.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_64 -->
<g id="edge64" class="edge">
<title>section_54&#45;&gt;prose_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6974.5497,-722.47C6981.341,-702.2286 6992.4372,-669.1564 7000.3033,-645.7116"/>
<polygon fill="#000000" stroke="#000000" points="7003.696,-646.6026 7003.5588,-636.0086 6997.0596,-644.3759 7003.696,-646.6026"/>
</g>
<!-- prose_65 -->
<g id="node66" class="node">
<title>prose_65</title>
<ellipse fill="none" stroke="#000000" cx="7091.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7091.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_65 -->
<g id="edge65" class="edge">
<title>section_54&#45;&gt;prose_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6990.2942,-723.1727C7007.3607,-709.2032 7031.3369,-688.6775 7050.5,-668.801 7058.1422,-660.8743 7065.9104,-651.6603 7072.6001,-643.2893"/>
<polygon fill="#000000" stroke="#000000" points="7075.4664,-645.3062 7078.8857,-635.2783 7069.9592,-640.9852 7075.4664,-645.3062"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="7394.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7394.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_54&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_54&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7016.9529,-726.6021C7102.3129,-702.1162 7277.8202,-651.7711 7355.7489,-629.4169"/>
<polygon fill="#000000" stroke="#000000" points="7356.9911,-632.7018 7365.6383,-626.58 7355.0609,-625.9731 7356.9911,-632.7018"/>
</g>
<!-- section_67 -->
<g id="node68" class="node">
<title>section_67</title>
<ellipse fill="none" stroke="#000000" cx="8191.5" cy="-618.3009" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8191.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 212&#45;224</text>
</g>
<!-- section_54&#45;&gt;section_67 -->
<g id="edge67" class="edge">
<title>section_54&#45;&gt;section_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7037.7579,-733.5809C7249.3877,-712.4352 7886.7794,-648.7481 8111.7867,-626.2657"/>
<polygon fill="#000000" stroke="#000000" points="8112.2637,-629.7356 8121.8661,-625.2586 8111.5676,-622.7703 8112.2637,-629.7356"/>
</g>
<!-- header_82 -->
<g id="node83" class="node">
<title>header_82</title>
<ellipse fill="none" stroke="#000000" cx="10306.5" cy="-618.3009" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="10306.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_55&#45;&gt;header_82 -->
<g id="edge82" class="edge">
<title>section_55&#45;&gt;header_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10606.6453,-730.8845C10547.1224,-720.4646 10456.7757,-700.8795 10383.5,-668.801 10367.0063,-661.5804 10350.1219,-650.9389 10336.3829,-641.284"/>
<polygon fill="#000000" stroke="#000000" points="10338.4268,-638.4428 10328.2665,-635.4393 10334.3362,-644.1232 10338.4268,-638.4428"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="10424.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10424.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_55&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10611.7188,-729.0467C10568.4073,-718.5447 10509.611,-699.8057 10465.5,-668.801 10455.9779,-662.1081 10447.4776,-652.6193 10440.7197,-643.6705"/>
<polygon fill="#000000" stroke="#000000" points="10443.4532,-641.4754 10434.7979,-635.3651 10437.7536,-645.5393 10443.4532,-641.4754"/>
</g>
<!-- prose_84 -->
<g id="node85" class="node">
<title>prose_84</title>
<ellipse fill="none" stroke="#000000" cx="10506.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10506.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_84 -->
<g id="edge84" class="edge">
<title>section_55&#45;&gt;prose_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10635.7228,-724.4995C10609.8239,-711.6106 10574.4377,-691.8758 10547.5,-668.801 10539.0091,-661.5277 10530.9538,-652.3275 10524.267,-643.7785"/>
<polygon fill="#000000" stroke="#000000" points="10526.8795,-641.4292 10518.0709,-635.5419 10521.2856,-645.6373 10526.8795,-641.4292"/>
</g>
<!-- prose_85 -->
<g id="node86" class="node">
<title>prose_85</title>
<ellipse fill="none" stroke="#000000" cx="10588.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10588.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_85 -->
<g id="edge85" class="edge">
<title>section_55&#45;&gt;prose_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10658.4006,-722.47C10644.4164,-701.6301 10621.3056,-667.1892 10605.5151,-643.6576"/>
<polygon fill="#000000" stroke="#000000" points="10608.3344,-641.5776 10599.856,-635.2241 10602.5218,-645.4781 10608.3344,-641.5776"/>
</g>
<!-- prose_86 -->
<g id="node87" class="node">
<title>prose_86</title>
<ellipse fill="none" stroke="#000000" cx="10670.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10670.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_86 -->
<g id="edge86" class="edge">
<title>section_55&#45;&gt;prose_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10670.5,-722.47C10670.5,-702.4345 10670.5,-669.828 10670.5,-646.4301"/>
<polygon fill="#000000" stroke="#000000" points="10674.0001,-646.4059 10670.5,-636.4059 10667.0001,-646.406 10674.0001,-646.4059"/>
</g>
<!-- prose_87 -->
<g id="node88" class="node">
<title>prose_87</title>
<ellipse fill="none" stroke="#000000" cx="10876.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10876.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_87 -->
<g id="edge87" class="edge">
<title>section_55&#45;&gt;prose_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10698.7115,-723.7658C10737.1495,-700.9642 10805.7367,-660.278 10845.5495,-636.6609"/>
<polygon fill="#000000" stroke="#000000" points="10847.4866,-639.5813 10854.3015,-631.4691 10843.9152,-633.5609 10847.4866,-639.5813"/>
</g>
<!-- prose_88 -->
<g id="node89" class="node">
<title>prose_88</title>
<ellipse fill="none" stroke="#000000" cx="11191.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11191.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_88 -->
<g id="edge88" class="edge">
<title>section_55&#45;&gt;prose_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10724.7817,-727.7693C10830.0387,-703.0814 11059.6315,-649.2306 11151.9208,-627.5842"/>
<polygon fill="#000000" stroke="#000000" points="11152.7706,-630.9799 11161.7071,-625.2888 11151.1721,-624.1649 11152.7706,-630.9799"/>
</g>
<!-- prose_89 -->
<g id="node90" class="node">
<title>prose_89</title>
<ellipse fill="none" stroke="#000000" cx="11554.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11554.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_89 -->
<g id="edge89" class="edge">
<title>section_55&#45;&gt;prose_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10738.4943,-732.4643C10844.2587,-719.8194 11054.5363,-694.1033 11232.5,-668.801 11333.6516,-654.4196 11452.295,-635.2038 11513.44,-625.1267"/>
<polygon fill="#000000" stroke="#000000" points="11514.1639,-628.5547 11523.4601,-623.4723 11513.0235,-621.6482 11514.1639,-628.5547"/>
</g>
<!-- prose_90 -->
<g id="node91" class="node">
<title>prose_90</title>
<ellipse fill="none" stroke="#000000" cx="12014.5" cy="-618.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12014.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_55&#45;&gt;prose_90 -->
<g id="edge90" class="edge">
<title>section_55&#45;&gt;prose_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10743.7395,-735.8883C10900.2684,-725.7958 11278.9296,-700.1333 11595.5,-668.801 11734.0793,-655.0852 11897.8394,-633.9 11973.0067,-623.8963"/>
<polygon fill="#000000" stroke="#000000" points="11973.5642,-627.3531 11983.0133,-622.5609 11972.6382,-620.4146 11973.5642,-627.3531"/>
</g>
<!-- codeblock_91 -->
<g id="node92" class="node">
<title>codeblock_91</title>
<ellipse fill="none" stroke="#000000" cx="12624.5" cy="-618.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12624.5" y="-614.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 254&#45;256</text>
</g>
<!-- section_55&#45;&gt;codeblock_91 -->
<g id="edge91" class="edge">
<title>section_55&#45;&gt;codeblock_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10745.2501,-737.5999C10953.1182,-729.323 11555.6219,-703.9108 12055.5,-668.801 12225.5437,-656.8577 12423.7547,-638.1866 12535.6517,-627.2062"/>
<polygon fill="#000000" stroke="#000000" points="12536.2663,-630.6627 12545.8757,-626.2007 12535.5811,-623.6963 12536.2663,-630.6627"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="5775,-362.2013 5262,-362.2013 5262,-260.9995 5775,-260.9995 5775,-362.2013"/>
<text text-anchor="middle" x="5518.5" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="5518.5" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5518.5" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="5518.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- prose_62&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>prose_62&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6836.5918,-600.9326C6829.5876,-589.2912 6818.6525,-574.8488 6804.5,-567.8008 6702.8881,-517.1978 5889.5659,-572.2442 5783.5,-531.8008 5695.8674,-498.3862 5616.1747,-423.3036 5567.5676,-370.1267"/>
<polygon fill="#000000" stroke="#000000" points="5569.9272,-367.5177 5560.6243,-362.4474 5564.7348,-372.2124 5569.9272,-367.5177"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="6278,-338.9009 5793,-338.9009 5793,-284.3 6278,-284.3 6278,-338.9009"/>
<text text-anchor="middle" x="6035.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="6035.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- prose_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>prose_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6918.2337,-600.5418C6911.1942,-589.039 6900.3631,-574.9205 6886.5,-567.8008 6767.8776,-506.8805 6410.8838,-582.3875 6287.5,-531.8008 6190.2939,-491.9469 6104.68,-398.5295 6062.7814,-347.1024"/>
<polygon fill="#000000" stroke="#000000" points="6065.4351,-344.8174 6056.4372,-339.2238 6059.983,-349.2077 6065.4351,-344.8174"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="6816.5,-346.8008 6296.5,-346.8008 6296.5,-276.4001 6816.5,-276.4001 6816.5,-346.8008"/>
<text text-anchor="middle" x="6556.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="6556.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="6556.5" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- prose_64&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>prose_64&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6999.4552,-600.859C6992.2111,-589.7959 6981.4491,-576.0596 6968.5,-567.8008 6913.2431,-532.559 6884.0416,-561.2659 6825.5,-531.8008 6734.2262,-485.8611 6646.022,-404.3715 6596.7502,-354.4486"/>
<polygon fill="#000000" stroke="#000000" points="6598.9721,-351.715 6589.4748,-347.0189 6593.9706,-356.6126 6598.9721,-351.715"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="7348,-354.2015 6835,-354.2015 6835,-268.9994 7348,-268.9994 7348,-354.2015"/>
<text text-anchor="middle" x="7091.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="7091.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="7091.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="7091.5" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- prose_65&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>prose_65&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7091.5,-600.0339C7091.5,-554.5263 7091.5,-434.7328 7091.5,-364.671"/>
<polygon fill="#000000" stroke="#000000" points="7095.0001,-364.2911 7091.5,-354.2912 7088.0001,-364.2912 7095.0001,-364.2911"/>
</g>
<!-- leaf_72 -->
<g id="node73" class="node">
<title>leaf_72</title>
<polygon fill="none" stroke="#c0c0c0" points="7865,-346.9008 7366,-346.9008 7366,-276.3001 7865,-276.3001 7865,-346.9008"/>
<text text-anchor="middle" x="7615.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="7615.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- prose_66&#45;&gt;leaf_72 -->
<g id="edge72" class="edge">
<title>prose_66&#45;&gt;leaf_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7406.6967,-601.3745C7440.1493,-554.9494 7534.1534,-424.492 7583.8262,-355.5568"/>
<polygon fill="#000000" stroke="#000000" points="7586.9417,-357.2201 7589.9482,-347.0608 7581.2625,-353.1278 7586.9417,-357.2201"/>
</g>
<!-- header_73 -->
<g id="node74" class="node">
<title>header_73</title>
<ellipse fill="none" stroke="#000000" cx="7991.5" cy="-311.6004" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="7991.5" y="-307.4004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_67&#45;&gt;header_73 -->
<g id="edge73" class="edge">
<title>section_67&#45;&gt;header_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8172.0473,-600.6758C8154.3748,-584.0304 8128.2745,-557.8055 8109.5,-531.8008 8062.8642,-467.2052 8022.4002,-381.9354 8003.2624,-338.9191"/>
<polygon fill="#000000" stroke="#000000" points="8006.4203,-337.4058 7999.1855,-329.6658 8000.0145,-340.2281 8006.4203,-337.4058"/>
</g>
<!-- prose_74 -->
<g id="node75" class="node">
<title>prose_74</title>
<ellipse fill="none" stroke="#000000" cx="8150.5" cy="-311.6004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8150.5" y="-307.4004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_67&#45;&gt;prose_74 -->
<g id="edge74" class="edge">
<title>section_67&#45;&gt;prose_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8189.058,-600.0339C8182.1788,-548.574 8162.6014,-402.1247 8154.2977,-340.0093"/>
<polygon fill="#000000" stroke="#000000" points="8157.7234,-339.2198 8152.9292,-329.7717 8150.7851,-340.1474 8157.7234,-339.2198"/>
</g>
<!-- prose_75 -->
<g id="node76" class="node">
<title>prose_75</title>
<ellipse fill="none" stroke="#000000" cx="8232.5" cy="-311.6004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8232.5" y="-307.4004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_67&#45;&gt;prose_75 -->
<g id="edge75" class="edge">
<title>section_67&#45;&gt;prose_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8193.942,-600.0339C8200.8212,-548.574 8220.3986,-402.1247 8228.7023,-340.0093"/>
<polygon fill="#000000" stroke="#000000" points="8232.2149,-340.1474 8230.0708,-329.7717 8225.2766,-339.2198 8232.2149,-340.1474"/>
</g>
<!-- prose_76 -->
<g id="node77" class="node">
<title>prose_76</title>
<ellipse fill="none" stroke="#000000" cx="8314.5" cy="-311.6004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8314.5" y="-307.4004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_67&#45;&gt;prose_76 -->
<g id="edge76" class="edge">
<title>section_67&#45;&gt;prose_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8214.0318,-600.9469C8232.9864,-585.0638 8259.2164,-559.8234 8273.5,-531.8008 8305.7337,-468.5625 8312.8452,-383.5566 8314.2722,-339.9738"/>
<polygon fill="#000000" stroke="#000000" points="8317.7748,-339.9082 8314.5243,-329.8243 8310.777,-339.7343 8317.7748,-339.9082"/>
</g>
<!-- prose_77 -->
<g id="node78" class="node">
<title>prose_77</title>
<ellipse fill="none" stroke="#000000" cx="8396.5" cy="-311.6004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8396.5" y="-307.4004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_67&#45;&gt;prose_77 -->
<g id="edge77" class="edge">
<title>section_67&#45;&gt;prose_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8241.6495,-604.814C8278.8843,-592.1435 8327.8222,-569.3844 8355.5,-531.8008 8398.1051,-473.9476 8400.5678,-384.8999 8398.6395,-339.8227"/>
<polygon fill="#000000" stroke="#000000" points="8402.1226,-339.4101 8398.0931,-329.6114 8395.1326,-339.7842 8402.1226,-339.4101"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="7822.5,-55.6015 7330.5,-55.6015 7330.5,.2015 7822.5,.2015 7822.5,-55.6015"/>
<text text-anchor="middle" x="7576.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- prose_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>prose_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8153.4484,-293.5094C8159.2104,-251.158 8166.8226,-145.1053 8109.5,-91.4 8106.7165,-88.7922 7967.2706,-72.1795 7831.7269,-56.5747"/>
<polygon fill="#000000" stroke="#000000" points="7831.8949,-53.071 7821.5605,-55.4053 7831.095,-60.0252 7831.8949,-53.071"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="8220.5,-55.0004 7840.5,-55.0004 7840.5,-.3996 8220.5,-.3996 8220.5,-55.0004"/>
<text text-anchor="middle" x="8030.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="8030.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- prose_75&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>prose_75&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8234.5443,-293.5244C8238.1441,-252.5654 8241.0726,-151.5781 8191.5,-91.4 8180.7956,-78.4055 8167.0687,-68.0479 8152.1543,-59.7953"/>
<polygon fill="#000000" stroke="#000000" points="8153.738,-56.674 8143.2496,-55.1756 8150.5143,-62.8876 8153.738,-56.674"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="8794,-55.0004 8239,-55.0004 8239,-.3996 8794,-.3996 8794,-55.0004"/>
<text text-anchor="middle" x="8516.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="8516.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- prose_76&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>prose_76&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8312.4557,-293.5244C8308.8559,-252.5654 8305.9274,-151.5781 8355.5,-91.4 8366.2044,-78.4055 8379.9313,-68.0479 8394.8457,-59.7953"/>
<polygon fill="#000000" stroke="#000000" points="8396.4857,-62.8876 8403.7504,-55.1756 8393.262,-56.674 8396.4857,-62.8876"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="9213,-55.6015 8812,-55.6015 8812,.2015 9213,.2015 9213,-55.6015"/>
<text text-anchor="middle" x="9012.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- prose_77&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>prose_77&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8393.478,-293.4301C8387.5571,-250.9073 8379.6263,-144.511 8437.5,-91.4 8495.4393,-38.2289 8705.9851,-62.8342 8801.8744,-55.2676"/>
<polygon fill="#000000" stroke="#000000" points="8802.2666,-58.7462 8811.8866,-54.307 8801.598,-51.7781 8802.2666,-58.7462"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="9002,-354.8008 8447,-354.8008 8447,-268.4001 9002,-268.4001 9002,-354.8008"/>
<text text-anchor="middle" x="8724.5" y="-307.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="8724.5" y="-292.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="8724.5" y="-276.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- prose_83&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>prose_83&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10415.6113,-600.8933C10408.6163,-589.2334 10397.6841,-574.785 10383.5,-567.8008 10246.6888,-500.436 9155.2498,-582.7056 9011.5,-531.8008 8913.9672,-497.2625 8823.1045,-415.9792 8770.7215,-362.4218"/>
<polygon fill="#000000" stroke="#000000" points="8773.0598,-359.8052 8763.5888,-355.0564 8768.0312,-364.6749 8773.0598,-359.8052"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="9582.5,-338.9009 9020.5,-338.9009 9020.5,-284.3 9582.5,-284.3 9582.5,-338.9009"/>
<text text-anchor="middle" x="9301.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="9301.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- prose_84&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>prose_84&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10497.5789,-600.9584C10490.5687,-589.3292 10479.6315,-574.8907 10465.5,-567.8008 10291.7537,-480.6316 9774.413,-597.5968 9591.5,-531.8008 9483.2094,-492.8474 9382.2833,-397.9415 9333.0094,-346.3594"/>
<polygon fill="#000000" stroke="#000000" points="9335.534,-343.9351 9326.1195,-339.0751 9330.4484,-348.7453 9335.534,-343.9351"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="10120.5,-338.9009 9600.5,-338.9009 9600.5,-284.3 10120.5,-284.3 10120.5,-338.9009"/>
<text text-anchor="middle" x="9860.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="9860.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- prose_85&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>prose_85&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10579.1742,-600.6558C10572.1082,-589.2038 10561.2698,-575.0993 10547.5,-567.8008 10382.7463,-480.4762 10302.2498,-601.9926 10129.5,-531.8008 10028.1853,-490.6346 9935.5268,-397.4258 9890.0283,-346.4703"/>
<polygon fill="#000000" stroke="#000000" points="9892.6442,-344.145 9883.3994,-338.9698 9887.3991,-348.7806 9892.6442,-344.145"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="10708,-346.8008 10139,-346.8008 10139,-276.4001 10708,-276.4001 10708,-346.8008"/>
<text text-anchor="middle" x="10423.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="10423.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="10423.5" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- prose_86&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>prose_86&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10657.2202,-601.8114C10620.0524,-555.66 10514.0724,-424.0643 10458.4901,-355.0478"/>
<polygon fill="#000000" stroke="#000000" points="10460.9679,-352.5443 10451.9697,-346.9513 10455.5161,-356.935 10460.9679,-352.5443"/>
</g>
<!-- leaf_96 -->
<g id="node97" class="node">
<title>leaf_96</title>
<polygon fill="none" stroke="#c0c0c0" points="11274.5,-354.2015 10726.5,-354.2015 10726.5,-268.9994 11274.5,-268.9994 11274.5,-354.2015"/>
<text text-anchor="middle" x="11000.5" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="11000.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="11000.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="11000.5" y="-277.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- prose_87&#45;&gt;leaf_96 -->
<g id="edge96" class="edge">
<title>prose_87&#45;&gt;leaf_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10883.7027,-600.4857C10902.0178,-555.1854 10950.9222,-434.2258 10979.3047,-364.0247"/>
<polygon fill="#000000" stroke="#000000" points="10982.6646,-365.0519 10983.1681,-354.469 10976.1749,-362.428 10982.6646,-365.0519"/>
</g>
<!-- leaf_97 -->
<g id="node98" class="node">
<title>leaf_97</title>
<polygon fill="none" stroke="#c0c0c0" points="11554,-331.5025 11293,-331.5025 11293,-291.6984 11554,-291.6984 11554,-331.5025"/>
<text text-anchor="middle" x="11423.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- prose_88&#45;&gt;leaf_97 -->
<g id="edge97" class="edge">
<title>prose_88&#45;&gt;leaf_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11210.0834,-603.2485C11229.6501,-586.8725 11260.7186,-559.3327 11283.5,-531.8008 11335.9665,-468.3938 11384.4715,-384.0871 11408.2155,-340.4754"/>
<polygon fill="#000000" stroke="#000000" points="11411.3598,-342.0187 11413.034,-331.5569 11405.2012,-338.6912 11411.3598,-342.0187"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="12099,-338.9009 11572,-338.9009 11572,-284.3 12099,-284.3 12099,-338.9009"/>
<text text-anchor="middle" x="11835.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="11835.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- prose_89&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>prose_89&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11569.2121,-602.2432C11612.8349,-554.6307 11742.2163,-413.4159 11803.1167,-346.9455"/>
<polygon fill="#000000" stroke="#000000" points="11806.019,-348.9589 11810.1937,-339.2212 11800.8577,-344.2301 11806.019,-348.9589"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="12665.5,-338.9009 12117.5,-338.9009 12117.5,-284.3 12665.5,-284.3 12665.5,-338.9009"/>
<text text-anchor="middle" x="12391.5" y="-307.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="12391.5" y="-292.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- prose_90&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>prose_90&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12032.9387,-603.3005C12090.537,-556.4426 12268.1102,-411.9816 12349.7084,-345.5991"/>
<polygon fill="#000000" stroke="#000000" points="12352.2187,-348.0689 12357.7672,-339.0431 12347.8011,-342.6388 12352.2187,-348.0689"/>
</g>
<!-- leaf_100 -->
<g id="node101" class="node">
<title>leaf_100</title>
<polygon fill="none" stroke="#c0c0c0" points="12755.5,-329.6004 12683.5,-329.6004 12683.5,-293.6004 12755.5,-293.6004 12755.5,-329.6004"/>
<text text-anchor="middle" x="12719.5" y="-308.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_91&#45;&gt;leaf_100 -->
<g id="edge100" class="edge">
<title>codeblock_91&#45;&gt;leaf_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12637.251,-600.2698C12648.6405,-583.3444 12664.9572,-556.9361 12674.5,-531.8008 12699.6519,-465.5519 12711.7646,-382.4794 12716.6804,-339.7937"/>
<polygon fill="#000000" stroke="#000000" points="12720.16,-340.1701 12717.7786,-329.8464 12713.2023,-339.4019 12720.16,-340.1701"/>
</g>
</g>
</svg>