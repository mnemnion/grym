<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="9667pt" height="710pt"
 viewBox="0.00 0.00 9666.50 710.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 706.0003)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-706.0003 9662.5,-706.0003 9662.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="540.5" cy="-684.0003" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="540.5" y="-679.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 118</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="540.5" cy="-612.0003" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="540.5" y="-607.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;22</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M540.5,-665.8317C540.5,-658.1313 540.5,-648.9747 540.5,-640.4169"/>
<polygon fill="#000000" stroke="#000000" points="544.0001,-640.4135 540.5,-630.4136 537.0001,-640.4136 544.0001,-640.4135"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="391.5" cy="-540.0003" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="391.5" y="-535.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M508.5358,-596.5545C485.1822,-585.2696 453.4424,-569.9322 428.908,-558.0766"/>
<polygon fill="#000000" stroke="#000000" points="430.4169,-554.9186 419.8902,-553.7191 427.3713,-561.2214 430.4169,-554.9186"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="485.5" cy="-540.0003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="485.5" y="-535.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M526.9045,-594.2026C520.1139,-585.3131 511.7883,-574.4141 504.3881,-564.7266"/>
<polygon fill="#000000" stroke="#000000" points="507.0368,-562.4282 498.185,-556.6061 501.4741,-566.6775 507.0368,-562.4282"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="596.5" cy="-540.0003" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="596.5" y="-535.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 7&#45;13</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M554.3427,-594.2026C561.0563,-585.5707 569.2436,-575.0442 576.6109,-565.572"/>
<polygon fill="#000000" stroke="#000000" points="579.4398,-567.6357 582.8165,-557.5933 573.9143,-563.3381 579.4398,-567.6357"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="2340.5" cy="-540.0003" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2340.5" y="-535.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 23&#45;82</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M600.9039,-609.5842C870.8378,-598.7868 1966.449,-554.9624 2265.0344,-543.0189"/>
<polygon fill="#000000" stroke="#000000" points="2265.465,-546.5046 2275.3171,-542.6076 2265.1852,-539.5102 2265.465,-546.5046"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-486.2012 0,-486.2012 0,-398.3993 359,-398.3993 359,-486.2012"/>
<text text-anchor="middle" x="179.5" y="-422.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- prose_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M460.5451,-528.4691C455.2932,-526.2051 449.7522,-523.9349 444.5,-522.0003 413.0084,-510.4007 378.9718,-499.1972 346.1237,-489.0372"/>
<polygon fill="#000000" stroke="#000000" points="347.0215,-485.6517 336.4345,-486.0596 344.9652,-492.3428 347.0215,-485.6517"/>
</g>
<!-- header_7 -->
<g id="node8" class="node">
<title>header_7</title>
<ellipse fill="none" stroke="#000000" cx="461.5" cy="-442.3003" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="461.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_4&#45;&gt;header_7 -->
<g id="edge7" class="edge">
<title>section_4&#45;&gt;header_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573.2927,-523.2051C551.4432,-507.3925 518.508,-483.5572 494.0391,-465.849"/>
<polygon fill="#000000" stroke="#000000" points="495.9224,-462.8915 485.7693,-459.8641 491.8184,-468.5623 495.9224,-462.8915"/>
</g>
<!-- prose_8 -->
<g id="node9" class="node">
<title>prose_8</title>
<ellipse fill="none" stroke="#000000" cx="596.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="596.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;prose_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M596.5,-521.6237C596.5,-507.2951 596.5,-487.1426 596.5,-470.7361"/>
<polygon fill="#000000" stroke="#000000" points="600.0001,-470.5945 596.5,-460.5945 593.0001,-470.5946 600.0001,-470.5945"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="712.5" cy="-442.3003" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="712.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 14&#45;22</text>
</g>
<!-- section_4&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M616.7057,-522.9823C635.387,-507.248 663.3339,-483.7101 684.2273,-466.1127"/>
<polygon fill="#000000" stroke="#000000" points="686.7428,-468.5702 692.1367,-459.4511 682.2334,-463.2161 686.7428,-468.5702"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="2042.5" cy="-442.3003" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="2042.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_5&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2288.3112,-529.0138C2246.3974,-519.5349 2186.3516,-504.4715 2135.5,-486.0003 2118.1193,-479.687 2099.5665,-471.3217 2083.6402,-463.6012"/>
<polygon fill="#000000" stroke="#000000" points="2085.1131,-460.4252 2074.5953,-459.1504 2082.0225,-466.706 2085.1131,-460.4252"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="2176.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2176.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2297.857,-526.141C2273.1045,-516.9457 2242.0641,-503.3697 2217.5,-486.0003 2209.9296,-480.6472 2202.6609,-473.7248 2196.4016,-466.9746"/>
<polygon fill="#000000" stroke="#000000" points="2198.8048,-464.4085 2189.5596,-459.2338 2193.5599,-469.0444 2198.8048,-464.4085"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="2258.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2258.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2325.4599,-522.0806C2312.4272,-506.5526 2293.4495,-483.9414 2279.0228,-466.7525"/>
<polygon fill="#000000" stroke="#000000" points="2281.4619,-464.2143 2272.3522,-458.8047 2276.1001,-468.7145 2281.4619,-464.2143"/>
</g>
<!-- prose_17 -->
<g id="node18" class="node">
<title>prose_17</title>
<ellipse fill="none" stroke="#000000" cx="2340.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2340.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;prose_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2340.5,-521.6237C2340.5,-507.2951 2340.5,-487.1426 2340.5,-470.7361"/>
<polygon fill="#000000" stroke="#000000" points="2344.0001,-470.5945 2340.5,-460.5945 2337.0001,-470.5946 2344.0001,-470.5945"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="2539.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2539.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2372.9157,-524.0857C2409.514,-506.1176 2468.7778,-477.0217 2505.8691,-458.8116"/>
<polygon fill="#000000" stroke="#000000" points="2507.8155,-461.7551 2515.2495,-454.2062 2504.7305,-455.4715 2507.8155,-461.7551"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2964.5" cy="-442.3003" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2964.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2397.53,-531.0711C2521.8583,-511.605 2814.8313,-465.734 2923.2297,-448.762"/>
<polygon fill="#000000" stroke="#000000" points="2924.0934,-452.1695 2933.4316,-447.1647 2923.0105,-445.2538 2924.0934,-452.1695"/>
</g>
<!-- section_20 -->
<g id="node21" class="node">
<title>section_20</title>
<ellipse fill="none" stroke="#000000" cx="3843.5" cy="-442.3003" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3843.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;69</text>
</g>
<!-- section_5&#45;&gt;section_20 -->
<g id="edge20" class="edge">
<title>section_5&#45;&gt;section_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2404.6012,-535.8335C2647.4736,-520.046 3510.4183,-463.9517 3769.4548,-447.1135"/>
<polygon fill="#000000" stroke="#000000" points="3769.7587,-450.6012 3779.5105,-446.4598 3769.3045,-443.616 3769.7587,-450.6012"/>
</g>
<!-- section_21 -->
<g id="node22" class="node">
<title>section_21</title>
<ellipse fill="none" stroke="#000000" cx="7422.5" cy="-442.3003" rx="69.851" ry="18"/>
<text text-anchor="middle" x="7422.5" y="-438.1003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 83&#45;118</text>
</g>
<!-- section_5&#45;&gt;section_21 -->
<g id="edge21" class="edge">
<title>section_5&#45;&gt;section_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2406.1469,-538.7383C2952.5501,-528.2338 6740.3407,-455.4146 7342.0363,-443.8472"/>
<polygon fill="#000000" stroke="#000000" points="7342.4111,-447.3407 7352.3419,-443.6491 7342.2765,-440.342 7342.4111,-447.3407"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="600.5,-362.7005 66.5,-362.7005 66.5,-260.2999 600.5,-260.2999 600.5,-362.7005"/>
<text text-anchor="middle" x="333.5" y="-315.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="333.5" y="-300.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="333.5" y="-284.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All it absolutely has to contain is =str=. </text>
</g>
<!-- prose_8&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>prose_8&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M583.9142,-425.627C576.4529,-416.6549 566.3512,-405.9537 555.5,-398.6003 538.0385,-386.7673 518.7347,-376.1945 499.0132,-366.8489"/>
<polygon fill="#000000" stroke="#000000" points="500.4728,-363.6677 489.9278,-362.6412 497.531,-370.0196 500.4728,-363.6677"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="664.5" cy="-311.5002" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="664.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_9&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_9&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M705.9265,-424.3874C697.857,-402.3982 684.0851,-364.8698 674.6519,-339.1643"/>
<polygon fill="#000000" stroke="#000000" points="677.8791,-337.7986 671.1482,-329.6166 671.3076,-340.2102 677.8791,-337.7986"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="760.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="760.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_9&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M719.0735,-424.3874C727.1883,-402.2747 741.0698,-364.4476 750.5066,-338.7322"/>
<polygon fill="#000000" stroke="#000000" points="753.8464,-339.7905 754.0058,-329.1968 747.275,-337.3789 753.8464,-339.7905"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1017,-224.4003 504,-224.4003 504,-91.4 1017,-91.4 1017,-224.4003"/>
<text text-anchor="middle" x="760.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="760.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="760.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="760.5" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="760.5" y="-115.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- prose_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>prose_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M760.5,-293.2771C760.5,-278.4609 760.5,-256.4835 760.5,-234.5253"/>
<polygon fill="#000000" stroke="#000000" points="764.0001,-234.4634 760.5,-224.4635 757.0001,-234.4635 764.0001,-234.4634"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1372.5,-346.8006 810.5,-346.8006 810.5,-276.1999 1372.5,-276.1999 1372.5,-346.8006"/>
<text text-anchor="middle" x="1091.5" y="-299.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="1091.5" y="-284.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- prose_15&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_15&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2165.4041,-425.0818C2158.1599,-415.4492 2147.7789,-404.2687 2135.5,-398.6003 2059.3493,-363.4465 1464.8565,-371.8963 1381.5,-362.6003 1349.0385,-358.9801 1314.7169,-353.9841 1281.4856,-348.5245"/>
<polygon fill="#000000" stroke="#000000" points="1281.6494,-345.0037 1271.2107,-346.8162 1280.5013,-351.9089 1281.6494,-345.0037"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1938.5,-346.7006 1390.5,-346.7006 1390.5,-276.2999 1938.5,-276.2999 1938.5,-346.7006"/>
<text text-anchor="middle" x="1664.5" y="-315.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="1664.5" y="-300.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="1664.5" y="-284.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- prose_16&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>prose_16&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2246.8818,-425.0169C2239.5925,-415.6142 2229.3425,-404.6892 2217.5,-398.6003 2109.8354,-343.2439 2067.0995,-381.3611 1947.5,-362.6003 1919.9242,-358.2746 1890.8954,-353.4011 1862.3635,-348.4254"/>
<polygon fill="#000000" stroke="#000000" points="1862.7493,-344.9398 1852.2954,-346.6619 1861.5415,-351.8348 1862.7493,-344.9398"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2490.5,-346.7006 1956.5,-346.7006 1956.5,-276.2999 2490.5,-276.2999 2490.5,-346.7006"/>
<text text-anchor="middle" x="2223.5" y="-315.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="2223.5" y="-300.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="2223.5" y="-284.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- prose_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2325.9184,-425.9988C2309.9991,-408.2018 2283.8545,-378.9735 2261.9658,-354.5031"/>
<polygon fill="#000000" stroke="#000000" points="2264.3027,-351.8657 2255.027,-346.7458 2259.0853,-356.5326 2264.3027,-351.8657"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="3036,-362.0004 2509,-362.0004 2509,-261.0001 3036,-261.0001 3036,-362.0004"/>
<text text-anchor="middle" x="2772.5" y="-330.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="2772.5" y="-315.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="2772.5" y="-300.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="2772.5" y="-284.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="2772.5" y="-269.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- prose_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prose_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2562.2653,-429.5205C2588.2432,-414.9371 2632.4755,-390.1063 2673.6851,-366.9723"/>
<polygon fill="#000000" stroke="#000000" points="2675.4186,-370.013 2682.4252,-362.0658 2671.992,-363.909 2675.4186,-370.013"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="3560.5,-354.7006 3054.5,-354.7006 3054.5,-268.2999 3560.5,-268.2999 3560.5,-354.7006"/>
<text text-anchor="middle" x="3307.5" y="-323.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="3307.5" y="-308.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="3307.5" y="-292.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- prose_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>prose_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2991.1292,-432.1455C3032.4793,-416.377 3114.6864,-385.028 3184.9372,-358.2385"/>
<polygon fill="#000000" stroke="#000000" points="3186.2259,-361.493 3194.3225,-354.6595 3183.7317,-354.9524 3186.2259,-361.493"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="3624.5" cy="-311.5002" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="3624.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_20&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_20&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3805.2966,-427.5447C3770.8995,-413.3937 3719.7217,-390.1476 3679.5,-362.6003 3668.1299,-354.813 3656.7696,-344.7413 3647.3507,-335.6006"/>
<polygon fill="#000000" stroke="#000000" points="3649.806,-333.1062 3640.25,-328.531 3644.8671,-338.0669 3649.806,-333.1062"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="3720.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3720.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_20&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3824.2825,-424.8908C3807.2327,-409.1528 3781.9339,-385.0739 3761.5,-362.6003 3754.0395,-354.3951 3746.3146,-345.0277 3739.6089,-336.5736"/>
<polygon fill="#000000" stroke="#000000" points="3742.2101,-334.2183 3733.2904,-328.5007 3736.6977,-338.5327 3742.2101,-334.2183"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="3802.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3802.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_20&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3837.7991,-424.1131C3830.9145,-402.1495 3819.2616,-364.9739 3811.2395,-339.3815"/>
<polygon fill="#000000" stroke="#000000" points="3814.4834,-338.0283 3808.1525,-329.533 3807.8038,-340.1221 3814.4834,-338.0283"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="3884.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3884.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_20&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3849.2009,-424.1131C3856.0855,-402.1495 3867.7384,-364.9739 3875.7605,-339.3815"/>
<polygon fill="#000000" stroke="#000000" points="3879.1962,-340.1221 3878.8475,-329.533 3872.5166,-338.0283 3879.1962,-340.1221"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="3966.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3966.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_20&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3862.7175,-424.8908C3879.7673,-409.1528 3905.0661,-385.0739 3925.5,-362.6003 3932.9605,-354.3951 3940.6854,-345.0277 3947.3911,-336.5736"/>
<polygon fill="#000000" stroke="#000000" points="3950.3023,-338.5327 3953.7096,-328.5007 3944.7899,-334.2183 3950.3023,-338.5327"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="4269.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4269.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_20&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_20&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3887.485,-428.795C3971.2039,-403.0898 4152.1461,-347.5329 4231.217,-323.2547"/>
<polygon fill="#000000" stroke="#000000" points="4232.701,-326.4604 4241.2332,-320.1793 4230.6464,-319.7687 4232.701,-326.4604"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="5066.5" cy="-311.5002" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="5066.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 70&#45;82</text>
</g>
<!-- section_20&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_20&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3904.9869,-435.7243C4110.8511,-413.707 4775.2772,-342.6466 4995.1246,-319.1338"/>
<polygon fill="#000000" stroke="#000000" points="4995.6828,-322.5942 5005.2539,-318.0505 4994.9383,-315.6339 4995.6828,-322.5942"/>
</g>
<!-- header_48 -->
<g id="node49" class="node">
<title>header_48</title>
<ellipse fill="none" stroke="#000000" cx="7058.5" cy="-311.5002" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="7058.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_21&#45;&gt;header_48 -->
<g id="edge48" class="edge">
<title>section_21&#45;&gt;header_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7365.104,-431.9194C7305.8071,-419.9324 7211.4681,-397.2928 7135.5,-362.6003 7119.0633,-355.0941 7102.1857,-344.3021 7088.4365,-334.5683"/>
<polygon fill="#000000" stroke="#000000" points="7090.4637,-331.715 7080.3119,-328.6832 7086.3573,-337.384 7090.4637,-331.715"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="7176.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7176.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>section_21&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7370.3607,-430.164C7326.5492,-418.1556 7263.8446,-396.5836 7217.5,-362.6003 7208.0467,-355.6684 7199.5598,-346.0358 7192.7934,-337.0004"/>
<polygon fill="#000000" stroke="#000000" points="7195.4967,-334.7618 7186.8577,-328.6284 7189.7862,-338.8105 7195.4967,-334.7618"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="7258.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7258.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_21&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7391.7855,-426.0759C7365.6794,-411.4599 7328.0083,-388.3596 7299.5,-362.6003 7291.058,-354.9724 7282.9534,-345.5035 7276.2114,-336.797"/>
<polygon fill="#000000" stroke="#000000" points="7278.9944,-334.6743 7270.1985,-328.7682 7273.3915,-338.8704 7278.9944,-334.6743"/>
</g>
<!-- prose_51 -->
<g id="node52" class="node">
<title>prose_51</title>
<ellipse fill="none" stroke="#000000" cx="7340.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7340.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_51 -->
<g id="edge51" class="edge">
<title>section_21&#45;&gt;prose_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7411.2702,-424.3874C7397.145,-401.856 7372.7917,-363.0095 7356.6645,-337.2846"/>
<polygon fill="#000000" stroke="#000000" points="7359.6106,-335.3945 7351.3334,-328.7809 7353.6797,-339.1127 7359.6106,-335.3945"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="7422.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7422.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_21&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7422.5,-424.1131C7422.5,-402.2471 7422.5,-365.3041 7422.5,-339.7234"/>
<polygon fill="#000000" stroke="#000000" points="7426.0001,-339.5329 7422.5,-329.533 7419.0001,-339.533 7426.0001,-339.5329"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="7751.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7751.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_21&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7460.5619,-427.1681C7524.6241,-401.699 7653.1083,-350.6177 7715.6513,-325.7525"/>
<polygon fill="#000000" stroke="#000000" points="7717.1035,-328.9417 7725.1029,-321.9949 7714.5173,-322.437 7717.1035,-328.9417"/>
</g>
<!-- prose_54 -->
<g id="node55" class="node">
<title>prose_54</title>
<ellipse fill="none" stroke="#000000" cx="8127.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8127.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_54 -->
<g id="edge54" class="edge">
<title>section_21&#45;&gt;prose_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7479.2983,-431.7624C7617.175,-406.1818 7967.0121,-341.2759 8086.6504,-319.0791"/>
<polygon fill="#000000" stroke="#000000" points="8087.6479,-322.4539 8096.8416,-317.1883 8086.3709,-315.5713 8087.6479,-322.4539"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="8521.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8521.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_21&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7488.207,-436.1121C7618.263,-423.6798 7917.6263,-394.1485 8168.5,-362.6003 8281.6401,-348.3725 8414.6648,-328.1727 8480.4242,-317.9545"/>
<polygon fill="#000000" stroke="#000000" points="8481.0451,-321.4001 8490.3873,-316.4027 8479.9678,-314.4835 8481.0451,-321.4001"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="8996.5" cy="-311.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8996.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_21&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>section_21&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7491.0175,-438.6458C7668.3463,-428.9413 8156.8163,-400.6429 8562.5,-362.6003 8706.7862,-349.07 8877.3809,-327.2813 8954.6928,-317.0912"/>
<polygon fill="#000000" stroke="#000000" points="8955.5153,-320.513 8964.9703,-315.7324 8954.5978,-313.5734 8955.5153,-320.513"/>
</g>
<!-- codeblock_57 -->
<g id="node58" class="node">
<title>codeblock_57</title>
<ellipse fill="none" stroke="#000000" cx="9432.5" cy="-311.5002" rx="85.9862" ry="18"/>
<text text-anchor="middle" x="9432.5" y="-307.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 112&#45;115</text>
</g>
<!-- section_21&#45;&gt;codeblock_57 -->
<g id="edge57" class="edge">
<title>section_21&#45;&gt;codeblock_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7492.2891,-440.8345C7716.8539,-435.6948 8440.8767,-415.8291 9037.5,-362.6003 9147.3071,-352.8036 9273.545,-335.39 9353.1593,-323.6464"/>
<polygon fill="#000000" stroke="#000000" points="9353.7346,-327.0994 9363.1138,-322.1717 9352.7088,-320.175 9353.7346,-327.0994"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2650,-208.501 2137,-208.501 2137,-107.2992 2650,-107.2992 2650,-208.501"/>
<text text-anchor="middle" x="2393.5" y="-161.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="2393.5" y="-146.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2393.5" y="-130.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="2393.5" y="-115.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- prose_28&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>prose_28&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3711.6417,-293.9305C3704.6611,-282.1531 3693.7335,-267.5399 3679.5,-260.4002 3578.0346,-209.5041 2770.8955,-240.3029 2658.5,-224.4002 2634.1412,-220.9537 2608.7752,-216.1741 2583.8101,-210.7431"/>
<polygon fill="#000000" stroke="#000000" points="2584.4128,-207.2919 2573.8927,-208.5475 2582.8997,-214.1264 2584.4128,-207.2919"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3153,-185.2005 2668,-185.2005 2668,-130.5997 3153,-130.5997 3153,-185.2005"/>
<text text-anchor="middle" x="2910.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="2910.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- prose_29&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_29&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3793.5866,-294.0388C3786.5799,-282.3125 3775.6439,-267.7157 3761.5,-260.4002 3643.0539,-199.1378 3294.1688,-245.5162 3162.5,-224.4002 3110.3625,-216.0388 3053.3926,-201.4816 3006.8304,-188.1148"/>
<polygon fill="#000000" stroke="#000000" points="3007.637,-184.7046 2997.058,-185.2832 3005.6889,-191.4281 3007.637,-184.7046"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3691.5,-193.1005 3171.5,-193.1005 3171.5,-122.6997 3691.5,-122.6997 3691.5,-193.1005"/>
<text text-anchor="middle" x="3431.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="3431.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="3431.5" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- prose_30&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>prose_30&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3874.5082,-293.8383C3867.2866,-282.6383 3856.5296,-268.7376 3843.5,-260.4002 3842.0422,-259.4674 3700.3271,-224.3098 3583.5227,-195.4296"/>
<polygon fill="#000000" stroke="#000000" points="3584.2823,-192.0121 3573.7345,-193.0097 3582.6022,-198.8075 3584.2823,-192.0121"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4223,-200.5012 3710,-200.5012 3710,-115.2991 4223,-115.2991 4223,-200.5012"/>
<text text-anchor="middle" x="3966.5" y="-169.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="3966.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="3966.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="3966.5" y="-123.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- prose_31&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>prose_31&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3966.5,-293.2771C3966.5,-273.1062 3966.5,-239.6626 3966.5,-211.064"/>
<polygon fill="#000000" stroke="#000000" points="3970.0001,-210.7804 3966.5,-200.7804 3963.0001,-210.7805 3970.0001,-210.7804"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4740,-193.2005 4241,-193.2005 4241,-122.5998 4740,-122.5998 4740,-193.2005"/>
<text text-anchor="middle" x="4490.5" y="-162.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="4490.5" y="-146.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- prose_32&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>prose_32&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4289.895,-297.3252C4321.7491,-275.1859 4384.5137,-231.563 4431.3966,-198.9783"/>
<polygon fill="#000000" stroke="#000000" points="4433.4455,-201.8167 4439.6594,-193.2355 4429.4504,-196.0687 4433.4455,-201.8167"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="4866.5" cy="-157.9001" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="4866.5" y="-153.7001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_33&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5044.3323,-294.4755C5008.6515,-267.0726 4938.373,-213.0986 4897.6633,-181.8336"/>
<polygon fill="#000000" stroke="#000000" points="4899.7543,-179.0263 4889.6915,-175.7112 4895.4906,-184.578 4899.7543,-179.0263"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="5025.5" cy="-157.9001" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5025.5" y="-153.7001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5061.6358,-293.2771C5054.5464,-266.7178 5041.3147,-217.1473 5032.9806,-185.9248"/>
<polygon fill="#000000" stroke="#000000" points="5036.3186,-184.8586 5030.3579,-176.0995 5029.5554,-186.6639 5036.3186,-184.8586"/>
</g>
<!-- prose_41 -->
<g id="node42" class="node">
<title>prose_41</title>
<ellipse fill="none" stroke="#000000" cx="5107.5" cy="-157.9001" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5107.5" y="-153.7001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_41 -->
<g id="edge41" class="edge">
<title>section_33&#45;&gt;prose_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5071.3642,-293.2771C5078.4536,-266.7178 5091.6853,-217.1473 5100.0194,-185.9248"/>
<polygon fill="#000000" stroke="#000000" points="5103.4446,-186.6639 5102.6421,-176.0995 5096.6814,-184.8586 5103.4446,-186.6639"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="5189.5" cy="-157.9001" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5189.5" y="-153.7001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_33&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5084.9065,-294.1087C5102.3189,-277.177 5128.6667,-250.2811 5148.5,-224.4002 5158.2588,-211.6658 5167.7528,-196.5015 5175.1433,-183.8718"/>
<polygon fill="#000000" stroke="#000000" points="5178.1817,-185.6091 5180.1266,-175.1943 5172.1114,-182.123 5178.1817,-185.6091"/>
</g>
<!-- prose_43 -->
<g id="node44" class="node">
<title>prose_43</title>
<ellipse fill="none" stroke="#000000" cx="5271.5" cy="-157.9001" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5271.5" y="-153.7001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_43 -->
<g id="edge43" class="edge">
<title>section_33&#45;&gt;prose_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5106.6111,-297.2105C5142.2925,-282.9815 5194.284,-258.36 5230.5,-224.4002 5242.4421,-213.2021 5252.2375,-197.7801 5259.2558,-184.6068"/>
<polygon fill="#000000" stroke="#000000" points="5262.4699,-186.007 5263.8663,-175.5046 5256.2253,-182.8439 5262.4699,-186.007"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="4697.5,-55.6015 4205.5,-55.6015 4205.5,.2015 4697.5,.2015 4697.5,-55.6015"/>
<text text-anchor="middle" x="4451.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- prose_40&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>prose_40&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5019.5425,-139.9982C5013.3623,-124.4275 5002.1004,-102.6472 4984.5,-91.4 4978.1317,-87.3305 4841.2943,-71.022 4707.8795,-55.9267"/>
<polygon fill="#000000" stroke="#000000" points="4708.2017,-52.4409 4697.872,-54.7959 4707.4157,-59.3966 4708.2017,-52.4409"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="5095.5,-55.0004 4715.5,-55.0004 4715.5,-.3996 5095.5,-.3996 5095.5,-55.0004"/>
<text text-anchor="middle" x="4905.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="4905.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- prose_41&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>prose_41&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5100.3878,-140.1547C5093.6408,-125.3276 5082.1967,-104.555 5066.5,-91.4 5050.8589,-78.2917 5032.1907,-67.6559 5013.2009,-59.1032"/>
<polygon fill="#000000" stroke="#000000" points="5014.4328,-55.8228 5003.8647,-55.0702 5011.6568,-62.2489 5014.4328,-55.8228"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="5669,-55.0004 5114,-55.0004 5114,-.3996 5669,-.3996 5669,-55.0004"/>
<text text-anchor="middle" x="5391.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="5391.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- prose_42&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prose_42&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5196.6122,-140.1547C5203.3592,-125.3276 5214.8033,-104.555 5230.5,-91.4 5246.1411,-78.2917 5264.8093,-67.6559 5283.7991,-59.1032"/>
<polygon fill="#000000" stroke="#000000" points="5285.3432,-62.2489 5293.1353,-55.0702 5282.5672,-55.8228 5285.3432,-62.2489"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="6088,-55.6015 5687,-55.6015 5687,.2015 6088,.2015 6088,-55.6015"/>
<text text-anchor="middle" x="5887.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- prose_43&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>prose_43&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5277.4027,-139.9114C5283.546,-124.2823 5294.7845,-102.465 5312.5,-91.4 5379.1981,-49.7407 5581.601,-63.6436 5676.9068,-55.3103"/>
<polygon fill="#000000" stroke="#000000" points="5677.2868,-58.7898 5686.8866,-54.307 5676.5866,-51.8249 5677.2868,-58.7898"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5877,-201.1004 5322,-201.1004 5322,-114.6998 5877,-114.6998 5877,-201.1004"/>
<text text-anchor="middle" x="5599.5" y="-153.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="5599.5" y="-138.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="5599.5" y="-123.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- prose_49&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>prose_49&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7167.8047,-294.1545C7160.8377,-282.3208 7149.8582,-267.5447 7135.5,-260.4002 7011.2024,-198.5505 6024.1951,-242.1574 5886.5,-224.4002 5848.5493,-219.5061 5808.2687,-211.793 5770.2612,-203.3265"/>
<polygon fill="#000000" stroke="#000000" points="5770.6548,-199.8274 5760.1297,-201.0402 5769.1139,-206.6557 5770.6548,-199.8274"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="6457.5,-185.2005 5895.5,-185.2005 5895.5,-130.5997 6457.5,-130.5997 6457.5,-185.2005"/>
<text text-anchor="middle" x="6176.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="6176.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- prose_50&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>prose_50&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7249.6137,-293.9858C7242.6199,-282.2346 7231.688,-267.6298 7217.5,-260.4002 7143.066,-222.4719 6549.2614,-235.781 6466.5,-224.4002 6406.0416,-216.0863 6339.62,-201.2824 6285.6165,-187.7496"/>
<polygon fill="#000000" stroke="#000000" points="6286.2343,-184.2958 6275.6816,-185.2394 6284.5195,-191.0825 6286.2343,-184.2958"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="6995.5,-185.2005 6475.5,-185.2005 6475.5,-130.5997 6995.5,-130.5997 6995.5,-185.2005"/>
<text text-anchor="middle" x="6735.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="6735.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- prose_51&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>prose_51&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7331.1386,-293.8051C7324.0567,-282.2883 7313.2139,-268.0358 7299.5,-260.4002 7184.0978,-196.1472 7134.4048,-248.2931 7004.5,-224.4002 6951.1617,-214.5899 6892.6352,-200.524 6843.8334,-187.853"/>
<polygon fill="#000000" stroke="#000000" points="6844.4503,-184.3968 6833.8903,-185.2559 6842.6812,-191.1696 6844.4503,-184.3968"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="7583,-193.1005 7014,-193.1005 7014,-122.6997 7583,-122.6997 7583,-193.1005"/>
<text text-anchor="middle" x="7298.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="7298.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="7298.5" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- prose_52&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_52&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7409.2242,-294.9154C7401.2072,-284.9099 7390.7793,-271.9124 7381.5,-260.4002 7365.9234,-241.0755 7348.6567,-219.7385 7333.9239,-201.5582"/>
<polygon fill="#000000" stroke="#000000" points="7336.3641,-199.0103 7327.3482,-193.4457 7330.9261,-203.4182 7336.3641,-199.0103"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="8149.5,-200.5012 7601.5,-200.5012 7601.5,-115.2991 8149.5,-115.2991 8149.5,-200.5012"/>
<text text-anchor="middle" x="7875.5" y="-169.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="7875.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="7875.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="7875.5" y="-123.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- prose_53&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>prose_53&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7764.7702,-295.0623C7781.3451,-274.5308 7810.4721,-238.4508 7834.6935,-208.4476"/>
<polygon fill="#000000" stroke="#000000" points="7837.4987,-210.5447 7841.0569,-200.5652 7832.052,-206.1476 7837.4987,-210.5447"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="8429,-177.8022 8168,-177.8022 8168,-137.998 8429,-137.998 8429,-177.8022"/>
<text text-anchor="middle" x="8298.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- prose_54&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_54&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8144.5213,-296.2109C8173.5017,-270.1794 8232.7736,-216.9386 8268.7343,-184.637"/>
<polygon fill="#000000" stroke="#000000" points="8271.3697,-186.9745 8276.4703,-177.6882 8266.692,-181.7669 8271.3697,-186.9745"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="8974,-185.2005 8447,-185.2005 8447,-130.5997 8974,-130.5997 8974,-185.2005"/>
<text text-anchor="middle" x="8710.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="8710.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- prose_55&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>prose_55&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8539.9662,-296.4927C8569.6605,-272.3602 8628.7579,-224.3318 8668.9637,-191.6566"/>
<polygon fill="#000000" stroke="#000000" points="8671.1857,-194.3609 8676.7387,-185.3379 8666.7709,-188.9286 8671.1857,-194.3609"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="9540.5,-185.2005 8992.5,-185.2005 8992.5,-130.5997 9540.5,-130.5997 9540.5,-185.2005"/>
<text text-anchor="middle" x="9266.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="9266.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- prose_56&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>prose_56&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9019.52,-298.4044C9061.2471,-274.6663 9150.51,-223.8856 9209.5097,-190.3213"/>
<polygon fill="#000000" stroke="#000000" points="9211.3849,-193.2813 9218.3462,-185.2943 9207.9236,-187.1969 9211.3849,-193.2813"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="9658.5,-177.2007 9558.5,-177.2007 9558.5,-138.5995 9658.5,-138.5995 9658.5,-177.2007"/>
<text text-anchor="middle" x="9608.5" y="-162.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(true)</text>
<text text-anchor="middle" x="9608.5" y="-146.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">return {}</text>
</g>
<!-- codeblock_57&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_57&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9458.7874,-294.2391C9483.3148,-277.6111 9520.3945,-251.1105 9549.5,-224.4002 9562.5593,-212.4155 9575.7753,-197.8006 9586.3793,-185.3272"/>
<polygon fill="#000000" stroke="#000000" points="9589.2061,-187.403 9592.9424,-177.4889 9583.839,-182.9091 9589.2061,-187.403"/>
</g>
</g>
</svg>