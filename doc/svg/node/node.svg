<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12915pt" height="1247pt"
 viewBox="0.00 0.00 12914.50 1247.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1243.2015)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1243.2015 12910.5,-1243.2015 12910.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-1221.2015" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="597.5" y="-1217.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 275</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-1149.2015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="597.5" y="-1145.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;180</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-1203.0329C597.5,-1195.3325 597.5,-1186.1758 597.5,-1177.6181"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-1177.6147 597.5,-1167.6148 594.0001,-1177.6148 601.0001,-1177.6147"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392.5" cy="-1077.2015" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="392.5" y="-1073.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M556.9986,-1134.9766C521.908,-1122.6521 471.2888,-1104.8737 435.4885,-1092.2999"/>
<polygon fill="#000000" stroke="#000000" points="436.4039,-1088.9119 425.8091,-1088.9003 434.0843,-1095.5164 436.4039,-1088.9119"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="486.5" cy="-1077.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="486.5" y="-1073.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M571.7554,-1132.5023C555.176,-1121.7481 533.5669,-1107.7314 516.2528,-1096.5006"/>
<polygon fill="#000000" stroke="#000000" points="517.9338,-1093.4192 507.6395,-1090.9136 514.1245,-1099.2919 517.9338,-1093.4192"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-1077.2015" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="597.5" y="-1073.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-1131.0329C597.5,-1123.3325 597.5,-1114.1758 597.5,-1105.6181"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-1105.6147 597.5,-1095.6148 594.0001,-1105.6148 601.0001,-1105.6147"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1185.5" cy="-1077.2015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1185.5" y="-1073.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M657.663,-1141.8346C767.1924,-1128.4228 998.5742,-1100.0904 1115.1839,-1085.8116"/>
<polygon fill="#000000" stroke="#000000" points="1115.9215,-1089.2475 1125.422,-1084.558 1115.0707,-1082.2994 1115.9215,-1089.2475"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="5616.5" cy="-1077.2015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5616.5" y="-1073.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 181&#45;240</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M663.2571,-1148.2582C1204.3701,-1140.4957 4917.739,-1087.2256 5530.8618,-1078.43"/>
<polygon fill="#000000" stroke="#000000" points="5531.0021,-1081.9285 5540.9509,-1078.2853 5530.9017,-1074.9292 5531.0021,-1081.9285"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-1023.4026 0,-1023.4026 0,-951.6003 359,-951.6003 359,-1023.4026"/>
<text text-anchor="middle" x="179.5" y="-960.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- prose_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M461.5875,-1065.5526C456.3325,-1063.2971 450.7796,-1061.0601 445.5,-1059.2015 411.0664,-1047.0795 373.5207,-1035.8124 337.7793,-1025.9679"/>
<polygon fill="#000000" stroke="#000000" points="338.3192,-1022.4872 327.7503,-1023.2294 336.4752,-1029.24 338.3192,-1022.4872"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="431.5" cy="-987.5015" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="431.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M567.5044,-1061.5422C547.1344,-1050.8539 519.6182,-1036.3104 495.5,-1023.2015 486.5294,-1018.3257 476.8938,-1012.9986 467.8916,-1007.9824"/>
<polygon fill="#000000" stroke="#000000" points="469.5858,-1004.9197 459.1487,-1003.0979 466.1717,-1011.0307 469.5858,-1004.9197"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="536.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="536.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M585.4484,-1059.4797C576.3926,-1046.1633 563.8614,-1027.7362 553.7453,-1012.8605"/>
<polygon fill="#000000" stroke="#000000" points="556.6303,-1010.8788 548.1127,-1004.5779 550.8419,-1014.8152 556.6303,-1010.8788"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="658.5" cy="-987.5015" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="658.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- section_4&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.5516,-1059.4797C618.3502,-1046.5414 630.4297,-1028.7786 640.3872,-1014.1362"/>
<polygon fill="#000000" stroke="#000000" points="643.5354,-1015.7308 646.2646,-1005.4935 637.747,-1011.7945 643.5354,-1015.7308"/>
</g>
<!-- header_13 -->
<g id="node14" class="node">
<title>header_13</title>
<ellipse fill="none" stroke="#000000" cx="986.5" cy="-987.5015" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="986.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;header_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1151.2907,-1061.7815C1118.4431,-1046.9753 1068.5986,-1024.5078 1032.3304,-1008.1597"/>
<polygon fill="#000000" stroke="#000000" points="1033.5094,-1004.852 1022.9544,-1003.9335 1030.6328,-1011.2337 1033.5094,-1004.852"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1121.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1121.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1172.8557,-1059.4797C1163.2937,-1046.0779 1150.0383,-1027.4997 1139.3896,-1012.5749"/>
<polygon fill="#000000" stroke="#000000" points="1142.126,-1010.3839 1133.4687,-1004.2764 1136.4277,-1014.4496 1142.126,-1010.3839"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1249.5" cy="-987.5015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1249.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- section_5&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1198.1443,-1059.4797C1207.4627,-1046.4194 1220.2887,-1028.443 1230.7915,-1013.7226"/>
<polygon fill="#000000" stroke="#000000" points="1233.7039,-1015.6668 1236.6629,-1005.4935 1228.0056,-1011.6011 1233.7039,-1015.6668"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="1410.5" cy="-987.5015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1410.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1227.6292,-1063.2802C1257.9293,-1052.9668 1299.6058,-1038.1624 1335.5,-1023.2015 1346.8349,-1018.477 1358.9277,-1012.9454 1370.0199,-1007.6665"/>
<polygon fill="#000000" stroke="#000000" points="1371.57,-1010.8048 1379.0635,-1003.3148 1368.5348,-1004.497 1371.57,-1010.8048"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2002.5" cy="-987.5015" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2002.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;162</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1246.5737,-1070.4961C1393.5657,-1054.3576 1766.7279,-1013.3874 1927.2253,-995.766"/>
<polygon fill="#000000" stroke="#000000" points="1927.9265,-999.2102 1937.4847,-994.6396 1927.1625,-992.252 1927.9265,-999.2102"/>
</g>
<!-- header_54 -->
<g id="node55" class="node">
<title>header_54</title>
<ellipse fill="none" stroke="#000000" cx="5318.5" cy="-987.5015" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="5318.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_54 -->
<g id="edge54" class="edge">
<title>section_6&#45;&gt;header_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5562.0816,-1064.5806C5520.4973,-1054.5243 5461.9388,-1039.4722 5411.5,-1023.2015 5396.9232,-1018.4993 5381.3018,-1012.7779 5367.1031,-1007.3053"/>
<polygon fill="#000000" stroke="#000000" points="5368.1191,-1003.9449 5357.5308,-1003.5719 5365.5755,-1010.4664 5368.1191,-1003.9449"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="5452.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5452.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_6&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5573.9086,-1062.1896C5549.4614,-1052.6857 5518.7114,-1039.1857 5493.5,-1023.2015 5487.5017,-1019.3985 5481.4871,-1014.7467 5475.9842,-1010.0736"/>
<polygon fill="#000000" stroke="#000000" points="5478.155,-1007.3207 5468.3493,-1003.3081 5473.5125,-1012.5598 5478.155,-1007.3207"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="5534.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5534.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>section_6&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5600.2994,-1059.4797C5587.6601,-1045.6535 5569.9843,-1026.3178 5556.1352,-1011.1683"/>
<polygon fill="#000000" stroke="#000000" points="5558.6192,-1008.6982 5549.2887,-1003.6789 5553.4527,-1013.4212 5558.6192,-1008.6982"/>
</g>
<!-- prose_57 -->
<g id="node58" class="node">
<title>prose_57</title>
<ellipse fill="none" stroke="#000000" cx="5616.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5616.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_57 -->
<g id="edge57" class="edge">
<title>section_6&#45;&gt;prose_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5616.5,-1059.0494C5616.5,-1046.648 5616.5,-1029.9647 5616.5,-1015.8278"/>
<polygon fill="#000000" stroke="#000000" points="5620.0001,-1015.6266 5616.5,-1005.6266 5613.0001,-1015.6267 5620.0001,-1015.6266"/>
</g>
<!-- prose_58 -->
<g id="node59" class="node">
<title>prose_58</title>
<ellipse fill="none" stroke="#000000" cx="5815.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5815.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_58 -->
<g id="edge58" class="edge">
<title>section_6&#45;&gt;prose_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5652.0772,-1061.1649C5688.6117,-1044.6969 5745.0858,-1019.241 5781.1615,-1002.9797"/>
<polygon fill="#000000" stroke="#000000" points="5782.6371,-1006.1538 5790.3154,-998.8535 5779.7605,-999.7721 5782.6371,-1006.1538"/>
</g>
<!-- prose_59 -->
<g id="node60" class="node">
<title>prose_59</title>
<ellipse fill="none" stroke="#000000" cx="6240.5" cy="-987.5015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6240.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_59 -->
<g id="edge59" class="edge">
<title>section_6&#45;&gt;prose_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5681.2206,-1067.8979C5809.4532,-1049.4645 6092.5829,-1008.7646 6198.9905,-993.4685"/>
<polygon fill="#000000" stroke="#000000" points="6199.6202,-996.914 6209.0204,-992.0267 6198.6241,-989.9852 6199.6202,-996.914"/>
</g>
<!-- section_60 -->
<g id="node61" class="node">
<title>section_60</title>
<ellipse fill="none" stroke="#000000" cx="7119.5" cy="-987.5015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7119.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 205&#45;227</text>
</g>
<!-- section_6&#45;&gt;section_60 -->
<g id="edge60" class="edge">
<title>section_6&#45;&gt;section_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5689.7553,-1072.8296C5941.3941,-1057.8116 6769.587,-1008.3845 7036.0923,-992.4793"/>
<polygon fill="#000000" stroke="#000000" points="7036.3182,-995.9722 7046.0919,-991.8825 7035.9011,-988.9846 7036.3182,-995.9722"/>
</g>
<!-- section_61 -->
<g id="node62" class="node">
<title>section_61</title>
<ellipse fill="none" stroke="#000000" cx="10821.5" cy="-987.5015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10821.5" y="-983.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 241&#45;275</text>
</g>
<!-- section_6&#45;&gt;section_61 -->
<g id="edge61" class="edge">
<title>section_6&#45;&gt;section_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5691.8337,-1075.9032C6278.675,-1065.7899 10112.2472,-999.7243 10735.833,-988.9778"/>
<polygon fill="#000000" stroke="#000000" points="10736.1507,-992.473 10746.0889,-988.8011 10736.03,-985.474 10736.1507,-992.473"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="392.5,-883.3014 338.5,-883.3014 338.5,-847.3014 392.5,-847.3014 392.5,-883.3014"/>
</g>
<!-- prose_9&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>prose_9&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M520.777,-971.4902C513.5411,-964.7599 504.5609,-957.2461 495.5,-951.8015 457.1536,-928.7593 436.8797,-943.1814 401.5,-915.8015 393.2843,-909.4435 386.1478,-900.7046 380.444,-892.2827"/>
<polygon fill="#000000" stroke="#000000" points="383.3389,-890.312 375.0334,-883.7339 377.424,-894.0556 383.3389,-890.312"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="636.5,-884.602 410.5,-884.602 410.5,-846.0008 636.5,-846.0008 636.5,-884.602"/>
<text text-anchor="middle" x="523.5" y="-869.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="523.5" y="-854.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_10&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M639.1578,-969.9932C616.561,-949.5389 578.9398,-915.4847 552.7646,-891.7913"/>
<polygon fill="#000000" stroke="#000000" points="554.8007,-888.9134 545.0381,-884.7974 550.1031,-894.1031 554.8007,-888.9134"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1188.5,-908.5017 654.5,-908.5017 654.5,-822.1011 1188.5,-822.1011 1188.5,-908.5017"/>
<text text-anchor="middle" x="921.5" y="-861.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="921.5" y="-845.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="921.5" y="-830.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- prose_14&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_14&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.0232,-971.6923C1097.7943,-965.1508 1089.0255,-957.7263 1080.5,-951.8015 1060.9687,-938.2282 1039.088,-925.1199 1017.9543,-913.388"/>
<polygon fill="#000000" stroke="#000000" points="1019.4023,-910.1902 1008.9518,-908.4469 1016.0342,-916.3267 1019.4023,-910.1902"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1328,-900.5018 1207,-900.5018 1207,-830.101 1328,-830.101 1328,-900.5018"/>
<text text-anchor="middle" x="1267.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="1267.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="1267.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_15&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1252.156,-969.4704C1254.4315,-954.0222 1257.8079,-931.1002 1260.8145,-910.6884"/>
<polygon fill="#000000" stroke="#000000" points="1264.305,-911.009 1262.2997,-900.6057 1257.3797,-909.9889 1264.305,-911.009"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="1391.5" cy="-865.3014" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1391.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_16&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_16&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1407.6965,-969.4704C1404.5813,-949.435 1399.5116,-916.8284 1395.8736,-893.4306"/>
<polygon fill="#000000" stroke="#000000" points="1399.3099,-892.7499 1394.315,-883.4064 1392.393,-893.8254 1399.3099,-892.7499"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1487.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1487.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_16&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1421.6965,-969.7325C1434.7893,-948.954 1456.5618,-914.4008 1471.45,-890.773"/>
<polygon fill="#000000" stroke="#000000" points="1474.4166,-892.6302 1476.7865,-882.3038 1468.4942,-888.8984 1474.4166,-892.6302"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="1594.5" cy="-865.3014" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1594.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_17&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_17&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1934.8223,-982.2368C1863.76,-974.7036 1750.112,-956.8878 1660.5,-915.8015 1646.0418,-909.1725 1631.7965,-898.8878 1620.2621,-889.3253"/>
<polygon fill="#000000" stroke="#000000" points="1622.2442,-886.4139 1612.378,-882.5526 1617.6828,-891.7237 1622.2442,-886.4139"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="1701.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1701.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_17&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1937.3946,-980.5034C1882.1543,-972.1061 1802.6776,-954.0297 1743.5,-915.8015 1733.6281,-909.4243 1724.8976,-899.997 1717.9895,-891.009"/>
<polygon fill="#000000" stroke="#000000" points="1720.6384,-888.6988 1711.9468,-882.6402 1714.9632,-892.7966 1720.6384,-888.6988"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="1829.5" cy="-865.3014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1829.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- section_17&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_17&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1978.4451,-970.5101C1948.1463,-949.1083 1895.9605,-912.2463 1862.0981,-888.3274"/>
<polygon fill="#000000" stroke="#000000" points="1864.0955,-885.4531 1853.9083,-882.5424 1860.0569,-891.1706 1864.0955,-885.4531"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="2002.5" cy="-865.3014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2002.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;76</text>
</g>
<!-- section_17&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_17&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2002.5,-969.4704C2002.5,-949.435 2002.5,-916.8284 2002.5,-893.4306"/>
<polygon fill="#000000" stroke="#000000" points="2006.0001,-893.4064 2002.5,-883.4064 1999.0001,-893.4064 2006.0001,-893.4064"/>
</g>
<!-- section_27 -->
<g id="node28" class="node">
<title>section_27</title>
<ellipse fill="none" stroke="#000000" cx="2163.5" cy="-865.3014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2163.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;98</text>
</g>
<!-- section_17&#45;&gt;section_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;section_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2025.2259,-970.2524C2053.4728,-948.8128 2101.7786,-912.1484 2133.1659,-888.3252"/>
<polygon fill="#000000" stroke="#000000" points="2135.2993,-891.1 2141.1487,-882.2662 2131.0672,-885.5241 2135.2993,-891.1"/>
</g>
<!-- section_28 -->
<g id="node29" class="node">
<title>section_28</title>
<ellipse fill="none" stroke="#000000" cx="2567.5" cy="-865.3014" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2567.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;124</text>
</g>
<!-- section_17&#45;&gt;section_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;section_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2056.4186,-975.8398C2161.1082,-953.1972 2391.4367,-903.381 2503.6027,-879.1213"/>
<polygon fill="#000000" stroke="#000000" points="2504.3949,-882.531 2513.429,-876.9961 2502.915,-875.6892 2504.3949,-882.531"/>
</g>
<!-- section_29 -->
<g id="node30" class="node">
<title>section_29</title>
<ellipse fill="none" stroke="#000000" cx="3194.5" cy="-865.3014" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3194.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 125&#45;162</text>
</g>
<!-- section_17&#45;&gt;section_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;section_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2068.285,-980.7574C2272.1115,-959.8618 2892.7129,-896.2397 3114.5827,-873.4943"/>
<polygon fill="#000000" stroke="#000000" points="3115.2523,-876.944 3124.8432,-872.4424 3114.5384,-869.9805 3115.2523,-876.944"/>
</g>
<!-- section_30 -->
<g id="node31" class="node">
<title>section_30</title>
<ellipse fill="none" stroke="#000000" cx="3993.5" cy="-865.3014" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3993.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 163&#45;180</text>
</g>
<!-- section_17&#45;&gt;section_30 -->
<g id="edge30" class="edge">
<title>section_17&#45;&gt;section_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2072.0252,-983.9469C2264.0897,-974.0512 2818.1971,-944.9879 3278.5,-915.8015 3507.8679,-901.2579 3778.4252,-881.4149 3911.3604,-871.4885"/>
<polygon fill="#000000" stroke="#000000" points="3911.7554,-874.9688 3921.4667,-870.7332 3911.2336,-867.9883 3911.7554,-874.9688"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="967,-686.1012 454,-686.1012 454,-569.1009 967,-569.1009 967,-686.1012"/>
<text text-anchor="middle" x="710.5" y="-638.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="710.5" y="-623.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="710.5" y="-608.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="710.5" y="-592.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="710.5" y="-577.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- prose_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1478.1961,-847.6147C1471.1399,-836.1441 1460.3042,-822.0345 1446.5,-814.8013 1353.7155,-766.1837 1076.6746,-809.4229 976.5,-778.8013 913.7122,-759.6082 849.5473,-723.7026 799.9714,-691.6965"/>
<polygon fill="#000000" stroke="#000000" points="801.8054,-688.7141 791.5169,-686.1849 797.9826,-694.5781 801.8054,-688.7141"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1039.5,-645.6011 985.5,-645.6011 985.5,-609.6011 1039.5,-609.6011 1039.5,-645.6011"/>
</g>
<!-- prose_24&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>prose_24&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1692.221,-848.0272C1684.9736,-836.4303 1673.7484,-822.0022 1659.5,-814.8013 1538.1084,-753.4524 1152.7078,-866.2103 1048.5,-778.8013 1012.8084,-748.8634 1008.8838,-690.5408 1010.1122,-655.7328"/>
<polygon fill="#000000" stroke="#000000" points="1013.6077,-655.9103 1010.6295,-645.7427 1006.617,-655.5483 1013.6077,-655.9103"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1543,-739.2019 1058,-739.2019 1058,-516.0003 1543,-516.0003 1543,-739.2019"/>
<text text-anchor="middle" x="1300.5" y="-724.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1300.5" y="-708.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1300.5" y="-693.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1300.5" y="-678.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1300.5" y="-662.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1300.5" y="-647.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1300.5" y="-631.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1300.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1300.5" y="-601.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1300.5" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1300.5" y="-570.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1300.5" y="-554.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1300.5" y="-539.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1300.5" y="-524.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_25&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.1145,-848.1243C1788.2606,-837.0291 1764.921,-823.1535 1742.5,-814.8013 1661.9599,-784.7988 1632.8206,-809.3866 1552.5,-778.8013 1527.4452,-769.2607 1502.0586,-757.2663 1477.5321,-744.2274"/>
<polygon fill="#000000" stroke="#000000" points="1479.0005,-741.0429 1468.5371,-739.379 1475.6791,-747.2048 1479.0005,-741.0429"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1955.5,-779.0018 1561.5,-779.0018 1561.5,-476.2003 1955.5,-476.2003 1955.5,-779.0018"/>
<text text-anchor="middle" x="1758.5" y="-763.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="1758.5" y="-748.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="1758.5" y="-732.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1758.5" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="1758.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="1758.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="1758.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="1758.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="1758.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1758.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1758.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="1758.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="1758.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1758.5" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toValue(node)</text>
<text text-anchor="middle" x="1758.5" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.str:sub(node.first,node.last)</text>
<text text-anchor="middle" x="1758.5" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_26&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1984.1603,-847.4352C1969.2178,-832.8784 1946.4971,-810.7444 1921.1308,-786.033"/>
<polygon fill="#000000" stroke="#000000" points="1923.5156,-783.47 1913.9104,-778.999 1918.631,-788.484 1923.5156,-783.47"/>
</g>
<!-- header_34 -->
<g id="node35" class="node">
<title>header_34</title>
<ellipse fill="none" stroke="#000000" cx="2043.5" cy="-627.6011" rx="70.1446" ry="18"/>
<text text-anchor="middle" x="2043.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkDeep</text>
</g>
<!-- section_27&#45;&gt;header_34 -->
<g id="edge34" class="edge">
<title>section_27&#45;&gt;header_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2154.4805,-847.4352C2133.6317,-806.1372 2081.9942,-703.8517 2057.2066,-654.7516"/>
<polygon fill="#000000" stroke="#000000" points="2060.2553,-653.0241 2052.6242,-645.6745 2054.0064,-656.1788 2060.2553,-653.0241"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="2163.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2163.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_27&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_27&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2163.5,-847.0441C2163.5,-805.823 2163.5,-705.3011 2163.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="2167.0001,-655.9205 2163.5,-645.9205 2160.0001,-655.9206 2167.0001,-655.9205"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="2291.5" cy="-627.6011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2291.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 82&#45;97</text>
</g>
<!-- section_27&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>section_27&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2173.1208,-847.4352C2195.3595,-806.1372 2250.4395,-703.8517 2276.8796,-654.7516"/>
<polygon fill="#000000" stroke="#000000" points="2280.1079,-656.1386 2281.7676,-645.6745 2273.9447,-652.8197 2280.1079,-656.1386"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="2490.5" cy="-627.6011" rx="103.9559" ry="18"/>
<text text-anchor="middle" x="2490.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.walkBroad, N.walk</text>
</g>
<!-- section_28&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_28&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2561.5858,-847.0441C2548.1719,-805.6351 2515.3727,-704.3834 2499.4561,-655.2486"/>
<polygon fill="#000000" stroke="#000000" points="2502.7404,-654.0298 2496.329,-645.5952 2496.0811,-656.1871 2502.7404,-654.0298"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="2644.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2644.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_28&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_28&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2575.7792,-847.339C2583.5672,-830.0239 2595.2346,-802.9644 2603.5,-778.8013 2617.9887,-736.4446 2630.795,-686.0511 2638.093,-655.4646"/>
<polygon fill="#000000" stroke="#000000" points="2641.55,-656.0538 2640.4384,-645.5174 2634.7368,-654.4473 2641.55,-656.0538"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="2782.5" cy="-627.6011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2782.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 103&#45;122</text>
</g>
<!-- section_28&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_28&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2596.0131,-848.6242C2621.4525,-832.8197 2658.7129,-807.3077 2685.5,-778.8013 2721.4997,-740.4911 2752.1462,-687.0781 2768.8814,-655.0606"/>
<polygon fill="#000000" stroke="#000000" points="2772.1566,-656.3449 2773.6189,-645.8514 2765.932,-653.1426 2772.1566,-656.3449"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="3118.5" cy="-627.6011" rx="102.5369" ry="18"/>
<text text-anchor="middle" x="3118.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.select(node, pred)</text>
</g>
<!-- section_29&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_29&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3188.6626,-847.0441C3175.4229,-805.6351 3143.0496,-704.3834 3127.3398,-655.2486"/>
<polygon fill="#000000" stroke="#000000" points="3130.6325,-654.0542 3124.2533,-645.5952 3123.965,-656.1861 3130.6325,-654.0542"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="3271.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3271.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_29&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_29&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3202.7792,-847.339C3210.5672,-830.0239 3222.2346,-802.9644 3230.5,-778.8013 3244.9887,-736.4446 3257.795,-686.0511 3265.093,-655.4646"/>
<polygon fill="#000000" stroke="#000000" points="3268.55,-656.0538 3267.4384,-645.5174 3261.7368,-654.4473 3268.55,-656.0538"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="3619.5" cy="-627.6011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3619.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 131&#45;160</text>
</g>
<!-- section_29&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>section_29&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3224.3852,-848.5868C3299.4931,-806.5793 3496.1464,-696.5921 3580.3354,-649.5056"/>
<polygon fill="#000000" stroke="#000000" points="3582.0598,-652.5515 3589.079,-644.6154 3578.6428,-646.4421 3582.0598,-652.5515"/>
</g>
<!-- header_49 -->
<g id="node50" class="node">
<title>header_49</title>
<ellipse fill="none" stroke="#000000" cx="3993.5" cy="-627.6011" rx="82.7165" ry="18"/>
<text text-anchor="middle" x="3993.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : N.tokens(node)</text>
</g>
<!-- section_30&#45;&gt;header_49 -->
<g id="edge49" class="edge">
<title>section_30&#45;&gt;header_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3993.5,-847.0441C3993.5,-805.823 3993.5,-705.3011 3993.5,-655.9208"/>
<polygon fill="#000000" stroke="#000000" points="3997.0001,-655.9205 3993.5,-645.9205 3990.0001,-655.9206 3997.0001,-655.9205"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="4219.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4219.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_30&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_30&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4013.0157,-847.9035C4031.9806,-830.7777 4061.3697,-803.6525 4085.5,-778.8013 4127.4888,-735.5581 4173.4863,-682.2399 4199.1907,-651.8579"/>
<polygon fill="#000000" stroke="#000000" points="4202.1103,-653.8249 4205.8823,-643.9243 4196.7595,-649.3117 4202.1103,-653.8249"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="4587.5" cy="-627.6011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4587.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 167&#45;179</text>
</g>
<!-- section_30&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>section_30&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4016.9765,-848.1432C4033.2196,-837.0562 4055.747,-823.1827 4077.5,-814.8013 4154.8493,-784.9988 4181.6524,-804.3781 4260.5,-778.8013 4368.6456,-743.7207 4488.0801,-682.2258 4548.2464,-649.5152"/>
<polygon fill="#000000" stroke="#000000" points="4550.2871,-652.3886 4557.3831,-644.521 4546.9296,-646.2463 4550.2871,-652.3886"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="1785.5,-248.1019 1615.5,-248.1019 1615.5,-192.2989 1785.5,-192.2989 1785.5,-248.1019"/>
<text text-anchor="middle" x="1700.5" y="-200.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">Depth&#45;first iterator. </text>
</g>
<!-- prose_35&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>prose_35&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2164.5536,-609.5863C2165.3506,-577.3624 2161.8713,-510.0817 2122.5,-476.4008 2011.0604,-381.0679 1912.2765,-527.7843 1794.5,-440.4008 1735.5976,-396.6985 1713.2359,-308.6292 1705.0261,-258.1149"/>
<polygon fill="#000000" stroke="#000000" points="1708.4421,-257.2967 1703.481,-247.9352 1701.5214,-258.3473 1708.4421,-257.2967"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2211.5,-332.5009 1803.5,-332.5009 1803.5,-107.8999 2211.5,-107.8999 2211.5,-332.5009"/>
<text text-anchor="middle" x="2007.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkDeep(node)</text>
<text text-anchor="middle" x="2007.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2007.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2007.5" y="-255.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2007.5" y="-239.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2007.5" y="-224.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2007.5" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2007.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2007.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2007.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2007.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2007.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_36&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2282.0697,-609.445C2266.8529,-580.5778 2235.4485,-522.7416 2204.5,-476.4008 2174.0544,-430.813 2138.1533,-382.7048 2105.3955,-340.6403"/>
<polygon fill="#000000" stroke="#000000" points="2108.0175,-338.3111 2099.1034,-332.5848 2102.5009,-342.6202 2108.0175,-338.3111"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2567.5,-248.1019 2229.5,-248.1019 2229.5,-192.2989 2567.5,-192.2989 2567.5,-248.1019"/>
<text text-anchor="middle" x="2398.5" y="-200.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">Breadth&#45;first iterator. &#160;This is the default. </text>
</g>
<!-- prose_40&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_40&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2642.0447,-609.5144C2637.5469,-580.2483 2626.2793,-521.2654 2603.5,-476.4008 2600.3635,-470.2234 2483.5509,-325.4103 2427.6886,-256.2893"/>
<polygon fill="#000000" stroke="#000000" points="2430.1982,-253.8264 2421.19,-248.2495 2424.7543,-258.2268 2430.1982,-253.8264"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2979.5,-363.7009 2585.5,-363.7009 2585.5,-76.6999 2979.5,-76.6999 2979.5,-363.7009"/>
<text text-anchor="middle" x="2782.5" y="-348.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walk(node)</text>
<text text-anchor="middle" x="2782.5" y="-333.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="2782.5" y="-317.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not ast.isNode then return nil end</text>
<text text-anchor="middle" x="2782.5" y="-286.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="2782.5" y="-270.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="2782.5" y="-255.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &#39;table&#39; and v.isNode then</text>
<text text-anchor="middle" x="2782.5" y="-240.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="2782.5" y="-224.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2782.5" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2782.5" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2782.5" y="-162.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="2782.5" y="-147.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2782.5" y="-115.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.walkBroad(node)</text>
<text text-anchor="middle" x="2782.5" y="-100.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return N.walk(node)</text>
<text text-anchor="middle" x="2782.5" y="-84.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_41&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2782.5,-609.5699C2782.5,-568.4181 2782.5,-464.1519 2782.5,-373.8655"/>
<polygon fill="#000000" stroke="#000000" points="2786.0001,-373.7747 2782.5,-363.7748 2779.0001,-373.7748 2786.0001,-373.7747"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3545.5,-263.4007 2997.5,-263.4007 2997.5,-177.0001 3545.5,-177.0001 3545.5,-263.4007"/>
<text text-anchor="middle" x="3271.5" y="-216.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Takes the Node and walks it, yielding the Nodes which match the predicate.</text>
<text text-anchor="middle" x="3271.5" y="-200.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">=pred= is either a string, which matches to =id=, or a function, which takes</text>
<text text-anchor="middle" x="3271.5" y="-185.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">a Node and returns true or false on some premise. </text>
</g>
<!-- prose_45&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>prose_45&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3271.5,-609.5699C3271.5,-551.2224 3271.5,-365.9948 3271.5,-273.6323"/>
<polygon fill="#000000" stroke="#000000" points="3275.0001,-273.3798 3271.5,-263.3799 3268.0001,-273.3799 3275.0001,-273.3798"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4097.5,-440.6014 3563.5,-440.6014 3563.5,.2006 4097.5,.2006 4097.5,-440.6014"/>
<text text-anchor="middle" x="3830.5" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.select(node, pred)</text>
<text text-anchor="middle" x="3830.5" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function qualifies(node, pred)</text>
<text text-anchor="middle" x="3830.5" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(pred) == &#39;string&#39; then</text>
<text text-anchor="middle" x="3830.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(node) == &#39;table&#39; and node.isNode and node.id == pred then</text>
<text text-anchor="middle" x="3830.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="3830.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3830.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="3830.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(pred) == &#39;function&#39; then</text>
<text text-anchor="middle" x="3830.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pred(node)</text>
<text text-anchor="middle" x="3830.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3830.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:halt(&quot;cannot select on predicate of type &quot; .. type(pred))</text>
<text text-anchor="middle" x="3830.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function traverse(ast)</text>
<text text-anchor="middle" x="3830.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if qualifies(ast, pred) then</text>
<text text-anchor="middle" x="3830.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(ast)</text>
<text text-anchor="middle" x="3830.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.isNode then</text>
<text text-anchor="middle" x="3830.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(ast) do</text>
<text text-anchor="middle" x="3830.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;traverse(v)</text>
<text text-anchor="middle" x="3830.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3830.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="3830.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_46&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3628.8387,-609.5699C3644.3143,-579.6894 3677.0239,-516.5335 3711.682,-449.6152"/>
<polygon fill="#000000" stroke="#000000" points="3714.8695,-451.0711 3716.3607,-440.5817 3708.6537,-447.8517 3714.8695,-451.0711"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="4509.5,-248.1019 4115.5,-248.1019 4115.5,-192.2989 4509.5,-192.2989 4509.5,-248.1019"/>
<text text-anchor="middle" x="4312.5" y="-200.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Iterator returning all &#39;captured&#39; values as strings.</text>
</g>
<!-- prose_50&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_50&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4223.6161,-609.5699C4237.7529,-547.6413 4284.5179,-342.7801 4303.9337,-257.7263"/>
<polygon fill="#000000" stroke="#000000" points="4307.3485,-258.4936 4306.1619,-247.9655 4300.5241,-256.9357 4307.3485,-258.4936"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4921.5,-309.2007 4527.5,-309.2007 4527.5,-131.2001 4921.5,-131.2001 4921.5,-309.2007"/>
<text text-anchor="middle" x="4724.5" y="-294.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.tokens(node)</text>
<text text-anchor="middle" x="4724.5" y="-278.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local function traverse(ast)</text>
<text text-anchor="middle" x="4724.5" y="-263.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in N.walk(ast) do</text>
<text text-anchor="middle" x="4724.5" y="-247.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not node[1] then</text>
<text text-anchor="middle" x="4724.5" y="-232.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;coroutine.yield(node:toValue())</text>
<text text-anchor="middle" x="4724.5" y="-217.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4724.5" y="-201.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4724.5" y="-186.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4724.5" y="-154.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return coroutine.wrap(function() traverse(node) end)</text>
<text text-anchor="middle" x="4724.5" y="-139.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">end &#160;</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_51&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4593.5635,-609.5699C4610.3272,-559.7193 4658.2359,-417.2519 4691.2042,-319.2129"/>
<polygon fill="#000000" stroke="#000000" points="4694.5763,-320.1658 4694.4464,-309.5718 4687.9414,-317.9346 4694.5763,-320.1658"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4648.5,-900.6017 4086.5,-900.6017 4086.5,-830.001 4648.5,-830.001 4648.5,-900.6017"/>
<text text-anchor="middle" x="4367.5" y="-853.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="4367.5" y="-838.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- prose_55&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>prose_55&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5438.6115,-971.1837C5431.3525,-963.8631 5421.8342,-955.9537 5411.5,-951.8015 5255.8482,-889.2604 4824.2315,-934.2263 4657.5,-915.8015 4625.8519,-912.3042 4592.4312,-907.5179 4559.9753,-902.2773"/>
<polygon fill="#000000" stroke="#000000" points="4560.3704,-898.7955 4549.9368,-900.6373 4559.2416,-905.704 4560.3704,-898.7955"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="5214.5,-900.5018 4666.5,-900.5018 4666.5,-830.101 5214.5,-830.101 5214.5,-900.5018"/>
<text text-anchor="middle" x="4940.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="4940.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="4940.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- prose_56&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_56&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5520.0769,-971.1943C5512.8303,-964.0633 5503.4768,-956.3105 5493.5,-951.8015 5383.1819,-901.9425 5343.1187,-934.4395 5223.5,-915.8015 5196.7091,-911.6271 5168.5439,-906.9502 5140.7941,-902.1719"/>
<polygon fill="#000000" stroke="#000000" points="5141.0429,-898.6631 5130.5927,-900.4077 5139.8499,-905.5607 5141.0429,-898.6631"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="5766.5,-900.5018 5232.5,-900.5018 5232.5,-830.101 5766.5,-830.101 5766.5,-900.5018"/>
<text text-anchor="middle" x="5499.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="5499.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="5499.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- prose_57&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>prose_57&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5601.2043,-971.526C5585.789,-955.4255 5561.3305,-929.88 5540.2622,-907.8753"/>
<polygon fill="#000000" stroke="#000000" points="5542.709,-905.3699 5533.2652,-900.5673 5537.6528,-910.2109 5542.709,-905.3699"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="6312,-915.8015 5785,-915.8015 5785,-814.8012 6312,-814.8012 6312,-915.8015"/>
<text text-anchor="middle" x="6048.5" y="-884.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="6048.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="6048.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="6048.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="6048.5" y="-823.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- prose_58&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>prose_58&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5839.1235,-975.1118C5863.7582,-962.1918 5904.1155,-941.0258 5942.8573,-920.7072"/>
<polygon fill="#000000" stroke="#000000" points="5944.9046,-923.5857 5952.1349,-915.8414 5941.6533,-917.3865 5944.9046,-923.5857"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="6836.5,-908.5017 6330.5,-908.5017 6330.5,-822.1011 6836.5,-822.1011 6836.5,-908.5017"/>
<text text-anchor="middle" x="6583.5" y="-877.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="6583.5" y="-861.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="6583.5" y="-846.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- prose_59&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>prose_59&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6267.7013,-977.8105C6307.6532,-963.5769 6384.8427,-936.0767 6452.9044,-911.8285"/>
<polygon fill="#000000" stroke="#000000" points="6454.1975,-915.0834 6462.4429,-908.4302 6451.8482,-908.4893 6454.1975,-915.0834"/>
</g>
<!-- header_67 -->
<g id="node68" class="node">
<title>header_67</title>
<ellipse fill="none" stroke="#000000" cx="6900.5" cy="-865.3014" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="6900.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_60&#45;&gt;header_67 -->
<g id="edge67" class="edge">
<title>section_60&#45;&gt;header_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7075.3854,-972.7534C7041.1801,-960.2703 6993.3819,-940.4834 6955.5,-915.8015 6944.1297,-908.3932 6932.8613,-898.5989 6923.5129,-889.6089"/>
<polygon fill="#000000" stroke="#000000" points="6925.7191,-886.8678 6916.1517,-882.3165 6920.7927,-891.8408 6925.7191,-886.8678"/>
</g>
<!-- prose_68 -->
<g id="node69" class="node">
<title>prose_68</title>
<ellipse fill="none" stroke="#000000" cx="6996.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6996.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_60&#45;&gt;prose_68 -->
<g id="edge68" class="edge">
<title>section_60&#45;&gt;prose_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7097.7058,-970.1732C7080.6393,-956.2037 7056.6631,-935.6779 7037.5,-915.8015 7029.8578,-907.8747 7022.0896,-898.6607 7015.3999,-890.2898"/>
<polygon fill="#000000" stroke="#000000" points="7018.0408,-887.9856 7009.1143,-882.2787 7012.5336,-892.3067 7018.0408,-887.9856"/>
</g>
<!-- prose_69 -->
<g id="node70" class="node">
<title>prose_69</title>
<ellipse fill="none" stroke="#000000" cx="7078.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7078.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_60&#45;&gt;prose_69 -->
<g id="edge69" class="edge">
<title>section_60&#45;&gt;prose_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7113.4503,-969.4704C7106.659,-949.2291 7095.5628,-916.1569 7087.6967,-892.7121"/>
<polygon fill="#000000" stroke="#000000" points="7090.9404,-891.3764 7084.4412,-883.0091 7084.304,-893.6031 7090.9404,-891.3764"/>
</g>
<!-- prose_70 -->
<g id="node71" class="node">
<title>prose_70</title>
<ellipse fill="none" stroke="#000000" cx="7160.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7160.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_60&#45;&gt;prose_70 -->
<g id="edge70" class="edge">
<title>section_60&#45;&gt;prose_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7125.5497,-969.4704C7132.341,-949.2291 7143.4372,-916.1569 7151.3033,-892.7121"/>
<polygon fill="#000000" stroke="#000000" points="7154.696,-893.6031 7154.5588,-883.0091 7148.0596,-891.3764 7154.696,-893.6031"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="7242.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7242.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_60&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_60&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7141.2942,-970.1732C7158.3607,-956.2037 7182.3369,-935.6779 7201.5,-915.8015 7209.1422,-907.8747 7216.9104,-898.6607 7223.6001,-890.2898"/>
<polygon fill="#000000" stroke="#000000" points="7226.4664,-892.3067 7229.8857,-882.2787 7220.9592,-887.9856 7226.4664,-892.3067"/>
</g>
<!-- prose_72 -->
<g id="node73" class="node">
<title>prose_72</title>
<ellipse fill="none" stroke="#000000" cx="7545.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7545.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_60&#45;&gt;prose_72 -->
<g id="edge72" class="edge">
<title>section_60&#45;&gt;prose_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7167.9529,-973.6026C7253.3129,-949.1166 7428.8202,-898.7715 7506.7489,-876.4173"/>
<polygon fill="#000000" stroke="#000000" points="7507.9911,-879.7022 7516.6383,-873.5805 7506.0609,-872.9736 7507.9911,-879.7022"/>
</g>
<!-- section_73 -->
<g id="node74" class="node">
<title>section_73</title>
<ellipse fill="none" stroke="#000000" cx="8342.5" cy="-865.3014" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8342.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 228&#45;240</text>
</g>
<!-- section_60&#45;&gt;section_73 -->
<g id="edge73" class="edge">
<title>section_60&#45;&gt;section_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7189.2016,-980.537C7401.1793,-959.3566 8037.3497,-895.7915 8262.4756,-873.2973"/>
<polygon fill="#000000" stroke="#000000" points="8262.9589,-876.7665 8272.5614,-872.2895 8262.2629,-869.8012 8262.9589,-876.7665"/>
</g>
<!-- header_88 -->
<g id="node89" class="node">
<title>header_88</title>
<ellipse fill="none" stroke="#000000" cx="10457.5" cy="-865.3014" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="10457.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_61&#45;&gt;header_88 -->
<g id="edge88" class="edge">
<title>section_61&#45;&gt;header_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10757.6453,-977.885C10698.1224,-967.4651 10607.7757,-947.88 10534.5,-915.8015 10518.0063,-908.5809 10501.1219,-897.9394 10487.3829,-888.2845"/>
<polygon fill="#000000" stroke="#000000" points="10489.4268,-885.4432 10479.2665,-882.4398 10485.3362,-891.1237 10489.4268,-885.4432"/>
</g>
<!-- prose_89 -->
<g id="node90" class="node">
<title>prose_89</title>
<ellipse fill="none" stroke="#000000" cx="10575.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10575.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_89 -->
<g id="edge89" class="edge">
<title>section_61&#45;&gt;prose_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10762.7188,-976.0472C10719.4073,-965.5451 10660.611,-946.8061 10616.5,-915.8015 10606.9779,-909.1086 10598.4776,-899.6198 10591.7197,-890.671"/>
<polygon fill="#000000" stroke="#000000" points="10594.4532,-888.4759 10585.7979,-882.3656 10588.7536,-892.5398 10594.4532,-888.4759"/>
</g>
<!-- prose_90 -->
<g id="node91" class="node">
<title>prose_90</title>
<ellipse fill="none" stroke="#000000" cx="10657.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10657.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_90 -->
<g id="edge90" class="edge">
<title>section_61&#45;&gt;prose_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10786.7228,-971.5C10760.8239,-958.6111 10725.4377,-938.8763 10698.5,-915.8015 10690.0091,-908.5282 10681.9538,-899.328 10675.267,-890.7789"/>
<polygon fill="#000000" stroke="#000000" points="10677.8795,-888.4296 10669.0709,-882.5424 10672.2856,-892.6378 10677.8795,-888.4296"/>
</g>
<!-- prose_91 -->
<g id="node92" class="node">
<title>prose_91</title>
<ellipse fill="none" stroke="#000000" cx="10739.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10739.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_91 -->
<g id="edge91" class="edge">
<title>section_61&#45;&gt;prose_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10809.4006,-969.4704C10795.4164,-948.6305 10772.3056,-914.1897 10756.5151,-890.6581"/>
<polygon fill="#000000" stroke="#000000" points="10759.3344,-888.5781 10750.856,-882.2246 10753.5218,-892.4786 10759.3344,-888.5781"/>
</g>
<!-- prose_92 -->
<g id="node93" class="node">
<title>prose_92</title>
<ellipse fill="none" stroke="#000000" cx="10821.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10821.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_92 -->
<g id="edge92" class="edge">
<title>section_61&#45;&gt;prose_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10821.5,-969.4704C10821.5,-949.435 10821.5,-916.8284 10821.5,-893.4306"/>
<polygon fill="#000000" stroke="#000000" points="10825.0001,-893.4064 10821.5,-883.4064 10818.0001,-893.4064 10825.0001,-893.4064"/>
</g>
<!-- prose_93 -->
<g id="node94" class="node">
<title>prose_93</title>
<ellipse fill="none" stroke="#000000" cx="11027.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11027.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_93 -->
<g id="edge93" class="edge">
<title>section_61&#45;&gt;prose_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10849.7115,-970.7663C10888.1495,-947.9647 10956.7367,-907.2785 10996.5495,-883.6613"/>
<polygon fill="#000000" stroke="#000000" points="10998.4866,-886.5818 11005.3015,-878.4696 10994.9152,-880.5614 10998.4866,-886.5818"/>
</g>
<!-- prose_94 -->
<g id="node95" class="node">
<title>prose_94</title>
<ellipse fill="none" stroke="#000000" cx="11279.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11279.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_94 -->
<g id="edge94" class="edge">
<title>section_61&#45;&gt;prose_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10871.8241,-974.0744C10963.8409,-949.5232 11157.3791,-897.8848 11240.3638,-875.7434"/>
<polygon fill="#000000" stroke="#000000" points="11241.3953,-879.0907 11250.155,-873.131 11239.5907,-872.3273 11241.3953,-879.0907"/>
</g>
<!-- prose_95 -->
<g id="node96" class="node">
<title>prose_95</title>
<ellipse fill="none" stroke="#000000" cx="11674.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11674.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_95 -->
<g id="edge95" class="edge">
<title>section_61&#45;&gt;prose_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10886.3138,-978.2163C11053.4165,-954.2773 11495.395,-890.9598 11633,-871.2467"/>
<polygon fill="#000000" stroke="#000000" points="11633.7221,-874.679 11643.1247,-869.7962 11632.7294,-867.7498 11633.7221,-874.679"/>
</g>
<!-- prose_96 -->
<g id="node97" class="node">
<title>prose_96</title>
<ellipse fill="none" stroke="#000000" cx="12149.5" cy="-865.3014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12149.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_61&#45;&gt;prose_96 -->
<g id="edge96" class="edge">
<title>section_61&#45;&gt;prose_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10894.2945,-982.5507C11046.7699,-971.9853 11410.8087,-945.737 11715.5,-915.8015 11859.7017,-901.6338 12030.338,-880.4929 12107.6764,-870.6728"/>
<polygon fill="#000000" stroke="#000000" points="12108.4796,-874.0989 12117.9576,-869.3642 12107.5957,-867.1549 12108.4796,-874.0989"/>
</g>
<!-- codeblock_97 -->
<g id="node98" class="node">
<title>codeblock_97</title>
<ellipse fill="none" stroke="#000000" cx="12775.5" cy="-865.3014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12775.5" y="-861.1014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 270&#45;272</text>
</g>
<!-- section_61&#45;&gt;codeblock_97 -->
<g id="edge97" class="edge">
<title>section_61&#45;&gt;codeblock_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10896.1238,-984.4804C11102.2664,-975.943 11696.9436,-950.0195 12190.5,-915.8015 12366.2158,-903.6192 12571.2305,-884.8764 12685.9472,-873.9787"/>
<polygon fill="#000000" stroke="#000000" points="12686.4606,-877.4457 12696.084,-873.0138 12685.7973,-870.4772 12686.4606,-877.4457"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="5926,-678.202 5413,-678.202 5413,-577.0002 5926,-577.0002 5926,-678.202"/>
<text text-anchor="middle" x="5669.5" y="-631.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="5669.5" y="-615.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5669.5" y="-600.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="5669.5" y="-585.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- prose_68&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>prose_68&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6987.5918,-847.9331C6980.5876,-836.2917 6969.6525,-821.8493 6955.5,-814.8013 6853.8881,-764.1982 6043.6918,-809.8303 5934.5,-778.8013 5865.7228,-759.2569 5795.7979,-718.2852 5745.0579,-683.9167"/>
<polygon fill="#000000" stroke="#000000" points="5746.9952,-681.0014 5736.7657,-678.243 5743.0424,-686.7785 5746.9952,-681.0014"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="6429,-654.9015 5944,-654.9015 5944,-600.3006 6429,-600.3006 6429,-654.9015"/>
<text text-anchor="middle" x="6186.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="6186.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- prose_69&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>prose_69&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7069.2337,-847.5423C7062.1942,-836.0394 7051.3631,-821.9209 7037.5,-814.8013 6918.8776,-753.881 6565.8865,-818.2379 6438.5,-778.8013 6357.8084,-753.8207 6276.0889,-697.9124 6228.4196,-661.5273"/>
<polygon fill="#000000" stroke="#000000" points="6230.2653,-658.5308 6220.2091,-655.1956 6225.9905,-664.074 6230.2653,-658.5308"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="6967.5,-662.8014 6447.5,-662.8014 6447.5,-592.4007 6967.5,-592.4007 6967.5,-662.8014"/>
<text text-anchor="middle" x="6707.5" y="-631.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="6707.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="6707.5" y="-600.701" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- prose_70&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>prose_70&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7150.4552,-847.8594C7143.2111,-836.7963 7132.4491,-823.06 7119.5,-814.8013 7064.2431,-779.5595 7037.3792,-803.0712 6976.5,-778.8013 6901.7828,-749.0148 6822.1792,-702.1588 6769.1215,-668.5012"/>
<polygon fill="#000000" stroke="#000000" points="6770.8252,-665.4365 6760.5125,-663.0079 6767.0599,-671.3376 6770.8252,-665.4365"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="7499,-670.2021 6986,-670.2021 6986,-585 7499,-585 7499,-670.2021"/>
<text text-anchor="middle" x="7242.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="7242.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="7242.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="7242.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- prose_71&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prose_71&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7242.5,-847.0441C7242.5,-811.8826 7242.5,-733.5737 7242.5,-680.6626"/>
<polygon fill="#000000" stroke="#000000" points="7246.0001,-680.4393 7242.5,-670.4393 7239.0001,-680.4393 7246.0001,-680.4393"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="8016,-662.9014 7517,-662.9014 7517,-592.3007 8016,-592.3007 8016,-662.9014"/>
<text text-anchor="middle" x="7766.5" y="-631.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="7766.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- prose_72&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>prose_72&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7560.6902,-848.9633C7594.4306,-812.6733 7676.5516,-724.3466 7726.2595,-670.8824"/>
<polygon fill="#000000" stroke="#000000" points="7729.1028,-672.9644 7733.3487,-663.2575 7723.9763,-668.198 7729.1028,-672.9644"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="8142.5" cy="-627.6011" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="8142.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_73&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_73&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8324.7038,-847.5452C8307.7332,-830.3793 8281.6936,-803.424 8260.5,-778.8013 8223.9661,-736.3562 8184.5046,-684.4206 8161.7312,-653.785"/>
<polygon fill="#000000" stroke="#000000" points="8164.5321,-651.6861 8155.7668,-645.7346 8158.9076,-655.8532 8164.5321,-651.6861"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="8301.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8301.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_73&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_73&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8339.3509,-847.0441C8332.2233,-805.7217 8314.8169,-704.8068 8306.3221,-655.5577"/>
<polygon fill="#000000" stroke="#000000" points="8309.7526,-654.8547 8304.6037,-645.5952 8302.8545,-656.0446 8309.7526,-654.8547"/>
</g>
<!-- prose_81 -->
<g id="node82" class="node">
<title>prose_81</title>
<ellipse fill="none" stroke="#000000" cx="8383.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8383.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_73&#45;&gt;prose_81 -->
<g id="edge81" class="edge">
<title>section_73&#45;&gt;prose_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8345.6491,-847.0441C8352.7767,-805.7217 8370.1831,-704.8068 8378.6779,-655.5577"/>
<polygon fill="#000000" stroke="#000000" points="8382.1455,-656.0446 8380.3963,-645.5952 8375.2474,-654.8547 8382.1455,-656.0446"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="8465.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8465.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_73&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_73&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8364.1117,-847.9667C8382.7344,-831.9111 8408.9961,-806.4052 8424.5,-778.8013 8446.5412,-739.558 8457.219,-687.8674 8462.0143,-656.2215"/>
<polygon fill="#000000" stroke="#000000" points="8465.5367,-656.3093 8463.4741,-645.9172 8458.6059,-655.3274 8465.5367,-656.3093"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="8547.5" cy="-627.6011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8547.5" y="-623.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_73&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_73&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8391.0477,-851.4353C8427.9157,-838.4644 8477.1272,-815.4889 8506.5,-778.8013 8535.0587,-743.1304 8543.7913,-689.1572 8546.4203,-656.2681"/>
<polygon fill="#000000" stroke="#000000" points="8549.9331,-656.188 8547.0977,-645.9797 8542.9482,-655.7281 8549.9331,-656.188"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="7973.5,-248.1019 7481.5,-248.1019 7481.5,-192.2989 7973.5,-192.2989 7973.5,-248.1019"/>
<text text-anchor="middle" x="7727.5" y="-200.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- prose_80&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>prose_80&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8302.4942,-609.4077C8303.1626,-577.2056 8299.4393,-510.3738 8260.5,-476.4008 8166.6205,-394.4947 8096.2318,-491.2638 7982.5,-440.4008 7886.7062,-397.56 7799.9428,-306.6221 7756.598,-256.0384"/>
<polygon fill="#000000" stroke="#000000" points="7759.1564,-253.6437 7750.0195,-248.2801 7753.8173,-258.1709 7759.1564,-253.6437"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="8371.5,-247.5008 7991.5,-247.5008 7991.5,-192.9 8371.5,-192.9 8371.5,-247.5008"/>
<text text-anchor="middle" x="8181.5" y="-216.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="8181.5" y="-201.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- prose_81&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>prose_81&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8380.3604,-609.3257C8374.9769,-580.2951 8362.5822,-522.239 8342.5,-476.4008 8305.7095,-392.4256 8244.2565,-303.8776 8208.8654,-256.0189"/>
<polygon fill="#000000" stroke="#000000" points="8211.5621,-253.78 8202.7834,-247.8483 8205.9469,-257.9598 8211.5621,-253.78"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="8945,-247.5008 8390,-247.5008 8390,-192.9 8945,-192.9 8945,-247.5008"/>
<text text-anchor="middle" x="8667.5" y="-216.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="8667.5" y="-201.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- prose_82&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>prose_82&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8468.6396,-609.3257C8474.0231,-580.2951 8486.4178,-522.239 8506.5,-476.4008 8543.2905,-392.4256 8604.7435,-303.8776 8640.1346,-256.0189"/>
<polygon fill="#000000" stroke="#000000" points="8643.0531,-257.9598 8646.2166,-247.8483 8637.4379,-253.78 8643.0531,-257.9598"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="9364,-248.1019 8963,-248.1019 8963,-192.2989 9364,-192.2989 9364,-248.1019"/>
<text text-anchor="middle" x="9163.5" y="-216.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- prose_83&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>prose_83&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8546.4101,-609.5436C8545.5548,-577.2512 8548.9439,-509.8645 8588.5,-476.4008 8650.7249,-423.7598 8880.2413,-476.1245 8953.5,-440.4008 9038.5583,-398.9233 9107.4044,-307.6718 9141.0782,-256.6149"/>
<polygon fill="#000000" stroke="#000000" points="9144.0491,-258.4664 9146.5656,-248.1748 9138.1804,-254.6508 9144.0491,-258.4664"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="9153,-670.8014 8598,-670.8014 8598,-584.4007 9153,-584.4007 9153,-670.8014"/>
<text text-anchor="middle" x="8875.5" y="-623.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="8875.5" y="-608.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="8875.5" y="-592.701" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- prose_89&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>prose_89&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10566.6113,-847.8937C10559.6163,-836.2339 10548.6841,-821.7854 10534.5,-814.8013 10397.6888,-747.4365 9310.0442,-817.3501 9162.5,-778.8013 9083.2024,-758.0833 9001.3144,-712.0583 8945.4071,-676.1944"/>
<polygon fill="#000000" stroke="#000000" points="8947.3031,-673.2524 8937.0065,-670.7563 8943.4991,-679.1286 8947.3031,-673.2524"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="9733.5,-654.9015 9171.5,-654.9015 9171.5,-600.3006 9733.5,-600.3006 9733.5,-654.9015"/>
<text text-anchor="middle" x="9452.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="9452.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- prose_90&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>prose_90&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10648.5789,-847.9588C10641.5687,-836.3297 10630.6315,-821.8912 10616.5,-814.8013 10529.6268,-771.2167 9836.4046,-803.8711 9742.5,-778.8013 9650.8526,-754.3342 9555.3186,-697.4092 9500.0006,-660.8093"/>
<polygon fill="#000000" stroke="#000000" points="9501.7349,-657.7589 9491.4745,-655.1179 9497.8485,-663.5809 9501.7349,-657.7589"/>
</g>
<!-- leaf_100 -->
<g id="node101" class="node">
<title>leaf_100</title>
<polygon fill="none" stroke="#c0c0c0" points="10271.5,-654.9015 9751.5,-654.9015 9751.5,-600.3006 10271.5,-600.3006 10271.5,-654.9015"/>
<text text-anchor="middle" x="10011.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="10011.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- prose_91&#45;&gt;leaf_100 -->
<g id="edge100" class="edge">
<title>prose_91&#45;&gt;leaf_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10730.1742,-847.6563C10723.1082,-836.2043 10712.2698,-822.0997 10698.5,-814.8013 10533.7463,-727.4767 10458.6927,-833.7261 10280.5,-778.8013 10195.6311,-752.6419 10107.8795,-696.9609 10056.5653,-660.9603"/>
<polygon fill="#000000" stroke="#000000" points="10058.5253,-658.0596 10048.3408,-655.1394 10054.4813,-663.7733 10058.5253,-658.0596"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="10859,-662.8014 10290,-662.8014 10290,-592.4007 10859,-592.4007 10859,-662.8014"/>
<text text-anchor="middle" x="10574.5" y="-631.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="10574.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="10574.5" y="-600.701" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- prose_92&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>prose_92&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10808.8119,-848.3946C10801.0032,-838.3233 10790.588,-825.4673 10780.5,-814.8013 10730.3264,-761.7533 10667.618,-706.1125 10624.6496,-669.4192"/>
<polygon fill="#000000" stroke="#000000" points="10626.7476,-666.6088 10616.8636,-662.7932 10622.2108,-671.9397 10626.7476,-666.6088"/>
</g>
<!-- leaf_102 -->
<g id="node103" class="node">
<title>leaf_102</title>
<polygon fill="none" stroke="#c0c0c0" points="11425.5,-670.2021 10877.5,-670.2021 10877.5,-585 11425.5,-585 11425.5,-670.2021"/>
<text text-anchor="middle" x="11151.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="11151.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="11151.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="11151.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- prose_93&#45;&gt;leaf_102 -->
<g id="edge102" class="edge">
<title>prose_93&#45;&gt;leaf_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11036.618,-847.8227C11054.9116,-812.7551 11096.7153,-732.6199 11124.526,-679.3086"/>
<polygon fill="#000000" stroke="#000000" points="11127.6828,-680.8244 11129.2049,-670.3394 11121.4765,-677.5867 11127.6828,-680.8244"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="11705,-647.5031 11444,-647.5031 11444,-607.699 11705,-607.699 11705,-647.5031"/>
<text text-anchor="middle" x="11574.5" y="-616.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- prose_94&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>prose_94&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11304.8771,-854.1851C11336.8654,-839.5132 11392.7156,-811.6629 11434.5,-778.8013 11481.8676,-741.5488 11527.5141,-687.8567 11553.1962,-655.4882"/>
<polygon fill="#000000" stroke="#000000" points="11556.1652,-657.3746 11559.5899,-647.3485 11550.6603,-653.0506 11556.1652,-657.3746"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="12250,-654.9015 11723,-654.9015 11723,-600.3006 12250,-600.3006 12250,-654.9015"/>
<text text-anchor="middle" x="11986.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="11986.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- prose_95&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prose_95&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11694.017,-850.4322C11743.3083,-812.8791 11873.7737,-713.4828 11942.5867,-661.0569"/>
<polygon fill="#000000" stroke="#000000" points="11944.8298,-663.748 11950.6633,-654.9036 11940.5877,-658.1798 11944.8298,-663.748"/>
</g>
<!-- leaf_105 -->
<g id="node106" class="node">
<title>leaf_105</title>
<polygon fill="none" stroke="#c0c0c0" points="12816.5,-654.9015 12268.5,-654.9015 12268.5,-600.3006 12816.5,-600.3006 12816.5,-654.9015"/>
<text text-anchor="middle" x="12542.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="12542.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- prose_96&#45;&gt;leaf_105 -->
<g id="edge105" class="edge">
<title>prose_96&#45;&gt;leaf_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12171.4715,-852.0123C12231.7176,-815.5733 12400.8552,-713.2729 12488.4302,-660.3044"/>
<polygon fill="#000000" stroke="#000000" points="12490.4115,-663.1965 12497.1567,-655.0263 12486.7887,-657.2069 12490.4115,-663.1965"/>
</g>
<!-- leaf_106 -->
<g id="node107" class="node">
<title>leaf_106</title>
<polygon fill="none" stroke="#c0c0c0" points="12906.5,-645.6011 12834.5,-645.6011 12834.5,-609.6011 12906.5,-609.6011 12906.5,-645.6011"/>
<text text-anchor="middle" x="12870.5" y="-624.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_97&#45;&gt;leaf_106 -->
<g id="edge106" class="edge">
<title>codeblock_97&#45;&gt;leaf_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12787.5279,-847.3928C12798.5707,-830.3379 12814.7961,-803.6535 12825.5,-778.8013 12843.332,-737.3993 12856.836,-686.7329 12864.206,-655.8297"/>
<polygon fill="#000000" stroke="#000000" points="12867.6892,-656.3046 12866.5541,-645.7707 12860.8724,-654.7133 12867.6892,-656.3046"/>
</g>
</g>
</svg>