<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="10926pt" height="800pt"
 viewBox="0.00 0.00 10925.50 800.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 796.0006)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-796.0006 10921.5,-796.0006 10921.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-774.0006" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="597.5" y="-769.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 168</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-702.0006" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="597.5" y="-697.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;73</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-755.832C597.5,-748.1316 597.5,-738.975 597.5,-730.4173"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-730.4139 597.5,-720.4139 594.0001,-730.4139 601.0001,-730.4139"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392.5" cy="-630.0006" rx="43.5751" ry="18"/>
<text text-anchor="middle" x="392.5" y="-625.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Node</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M557.9739,-688.1183C522.8784,-675.7921 471.7013,-657.8177 435.5726,-645.1286"/>
<polygon fill="#000000" stroke="#000000" points="436.4022,-641.7104 425.8073,-641.6988 434.0825,-648.3149 436.4022,-641.7104"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="486.5" cy="-630.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="486.5" y="-625.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M572.0344,-685.4824C555.4648,-674.7346 533.7843,-660.6716 516.3972,-649.3934"/>
<polygon fill="#000000" stroke="#000000" points="518.0403,-646.2874 507.746,-643.7818 514.2309,-652.1601 518.0403,-646.2874"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="597.5" cy="-630.0006" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="597.5" y="-625.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 6&#45;12</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.5,-683.832C597.5,-676.1316 597.5,-666.975 597.5,-658.4173"/>
<polygon fill="#000000" stroke="#000000" points="601.0001,-658.4139 597.5,-648.4139 594.0001,-658.4139 601.0001,-658.4139"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1185.5" cy="-630.0006" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1185.5" y="-625.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 13&#45;35</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M653.8799,-695.097C761.831,-681.8785 997.4437,-653.0279 1115.3566,-638.5896"/>
<polygon fill="#000000" stroke="#000000" points="1115.8601,-642.0542 1125.3605,-637.3646 1115.0092,-635.1061 1115.8601,-642.0542"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="3627.5" cy="-630.0006" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3627.5" y="-625.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 74&#45;133</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.3673,-700.5543C1040.8918,-691.4646 3110.7779,-642.2792 3546.8345,-631.9174"/>
<polygon fill="#000000" stroke="#000000" points="3547.2204,-635.4093 3557.1344,-631.6727 3547.0541,-628.4113 3547.2204,-635.4093"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-576.2018 0,-576.2018 0,-504.3995 359,-504.3995 359,-576.2018"/>
<text text-anchor="middle" x="179.5" y="-512.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Time to stabilize this class once and for all. </text>
</g>
<!-- prose_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M461.5875,-618.3517C456.3325,-616.0962 450.7796,-613.8592 445.5,-612.0006 411.0664,-599.8787 373.5207,-588.6115 337.7793,-578.767"/>
<polygon fill="#000000" stroke="#000000" points="338.3192,-575.2863 327.7503,-576.0285 336.4752,-582.0391 338.3192,-575.2863"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="431.5" cy="-540.3006" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="431.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_4&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M567.5044,-614.3413C547.1344,-603.653 519.6182,-589.1095 495.5,-576.0006 486.5294,-571.1248 476.8938,-565.7978 467.8916,-560.7815"/>
<polygon fill="#000000" stroke="#000000" points="469.5858,-557.7189 459.1487,-555.8971 466.1717,-563.8299 469.5858,-557.7189"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="536.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="536.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_4&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M585.4484,-612.2788C576.3926,-598.9624 563.8614,-580.5353 553.7453,-565.6597"/>
<polygon fill="#000000" stroke="#000000" points="556.6303,-563.6779 548.1127,-557.377 550.8419,-567.6143 556.6303,-563.6779"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="658.5" cy="-540.3006" rx="71.7805" ry="18"/>
<text text-anchor="middle" x="658.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 8&#45;11</text>
</g>
<!-- section_4&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.5516,-612.2788C618.3502,-599.3406 630.4297,-581.5777 640.3872,-566.9353"/>
<polygon fill="#000000" stroke="#000000" points="643.5354,-568.53 646.2646,-558.2927 637.747,-564.5936 643.5354,-568.53"/>
</g>
<!-- header_13 -->
<g id="node14" class="node">
<title>header_13</title>
<ellipse fill="none" stroke="#000000" cx="986.5" cy="-540.3006" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="986.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node metatable</text>
</g>
<!-- section_5&#45;&gt;header_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;header_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1151.2907,-614.5806C1118.4431,-599.7745 1068.5986,-577.3069 1032.3304,-560.9588"/>
<polygon fill="#000000" stroke="#000000" points="1033.5094,-557.6512 1022.9544,-556.7326 1030.6328,-564.0328 1033.5094,-557.6512"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1121.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1121.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1172.8557,-612.2788C1163.2937,-598.877 1150.0383,-580.2988 1139.3896,-565.374"/>
<polygon fill="#000000" stroke="#000000" points="1142.126,-563.1831 1133.4687,-557.0755 1136.4277,-567.2487 1142.126,-563.1831"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1249.5" cy="-540.3006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1249.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 19&#45;24</text>
</g>
<!-- section_5&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1198.1443,-612.2788C1207.4627,-599.2185 1220.2887,-581.2421 1230.7915,-566.5218"/>
<polygon fill="#000000" stroke="#000000" points="1233.7039,-568.4659 1236.6629,-558.2927 1228.0056,-564.4002 1233.7039,-568.4659"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="1410.5" cy="-540.3006" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1410.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 28&#45;35</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1227.6292,-616.0793C1257.9293,-605.766 1299.6058,-590.9615 1335.5,-576.0006 1346.8349,-571.2762 1358.9277,-565.7446 1370.0199,-560.4656"/>
<polygon fill="#000000" stroke="#000000" points="1371.57,-563.6039 1379.0635,-556.1139 1368.5348,-557.2962 1371.57,-563.6039"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="1701.5" cy="-540.3006" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1701.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 36&#45;73</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1241.2113,-620.3159C1337.2995,-603.6122 1533.7094,-569.4689 1636.1116,-551.6675"/>
<polygon fill="#000000" stroke="#000000" points="1636.7688,-555.1059 1646.0216,-549.9448 1635.5699,-548.2093 1636.7688,-555.1059"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="3329.5" cy="-540.3006" rx="83.6943" ry="18"/>
<text text-anchor="middle" x="3329.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Node Instances</text>
</g>
<!-- section_6&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_6&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3575.2319,-617.8989C3533.533,-607.8457 3473.8145,-592.5538 3422.5,-576.0006 3407.9232,-571.2984 3392.3018,-565.577 3378.1031,-560.1045"/>
<polygon fill="#000000" stroke="#000000" points="3379.1191,-556.744 3368.5308,-556.3711 3376.5755,-563.2655 3379.1191,-556.744"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="3463.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3463.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_6&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3586.0499,-615.4313C3561.4237,-605.9061 3530.1054,-592.2346 3504.5,-576.0006 3498.5017,-572.1977 3492.4871,-567.5458 3486.9842,-562.8727"/>
<polygon fill="#000000" stroke="#000000" points="3489.155,-560.1198 3479.3493,-556.1073 3484.5125,-565.3589 3489.155,-560.1198"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="3545.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3545.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_6&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3611.2994,-612.2788C3598.6601,-598.4526 3580.9843,-579.1169 3567.1352,-563.9674"/>
<polygon fill="#000000" stroke="#000000" points="3569.6192,-561.4973 3560.2887,-556.4781 3564.4527,-566.2204 3569.6192,-561.4973"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="3627.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3627.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_6&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3627.5,-611.8485C3627.5,-599.4471 3627.5,-582.7639 3627.5,-568.6269"/>
<polygon fill="#000000" stroke="#000000" points="3631.0001,-568.4257 3627.5,-558.4257 3624.0001,-568.4258 3631.0001,-568.4257"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="3826.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3826.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_6&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3662.6191,-614.1705C3699.0831,-597.7343 3755.7633,-572.1855 3791.9974,-555.8528"/>
<polygon fill="#000000" stroke="#000000" points="3793.514,-559.0084 3801.1924,-551.7081 3790.6374,-552.6267 3793.514,-559.0084"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="4251.5" cy="-540.3006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4251.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_6&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3689.0393,-621.1544C3815.6525,-602.9537 4102.4329,-561.729 4209.8439,-546.2887"/>
<polygon fill="#000000" stroke="#000000" points="4210.5648,-549.7211 4219.965,-544.8338 4209.5687,-542.7923 4210.5648,-549.7211"/>
</g>
<!-- section_36 -->
<g id="node37" class="node">
<title>section_36</title>
<ellipse fill="none" stroke="#000000" cx="5130.5" cy="-540.3006" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5130.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 98&#45;120</text>
</g>
<!-- section_6&#45;&gt;section_36 -->
<g id="edge36" class="edge">
<title>section_6&#45;&gt;section_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3696.4816,-625.8838C3944.2241,-611.0983 4788.2455,-560.7266 5051.4497,-545.0184"/>
<polygon fill="#000000" stroke="#000000" points="5051.9113,-548.4972 5061.6849,-544.4075 5051.4942,-541.5096 5051.9113,-548.4972"/>
</g>
<!-- section_37 -->
<g id="node38" class="node">
<title>section_37</title>
<ellipse fill="none" stroke="#000000" cx="8709.5" cy="-540.3006" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8709.5" y="-536.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 134&#45;168</text>
</g>
<!-- section_6&#45;&gt;section_37 -->
<g id="edge37" class="edge">
<title>section_6&#45;&gt;section_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3698.3706,-628.7497C4261.5636,-618.8091 8007.1481,-552.6975 8623.6742,-541.8155"/>
<polygon fill="#000000" stroke="#000000" points="8623.8815,-545.3125 8633.8182,-541.6364 8623.7579,-538.3136 8623.8815,-545.3125"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="392.5,-436.1005 338.5,-436.1005 338.5,-400.1005 392.5,-400.1005 392.5,-436.1005"/>
</g>
<!-- prose_9&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>prose_9&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M520.777,-524.2893C513.5411,-517.559 504.5609,-510.0452 495.5,-504.6006 457.1536,-481.5585 436.8797,-495.9806 401.5,-468.6006 393.2843,-462.2426 386.1478,-453.5037 380.444,-445.0818"/>
<polygon fill="#000000" stroke="#000000" points="383.3389,-443.1111 375.0334,-436.5331 377.424,-446.8547 383.3389,-443.1111"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="636.5,-437.4011 410.5,-437.4011 410.5,-398.7999 636.5,-398.7999 636.5,-437.4011"/>
<text text-anchor="middle" x="523.5" y="-422.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="523.5" y="-406.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot = require &quot;node/dot&quot;</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_10&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M639.1578,-522.7923C616.561,-502.338 578.9398,-468.2838 552.7646,-444.5905"/>
<polygon fill="#000000" stroke="#000000" points="554.8007,-441.7125 545.0381,-437.5965 550.1031,-446.9022 554.8007,-441.7125"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1188.5,-461.3008 654.5,-461.3008 654.5,-374.9002 1188.5,-374.9002 1188.5,-461.3008"/>
<text text-anchor="middle" x="921.5" y="-414.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Node metatable is the root table for any Node. &#160;I&#39;m planning to make</text>
<text text-anchor="middle" x="921.5" y="-398.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">an intermediate class/table called Root that is in common for any instance</text>
<text text-anchor="middle" x="921.5" y="-383.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">Node. &#160;All Root absolutely has to contain is =str=. </text>
</g>
<!-- prose_14&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_14&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.0232,-524.4914C1097.7943,-517.9499 1089.0255,-510.5254 1080.5,-504.6006 1060.9687,-491.0274 1039.088,-477.919 1017.9543,-466.1871"/>
<polygon fill="#000000" stroke="#000000" points="1019.4023,-462.9893 1008.9518,-461.246 1016.0342,-469.1258 1019.4023,-462.9893"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1328,-453.3009 1207,-453.3009 1207,-382.9001 1328,-382.9001 1328,-453.3009"/>
<text text-anchor="middle" x="1267.5" y="-422.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local N = {}</text>
<text text-anchor="middle" x="1267.5" y="-406.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">N.__index = N</text>
<text text-anchor="middle" x="1267.5" y="-391.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">N.isNode = true</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_15&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1252.156,-522.2696C1254.4315,-506.8213 1257.8079,-483.8993 1260.8145,-463.4875"/>
<polygon fill="#000000" stroke="#000000" points="1264.305,-463.8082 1262.2997,-453.4048 1257.3797,-462.788 1264.305,-463.8082"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="1391.5" cy="-418.1005" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1391.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_16&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_16&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1407.6965,-522.2696C1404.5813,-502.2341 1399.5116,-469.6276 1395.8736,-446.2297"/>
<polygon fill="#000000" stroke="#000000" points="1399.3099,-445.5491 1394.315,-436.2055 1392.393,-446.6246 1399.3099,-445.5491"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1487.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1487.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_16&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1421.6965,-522.5317C1434.7893,-501.7531 1456.5618,-467.1999 1471.45,-443.5721"/>
<polygon fill="#000000" stroke="#000000" points="1474.4166,-445.4293 1476.7865,-435.103 1468.4942,-441.6976 1474.4166,-445.4293"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="1594.5" cy="-418.1005" rx="56.1302" ry="18"/>
<text text-anchor="middle" x="1594.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Methods</text>
</g>
<!-- section_17&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_17&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1686.1695,-522.7923C1667.8947,-501.9214 1637.2216,-466.891 1616.4388,-443.1559"/>
<polygon fill="#000000" stroke="#000000" points="1619.023,-440.7941 1609.8021,-435.5763 1613.7565,-445.4055 1619.023,-440.7941"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="1701.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1701.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_17&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1701.5,-522.2696C1701.5,-502.2341 1701.5,-469.6276 1701.5,-446.2297"/>
<polygon fill="#000000" stroke="#000000" points="1705.0001,-446.2055 1701.5,-436.2055 1698.0001,-446.2056 1705.0001,-446.2055"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="1829.5" cy="-418.1005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1829.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- section_17&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_17&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1719.8393,-522.7923C1741.7656,-501.8595 1778.6114,-466.6832 1803.4763,-442.9451"/>
<polygon fill="#000000" stroke="#000000" points="1805.9623,-445.4106 1810.7785,-435.9737 1801.1286,-440.3475 1805.9623,-445.4106"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="2002.5" cy="-418.1005" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2002.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;71</text>
</g>
<!-- section_17&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_17&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1748.4546,-527.5534C1792.5204,-514.8985 1859.803,-493.782 1915.5,-468.6006 1933.1926,-460.6015 1951.9268,-450.0254 1967.4609,-440.6194"/>
<polygon fill="#000000" stroke="#000000" points="1969.5186,-443.463 1976.2053,-435.2448 1965.8531,-437.4994 1969.5186,-443.463"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1576,-270.0004 1063,-270.0004 1063,-153.0001 1576,-153.0001 1576,-270.0004"/>
<text text-anchor="middle" x="1319.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; id : &#160;A string naming the Node. </text>
<text text-anchor="middle" x="1319.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;This is identical to the name of the pattern that recognizes</text>
<text text-anchor="middle" x="1319.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or captures it.</text>
<text text-anchor="middle" x="1319.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_first : &#160;Always &#45;1.</text>
<text text-anchor="middle" x="1319.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; line_last &#160;: &#160;Always &#45;1. </text>
</g>
<!-- prose_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1473.8376,-401.2637C1465.8669,-391.443 1455.6169,-378.818 1446.5,-367.6004 1422.6345,-338.2358 1396.2304,-305.7769 1373.7077,-278.0981"/>
<polygon fill="#000000" stroke="#000000" points="1376.184,-275.596 1367.1575,-270.0487 1370.7545,-280.0143 1376.184,-275.596"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1648.5,-229.5002 1594.5,-229.5002 1594.5,-193.5002 1648.5,-193.5002 1648.5,-229.5002"/>
</g>
<!-- prose_24&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>prose_24&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1691.4435,-400.6418C1681.8373,-383.4709 1667.3963,-356.3133 1657.5,-331.6004 1645.1799,-300.8348 1634.7808,-264.1841 1628.3754,-239.53"/>
<polygon fill="#000000" stroke="#000000" points="1631.744,-238.5752 1625.8807,-229.7507 1624.9612,-240.3055 1631.744,-238.5752"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2152,-323.101 1667,-323.101 1667,-99.8994 2152,-99.8994 2152,-323.101"/>
<text text-anchor="middle" x="1909.5" y="-308.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toString(node, depth)</text>
<text text-anchor="middle" x="1909.5" y="-292.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local depth = depth or 0</text>
<text text-anchor="middle" x="1909.5" y="-277.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1909.5" y="-261.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = (&quot; &#160;&quot;):rep(depth) .. &quot;id: &quot; .. node.id .. &quot;, &#160;&quot;</text>
<text text-anchor="middle" x="1909.5" y="-246.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. &quot;first: &quot; .. node.first .. &quot;, last: &quot; .. node.last .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1909.5" y="-231.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if node[1] then</text>
<text text-anchor="middle" x="1909.5" y="-215.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(node) do</text>
<text text-anchor="middle" x="1909.5" y="-200.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if(v.isNode) then</text>
<text text-anchor="middle" x="1909.5" y="-184.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. N.toString(v, depth + 1)</text>
<text text-anchor="middle" x="1909.5" y="-169.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1909.5" y="-154.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1909.5" y="-138.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end </text>
<text text-anchor="middle" x="1909.5" y="-123.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="1909.5" y="-107.9" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_25&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1836.4595,-400.1275C1842.6485,-384.1445 1852.2867,-359.2539 1862.5547,-332.7365"/>
<polygon fill="#000000" stroke="#000000" points="1865.8612,-333.8903 1866.2083,-323.3011 1859.3335,-331.3626 1865.8612,-333.8903"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2564.5,-331.7007 2170.5,-331.7007 2170.5,-91.2997 2564.5,-91.2997 2564.5,-331.7007"/>
<text text-anchor="middle" x="2367.5" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dotLabel(node)</text>
<text text-anchor="middle" x="2367.5" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return node.id</text>
<text text-anchor="middle" x="2367.5" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2367.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.toMarkdown(node)</text>
<text text-anchor="middle" x="2367.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if not node[1] then</text>
<text text-anchor="middle" x="2367.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return string.sub(node.str, node.first, node.last)</text>
<text text-anchor="middle" x="2367.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="2367.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:halt(&quot;no toMarkdown for &quot; .. node.id)</text>
<text text-anchor="middle" x="2367.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2367.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2367.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">function N.dot(node)</text>
<text text-anchor="middle" x="2367.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dot.dot(node)</text>
<text text-anchor="middle" x="2367.5" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_26&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2030.1156,-401.246C2046.8497,-391.1933 2068.7177,-378.3384 2088.5,-367.6004 2119.9435,-350.5327 2129.012,-348.5859 2160.5,-331.6004 2160.8085,-331.434 2161.1173,-331.2674 2161.4262,-331.1005"/>
<polygon fill="#000000" stroke="#000000" points="2163.3216,-334.0542 2170.4407,-326.2076 2159.9822,-327.902 2163.3216,-334.0542"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2659.5,-453.4009 2097.5,-453.4009 2097.5,-382.8002 2659.5,-382.8002 2659.5,-453.4009"/>
<text text-anchor="middle" x="2378.5" y="-406.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;To be a Node, currently, indexed elements of the Array portion must also be </text>
<text text-anchor="middle" x="2378.5" y="-390.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes. </text>
</g>
<!-- prose_31&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>prose_31&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3449.6115,-523.9829C3442.3525,-516.6622 3432.8342,-508.7529 3422.5,-504.6006 3266.8482,-442.0595 2835.2315,-487.0254 2668.5,-468.6006 2636.8519,-465.1033 2603.4312,-460.3171 2570.9753,-455.0765"/>
<polygon fill="#000000" stroke="#000000" points="2571.3704,-451.5947 2560.9368,-453.4364 2570.2416,-458.5031 2571.3704,-451.5947"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="3225.5,-453.3009 2677.5,-453.3009 2677.5,-382.9001 3225.5,-382.9001 3225.5,-453.3009"/>
<text text-anchor="middle" x="2951.5" y="-422.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;m mostly convinced that indexed elements can also be strings, and that </text>
<text text-anchor="middle" x="2951.5" y="-406.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">this is the form leaf nodes should take. &#160;Currently, they have a &#39;val&#39; field</text>
<text text-anchor="middle" x="2951.5" y="-391.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">and no children, which we should replace with a child string at [1].</text>
</g>
<!-- prose_32&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>prose_32&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3531.0769,-523.9934C3523.8303,-516.8624 3514.4768,-509.1097 3504.5,-504.6006 3394.1819,-454.7416 3354.1187,-487.2386 3234.5,-468.6006 3207.7091,-464.4263 3179.5439,-459.7493 3151.7941,-454.971"/>
<polygon fill="#000000" stroke="#000000" points="3152.0429,-451.4622 3141.5927,-453.2068 3150.8499,-458.3598 3152.0429,-451.4622"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="3777.5,-453.3009 3243.5,-453.3009 3243.5,-382.9001 3777.5,-382.9001 3777.5,-453.3009"/>
<text text-anchor="middle" x="3510.5" y="-422.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">This gives us a lighter way to handle the circumstance where we have, say,</text>
<text text-anchor="middle" x="3510.5" y="-406.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">a list, =(foo bar baz)=. We currently either need a &quot;left&#45;per&quot; or &quot;pal&quot;</text>
<text text-anchor="middle" x="3510.5" y="-391.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">Node class to hold the =(=, or we would have to skip it entirely.</text>
</g>
<!-- prose_33&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>prose_33&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3612.2043,-524.3251C3596.789,-508.2246 3572.3305,-482.6791 3551.2622,-460.6744"/>
<polygon fill="#000000" stroke="#000000" points="3553.709,-458.169 3544.2652,-453.3664 3548.6528,-463.01 3553.709,-458.169"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="4323,-468.6007 3796,-468.6007 3796,-367.6004 4323,-367.6004 4323,-468.6007"/>
<text text-anchor="middle" x="4059.5" y="-437.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">Quipu can&#39;t lose any information from the string, so they have to include</text>
<text text-anchor="middle" x="4059.5" y="-422.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">whitespace. &#160;We&#39;re not limited in the same way and can reconstruct less </text>
<text text-anchor="middle" x="4059.5" y="-406.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">semantically crucial parts of a document using the span and the original </text>
<text text-anchor="middle" x="4059.5" y="-391.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">string, since we&#39;re not /currently/ editing our strings once they&#39;re</text>
<text text-anchor="middle" x="4059.5" y="-375.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">entered in.</text>
</g>
<!-- prose_34&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_34&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3850.1235,-527.9109C3874.7582,-514.9909 3915.1155,-493.825 3953.8573,-473.5063"/>
<polygon fill="#000000" stroke="#000000" points="3955.9046,-476.3848 3963.1349,-468.6405 3952.6533,-470.1856 3955.9046,-476.3848"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="4847.5,-461.3008 4341.5,-461.3008 4341.5,-374.9002 4847.5,-374.9002 4847.5,-461.3008"/>
<text text-anchor="middle" x="4594.5" y="-430.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">Nodes are meant to be broadly compatible with everything we intend to</text>
<text text-anchor="middle" x="4594.5" y="-414.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">do with abstract syntax trees. &#160;The more I think about this the better</text>
<text text-anchor="middle" x="4594.5" y="-399.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">it strikes me as an approach. </text>
</g>
<!-- prose_35&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_35&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4278.7013,-530.6096C4318.6532,-516.376 4395.8427,-488.8759 4463.9044,-464.6276"/>
<polygon fill="#000000" stroke="#000000" points="4465.1975,-467.8825 4473.4429,-461.2294 4462.8482,-461.2885 4465.1975,-467.8825"/>
</g>
<!-- header_43 -->
<g id="node44" class="node">
<title>header_43</title>
<ellipse fill="none" stroke="#000000" cx="4911.5" cy="-418.1005" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="4911.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Fields</text>
</g>
<!-- section_36&#45;&gt;header_43 -->
<g id="edge43" class="edge">
<title>section_36&#45;&gt;header_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5087.4389,-525.9363C5053.1667,-513.4769 5004.7725,-493.5369 4966.5,-468.6006 4955.1297,-461.1923 4943.8613,-451.398 4934.5129,-442.408"/>
<polygon fill="#000000" stroke="#000000" points="4936.7191,-439.667 4927.1517,-435.1156 4931.7927,-444.6399 4936.7191,-439.667"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="5007.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5007.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_36&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5108.7058,-522.9723C5091.6393,-509.0028 5067.6631,-488.477 5048.5,-468.6006 5040.8578,-460.6739 5033.0896,-451.4599 5026.3999,-443.0889"/>
<polygon fill="#000000" stroke="#000000" points="5029.0408,-440.7847 5020.1143,-435.0779 5023.5336,-445.1058 5029.0408,-440.7847"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="5089.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5089.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_36&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5124.4503,-522.2696C5117.659,-502.0282 5106.5628,-468.956 5098.6967,-445.5112"/>
<polygon fill="#000000" stroke="#000000" points="5101.9404,-444.1755 5095.4412,-435.8082 5095.304,-446.4022 5101.9404,-444.1755"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="5171.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5171.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_36&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5136.5497,-522.2696C5143.341,-502.0282 5154.4372,-468.956 5162.3033,-445.5112"/>
<polygon fill="#000000" stroke="#000000" points="5165.696,-446.4022 5165.5588,-435.8082 5159.0596,-444.1755 5165.696,-446.4022"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="5253.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5253.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_36&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5152.2942,-522.9723C5169.3607,-509.0028 5193.3369,-488.477 5212.5,-468.6006 5220.1422,-460.6739 5227.9104,-451.4599 5234.6001,-443.0889"/>
<polygon fill="#000000" stroke="#000000" points="5237.4664,-445.1058 5240.8857,-435.0779 5231.9592,-440.7847 5237.4664,-445.1058"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="5556.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5556.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_36&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_36&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5177.7171,-526.7562C5262.6152,-502.4028 5439.472,-451.6705 5517.7687,-429.2108"/>
<polygon fill="#000000" stroke="#000000" points="5519.0543,-432.4832 5527.7015,-426.3615 5517.1241,-425.7546 5519.0543,-432.4832"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="6353.5" cy="-418.1005" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6353.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 121&#45;133</text>
</g>
<!-- section_36&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_36&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5196.2538,-533.7306C5404.1708,-512.9559 6046.9792,-448.7276 6273.4993,-426.094"/>
<polygon fill="#000000" stroke="#000000" points="6274.0432,-429.5572 6283.6457,-425.0802 6273.3472,-422.5919 6274.0432,-429.5572"/>
</g>
<!-- header_64 -->
<g id="node65" class="node">
<title>header_64</title>
<ellipse fill="none" stroke="#000000" cx="8345.5" cy="-418.1005" rx="67.7307" ry="18"/>
<text text-anchor="middle" x="8345.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Other fields</text>
</g>
<!-- section_37&#45;&gt;header_64 -->
<g id="edge64" class="edge">
<title>section_37&#45;&gt;header_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8645.6453,-530.6841C8586.1224,-520.2642 8495.7757,-500.6791 8422.5,-468.6006 8406.0063,-461.38 8389.1219,-450.7385 8375.3829,-441.0836"/>
<polygon fill="#000000" stroke="#000000" points="8377.4268,-438.2423 8367.2665,-435.2389 8373.3362,-443.9228 8377.4268,-438.2423"/>
</g>
<!-- prose_65 -->
<g id="node66" class="node">
<title>prose_65</title>
<ellipse fill="none" stroke="#000000" cx="8463.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8463.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_65 -->
<g id="edge65" class="edge">
<title>section_37&#45;&gt;prose_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8650.7188,-528.8463C8607.4073,-518.3442 8548.611,-499.6053 8504.5,-468.6006 8494.9779,-461.9077 8486.4776,-452.4189 8479.7197,-443.4701"/>
<polygon fill="#000000" stroke="#000000" points="8482.4532,-441.275 8473.7979,-435.1647 8476.7536,-445.3389 8482.4532,-441.275"/>
</g>
<!-- prose_66 -->
<g id="node67" class="node">
<title>prose_66</title>
<ellipse fill="none" stroke="#000000" cx="8545.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8545.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_66 -->
<g id="edge66" class="edge">
<title>section_37&#45;&gt;prose_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8674.7228,-524.2991C8648.8239,-511.4102 8613.4377,-491.6754 8586.5,-468.6006 8578.0091,-461.3273 8569.9538,-452.1271 8563.267,-443.5781"/>
<polygon fill="#000000" stroke="#000000" points="8565.8795,-441.2288 8557.0709,-435.3415 8560.2856,-445.4369 8565.8795,-441.2288"/>
</g>
<!-- prose_67 -->
<g id="node68" class="node">
<title>prose_67</title>
<ellipse fill="none" stroke="#000000" cx="8627.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8627.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_67 -->
<g id="edge67" class="edge">
<title>section_37&#45;&gt;prose_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8697.4006,-522.2696C8683.4164,-501.4296 8660.3056,-466.9888 8644.5151,-443.4572"/>
<polygon fill="#000000" stroke="#000000" points="8647.3344,-441.3772 8638.856,-435.0237 8641.5218,-445.2777 8647.3344,-441.3772"/>
</g>
<!-- prose_68 -->
<g id="node69" class="node">
<title>prose_68</title>
<ellipse fill="none" stroke="#000000" cx="8709.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8709.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_68 -->
<g id="edge68" class="edge">
<title>section_37&#45;&gt;prose_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8709.5,-522.2696C8709.5,-502.2341 8709.5,-469.6276 8709.5,-446.2297"/>
<polygon fill="#000000" stroke="#000000" points="8713.0001,-446.2055 8709.5,-436.2055 8706.0001,-446.2056 8713.0001,-446.2055"/>
</g>
<!-- prose_69 -->
<g id="node70" class="node">
<title>prose_69</title>
<ellipse fill="none" stroke="#000000" cx="9038.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9038.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_69 -->
<g id="edge69" class="edge">
<title>section_37&#45;&gt;prose_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8750.5029,-525.071C8815.1184,-501.0709 8939.643,-454.8189 9001.6076,-431.8034"/>
<polygon fill="#000000" stroke="#000000" points="9003.198,-434.9464 9011.3536,-428.1835 9000.7607,-428.3844 9003.198,-434.9464"/>
</g>
<!-- prose_70 -->
<g id="node71" class="node">
<title>prose_70</title>
<ellipse fill="none" stroke="#000000" cx="9414.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9414.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_70 -->
<g id="edge70" class="edge">
<title>section_37&#45;&gt;prose_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8770.8308,-529.6699C8911.6379,-505.2633 9255.0423,-445.7399 9373.5162,-425.2044"/>
<polygon fill="#000000" stroke="#000000" points="9374.3615,-428.6101 9383.6168,-423.4536 9373.1659,-421.713 9374.3615,-428.6101"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="9808.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9808.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_37&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8781.1115,-534.5279C8914.1601,-523.556 9208.4218,-498.1317 9455.5,-468.6006 9568.6982,-455.071 9701.6974,-434.8754 9767.438,-424.6045"/>
<polygon fill="#000000" stroke="#000000" points="9768.0605,-428.0498 9777.3981,-423.0439 9766.9768,-421.1342 9768.0605,-428.0498"/>
</g>
<!-- prose_72 -->
<g id="node73" class="node">
<title>prose_72</title>
<ellipse fill="none" stroke="#000000" cx="10283.5" cy="-418.1005" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10283.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_37&#45;&gt;prose_72 -->
<g id="edge72" class="edge">
<title>section_37&#45;&gt;prose_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8783.9614,-536.9867C8966.0528,-528.5847 9448.2934,-504.5341 9849.5,-468.6006 9993.8184,-455.6749 10164.3972,-433.9226 10241.699,-423.712"/>
<polygon fill="#000000" stroke="#000000" points="10242.5217,-427.1337 10251.9751,-422.35 10241.6019,-420.1944 10242.5217,-427.1337"/>
</g>
<!-- codeblock_73 -->
<g id="node74" class="node">
<title>codeblock_73</title>
<ellipse fill="none" stroke="#000000" cx="10713.5" cy="-418.1005" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10713.5" y="-413.9005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;165</text>
</g>
<!-- section_37&#45;&gt;codeblock_73 -->
<g id="edge73" class="edge">
<title>section_37&#45;&gt;codeblock_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8784.9167,-539.2221C9015.7284,-535.4346 9732.7898,-520.0503 10324.5,-468.6006 10431.7972,-459.271 10554.9826,-442.1956 10633.4766,-430.5052"/>
<polygon fill="#000000" stroke="#000000" points="10634.4017,-433.9059 10643.7735,-428.9644 10633.3656,-426.9829 10634.4017,-433.9059"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3937,-262.1011 3424,-262.1011 3424,-160.8993 3937,-160.8993 3937,-262.1011"/>
<text text-anchor="middle" x="3680.5" y="-215.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;There are invariant fields a Node is also expected to have, they are:</text>
<text text-anchor="middle" x="3680.5" y="-199.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3680.5" y="-184.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; first : &#160;Index into =str= which begins the span.</text>
<text text-anchor="middle" x="3680.5" y="-168.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; last &#160;: &#160;Index into =str= which ends the span.</text>
</g>
<!-- prose_44&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>prose_44&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4998.5918,-400.7322C4991.5876,-389.0908 4980.6525,-374.6484 4966.5,-367.6004 4864.8881,-316.9974 4056.0158,-357.5215 3945.5,-331.6004 3887.5151,-318.0003 3826.7268,-291.4499 3778.0186,-266.7639"/>
<polygon fill="#000000" stroke="#000000" points="3779.5637,-263.623 3769.0677,-262.1797 3776.3728,-269.8534 3779.5637,-263.623"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="4440,-238.8007 3955,-238.8007 3955,-184.1998 4440,-184.1998 4440,-238.8007"/>
<text text-anchor="middle" x="4197.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">In principle, we want the Node to be localized. We could include a </text>
<text text-anchor="middle" x="4197.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">reference to the whole =str= and derive substrings lazily.</text>
</g>
<!-- prose_45&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>prose_45&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5080.2337,-400.3414C5073.1942,-388.8386 5062.3631,-374.7201 5048.5,-367.6004 4929.8776,-306.6801 4578.6267,-364.9002 4449.5,-331.6004 4376.8248,-312.8586 4299.8599,-272.8426 4250.3898,-244.1494"/>
<polygon fill="#000000" stroke="#000000" points="4251.8777,-240.9647 4241.4798,-238.9312 4248.3401,-247.0051 4251.8777,-240.9647"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="4978.5,-246.7006 4458.5,-246.7006 4458.5,-176.2999 4978.5,-176.2999 4978.5,-246.7006"/>
<text text-anchor="middle" x="4718.5" y="-215.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">If we included the full span as a substring on each Node, we&#39;d end up</text>
<text text-anchor="middle" x="4718.5" y="-200.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">with a lot of spans, and wouldn&#39;t use most of them. Even slicing a piece</text>
<text text-anchor="middle" x="4718.5" y="-184.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">out is costly if we&#39;re not going to use it. </text>
</g>
<!-- prose_46&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_46&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5161.4552,-400.6586C5154.2111,-389.5954 5143.4491,-375.8592 5130.5,-367.6004 5075.2431,-332.3586 5049.4325,-353.0403 4987.5,-331.6004 4921.9599,-308.9117 4850.3736,-276.56 4797.5373,-251.149"/>
<polygon fill="#000000" stroke="#000000" points="4798.755,-247.8503 4788.2283,-246.6506 4795.7093,-254.153 4798.755,-247.8503"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="5510,-254.1013 4997,-254.1013 4997,-168.8992 5510,-168.8992 5510,-254.1013"/>
<text text-anchor="middle" x="5253.5" y="-223.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">So our constructor for a Node class takes (Constructor, node, str) as </text>
<text text-anchor="middle" x="5253.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">the standard interface. &#160;If a module needs a non&#45;standard constructor,</text>
<text text-anchor="middle" x="5253.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">as our Section and Block modules currently take an array of lines, that</text>
<text text-anchor="middle" x="5253.5" y="-176.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">will need to be provided as the second return from the module. </text>
</g>
<!-- prose_47&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>prose_47&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5253.5,-399.7661C5253.5,-369.7151 5253.5,-308.8838 5253.5,-264.4743"/>
<polygon fill="#000000" stroke="#000000" points="5257.0001,-264.4177 5253.5,-254.4177 5250.0001,-264.4177 5257.0001,-264.4177"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="6027,-246.8006 5528,-246.8006 5528,-176.1999 6027,-176.1999 6027,-246.8006"/>
<text text-anchor="middle" x="5777.5" y="-215.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">This will allow for the kind of multi&#45;pass recursive&#45;descent that I&#39;m</text>
<text text-anchor="middle" x="5777.5" y="-200.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">aiming for. </text>
</g>
<!-- prose_48&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>prose_48&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5573.1109,-402.5719C5606.5294,-371.3309 5682.9011,-299.9354 5732.2396,-253.8116"/>
<polygon fill="#000000" stroke="#000000" points="5734.6999,-256.3029 5739.6148,-246.917 5729.9195,-251.1893 5734.6999,-256.3029"/>
</g>
<!-- header_55 -->
<g id="node56" class="node">
<title>header_55</title>
<ellipse fill="none" stroke="#000000" cx="6153.5" cy="-211.5002" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="6153.5" y="-207.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : line tracking (optional)</text>
</g>
<!-- section_49&#45;&gt;header_55 -->
<g id="edge55" class="edge">
<title>section_49&#45;&gt;header_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6336.4481,-400.4859C6300.9654,-363.8322 6219.079,-279.2435 6177.9732,-236.7811"/>
<polygon fill="#000000" stroke="#000000" points="6180.2629,-234.1143 6170.7928,-229.3637 6175.2335,-238.983 6180.2629,-234.1143"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="6312.5" cy="-211.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6312.5" y="-207.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>section_49&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6349.8615,-399.7661C6342.6709,-363.5321 6326.5996,-282.5485 6318.0683,-239.5591"/>
<polygon fill="#000000" stroke="#000000" points="6321.4515,-238.626 6316.0718,-229.4986 6314.5854,-239.9886 6321.4515,-238.626"/>
</g>
<!-- prose_57 -->
<g id="node58" class="node">
<title>prose_57</title>
<ellipse fill="none" stroke="#000000" cx="6394.5" cy="-211.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6394.5" y="-207.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_57 -->
<g id="edge57" class="edge">
<title>section_49&#45;&gt;prose_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6357.1385,-399.7661C6364.3291,-363.5321 6380.4004,-282.5485 6388.9317,-239.5591"/>
<polygon fill="#000000" stroke="#000000" points="6392.4146,-239.9886 6390.9282,-229.4986 6385.5485,-238.626 6392.4146,-239.9886"/>
</g>
<!-- prose_58 -->
<g id="node59" class="node">
<title>prose_58</title>
<ellipse fill="none" stroke="#000000" cx="6476.5" cy="-211.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6476.5" y="-207.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_58 -->
<g id="edge58" class="edge">
<title>section_49&#45;&gt;prose_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6374.6855,-400.5174C6393.0281,-384.2985 6419.1185,-358.6927 6435.5,-331.6004 6453.056,-302.5658 6464.3269,-265.0019 6470.5214,-239.6775"/>
<polygon fill="#000000" stroke="#000000" points="6474.0009,-240.1683 6472.8688,-229.6341 6467.1846,-238.575 6474.0009,-240.1683"/>
</g>
<!-- prose_59 -->
<g id="node60" class="node">
<title>prose_59</title>
<ellipse fill="none" stroke="#000000" cx="6558.5" cy="-211.5002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6558.5" y="-207.3002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_59 -->
<g id="edge59" class="edge">
<title>section_49&#45;&gt;prose_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6400.6556,-403.9732C6437.2444,-390.7534 6486.7561,-367.5715 6517.5,-331.6004 6539.8946,-305.3983 6550.2298,-266.3684 6554.8814,-239.9747"/>
<polygon fill="#000000" stroke="#000000" points="6558.3772,-240.2782 6556.4971,-229.8516 6551.4647,-239.1749 6558.3772,-240.2782"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5984.5,-55.6015 5492.5,-55.6015 5492.5,.2015 5984.5,.2015 5984.5,-55.6015"/>
<text text-anchor="middle" x="5738.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">It may be wise to always track lines, in which case we will include:</text>
</g>
<!-- prose_56&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>prose_56&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6311.9867,-193.0751C6310.1589,-166.1368 6302.4987,-116.4872 6271.5,-91.4 6268.5267,-88.9938 6128.3133,-72.2901 5992.4617,-56.5926"/>
<polygon fill="#000000" stroke="#000000" points="5992.6085,-53.0863 5982.273,-55.4162 5991.8056,-60.0401 5992.6085,-53.0863"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="6382.5,-55.0004 6002.5,-55.0004 6002.5,-.3996 6382.5,-.3996 6382.5,-55.0004"/>
<text text-anchor="middle" x="6192.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_first : &#160;The line at which the match begins</text>
<text text-anchor="middle" x="6192.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; line_last &#160;: &#160;The line at which the match ends</text>
</g>
<!-- prose_57&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_57&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6392.9893,-193.1876C6389.9153,-167.2893 6380.7126,-119.9448 6353.5,-91.4 6340.987,-78.2744 6325.4305,-67.7976 6308.9599,-59.45"/>
<polygon fill="#000000" stroke="#000000" points="6310.2598,-56.1919 6299.7291,-55.0282 6307.2357,-62.505 6310.2598,-56.1919"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6956,-55.0004 6401,-55.0004 6401,-.3996 6956,-.3996 6956,-55.0004"/>
<text text-anchor="middle" x="6678.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">This is, at least, a frequent enough pattern that the metatable should return</text>
<text text-anchor="middle" x="6678.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">a negative number if these aren&#39;t assigned. </text>
</g>
<!-- prose_58&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>prose_58&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6478.0107,-193.1876C6481.0847,-167.2893 6490.2874,-119.9448 6517.5,-91.4 6530.013,-78.2744 6545.5695,-67.7976 6562.0401,-59.45"/>
<polygon fill="#000000" stroke="#000000" points="6563.7643,-62.505 6571.2709,-55.0282 6560.7402,-56.1919 6563.7643,-62.505"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="7375,-55.6015 6974,-55.6015 6974,.2015 7375,.2015 7375,-55.6015"/>
<text text-anchor="middle" x="7174.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo decide if line tracking is in fact optional</text>
</g>
<!-- prose_59&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_59&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6558.9187,-193.4386C6560.6076,-166.4995 6568.0714,-116.3028 6599.5,-91.4 6661.1359,-42.5621 6868.245,-63.1389 6963.8881,-55.2837"/>
<polygon fill="#000000" stroke="#000000" points="6964.2742,-58.7627 6973.8866,-54.307 6963.5936,-51.7959 6964.2742,-58.7627"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="7164,-254.7006 6609,-254.7006 6609,-168.2999 7164,-168.2999 7164,-254.7006"/>
<text text-anchor="middle" x="6886.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The way the Grammar class will work: each =V&quot;patt&quot;= can have a metatable.</text>
<text text-anchor="middle" x="6886.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">These are passed in as the second parameter during construction, with the key</text>
<text text-anchor="middle" x="6886.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">the same name as the rule. </text>
</g>
<!-- prose_65&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>prose_65&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8454.6057,-400.7041C8447.6081,-389.0496 8436.675,-374.6029 8422.5,-367.6004 8298.0244,-306.1098 7309.2105,-360.8909 7173.5,-331.6004 7104.6068,-316.7312 7031.3809,-285.8174 6976.1378,-259.0783"/>
<polygon fill="#000000" stroke="#000000" points="6977.6042,-255.8993 6967.0827,-254.6548 6974.5316,-262.189 6977.6042,-255.8993"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="7744.5,-238.8007 7182.5,-238.8007 7182.5,-184.1998 7744.5,-184.1998 7744.5,-238.8007"/>
<text text-anchor="middle" x="7463.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">If a pattern doesn&#39;t have a metatable, it&#39;s given a Node class and consists of</text>
<text text-anchor="middle" x="7463.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">only the above fields, plus an array representing any subrules. </text>
</g>
<!-- prose_66&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>prose_66&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8536.5642,-400.7872C8529.547,-389.1719 8518.6076,-374.7378 8504.5,-367.6004 8355.4136,-292.1739 7916.5437,-368.1059 7753.5,-331.6004 7670.5103,-313.019 7580.9309,-272.4595 7523.6379,-243.6238"/>
<polygon fill="#000000" stroke="#000000" points="7524.8775,-240.328 7514.3763,-238.9228 7521.7092,-246.5699 7524.8775,-240.328"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="8282.5,-238.8007 7762.5,-238.8007 7762.5,-184.1998 8282.5,-184.1998 8282.5,-238.8007"/>
<text text-anchor="middle" x="8022.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">If it does, the metatable will have a =__call= method, which expects two</text>
<text text-anchor="middle" x="8022.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">parameters, itself, and the node, which will include the span. </text>
</g>
<!-- prose_67&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>prose_67&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8618.0902,-400.6105C8610.9867,-389.2278 8600.138,-375.1423 8586.5,-367.6004 8470.9128,-303.6807 8418.7747,-366.9171 8291.5,-331.6004 8215.7955,-310.5937 8134.0875,-271.5537 8080.8392,-243.6859"/>
<polygon fill="#000000" stroke="#000000" points="8082.3683,-240.5355 8071.8902,-238.9672 8079.1033,-246.7274 8082.3683,-240.5355"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="8870,-246.7006 8301,-246.7006 8301,-176.2999 8870,-176.2999 8870,-246.7006"/>
<text text-anchor="middle" x="8585.5" y="-215.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">This will require reattunement of basically every class in the =/grym= folder,</text>
<text text-anchor="middle" x="8585.5" y="-200.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">but let&#39;s build the Prose parse first. &#160;I do want the whole shebang in a single</text>
<text text-anchor="middle" x="8585.5" y="-184.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">grammar eventually.</text>
</g>
<!-- prose_68&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prose_68&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8699.1411,-400.8412C8680.151,-369.2012 8639.2201,-301.005 8612.0207,-255.6872"/>
<polygon fill="#000000" stroke="#000000" points="8614.9217,-253.7194 8606.7745,-246.9463 8608.9197,-257.3217 8614.9217,-253.7194"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="9436.5,-254.1013 8888.5,-254.1013 8888.5,-168.8992 9436.5,-168.8992 9436.5,-254.1013"/>
<text text-anchor="middle" x="9162.5" y="-223.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">The intention is to allow multiple grammars to coexist peacefully. Currently</text>
<text text-anchor="middle" x="9162.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">the parser is handrolled and we have special case values for everything.</text>
<text text-anchor="middle" x="9162.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">The idea is to stabilize this, so that multi&#45;pass parsing works but in a</text>
<text text-anchor="middle" x="9162.5" y="-176.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">standard way where the Node constructor is a consistent interface. </text>
</g>
<!-- prose_69&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>prose_69&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9048.8589,-400.8412C9066.8668,-370.8377 9104.6044,-307.962 9131.6534,-262.8947"/>
<polygon fill="#000000" stroke="#000000" points="9134.7664,-264.5091 9136.9117,-254.1337 9128.7645,-260.9068 9134.7664,-264.5091"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="9716,-231.4023 9455,-231.4023 9455,-191.5982 9716,-191.5982 9716,-231.4023"/>
<text text-anchor="middle" x="9585.5" y="-200.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">In the meantime we have things like</text>
</g>
<!-- prose_70&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>prose_70&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9428.2046,-401.5428C9457.4653,-366.1903 9526.3181,-283.0031 9562.4477,-239.3517"/>
<polygon fill="#000000" stroke="#000000" points="9565.3262,-241.3632 9569.0062,-231.4279 9559.9337,-236.8998 9565.3262,-241.3632"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="10261,-238.8007 9734,-238.8007 9734,-184.1998 10261,-184.1998 10261,-238.8007"/>
<text text-anchor="middle" x="9997.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines : &#160;If this exists, there&#39;s a collection of lines which need to be</text>
<text text-anchor="middle" x="9997.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;joined with =\n= to reconstruct the actual span.</text>
</g>
<!-- prose_71&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>prose_71&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9823.3305,-401.8889C9853.8499,-368.5275 9924.2793,-291.5395 9965.6236,-246.345"/>
<polygon fill="#000000" stroke="#000000" points="9968.3263,-248.576 9972.4937,-238.8352 9963.1614,-243.8511 9968.3263,-248.576"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="10827.5,-238.8007 10279.5,-238.8007 10279.5,-184.1998 10827.5,-184.1998 10827.5,-238.8007"/>
<text text-anchor="middle" x="10553.5" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;We want to do this the other way, and use the span itself for the</text>
<text text-anchor="middle" x="10553.5" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;inner parse. </text>
</g>
<!-- prose_72&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>prose_72&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10302.9177,-403.2423C10345.8776,-370.3701 10449.8787,-290.7898 10509.5186,-245.1542"/>
<polygon fill="#000000" stroke="#000000" points="10511.8138,-247.8051 10517.6287,-238.9485 10507.56,-242.2458 10511.8138,-247.8051"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="10917.5,-229.5002 10845.5,-229.5002 10845.5,-193.5002 10917.5,-193.5002 10917.5,-229.5002"/>
<text text-anchor="middle" x="10881.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">return N</text>
</g>
<!-- codeblock_73&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>codeblock_73&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10747.8074,-401.3757C10775.196,-386.4639 10812.7864,-362.2692 10836.5,-331.6004 10857.6882,-304.1977 10869.7425,-265.749 10875.9396,-239.7984"/>
<polygon fill="#000000" stroke="#000000" points="10879.3985,-240.3696 10878.1761,-229.8455 10872.5688,-238.8349 10879.3985,-240.3696"/>
</g>
</g>
</svg>