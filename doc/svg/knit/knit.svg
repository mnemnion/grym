<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3223pt" height="1604pt"
 viewBox="0.00 0.00 3222.50 1603.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1599.6023)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1599.6023 3218.5,-1599.6023 3218.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1577.6023" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1573.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 139</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1505.6023" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1501.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;105</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1559.4337C416.5,-1551.7333 416.5,-1542.5767 416.5,-1534.0189"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1534.0155 416.5,-1524.0156 413.0001,-1534.0156 420.0001,-1534.0155"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="98.5" cy="-1433.6023" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="98.5" y="-1429.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M365.7603,-1494.1141C310.1471,-1481.5224 220.883,-1461.3117 160.9963,-1447.7524"/>
<polygon fill="#000000" stroke="#000000" points="161.436,-1444.2634 150.9099,-1445.4687 159.8902,-1451.0906 161.436,-1444.2634"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="268.5" cy="-1433.6023" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="268.5" y="-1429.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M384.0208,-1489.8016C359.8325,-1478.0344 326.8935,-1462.0099 302.3767,-1450.0829"/>
<polygon fill="#000000" stroke="#000000" points="303.6223,-1446.7967 293.0988,-1445.5693 300.56,-1453.0913 303.6223,-1446.7967"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1433.6023" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1429.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1487.4337C416.5,-1479.7333 416.5,-1470.5767 416.5,-1462.0189"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1462.0155 416.5,-1452.0156 413.0001,-1462.0156 420.0001,-1462.0155"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1020.5" cy="-1433.6023" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1020.5" y="-1429.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 43&#45;105</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M476.9004,-1498.4023C588.0891,-1485.148 824.8392,-1456.9261 945.8749,-1442.498"/>
<polygon fill="#000000" stroke="#000000" points="946.6417,-1445.9315 956.1571,-1441.2723 945.8131,-1438.9807 946.6417,-1445.9315"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="2394.5" cy="-1433.6023" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2394.5" y="-1429.4023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 106&#45;139</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M481.7482,-1503.2272C775.9118,-1492.5196 1978.7498,-1448.7358 2309.8093,-1436.6851"/>
<polygon fill="#000000" stroke="#000000" points="2309.9501,-1440.1824 2319.8161,-1436.3208 2309.6954,-1433.187 2309.9501,-1440.1824"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="129.5,-1145.4019 15.5,-1145.4019 15.5,-1109.4019 129.5,-1109.4019 129.5,-1145.4019"/>
<text text-anchor="middle" x="72.5" y="-1123.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M96.9514,-1415.3651C92.589,-1363.9891 80.174,-1217.7786 74.9083,-1155.7645"/>
<polygon fill="#000000" stroke="#000000" points="78.3741,-1155.2116 74.0404,-1145.5436 71.3992,-1155.8039 78.3741,-1155.2116"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="174.5" cy="-1127.4019" rx="27" ry="18"/>
<text text-anchor="middle" x="174.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M247.6407,-1419.8481C234.7595,-1410.1811 219.1005,-1396.0644 210.5,-1379.6023 171.9433,-1305.8017 170.6264,-1204.1543 172.6291,-1155.5291"/>
<polygon fill="#000000" stroke="#000000" points="176.1297,-1155.6014 173.1258,-1145.4413 169.1382,-1155.2571 176.1297,-1155.6014"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="613.5,-1379.8029 219.5,-1379.8029 219.5,-875.0009 613.5,-875.0009 613.5,-1379.8029"/>
<text text-anchor="middle" x="416.5" y="-1364.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="416.5" y="-1333.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; ()</text>
<text text-anchor="middle" x="416.5" y="-1317.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="416.5" y="-1302.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="416.5" y="-1286.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="416.5" y="-1255.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="416.5" y="-1240.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="416.5" y="-1224.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="416.5" y="-1209.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="416.5" y="-1193.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="416.5" y="-1178.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="416.5" y="-1163.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="416.5" y="-1147.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="416.5" y="-1132.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="416.5" y="-1116.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="416.5" y="-1101.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="416.5" y="-1086.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="416.5" y="-1070.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="416.5" y="-1023.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="416.5" y="-991.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="416.5" y="-976.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir, Path, File = walk.Dir, walk.Path, walk.File</text>
<text text-anchor="middle" x="416.5" y="-961.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="416.5" y="-945.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="416.5" y="-930.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="416.5" y="-914.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="416.5" y="-883.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1415.3651C416.5,-1408.4609 416.5,-1399.8441 416.5,-1389.9492"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1389.6443 416.5,-1379.6443 413.0001,-1389.6443 420.0001,-1389.6443"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="760.5" cy="-1127.4019" rx="128.6478" ry="18"/>
<text text-anchor="middle" x="760.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : knit_dir(knitter, pwd, depth)</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3132,-1420.4255C947.9856,-1411.8882 919.3028,-1398.7276 898.5,-1379.6023 828.204,-1314.9749 785.9026,-1206.0862 769.0144,-1155.1885"/>
<polygon fill="#000000" stroke="#000000" points="772.2965,-1153.9627 765.8849,-1145.5281 765.6372,-1156.12 772.2965,-1153.9627"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-1127.4019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="939.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.6757,-1415.3651C1002.0569,-1363.8827 963.2473,-1217.1728 946.9012,-1155.3804"/>
<polygon fill="#000000" stroke="#000000" points="950.2401,-1154.3159 944.2991,-1145.5436 943.4729,-1156.1062 950.2401,-1154.3159"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1102.5" cy="-1127.4019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1102.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1025.3839,-1415.3651C1039.1708,-1363.8827 1078.4595,-1217.1728 1095.0074,-1155.3804"/>
<polygon fill="#000000" stroke="#000000" points="1098.4357,-1156.1086 1097.6417,-1145.5436 1091.6739,-1154.2978 1098.4357,-1156.1086"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1379.5" cy="-1127.4019" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1379.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 51&#45;100</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.3072,-1419.3241C1088.8676,-1410.1417 1119.3279,-1396.7181 1143.5,-1379.6023 1237.9115,-1312.7512 1324.0504,-1203.4347 1360.77,-1153.6188"/>
<polygon fill="#000000" stroke="#000000" points="1363.7665,-1155.4504 1366.8407,-1145.3114 1358.1147,-1151.3203 1363.7665,-1155.4504"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1760.5" cy="-1127.4019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1760.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1090.231,-1430.2326C1199.1476,-1424.1363 1404.0609,-1409.0821 1470.5,-1379.6023 1591.2447,-1326.0265 1698.6747,-1204.4818 1741.1694,-1152.1386"/>
<polygon fill="#000000" stroke="#000000" points="1744.1214,-1154.0524 1747.6538,-1144.0638 1738.6634,-1149.6694 1744.1214,-1154.0524"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="2228.5" cy="-1127.4019" rx="115.0832" ry="18"/>
<text text-anchor="middle" x="2228.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knit_all(knitter, pwd_str)</text>
</g>
<!-- section_6&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_6&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2379.5635,-1415.7226C2371.3668,-1405.4878 2361.3125,-1392.2094 2353.5,-1379.6023 2305.0758,-1301.4604 2260.3209,-1201.9764 2239.9912,-1154.7122"/>
<polygon fill="#000000" stroke="#000000" points="2243.1794,-1153.2658 2236.0313,-1145.4456 2236.7425,-1156.0166 2243.1794,-1153.2658"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="2394.5" cy="-1127.4019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2394.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_6&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2394.5,-1415.3651C2394.5,-1363.9891 2394.5,-1217.7786 2394.5,-1155.7645"/>
<polygon fill="#000000" stroke="#000000" points="2398.0001,-1155.5435 2394.5,-1145.5436 2391.0001,-1155.5436 2398.0001,-1155.5435"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2609.5" cy="-1127.4019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2609.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_6&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2408.373,-1415.7553C2416.414,-1405.3063 2426.664,-1391.8063 2435.5,-1379.6023 2494.7233,-1297.8047 2561.7983,-1198.6313 2592.5106,-1152.8366"/>
<polygon fill="#000000" stroke="#000000" points="2595.4976,-1154.6665 2598.1552,-1144.4104 2589.6818,-1150.7706 2595.4976,-1154.6665"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="2895.5" cy="-1127.4019" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2895.5" y="-1123.2019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 114&#45;138</text>
</g>
<!-- section_6&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_6&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2459.3682,-1424.3388C2524.0331,-1414.3246 2618.2309,-1397.3941 2650.5,-1379.6023 2754.5984,-1322.2069 2842.0912,-1206.1985 2878.0065,-1153.9598"/>
<polygon fill="#000000" stroke="#000000" points="2880.9903,-1155.796 2883.7151,-1145.5575 2875.2002,-1151.8621 2880.9903,-1155.796"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="275,-508.9019 0,-508.9019 0,-437.0996 275,-437.0996 275,-508.9019"/>
<text text-anchor="middle" x="137.5" y="-445.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is due for a complete overhaul.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M173.4718,-1109.2165C168.574,-1022.5924 147.5408,-650.5874 140.1114,-519.1879"/>
<polygon fill="#000000" stroke="#000000" points="143.5974,-518.8388 139.5384,-509.0523 136.6085,-519.234 143.5974,-518.8388"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="540,-491.0008 293,-491.0008 293,-455.0008 540,-455.0008 540,-491.0008"/>
<text text-anchor="middle" x="416.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">*** knit_dir(knitter, pwd, depth)</text>
</g>
<!-- header_11&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_11&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M754.8307,-1109.1322C739.9952,-1063.9713 696.011,-945.651 622.5,-875.2015 596.3822,-850.1714 573.6378,-866.146 549.5,-839.2015 458.2234,-737.3115 428.1584,-567.8601 419.5565,-501.1852"/>
<polygon fill="#000000" stroke="#000000" points="423.0031,-500.5348 418.3126,-491.0348 416.055,-501.3863 423.0031,-500.5348"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="585.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="585.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_12&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.9872,-1109.2357C950.7534,-1062.7371 963.9796,-938.6237 898.5,-875.2015 809.3254,-788.8288 707.9026,-928.3471 621.5,-839.2015 530.9744,-745.8021 561.6739,-569.3246 578.0314,-501.0015"/>
<polygon fill="#000000" stroke="#000000" points="581.5032,-501.5424 580.5128,-490.9939 574.7089,-499.8577 581.5032,-501.5424"/>
</g>
<!-- prespace_18 -->
<g id="node19" class="node">
<title>prespace_18</title>
<ellipse fill="none" stroke="#000000" cx="676.5" cy="-473.0008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="676.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;prespace_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.7196,-1109.216C949.7317,-1063.208 961.0957,-941.1663 898.5,-875.2015 846.5353,-820.4399 784.2064,-894.2071 732.5,-839.2015 643.0182,-744.0101 660.2829,-569.3169 671.2299,-501.2239"/>
<polygon fill="#000000" stroke="#000000" points="674.7019,-501.6822 672.9152,-491.2392 667.7996,-500.5171 674.7019,-501.6822"/>
</g>
<!-- literal_19 -->
<g id="node20" class="node">
<title>literal_19</title>
<ellipse fill="none" stroke="#000000" cx="772.5" cy="-473.0008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="772.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;literal_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.0484,-1109.2074C947.3,-1064.218 954.536,-946.2582 898.5,-875.2015 872.8418,-842.6655 837.2977,-872.398 812.5,-839.2015 735.0937,-735.5782 755.0258,-567.1321 766.8105,-500.9559"/>
<polygon fill="#000000" stroke="#000000" points="770.2963,-501.355 768.6848,-490.8835 763.4144,-500.0744 770.2963,-501.355"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="848.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="848.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M937.8817,-1109.3932C933.8475,-1067.64 921.9408,-961.2279 898.5,-875.2015 893.9867,-858.6381 888.488,-855.8992 884.5,-839.2015 855.0311,-715.8148 849.6187,-563.506 848.6732,-501.3859"/>
<polygon fill="#000000" stroke="#000000" points="852.1707,-501.1536 848.547,-491.1977 845.1713,-501.2404 852.1707,-501.1536"/>
</g>
<!-- prespace_21 -->
<g id="node22" class="node">
<title>prespace_21</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-473.0008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="939.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;prespace_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-1109.2165C939.5,-1018.2192 939.5,-612.2992 939.5,-501.1943"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-501.0983 939.5,-491.0983 936.0001,-501.0984 943.0001,-501.0983"/>
</g>
<!-- literal_22 -->
<g id="node23" class="node">
<title>literal_22</title>
<ellipse fill="none" stroke="#000000" cx="1035.5" cy="-473.0008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1035.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_22 -->
<g id="edge22" class="edge">
<title>prose_12&#45;&gt;literal_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.4634,-1109.2772C953.2646,-1063.952 978.9679,-941.9472 994.5,-839.2015 1013.4434,-713.8898 1027.6207,-563.2261 1033.0642,-501.4898"/>
<polygon fill="#000000" stroke="#000000" points="1036.5659,-501.6227 1033.9494,-491.356 1029.5924,-501.0135 1036.5659,-501.6227"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1111.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="1111.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_12&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M948.2387,-1109.7985C977.0384,-1051.6617 1067.5837,-867.8662 1075.5,-839.2015 1109.2697,-716.9219 1112.3107,-564.0026 1111.9759,-501.553"/>
<polygon fill="#000000" stroke="#000000" points="1115.4737,-501.2775 1111.885,-491.3089 1108.474,-501.3396 1115.4737,-501.2775"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="1183.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="1183.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_13&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.7032,-1109.2447C1113.6321,-1063.8453 1134.4724,-941.6845 1147.5,-839.2015 1163.4593,-713.6561 1176.2767,-563.1204 1181.2579,-501.4539"/>
<polygon fill="#000000" stroke="#000000" points="1184.7589,-501.5798 1182.0693,-491.332 1177.7813,-501.0203 1184.7589,-501.5798"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1818.5,-839.4023 1228.5,-839.4023 1228.5,-106.5992 1818.5,-106.5992 1818.5,-839.4023"/>
<text text-anchor="middle" x="1523.5" y="-824.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_dir(knitter, orb_dir, pwd)</text>
<text text-anchor="middle" x="1523.5" y="-808.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knits = {}</text>
<text text-anchor="middle" x="1523.5" y="-793.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local srcDir = orb_dir:parentDir() .. &quot;/src&quot;</text>
<text text-anchor="middle" x="1523.5" y="-777.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(srcDir.idEst == Dir)</text>
<text text-anchor="middle" x="1523.5" y="-762.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;Sorcery directory: &quot; .. tostring(srcDir))</text>
<text text-anchor="middle" x="1523.5" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(orb_dir.path.str, false, false) do</text>
<text text-anchor="middle" x="1523.5" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local file_strs = getfiles(dir)</text>
<text text-anchor="middle" x="1523.5" y="-716.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dirObj = Dir(dir)</text>
<text text-anchor="middle" x="1523.5" y="-700.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local files &#160;= dirObj:getfiles()</text>
<text text-anchor="middle" x="1523.5" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;* &quot; .. a.yellow(dir))</text>
<text text-anchor="middle" x="1523.5" y="-670.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, file in ipairs(files) do</text>
<text text-anchor="middle" x="1523.5" y="-654.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;f = file.path.str</text>
<text text-anchor="middle" x="1523.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local ext = file:extension()</text>
<text text-anchor="middle" x="1523.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ext == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1523.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; read and knit</text>
<text text-anchor="middle" x="1523.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;&#160;&#160;&#45; &quot; .. tostring(file))</text>
<text text-anchor="middle" x="1523.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_str = file:read()</text>
<text text-anchor="middle" x="1523.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted = knitter:knit(Doc(orb_str))</text>
<text text-anchor="middle" x="1523.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_dir = subLastFor(&quot;/orb&quot;, &quot;/src&quot;, dirname(f))</text>
<text text-anchor="middle" x="1523.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(src_dir)</text>
<text text-anchor="middle" x="1523.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45; (#ext + 1)) &#45;&#45; 4 == #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1523.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = src_dir .. &quot;/&quot; .. bare_name .. &quot;.lua&quot;</text>
<text text-anchor="middle" x="1523.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local current_src = read(out_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1523.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(knitted, current_src, out_name, 0)</text>
<text text-anchor="middle" x="1523.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1523.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_dir = &quot;../tmp&quot; .. src_dir</text>
<text text-anchor="middle" x="1523.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(tmp_dir)</text>
<text text-anchor="middle" x="1523.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_out = &quot;../tmp&quot; .. out_name</text>
<text text-anchor="middle" x="1523.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(tmp_out, current_src)</text>
<text text-anchor="middle" x="1523.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;knits[#knits + 1] = out_name</text>
<text text-anchor="middle" x="1523.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; collect changed files if any</text>
<text text-anchor="middle" x="1523.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbbacks = &quot;&quot;</text>
<text text-anchor="middle" x="1523.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(knits) do</text>
<text text-anchor="middle" x="1523.5" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbbacks = orbbacks .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1523.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbbacks ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1523.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;orbbacks: \n&quot; .. orbbacks)</text>
<text text-anchor="middle" x="1523.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; if nothing changes, no rollback is needed, empty file</text>
<text text-anchor="middle" x="1523.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write(tostring(pwd) .. &quot;/.orbback&quot;, orbbacks)</text>
<text text-anchor="middle" x="1523.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1523.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_14&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1383.5017,-1109.2165C1392.5499,-1068.0974 1415.7479,-962.675 1440.7163,-849.2076"/>
<polygon fill="#000000" stroke="#000000" points="1444.1727,-849.7857 1442.9036,-839.2672 1437.3362,-848.2813 1444.1727,-849.7857"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1863.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="1863.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_15&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.5626,-1109.3582C1778.0371,-1064.218 1810.473,-942.6019 1827.5,-839.2015 1848.112,-714.0302 1858.408,-562.7054 1861.9899,-501.1165"/>
<polygon fill="#000000" stroke="#000000" points="1865.4906,-501.2008 1862.5632,-491.0185 1858.5019,-500.8039 1865.4906,-501.2008"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="643,-63.3015 284,-63.3015 284,-7.4985 643,-7.4985 643,-63.3015"/>
<text text-anchor="middle" x="463.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> Walks a given directory, kniting the contents of</text>
</g>
<!-- raw_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M588.2088,-454.8788C595.6426,-399.1033 611.8262,-226.556 548.5,-106.8001 541.0358,-92.6846 529.5,-80.2272 517.3098,-69.8331"/>
<polygon fill="#000000" stroke="#000000" points="519.2162,-66.8734 509.2408,-63.3039 514.813,-72.3151 519.2162,-66.8734"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="715.5,-53.4 661.5,-53.4 661.5,-17.4 715.5,-17.4 715.5,-53.4"/>
<text text-anchor="middle" x="688.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prespace_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M677.0003,-454.7548C678.8682,-386.6401 685.4422,-146.9064 687.7178,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="691.222,-63.8162 687.9975,-53.724 684.2246,-63.6242 691.222,-63.8162"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="799.5,-53.4 745.5,-53.4 745.5,-17.4 799.5,-17.4 799.5,-53.4"/>
<text text-anchor="middle" x="772.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/org/</text>
</g>
<!-- literal_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>literal_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.5,-454.7548C772.5,-386.6401 772.5,-146.9064 772.5,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="776.0001,-63.7239 772.5,-53.724 769.0001,-63.724 776.0001,-63.7239"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="875.5,-55.3021 821.5,-55.3021 821.5,-15.4979 875.5,-15.4979 875.5,-55.3021"/>
<text text-anchor="middle" x="848.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> into</text>
</g>
<!-- raw_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M848.5,-454.7548C848.5,-387.0355 848.5,-149.6838 848.5,-65.3844"/>
<polygon fill="#000000" stroke="#000000" points="852.0001,-65.2085 848.5,-55.2085 845.0001,-65.2086 852.0001,-65.2085"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="966.5,-53.4 912.5,-53.4 912.5,-17.4 966.5,-17.4 966.5,-53.4"/>
<text text-anchor="middle" x="939.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-454.7548C939.5,-386.6401 939.5,-146.9064 939.5,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-63.7239 939.5,-53.724 936.0001,-63.724 943.0001,-63.7239"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1062.5,-53.4 1008.5,-53.4 1008.5,-17.4 1062.5,-17.4 1062.5,-53.4"/>
<text text-anchor="middle" x="1035.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/src/</text>
</g>
<!-- literal_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>literal_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1035.5,-454.7548C1035.5,-386.6401 1035.5,-146.9064 1035.5,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="1039.0001,-63.7239 1035.5,-53.724 1032.0001,-63.724 1039.0001,-63.7239"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1136.5,-53.4 1082.5,-53.4 1082.5,-17.4 1136.5,-17.4 1136.5,-53.4"/>
<text text-anchor="middle" x="1109.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1111.4166,-454.7548C1111.1053,-386.6401 1110.0096,-146.9064 1109.6304,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="1113.1295,-63.7078 1109.5837,-53.724 1106.1296,-63.7399 1113.1295,-63.7078"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1618.5,-62.7005 1154.5,-62.7005 1154.5,-8.0996 1618.5,-8.0996 1618.5,-62.7005"/>
<text text-anchor="middle" x="1386.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [X] TODO fix up the orb/notes directory so it doesn&#39;t explode</text>
<text text-anchor="middle" x="1386.5" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;the knit.</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1179.4816,-455.1696C1167.6939,-398.0321 1138.8842,-216.8154 1219.5,-106.8001 1231.7527,-90.079 1248.7257,-77.2374 1267.1866,-67.3853"/>
<polygon fill="#000000" stroke="#000000" points="1268.9864,-70.3982 1276.3546,-62.785 1265.847,-64.1416 1268.9864,-70.3982"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2066.5,-63.3015 1644.5,-63.3015 1644.5,-7.4985 2066.5,-7.4985 2066.5,-63.3015"/>
<text text-anchor="middle" x="1855.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo add some proper codex detection and correction</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1863.1664,-454.7548C1861.966,-389.0933 1857.8501,-163.9521 1856.1962,-73.4843"/>
<polygon fill="#000000" stroke="#000000" points="1859.694,-73.3243 1856.0117,-63.39 1852.6952,-73.4523 1859.694,-73.3243"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2338,-491.0008 2119,-491.0008 2119,-455.0008 2338,-455.0008 2338,-491.0008"/>
<text text-anchor="middle" x="2228.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">** knit_all(knitter, pwd_str)</text>
</g>
<!-- header_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>header_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2228.5,-1109.2165C2228.5,-1018.2192 2228.5,-612.2992 2228.5,-501.1943"/>
<polygon fill="#000000" stroke="#000000" points="2232.0001,-501.0983 2228.5,-491.0983 2225.0001,-501.0984 2232.0001,-501.0983"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2389.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="2389.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_37&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2394.3611,-1109.2165C2393.6658,-1018.2192 2390.5643,-612.2992 2389.7154,-501.1943"/>
<polygon fill="#000000" stroke="#000000" points="2393.2147,-501.0713 2389.6383,-491.0983 2386.2149,-501.1248 2393.2147,-501.0713"/>
</g>
<!-- prespace_43 -->
<g id="node44" class="node">
<title>prespace_43</title>
<ellipse fill="none" stroke="#000000" cx="2561.5" cy="-473.0008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2561.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_38&#45;&gt;prespace_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;prespace_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2608.1661,-1109.2165C2601.4915,-1018.2192 2571.7175,-612.2992 2563.568,-501.1943"/>
<polygon fill="#000000" stroke="#000000" points="2567.0497,-500.8155 2562.8274,-491.0983 2560.0684,-501.3276 2567.0497,-500.8155"/>
</g>
<!-- literal_44 -->
<g id="node45" class="node">
<title>literal_44</title>
<ellipse fill="none" stroke="#000000" cx="2657.5" cy="-473.0008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2657.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_38&#45;&gt;literal_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;literal_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2610.8339,-1109.2165C2617.5085,-1018.2192 2647.2825,-612.2992 2655.432,-501.1943"/>
<polygon fill="#000000" stroke="#000000" points="2658.9316,-501.3276 2656.1726,-491.0983 2651.9503,-500.8155 2658.9316,-501.3276"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2733.5" cy="-473.0008" rx="27" ry="18"/>
<text text-anchor="middle" x="2733.5" y="-468.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_38&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2616.3297,-1109.5136C2633.1258,-1064.7278 2676.5933,-943.8569 2697.5,-839.2015 2722.3509,-714.8024 2730.3096,-563.0518 2732.6297,-501.2331"/>
<polygon fill="#000000" stroke="#000000" points="2736.1325,-501.2138 2732.9891,-491.096 2729.1369,-500.9657 2736.1325,-501.2138"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3214.5,-655.1016 2778.5,-655.1016 2778.5,-290.9 3214.5,-290.9 3214.5,-655.1016"/>
<text text-anchor="middle" x="2996.5" y="-624.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_all(knitter, pwd_str)</text>
<text text-anchor="middle" x="2996.5" y="-608.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local did_knit = false</text>
<text text-anchor="middle" x="2996.5" y="-593.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local pwd = Dir(pwd_str)</text>
<text text-anchor="middle" x="2996.5" y="-577.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd.codex_type = &quot;base&quot;</text>
<text text-anchor="middle" x="2996.5" y="-562.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;pwd:&quot; .. tostring(pwd))</text>
<text text-anchor="middle" x="2996.5" y="-547.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = pwd .. &quot;/orb&quot;</text>
<text text-anchor="middle" x="2996.5" y="-531.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;orbDir: &quot; .. tostring(orbDir))</text>
<text text-anchor="middle" x="2996.5" y="-516.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbDir:exists() then</text>
<text text-anchor="middle" x="2996.5" y="-500.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Knit: &quot;) .. tostring(orbDir))</text>
<text text-anchor="middle" x="2996.5" y="-485.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbDir.codex_type = &quot;home&quot;</text>
<text text-anchor="middle" x="2996.5" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;did_knit = knit_dir(knitter, orbDir, pwd)</text>
<text text-anchor="middle" x="2996.5" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2996.5" y="-439.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;No orb directory to knit. No action taken.&quot;)</text>
<text text-anchor="middle" x="2996.5" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2996.5" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2996.5" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return did_knit</text>
<text text-anchor="middle" x="2996.5" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2996.5" y="-346.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knit_all = knit_all</text>
<text text-anchor="middle" x="2996.5" y="-298.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2898.3067,-1109.2165C2908.1134,-1045.6772 2941.6179,-828.594 2966.7825,-665.5471"/>
<polygon fill="#000000" stroke="#000000" points="2970.2855,-665.7957 2968.3518,-655.3788 2963.3674,-664.7279 2970.2855,-665.7957"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2534.5,-70.7004 2084.5,-70.7004 2084.5,-.0997 2534.5,-.0997 2534.5,-70.7004"/>
<text text-anchor="middle" x="2309.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Both sides of the interface to this are wrong, but let&#39;s build</text>
<text text-anchor="middle" x="2309.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">the Dir locally and go from there.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2389.651,-454.6175C2389.6136,-400.1906 2385.9984,-235.629 2346.5,-106.8001 2343.7651,-97.8798 2339.9367,-88.7511 2335.772,-80.1308"/>
<polygon fill="#000000" stroke="#000000" points="2338.7949,-78.3526 2331.1568,-71.0102 2332.549,-81.5132 2338.7949,-78.3526"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2606.5,-53.4 2552.5,-53.4 2552.5,-17.4 2606.5,-17.4 2606.5,-53.4"/>
</g>
<!-- prespace_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prespace_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2562.2505,-454.7548C2565.0523,-386.6401 2574.9134,-146.9064 2578.3267,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="2581.8322,-63.8594 2578.7463,-53.724 2574.8382,-63.5716 2581.8322,-63.8594"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2690,-53.4 2625,-53.4 2625,-17.4 2690,-17.4 2690,-53.4"/>
<text text-anchor="middle" x="2657.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter</text>
</g>
<!-- literal_44&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>literal_44&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2657.5,-454.7548C2657.5,-386.6401 2657.5,-146.9064 2657.5,-63.9236"/>
<polygon fill="#000000" stroke="#000000" points="2661.0001,-63.7239 2657.5,-53.724 2654.0001,-63.724 2661.0001,-63.7239"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3123,-54.7006 2708,-54.7006 2708,-16.0995 3123,-16.0995 3123,-54.7006"/>
<text text-anchor="middle" x="2915.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> isn&#39;t wrong externally, the internal interface it</text>
<text text-anchor="middle" x="2915.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">presents needs considerable refinement to work correctly.</text>
</g>
<!-- raw_45&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_45&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2729.6367,-454.9361C2718.5051,-397.8583 2691.8875,-218.5656 2769.5,-106.8001 2784.6984,-84.9137 2808.5513,-69.4586 2832.6054,-58.6681"/>
<polygon fill="#000000" stroke="#000000" points="2833.9797,-61.8871 2841.8166,-54.7573 2831.244,-55.4438 2833.9797,-61.8871"/>
</g>
</g>
</svg>