<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3223pt" height="1666pt"
 viewBox="0.00 0.00 3222.50 1665.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1661.8024)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1661.8024 3218.5,-1661.8024 3218.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1639.8024" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1635.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 143</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1567.8024" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1563.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;109</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1621.6338C416.5,-1613.9334 416.5,-1604.7767 416.5,-1596.219"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1596.2156 416.5,-1586.2157 413.0001,-1596.2157 420.0001,-1596.2156"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="98.5" cy="-1495.8024" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="98.5" y="-1491.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M365.7603,-1556.3142C310.1471,-1543.7225 220.883,-1523.5118 160.9963,-1509.9525"/>
<polygon fill="#000000" stroke="#000000" points="161.436,-1506.4635 150.9099,-1507.6688 159.8902,-1513.2907 161.436,-1506.4635"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="268.5" cy="-1495.8024" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="268.5" y="-1491.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M384.0208,-1552.0017C359.8325,-1540.2344 326.8935,-1524.21 302.3767,-1512.283"/>
<polygon fill="#000000" stroke="#000000" points="303.6223,-1508.9968 293.0988,-1507.7694 300.56,-1515.2914 303.6223,-1508.9968"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1495.8024" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1491.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1549.6338C416.5,-1541.9334 416.5,-1532.7767 416.5,-1524.219"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1524.2156 416.5,-1514.2157 413.0001,-1524.2157 420.0001,-1524.2156"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1020.5" cy="-1495.8024" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1020.5" y="-1491.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 43&#45;109</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M476.9004,-1560.6024C588.0891,-1547.3481 824.8392,-1519.1262 945.8749,-1504.6981"/>
<polygon fill="#000000" stroke="#000000" points="946.6417,-1508.1316 956.1571,-1503.4724 945.8131,-1501.1808 946.6417,-1508.1316"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="2394.5" cy="-1495.8024" rx="74.6878" ry="18"/>
<text text-anchor="middle" x="2394.5" y="-1491.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 110&#45;143</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M481.7482,-1565.4273C775.9319,-1554.7189 1978.9142,-1510.9299 2309.8772,-1498.8827"/>
<polygon fill="#000000" stroke="#000000" points="2310.482,-1502.3631 2320.3481,-1498.5016 2310.2273,-1495.3677 2310.482,-1502.3631"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="129.5,-1207.602 15.5,-1207.602 15.5,-1171.602 129.5,-1171.602 129.5,-1207.602"/>
<text text-anchor="middle" x="72.5" y="-1186.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M96.9514,-1477.5652C92.589,-1426.1892 80.174,-1279.9787 74.9083,-1217.9646"/>
<polygon fill="#000000" stroke="#000000" points="78.3741,-1217.4117 74.0404,-1207.7437 71.3992,-1218.004 78.3741,-1217.4117"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="174.5" cy="-1189.602" rx="27" ry="18"/>
<text text-anchor="middle" x="174.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M247.6407,-1482.0481C234.7595,-1472.3812 219.1005,-1458.2645 210.5,-1441.8024 171.9433,-1368.0018 170.6264,-1266.3544 172.6291,-1217.7292"/>
<polygon fill="#000000" stroke="#000000" points="176.1297,-1217.8015 173.1258,-1207.6414 169.1382,-1217.4572 176.1297,-1217.8015"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="613.5,-1442.003 219.5,-1442.003 219.5,-937.201 613.5,-937.201 613.5,-1442.003"/>
<text text-anchor="middle" x="416.5" y="-1426.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="416.5" y="-1395.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; ()</text>
<text text-anchor="middle" x="416.5" y="-1379.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="416.5" y="-1364.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="416.5" y="-1349.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="416.5" y="-1317.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="416.5" y="-1302.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="416.5" y="-1286.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="416.5" y="-1271.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="416.5" y="-1256.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="416.5" y="-1240.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="416.5" y="-1225.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="416.5" y="-1209.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="416.5" y="-1194.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="416.5" y="-1179.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="416.5" y="-1163.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="416.5" y="-1148.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="416.5" y="-1132.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="416.5" y="-1085.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="416.5" y="-1054.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="416.5" y="-1038.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir, Path, File = walk.Dir, walk.Path, walk.File</text>
<text text-anchor="middle" x="416.5" y="-1023.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="416.5" y="-1007.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="416.5" y="-992.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="416.5" y="-977.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="416.5" y="-945.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1477.5652C416.5,-1470.661 416.5,-1462.0442 416.5,-1452.1493"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1451.8444 416.5,-1441.8444 413.0001,-1451.8444 420.0001,-1451.8444"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="760.5" cy="-1189.602" rx="128.6478" ry="18"/>
<text text-anchor="middle" x="760.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : knit_dir(knitter, pwd, depth)</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3132,-1482.6256C947.9856,-1474.0883 919.3028,-1460.9277 898.5,-1441.8024 828.204,-1377.1749 785.9026,-1268.2863 769.0144,-1217.3886"/>
<polygon fill="#000000" stroke="#000000" points="772.2965,-1216.1628 765.8849,-1207.7282 765.6372,-1218.3201 772.2965,-1216.1628"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-1189.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="939.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.6757,-1477.5652C1002.0569,-1426.0828 963.2473,-1279.3729 946.9012,-1217.5805"/>
<polygon fill="#000000" stroke="#000000" points="950.2401,-1216.516 944.2991,-1207.7437 943.4729,-1218.3062 950.2401,-1216.516"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1102.5" cy="-1189.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1102.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1025.3839,-1477.5652C1039.1708,-1426.0828 1078.4595,-1279.3729 1095.0074,-1217.5805"/>
<polygon fill="#000000" stroke="#000000" points="1098.4357,-1218.3087 1097.6417,-1207.7437 1091.6739,-1216.4979 1098.4357,-1218.3087"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1379.5" cy="-1189.602" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1379.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 51&#45;104</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.3072,-1481.5242C1088.8676,-1472.3418 1119.3279,-1458.9182 1143.5,-1441.8024 1237.9115,-1374.9513 1324.0504,-1265.6348 1360.77,-1215.8189"/>
<polygon fill="#000000" stroke="#000000" points="1363.7665,-1217.6505 1366.8407,-1207.5115 1358.1147,-1213.5204 1363.7665,-1217.6505"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1760.5" cy="-1189.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1760.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1090.231,-1492.4326C1199.1476,-1486.3364 1404.0609,-1471.2822 1470.5,-1441.8024 1591.2447,-1388.2266 1698.6747,-1266.6819 1741.1694,-1214.3387"/>
<polygon fill="#000000" stroke="#000000" points="1744.1214,-1216.2525 1747.6538,-1206.2639 1738.6634,-1211.8695 1744.1214,-1216.2525"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="2228.5" cy="-1189.602" rx="115.0832" ry="18"/>
<text text-anchor="middle" x="2228.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knit_all(knitter, pwd_str)</text>
</g>
<!-- section_6&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_6&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2379.5635,-1477.9227C2371.3668,-1467.6879 2361.3125,-1454.4095 2353.5,-1441.8024 2305.0758,-1363.6605 2260.3209,-1264.1765 2239.9912,-1216.9123"/>
<polygon fill="#000000" stroke="#000000" points="2243.1794,-1215.4659 2236.0313,-1207.6457 2236.7425,-1218.2167 2243.1794,-1215.4659"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="2394.5" cy="-1189.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2394.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_6&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2394.5,-1477.5652C2394.5,-1426.1892 2394.5,-1279.9787 2394.5,-1217.9646"/>
<polygon fill="#000000" stroke="#000000" points="2398.0001,-1217.7436 2394.5,-1207.7437 2391.0001,-1217.7437 2398.0001,-1217.7436"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2609.5" cy="-1189.602" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2609.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_6&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2408.373,-1477.9554C2416.414,-1467.5064 2426.664,-1454.0064 2435.5,-1441.8024 2494.7233,-1360.0048 2561.7983,-1260.8314 2592.5106,-1215.0367"/>
<polygon fill="#000000" stroke="#000000" points="2595.4976,-1216.8666 2598.1552,-1206.6105 2589.6818,-1212.9707 2595.4976,-1216.8666"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="2895.5" cy="-1189.602" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2895.5" y="-1185.402" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 118&#45;142</text>
</g>
<!-- section_6&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_6&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2459.0695,-1486.5851C2523.7427,-1476.5769 2618.1811,-1459.6216 2650.5,-1441.8024 2754.5984,-1384.407 2842.0912,-1268.3986 2878.0065,-1216.1599"/>
<polygon fill="#000000" stroke="#000000" points="2880.9903,-1217.9961 2883.7151,-1207.7576 2875.2002,-1214.0622 2880.9903,-1217.9961"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="275,-540.002 0,-540.002 0,-468.1997 275,-468.1997 275,-540.002"/>
<text text-anchor="middle" x="137.5" y="-476.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is due for a complete overhaul.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M173.5103,-1171.2665C168.6549,-1081.3101 147.2924,-685.5245 139.9716,-549.8928"/>
<polygon fill="#000000" stroke="#000000" points="143.4626,-549.6288 139.4286,-539.832 136.4727,-550.0062 143.4626,-549.6288"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="540,-522.1008 293,-522.1008 293,-486.1008 540,-486.1008 540,-522.1008"/>
<text text-anchor="middle" x="416.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">*** knit_dir(knitter, pwd, depth)</text>
</g>
<!-- header_11&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_11&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M754.8307,-1171.3323C739.9952,-1126.1714 696.011,-1007.8511 622.5,-937.4016 596.3822,-912.3715 573.2945,-928.6498 549.5,-901.4016 451.8589,-789.5882 425.3717,-603.5563 418.6441,-532.6988"/>
<polygon fill="#000000" stroke="#000000" points="422.0957,-531.9964 417.7262,-522.3446 415.123,-532.6146 422.0957,-531.9964"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="585.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="585.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_12&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.9872,-1171.4358C950.7534,-1124.9372 963.9796,-1000.8238 898.5,-937.4016 809.3254,-851.0289 707.562,-990.876 621.5,-901.4016 522.6295,-798.6109 559.529,-604.1088 577.7458,-531.9554"/>
<polygon fill="#000000" stroke="#000000" points="581.247,-532.3992 580.3826,-521.8397 574.4733,-530.6335 581.247,-532.3992"/>
</g>
<!-- prespace_18 -->
<g id="node19" class="node">
<title>prespace_18</title>
<ellipse fill="none" stroke="#000000" cx="676.5" cy="-504.1008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="676.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;prespace_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.7196,-1171.4161C949.7317,-1125.4081 961.0957,-1003.3664 898.5,-937.4016 846.5353,-882.64 783.8832,-956.7092 732.5,-901.4016 635.0914,-796.5535 657.9646,-604.1005 670.7948,-532.1889"/>
<polygon fill="#000000" stroke="#000000" points="674.2845,-532.567 672.6737,-522.0953 667.4027,-531.2859 674.2845,-532.567"/>
</g>
<!-- literal_19 -->
<g id="node20" class="node">
<title>literal_19</title>
<ellipse fill="none" stroke="#000000" cx="772.5" cy="-504.1008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="772.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;literal_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.0484,-1171.4075C947.3,-1126.4181 954.536,-1008.4583 898.5,-937.4016 872.8418,-904.8656 837.1571,-934.7027 812.5,-901.4016 728.1374,-787.4644 753.033,-602.0285 766.4631,-532.033"/>
<polygon fill="#000000" stroke="#000000" points="769.9024,-532.6826 768.4244,-522.1914 763.0374,-531.3144 769.9024,-532.6826"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="848.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="848.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M937.8817,-1171.5933C933.8475,-1129.8401 921.9408,-1023.428 898.5,-937.4016 893.9867,-920.8382 888.4243,-918.1143 884.5,-901.4016 852.6974,-765.9597 848.6386,-598.4466 848.3651,-532.5892"/>
<polygon fill="#000000" stroke="#000000" points="851.8646,-532.2011 848.351,-522.2059 844.8646,-532.2107 851.8646,-532.2011"/>
</g>
<!-- prespace_21 -->
<g id="node22" class="node">
<title>prespace_21</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-504.1008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="939.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;prespace_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-1171.2665C939.5,-1077.0037 939.5,-646.9296 939.5,-532.2646"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-532.1745 939.5,-522.1745 936.0001,-532.1745 943.0001,-532.1745"/>
</g>
<!-- literal_22 -->
<g id="node23" class="node">
<title>literal_22</title>
<ellipse fill="none" stroke="#000000" cx="1035.5" cy="-504.1008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1035.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_22 -->
<g id="edge22" class="edge">
<title>prose_12&#45;&gt;literal_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.5185,-1171.4855C953.4454,-1126.179 979.4132,-1004.2136 994.5,-901.4016 1014.6761,-763.9081 1028.3892,-598.2053 1033.3936,-532.7204"/>
<polygon fill="#000000" stroke="#000000" points="1036.911,-532.6216 1034.1743,-522.3863 1029.9309,-532.0942 1036.911,-532.6216"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1111.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1111.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_12&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M948.2471,-1172.0009C977.0735,-1113.8714 1067.6931,-930.0963 1075.5,-901.4016 1112.0994,-766.8785 1113.4001,-598.2666 1112.2847,-532.3465"/>
<polygon fill="#000000" stroke="#000000" points="1115.7834,-532.2426 1112.0817,-522.3155 1108.7849,-532.3844 1115.7834,-532.2426"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="1183.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1183.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_13&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.7516,-1171.4508C1113.7909,-1126.0653 1134.8633,-1003.9336 1147.5,-901.4016 1164.4779,-763.6457 1176.9359,-598.0913 1181.5461,-532.6833"/>
<polygon fill="#000000" stroke="#000000" points="1185.0617,-532.5813 1182.2668,-522.3617 1178.0787,-532.0936 1185.0617,-532.5813"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1818.5,-901.2025 1228.5,-901.2025 1228.5,-106.9992 1818.5,-106.9992 1818.5,-901.2025"/>
<text text-anchor="middle" x="1523.5" y="-886.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_dir(knitter, orb_dir, pwd)</text>
<text text-anchor="middle" x="1523.5" y="-870.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knits = {}</text>
<text text-anchor="middle" x="1523.5" y="-855.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local srcDir = orb_dir:parentDir() .. &quot;/src&quot;</text>
<text text-anchor="middle" x="1523.5" y="-840.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(srcDir.idEst == Dir)</text>
<text text-anchor="middle" x="1523.5" y="-824.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;Sorcery directory: &quot; .. tostring(srcDir))</text>
<text text-anchor="middle" x="1523.5" y="-809.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(orb_dir.path.str, false, false) do</text>
<text text-anchor="middle" x="1523.5" y="-793.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local file_strs = getfiles(dir)</text>
<text text-anchor="middle" x="1523.5" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dirObj = Dir(dir)</text>
<text text-anchor="middle" x="1523.5" y="-763.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local files &#160;= dirObj:getfiles()</text>
<text text-anchor="middle" x="1523.5" y="-747.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;* &quot; .. a.yellow(dir))</text>
<text text-anchor="middle" x="1523.5" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, file in ipairs(files) do</text>
<text text-anchor="middle" x="1523.5" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;f = file.path.str</text>
<text text-anchor="middle" x="1523.5" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local ext = file:extension()</text>
<text text-anchor="middle" x="1523.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ext == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1523.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; read and knit</text>
<text text-anchor="middle" x="1523.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;&#160;&#160;&#45; &quot; .. tostring(file))</text>
<text text-anchor="middle" x="1523.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_str = file:read()</text>
<text text-anchor="middle" x="1523.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted = knitter:knit(Doc(orb_str))</text>
<text text-anchor="middle" x="1523.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_dir = subLastFor(&quot;/orb&quot;, &quot;/src&quot;, dirname(f))</text>
<text text-anchor="middle" x="1523.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local relpath = file.path:relPath(orb_dir)</text>
<text text-anchor="middle" x="1523.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_path = srcDir .. (&quot;/&quot; .. tostring(relpath))</text>
<text text-anchor="middle" x="1523.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;&#160;&#160;&#160;&#160;&#45; &quot; .. tostring(src_path))</text>
<text text-anchor="middle" x="1523.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(src_dir)</text>
<text text-anchor="middle" x="1523.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45; (#ext + 1)) &#45;&#45; 4 == #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1523.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = src_dir .. &quot;/&quot; .. bare_name .. &quot;.lua&quot;</text>
<text text-anchor="middle" x="1523.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local current_src = read(out_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1523.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(knitted, current_src, out_name, 0)</text>
<text text-anchor="middle" x="1523.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1523.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_dir = &quot;../tmp&quot; .. src_dir</text>
<text text-anchor="middle" x="1523.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(tmp_dir)</text>
<text text-anchor="middle" x="1523.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_out = &quot;../tmp&quot; .. out_name</text>
<text text-anchor="middle" x="1523.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(tmp_out, current_src)</text>
<text text-anchor="middle" x="1523.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;knits[#knits + 1] = out_name</text>
<text text-anchor="middle" x="1523.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; collect changed files if any</text>
<text text-anchor="middle" x="1523.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbbacks = &quot;&quot;</text>
<text text-anchor="middle" x="1523.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(knits) do</text>
<text text-anchor="middle" x="1523.5" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbbacks = orbbacks .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1523.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbbacks ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1523.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;orbbacks: \n&quot; .. orbbacks)</text>
<text text-anchor="middle" x="1523.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1523.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; if nothing changes, no rollback is needed, empty file</text>
<text text-anchor="middle" x="1523.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write(tostring(pwd) .. &quot;/.orbback&quot;, orbbacks)</text>
<text text-anchor="middle" x="1523.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1523.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_14&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1383.2776,-1171.6189C1391.8367,-1130.8742 1413.8467,-1026.0972 1437.9586,-911.3142"/>
<polygon fill="#000000" stroke="#000000" points="1441.4414,-911.7597 1440.072,-901.2537 1434.5909,-910.3206 1441.4414,-911.7597"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1863.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="1863.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_15&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.6114,-1171.5663C1778.1974,-1126.4441 1810.8675,-1004.8662 1827.5,-901.4016 1849.5298,-764.3628 1859.1301,-598.4028 1862.2609,-532.7847"/>
<polygon fill="#000000" stroke="#000000" points="1865.774,-532.5802 1862.7404,-522.429 1858.7815,-532.2563 1865.774,-532.5802"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="643,-63.3015 284,-63.3015 284,-7.4985 643,-7.4985 643,-63.3015"/>
<text text-anchor="middle" x="463.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> Walks a given directory, kniting the contents of</text>
</g>
<!-- raw_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M588.3935,-486.1322C596.9256,-427.5208 617.2857,-238.1229 548.5,-106.8001 541.0912,-92.6555 529.5749,-80.1878 517.3857,-69.7931"/>
<polygon fill="#000000" stroke="#000000" points="519.2911,-66.8326 509.315,-63.2648 514.8888,-72.275 519.2911,-66.8326"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="715.5,-53.4 661.5,-53.4 661.5,-17.4 715.5,-17.4 715.5,-53.4"/>
<text text-anchor="middle" x="688.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prespace_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M676.9631,-486.0144C678.795,-414.4624 685.5443,-150.8453 687.7773,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="691.2811,-63.5189 688.0383,-53.4326 684.2834,-63.3397 691.2811,-63.5189"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="799.5,-53.4 745.5,-53.4 745.5,-17.4 799.5,-17.4 799.5,-53.4"/>
<text text-anchor="middle" x="772.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/org/</text>
</g>
<!-- literal_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>literal_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.5,-486.0144C772.5,-414.4624 772.5,-150.8453 772.5,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="776.0001,-63.4325 772.5,-53.4326 769.0001,-63.4326 776.0001,-63.4325"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="875.5,-55.3021 821.5,-55.3021 821.5,-15.4979 875.5,-15.4979 875.5,-55.3021"/>
<text text-anchor="middle" x="848.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> into</text>
</g>
<!-- raw_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M848.5,-486.0144C848.5,-414.9548 848.5,-154.4643 848.5,-65.4522"/>
<polygon fill="#000000" stroke="#000000" points="852.0001,-65.2355 848.5,-55.2355 845.0001,-65.2355 852.0001,-65.2355"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="966.5,-53.4 912.5,-53.4 912.5,-17.4 966.5,-17.4 966.5,-53.4"/>
<text text-anchor="middle" x="939.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-486.0144C939.5,-414.4624 939.5,-150.8453 939.5,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-63.4325 939.5,-53.4326 936.0001,-63.4326 943.0001,-63.4325"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1062.5,-53.4 1008.5,-53.4 1008.5,-17.4 1062.5,-17.4 1062.5,-53.4"/>
<text text-anchor="middle" x="1035.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/src/</text>
</g>
<!-- literal_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>literal_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1035.5,-486.0144C1035.5,-414.4624 1035.5,-150.8453 1035.5,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="1039.0001,-63.4325 1035.5,-53.4326 1032.0001,-63.4326 1039.0001,-63.4325"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1136.5,-53.4 1082.5,-53.4 1082.5,-17.4 1136.5,-17.4 1136.5,-53.4"/>
<text text-anchor="middle" x="1109.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1111.4228,-486.0144C1111.1175,-414.4624 1109.9926,-150.8453 1109.6204,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="1113.1197,-63.4175 1109.5769,-53.4326 1106.1197,-63.4474 1113.1197,-63.4175"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1618.5,-62.7005 1154.5,-62.7005 1154.5,-8.0996 1618.5,-8.0996 1618.5,-62.7005"/>
<text text-anchor="middle" x="1386.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [X] TODO fix up the orb/notes directory so it doesn&#39;t explode</text>
<text text-anchor="middle" x="1386.5" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;the knit.</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1179.2371,-486.061C1166.063,-425.6113 1131.9454,-227.2453 1219.5,-106.8001 1231.6888,-90.0324 1248.6308,-77.1681 1267.0808,-67.308"/>
<polygon fill="#000000" stroke="#000000" points="1268.8799,-70.3212 1276.245,-62.7051 1265.738,-64.0659 1268.8799,-70.3212"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2066.5,-63.3015 1644.5,-63.3015 1644.5,-7.4985 2066.5,-7.4985 2066.5,-63.3015"/>
<text text-anchor="middle" x="1855.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo add some proper codex detection and correction</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1863.1913,-486.0144C1862.0122,-416.9358 1857.7776,-168.8412 1856.1467,-73.2888"/>
<polygon fill="#000000" stroke="#000000" points="1859.6448,-73.1421 1855.9746,-63.2033 1852.6458,-73.2616 1859.6448,-73.1421"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2338,-522.1008 2119,-522.1008 2119,-486.1008 2338,-486.1008 2338,-522.1008"/>
<text text-anchor="middle" x="2228.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">** knit_all(knitter, pwd_str)</text>
</g>
<!-- header_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>header_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2228.5,-1171.2665C2228.5,-1077.0037 2228.5,-646.9296 2228.5,-532.2646"/>
<polygon fill="#000000" stroke="#000000" points="2232.0001,-532.1745 2228.5,-522.1745 2225.0001,-532.1745 2232.0001,-532.1745"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2389.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="2389.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_37&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2394.3663,-1171.2665C2393.6787,-1077.0037 2390.5418,-646.9296 2389.7054,-532.2646"/>
<polygon fill="#000000" stroke="#000000" points="2393.2048,-532.1487 2389.6318,-522.1745 2386.205,-532.1998 2393.2048,-532.1487"/>
</g>
<!-- prespace_43 -->
<g id="node44" class="node">
<title>prespace_43</title>
<ellipse fill="none" stroke="#000000" cx="2561.5" cy="-504.1008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2561.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_38&#45;&gt;prespace_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;prespace_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2608.2161,-1171.2665C2601.6157,-1077.0037 2571.5011,-646.9296 2563.4721,-532.2646"/>
<polygon fill="#000000" stroke="#000000" points="2566.9556,-531.9056 2562.7656,-522.1745 2559.9727,-532.3946 2566.9556,-531.9056"/>
</g>
<!-- literal_44 -->
<g id="node45" class="node">
<title>literal_44</title>
<ellipse fill="none" stroke="#000000" cx="2657.5" cy="-504.1008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2657.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_38&#45;&gt;literal_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;literal_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2610.7839,-1171.2665C2617.3843,-1077.0037 2647.4989,-646.9296 2655.5279,-532.2646"/>
<polygon fill="#000000" stroke="#000000" points="2659.0273,-532.3946 2656.2344,-522.1745 2652.0444,-531.9056 2659.0273,-532.3946"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2733.5" cy="-504.1008" rx="27" ry="18"/>
<text text-anchor="middle" x="2733.5" y="-499.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_38&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2616.3791,-1171.7235C2633.288,-1126.96 2676.9925,-1006.136 2697.5,-901.4016 2724.2337,-764.8687 2731.1786,-597.9768 2732.9299,-532.4374"/>
<polygon fill="#000000" stroke="#000000" points="2736.437,-532.1892 2733.1846,-522.106 2729.4392,-532.0167 2736.437,-532.1892"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3214.5,-686.2016 2778.5,-686.2016 2778.5,-322 3214.5,-322 3214.5,-686.2016"/>
<text text-anchor="middle" x="2996.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_all(knitter, pwd_str)</text>
<text text-anchor="middle" x="2996.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local did_knit = false</text>
<text text-anchor="middle" x="2996.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local pwd = Dir(pwd_str)</text>
<text text-anchor="middle" x="2996.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd.codex_type = &quot;base&quot;</text>
<text text-anchor="middle" x="2996.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;pwd:&quot; .. tostring(pwd))</text>
<text text-anchor="middle" x="2996.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = pwd .. &quot;/orb&quot;</text>
<text text-anchor="middle" x="2996.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;orbDir: &quot; .. tostring(orbDir))</text>
<text text-anchor="middle" x="2996.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbDir:exists() then</text>
<text text-anchor="middle" x="2996.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Knit: &quot;) .. tostring(orbDir))</text>
<text text-anchor="middle" x="2996.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbDir.codex_type = &quot;home&quot;</text>
<text text-anchor="middle" x="2996.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;did_knit = knit_dir(knitter, orbDir, pwd)</text>
<text text-anchor="middle" x="2996.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2996.5" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;No orb directory to knit. No action taken.&quot;)</text>
<text text-anchor="middle" x="2996.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2996.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2996.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return did_knit</text>
<text text-anchor="middle" x="2996.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2996.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knit_all = knit_all</text>
<text text-anchor="middle" x="2996.5" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2898.2015,-1171.2665C2908.049,-1104.4302 2942.7709,-868.7679 2968.1647,-696.4164"/>
<polygon fill="#000000" stroke="#000000" points="2971.6377,-696.8557 2969.6328,-686.4523 2964.7125,-695.8353 2971.6377,-696.8557"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2534.5,-70.7004 2084.5,-70.7004 2084.5,-.0997 2534.5,-.0997 2534.5,-70.7004"/>
<text text-anchor="middle" x="2309.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Both sides of the interface to this are wrong, but let&#39;s build</text>
<text text-anchor="middle" x="2309.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">the Dir locally and go from there.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2389.8852,-485.8113C2390.5973,-428.5204 2389.0756,-247.9482 2346.5,-106.8001 2343.8056,-97.8675 2339.9965,-88.7329 2335.8384,-80.1106"/>
<polygon fill="#000000" stroke="#000000" points="2338.8618,-78.3335 2331.2256,-70.9893 2332.6152,-81.4926 2338.8618,-78.3335"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2606.5,-53.4 2552.5,-53.4 2552.5,-17.4 2606.5,-17.4 2606.5,-53.4"/>
</g>
<!-- prespace_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prespace_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2562.1946,-486.0144C2564.9425,-414.4624 2575.0664,-150.8453 2578.416,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="2581.921,-63.5595 2578.8075,-53.4326 2574.9262,-63.2909 2581.921,-63.5595"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2690,-53.4 2625,-53.4 2625,-17.4 2690,-17.4 2690,-53.4"/>
<text text-anchor="middle" x="2657.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter</text>
</g>
<!-- literal_44&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>literal_44&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2657.5,-486.0144C2657.5,-414.4624 2657.5,-150.8453 2657.5,-63.6267"/>
<polygon fill="#000000" stroke="#000000" points="2661.0001,-63.4325 2657.5,-53.4326 2654.0001,-63.4326 2661.0001,-63.4325"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3123,-54.7006 2708,-54.7006 2708,-16.0995 3123,-16.0995 3123,-54.7006"/>
<text text-anchor="middle" x="2915.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> isn&#39;t wrong externally, the internal interface it</text>
<text text-anchor="middle" x="2915.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">presents needs considerable refinement to work correctly.</text>
</g>
<!-- raw_45&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_45&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2729.4747,-486.2292C2717.0522,-426.3114 2685.0337,-229.4309 2769.5,-106.8001 2784.4776,-85.0552 2808.0137,-69.6671 2831.8502,-58.894"/>
<polygon fill="#000000" stroke="#000000" points="2833.516,-61.9886 2841.3392,-54.8438 2830.7679,-55.5505 2833.516,-61.9886"/>
</g>
</g>
</svg>