<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1700pt" height="1901pt"
 viewBox="0.00 0.00 1700.10 1901.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1897.0027)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1897.0027 1696.0964,-1897.0027 1696.0964,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="266.0964" cy="-1875.0027" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="266.0964" y="-1870.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 118</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="266.0964" cy="-1803.0027" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="266.0964" y="-1798.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;39</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M266.0964,-1856.834C266.0964,-1849.1336 266.0964,-1839.977 266.0964,-1831.4193"/>
<polygon fill="#000000" stroke="#000000" points="269.5965,-1831.4159 266.0964,-1821.4159 262.5965,-1831.416 269.5965,-1831.4159"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="69.0964" cy="-1731.0027" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="69.0964" y="-1726.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M227.6451,-1788.9494C196.6634,-1777.6261 152.8648,-1761.6185 119.1498,-1749.2963"/>
<polygon fill="#000000" stroke="#000000" points="120.0761,-1745.9085 109.4823,-1745.763 117.6732,-1752.4831 120.0761,-1745.9085"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="205.0964" cy="-1731.0027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="205.0964" y="-1726.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M251.0177,-1785.2049C243.4103,-1776.2256 234.0658,-1765.1961 225.7966,-1755.4358"/>
<polygon fill="#000000" stroke="#000000" points="228.2999,-1752.9759 219.1652,-1747.6085 222.9589,-1757.5008 228.2999,-1752.9759"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="336.0964" cy="-1731.0027" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="336.0964" y="-1726.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;37</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M283.0414,-1785.5735C291.7471,-1776.619 302.5051,-1765.5537 312.0532,-1755.7328"/>
<polygon fill="#000000" stroke="#000000" points="314.6034,-1758.1307 319.0647,-1748.5209 309.5844,-1753.2511 314.6034,-1758.1307"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="857.0964" cy="-1731.0027" rx="69.851" ry="18"/>
<text text-anchor="middle" x="857.0964" y="-1726.8027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 40&#45;118</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M322.4962,-1796.1316C430.0109,-1783.0334 664.2072,-1754.5018 783.7332,-1739.9403"/>
<polygon fill="#000000" stroke="#000000" points="784.3826,-1743.3871 793.886,-1738.7034 783.5361,-1736.4385 784.3826,-1743.3871"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="117.0964,-1450.5023 3.0964,-1450.5023 3.0964,-1414.5023 117.0964,-1414.5023 117.0964,-1450.5023"/>
<text text-anchor="middle" x="60.0964" y="-1429.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M68.5469,-1712.7795C67.0312,-1662.5078 62.7823,-1521.5845 60.9524,-1460.8935"/>
<polygon fill="#000000" stroke="#000000" points="64.4499,-1460.7562 60.6501,-1450.8662 57.4531,-1460.9672 64.4499,-1460.7562"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="162.0964" cy="-1432.5023" rx="27" ry="18"/>
<text text-anchor="middle" x="162.0964" y="-1428.3023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M202.4713,-1712.7795C195.2122,-1662.3883 174.8325,-1520.9145 166.1241,-1460.4624"/>
<polygon fill="#000000" stroke="#000000" points="169.5773,-1459.8857 164.6871,-1450.4869 162.6488,-1460.8838 169.5773,-1459.8857"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="531.0964,-1677.003 207.0964,-1677.003 207.0964,-1188.0015 531.0964,-1188.0015 531.0964,-1677.003"/>
<text text-anchor="middle" x="369.0964" y="-1661.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1630.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1615.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1599.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="369.0964" y="-1568.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1552.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1537.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1522.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="369.0964" y="-1506.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="369.0964" y="-1491.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="369.0964" y="-1475.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="369.0964" y="-1460.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="369.0964" y="-1445.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="369.0964" y="-1429.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="369.0964" y="-1414.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="369.0964" y="-1398.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="369.0964" y="-1383.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="369.0964" y="-1352.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1320.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1289.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="369.0964" y="-1273.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="369.0964" y="-1258.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="369.0964" y="-1243.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="369.0964" y="-1227.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="369.0964" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;grym/doc&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_4&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M338.111,-1712.7795C338.8719,-1705.8967 339.8207,-1697.3147 340.9088,-1687.472"/>
<polygon fill="#000000" stroke="#000000" points="344.4215,-1687.5493 342.0416,-1677.2253 337.4639,-1686.7801 344.4215,-1687.5493"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="678.0964" cy="-1432.5023" rx="128.6478" ry="18"/>
<text text-anchor="middle" x="678.0964" y="-1428.3023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : knit_dir(knitter, pwd, depth)</text>
</g>
<!-- section_5&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M842.4195,-1712.9572C834.304,-1702.6705 824.2445,-1689.3955 816.0964,-1677.0027 765.9715,-1600.7659 715.3677,-1505.2961 691.7843,-1459.479"/>
<polygon fill="#000000" stroke="#000000" points="694.8481,-1457.783 687.1719,-1450.4805 688.6188,-1460.9761 694.8481,-1457.783"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="857.0964" cy="-1432.5023" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="857.0964" y="-1428.3023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M857.0964,-1712.7795C857.0964,-1662.5078 857.0964,-1521.5845 857.0964,-1460.8935"/>
<polygon fill="#000000" stroke="#000000" points="860.5965,-1460.8662 857.0964,-1450.8662 853.5965,-1460.8663 860.5965,-1460.8662"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="991.0964" cy="-1432.5023" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="991.0964" y="-1428.3023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M872.5112,-1713.4036C880.8576,-1703.2566 890.9022,-1689.9725 898.0964,-1677.0027 939.2615,-1602.7894 969.8826,-1506.6436 983.419,-1460.1275"/>
<polygon fill="#000000" stroke="#000000" points="986.8002,-1461.0335 986.1942,-1450.456 980.0717,-1459.1027 986.8002,-1461.0335"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="1283.0964" cy="-1432.5023" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="1283.0964" y="-1428.3023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;117</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M914.2895,-1720.5353C949.9201,-1712.3236 995.7344,-1698.5916 1032.0964,-1677.0027 1133.2177,-1616.9645 1224.7472,-1508.1772 1263.5079,-1458.502"/>
<polygon fill="#000000" stroke="#000000" points="1266.3504,-1460.5475 1269.6968,-1450.495 1260.812,-1456.2666 1266.3504,-1460.5475"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="189.0964,-641.603 135.0964,-641.603 135.0964,-601.7989 189.0964,-601.7989 189.0964,-641.603"/>
<text text-anchor="middle" x="162.0964" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M162.0964,-1414.4307C162.0964,-1310.001 162.0964,-783.8361 162.0964,-651.7935"/>
<polygon fill="#000000" stroke="#000000" points="165.5965,-651.6099 162.0964,-641.6099 158.5965,-651.61 165.5965,-651.6099"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="621.5964,-639.701 374.5964,-639.701 374.5964,-603.701 621.5964,-603.701 621.5964,-639.701"/>
<text text-anchor="middle" x="498.0964" y="-618.201" font-family="Inconsolata" font-size="14.00" fill="#000000">*** knit_dir(knitter, pwd, depth)</text>
</g>
<!-- header_10&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>header_10&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M674.0844,-1414.4307C650.7746,-1309.4328 532.817,-778.0982 504.3063,-649.6734"/>
<polygon fill="#000000" stroke="#000000" points="507.7021,-648.8199 502.118,-639.8161 500.8685,-650.337 507.7021,-648.8199"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="667.0964" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="667.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_11&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M859.828,-1414.5482C865.4977,-1370.2134 873.6125,-1254.3438 816.0964,-1188.0019 781.5687,-1148.1759 735.6245,-1193.4771 703.0964,-1152.0019 641.4147,-1073.354 658.3456,-748.0798 665.0122,-649.8906"/>
<polygon fill="#000000" stroke="#000000" points="668.5095,-650.0497 665.714,-639.8304 661.5265,-649.5626 668.5095,-650.0497"/>
</g>
<!-- literal_16 -->
<g id="node17" class="node">
<title>literal_16</title>
<ellipse fill="none" stroke="#000000" cx="743.0964" cy="-621.701" rx="31.481" ry="18"/>
<text text-anchor="middle" x="743.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_11&#45;&gt;literal_16 -->
<g id="edge16" class="edge">
<title>prose_11&#45;&gt;literal_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M857.4864,-1414.2605C857.6759,-1372.1358 854.0408,-1265.7482 816.0964,-1188.0019 806.5764,-1168.4959 791.7207,-1171.92 783.0964,-1152.0019 706.2073,-974.4238 728.4065,-732.1621 738.9825,-650.1593"/>
<polygon fill="#000000" stroke="#000000" points="742.4708,-650.4792 740.3267,-640.1036 735.5325,-649.5516 742.4708,-650.4792"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="819.0964" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="819.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_11&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M856.2494,-1414.4307C851.3334,-1309.5382 826.4763,-779.1647 820.4255,-650.0614"/>
<polygon fill="#000000" stroke="#000000" points="823.9098,-649.6412 819.9454,-639.8161 816.9175,-649.969 823.9098,-649.6412"/>
</g>
<!-- literal_18 -->
<g id="node19" class="node">
<title>literal_18</title>
<ellipse fill="none" stroke="#000000" cx="895.0964" cy="-621.701" rx="31.481" ry="18"/>
<text text-anchor="middle" x="895.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_11&#45;&gt;literal_18 -->
<g id="edge18" class="edge">
<title>prose_11&#45;&gt;literal_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M857.9433,-1414.4307C862.8593,-1309.5382 887.7165,-779.1647 893.7672,-650.0614"/>
<polygon fill="#000000" stroke="#000000" points="897.2753,-649.969 894.2474,-639.8161 890.2829,-649.6412 897.2753,-649.969"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="971.0964" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="971.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_11&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M863.4029,-1414.7419C878.6912,-1370.8346 917.7447,-1253.3883 935.0964,-1152.0019 967.5813,-962.1916 971.0268,-729.4485 971.1907,-649.8987"/>
<polygon fill="#000000" stroke="#000000" points="974.6907,-649.7124 971.1948,-639.711 967.6907,-649.7095 974.6907,-649.7124"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1043.0964" cy="-621.701" rx="27" ry="18"/>
<text text-anchor="middle" x="1043.0964" y="-617.501" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_12&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M992.2554,-1414.4307C998.9826,-1309.5382 1032.9976,-779.1647 1041.2775,-650.0614"/>
<polygon fill="#000000" stroke="#000000" points="1044.7873,-650.0196 1041.9346,-639.8161 1037.8016,-649.5716 1044.7873,-650.0196"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1692.0964,-1151.8029 1088.0964,-1151.8029 1088.0964,-91.599 1692.0964,-91.599 1692.0964,-1151.8029"/>
<text text-anchor="middle" x="1390.0964" y="-1136.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_dir(knitter, orb_dir, pwd)</text>
<text text-anchor="middle" x="1390.0964" y="-1121.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knits = {}</text>
<text text-anchor="middle" x="1390.0964" y="-1106.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(orb_dir, false, false) do</text>
<text text-anchor="middle" x="1390.0964" y="-1090.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="1390.0964" y="-1075.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="1390.0964" y="-1043.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="1390.0964" y="-1028.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;* &quot; .. dir)</text>
<text text-anchor="middle" x="1390.0964" y="-1013.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="1390.0964" y="-997.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="1390.0964" y="-982.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1390.0964" y="-966.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; read and knit</text>
<text text-anchor="middle" x="1390.0964" y="-951.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot; &#160;&#160;&#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="1390.0964" y="-936.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="1390.0964" y="-920.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted = knitter:knit(Doc(orb_f))</text>
<text text-anchor="middle" x="1390.0964" y="-905.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_dir = subLastFor(&quot;/orb&quot;, &quot;/src&quot;, dirname(f))</text>
<text text-anchor="middle" x="1390.0964" y="-889.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(src_dir)</text>
<text text-anchor="middle" x="1390.0964" y="-874.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; 4 == #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1390.0964" y="-859.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = src_dir .. &quot;/&quot; .. bare_name .. &quot;.lua&quot;</text>
<text text-anchor="middle" x="1390.0964" y="-843.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local current_src = read(out_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1390.0964" y="-828.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(knitted, current_src, out_name, 0)</text>
<text text-anchor="middle" x="1390.0964" y="-812.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1390.0964" y="-797.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_dir = &quot;../tmp&quot; .. src_dir</text>
<text text-anchor="middle" x="1390.0964" y="-782.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(tmp_dir)</text>
<text text-anchor="middle" x="1390.0964" y="-766.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_out = &quot;../tmp&quot; .. out_name</text>
<text text-anchor="middle" x="1390.0964" y="-751.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(tmp_out, current_src)</text>
<text text-anchor="middle" x="1390.0964" y="-735.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;knits[#knits + 1] = out_name</text>
<text text-anchor="middle" x="1390.0964" y="-720.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end &#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="1390.0964" y="-705.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-689.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-674.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-658.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; collect changed files if any</text>
<text text-anchor="middle" x="1390.0964" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local grymbacks = &quot;&quot;</text>
<text text-anchor="middle" x="1390.0964" y="-564.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(knits) do</text>
<text text-anchor="middle" x="1390.0964" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;grymbacks = grymbacks .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1390.0964" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-518.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if grymbacks ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1390.0964" y="-503.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;grymbacks: \n&quot; .. grymbacks)</text>
<text text-anchor="middle" x="1390.0964" y="-487.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-472.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; if nothing changes, no rollback is needed, empty file</text>
<text text-anchor="middle" x="1390.0964" y="-456.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write(pwd .. &quot;/.grymback&quot;, grymbacks)</text>
<text text-anchor="middle" x="1390.0964" y="-441.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1390.0964" y="-426.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1390.0964" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_all(knitter, pwd)</text>
<text text-anchor="middle" x="1390.0964" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local did_knit = false</text>
<text text-anchor="middle" x="1390.0964" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="1390.0964" y="-348.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="1390.0964" y="-333.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="1390.0964" y="-301.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot;Knit: &quot; .. dir))</text>
<text text-anchor="middle" x="1390.0964" y="-286.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;did_knit = knit_dir(knitter, dir, pwd)</text>
<text text-anchor="middle" x="1390.0964" y="-270.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-255.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-240.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not did_knit then</text>
<text text-anchor="middle" x="1390.0964" y="-224.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;No orb directory to knit. No action taken.&quot;)</text>
<text text-anchor="middle" x="1390.0964" y="-209.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1390.0964" y="-193.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return did_knit</text>
<text text-anchor="middle" x="1390.0964" y="-178.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1390.0964" y="-147.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knit_all = knit_all</text>
<text text-anchor="middle" x="1390.0964" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_13&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1285.4812,-1414.4307C1290.6497,-1375.2663 1303.646,-1276.7856 1318.791,-1162.0229"/>
<polygon fill="#000000" stroke="#000000" points="1322.2821,-1162.3199 1320.1206,-1151.9479 1315.3423,-1161.404 1322.2821,-1162.3199"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="699.0964,-55.6015 333.0964,-55.6015 333.0964,.2015 699.0964,.2015 699.0964,-55.6015"/>
<text text-anchor="middle" x="516.0964" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Walks a given directory, kniting the contents of </text>
</g>
<!-- raw_15&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_15&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M671.4493,-603.8488C687.7861,-532.4773 739.1306,-263.2241 630.0964,-91.4 622.3485,-79.1905 611.385,-69.1107 599.2891,-60.8574"/>
<polygon fill="#000000" stroke="#000000" points="601.0758,-57.8459 590.7596,-55.4317 597.3186,-63.7522 601.0758,-57.8459"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="771.0964,-45.7 717.0964,-45.7 717.0964,-9.7 771.0964,-9.7 771.0964,-45.7"/>
<text text-anchor="middle" x="744.0964" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">/org/</text>
</g>
<!-- literal_16&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>literal_16&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M743.1268,-603.5993C743.2697,-518.7195 743.8738,-159.9091 744.0487,-56.0024"/>
<polygon fill="#000000" stroke="#000000" points="747.5487,-55.9579 744.0656,-45.952 740.5487,-55.9461 747.5487,-55.9579"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="848.0964,-47.6021 790.0964,-47.6021 790.0964,-7.7979 848.0964,-7.7979 848.0964,-47.6021"/>
<text text-anchor="middle" x="819.0964" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> into </text>
</g>
<!-- raw_17&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_17&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M819.0964,-603.5993C819.0964,-519.189 819.0964,-163.8698 819.0964,-57.7498"/>
<polygon fill="#000000" stroke="#000000" points="822.5965,-57.4426 819.0964,-47.4426 815.5965,-57.4427 822.5965,-57.4426"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="922.0964,-45.7 868.0964,-45.7 868.0964,-9.7 922.0964,-9.7 922.0964,-45.7"/>
<text text-anchor="middle" x="895.0964" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">/src/</text>
</g>
<!-- literal_18&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>literal_18&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M895.0964,-603.5993C895.0964,-518.7195 895.0964,-159.9091 895.0964,-56.0024"/>
<polygon fill="#000000" stroke="#000000" points="898.5965,-55.952 895.0964,-45.952 891.5965,-55.9521 898.5965,-55.952"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="996.0964,-45.7 942.0964,-45.7 942.0964,-9.7 996.0964,-9.7 996.0964,-45.7"/>
<text text-anchor="middle" x="969.0964" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">. </text>
</g>
<!-- raw_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M971.0354,-603.5993C970.7496,-518.7195 969.5415,-159.9091 969.1917,-56.0024"/>
<polygon fill="#000000" stroke="#000000" points="972.6916,-55.9401 969.1578,-45.952 965.6916,-55.9638 972.6916,-55.9401"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1478.0964,-55.0004 1014.0964,-55.0004 1014.0964,-.3996 1478.0964,-.3996 1478.0964,-55.0004"/>
<text text-anchor="middle" x="1246.0964" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [X] TODO fix up the orb/notes directory so it doesn&#39;t explode</text>
<text text-anchor="middle" x="1246.0964" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;the knit.</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1041.8172,-603.6501C1036.2891,-520.4855 1017.4112,-174.7553 1079.0964,-91.4 1087.5587,-79.9648 1111.3821,-68.5495 1138.4774,-58.6067"/>
<polygon fill="#000000" stroke="#000000" points="1139.9308,-61.8045 1148.178,-55.1536 1137.5833,-55.2099 1139.9308,-61.8045"/>
</g>
</g>
</svg>