<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2033pt" height="1679pt"
 viewBox="0.00 0.00 2033.00 1678.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1674.6022)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1674.6022 2029,-1674.6022 2029,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="espalier/node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="298" cy="-1652.6022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="298" y="-1648.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 100</text>
</g>
<!-- section_1 -->
<g id="node2" class="espalier/node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="298" cy="-1580.6022" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="298" y="-1576.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;31</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M298,-1634.4335C298,-1626.7331 298,-1617.5765 298,-1609.0188"/>
<polygon fill="#000000" stroke="#000000" points="301.5001,-1609.0154 298,-1599.0154 294.5001,-1609.0155 301.5001,-1609.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="espalier/node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="78" cy="-1508.6022" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="78" y="-1504.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M257.1353,-1567.2282C221.5089,-1555.5687 169.6115,-1538.5841 130.8367,-1525.8941"/>
<polygon fill="#000000" stroke="#000000" points="131.8719,-1522.5503 121.2793,-1522.7663 129.6946,-1529.2031 131.8719,-1522.5503"/>
</g>
<!-- prose_3 -->
<g id="node4" class="espalier/node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="237" cy="-1508.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="237" y="-1504.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M282.9213,-1562.8044C275.3139,-1553.8251 265.9694,-1542.7956 257.7003,-1533.0353"/>
<polygon fill="#000000" stroke="#000000" points="260.2035,-1530.5754 251.0688,-1525.208 254.8626,-1535.1003 260.2035,-1530.5754"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="espalier/node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="380" cy="-1508.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="380" y="-1504.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M317.4329,-1563.5392C327.8995,-1554.3489 340.9876,-1542.8569 352.484,-1532.7625"/>
<polygon fill="#000000" stroke="#000000" points="354.9319,-1535.2709 360.137,-1526.0428 350.3133,-1530.0108 354.9319,-1535.2709"/>
</g>
<!-- section_5 -->
<g id="node6" class="espalier/node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="968" cy="-1508.6022" rx="70.655" ry="18"/>
<text text-anchor="middle" x="968" y="-1504.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 32&#45;100</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M355.1238,-1574.4635C475.8701,-1561.4878 757.0229,-1531.2743 892.4424,-1516.7218"/>
<polygon fill="#000000" stroke="#000000" points="893.1554,-1520.1654 902.7241,-1515.6169 892.4074,-1513.2055 893.1554,-1520.1654"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="espalier/node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="114,-1305.1019 0,-1305.1019 0,-1269.1019 114,-1269.1019 114,-1305.1019"/>
<text text-anchor="middle" x="57" y="-1283.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M76.2815,-1490.4759C72.6268,-1451.9276 64.0601,-1361.5692 59.6807,-1315.3766"/>
<polygon fill="#000000" stroke="#000000" points="63.1411,-1314.793 58.7128,-1305.168 56.1724,-1315.4538 63.1411,-1314.793"/>
</g>
<!-- raw_7 -->
<g id="node8" class="espalier/node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="159" cy="-1287.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="159" y="-1282.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M221.2347,-1492.4043C212.2545,-1482.3017 201.5258,-1468.5952 195,-1454.6022 173.6737,-1408.8727 164.8033,-1350.1972 161.2455,-1315.8138"/>
<polygon fill="#000000" stroke="#000000" points="164.7006,-1315.1742 160.268,-1305.5511 157.7321,-1315.838 164.7006,-1315.1742"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="espalier/node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="717.5,-1454.6024 204.5,-1454.6024 204.5,-1119.6015 717.5,-1119.6015 717.5,-1454.6024"/>
<text text-anchor="middle" x="461" y="-1439.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="461" y="-1408.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; ()</text>
<text text-anchor="middle" x="461" y="-1392.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="461" y="-1377.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="461" y="-1361.802" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="461" y="-1330.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="461" y="-1315.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="461" y="-1299.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="461" y="-1284.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local read, write, delete = pl_file.read, pl_file.write, pl_file.delete</text>
<text text-anchor="middle" x="461" y="-1236.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="461" y="-1205.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;walk/directory&quot;</text>
<text text-anchor="middle" x="461" y="-1190.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;walk/path&quot;</text>
<text text-anchor="middle" x="461" y="-1174.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;walk/File&quot;</text>
<text text-anchor="middle" x="461" y="-1143.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
<text text-anchor="middle" x="461" y="-1127.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;walk/path&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_4&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M386.6286,-1490.4759C389.2321,-1483.3563 392.4819,-1474.4696 396.1568,-1464.4201"/>
<polygon fill="#000000" stroke="#000000" points="399.4976,-1465.4754 399.645,-1454.8816 392.9234,-1463.0712 399.4976,-1465.4754"/>
</g>
<!-- header_10 -->
<g id="node11" class="espalier/node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="827" cy="-1287.1019" rx="91.4192" ry="18"/>
<text text-anchor="middle" x="827" y="-1282.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knitCodex(codex)</text>
</g>
<!-- section_5&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M953.8227,-1490.9679C945.6803,-1480.5898 935.4303,-1467.0898 927,-1454.6022 894.4356,-1406.365 860.5302,-1347.4126 841.7576,-1313.8661"/>
<polygon fill="#000000" stroke="#000000" points="844.8025,-1312.1399 836.8777,-1305.1079 838.6876,-1315.547 844.8025,-1312.1399"/>
</g>
<!-- prose_11 -->
<g id="node12" class="espalier/node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="968" cy="-1287.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="968" y="-1282.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M968,-1490.4759C968,-1451.9276 968,-1361.5692 968,-1315.3766"/>
<polygon fill="#000000" stroke="#000000" points="971.5001,-1315.168 968,-1305.168 964.5001,-1315.1681 971.5001,-1315.168"/>
</g>
<!-- prose_12 -->
<g id="node13" class="espalier/node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1166" cy="-1287.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1166" y="-1282.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M983.8685,-1490.8503C1019.2753,-1451.2411 1104.7481,-1355.6237 1144.7223,-1310.9051"/>
<polygon fill="#000000" stroke="#000000" points="1147.3547,-1313.2119 1151.4098,-1303.4238 1142.1359,-1308.5467 1147.3547,-1313.2119"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="espalier/node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="1558" cy="-1287.1019" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1558" y="-1282.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 39&#45;99</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1027.9594,-1498.8901C1076.9296,-1490.0511 1147.5159,-1475.2251 1207,-1454.6022 1325.2654,-1413.5999 1456.3095,-1344.1449 1519.607,-1308.9468"/>
<polygon fill="#000000" stroke="#000000" points="1521.4216,-1311.9423 1528.4448,-1304.0097 1518.0077,-1305.8312 1521.4216,-1311.9423"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="espalier/node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="296.5,-659.402 21.5,-659.402 21.5,-587.5997 296.5,-587.5997 296.5,-659.402"/>
<text text-anchor="middle" x="159" y="-596.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is due for a complete overhaul.</text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M159,-1269.008C159,-1181.6363 159,-802.1855 159,-669.5074"/>
<polygon fill="#000000" stroke="#000000" points="162.5001,-669.2818 159,-659.2818 155.5001,-669.2818 162.5001,-669.2818"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="espalier/node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="821.5,-641.5009 672.5,-641.5009 672.5,-605.5009 821.5,-605.5009 821.5,-641.5009"/>
<text text-anchor="middle" x="747" y="-620.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">** knitCodex(codex)</text>
</g>
<!-- header_10&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>header_10&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M824.8187,-1269.008C813.7674,-1177.3373 763.9544,-764.1381 750.4091,-651.7793"/>
<polygon fill="#000000" stroke="#000000" points="753.8511,-651.0877 749.1793,-641.5785 746.9015,-651.9256 753.8511,-651.0877"/>
</g>
<!-- raw_15 -->
<g id="node16" class="espalier/node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="867" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="867" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_11&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M965.6512,-1268.8327C961.1408,-1237.3102 949.6432,-1171.1303 927,-1119.6017 919.2639,-1101.9968 909.2866,-1101.7747 903,-1083.6017 849.184,-928.0323 858.561,-725.8221 864.362,-652.0348"/>
<polygon fill="#000000" stroke="#000000" points="867.8797,-651.9652 865.2181,-641.7102 860.9037,-651.3867 867.8797,-651.9652"/>
</g>
<!-- prespace_17 -->
<g id="node18" class="espalier/node">
<title>prespace_17</title>
<ellipse fill="none" stroke="#000000" cx="958" cy="-623.5009" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="958" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_17 -->
<g id="edge17" class="edge">
<title>prose_12&#45;&gt;prespace_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1149.673,-1271.5402C1117.4433,-1239.7117 1046.0011,-1163.4151 1014,-1083.6017 952.4746,-930.1523 953.6348,-726.6592 956.4916,-652.2827"/>
<polygon fill="#000000" stroke="#000000" points="960.0062,-652.0139 956.9367,-641.8734 953.0126,-651.7147 960.0062,-652.0139"/>
</g>
<!-- literal_18 -->
<g id="node19" class="espalier/node">
<title>literal_18</title>
<ellipse fill="none" stroke="#000000" cx="1054" cy="-623.5009" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1054" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;literal_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1158.0854,-1269.5778C1142.806,-1234.8848 1109.3968,-1154.6561 1094,-1083.6017 1059.1945,-922.9786 1054.4817,-724.6 1053.9857,-651.9041"/>
<polygon fill="#000000" stroke="#000000" points="1057.4849,-651.7082 1053.9391,-641.7244 1050.485,-651.7403 1057.4849,-651.7082"/>
</g>
<!-- raw_19 -->
<g id="node20" class="espalier/node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1130" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1130" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1165.0184,-1269.008C1160.0453,-1177.3373 1137.6295,-764.1381 1131.5341,-651.7793"/>
<polygon fill="#000000" stroke="#000000" points="1135.0174,-651.3742 1130.9807,-641.5785 1128.0276,-651.7535 1135.0174,-651.3742"/>
</g>
<!-- link_20 -->
<g id="node21" class="espalier/node">
<title>link_20</title>
<ellipse fill="none" stroke="#000000" cx="1202" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1202" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_12&#45;&gt;link_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;link_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1166.9816,-1269.008C1171.9547,-1177.3373 1194.3705,-764.1381 1200.4659,-651.7793"/>
<polygon fill="#000000" stroke="#000000" points="1203.9724,-651.7535 1201.0193,-641.5785 1196.9826,-651.3742 1203.9724,-651.7535"/>
</g>
<!-- raw_21 -->
<g id="node22" class="espalier/node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1322" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1322" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173.331,-1269.4369C1187.5876,-1234.497 1219.2868,-1153.8556 1238,-1083.6017 1280.8401,-922.7699 1308.9299,-724.5168 1318.4251,-651.8792"/>
<polygon fill="#000000" stroke="#000000" points="1321.9289,-652.0741 1319.7398,-641.7079 1314.9867,-651.1767 1321.9289,-652.0741"/>
</g>
<!-- link_22 -->
<g id="node23" class="espalier/node">
<title>link_22</title>
<ellipse fill="none" stroke="#000000" cx="1430" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1430" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_12&#45;&gt;link_22 -->
<g id="edge22" class="edge">
<title>prose_12&#45;&gt;link_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1185.7911,-1272.8934C1225.8104,-1242.9605 1316.0955,-1169.0859 1358,-1083.6017 1431.4351,-933.7958 1433.2648,-726.5521 1431.2123,-651.8013"/>
<polygon fill="#000000" stroke="#000000" points="1434.709,-651.6388 1430.8894,-641.7564 1427.7126,-651.8638 1434.709,-651.6388"/>
</g>
<!-- raw_23 -->
<g id="node24" class="espalier/node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1502" cy="-623.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1502" y="-619.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_12&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1193.7071,-1277.7718C1255.2257,-1255.4212 1402.757,-1192.431 1466,-1083.6017 1549.4549,-939.9915 1521.3559,-727.2566 1507.6466,-651.5216"/>
<polygon fill="#000000" stroke="#000000" points="1511.0256,-650.5503 1505.7433,-641.3662 1504.1454,-651.8398 1511.0256,-650.5503"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="espalier/node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2025,-1083.7025 1547,-1083.7025 1547,-163.2992 2025,-163.2992 2025,-1083.7025"/>
<text text-anchor="middle" x="1786" y="-1068.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knitDeck(deck)</text>
<text text-anchor="middle" x="1786" y="-1053.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local dir = deck.dir</text>
<text text-anchor="middle" x="1786" y="-1037.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codex = deck.codex</text>
<text text-anchor="middle" x="1786" y="-1022.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = codex.orb</text>
<text text-anchor="middle" x="1786" y="-1006.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local srcDir = codex.src</text>
<text text-anchor="middle" x="1786" y="-991.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; #todo load .deck file here</text>
<text text-anchor="middle" x="1786" y="-976.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, sub in ipairs(deck) do</text>
<text text-anchor="middle" x="1786" y="-960.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;knitDeck(sub)</text>
<text text-anchor="middle" x="1786" y="-945.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1786" y="-929.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for name, doc in pairs(deck.docs) do</text>
<text text-anchor="middle" x="1786" y="-914.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted, ext = knitter:knit(doc)</text>
<text text-anchor="middle" x="1786" y="-899.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if knitted then</text>
<text text-anchor="middle" x="1786" y="-883.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add to srcs</text>
<text text-anchor="middle" x="1786" y="-868.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local srcpath = Path(name):subFor(orbDir, srcDir, ext)</text>
<text text-anchor="middle" x="1786" y="-852.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;knitted: &quot; .. name)</text>
<text text-anchor="middle" x="1786" y="-837.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot;into: &#160;&#160;&#160;&quot; .. tostring(srcpath))</text>
<text text-anchor="middle" x="1786" y="-822.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deck.srcs[srcpath] = knitted</text>
<text text-anchor="middle" x="1786" y="-806.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;codex.srcs[srcpath] = knitted</text>
<text text-anchor="middle" x="1786" y="-791.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1786" y="-759.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1786" y="-744.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return srcs</text>
<text text-anchor="middle" x="1786" y="-729.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1786" y="-697.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local function writeOnChange(out_file, newest)</text>
<text text-anchor="middle" x="1786" y="-682.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;newest = tostring(newest)</text>
<text text-anchor="middle" x="1786" y="-666.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;out_file = tostring(out_file)</text>
<text text-anchor="middle" x="1786" y="-651.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local current = read(tostring(out_file))</text>
<text text-anchor="middle" x="1786" y="-636.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the text has changed, write it</text>
<text text-anchor="middle" x="1786" y="-620.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if newest ~= current then</text>
<text text-anchor="middle" x="1786" y="-605.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot; &#160;&#45; &quot; .. tostring(out_file)))</text>
<text text-anchor="middle" x="1786" y="-589.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_file, newest)</text>
<text text-anchor="middle" x="1786" y="-574.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1786" y="-559.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If the new text is blank, delete the old file</text>
<text text-anchor="middle" x="1786" y="-543.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif current ~= &quot;&quot; and newest == &quot;&quot; then</text>
<text text-anchor="middle" x="1786" y="-528.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.red(&quot; &#160;&#45; &quot; .. tostring(out_file)))</text>
<text text-anchor="middle" x="1786" y="-512.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;delete(out_file)</text>
<text text-anchor="middle" x="1786" y="-497.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="1786" y="-482.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1786" y="-466.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Otherwise do nothing</text>
<text text-anchor="middle" x="1786" y="-435.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="1786" y="-419.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1786" y="-404.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1786" y="-373.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knitCodex(codex)</text>
<text text-anchor="middle" x="1786" y="-357.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orb = codex.orb</text>
<text text-anchor="middle" x="1786" y="-342.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local src = codex.src</text>
<text text-anchor="middle" x="1786" y="-326.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;knitting orb directory: &quot; .. tostring(orb))</text>
<text text-anchor="middle" x="1786" y="-311.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;into src directory: &quot; .. tostring(src))</text>
<text text-anchor="middle" x="1786" y="-296.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knitDeck(orb, src)</text>
<text text-anchor="middle" x="1786" y="-280.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for name, src in pairs(codex.srcs) do</text>
<text text-anchor="middle" x="1786" y="-265.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(name, src)</text>
<text text-anchor="middle" x="1786" y="-249.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1786" y="-234.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1786" y="-219.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knitCodex = knitCodex</text>
<text text-anchor="middle" x="1786" y="-171.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_13&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1564.2167,-1269.008C1574.7099,-1238.4674 1597.4645,-1172.2392 1624.5735,-1093.3376"/>
<polygon fill="#000000" stroke="#000000" points="1627.9612,-1094.2489 1627.9005,-1083.6542 1621.341,-1091.9743 1627.9612,-1094.2489"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="espalier/node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="686.5,-127.6015 341.5,-127.6015 341.5,-71.7985 686.5,-71.7985 686.5,-127.6015"/>
<text text-anchor="middle" x="514" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This is our new interface for knitting matters.</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M872.2067,-605.6699C890.7589,-538.0499 946.519,-294.6372 830,-163.4 824.444,-157.1422 755.0818,-142.8238 682.7572,-129.3443"/>
<polygon fill="#000000" stroke="#000000" points="683.0092,-125.8314 672.5385,-127.4487 681.7324,-132.714 683.0092,-125.8314"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="espalier/node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="759,-117.7 705,-117.7 705,-81.7 759,-81.7 759,-117.7"/>
</g>
<!-- prespace_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prespace_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M962.2202,-605.3224C976.8132,-537.4777 1018.1875,-296.1762 903,-163.4 862.3078,-116.4943 823.691,-154.8684 768,-127.4 765.7103,-126.2707 763.4239,-124.9839 761.1767,-123.5977"/>
<polygon fill="#000000" stroke="#000000" points="763.0149,-120.615 752.7791,-117.8804 759.0754,-126.4013 763.0149,-120.615"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="espalier/node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="856.5,-117.7 777.5,-117.7 777.5,-81.7 856.5,-81.7 856.5,-117.7"/>
<text text-anchor="middle" x="817" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">knitCodex</text>
</g>
<!-- literal_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>literal_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1058.9689,-605.3312C1076.3208,-537.5179 1127.1853,-296.3135 1013,-163.4 969.1678,-112.3787 928.5317,-152.1837 866,-127.4 862.3236,-125.9429 858.585,-124.2543 854.8958,-122.4437"/>
<polygon fill="#000000" stroke="#000000" points="856.3767,-119.2688 845.8906,-117.7545 853.1436,-125.4775 856.3767,-119.2688"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="espalier/node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1115,-117.7 875,-117.7 875,-81.7 1115,-81.7 1115,-117.7"/>
<text text-anchor="middle" x="995" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> expects a codex which has been </text>
</g>
<!-- raw_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1133.867,-605.5627C1146.8707,-540.5138 1183.3827,-312.9985 1094,-163.4 1083.645,-146.069 1066.541,-132.6284 1049.4382,-122.6564"/>
<polygon fill="#000000" stroke="#000000" points="1050.979,-119.5094 1040.5303,-117.7556 1047.6048,-125.6425 1050.979,-119.5094"/>
</g>
<!-- anchortext_27 -->
<g id="node28" class="espalier/node">
<title>anchortext_27</title>
<ellipse fill="none" stroke="#000000" cx="1184" cy="-99.7" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="1184" y="-95.5" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_20&#45;&gt;anchortext_27 -->
<g id="edge27" class="edge">
<title>link_20&#45;&gt;anchortext_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1201.3804,-605.4704C1198.7167,-527.9558 1188.2264,-222.689 1184.9697,-127.919"/>
<polygon fill="#000000" stroke="#000000" points="1188.4678,-127.7987 1184.6263,-117.9248 1181.4719,-128.0392 1188.4678,-127.7987"/>
</g>
<!-- url_28 -->
<g id="node29" class="espalier/node">
<title>url_28</title>
<ellipse fill="none" stroke="#000000" cx="1280" cy="-99.7" rx="27" ry="18"/>
<text text-anchor="middle" x="1280" y="-95.5" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_20&#45;&gt;url_28 -->
<g id="edge28" class="edge">
<title>link_20&#45;&gt;url_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1204.6849,-605.4704C1216.2407,-527.8692 1261.7871,-222.0066 1275.8451,-127.6021"/>
<polygon fill="#000000" stroke="#000000" points="1279.3152,-128.0611 1277.3264,-117.6546 1272.3916,-127.03 1279.3152,-128.0611"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="espalier/node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1379,-117.7 1325,-117.7 1325,-81.7 1379,-81.7 1379,-117.7"/>
<text text-anchor="middle" x="1352" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> and</text>
</g>
<!-- raw_21&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>raw_21&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1323.0327,-605.4704C1327.4722,-527.9558 1344.956,-222.689 1350.3838,-127.919"/>
<polygon fill="#000000" stroke="#000000" points="1353.8786,-128.1086 1350.9562,-117.9248 1346.89,-127.7083 1353.8786,-128.1086"/>
</g>
<!-- anchortext_32 -->
<g id="node33" class="espalier/node">
<title>anchortext_32</title>
<ellipse fill="none" stroke="#000000" cx="1448" cy="-99.7" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="1448" y="-95.5" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_22&#45;&gt;anchortext_32 -->
<g id="edge32" class="edge">
<title>link_22&#45;&gt;anchortext_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1430.6196,-605.4704C1433.2833,-527.9558 1443.7736,-222.689 1447.0303,-127.919"/>
<polygon fill="#000000" stroke="#000000" points="1450.5281,-128.0392 1447.3737,-117.9248 1443.5322,-127.7987 1450.5281,-128.0392"/>
</g>
<!-- url_33 -->
<g id="node34" class="espalier/node">
<title>url_33</title>
<ellipse fill="none" stroke="#000000" cx="1544" cy="-99.7" rx="27" ry="18"/>
<text text-anchor="middle" x="1544" y="-95.5" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_22&#45;&gt;url_33 -->
<g id="edge33" class="edge">
<title>link_22&#45;&gt;url_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1426.6401,-605.4457C1415.5752,-540.9309 1385.3993,-317.4553 1466,-163.4 1467.5811,-160.378 1496.222,-137.3673 1518.3428,-119.8621"/>
<polygon fill="#000000" stroke="#000000" points="1520.7518,-122.4195 1526.4316,-113.4757 1516.4141,-116.9255 1520.7518,-122.4195"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="espalier/node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="1643,-117.7 1589,-117.7 1589,-81.7 1643,-81.7 1643,-117.7"/>
<text text-anchor="middle" x="1616" y="-96.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_23&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_23&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1498.6401,-605.4457C1487.5752,-540.9309 1457.3993,-317.4553 1538,-163.4 1539.4553,-160.6184 1563.8368,-140.9016 1584.9571,-124.1311"/>
<polygon fill="#000000" stroke="#000000" points="1587.1717,-126.842 1592.8375,-117.8894 1582.8254,-121.3548 1587.1717,-126.842"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="espalier/node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1211,-36 1157,-36 1157,0 1211,0 1211,-36"/>
<text text-anchor="middle" x="1184" y="-14.5" font-family="Inconsolata" font-size="14.00" fill="#000000">cased</text>
</g>
<!-- anchortext_27&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>anchortext_27&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1184,-81.5681C1184,-71.2023 1184,-57.9747 1184,-46.2729"/>
<polygon fill="#000000" stroke="#000000" points="1187.5001,-46.0812 1184,-36.0812 1180.5001,-46.0812 1187.5001,-46.0812"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="espalier/node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1312.5,-36 1247.5,-36 1247.5,0 1312.5,0 1312.5,-36"/>
<text text-anchor="middle" x="1280" y="-14.5" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_28&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>url_28&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1280,-81.5681C1280,-71.2023 1280,-57.9747 1280,-46.2729"/>
<polygon fill="#000000" stroke="#000000" points="1283.5001,-46.0812 1280,-36.0812 1276.5001,-46.0812 1283.5001,-46.0812"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="espalier/node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="1475,-36 1421,-36 1421,0 1475,0 1475,-36"/>
<text text-anchor="middle" x="1448" y="-14.5" font-family="Inconsolata" font-size="14.00" fill="#000000">spun</text>
</g>
<!-- anchortext_32&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>anchortext_32&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1448,-81.5681C1448,-71.2023 1448,-57.9747 1448,-46.2729"/>
<polygon fill="#000000" stroke="#000000" points="1451.5001,-46.0812 1448,-36.0812 1444.5001,-46.0812 1451.5001,-46.0812"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="espalier/node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="1576.5,-36 1511.5,-36 1511.5,0 1576.5,0 1576.5,-36"/>
<text text-anchor="middle" x="1544" y="-14.5" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_33&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>url_33&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1544,-81.5681C1544,-71.2023 1544,-57.9747 1544,-46.2729"/>
<polygon fill="#000000" stroke="#000000" points="1547.5001,-46.0812 1544,-36.0812 1540.5001,-46.0812 1547.5001,-46.0812"/>
</g>
</g>
</svg>