<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3230pt" height="1573pt"
 viewBox="0.00 0.00 3229.50 1573.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1569.4022)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1569.4022 3225.5,-1569.4022 3225.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1547.4022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1543.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 137</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1475.4022" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1471.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;103</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1529.2336C416.5,-1521.5332 416.5,-1512.3766 416.5,-1503.8188"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1503.8154 416.5,-1493.8155 413.0001,-1503.8155 420.0001,-1503.8154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="98.5" cy="-1403.4022" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="98.5" y="-1399.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M365.7603,-1463.914C310.1471,-1451.3223 220.883,-1431.1116 160.9963,-1417.5523"/>
<polygon fill="#000000" stroke="#000000" points="161.436,-1414.0634 150.9099,-1415.2686 159.8902,-1420.8905 161.436,-1414.0634"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="268.5" cy="-1403.4022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="268.5" y="-1399.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M384.0208,-1459.6015C359.8325,-1447.8343 326.8935,-1431.8099 302.3767,-1419.8828"/>
<polygon fill="#000000" stroke="#000000" points="303.6223,-1416.5966 293.0988,-1415.3692 300.56,-1422.8913 303.6223,-1416.5966"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1403.4022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1399.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1457.2336C416.5,-1449.5332 416.5,-1440.3766 416.5,-1431.8188"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1431.8154 416.5,-1421.8155 413.0001,-1431.8155 420.0001,-1431.8154"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1020.5" cy="-1403.4022" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1020.5" y="-1399.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 43&#45;103</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M476.9004,-1468.2022C588.0891,-1454.9479 824.8392,-1426.726 945.8749,-1412.2979"/>
<polygon fill="#000000" stroke="#000000" points="946.6417,-1415.7314 956.1571,-1411.0722 945.8131,-1408.7806 946.6417,-1415.7314"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="2401.5" cy="-1403.4022" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2401.5" y="-1399.2022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 104&#45;137</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M481.6973,-1473.0374C776.4842,-1462.3449 1984.7437,-1418.5188 2316.7451,-1406.4764"/>
<polygon fill="#000000" stroke="#000000" points="2316.9132,-1409.9728 2326.7797,-1406.1125 2316.6594,-1402.9774 2316.9132,-1409.9728"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="129.5,-1115.2018 15.5,-1115.2018 15.5,-1079.2018 129.5,-1079.2018 129.5,-1115.2018"/>
<text text-anchor="middle" x="72.5" y="-1093.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M96.9514,-1385.165C92.589,-1333.789 80.174,-1187.5785 74.9083,-1125.5644"/>
<polygon fill="#000000" stroke="#000000" points="78.3741,-1125.0115 74.0404,-1115.3435 71.3992,-1125.6038 78.3741,-1125.0115"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="174.5" cy="-1097.2018" rx="27" ry="18"/>
<text text-anchor="middle" x="174.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M247.6407,-1389.648C234.7595,-1379.981 219.1005,-1365.8643 210.5,-1349.4022 171.9433,-1275.6016 170.6264,-1173.9542 172.6291,-1125.329"/>
<polygon fill="#000000" stroke="#000000" points="176.1297,-1125.4013 173.1258,-1115.2412 169.1382,-1125.057 176.1297,-1125.4013"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="613.5,-1349.6028 219.5,-1349.6028 219.5,-844.8008 613.5,-844.8008 613.5,-1349.6028"/>
<text text-anchor="middle" x="416.5" y="-1334.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="416.5" y="-1302.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; ()</text>
<text text-anchor="middle" x="416.5" y="-1287.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="416.5" y="-1272.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="416.5" y="-1256.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="416.5" y="-1225.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="416.5" y="-1209.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="416.5" y="-1194.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="416.5" y="-1179.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="416.5" y="-1163.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="416.5" y="-1148.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="416.5" y="-1132.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="416.5" y="-1117.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="416.5" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="416.5" y="-1086.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="416.5" y="-1071.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="416.5" y="-1055.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="416.5" y="-1040.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="416.5" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="416.5" y="-961.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="416.5" y="-946.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir, Path, File = walk.Dir, walk.Path, walk.File</text>
<text text-anchor="middle" x="416.5" y="-930.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="416.5" y="-915.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="416.5" y="-900.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="416.5" y="-884.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="416.5" y="-853.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1385.165C416.5,-1378.2608 416.5,-1369.644 416.5,-1359.7491"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1359.4442 416.5,-1349.4442 413.0001,-1359.4443 420.0001,-1359.4442"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="760.5" cy="-1097.2018" rx="128.6478" ry="18"/>
<text text-anchor="middle" x="760.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : knit_dir(knitter, pwd, depth)</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3132,-1390.2254C947.9856,-1381.6881 919.3028,-1368.5276 898.5,-1349.4022 828.204,-1284.7748 785.9026,-1175.8862 769.0144,-1124.9884"/>
<polygon fill="#000000" stroke="#000000" points="772.2965,-1123.7626 765.8849,-1115.328 765.6372,-1125.9199 772.2965,-1123.7626"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-1097.2018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="939.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.6757,-1385.165C1002.0569,-1333.6826 963.2473,-1186.9727 946.9012,-1125.1803"/>
<polygon fill="#000000" stroke="#000000" points="950.2401,-1124.1159 944.2991,-1115.3435 943.4729,-1125.9061 950.2401,-1124.1159"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1102.5" cy="-1097.2018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1102.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1025.3839,-1385.165C1039.1708,-1333.6826 1078.4595,-1186.9727 1095.0074,-1125.1803"/>
<polygon fill="#000000" stroke="#000000" points="1098.4357,-1125.9085 1097.6417,-1115.3435 1091.6739,-1124.0977 1098.4357,-1125.9085"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1380.5" cy="-1097.2018" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1380.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 51&#45;98</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.0037,-1389.2129C1088.6095,-1380.0216 1119.2146,-1366.5598 1143.5,-1349.4022 1238.1691,-1282.5186 1324.7453,-1173.2185 1361.6647,-1123.4128"/>
<polygon fill="#000000" stroke="#000000" points="1364.667,-1125.2377 1367.7687,-1115.1071 1359.0264,-1121.0923 1364.667,-1125.2377"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1768.5" cy="-1097.2018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1768.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1089.9839,-1399.8011C1197.9515,-1393.4025 1400.4586,-1377.9596 1466.5,-1349.4022 1590.8844,-1295.6164 1703.8504,-1173.7354 1748.3969,-1121.6005"/>
<polygon fill="#000000" stroke="#000000" points="1751.1642,-1123.7485 1754.9501,-1113.8531 1745.8197,-1119.2277 1751.1642,-1123.7485"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="2235.5" cy="-1097.2018" rx="115.0832" ry="18"/>
<text text-anchor="middle" x="2235.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knit_all(knitter, pwd_str)</text>
</g>
<!-- section_6&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_6&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2386.5635,-1385.5225C2378.3668,-1375.2877 2368.3125,-1362.0093 2360.5,-1349.4022 2312.0758,-1271.2604 2267.3209,-1171.7763 2246.9912,-1124.5121"/>
<polygon fill="#000000" stroke="#000000" points="2250.1794,-1123.0657 2243.0313,-1115.2455 2243.7425,-1125.8165 2250.1794,-1123.0657"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="2401.5" cy="-1097.2018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2401.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_6&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.5,-1385.165C2401.5,-1333.789 2401.5,-1187.5785 2401.5,-1125.5644"/>
<polygon fill="#000000" stroke="#000000" points="2405.0001,-1125.3435 2401.5,-1115.3435 2398.0001,-1125.3435 2405.0001,-1125.3435"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2616.5" cy="-1097.2018" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2616.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_6&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2415.373,-1385.5552C2423.414,-1375.1062 2433.664,-1361.6062 2442.5,-1349.4022 2501.7233,-1267.6046 2568.7983,-1168.4312 2599.5106,-1122.6365"/>
<polygon fill="#000000" stroke="#000000" points="2602.4976,-1124.4664 2605.1552,-1114.2103 2596.6818,-1120.5705 2602.4976,-1124.4664"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="2902.5" cy="-1097.2018" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2902.5" y="-1093.0018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 112&#45;136</text>
</g>
<!-- section_6&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_6&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2466.3682,-1394.1387C2531.0331,-1384.1245 2625.2309,-1367.194 2657.5,-1349.4022 2761.5984,-1292.0068 2849.0912,-1175.9984 2885.0065,-1123.7597"/>
<polygon fill="#000000" stroke="#000000" points="2887.9903,-1125.5959 2890.7151,-1115.3574 2882.2002,-1121.662 2887.9903,-1125.5959"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="275,-493.8019 0,-493.8019 0,-421.9996 275,-421.9996 275,-493.8019"/>
<text text-anchor="middle" x="137.5" y="-430.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is due for a complete overhaul.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M173.4523,-1079.0986C168.5336,-994.1121 147.6602,-633.4528 140.1804,-504.2143"/>
<polygon fill="#000000" stroke="#000000" points="143.654,-503.6556 139.582,-493.8746 136.6657,-504.0602 143.654,-503.6556"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="540,-475.9007 293,-475.9007 293,-439.9007 540,-439.9007 540,-475.9007"/>
<text text-anchor="middle" x="416.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">*** knit_dir(knitter, pwd, depth)</text>
</g>
<!-- header_11&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_11&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M754.8307,-1078.9321C739.9952,-1033.7712 696.011,-915.4509 622.5,-845.0014 596.3822,-819.9713 573.8222,-835.7796 549.5,-809.0014 461.4653,-712.0774 429.6975,-551.0802 420.0986,-486.243"/>
<polygon fill="#000000" stroke="#000000" points="423.5141,-485.3983 418.6487,-475.9867 416.583,-486.3782 423.5141,-485.3983"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="585.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="585.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_12&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.9872,-1079.0356C950.7534,-1032.537 963.9796,-908.4236 898.5,-845.0014 809.3254,-758.6287 708.089,-897.966 621.5,-809.0014 534.8891,-720.0143 562.8458,-551.8885 578.2566,-485.6884"/>
<polygon fill="#000000" stroke="#000000" points="581.6591,-486.5087 580.6028,-475.9666 574.8544,-484.8664 581.6591,-486.5087"/>
</g>
<!-- prespace_18 -->
<g id="node19" class="node">
<title>prespace_18</title>
<ellipse fill="none" stroke="#000000" cx="676.5" cy="-457.9007" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="676.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;prespace_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.7196,-1079.0159C949.7317,-1033.0079 961.0957,-910.9662 898.5,-845.0014 846.5353,-790.2398 784.3827,-863.8407 732.5,-809.0014 646.9081,-718.5319 661.449,-552.5709 671.4511,-486.3149"/>
<polygon fill="#000000" stroke="#000000" points="674.9445,-486.6328 673.0613,-476.2067 668.0316,-485.5315 674.9445,-486.6328"/>
</g>
<!-- literal_19 -->
<g id="node20" class="node">
<title>literal_19</title>
<ellipse fill="none" stroke="#000000" cx="772.5" cy="-457.9007" rx="31.481" ry="18"/>
<text text-anchor="middle" x="772.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;literal_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.0484,-1079.0073C947.3,-1034.0179 954.536,-916.0581 898.5,-845.0014 872.8418,-812.4654 837.3747,-842.1403 812.5,-809.0014 738.5183,-710.4404 756.0119,-550.3753 766.9751,-486.0153"/>
<polygon fill="#000000" stroke="#000000" points="770.4802,-486.2964 768.7933,-475.8367 763.5893,-485.0655 770.4802,-486.2964"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="848.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="848.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M937.8817,-1079.1931C933.8475,-1037.4399 921.9408,-931.0278 898.5,-845.0014 893.9867,-828.438 888.5229,-825.6907 884.5,-809.0014 856.181,-691.5178 850.1293,-546.6664 848.8433,-486.3459"/>
<polygon fill="#000000" stroke="#000000" points="852.3381,-486.0259 848.6543,-476.0921 845.3393,-486.155 852.3381,-486.0259"/>
</g>
<!-- prespace_21 -->
<g id="node22" class="node">
<title>prespace_21</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-457.9007" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="939.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;prespace_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-1079.0986C939.5,-989.811 939.5,-596.2412 939.5,-486.4362"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-486.1508 939.5,-476.1509 936.0001,-486.1509 943.0001,-486.1508"/>
</g>
<!-- literal_22 -->
<g id="node23" class="node">
<title>literal_22</title>
<ellipse fill="none" stroke="#000000" cx="1035.5" cy="-457.9007" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1035.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_22 -->
<g id="edge22" class="edge">
<title>prose_12&#45;&gt;literal_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.4332,-1079.0725C953.1654,-1033.7368 978.7238,-911.7099 994.5,-809.0014 1012.8318,-689.6548 1027.2038,-546.3656 1032.8741,-486.4349"/>
<polygon fill="#000000" stroke="#000000" points="1036.3812,-486.5223 1033.8306,-476.2391 1029.4118,-485.8684 1036.3812,-486.5223"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1111.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="1111.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_12&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M948.2341,-1079.5971C977.0192,-1021.4563 1067.5238,-837.6495 1075.5,-809.0014 1107.9139,-692.581 1111.751,-547.1546 1111.8043,-486.5141"/>
<polygon fill="#000000" stroke="#000000" points="1115.3035,-486.1943 1111.7762,-476.2039 1108.3035,-486.2134 1115.3035,-486.1943"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="1183.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="1183.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_13&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.6767,-1079.0412C1113.545,-1033.634 1134.258,-911.4569 1147.5,-809.0014 1162.9535,-689.4358 1175.918,-546.2642 1181.0911,-486.3997"/>
<polygon fill="#000000" stroke="#000000" points="1184.5971,-486.4783 1181.9652,-476.2156 1177.6227,-485.8796 1184.5971,-486.4783"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1832.5,-809.1021 1228.5,-809.1021 1228.5,-106.6994 1832.5,-106.6994 1832.5,-809.1021"/>
<text text-anchor="middle" x="1530.5" y="-793.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_dir(knitter, orb_dir, pwd)</text>
<text text-anchor="middle" x="1530.5" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knits = {}</text>
<text text-anchor="middle" x="1530.5" y="-763.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(orb_dir.path.str, false, false) do</text>
<text text-anchor="middle" x="1530.5" y="-747.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="1530.5" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="1530.5" y="-700.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="1530.5" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;* &quot; .. dir)</text>
<text text-anchor="middle" x="1530.5" y="-670.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="1530.5" y="-654.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="1530.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1530.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; read and knit</text>
<text text-anchor="middle" x="1530.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot; &#160;&#160;&#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="1530.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="1530.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted = knitter:knit(Doc(orb_f))</text>
<text text-anchor="middle" x="1530.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_dir = subLastFor(&quot;/orb&quot;, &quot;/src&quot;, dirname(f))</text>
<text text-anchor="middle" x="1530.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(src_dir)</text>
<text text-anchor="middle" x="1530.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; 4 == #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1530.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = src_dir .. &quot;/&quot; .. bare_name .. &quot;.lua&quot;</text>
<text text-anchor="middle" x="1530.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local current_src = read(out_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1530.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(knitted, current_src, out_name, 0)</text>
<text text-anchor="middle" x="1530.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1530.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_dir = &quot;../tmp&quot; .. src_dir</text>
<text text-anchor="middle" x="1530.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(tmp_dir)</text>
<text text-anchor="middle" x="1530.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_out = &quot;../tmp&quot; .. out_name</text>
<text text-anchor="middle" x="1530.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(tmp_out, current_src)</text>
<text text-anchor="middle" x="1530.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;knits[#knits + 1] = out_name</text>
<text text-anchor="middle" x="1530.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; collect changed files if any</text>
<text text-anchor="middle" x="1530.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbbacks = &quot;&quot;</text>
<text text-anchor="middle" x="1530.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(knits) do</text>
<text text-anchor="middle" x="1530.5" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbbacks = orbbacks .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1530.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbbacks ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1530.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;orbbacks: \n&quot; .. orbbacks)</text>
<text text-anchor="middle" x="1530.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1530.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; if nothing changes, no rollback is needed, empty file</text>
<text text-anchor="middle" x="1530.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write(tostring(pwd) .. &quot;/.orbback&quot;, orbbacks)</text>
<text text-anchor="middle" x="1530.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1530.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_14&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1384.7476,-1079.0986C1394.4067,-1037.9314 1419.2427,-932.0802 1445.7324,-819.1809"/>
<polygon fill="#000000" stroke="#000000" points="1449.1756,-819.8279 1448.0525,-809.2928 1442.3606,-818.2288 1449.1756,-819.8279"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1877.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="1877.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_15&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1774.0414,-1079.1932C1787.6913,-1034.1331 1823.1541,-912.6853 1841.5,-809.0014 1862.5559,-690.0014 1872.5356,-545.97 1876.0082,-486.1061"/>
<polygon fill="#000000" stroke="#000000" points="1879.5132,-486.114 1876.582,-475.9327 1872.5243,-485.7197 1879.5132,-486.114"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="643,-63.3015 284,-63.3015 284,-7.4985 643,-7.4985 643,-63.3015"/>
<text text-anchor="middle" x="463.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> Walks a given directory, kniting the contents of</text>
</g>
<!-- raw_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M588.0989,-439.7544C594.9757,-385.4629 609.201,-220.9969 548.5,-106.8001 541.0055,-92.7007 529.459,-80.2489 517.2681,-69.8551"/>
<polygon fill="#000000" stroke="#000000" points="519.1752,-66.8959 509.2001,-63.3255 514.7714,-72.3372 519.1752,-66.8959"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="715.5,-53.4 661.5,-53.4 661.5,-17.4 715.5,-17.4 715.5,-53.4"/>
<text text-anchor="middle" x="688.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prespace_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M677.0156,-439.7464C678.8965,-373.5222 685.3984,-144.6039 687.6916,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="691.2009,-63.5821 687.9863,-53.4867 684.2037,-63.3833 691.2009,-63.5821"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="799.5,-53.4 745.5,-53.4 745.5,-17.4 799.5,-17.4 799.5,-53.4"/>
<text text-anchor="middle" x="772.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/org/</text>
</g>
<!-- literal_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>literal_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.5,-439.7464C772.5,-373.5222 772.5,-144.6039 772.5,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="776.0001,-63.4867 772.5,-53.4867 769.0001,-63.4868 776.0001,-63.4867"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="875.5,-55.3021 821.5,-55.3021 821.5,-15.4979 875.5,-15.4979 875.5,-55.3021"/>
<text text-anchor="middle" x="848.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> into</text>
</g>
<!-- raw_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M848.5,-439.7464C848.5,-373.9914 848.5,-147.8396 848.5,-65.6021"/>
<polygon fill="#000000" stroke="#000000" points="852.0001,-65.4231 848.5,-55.4231 845.0001,-65.4231 852.0001,-65.4231"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="966.5,-53.4 912.5,-53.4 912.5,-17.4 966.5,-17.4 966.5,-53.4"/>
<text text-anchor="middle" x="939.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-439.7464C939.5,-373.5222 939.5,-144.6039 939.5,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-63.4867 939.5,-53.4867 936.0001,-63.4868 943.0001,-63.4867"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1062.5,-53.4 1008.5,-53.4 1008.5,-17.4 1062.5,-17.4 1062.5,-53.4"/>
<text text-anchor="middle" x="1035.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/src/</text>
</g>
<!-- literal_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>literal_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1035.5,-439.7464C1035.5,-373.5222 1035.5,-144.6039 1035.5,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="1039.0001,-63.4867 1035.5,-53.4867 1032.0001,-63.4868 1039.0001,-63.4867"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1136.5,-53.4 1082.5,-53.4 1082.5,-17.4 1136.5,-17.4 1136.5,-53.4"/>
<text text-anchor="middle" x="1109.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1111.4141,-439.7464C1111.1006,-373.5222 1110.0169,-144.6039 1109.6347,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="1113.133,-63.47 1109.5856,-53.4867 1106.1331,-63.5032 1113.133,-63.47"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1618.5,-62.7005 1154.5,-62.7005 1154.5,-8.0996 1618.5,-8.0996 1618.5,-62.7005"/>
<text text-anchor="middle" x="1386.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [X] TODO fix up the orb/notes directory so it doesn&#39;t explode</text>
<text text-anchor="middle" x="1386.5" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;the knit.</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1179.5796,-440.0171C1168.4652,-384.3575 1142.3183,-211.6677 1219.5,-106.8001 1231.7876,-90.1047 1248.7777,-77.2755 1267.2446,-67.4278"/>
<polygon fill="#000000" stroke="#000000" points="1269.0447,-70.4406 1276.4147,-62.8291 1265.9067,-64.1833 1269.0447,-70.4406"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2073.5,-63.3015 1651.5,-63.3015 1651.5,-7.4985 2073.5,-7.4985 2073.5,-63.3015"/>
<text text-anchor="middle" x="1862.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo add some proper codex detection and correction</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1876.8555,-439.7464C1874.5896,-375.9238 1866.9589,-160.9932 1863.8426,-73.2176"/>
<polygon fill="#000000" stroke="#000000" points="1867.3383,-73.0318 1863.4856,-63.1623 1860.3427,-73.2802 1867.3383,-73.0318"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2345,-475.9007 2126,-475.9007 2126,-439.9007 2345,-439.9007 2345,-475.9007"/>
<text text-anchor="middle" x="2235.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">** knit_all(knitter, pwd_str)</text>
</g>
<!-- header_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>header_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2235.5,-1079.0986C2235.5,-989.811 2235.5,-596.2412 2235.5,-486.4362"/>
<polygon fill="#000000" stroke="#000000" points="2239.0001,-486.1508 2235.5,-476.1509 2232.0001,-486.1509 2239.0001,-486.1508"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2396.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="2396.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_37&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.3584,-1079.0986C2400.6601,-989.811 2397.582,-596.2412 2396.7232,-486.4362"/>
<polygon fill="#000000" stroke="#000000" points="2400.2209,-486.1231 2396.6427,-476.1509 2393.2211,-486.178 2400.2209,-486.1231"/>
</g>
<!-- prespace_43 -->
<g id="node44" class="node">
<title>prespace_43</title>
<ellipse fill="none" stroke="#000000" cx="2568.5" cy="-457.9007" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2568.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_38&#45;&gt;prespace_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;prespace_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2615.1408,-1079.0986C2608.4369,-989.811 2578.8869,-596.2412 2570.6425,-486.4362"/>
<polygon fill="#000000" stroke="#000000" points="2574.1092,-485.8607 2569.8703,-476.1509 2567.1289,-486.3849 2574.1092,-485.8607"/>
</g>
<!-- literal_44 -->
<g id="node45" class="node">
<title>literal_44</title>
<ellipse fill="none" stroke="#000000" cx="2664.5" cy="-457.9007" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2664.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_38&#45;&gt;literal_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;literal_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2617.8592,-1079.0986C2624.5631,-989.811 2654.1131,-596.2412 2662.3575,-486.4362"/>
<polygon fill="#000000" stroke="#000000" points="2665.8711,-486.3849 2663.1297,-476.1509 2658.8908,-485.8607 2665.8711,-486.3849"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2740.5" cy="-457.9007" rx="27" ry="18"/>
<text text-anchor="middle" x="2740.5" y="-453.7007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_38&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2623.3026,-1079.308C2640.0368,-1034.5099 2683.3743,-913.6128 2704.5,-809.0014 2728.4218,-690.5442 2736.8515,-546.2193 2739.4614,-486.1919"/>
<polygon fill="#000000" stroke="#000000" points="2742.967,-486.1259 2739.8834,-475.9898 2735.973,-485.8365 2742.967,-486.1259"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3221.5,-640.0015 2785.5,-640.0015 2785.5,-275.7999 3221.5,-275.7999 3221.5,-640.0015"/>
<text text-anchor="middle" x="3003.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_all(knitter, pwd_str)</text>
<text text-anchor="middle" x="3003.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local did_knit = false</text>
<text text-anchor="middle" x="3003.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local pwd = Dir(pwd_str)</text>
<text text-anchor="middle" x="3003.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd.codex_type = &quot;base&quot;</text>
<text text-anchor="middle" x="3003.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;pwd:&quot; .. tostring(pwd))</text>
<text text-anchor="middle" x="3003.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = pwd .. &quot;/orb&quot;</text>
<text text-anchor="middle" x="3003.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;orbDir: &quot; .. tostring(orbDir))</text>
<text text-anchor="middle" x="3003.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbDir:exists() then</text>
<text text-anchor="middle" x="3003.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Knit: &quot;) .. tostring(orbDir))</text>
<text text-anchor="middle" x="3003.5" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbDir.codex_type = &quot;home&quot;</text>
<text text-anchor="middle" x="3003.5" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;did_knit = knit_dir(knitter, orbDir, pwd)</text>
<text text-anchor="middle" x="3003.5" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3003.5" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;No orb directory to knit. No action taken.&quot;)</text>
<text text-anchor="middle" x="3003.5" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="3003.5" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3003.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return did_knit</text>
<text text-anchor="middle" x="3003.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3003.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knit_all = knit_all</text>
<text text-anchor="middle" x="3003.5" y="-283.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2905.36,-1079.0986C2915.147,-1017.1498 2948.0746,-808.7277 2973.115,-650.2294"/>
<polygon fill="#000000" stroke="#000000" points="2976.5737,-650.765 2974.6771,-640.3413 2969.6594,-649.6726 2976.5737,-650.765"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2541.5,-70.7004 2091.5,-70.7004 2091.5,-.0997 2541.5,-.0997 2541.5,-70.7004"/>
<text text-anchor="middle" x="2316.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Both sides of the interface to this are wrong, but let&#39;s build</text>
<text text-anchor="middle" x="2316.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">the Dir locally and go from there.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2396.5252,-439.8998C2396.1307,-387.336 2391.6091,-230.0026 2353.5,-106.8001 2350.7429,-97.8866 2346.9039,-88.7612 2342.7357,-80.142"/>
<polygon fill="#000000" stroke="#000000" points="2345.7582,-78.3632 2338.1191,-71.0218 2339.5127,-81.5246 2345.7582,-78.3632"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2613.5,-53.4 2559.5,-53.4 2559.5,-17.4 2613.5,-17.4 2613.5,-53.4"/>
</g>
<!-- prespace_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prespace_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2569.2734,-439.7464C2572.0948,-373.5222 2581.8475,-144.6039 2585.2873,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="2588.8005,-63.6267 2585.7294,-53.4867 2581.8069,-63.3287 2588.8005,-63.6267"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2697,-53.4 2632,-53.4 2632,-17.4 2697,-17.4 2697,-53.4"/>
<text text-anchor="middle" x="2664.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter</text>
</g>
<!-- literal_44&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>literal_44&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2664.5,-439.7464C2664.5,-373.5222 2664.5,-144.6039 2664.5,-63.8637"/>
<polygon fill="#000000" stroke="#000000" points="2668.0001,-63.4867 2664.5,-53.4867 2661.0001,-63.4868 2668.0001,-63.4867"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3130,-54.7006 2715,-54.7006 2715,-16.0995 3130,-16.0995 3130,-54.7006"/>
<text text-anchor="middle" x="2922.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> isn&#39;t wrong externally, the internal interface it</text>
<text text-anchor="middle" x="2922.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">presents needs considerable refinement to work correctly.</text>
</g>
<!-- raw_45&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_45&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2736.7386,-439.7927C2726.265,-384.2061 2702.1828,-213.3435 2776.5,-106.8001 2791.7441,-84.9456 2815.609,-69.4988 2839.6601,-58.7062"/>
<polygon fill="#000000" stroke="#000000" points="2841.0339,-61.9254 2848.8694,-54.7941 2838.2969,-55.4826 2841.0339,-61.9254"/>
</g>
</g>
</svg>