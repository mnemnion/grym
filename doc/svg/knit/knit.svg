<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3216pt" height="1588pt"
 viewBox="0.00 0.00 3215.50 1588.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1584.2023)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1584.2023 3211.5,-1584.2023 3211.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1562.2023" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1558.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 138</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1490.2023" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1486.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;104</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1544.0336C416.5,-1536.3332 416.5,-1527.1766 416.5,-1518.6189"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1518.6155 416.5,-1508.6155 413.0001,-1518.6156 420.0001,-1518.6155"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="98.5" cy="-1418.2023" rx="69.1929" ry="18"/>
<text text-anchor="middle" x="98.5" y="-1414.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knit module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M365.7603,-1478.7141C310.1471,-1466.1224 220.883,-1445.9116 160.9963,-1432.3524"/>
<polygon fill="#000000" stroke="#000000" points="161.436,-1428.8634 150.9099,-1430.0687 159.8902,-1435.6906 161.436,-1428.8634"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="268.5" cy="-1418.2023" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="268.5" y="-1414.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M384.0208,-1474.4016C359.8325,-1462.6343 326.8935,-1446.6099 302.3767,-1434.6829"/>
<polygon fill="#000000" stroke="#000000" points="303.6223,-1431.3967 293.0988,-1430.1693 300.56,-1437.6913 303.6223,-1431.3967"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="416.5" cy="-1418.2023" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="416.5" y="-1414.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1472.0336C416.5,-1464.3332 416.5,-1455.1766 416.5,-1446.6189"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1446.6155 416.5,-1436.6155 413.0001,-1446.6156 420.0001,-1446.6155"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1020.5" cy="-1418.2023" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1020.5" y="-1414.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 43&#45;104</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M476.9004,-1483.0022C588.0891,-1469.748 824.8392,-1441.5261 945.8749,-1427.098"/>
<polygon fill="#000000" stroke="#000000" points="946.6417,-1430.5314 956.1571,-1425.8723 945.8131,-1423.5807 946.6417,-1430.5314"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="2387.5" cy="-1418.2023" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2387.5" y="-1414.0023" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 105&#45;138</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M481.7977,-1487.817C775.1892,-1477.0995 1971.5787,-1433.3957 2302.3858,-1421.3115"/>
<polygon fill="#000000" stroke="#000000" points="2302.9884,-1424.7919 2312.8539,-1420.9291 2302.7328,-1417.7966 2302.9884,-1424.7919"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="129.5,-1130.0019 15.5,-1130.0019 15.5,-1094.0019 129.5,-1094.0019 129.5,-1130.0019"/>
<text text-anchor="middle" x="72.5" y="-1108.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knit module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M96.9514,-1399.965C92.589,-1348.5891 80.174,-1202.3786 74.9083,-1140.3645"/>
<polygon fill="#000000" stroke="#000000" points="78.3741,-1139.8115 74.0404,-1130.1435 71.3992,-1140.4038 78.3741,-1139.8115"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="174.5" cy="-1112.0019" rx="27" ry="18"/>
<text text-anchor="middle" x="174.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M247.6407,-1404.448C234.7595,-1394.7811 219.1005,-1380.6644 210.5,-1364.2023 171.9433,-1290.4017 170.6264,-1188.7543 172.6291,-1140.1291"/>
<polygon fill="#000000" stroke="#000000" points="176.1297,-1140.2013 173.1258,-1130.0413 169.1382,-1139.8571 176.1297,-1140.2013"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="613.5,-1364.4028 219.5,-1364.4028 219.5,-859.6009 613.5,-859.6009 613.5,-1364.4028"/>
<text text-anchor="middle" x="416.5" y="-1349.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="416.5" y="-1317.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot; ()</text>
<text text-anchor="middle" x="416.5" y="-1302.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="416.5" y="-1286.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="416.5" y="-1271.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="416.5" y="-1240.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="416.5" y="-1224.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="416.5" y="-1209.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="416.5" y="-1193.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="416.5" y="-1178.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="416.5" y="-1163.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="416.5" y="-1147.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="416.5" y="-1132.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="416.5" y="-1116.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="416.5" y="-1101.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="416.5" y="-1086.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="416.5" y="-1070.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="416.5" y="-1055.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="416.5" y="-1007.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local knitter = require &quot;knit/knitter&quot;</text>
<text text-anchor="middle" x="416.5" y="-976.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="416.5" y="-961.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir, Path, File = walk.Dir, walk.Path, walk.File</text>
<text text-anchor="middle" x="416.5" y="-945.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="416.5" y="-930.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="416.5" y="-914.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="416.5" y="-899.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="416.5" y="-868.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.5,-1399.965C416.5,-1393.0609 416.5,-1384.4441 416.5,-1374.5492"/>
<polygon fill="#000000" stroke="#000000" points="420.0001,-1374.2442 416.5,-1364.2443 413.0001,-1374.2443 420.0001,-1374.2442"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="760.5" cy="-1112.0019" rx="128.6478" ry="18"/>
<text text-anchor="middle" x="760.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : knit_dir(knitter, pwd, depth)</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3132,-1405.0255C947.9856,-1396.4882 919.3028,-1383.3276 898.5,-1364.2023 828.204,-1299.5748 785.9026,-1190.6862 769.0144,-1139.7885"/>
<polygon fill="#000000" stroke="#000000" points="772.2965,-1138.5627 765.8849,-1130.1281 765.6372,-1140.72 772.2965,-1138.5627"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-1112.0019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="939.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.6757,-1399.965C1002.0569,-1348.4827 963.2473,-1201.7727 946.9012,-1139.9804"/>
<polygon fill="#000000" stroke="#000000" points="950.2401,-1138.9159 944.2991,-1130.1435 943.4729,-1140.7061 950.2401,-1138.9159"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1102.5" cy="-1112.0019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1102.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1025.3839,-1399.965C1039.1708,-1348.4827 1078.4595,-1201.7727 1095.0074,-1139.9804"/>
<polygon fill="#000000" stroke="#000000" points="1098.4357,-1140.7086 1097.6417,-1130.1435 1091.6739,-1138.8978 1098.4357,-1140.7086"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1373.5" cy="-1112.0019" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1373.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 51&#45;99</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.3913,-1404.042C1088.9789,-1394.8977 1119.4382,-1381.4729 1143.5,-1364.2023 1236.3727,-1297.5418 1319.8847,-1188.1286 1355.4031,-1138.2535"/>
<polygon fill="#000000" stroke="#000000" points="1358.3667,-1140.1242 1361.2734,-1129.9359 1352.6476,-1136.0878 1358.3667,-1140.1242"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1747.5" cy="-1112.0019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1747.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1089.8414,-1414.6389C1196.4401,-1408.3319 1395.0167,-1393.0613 1459.5,-1364.2023 1579.6001,-1310.4524 1686.1863,-1189.0029 1728.3317,-1136.7118"/>
<polygon fill="#000000" stroke="#000000" points="1731.2656,-1138.6463 1734.7625,-1128.6452 1725.7921,-1134.2827 1731.2656,-1138.6463"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="2221.5" cy="-1112.0019" rx="115.0832" ry="18"/>
<text text-anchor="middle" x="2221.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knit_all(knitter, pwd_str)</text>
</g>
<!-- section_6&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_6&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2372.5635,-1400.3226C2364.3668,-1390.0877 2354.3125,-1376.8093 2346.5,-1364.2023 2298.0758,-1286.0604 2253.3209,-1186.5763 2232.9912,-1139.3122"/>
<polygon fill="#000000" stroke="#000000" points="2236.1794,-1137.8658 2229.0313,-1130.0456 2229.7425,-1140.6165 2236.1794,-1137.8658"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="2387.5" cy="-1112.0019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2387.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_6&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2387.5,-1399.965C2387.5,-1348.5891 2387.5,-1202.3786 2387.5,-1140.3645"/>
<polygon fill="#000000" stroke="#000000" points="2391.0001,-1140.1435 2387.5,-1130.1435 2384.0001,-1140.1436 2391.0001,-1140.1435"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2602.5" cy="-1112.0019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2602.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_6&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.373,-1400.3553C2409.414,-1389.9063 2419.664,-1376.4063 2428.5,-1364.2023 2487.7233,-1282.4047 2554.7983,-1183.2313 2585.5106,-1137.4366"/>
<polygon fill="#000000" stroke="#000000" points="2588.4976,-1139.2664 2591.1552,-1129.0103 2582.6818,-1135.3706 2588.4976,-1139.2664"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="2888.5" cy="-1112.0019" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2888.5" y="-1107.8019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 113&#45;137</text>
</g>
<!-- section_6&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_6&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2452.3682,-1408.9388C2517.0331,-1398.9246 2611.2309,-1381.9941 2643.5,-1364.2023 2747.5984,-1306.8069 2835.0912,-1190.7985 2871.0065,-1138.5597"/>
<polygon fill="#000000" stroke="#000000" points="2873.9903,-1140.3959 2876.7151,-1130.1575 2868.2002,-1136.4621 2873.9903,-1140.3959"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="275,-501.2019 0,-501.2019 0,-429.3996 275,-429.3996 275,-501.2019"/>
<text text-anchor="middle" x="137.5" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is due for a complete overhaul.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M173.4523,-1093.6891C168.5229,-1007.5325 147.5696,-641.3017 140.132,-511.3034"/>
<polygon fill="#000000" stroke="#000000" points="143.6236,-511.0556 139.558,-501.2719 136.635,-511.4555 143.6236,-511.0556"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="540,-483.3008 293,-483.3008 293,-447.3008 540,-447.3008 540,-483.3008"/>
<text text-anchor="middle" x="416.5" y="-461.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">*** knit_dir(knitter, pwd, depth)</text>
</g>
<!-- header_11&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_11&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M754.8307,-1093.7322C739.9952,-1048.5713 696.011,-930.251 622.5,-859.8015 596.3822,-834.7714 573.7303,-850.6629 549.5,-823.8015 459.7843,-724.3439 428.8703,-558.966 419.7987,-493.3604"/>
<polygon fill="#000000" stroke="#000000" points="423.2573,-492.8166 418.4803,-483.3598 416.3174,-493.7315 423.2573,-492.8166"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="585.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="585.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_12&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.9872,-1093.8356C950.7534,-1047.337 963.9796,-923.2237 898.5,-859.8015 809.3254,-773.4288 707.9958,-912.8567 621.5,-823.8015 532.9707,-732.6526 562.2688,-560.4346 578.1452,-493.1916"/>
<polygon fill="#000000" stroke="#000000" points="581.5812,-493.8746 580.5579,-483.3293 574.7817,-492.2111 581.5812,-493.8746"/>
</g>
<!-- prespace_18 -->
<g id="node19" class="node">
<title>prespace_18</title>
<ellipse fill="none" stroke="#000000" cx="676.5" cy="-465.3008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="676.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;prespace_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.7196,-1093.816C949.7317,-1047.808 961.0957,-925.7663 898.5,-859.8015 846.5353,-805.0399 784.2945,-878.724 732.5,-823.8015 645.0922,-731.1148 660.8395,-561.131 671.3078,-493.8267"/>
<polygon fill="#000000" stroke="#000000" points="674.8249,-494.0063 672.9883,-483.5719 667.9171,-492.8742 674.8249,-494.0063"/>
</g>
<!-- literal_19 -->
<g id="node20" class="node">
<title>literal_19</title>
<ellipse fill="none" stroke="#000000" cx="772.5" cy="-465.3008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="772.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;literal_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M942.0484,-1093.8074C947.3,-1048.818 954.536,-930.8582 898.5,-859.8015 872.8418,-827.2654 837.3362,-856.9693 812.5,-823.8015 736.7621,-722.6564 755.563,-558.251 766.9278,-493.1332"/>
<polygon fill="#000000" stroke="#000000" points="770.3867,-493.675 768.7391,-483.209 763.5004,-492.4181 770.3867,-493.675"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="848.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="848.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M937.8817,-1093.9932C933.8475,-1052.24 921.9408,-945.8278 898.5,-859.8015 893.9867,-843.2381 888.5054,-840.495 884.5,-823.8015 855.5873,-703.3012 849.8644,-554.6134 848.7547,-493.5247"/>
<polygon fill="#000000" stroke="#000000" points="852.2538,-493.4386 848.6006,-483.4935 845.2547,-493.5461 852.2538,-493.4386"/>
</g>
<!-- prespace_21 -->
<g id="node22" class="node">
<title>prespace_21</title>
<ellipse fill="none" stroke="#000000" cx="939.5" cy="-465.3008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="939.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_12&#45;&gt;prespace_21 -->
<g id="edge21" class="edge">
<title>prose_12&#45;&gt;prespace_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-1093.6891C939.5,-1003.1773 939.5,-603.56 939.5,-493.4668"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-493.4538 939.5,-483.4538 936.0001,-493.4539 943.0001,-493.4538"/>
</g>
<!-- literal_22 -->
<g id="node23" class="node">
<title>literal_22</title>
<ellipse fill="none" stroke="#000000" cx="1035.5" cy="-465.3008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1035.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_12&#45;&gt;literal_22 -->
<g id="edge22" class="edge">
<title>prose_12&#45;&gt;literal_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.4483,-1093.8749C953.215,-1048.5445 978.846,-926.5286 994.5,-823.8015 1013.1512,-701.4059 1027.4405,-554.3262 1032.9867,-493.6222"/>
<polygon fill="#000000" stroke="#000000" points="1036.4738,-493.9211 1033.8902,-483.6461 1029.5024,-493.2896 1036.4738,-493.9211"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1111.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="1111.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_12&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M948.2364,-1094.3978C977.0288,-1036.259 1067.5538,-852.4579 1075.5,-823.8015 1108.6128,-704.3871 1112.0353,-555.1046 1111.8898,-493.6913"/>
<polygon fill="#000000" stroke="#000000" points="1115.3893,-493.5843 1111.8306,-483.605 1108.3894,-493.6254 1115.3893,-493.5843"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="1183.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="1183.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_13&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1105.69,-1093.843C1113.5886,-1048.4397 1134.3653,-926.2708 1147.5,-823.8015 1163.1854,-701.4333 1176.0695,-554.8314 1181.1589,-493.9646"/>
<polygon fill="#000000" stroke="#000000" points="1184.6781,-493.8776 1182.0174,-483.6224 1177.702,-493.2985 1184.6781,-493.8776"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1804.5,-823.8022 1228.5,-823.8022 1228.5,-106.7994 1804.5,-106.7994 1804.5,-823.8022"/>
<text text-anchor="middle" x="1516.5" y="-808.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_dir(knitter, orb_dir, pwd)</text>
<text text-anchor="middle" x="1516.5" y="-793.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knits = {}</text>
<text text-anchor="middle" x="1516.5" y="-777.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(orb_dir.path.str, false, false) do</text>
<text text-anchor="middle" x="1516.5" y="-762.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local file_strs = getfiles(dir)</text>
<text text-anchor="middle" x="1516.5" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dirObj = Dir(dir)</text>
<text text-anchor="middle" x="1516.5" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local files &#160;= dirObj:getfiles()</text>
<text text-anchor="middle" x="1516.5" y="-716.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;* &quot; .. a.yellow(dir))</text>
<text text-anchor="middle" x="1516.5" y="-700.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="1516.5" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;&#160;&#160;&#45; &quot; .. tostring(f))</text>
<text text-anchor="middle" x="1516.5" y="-670.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-654.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, file in ipairs(files) do</text>
<text text-anchor="middle" x="1516.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;f = file.path.str</text>
<text text-anchor="middle" x="1516.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1516.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; read and knit</text>
<text text-anchor="middle" x="1516.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb(&quot; &#160;&#160;&#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="1516.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="1516.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local knitted = knitter:knit(Doc(orb_f))</text>
<text text-anchor="middle" x="1516.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local src_dir = subLastFor(&quot;/orb&quot;, &quot;/src&quot;, dirname(f))</text>
<text text-anchor="middle" x="1516.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(src_dir)</text>
<text text-anchor="middle" x="1516.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; 4 == #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1516.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = src_dir .. &quot;/&quot; .. bare_name .. &quot;.lua&quot;</text>
<text text-anchor="middle" x="1516.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local current_src = read(out_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1516.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(knitted, current_src, out_name, 0)</text>
<text text-anchor="middle" x="1516.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1516.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_dir = &quot;../tmp&quot; .. src_dir</text>
<text text-anchor="middle" x="1516.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(tmp_dir)</text>
<text text-anchor="middle" x="1516.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local tmp_out = &quot;../tmp&quot; .. out_name</text>
<text text-anchor="middle" x="1516.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(tmp_out, current_src)</text>
<text text-anchor="middle" x="1516.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;knits[#knits + 1] = out_name</text>
<text text-anchor="middle" x="1516.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; collect changed files if any</text>
<text text-anchor="middle" x="1516.5" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbbacks = &quot;&quot;</text>
<text text-anchor="middle" x="1516.5" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(knits) do</text>
<text text-anchor="middle" x="1516.5" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbbacks = orbbacks .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1516.5" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbbacks ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1516.5" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;orbbacks: \n&quot; .. orbbacks)</text>
<text text-anchor="middle" x="1516.5" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1516.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; if nothing changes, no rollback is needed, empty file</text>
<text text-anchor="middle" x="1516.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write(tostring(pwd) .. &quot;/.orbback&quot;, orbbacks)</text>
<text text-anchor="middle" x="1516.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1516.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_14&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1377.5494,-1093.6891C1386.6694,-1052.4448 1409.9818,-947.0172 1434.9619,-834.0473"/>
<polygon fill="#000000" stroke="#000000" points="1438.4084,-834.6716 1437.1501,-824.1517 1431.5735,-833.1602 1438.4084,-834.6716"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1849.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="1849.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_15&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1752.4649,-1093.9497C1764.7027,-1048.7902 1796.5481,-927.1335 1813.5,-823.8015 1833.5197,-701.7689 1844.0883,-554.4174 1847.8638,-493.628"/>
<polygon fill="#000000" stroke="#000000" points="1851.3777,-493.504 1848.4905,-483.3102 1844.3906,-493.0796 1851.3777,-493.504"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="643,-63.3015 284,-63.3015 284,-7.4985 643,-7.4985 643,-63.3015"/>
<text text-anchor="middle" x="463.5" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> Walks a given directory, kniting the contents of</text>
</g>
<!-- raw_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M588.1538,-447.1678C595.3051,-392.1464 610.4876,-223.7206 548.5,-106.8001 541.0207,-92.6926 529.4795,-80.238 517.289,-69.8441"/>
<polygon fill="#000000" stroke="#000000" points="519.1957,-66.8846 509.2205,-63.3147 514.7922,-72.3261 519.1957,-66.8846"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="715.5,-53.4 661.5,-53.4 661.5,-17.4 715.5,-17.4 715.5,-53.4"/>
<text text-anchor="middle" x="688.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prespace_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M677.008,-447.1031C678.8822,-379.959 685.4187,-145.7885 687.7039,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="691.2047,-63.9365 687.9852,-53.8427 684.2074,-63.7412 691.2047,-63.9365"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="799.5,-53.4 745.5,-53.4 745.5,-17.4 799.5,-17.4 799.5,-53.4"/>
<text text-anchor="middle" x="772.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/org/</text>
</g>
<!-- literal_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>literal_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.5,-447.1031C772.5,-379.959 772.5,-145.7885 772.5,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="776.0001,-63.8427 772.5,-53.8427 769.0001,-63.8428 776.0001,-63.8427"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="875.5,-55.3021 821.5,-55.3021 821.5,-15.4979 875.5,-15.4979 875.5,-55.3021"/>
<text text-anchor="middle" x="848.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> into</text>
</g>
<!-- raw_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M848.5,-447.1031C848.5,-380.3498 848.5,-148.5087 848.5,-65.3649"/>
<polygon fill="#000000" stroke="#000000" points="852.0001,-65.3151 848.5,-55.3151 845.0001,-65.3152 852.0001,-65.3151"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="966.5,-53.4 912.5,-53.4 912.5,-17.4 966.5,-17.4 966.5,-53.4"/>
<text text-anchor="middle" x="939.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M939.5,-447.1031C939.5,-379.959 939.5,-145.7885 939.5,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="943.0001,-63.8427 939.5,-53.8427 936.0001,-63.8428 943.0001,-63.8427"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1062.5,-53.4 1008.5,-53.4 1008.5,-17.4 1062.5,-17.4 1062.5,-53.4"/>
<text text-anchor="middle" x="1035.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">/src/</text>
</g>
<!-- literal_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>literal_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1035.5,-447.1031C1035.5,-379.959 1035.5,-145.7885 1035.5,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="1039.0001,-63.8427 1035.5,-53.8427 1032.0001,-63.8428 1039.0001,-63.8427"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1136.5,-53.4 1082.5,-53.4 1082.5,-17.4 1136.5,-17.4 1136.5,-53.4"/>
<text text-anchor="middle" x="1109.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1111.4153,-447.1031C1111.103,-379.959 1110.0136,-145.7885 1109.6327,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="1113.1324,-63.8263 1109.5858,-53.8427 1106.1325,-63.859 1113.1324,-63.8263"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1618.5,-62.7005 1154.5,-62.7005 1154.5,-8.0996 1618.5,-8.0996 1618.5,-62.7005"/>
<text text-anchor="middle" x="1386.5" y="-31.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [X] TODO fix up the orb/notes directory so it doesn&#39;t explode</text>
<text text-anchor="middle" x="1386.5" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;the knit.</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1179.5307,-447.4445C1168.0845,-391.0577 1140.6354,-214.1898 1219.5,-106.8001 1231.7701,-90.0919 1248.7517,-77.2564 1267.2156,-67.4065"/>
<polygon fill="#000000" stroke="#000000" points="1269.0155,-70.4193 1276.3846,-62.807 1265.8768,-64.1624 1269.0155,-70.4193"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2059.5,-63.3015 1637.5,-63.3015 1637.5,-7.4985 2059.5,-7.4985 2059.5,-63.3015"/>
<text text-anchor="middle" x="1848.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo add some proper codex detection and correction</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.4577,-447.1031C1849.3071,-382.3724 1848.7954,-162.4069 1848.5882,-73.3236"/>
<polygon fill="#000000" stroke="#000000" points="1852.0878,-73.1196 1848.5645,-63.1279 1845.0879,-73.136 1852.0878,-73.1196"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2331,-483.3008 2112,-483.3008 2112,-447.3008 2331,-447.3008 2331,-483.3008"/>
<text text-anchor="middle" x="2221.5" y="-461.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">** knit_all(knitter, pwd_str)</text>
</g>
<!-- header_36&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>header_36&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2221.5,-1093.6891C2221.5,-1003.1773 2221.5,-603.56 2221.5,-493.4668"/>
<polygon fill="#000000" stroke="#000000" points="2225.0001,-493.4538 2221.5,-483.4538 2218.0001,-493.4539 2225.0001,-493.4538"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2382.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="2382.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_37&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2387.3584,-1093.6891C2386.6586,-1003.1773 2383.569,-603.56 2382.7178,-493.4668"/>
<polygon fill="#000000" stroke="#000000" points="2386.2177,-493.4265 2382.6404,-483.4538 2379.2179,-493.4806 2386.2177,-493.4265"/>
</g>
<!-- prespace_43 -->
<g id="node44" class="node">
<title>prespace_43</title>
<ellipse fill="none" stroke="#000000" cx="2554.5" cy="-465.3008" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2554.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_38&#45;&gt;prespace_43 -->
<g id="edge43" class="edge">
<title>prose_38&#45;&gt;prespace_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2601.1408,-1093.6891C2594.4227,-1003.1773 2564.762,-603.56 2556.5906,-493.4668"/>
<polygon fill="#000000" stroke="#000000" points="2560.0781,-493.1673 2555.8474,-483.4538 2553.0973,-493.6855 2560.0781,-493.1673"/>
</g>
<!-- literal_44 -->
<g id="node45" class="node">
<title>literal_44</title>
<ellipse fill="none" stroke="#000000" cx="2650.5" cy="-465.3008" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2650.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_38&#45;&gt;literal_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;literal_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2603.8592,-1093.6891C2610.5773,-1003.1773 2640.238,-603.56 2648.4094,-493.4668"/>
<polygon fill="#000000" stroke="#000000" points="2651.9027,-493.6855 2649.1526,-483.4538 2644.9219,-493.1673 2651.9027,-493.6855"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2726.5" cy="-465.3008" rx="27" ry="18"/>
<text text-anchor="middle" x="2726.5" y="-461.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_38&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2609.3162,-1094.1108C2626.0813,-1049.3189 2669.4839,-928.435 2690.5,-823.8015 2714.8521,-702.5591 2723.0617,-554.7773 2725.538,-493.7509"/>
<polygon fill="#000000" stroke="#000000" points="2729.0494,-493.5186 2725.9363,-483.3915 2722.0546,-493.2496 2729.0494,-493.5186"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3207.5,-647.4016 2771.5,-647.4016 2771.5,-283.2 3207.5,-283.2 3207.5,-647.4016"/>
<text text-anchor="middle" x="2989.5" y="-616.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function knit_all(knitter, pwd_str)</text>
<text text-anchor="middle" x="2989.5" y="-601.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local did_knit = false</text>
<text text-anchor="middle" x="2989.5" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local pwd = Dir(pwd_str)</text>
<text text-anchor="middle" x="2989.5" y="-570.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd.codex_type = &quot;base&quot;</text>
<text text-anchor="middle" x="2989.5" y="-554.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;pwd:&quot; .. tostring(pwd))</text>
<text text-anchor="middle" x="2989.5" y="-539.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local orbDir = pwd .. &quot;/orb&quot;</text>
<text text-anchor="middle" x="2989.5" y="-524.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;s:chat(&quot;orbDir: &quot; .. tostring(orbDir))</text>
<text text-anchor="middle" x="2989.5" y="-508.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if orbDir:exists() then</text>
<text text-anchor="middle" x="2989.5" y="-493.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Knit: &quot;) .. tostring(orbDir))</text>
<text text-anchor="middle" x="2989.5" y="-477.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;orbDir.codex_type = &quot;home&quot;</text>
<text text-anchor="middle" x="2989.5" y="-462.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;did_knit = knit_dir(knitter, orbDir, pwd)</text>
<text text-anchor="middle" x="2989.5" y="-447.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2989.5" y="-431.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot;No orb directory to knit. No action taken.&quot;)</text>
<text text-anchor="middle" x="2989.5" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2989.5" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2989.5" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return did_knit</text>
<text text-anchor="middle" x="2989.5" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2989.5" y="-338.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter.knit_all = knit_all</text>
<text text-anchor="middle" x="2989.5" y="-291.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">return knitter</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2891.36,-1093.6891C2901.1942,-1030.7213 2934.3925,-818.153 2959.4764,-657.5411"/>
<polygon fill="#000000" stroke="#000000" points="2962.956,-657.9434 2961.041,-647.523 2956.0398,-656.8632 2962.956,-657.9434"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2527.5,-70.7004 2077.5,-70.7004 2077.5,-.0997 2527.5,-.0997 2527.5,-70.7004"/>
<text text-anchor="middle" x="2302.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Both sides of the interface to this are wrong, but let&#39;s build</text>
<text text-anchor="middle" x="2302.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">the Dir locally and go from there.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2382.5867,-446.9215C2382.3588,-393.2525 2378.2439,-232.6097 2339.5,-106.8001 2336.754,-97.8832 2332.9203,-88.7562 2328.7538,-80.1364"/>
<polygon fill="#000000" stroke="#000000" points="2331.7765,-78.3579 2324.138,-71.016 2325.5309,-81.5189 2331.7765,-78.3579"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2599.5,-53.4 2545.5,-53.4 2545.5,-17.4 2599.5,-17.4 2599.5,-53.4"/>
</g>
<!-- prespace_43&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prespace_43&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2555.2619,-447.1031C2558.0733,-379.959 2567.878,-145.7885 2571.3059,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="2574.8063,-63.9804 2571.7278,-53.8427 2567.8124,-63.6875 2574.8063,-63.9804"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="2683,-53.4 2618,-53.4 2618,-17.4 2683,-17.4 2683,-53.4"/>
<text text-anchor="middle" x="2650.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">knitter</text>
</g>
<!-- literal_44&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>literal_44&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2650.5,-447.1031C2650.5,-379.959 2650.5,-145.7885 2650.5,-63.92"/>
<polygon fill="#000000" stroke="#000000" points="2654.0001,-63.8427 2650.5,-53.8427 2647.0001,-63.8428 2654.0001,-63.8427"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3116,-54.7006 2701,-54.7006 2701,-16.0995 3116,-16.0995 3116,-54.7006"/>
<text text-anchor="middle" x="2908.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> isn&#39;t wrong externally, the internal interface it</text>
<text text-anchor="middle" x="2908.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">presents needs considerable refinement to work correctly.</text>
</g>
<!-- raw_45&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_45&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2722.6878,-447.2155C2711.8899,-390.8953 2686.5679,-215.9021 2762.5,-106.8001 2777.7212,-84.9296 2801.5801,-69.4787 2825.6327,-58.6871"/>
<polygon fill="#000000" stroke="#000000" points="2827.0068,-61.9062 2834.843,-54.7757 2824.2704,-55.4632 2827.0068,-61.9062"/>
</g>
</g>
</svg>