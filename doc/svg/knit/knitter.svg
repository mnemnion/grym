<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4987pt" height="2249pt"
 viewBox="0.00 0.00 4987.00 2248.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2244.6031)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2244.6031 4983,-2244.6031 4983,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1799.5" cy="-2222.6031" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="1799.5" y="-2218.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 90</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1799.5" cy="-2150.6031" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1799.5" y="-2146.4031" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;46</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1799.5,-2204.4344C1799.5,-2196.734 1799.5,-2187.5774 1799.5,-2179.0197"/>
<polygon fill="#000000" stroke="#000000" points="1803.0001,-2179.0163 1799.5,-2169.0164 1796.0001,-2179.0164 1803.0001,-2179.0163"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1349.5" cy="-1727.1025" rx="79.3333" ry="18"/>
<text text-anchor="middle" x="1349.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Knitter Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1741.1018,-2145.4714C1644.4182,-2136.4534 1459.5032,-2116.7966 1437.5,-2096.6031 1338.3481,-2005.6064 1341.3573,-1824.8688 1346.6559,-1755.3027"/>
<polygon fill="#000000" stroke="#000000" points="1350.1616,-1755.3808 1347.5107,-1745.123 1343.1861,-1754.795 1350.1616,-1755.3808"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="1492.5" cy="-1727.1025" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1492.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;7</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1740.9337,-2145.6836C1674.9098,-2138.8738 1573.3745,-2124.1704 1547.5,-2096.6031 1457.1281,-2000.3189 1475.718,-1823.4581 1487.1124,-1755.0988"/>
<polygon fill="#000000" stroke="#000000" points="1490.588,-1755.5413 1488.8616,-1745.0881 1483.6925,-1754.3364 1490.588,-1755.5413"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="1606.5" cy="-1727.1025" rx="50.0142" ry="18"/>
<text text-anchor="middle" x="1606.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 8&#45;11</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.8342,-2142.0005C1717.7093,-2134.6752 1685.1219,-2121.2167 1665.5,-2096.6031 1583.6033,-1993.8722 1594.2818,-1822.849 1602.3782,-1755.5511"/>
<polygon fill="#000000" stroke="#000000" points="1605.8915,-1755.6693 1603.6899,-1745.3058 1598.9482,-1754.7803 1605.8915,-1755.6693"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1730.5" cy="-1727.1025" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1730.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 12&#45;46</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1796.5352,-2132.4058C1785.6977,-2065.8891 1748.1814,-1835.6256 1735.0679,-1755.139"/>
<polygon fill="#000000" stroke="#000000" points="1738.5164,-1754.539 1733.4538,-1745.232 1731.6075,-1755.6648 1738.5164,-1754.539"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1869.5" cy="-1727.1025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1869.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 14&#45;25</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1802.5078,-2132.4058C1813.5023,-2065.8891 1851.5623,-1835.6256 1864.8659,-1755.139"/>
<polygon fill="#000000" stroke="#000000" points="1868.3257,-1755.669 1866.5034,-1745.232 1861.4194,-1754.5274 1868.3257,-1755.669"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2836.5" cy="-1727.1025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2836.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 26&#45;46</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1838.1112,-2136.6553C1867.4087,-2125.9676 1908.6254,-2110.7082 1944.5,-2096.6031 2271.706,-1967.9532 2661.5416,-1802.067 2791.7177,-1746.3278"/>
<polygon fill="#000000" stroke="#000000" points="2793.1839,-1749.5074 2800.9978,-1742.3525 2790.4275,-1743.073 2793.1839,-1749.5074"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="3904.5" cy="-1727.1025" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3904.5" y="-1722.9025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 47&#45;90</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1860.2699,-2150.1051C2061.9686,-2148.0686 2707.9612,-2138.3663 2911.5,-2096.6031 3296.8677,-2017.5312 3731.3876,-1812.6921 3863.9768,-1747.4086"/>
<polygon fill="#000000" stroke="#000000" points="3865.581,-1750.52 3872.9966,-1742.953 3862.4807,-1744.2439 3865.581,-1750.52"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="4522.5,-2096.6036 3988.5,-2096.6036 3988.5,-1357.6015 4522.5,-1357.6015 4522.5,-2096.6036"/>
<text text-anchor="middle" x="4255.5" y="-2081.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Knitter Module</text>
<text text-anchor="middle" x="4255.5" y="-2050.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A knitter is the actor responsible for knitting together our source</text>
<text text-anchor="middle" x="4255.5" y="-2034.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> code. &#160;They are defined by language, which is to say that the unit of </text>
<text text-anchor="middle" x="4255.5" y="-2019.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> action is not a runtime or document, knitters will expand to be </text>
<text text-anchor="middle" x="4255.5" y="-2003.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> responsible for an arbitrary number of these.</text>
<text text-anchor="middle" x="4255.5" y="-1972.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> The bootstrap knitter does what a knitter will do by default: &#160;go through</text>
<text text-anchor="middle" x="4255.5" y="-1957.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> =.../org/*/*.gm= and generate =.../src/*.*.lang= for all code blocks in</text>
<text text-anchor="middle" x="4255.5" y="-1941.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> =#lang=. </text>
<text text-anchor="middle" x="4255.5" y="-1910.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> It must do so through an interface which will let it grow up.</text>
<text text-anchor="middle" x="4255.5" y="-1878.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** An Aside</text>
<text text-anchor="middle" x="4255.5" y="-1847.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;This is the last verb in Grimoire which needs to be written in pure</text>
<text text-anchor="middle" x="4255.5" y="-1832.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> Lua. &#160;Huzzah! Typing &#45;&#45; all the time is tiresome and I didn&#39;t want to</text>
<text text-anchor="middle" x="4255.5" y="-1816.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> patch Sublime just for that.</text>
<text text-anchor="middle" x="4255.5" y="-1785.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> I do intend to design a </text>
<text text-anchor="middle" x="4255.5" y="-1769.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> [syntax highligher for Sublime](etc/Grimoire.sublime_syntax), just</text>
<text text-anchor="middle" x="4255.5" y="-1754.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> a simple minimum&#45;viable that will make editing the Lua inside =grym= </text>
<text text-anchor="middle" x="4255.5" y="-1739.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> pleasant while I polish up femto. </text>
<text text-anchor="middle" x="4255.5" y="-1707.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4255.5" y="-1692.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Design</text>
<text text-anchor="middle" x="4255.5" y="-1660.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;=grym invert= is an isolated module. &#160;It&#39;s a shim; if better tools </text>
<text text-anchor="middle" x="4255.5" y="-1645.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> succeeds, we&#39;ll stop using it within the Arc in fairly short order.</text>
<text text-anchor="middle" x="4255.5" y="-1614.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> =grym knit=, by contrast, is part of the core system. &#160;Software tends</text>
<text text-anchor="middle" x="4255.5" y="-1598.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> to stick around, and a Grimoire is a language&#45;as&#45;in&#45;human&#45;language</text>
<text text-anchor="middle" x="4255.5" y="-1583.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> sort of project. &#160;An advantage we intend to offer over Org is a </text>
<text text-anchor="middle" x="4255.5" y="-1567.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> nice Unix&#45;flavor toolkit for munging flat files from your choice of</text>
<text text-anchor="middle" x="4255.5" y="-1552.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> editor.</text>
<text text-anchor="middle" x="4255.5" y="-1537.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4255.5" y="-1521.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> =knit= methods receive a parsed document, not a string. &#160;The Knitter </text>
<text text-anchor="middle" x="4255.5" y="-1506.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> modules generates language specific transformers for various Nodes,</text>
<text text-anchor="middle" x="4255.5" y="-1490.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> and the Knit module uses them when called for. </text>
<text text-anchor="middle" x="4255.5" y="-1459.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="4255.5" y="-1444.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="4255.5" y="-1412.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local K, k = u.inherit()</text>
<text text-anchor="middle" x="4255.5" y="-1397.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="4255.5" y="-1365.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- section_1&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>section_1&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1860.3281,-2149.8258C2208.1341,-2145.2924 3931.1266,-2121.603 3979.5,-2096.6031 3979.5945,-2096.5543 3979.6889,-2096.5054 3979.7833,-2096.4565"/>
<polygon fill="#000000" stroke="#000000" points="3981.3487,-2099.5888 3988.4964,-2091.7682 3978.0318,-2093.4245 3981.3487,-2099.5888"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-1026.1025 0,-1026.1025 0,-940.9004 513,-940.9004 513,-1026.1025"/>
<text text-anchor="middle" x="256.5" y="-995.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A knitter is the actor responsible for knitting together our source</text>
<text text-anchor="middle" x="256.5" y="-979.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> code. &#160;They are defined by language, which is to say that the unit of </text>
<text text-anchor="middle" x="256.5" y="-964.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> action is not a runtime or document, knitters will expand to be </text>
<text text-anchor="middle" x="256.5" y="-948.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> responsible for an arbitrary number of these.</text>
</g>
<!-- block_3&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_3&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.7069,-1708.8702C1509.5414,-1648.0493 1541.2981,-1450.7131 1437.5,-1357.602 1361.762,-1289.6619 613.1318,-1367.8403 522.5,-1321.602 400.8732,-1259.5508 317.3054,-1113.6983 279.4663,-1035.3806"/>
<polygon fill="#000000" stroke="#000000" points="282.5407,-1033.6961 275.079,-1026.1746 276.2216,-1036.7076 282.5407,-1033.6961"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1065.5,-1010.7019 531.5,-1010.7019 531.5,-956.301 1065.5,-956.301 1065.5,-1010.7019"/>
<text text-anchor="middle" x="798.5" y="-995.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> The bootstrap knitter does what a knitter will do by default: &#160;go through</text>
<text text-anchor="middle" x="798.5" y="-980.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> =.../org/*/*.gm= and generate =.../src/*.*.lang= for all code blocks in</text>
<text text-anchor="middle" x="798.5" y="-964.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> =#lang=. </text>
</g>
<!-- block_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1610.3508,-1708.9855C1622.0249,-1648.5294 1650.2432,-1452.2122 1547.5,-1357.602 1469.9542,-1286.1947 1167.9504,-1370.3807 1074.5,-1321.602 943.3567,-1253.1486 851.7175,-1092.462 815.6024,-1020.0359"/>
<polygon fill="#000000" stroke="#000000" points="818.6292,-1018.2595 811.0752,-1010.8306 812.3478,-1021.3488 818.6292,-1018.2595"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="1533.5,-1001.5015 1083.5,-1001.5015 1083.5,-965.5015 1533.5,-965.5015 1533.5,-1001.5015"/>
<text text-anchor="middle" x="1308.5" y="-980.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> It must do so through an interface which will let it grow up.</text>
</g>
<!-- block_5&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_5&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1733.3321,-1708.9155C1741.4251,-1649.8845 1758.4636,-1461.4609 1665.5,-1357.602 1627.5109,-1315.1606 1588.6905,-1354.932 1542.5,-1321.602 1425.7342,-1237.3466 1347.7005,-1075.9633 1319.8542,-1011.3022"/>
<polygon fill="#000000" stroke="#000000" points="1322.9435,-1009.6221 1315.8177,-1001.7816 1316.4988,-1012.3545 1322.9435,-1009.6221"/>
</g>
<!-- header_12 -->
<g id="node13" class="node">
<title>header_12</title>
<ellipse fill="none" stroke="#000000" cx="1608.5" cy="-983.5015" rx="56.6492" ry="18"/>
<text text-anchor="middle" x="1608.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : An Aside</text>
</g>
<!-- section_6&#45;&gt;header_12 -->
<g id="edge12" class="edge">
<title>section_6&#45;&gt;header_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.7981,-1708.8804C1878.1746,-1649.7419 1889.8665,-1461.0262 1795.5,-1357.602 1757.6825,-1316.1546 1712.2164,-1363.1414 1674.5,-1321.602 1593.9315,-1232.867 1599.06,-1075.8627 1605.087,-1011.8563"/>
<polygon fill="#000000" stroke="#000000" points="1608.5887,-1012.0173 1606.1256,-1001.7128 1601.6251,-1011.3042 1608.5887,-1012.0173"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="1739.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1739.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 14&#45;19</text>
</g>
<!-- section_6&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_6&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1866.3509,-1709.0897C1849.0555,-1610.1599 1765.6231,-1132.9256 1744.4126,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="1747.8356,-1010.8571 1742.6657,-1001.6093 1740.9402,-1012.0627 1747.8356,-1010.8571"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="1869.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1869.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 20&#45;24</text>
</g>
<!-- section_6&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1869.5,-1709.0897C1869.5,-1610.2595 1869.5,-1133.8854 1869.5,-1011.9688"/>
<polygon fill="#000000" stroke="#000000" points="1873.0001,-1011.6093 1869.5,-1001.6093 1866.0001,-1011.6093 1873.0001,-1011.6093"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="1999.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1999.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 25&#45;25</text>
</g>
<!-- section_6&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1872.6491,-1709.0897C1889.9445,-1610.1599 1973.3769,-1132.9256 1994.5874,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="1998.0598,-1012.0627 1996.3343,-1001.6093 1991.1644,-1010.8571 1998.0598,-1012.0627"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2579.5,-1088.5018 2073.5,-1088.5018 2073.5,-878.5012 2579.5,-878.5012 2579.5,-1088.5018"/>
<text text-anchor="middle" x="2326.5" y="-1073.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** An Aside</text>
<text text-anchor="middle" x="2326.5" y="-1041.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;This is the last verb in Grimoire which needs to be written in pure</text>
<text text-anchor="middle" x="2326.5" y="-1026.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Lua. &#160;Huzzah! Typing &#45;&#45; all the time is tiresome and I didn&#39;t want to</text>
<text text-anchor="middle" x="2326.5" y="-1011.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> patch Sublime just for that.</text>
<text text-anchor="middle" x="2326.5" y="-979.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> I do intend to design a </text>
<text text-anchor="middle" x="2326.5" y="-964.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> [syntax highligher for Sublime](etc/Grimoire.sublime_syntax), just</text>
<text text-anchor="middle" x="2326.5" y="-948.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> a simple minimum&#45;viable that will make editing the Lua inside =grym= </text>
<text text-anchor="middle" x="2326.5" y="-933.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> pleasant while I polish up femto. </text>
<text text-anchor="middle" x="2326.5" y="-902.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2326.5" y="-886.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- section_6&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1880.5703,-1709.0897C1931.3579,-1626.4514 2144.3739,-1279.8454 2256.6139,-1097.2157"/>
<polygon fill="#000000" stroke="#000000" points="2259.6272,-1098.997 2261.8814,-1088.6447 2253.6635,-1095.3318 2259.6272,-1098.997"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="2647.5" cy="-983.5015" rx="49.8481" ry="18"/>
<text text-anchor="middle" x="2647.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Design</text>
</g>
<!-- section_7&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_7&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2829.7695,-1709.1699C2808.8424,-1652.8435 2744.0719,-1474.1415 2706.5,-1321.602 2678.5288,-1208.0407 2658.7656,-1069.8599 2651.0674,-1011.5728"/>
<polygon fill="#000000" stroke="#000000" points="2654.5363,-1011.1058 2649.7712,-1001.643 2647.5952,-1012.012 2654.5363,-1011.1058"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="2771.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2771.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 26&#45;30</text>
</g>
<!-- section_7&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_7&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2834.9255,-1709.0897C2826.2778,-1610.1599 2784.5615,-1132.9256 2773.9563,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="2777.4404,-1011.2665 2773.0828,-1001.6093 2770.467,-1011.8761 2777.4404,-1011.2665"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="2901.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2901.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 31&#45;40</text>
</g>
<!-- section_7&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_7&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2838.0745,-1709.0897C2846.7222,-1610.1599 2888.4385,-1132.9256 2899.0437,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="2902.533,-1011.8761 2899.9172,-1001.6093 2895.5596,-1011.2665 2902.533,-1011.8761"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="3031.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3031.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 41&#45;46</text>
</g>
<!-- section_7&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_7&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2843.1172,-1709.1415C2863.713,-1652.732 2927.6201,-1473.8134 2966.5,-1321.602 2995.5363,-1207.9276 3018.2585,-1069.8072 3027.2793,-1011.5543"/>
<polygon fill="#000000" stroke="#000000" points="3030.7447,-1012.0459 3028.8026,-1001.6306 3023.8258,-1010.9837 3030.7447,-1012.0459"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3611.5,-1158.3021 3105.5,-1158.3021 3105.5,-808.7009 3611.5,-808.7009 3611.5,-1158.3021"/>
<text text-anchor="middle" x="3358.5" y="-1143.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Design</text>
<text text-anchor="middle" x="3358.5" y="-1111.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;=grym invert= is an isolated module. &#160;It&#39;s a shim; if better tools </text>
<text text-anchor="middle" x="3358.5" y="-1096.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> succeeds, we&#39;ll stop using it within the Arc in fairly short order.</text>
<text text-anchor="middle" x="3358.5" y="-1065.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> =grym knit=, by contrast, is part of the core system. &#160;Software tends</text>
<text text-anchor="middle" x="3358.5" y="-1049.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> to stick around, and a Grimoire is a language&#45;as&#45;in&#45;human&#45;language</text>
<text text-anchor="middle" x="3358.5" y="-1034.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> sort of project. &#160;An advantage we intend to offer over Org is a </text>
<text text-anchor="middle" x="3358.5" y="-1018.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> nice Unix&#45;flavor toolkit for munging flat files from your choice of</text>
<text text-anchor="middle" x="3358.5" y="-1003.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> editor.</text>
<text text-anchor="middle" x="3358.5" y="-988.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3358.5" y="-972.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> =knit= methods receive a parsed document, not a string. &#160;The Knitter </text>
<text text-anchor="middle" x="3358.5" y="-957.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> modules generates language specific transformers for various Nodes,</text>
<text text-anchor="middle" x="3358.5" y="-941.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> and the Knit module uses them when called for. </text>
<text text-anchor="middle" x="3358.5" y="-910.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3358.5" y="-895.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="3358.5" y="-863.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local K, k = u.inherit()</text>
<text text-anchor="middle" x="3358.5" y="-848.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3358.5" y="-816.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- section_7&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>section_7&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2849.1448,-1709.0897C2900.4248,-1636.0401 3096.4998,-1356.7268 3229.8661,-1166.7434"/>
<polygon fill="#000000" stroke="#000000" points="3232.8909,-1168.5263 3235.7718,-1158.3306 3227.1616,-1164.5043 3232.8909,-1168.5263"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="3697.5" cy="-983.5015" rx="68.2239" ry="18"/>
<text text-anchor="middle" x="3697.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : knit method</text>
</g>
<!-- section_8&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_8&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3898.1063,-1709.0824C3878.1641,-1652.5 3815.9611,-1473.1306 3774.5,-1321.602 3743.3143,-1207.627 3714.6842,-1069.6669 3703.0241,-1011.5053"/>
<polygon fill="#000000" stroke="#000000" points="3706.4364,-1010.7196 3701.0476,-1001.5976 3699.5717,-1012.0891 3706.4364,-1010.7196"/>
</g>
<!-- block_31 -->
<g id="node32" class="node">
<title>block_31</title>
<ellipse fill="none" stroke="#000000" cx="3839.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3839.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;50</text>
</g>
<!-- section_8&#45;&gt;block_31 -->
<g id="edge31" class="edge">
<title>section_8&#45;&gt;block_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3902.9255,-1709.0897C3894.2778,-1610.1599 3852.5615,-1132.9256 3841.9563,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="3845.4404,-1011.2665 3841.0828,-1001.6093 3838.467,-1011.8761 3845.4404,-1011.2665"/>
</g>
<!-- block_32 -->
<g id="node33" class="node">
<title>block_32</title>
<ellipse fill="none" stroke="#000000" cx="3969.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3969.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 51&#45;57</text>
</g>
<!-- section_8&#45;&gt;block_32 -->
<g id="edge32" class="edge">
<title>section_8&#45;&gt;block_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3906.0745,-1709.0897C3914.7222,-1610.1599 3956.4385,-1132.9256 3967.0437,-1011.6016"/>
<polygon fill="#000000" stroke="#000000" points="3970.533,-1011.8761 3967.9172,-1001.6093 3963.5596,-1011.2665 3970.533,-1011.8761"/>
</g>
<!-- block_33 -->
<g id="node34" class="node">
<title>block_33</title>
<ellipse fill="none" stroke="#000000" cx="4221.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="4221.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 58&#45;60</text>
</g>
<!-- section_8&#45;&gt;block_33 -->
<g id="edge33" class="edge">
<title>section_8&#45;&gt;block_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3903.5154,-1709.098C3901.2974,-1652.1676 3901.2654,-1473.008 3979.5,-1357.602 3995.8934,-1333.4196 4014.6238,-1343.0138 4034.5,-1321.602 4125.7133,-1223.3416 4188.4872,-1072.4174 4211.6285,-1010.9615"/>
<polygon fill="#000000" stroke="#000000" points="4214.9217,-1012.1471 4215.1229,-1001.5541 4208.3598,-1009.7096 4214.9217,-1012.1471"/>
</g>
<!-- block_34 -->
<g id="node35" class="node">
<title>block_34</title>
<ellipse fill="none" stroke="#000000" cx="4406.5" cy="-983.5015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="4406.5" y="-979.3015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 61&#45;90</text>
</g>
<!-- section_8&#45;&gt;block_34 -->
<g id="edge34" class="edge">
<title>section_8&#45;&gt;block_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3901.6844,-1709.0365C3893.4212,-1648.7415 3875.9183,-1452.8742 3979.5,-1357.602 4080.6129,-1264.6006 4179.0957,-1407.2607 4286.5,-1321.602 4384.982,-1243.0592 4402.7544,-1077.6037 4405.8758,-1011.5775"/>
<polygon fill="#000000" stroke="#000000" points="4409.3761,-1011.6371 4406.2723,-1001.5071 4402.3815,-1011.3616 4409.3761,-1011.6371"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="4979,-1321.7025 4480,-1321.7025 4480,-645.3004 4979,-645.3004 4979,-1321.7025"/>
<text text-anchor="middle" x="4729.5" y="-1306.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** knit method</text>
<text text-anchor="middle" x="4729.5" y="-1275.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;This is where it all comes together.</text>
<text text-anchor="middle" x="4729.5" y="-1243.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> We&#39;re still bootstrapping. &#160;The only language is lua, we don&#39;t know </text>
<text text-anchor="middle" x="4729.5" y="-1228.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> what hashtags are yet, and we go in simple linear order.</text>
<text text-anchor="middle" x="4729.5" y="-1212.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4729.5" y="-1197.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; knitter : &#160;the knit module. That is, K, rather than a given k in </text>
<text text-anchor="middle" x="4729.5" y="-1182.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;K.langs.</text>
<text text-anchor="middle" x="4729.5" y="-1166.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc &#160;&#160;&#160;&#160;: &#160;a Doc.</text>
<text text-anchor="middle" x="4729.5" y="-1135.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the knit file as a string.</text>
<text text-anchor="middle" x="4729.5" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="4729.5" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">function K.knit(knitter, doc)</text>
<text text-anchor="middle" x="4729.5" y="-1057.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblocks = doc:select(&quot;codeblock&quot;)</text>
<text text-anchor="middle" x="4729.5" y="-1041.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4729.5" y="-1026.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="4729.5" y="-1010.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, cb in ipairs(codeblocks) do</text>
<text text-anchor="middle" x="4729.5" y="-995.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;cb:check()</text>
<text text-anchor="middle" x="4729.5" y="-980.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Pad code with blank lines to line up errors</text>
<text text-anchor="middle" x="4729.5" y="-964.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local pad_count = cb.line_first &#45; linum</text>
<text text-anchor="middle" x="4729.5" y="-933.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local pad = (&quot;\n&quot;):rep(pad_count)</text>
<text text-anchor="middle" x="4729.5" y="-917.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; cat codeblock value</text>
<text text-anchor="middle" x="4729.5" y="-902.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. pad .. cb.val </text>
<text text-anchor="middle" x="4729.5" y="-871.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; update linum</text>
<text text-anchor="middle" x="4729.5" y="-855.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = cb.line_last &#45; 1</text>
<text text-anchor="middle" x="4729.5" y="-840.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4729.5" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4729.5" y="-793.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4729.5" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Knitter, lang)</text>
<text text-anchor="middle" x="4729.5" y="-746.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knitter = setmetatable({}, K)</text>
<text text-anchor="middle" x="4729.5" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knitter.lang = lang or &quot;lua&quot;</text>
<text text-anchor="middle" x="4729.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return knitter</text>
<text text-anchor="middle" x="4729.5" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4729.5" y="-669.001" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(k, new)</text>
<text text-anchor="middle" x="4729.5" y="-653.601" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
</g>
<!-- section_8&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>section_8&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3901.5262,-1708.8606C3892.7625,-1648.0095 3873.8619,-1450.5889 3979.5,-1357.602 4059.5376,-1287.1497 4358.1246,-1369.0495 4470.6757,-1321.3308"/>
<polygon fill="#000000" stroke="#000000" points="4472.2158,-1324.474 4479.7179,-1316.9927 4469.1879,-1318.1627 4472.2158,-1324.474"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1468.5,-571.3012 962.5,-571.3012 962.5,-500.9004 1468.5,-500.9004 1468.5,-571.3012"/>
<text text-anchor="middle" x="1215.5" y="-540.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;This is the last verb in Grimoire which needs to be written in pure</text>
<text text-anchor="middle" x="1215.5" y="-524.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Lua. &#160;Huzzah! Typing &#45;&#45; all the time is tiresome and I didn&#39;t want to</text>
<text text-anchor="middle" x="1215.5" y="-509.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> patch Sublime just for that.</text>
</g>
<!-- block_13&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>block_13&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1742.3229,-965.2767C1749.9498,-908.7448 1764.7265,-734.8024 1674.5,-645.401 1611.2752,-582.7543 1564.2267,-629.4123 1477.5,-609.401 1433.0011,-599.1333 1384.742,-586.1655 1341.9107,-574.0018"/>
<polygon fill="#000000" stroke="#000000" points="1342.8663,-570.6349 1332.2898,-571.2573 1340.946,-577.3664 1342.8663,-570.6349"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1992.5,-570.7021 1486.5,-570.7021 1486.5,-501.4996 1992.5,-501.4996 1992.5,-570.7021"/>
<text text-anchor="middle" x="1739.5" y="-555.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> I do intend to design a </text>
<text text-anchor="middle" x="1739.5" y="-540.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> [syntax highligher for Sublime](etc/Grimoire.sublime_syntax), just</text>
<text text-anchor="middle" x="1739.5" y="-524.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> a simple minimum&#45;viable that will make editing the Lua inside =grym= </text>
<text text-anchor="middle" x="1739.5" y="-509.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> pleasant while I polish up femto. </text>
</g>
<!-- block_14&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>block_14&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1868.2198,-965.3056C1864.1211,-913.6297 1848.8843,-762.1759 1804.5,-645.401 1795.7933,-622.4936 1782.4167,-598.9024 1770.0568,-579.5271"/>
<polygon fill="#000000" stroke="#000000" points="1772.8569,-577.4128 1764.4699,-570.9391 1766.9892,-581.2301 1772.8569,-577.4128"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="2064.5,-554.1008 2010.5,-554.1008 2010.5,-518.1008 2064.5,-518.1008 2064.5,-554.1008"/>
<text text-anchor="middle" x="2037.5" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- block_15&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_15&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2001.0367,-965.4087C2006.9029,-896.3416 2027.9154,-648.9468 2035.0838,-564.5487"/>
<polygon fill="#000000" stroke="#000000" points="2038.5852,-564.6791 2035.9442,-554.4187 2031.6103,-564.0866 2038.5852,-564.6791"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2588.5,-563.4013 2082.5,-563.4013 2082.5,-508.8004 2588.5,-508.8004 2588.5,-563.4013"/>
<text text-anchor="middle" x="2335.5" y="-532.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;=grym invert= is an isolated module. &#160;It&#39;s a shim; if better tools </text>
<text text-anchor="middle" x="2335.5" y="-516.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> succeeds, we&#39;ll stop using it within the Arc in fairly short order.</text>
</g>
<!-- block_21&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_21&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2773.948,-965.2863C2780.3551,-909.5193 2791.6743,-739.225 2706.5,-645.401 2701.8657,-640.296 2550.3793,-596.727 2442.4383,-566.1661"/>
<polygon fill="#000000" stroke="#000000" points="2443.3643,-562.7908 2432.7892,-563.436 2441.4585,-569.5264 2443.3643,-562.7908"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="3112.5,-609.2017 2606.5,-609.2017 2606.5,-463 3112.5,-463 3112.5,-609.2017"/>
<text text-anchor="middle" x="2859.5" y="-594.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> =grym knit=, by contrast, is part of the core system. &#160;Software tends</text>
<text text-anchor="middle" x="2859.5" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> to stick around, and a Grimoire is a language&#45;as&#45;in&#45;human&#45;language</text>
<text text-anchor="middle" x="2859.5" y="-563.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> sort of project. &#160;An advantage we intend to offer over Org is a </text>
<text text-anchor="middle" x="2859.5" y="-548.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> nice Unix&#45;flavor toolkit for munging flat files from your choice of</text>
<text text-anchor="middle" x="2859.5" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> editor.</text>
<text text-anchor="middle" x="2859.5" y="-517.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2859.5" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> =knit= methods receive a parsed document, not a string. &#160;The Knitter </text>
<text text-anchor="middle" x="2859.5" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> modules generates language specific transformers for various Nodes,</text>
<text text-anchor="middle" x="2859.5" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> and the Knit module uses them when called for. </text>
</g>
<!-- block_22&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_22&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2899.8015,-965.4087C2894.4122,-907.9993 2877.4565,-727.3807 2867.3361,-619.5744"/>
<polygon fill="#000000" stroke="#000000" points="2870.7981,-619.0045 2866.3787,-609.3754 2863.8287,-619.6588 2870.7981,-619.0045"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="3207.5" cy="-536.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3207.5" y="-531.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 41&#45;45</text>
</g>
<!-- block_23&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>block_23&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3031.3034,-965.3944C3031.4702,-912.6826 3037.2569,-756.064 3096.5,-645.401 3115.193,-610.4834 3148.8233,-579.7474 3174.1839,-559.8353"/>
<polygon fill="#000000" stroke="#000000" points="3176.6295,-562.3705 3182.4339,-553.5071 3172.3691,-556.8163 3176.6295,-562.3705"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3356.5,-554.1008 3302.5,-554.1008 3302.5,-518.1008 3356.5,-518.1008 3356.5,-554.1008"/>
</g>
<!-- block_23&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_23&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3028.6771,-965.2767C3021.0502,-908.7448 3006.2735,-734.8024 3096.5,-645.401 3159.7248,-582.7543 3222.5102,-663.0891 3293.5,-609.401 3308.1562,-598.3168 3317.1996,-579.6674 3322.5569,-563.9543"/>
<polygon fill="#000000" stroke="#000000" points="3325.9743,-564.7486 3325.5671,-554.1616 3319.2833,-562.6918 3325.9743,-564.7486"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="3313.5,-240.7008 3101.5,-240.7008 3101.5,-186.0999 3313.5,-186.0999 3313.5,-240.7008"/>
<text text-anchor="middle" x="3207.5" y="-225.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="3207.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local K, k = u.inherit()</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3207.5,-517.8264C3207.5,-466.5911 3207.5,-320.7798 3207.5,-251.2185"/>
<polygon fill="#000000" stroke="#000000" points="3211.0001,-251.1317 3207.5,-241.1317 3204.0001,-251.1317 3211.0001,-251.1317"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3664,-556.0029 3375,-556.0029 3375,-516.1987 3664,-516.1987 3664,-556.0029"/>
<text text-anchor="middle" x="3519.5" y="-524.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;This is where it all comes together.</text>
</g>
<!-- block_31&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_31&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3841.7259,-965.4826C3847.4937,-910.2807 3857.1685,-741.4401 3774.5,-645.401 3743.1375,-608.966 3716.9084,-627.813 3672.5,-609.401 3636.5008,-594.4754 3596.8428,-575.3977 3566.9246,-560.4469"/>
<polygon fill="#000000" stroke="#000000" points="3568.4744,-557.3086 3557.9672,-555.9486 3565.3329,-563.5641 3568.4744,-557.3086"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4181,-586.5018 3682,-586.5018 3682,-485.6998 4181,-485.6998 4181,-586.5018"/>
<text text-anchor="middle" x="3931.5" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> We&#39;re still bootstrapping. &#160;The only language is lua, we don&#39;t know </text>
<text text-anchor="middle" x="3931.5" y="-555.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> what hashtags are yet, and we go in simple linear order.</text>
<text text-anchor="middle" x="3931.5" y="-540.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3931.5" y="-524.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; knitter : &#160;the knit module. That is, K, rather than a given k in </text>
<text text-anchor="middle" x="3931.5" y="-509.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;K.langs.</text>
<text text-anchor="middle" x="3931.5" y="-494.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc &#160;&#160;&#160;&#160;: &#160;a Doc.</text>
</g>
<!-- block_32&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_32&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3967.9633,-965.4087C3962.7212,-903.6896 3945.3841,-699.5685 3936.6393,-596.6094"/>
<polygon fill="#000000" stroke="#000000" points="3940.1034,-596.0372 3935.7696,-586.3693 3933.1285,-596.6297 3940.1034,-596.0372"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4488,-556.0029 4199,-556.0029 4199,-516.1987 4488,-516.1987 4488,-556.0029"/>
<text text-anchor="middle" x="4343.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the knit file as a string.</text>
</g>
<!-- block_33&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_33&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4226.4336,-965.4087C4245.1773,-896.6716 4312.0849,-651.3068 4335.4097,-565.7696"/>
<polygon fill="#000000" stroke="#000000" points="4338.84,-566.4936 4338.0942,-555.9251 4332.0866,-564.652 4338.84,-566.4936"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="4583.5" cy="-536.1008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4583.5" y="-531.9008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;89</text>
</g>
<!-- block_34&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>block_34&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4406.1888,-965.3711C4406.0341,-912.5962 4410.9536,-755.8235 4470.5,-645.401 4481.2029,-625.5536 4525.1655,-585.7925 4554.9942,-560.0926"/>
<polygon fill="#000000" stroke="#000000" points="4557.2991,-562.7267 4562.6184,-553.5639 4552.7461,-557.4097 4557.2991,-562.7267"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="4732.5,-554.1008 4678.5,-554.1008 4678.5,-518.1008 4732.5,-518.1008 4732.5,-554.1008"/>
</g>
<!-- block_34&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>block_34&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4403.6087,-965.2767C4395.7722,-908.7447 4380.3707,-734.8022 4470.5,-645.401 4534.312,-582.1044 4597.7645,-663.5529 4669.5,-609.401 4684.166,-598.3298 4693.2094,-579.6803 4698.5641,-563.9639"/>
<polygon fill="#000000" stroke="#000000" points="4701.9823,-564.7555 4701.5723,-554.1686 4695.2907,-562.7004 4701.9823,-564.7555"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="4780.5,-426.7011 4386.5,-426.7011 4386.5,-.0996 4780.5,-.0996 4780.5,-426.7011"/>
<text text-anchor="middle" x="4583.5" y="-411.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">function K.knit(knitter, doc)</text>
<text text-anchor="middle" x="4583.5" y="-396.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblocks = doc:select(&quot;codeblock&quot;)</text>
<text text-anchor="middle" x="4583.5" y="-380.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4583.5" y="-365.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="4583.5" y="-350.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, cb in ipairs(codeblocks) do</text>
<text text-anchor="middle" x="4583.5" y="-334.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;cb:check()</text>
<text text-anchor="middle" x="4583.5" y="-319.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Pad code with blank lines to line up errors</text>
<text text-anchor="middle" x="4583.5" y="-303.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local pad_count = cb.line_first &#45; linum</text>
<text text-anchor="middle" x="4583.5" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local pad = (&quot;\n&quot;):rep(pad_count)</text>
<text text-anchor="middle" x="4583.5" y="-257.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; cat codeblock value</text>
<text text-anchor="middle" x="4583.5" y="-241.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. pad .. cb.val </text>
<text text-anchor="middle" x="4583.5" y="-210.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; update linum</text>
<text text-anchor="middle" x="4583.5" y="-194.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = cb.line_last &#45; 1</text>
<text text-anchor="middle" x="4583.5" y="-179.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4583.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4583.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4583.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Knitter, lang)</text>
<text text-anchor="middle" x="4583.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local knitter = setmetatable({}, K)</text>
<text text-anchor="middle" x="4583.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knitter.lang = lang or &quot;lua&quot;</text>
<text text-anchor="middle" x="4583.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return knitter</text>
<text text-anchor="middle" x="4583.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4583.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(k, new)</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>codeblock_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4583.5,-517.8264C4583.5,-499.9878 4583.5,-470.6843 4583.5,-437.126"/>
<polygon fill="#000000" stroke="#000000" points="4587.0001,-437.0706 4583.5,-427.0706 4580.0001,-437.0707 4587.0001,-437.0706"/>
</g>
</g>
</svg>