<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4828pt" height="1392pt"
 viewBox="0.00 0.00 4827.50 1391.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1387.6017)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1387.6017 4823.5,-1387.6017 4823.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1365.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="738" y="-1361.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 186</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1293.6017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="738" y="-1289.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;10</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738,-1347.433C738,-1339.7326 738,-1330.576 738,-1322.0183"/>
<polygon fill="#000000" stroke="#000000" points="741.5001,-1322.0149 738,-1312.015 734.5001,-1322.015 741.5001,-1322.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="536" cy="-1221.6017" rx="69.6687" ry="18"/>
<text text-anchor="middle" x="536" y="-1217.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Doc module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M699.0524,-1279.7194C666.9855,-1268.2896 621.2935,-1252.0033 586.433,-1239.5778"/>
<polygon fill="#000000" stroke="#000000" points="587.5028,-1236.2435 576.9081,-1236.1828 585.1525,-1242.8372 587.5028,-1236.2435"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1221.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="656" y="-1217.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M718.5671,-1276.5387C707.3006,-1266.6461 692.9965,-1254.0864 680.9098,-1243.4737"/>
<polygon fill="#000000" stroke="#000000" points="683.1653,-1240.7964 673.3415,-1236.8284 678.5466,-1246.0565 683.1653,-1240.7964"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1221.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="738" y="-1217.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738,-1275.433C738,-1267.7326 738,-1258.576 738,-1250.0183"/>
<polygon fill="#000000" stroke="#000000" points="741.5001,-1250.0149 738,-1240.015 734.5001,-1250.015 741.5001,-1250.0149"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="980" cy="-1221.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="980" y="-1217.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780.9859,-1280.8125C826.6005,-1267.2412 898.001,-1245.9981 941.7337,-1232.9867"/>
<polygon fill="#000000" stroke="#000000" points="942.8378,-1236.3099 951.4245,-1230.1035 940.8416,-1229.6006 942.8378,-1236.3099"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1696" cy="-1221.6017" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1696" y="-1217.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 11&#45;71</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M797.2042,-1289.1521C964.4594,-1276.5818 1440.1957,-1240.8271 1623.1109,-1227.0798"/>
<polygon fill="#000000" stroke="#000000" points="1623.4576,-1230.5637 1633.1672,-1226.324 1622.9329,-1223.5834 1623.4576,-1230.5637"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="589.5,-1167.6017 482.5,-1167.6017 482.5,-1131.6017 589.5,-1131.6017 589.5,-1167.6017"/>
<text text-anchor="middle" x="536" y="-1146.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Doc module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M536,-1203.433C536,-1195.7326 536,-1186.576 536,-1178.0183"/>
<polygon fill="#000000" stroke="#000000" points="539.5001,-1178.0149 536,-1168.015 532.5001,-1178.015 539.5001,-1178.0149"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="646" cy="-1149.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="646" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M653.4766,-1203.433C652.4071,-1195.7326 651.1353,-1186.576 649.9468,-1178.0183"/>
<polygon fill="#000000" stroke="#000000" points="653.3999,-1177.4384 648.5574,-1168.015 646.4664,-1178.4014 653.3999,-1177.4384"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="728" cy="-1149.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="728" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_4&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M735.4766,-1203.433C734.4071,-1195.7326 733.1353,-1186.576 731.9468,-1178.0183"/>
<polygon fill="#000000" stroke="#000000" points="735.3999,-1177.4384 730.5574,-1168.015 728.4664,-1178.4014 735.3999,-1177.4384"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="1017" cy="-1149.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="1017" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_5&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M988.9567,-1204.1725C993.3197,-1195.6823 998.6578,-1185.2945 1003.5015,-1175.8691"/>
<polygon fill="#000000" stroke="#000000" points="1006.6681,-1177.3645 1008.1258,-1166.8704 1000.4421,-1174.1649 1006.6681,-1177.3645"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1403" cy="-1149.6017" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1403" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_6&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1647.2881,-1209.6315C1593.0584,-1196.3054 1505.9284,-1174.8947 1451.7025,-1161.5695"/>
<polygon fill="#000000" stroke="#000000" points="1452.5219,-1158.1668 1441.9756,-1159.1793 1450.8514,-1164.9646 1452.5219,-1158.1668"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1578" cy="-1149.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1578" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1668.9284,-1205.0834C1650.9185,-1194.0943 1627.2285,-1179.6394 1608.5446,-1168.2391"/>
<polygon fill="#000000" stroke="#000000" points="1610.1809,-1165.1374 1599.8214,-1162.9164 1606.5348,-1171.1129 1610.1809,-1165.1374"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="1696" cy="-1149.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1696" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1696,-1203.433C1696,-1195.7326 1696,-1186.576 1696,-1178.0183"/>
<polygon fill="#000000" stroke="#000000" points="1699.5001,-1178.0149 1696,-1168.015 1692.5001,-1178.015 1699.5001,-1178.0149"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="1906" cy="-1149.6017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1906" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;29</text>
</g>
<!-- section_6&#45;&gt;codeblock_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;codeblock_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1736.9886,-1207.5484C1769.9384,-1196.2514 1816.4876,-1180.2917 1852.3938,-1167.981"/>
<polygon fill="#000000" stroke="#000000" points="1853.8945,-1171.1665 1862.2188,-1164.6124 1851.6241,-1164.5449 1853.8945,-1171.1665"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="2417" cy="-1149.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2417" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 31&#45;71</text>
</g>
<!-- section_6&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.161,-1215.4941C1889.6834,-1202.2602 2202.7988,-1170.9921 2344.7722,-1156.8145"/>
<polygon fill="#000000" stroke="#000000" points="2345.5011,-1160.2592 2355.1038,-1155.7827 2344.8055,-1153.2938 2345.5011,-1160.2592"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="3584" cy="-1149.6017" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3584" y="-1145.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 72&#45;186</text>
</g>
<!-- section_6&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1760.4431,-1219.1441C2045.0456,-1208.2906 3189.1014,-1164.6614 3503.6292,-1152.6667"/>
<polygon fill="#000000" stroke="#000000" points="3504.1636,-1156.1489 3514.023,-1152.2703 3503.8968,-1149.154 3504.1636,-1156.1489"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="520,-1072.7031 0,-1072.7031 0,-1016.9001 520,-1016.9001 520,-1072.7031"/>
<text text-anchor="middle" x="260" y="-1025.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Represents a Document, which is generally the same as a file, at first.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M622.7377,-1140.3044C614.9369,-1137.3408 606.1495,-1134.168 598,-1131.6017 530.3941,-1110.3124 453.9896,-1090.3536 390.9475,-1074.9553"/>
<polygon fill="#000000" stroke="#000000" points="391.4917,-1071.4857 380.9478,-1072.5236 389.8376,-1078.2875 391.4917,-1071.4857"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="841.5,-1064.7037 538.5,-1064.7037 538.5,-1024.8995 841.5,-1024.8995 841.5,-1064.7037"/>
<text text-anchor="middle" x="690" y="-1033.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> A document contains an array of blocks. </text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M721.5538,-1131.8238C715.846,-1116.0823 707.4023,-1092.7954 700.6855,-1074.2712"/>
<polygon fill="#000000" stroke="#000000" points="703.9565,-1073.0244 697.2573,-1064.8164 697.3757,-1075.4106 703.9565,-1073.0244"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1324,-1080.102 860,-1080.102 860,-1009.5013 1324,-1009.5013 1324,-1080.102"/>
<text text-anchor="middle" x="1092" y="-1049.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> At some point documents can also contain documents, this is not</text>
<text text-anchor="middle" x="1092" y="-1033.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> currently supported.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1028.7188,-1133.2267C1037.3492,-1121.167 1049.5109,-1104.1731 1060.8694,-1088.3015"/>
<polygon fill="#000000" stroke="#000000" points="1063.7395,-1090.3051 1066.713,-1080.136 1058.047,-1086.2312 1063.7395,-1090.3051"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1428,-1062.8016 1342,-1062.8016 1342,-1026.8016 1428,-1026.8016 1428,-1062.8016"/>
<text text-anchor="middle" x="1385" y="-1041.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_14&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>header_14&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1399.8646,-1131.3469C1397.09,-1115.1922 1392.9981,-1091.3684 1389.8096,-1072.8042"/>
<polygon fill="#000000" stroke="#000000" points="1393.2418,-1072.1104 1388.0994,-1062.8472 1386.3428,-1073.2954 1393.2418,-1072.1104"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1473" cy="-1044.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1473" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_15&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1557.0799,-1135.6624C1542.6799,-1125.5088 1523.5916,-1110.9039 1509,-1095.6017 1501.6918,-1087.9376 1494.7049,-1078.6997 1488.8637,-1070.215"/>
<polygon fill="#000000" stroke="#000000" points="1491.6798,-1068.1291 1483.2258,-1061.7432 1485.8523,-1072.0073 1491.6798,-1068.1291"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1545" cy="-1044.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1545" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_16&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1667.7018,-1140.9271C1642.9056,-1132.3145 1606.8839,-1117.2553 1581,-1095.6017 1572.7544,-1088.7037 1565.4823,-1079.4984 1559.6716,-1070.8196"/>
<polygon fill="#000000" stroke="#000000" points="1562.4591,-1068.678 1554.1658,-1062.0846 1556.5373,-1072.4107 1562.4591,-1068.678"/>
</g>
<!-- prespace_24 -->
<g id="node25" class="node">
<title>prespace_24</title>
<ellipse fill="none" stroke="#000000" cx="1636" cy="-1044.8016" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1636" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_16&#45;&gt;prespace_24 -->
<g id="edge24" class="edge">
<title>prose_16&#45;&gt;prespace_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1686.0922,-1132.2961C1676.5957,-1115.7089 1662.128,-1090.4386 1651.1785,-1071.3134"/>
<polygon fill="#000000" stroke="#000000" points="1654.129,-1069.4226 1646.123,-1062.4832 1648.0542,-1072.9006 1654.129,-1069.4226"/>
</g>
<!-- interpolated_25 -->
<g id="node26" class="node">
<title>interpolated_25</title>
<ellipse fill="none" stroke="#000000" cx="1757" cy="-1044.8016" rx="56.1474" ry="18"/>
<text text-anchor="middle" x="1757" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">interpolated</text>
</g>
<!-- prose_16&#45;&gt;interpolated_25 -->
<g id="edge25" class="edge">
<title>prose_16&#45;&gt;interpolated_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1706.0729,-1132.2961C1715.6695,-1115.8088 1730.2595,-1090.7427 1741.367,-1071.6597"/>
<polygon fill="#000000" stroke="#000000" points="1744.4972,-1073.2393 1746.5029,-1062.836 1738.4474,-1069.7179 1744.4972,-1073.2393"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1858" cy="-1044.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1858" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_16&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1725.4383,-1142.0008C1752.6501,-1133.883 1793.1215,-1118.9349 1822,-1095.6017 1830.45,-1088.7743 1837.8137,-1079.4782 1843.6417,-1070.7041"/>
<polygon fill="#000000" stroke="#000000" points="1846.6147,-1072.5509 1848.9411,-1062.2147 1840.6767,-1068.8442 1846.6147,-1072.5509"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2192.5,-1095.4025 1903.5,-1095.4025 1903.5,-994.2007 2192.5,-994.2007 2192.5,-1095.4025"/>
<text text-anchor="middle" x="2048" y="-1080.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2048" y="-1033.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;lib/node/node&quot;</text>
<text text-anchor="middle" x="2048" y="-1017.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Section = require &quot;Orbit/section&quot;</text>
<text text-anchor="middle" x="2048" y="-1002.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;Orbit/own&quot;</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_17&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1929.4484,-1132.2961C1941.0133,-1123.7608 1955.6934,-1112.9265 1970.7513,-1101.8134"/>
<polygon fill="#000000" stroke="#000000" points="1973.1707,-1104.3779 1979.1383,-1095.6235 1969.0139,-1098.7456 1973.1707,-1104.3779"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="2343" cy="-1044.8016" rx="99.1453" ry="18"/>
<text text-anchor="middle" x="2343" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Metatable for Docs.</text>
</g>
<!-- section_18&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_18&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2404.4469,-1131.8238C2392.6465,-1115.1118 2374.8411,-1089.8956 2361.43,-1070.9025"/>
<polygon fill="#000000" stroke="#000000" points="2364.2419,-1068.8167 2355.6147,-1062.6667 2358.5237,-1072.8544 2364.2419,-1068.8167"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="2492" cy="-1044.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2492" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_18&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2429.7227,-1131.8238C2441.9001,-1114.808 2460.3868,-1088.9758 2474.0579,-1069.8728"/>
<polygon fill="#000000" stroke="#000000" points="2476.9868,-1071.7941 2479.9604,-1061.625 2471.2944,-1067.7202 2476.9868,-1071.7941"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="2684" cy="-1044.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2684" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;69</text>
</g>
<!-- section_18&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_18&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2454.6883,-1134.8087C2501.9166,-1116.2711 2582.958,-1084.4616 2634.969,-1064.0468"/>
<polygon fill="#000000" stroke="#000000" points="2636.2983,-1067.285 2644.3281,-1060.3732 2633.7406,-1060.769 2636.2983,-1067.285"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="3065" cy="-1044.8016" rx="86.074" ry="18"/>
<text text-anchor="middle" x="3065" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Doc Constructor</text>
</g>
<!-- section_19&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_19&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3514.9516,-1145.7438C3434.7017,-1140.0018 3298.8534,-1126.3701 3186,-1095.6017 3158.9532,-1088.2276 3129.9524,-1076.2061 3107.1245,-1065.7084"/>
<polygon fill="#000000" stroke="#000000" points="3108.6031,-1062.5361 3098.0618,-1061.4723 3105.6389,-1068.8775 3108.6031,-1062.5361"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3227" cy="-1044.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3227" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_19&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3519.3812,-1142.3592C3443.4728,-1133.1064 3322.7189,-1115.8433 3282,-1095.6017 3269.1419,-1089.2098 3257.1394,-1078.875 3247.6483,-1069.1903"/>
<polygon fill="#000000" stroke="#000000" points="3249.9902,-1066.5701 3240.6067,-1061.6506 3244.8743,-1071.3479 3249.9902,-1066.5701"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3368" cy="-1044.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3368" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 75&#45;93</text>
</g>
<!-- section_19&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_19&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3546.7497,-1134.237C3522.1576,-1123.8522 3489.3603,-1109.5406 3461,-1095.6017 3442.7501,-1086.632 3422.9225,-1075.9377 3406.2817,-1066.6803"/>
<polygon fill="#000000" stroke="#000000" points="3407.8303,-1063.5361 3397.3949,-1061.7051 3404.4108,-1069.6441 3407.8303,-1063.5361"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="3502" cy="-1044.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3502" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_19&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3570.0898,-1131.8238C3556.716,-1114.7313 3536.3815,-1088.7429 3521.415,-1069.615"/>
<polygon fill="#000000" stroke="#000000" points="3524.0821,-1067.3439 3515.1633,-1061.625 3518.5692,-1071.6575 3524.0821,-1067.3439"/>
</g>
<!-- prose_43 -->
<g id="node44" class="node">
<title>prose_43</title>
<ellipse fill="none" stroke="#000000" cx="3584" cy="-1044.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3584" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_43 -->
<g id="edge43" class="edge">
<title>section_19&#45;&gt;prose_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3584,-1131.3469C3584,-1115.2674 3584,-1091.5899 3584,-1073.0636"/>
<polygon fill="#000000" stroke="#000000" points="3587.5001,-1072.8472 3584,-1062.8472 3580.5001,-1072.8472 3587.5001,-1072.8472"/>
</g>
<!-- codeblock_44 -->
<g id="node45" class="node">
<title>codeblock_44</title>
<ellipse fill="none" stroke="#000000" cx="3817" cy="-1044.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3817" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 106&#45;155</text>
</g>
<!-- section_19&#45;&gt;codeblock_44 -->
<g id="edge44" class="edge">
<title>section_19&#45;&gt;codeblock_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3618.8825,-1133.9121C3659.4167,-1115.6803 3726.4419,-1085.5334 3771.1545,-1065.4223"/>
<polygon fill="#000000" stroke="#000000" points="3772.6552,-1068.5851 3780.3394,-1061.291 3769.7838,-1062.2011 3772.6552,-1068.5851"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="4052" cy="-1044.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4052" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_19&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3649.0542,-1142.5804C3715.9715,-1134.5092 3822.8591,-1119.247 3913,-1095.6017 3949.2367,-1086.0962 3989.2873,-1070.939 4017.0519,-1059.6517"/>
<polygon fill="#000000" stroke="#000000" points="4018.4154,-1062.8754 4026.3338,-1055.8362 4015.754,-1056.401 4018.4154,-1062.8754"/>
</g>
<!-- structure_46 -->
<g id="node47" class="node">
<title>structure_46</title>
<ellipse fill="none" stroke="#000000" cx="4246" cy="-1044.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4246" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_19&#45;&gt;structure_46 -->
<g id="edge46" class="edge">
<title>section_19&#45;&gt;structure_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3653.9073,-1146.9356C3752.7105,-1142.0973 3938.4013,-1129.0602 4093,-1095.6017 4131.7534,-1087.2146 4174.4701,-1072.5531 4204.8958,-1061.1301"/>
<polygon fill="#000000" stroke="#000000" points="4206.2179,-1064.372 4214.3218,-1057.5472 4203.7307,-1057.8287 4206.2179,-1064.372"/>
</g>
<!-- structure_47 -->
<g id="node48" class="node">
<title>structure_47</title>
<ellipse fill="none" stroke="#000000" cx="4408" cy="-1044.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4408" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_19&#45;&gt;structure_47 -->
<g id="edge47" class="edge">
<title>section_19&#45;&gt;structure_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3654.1984,-1147.5465C3809.7863,-1142.4669 4179.3752,-1127.364 4300,-1095.6017 4325.8908,-1088.7842 4353.1592,-1075.9073 4373.8187,-1064.8244"/>
<polygon fill="#000000" stroke="#000000" points="4375.734,-1067.7658 4382.8172,-1059.8868 4372.3666,-1061.629 4375.734,-1067.7658"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4644" cy="-1044.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4644" y="-1040.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 166&#45;185</text>
</g>
<!-- section_19&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_19&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3653.9708,-1147.2037C3833.4584,-1140.747 4306.9774,-1121.7035 4462,-1095.6017 4505.4673,-1088.2829 4553.4443,-1074.652 4589.2222,-1063.3514"/>
<polygon fill="#000000" stroke="#000000" points="4590.5168,-1066.6121 4598.976,-1060.233 4588.3851,-1059.9446 4590.5168,-1066.6121"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1193,-603.4029 1065,-603.4029 1065,-563.5988 1193,-563.5988 1193,-603.4029"/>
<text text-anchor="middle" x="1129" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">«quote endquote»</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1465.1952,-1027.3673C1459.1622,-1015.9882 1449.6926,-1001.8385 1437,-994.0016 1347.094,-938.4898 1278.2126,-1031.1882 1202,-958.0016 1105.201,-865.0458 1115.8949,-684.6635 1124.5682,-613.4544"/>
<polygon fill="#000000" stroke="#000000" points="1128.0598,-613.7443 1125.8732,-603.3776 1121.1178,-612.8452 1128.0598,-613.7443"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1591,-618.7012 1211,-618.7012 1211,-548.3005 1591,-548.3005 1591,-618.7012"/>
<text text-anchor="middle" x="1401" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> In addition to the standard Node fields, a doc has:</text>
<text text-anchor="middle" x="1401" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1401" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: The current block. &#160;This will be in</text>
</g>
<!-- raw_23&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_23&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1539.4433,-1027.0007C1518.7802,-960.8071 1445.9825,-727.6014 1415.0611,-628.5453"/>
<polygon fill="#000000" stroke="#000000" points="1418.3481,-627.3291 1412.0272,-618.8263 1411.6661,-629.415 1418.3481,-627.3291"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-601.5009 1609,-601.5009 1609,-565.5009 1663,-565.5009 1663,-601.5009"/>
<text text-anchor="middle" x="1636" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_24&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_24&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1636,-1026.7181C1636,-956.0307 1636,-698.0588 1636,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="1639.5001,-611.7092 1636,-601.7092 1632.5001,-611.7093 1639.5001,-611.7092"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1760.5,-601.5009 1681.5,-601.5009 1681.5,-565.5009 1760.5,-565.5009 1760.5,-601.5009"/>
<text text-anchor="middle" x="1721" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">doc[#doc]</text>
</g>
<!-- interpolated_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>interpolated_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1755.5888,-1026.7181C1750.0723,-956.0307 1729.9401,-698.0588 1723.2089,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="1726.6885,-611.4066 1722.421,-601.7092 1719.7097,-611.9513 1726.6885,-611.4066"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2243,-626.1019 1779,-626.1019 1779,-540.8998 2243,-540.8998 2243,-626.1019"/>
<text text-anchor="middle" x="2011" y="-611.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> but may</text>
<text text-anchor="middle" x="2011" y="-595.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;be several layers deep.</text>
<text text-anchor="middle" x="2011" y="-580.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lastOf: An array containing references to the last block of a</text>
<text text-anchor="middle" x="2011" y="-564.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;given level.</text>
</g>
<!-- raw_26&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_26&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1863.904,-1027.0007C1885.3443,-962.3577 1959.6129,-738.435 1993.6794,-635.7231"/>
<polygon fill="#000000" stroke="#000000" points="1997.0215,-636.7645 1996.8475,-626.171 1990.3774,-634.5608 1997.0215,-636.7645"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2438.5,-601.5009 2261.5,-601.5009 2261.5,-565.5009 2438.5,-565.5009 2438.5,-601.5009"/>
<text text-anchor="middle" x="2350" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Metatable for Docs.</text>
</g>
<!-- header_32&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>header_32&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2343.2744,-1026.7181C2344.3471,-956.0307 2348.2616,-698.0588 2349.5705,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="2353.0715,-611.7612 2349.7237,-601.7092 2346.0723,-611.655 2353.0715,-611.7612"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="2484" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2484" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_33&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2491.6864,-1026.7181C2490.4605,-956.0307 2485.9867,-698.0588 2484.4909,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="2487.9887,-611.647 2484.3158,-601.7092 2480.9898,-611.7685 2487.9887,-611.647"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2965,-859.2018 2529,-859.2018 2529,-307.7999 2965,-307.7999 2965,-859.2018"/>
<text text-anchor="middle" x="2747" y="-843.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local D = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="2747" y="-828.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">D.id = &quot;doc&quot;</text>
<text text-anchor="middle" x="2747" y="-797.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__tostring = function (doc)</text>
<text text-anchor="middle" x="2747" y="-781.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2747" y="-766.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(doc) do</text>
<text text-anchor="middle" x="2747" y="-750.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2747" y="-735.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if repr ~= &quot;&quot; and repr ~= &quot;\n&quot; then</text>
<text text-anchor="middle" x="2747" y="-720.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2747" y="-704.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-689.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-657.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase </text>
<text text-anchor="middle" x="2747" y="-642.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2747" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__index = D</text>
<text text-anchor="middle" x="2747" y="-563.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.own = own</text>
<text text-anchor="middle" x="2747" y="-532.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.dotLabel(doc)</text>
<text text-anchor="middle" x="2747" y="-516.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;doc &#45; &quot; .. tostring(doc.linum)</text>
<text text-anchor="middle" x="2747" y="-501.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end </text>
<text text-anchor="middle" x="2747" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.toMarkdown(doc)</text>
<text text-anchor="middle" x="2747" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2747" y="-439.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(doc) do</text>
<text text-anchor="middle" x="2747" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="2747" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="2747" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2747" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method for &quot; .. node.id)</text>
<text text-anchor="middle" x="2747" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2747" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_34&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.4697,-1026.7181C2690.4431,-997.6236 2698.7496,-936.8013 2707.9705,-869.2838"/>
<polygon fill="#000000" stroke="#000000" points="2711.4518,-869.6582 2709.3372,-859.2766 2704.5162,-868.711 2711.4518,-869.6582"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2511,-140.5001 2457,-140.5001 2457,-104.5001 2511,-104.5001 2511,-140.5001"/>
</g>
<!-- raw_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2484,-565.4291C2484,-494.7876 2484,-236.9836 2484,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="2487.5001,-150.6966 2484,-140.6966 2480.5001,-150.6967 2487.5001,-150.6966"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3132.5,-601.5009 2983.5,-601.5009 2983.5,-565.5009 3132.5,-565.5009 3132.5,-601.5009"/>
<text text-anchor="middle" x="3058" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Doc Constructor</text>
</g>
<!-- header_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>header_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3064.7256,-1026.7181C3063.6529,-956.0307 3059.7384,-698.0588 3058.4295,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="3061.9277,-611.655 3058.2763,-601.7092 3054.9285,-611.7612 3061.9277,-611.655"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="3178" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3178" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_40&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3223.98,-1026.5515C3221.1458,-1009.0131 3216.9173,-981.7459 3214,-958.0016 3198.1832,-829.2645 3185.2432,-674.9117 3180.2339,-612.1439"/>
<polygon fill="#000000" stroke="#000000" points="3183.6976,-611.5459 3179.4185,-601.8537 3176.7195,-612.099 3183.6976,-611.5459"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3456.5,-719.1016 3223.5,-719.1016 3223.5,-447.9001 3456.5,-447.9001 3456.5,-719.1016"/>
<text text-anchor="middle" x="3340" y="-704.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local d = {}</text>
<text text-anchor="middle" x="3340" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.parentOf(doc, level)</text>
<text text-anchor="middle" x="3340" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local i = level &#45; 1</text>
<text text-anchor="middle" x="3340" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parent = nil</text>
<text text-anchor="middle" x="3340" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while i &gt;= 0 do</text>
<text text-anchor="middle" x="3340" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;parent = doc.lastOf[i]</text>
<text text-anchor="middle" x="3340" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent then</text>
<text text-anchor="middle" x="3340" y="-564.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return parent</text>
<text text-anchor="middle" x="3340" y="-548.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3340" y="-533.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="3340" y="-518.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3340" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3340" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3340" y="-455.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>codeblock_41&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3366.9024,-1026.7181C3363.929,-977.7326 3355.4966,-838.8073 3348.8568,-729.4163"/>
<polygon fill="#000000" stroke="#000000" points="3352.3399,-729.0308 3348.2404,-719.2612 3345.3528,-729.4549 3352.3399,-729.0308"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="3502" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3502" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_42&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3502,-1026.7181C3502,-956.0307 3502,-698.0588 3502,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="3505.5001,-611.7092 3502,-601.7092 3498.5001,-611.7093 3505.5001,-611.7092"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="3574" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3574" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_43&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_43&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3583.608,-1026.7181C3582.0756,-956.0307 3576.4834,-698.0588 3574.6136,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="3578.1107,-611.631 3574.3947,-601.7092 3571.1124,-611.7828 3578.1107,-611.631"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4202.5,-958.0023 3619.5,-958.0023 3619.5,-208.9995 4202.5,-208.9995 4202.5,-958.0023"/>
<text text-anchor="middle" x="3911" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addSection(doc, section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id == &quot;section&quot;, &quot;type of putative section is &quot; .. section.id)</text>
<text text-anchor="middle" x="3911" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.first, &quot;no first in section at line &quot; .. tostring(linum))</text>
<text text-anchor="middle" x="3911" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(type(finish) == &quot;number&quot;, &quot;finish is of type &quot; .. type(finish))</text>
<text text-anchor="middle" x="3911" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not doc.latest then</text>
<text text-anchor="middle" x="3911" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = &#160;section</text>
<text text-anchor="middle" x="3911" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="3911" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="3911" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish &#160;&#160;</text>
<text text-anchor="middle" x="3911" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-773.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local atLevel = doc.latest.level </text>
<text text-anchor="middle" x="3911" y="-758.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if atLevel &lt; section.level then</text>
<text text-anchor="middle" x="3911" y="-742.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add the section under the latest section</text>
<text text-anchor="middle" x="3911" y="-727.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local parent = doc:parentOf(section.level)</text>
<text text-anchor="middle" x="3911" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent.id == &quot;doc&quot; then</text>
<text text-anchor="middle" x="3911" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.level == 1 and doc.latest.level == 1 then</text>
<text text-anchor="middle" x="3911" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[#doc + 1] = section</text>
<text text-anchor="middle" x="3911" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parent:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-527.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-511.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = section</text>
<text text-anchor="middle" x="3911" y="-496.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf[section.level] = section</text>
<text text-anchor="middle" x="3911" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3911" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3911" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addLine(doc, line, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-402.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.latest then</text>
<text text-anchor="middle" x="3911" y="-387.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3911" y="-371.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3911" y="-356.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-341.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; a virtual zero block</text>
<text text-anchor="middle" x="3911" y="-325.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = Section(0, linum, 1, #line, doc.str)</text>
<text text-anchor="middle" x="3911" y="-310.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest = doc[1]</text>
<text text-anchor="middle" x="3911" y="-294.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3911" y="-279.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3911" y="-264.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-232.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3911" y="-217.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_44&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>codeblock_44&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3820.6849,-1026.7181C3823.4268,-1013.2624 3827.5515,-993.0204 3832.5546,-968.4684"/>
<polygon fill="#000000" stroke="#000000" points="3836.0249,-968.9665 3834.5921,-958.469 3829.1659,-967.5687 3836.0249,-968.9665"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="4248" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="4248" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_45&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_45&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4081.7103,-1037.8123C4119.0002,-1027.3381 4181.7331,-1003.7203 4212,-958.0016 4284.9205,-847.8537 4265.0938,-678.0118 4253.5511,-611.5371"/>
<polygon fill="#000000" stroke="#000000" points="4256.9455,-610.6396 4251.7178,-601.4244 4250.0578,-611.8883 4256.9455,-610.6396"/>
</g>
<!-- handleline_60 -->
<g id="node61" class="node">
<title>handleline_60</title>
<ellipse fill="none" stroke="#000000" cx="4343" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4343" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_46&#45;&gt;handleline_60 -->
<g id="edge60" class="edge">
<title>structure_46&#45;&gt;handleline_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4255.4016,-1027.0202C4264.1018,-1009.8211 4276.7521,-982.7906 4284,-958.0016 4320.8428,-831.9933 4336.0908,-674.9957 4341.0289,-611.7944"/>
<polygon fill="#000000" stroke="#000000" points="4344.5212,-612.0268 4341.7846,-601.7915 4337.5411,-611.4994 4344.5212,-612.0268"/>
</g>
<!-- handleline_63 -->
<g id="node64" class="node">
<title>handleline_63</title>
<ellipse fill="none" stroke="#000000" cx="4462" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4462" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_47&#45;&gt;handleline_63 -->
<g id="edge63" class="edge">
<title>structure_47&#45;&gt;handleline_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4410.1169,-1026.7181C4418.3916,-956.0307 4448.5898,-698.0588 4458.6866,-611.8059"/>
<polygon fill="#000000" stroke="#000000" points="4462.182,-612.0484 4459.8685,-601.7092 4455.2295,-611.2345 4462.182,-612.0484"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4819.5,-727.0013 4530.5,-727.0013 4530.5,-440.0004 4819.5,-440.0004 4819.5,-727.0013"/>
<text text-anchor="middle" x="4675" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Doc, str)</text>
<text text-anchor="middle" x="4675" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc = setmetatable({}, D)</text>
<text text-anchor="middle" x="4675" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.str = str</text>
<text text-anchor="middle" x="4675" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.first = 1</text>
<text text-anchor="middle" x="4675" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.last = #str</text>
<text text-anchor="middle" x="4675" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = nil</text>
<text text-anchor="middle" x="4675" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lines = {}</text>
<text text-anchor="middle" x="4675" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf = {}</text>
<text text-anchor="middle" x="4675" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; for now lets set root to &#39;false&#39;</text>
<text text-anchor="middle" x="4675" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.root = false</text>
<text text-anchor="middle" x="4675" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc:own(str)</text>
<text text-anchor="middle" x="4675" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4675" y="-511.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">setmetatable(D, Node)</text>
<text text-anchor="middle" x="4675" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">d[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="4675" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, d)</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_48&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4645.2152,-1026.7181C4648.4284,-978.9037 4657.4001,-845.3986 4664.6638,-737.3112"/>
<polygon fill="#000000" stroke="#000000" points="4668.1603,-737.4781 4665.3388,-727.2659 4661.1761,-737.0086 4668.1603,-737.4781"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3205,-142.5001 3151,-142.5001 3151,-102.5001 3205,-102.5001 3205,-142.5001"/>
</g>
<!-- raw_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>raw_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3178,-565.4291C3178,-495.3549 3178,-241.112 3178,-152.8963"/>
<polygon fill="#000000" stroke="#000000" points="3181.5001,-152.75 3178,-142.75 3174.5001,-152.75 3181.5001,-152.75"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="3684.5,-173.0002 3255.5,-173.0002 3255.5,-71.9999 3684.5,-71.9999 3684.5,-173.0002"/>
<text text-anchor="middle" x="3470" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> This function looks at document level and places the block</text>
<text text-anchor="middle" x="3470" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> accordingly.</text>
<text text-anchor="middle" x="3470" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3470" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc : the document</text>
<text text-anchor="middle" x="3470" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; block : block to be appended</text>
</g>
<!-- raw_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3500.7456,-565.4291C3496.3618,-502.276 3481.5948,-289.5376 3474.2382,-183.5564"/>
<polygon fill="#000000" stroke="#000000" points="3477.7127,-183.0672 3473.5286,-173.3336 3470.7295,-183.552 3477.7127,-183.0672"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3873,-150.4016 3703,-150.4016 3703,-94.5986 3873,-94.5986 3873,-150.4016"/>
<text text-anchor="middle" x="3788" y="-119.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns: the document</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3570.0094,-565.6902C3558.1161,-507.7673 3528.6272,-321.9732 3611,-209.0002 3634.6896,-176.5103 3657.8132,-190.5303 3694,-173.0002 3705.4452,-167.4557 3717.5115,-161.2535 3729.0429,-155.1449"/>
<polygon fill="#000000" stroke="#000000" points="3730.9811,-158.0777 3738.1541,-150.2803 3727.6842,-151.9027 3730.9811,-158.0777"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4302,-142.4022 4146,-142.4022 4146,-102.598 4302,-102.598 4302,-142.4022"/>
<text text-anchor="middle" x="4224" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Creates a Doc Node.</text>
</g>
<!-- raw_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>raw_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4247.0592,-565.4291C4243.4027,-495.1951 4230.1146,-239.9515 4225.5512,-152.2954"/>
<polygon fill="#000000" stroke="#000000" points="4229.0423,-152.0319 4225.027,-142.2274 4222.0517,-152.3959 4229.0423,-152.0319"/>
</g>
<!-- handle_61 -->
<g id="node62" class="node">
<title>handle_61</title>
<ellipse fill="none" stroke="#000000" cx="4357" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4357" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_60&#45;&gt;handle_61 -->
<g id="edge61" class="edge">
<title>handleline_60&#45;&gt;handle_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4343.5488,-565.4291C4345.6941,-494.7876 4353.5233,-236.9836 4356.141,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4359.6421,-150.7983 4356.4474,-140.6966 4352.6454,-150.5857 4359.6421,-150.7983"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4384,-36 4330,-36 4330,0 4384,0 4384,-36"/>
</g>
<!-- handle_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>handle_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4357,-104.2976C4357,-88.3618 4357,-64.942 4357,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4360.5001,-46.3445 4357,-36.3446 4353.5001,-46.3446 4360.5001,-46.3445"/>
</g>
<!-- handle_64 -->
<g id="node65" class="node">
<title>handle_64</title>
<ellipse fill="none" stroke="#000000" cx="4462" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4462" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_63&#45;&gt;handle_64 -->
<g id="edge64" class="edge">
<title>handleline_63&#45;&gt;handle_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4462,-565.4291C4462,-494.7876 4462,-236.9836 4462,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4465.5001,-150.6966 4462,-140.6966 4458.5001,-150.6967 4465.5001,-150.6966"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4489,-36 4435,-36 4435,0 4489,0 4489,-36"/>
</g>
<!-- handle_64&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>handle_64&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4462,-104.2976C4462,-88.3618 4462,-64.942 4462,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4465.5001,-46.3445 4462,-36.3446 4458.5001,-46.3446 4465.5001,-46.3445"/>
</g>
</g>
</svg>