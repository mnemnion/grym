<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4828pt" height="1376pt"
 viewBox="0.00 0.00 4827.50 1375.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1371.6017)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1371.6017 4823.5,-1371.6017 4823.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1349.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="738" y="-1345.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 185</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1277.6017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="738" y="-1273.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;10</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738,-1331.433C738,-1323.7326 738,-1314.576 738,-1306.0183"/>
<polygon fill="#000000" stroke="#000000" points="741.5001,-1306.0149 738,-1296.015 734.5001,-1306.015 741.5001,-1306.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="536" cy="-1205.6017" rx="69.6687" ry="18"/>
<text text-anchor="middle" x="536" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Doc module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M699.0524,-1263.7194C666.9855,-1252.2896 621.2935,-1236.0033 586.433,-1223.5778"/>
<polygon fill="#000000" stroke="#000000" points="587.5028,-1220.2435 576.9081,-1220.1828 585.1525,-1226.8372 587.5028,-1220.2435"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="656" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M718.5671,-1260.5387C707.3006,-1250.6461 692.9965,-1238.0864 680.9098,-1227.4737"/>
<polygon fill="#000000" stroke="#000000" points="683.1653,-1224.7964 673.3415,-1220.8284 678.5466,-1230.0565 683.1653,-1224.7964"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="738" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="738" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738,-1259.433C738,-1251.7326 738,-1242.576 738,-1234.0183"/>
<polygon fill="#000000" stroke="#000000" points="741.5001,-1234.0149 738,-1224.015 734.5001,-1234.015 741.5001,-1234.0149"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="980" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="980" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780.9859,-1264.8125C826.6005,-1251.2412 898.001,-1229.9981 941.7337,-1216.9867"/>
<polygon fill="#000000" stroke="#000000" points="942.8378,-1220.3099 951.4245,-1214.1035 940.8416,-1213.6006 942.8378,-1220.3099"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1696" cy="-1205.6017" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1696" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 11&#45;70</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M797.2042,-1273.1521C964.4594,-1260.5818 1440.1957,-1224.8271 1623.1109,-1211.0798"/>
<polygon fill="#000000" stroke="#000000" points="1623.4576,-1214.5637 1633.1672,-1210.324 1622.9329,-1207.5834 1623.4576,-1214.5637"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="589.5,-1151.6017 482.5,-1151.6017 482.5,-1115.6017 589.5,-1115.6017 589.5,-1151.6017"/>
<text text-anchor="middle" x="536" y="-1130.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Doc module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M536,-1187.433C536,-1179.7326 536,-1170.576 536,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="539.5001,-1162.0149 536,-1152.015 532.5001,-1162.015 539.5001,-1162.0149"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="646" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="646" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M653.4766,-1187.433C652.4071,-1179.7326 651.1353,-1170.576 649.9468,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="653.3999,-1161.4384 648.5574,-1152.015 646.4664,-1162.4014 653.3999,-1161.4384"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="728" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="728" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_4&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M735.4766,-1187.433C734.4071,-1179.7326 733.1353,-1170.576 731.9468,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="735.3999,-1161.4384 730.5574,-1152.015 728.4664,-1162.4014 735.3999,-1161.4384"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="1017" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="1017" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_5&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M988.9567,-1188.1725C993.3197,-1179.6823 998.6578,-1169.2945 1003.5015,-1159.8691"/>
<polygon fill="#000000" stroke="#000000" points="1006.6681,-1161.3645 1008.1258,-1150.8704 1000.4421,-1158.1649 1006.6681,-1161.3645"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1403" cy="-1133.6017" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1403" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_6&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1647.2881,-1193.6315C1593.0584,-1180.3054 1505.9284,-1158.8947 1451.7025,-1145.5695"/>
<polygon fill="#000000" stroke="#000000" points="1452.5219,-1142.1668 1441.9756,-1143.1793 1450.8514,-1148.9646 1452.5219,-1142.1668"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1578" cy="-1133.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1578" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1668.9284,-1189.0834C1650.9185,-1178.0943 1627.2285,-1163.6394 1608.5446,-1152.2391"/>
<polygon fill="#000000" stroke="#000000" points="1610.1809,-1149.1374 1599.8214,-1146.9164 1606.5348,-1155.1129 1610.1809,-1149.1374"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="1696" cy="-1133.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1696" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1696,-1187.433C1696,-1179.7326 1696,-1170.576 1696,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="1699.5001,-1162.0149 1696,-1152.015 1692.5001,-1162.015 1699.5001,-1162.0149"/>
</g>
<!-- codeblock_17 -->
<g id="node18" class="node">
<title>codeblock_17</title>
<ellipse fill="none" stroke="#000000" cx="1906" cy="-1133.6017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1906" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;28</text>
</g>
<!-- section_6&#45;&gt;codeblock_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;codeblock_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1736.9886,-1191.5484C1769.9384,-1180.2514 1816.4876,-1164.2917 1852.3938,-1151.981"/>
<polygon fill="#000000" stroke="#000000" points="1853.8945,-1155.1665 1862.2188,-1148.6124 1851.6241,-1148.5449 1853.8945,-1155.1665"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="2417" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2417" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;70</text>
</g>
<!-- section_6&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.161,-1199.4941C1889.6834,-1186.2602 2202.7988,-1154.9921 2344.7722,-1140.8145"/>
<polygon fill="#000000" stroke="#000000" points="2345.5011,-1144.2592 2355.1038,-1139.7827 2344.8055,-1137.2938 2345.5011,-1144.2592"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="3584" cy="-1133.6017" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3584" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 71&#45;185</text>
</g>
<!-- section_6&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1760.4431,-1203.1441C2045.0456,-1192.2906 3189.1014,-1148.6614 3503.6292,-1136.6667"/>
<polygon fill="#000000" stroke="#000000" points="3504.1636,-1140.1489 3514.023,-1136.2703 3503.8968,-1133.154 3504.1636,-1140.1489"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="520,-1064.7031 0,-1064.7031 0,-1008.9001 520,-1008.9001 520,-1064.7031"/>
<text text-anchor="middle" x="260" y="-1017.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Represents a Document, which is generally the same as a file, at first.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M622.7707,-1124.1976C614.972,-1121.2269 606.1776,-1118.0768 598,-1115.6017 536.1324,-1096.876 466.7616,-1080.0067 407.0405,-1066.7262"/>
<polygon fill="#000000" stroke="#000000" points="407.6789,-1063.2829 397.1591,-1064.5419 406.1679,-1070.1179 407.6789,-1063.2829"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="841.5,-1056.7037 538.5,-1056.7037 538.5,-1016.8995 841.5,-1016.8995 841.5,-1056.7037"/>
<text text-anchor="middle" x="690" y="-1025.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> A document contains an array of blocks. </text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M721.0302,-1115.8471C715.6006,-1102.016 707.9445,-1082.5129 701.5958,-1066.3404"/>
<polygon fill="#000000" stroke="#000000" points="704.7555,-1064.8111 697.8434,-1056.7816 698.2396,-1067.369 704.7555,-1064.8111"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1324,-1072.102 860,-1072.102 860,-1001.5013 1324,-1001.5013 1324,-1072.102"/>
<text text-anchor="middle" x="1092" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> At some point documents can also contain documents, this is not</text>
<text text-anchor="middle" x="1092" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> currently supported.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1029.7227,-1117.1809C1037.6137,-1106.9963 1048.1541,-1093.3921 1058.3166,-1080.2756"/>
<polygon fill="#000000" stroke="#000000" points="1061.2104,-1082.2553 1064.5684,-1072.2067 1055.6769,-1077.968 1061.2104,-1082.2553"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1428,-1054.8016 1342,-1054.8016 1342,-1018.8016 1428,-1018.8016 1428,-1054.8016"/>
<text text-anchor="middle" x="1385" y="-1033.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_14&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>header_14&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1399.6143,-1115.3943C1396.9745,-1101.1977 1393.2616,-1081.2309 1390.2389,-1064.9755"/>
<polygon fill="#000000" stroke="#000000" points="1393.6397,-1064.1189 1388.3705,-1054.9273 1386.7577,-1065.3987 1393.6397,-1064.1189"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1473" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1473" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_15&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1557.7751,-1119.4981C1543.5214,-1109.1557 1524.3219,-1094.3925 1509,-1079.6017 1503.0076,-1073.817 1496.989,-1067.1034 1491.6346,-1060.7329"/>
<polygon fill="#000000" stroke="#000000" points="1494.3014,-1058.4651 1485.2595,-1052.9428 1488.8841,-1062.8984 1494.3014,-1058.4651"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1545" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1545" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_16&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1668.1263,-1124.3979C1643.609,-1115.4375 1607.7579,-1100.1654 1581,-1079.6017 1574.2877,-1074.4432 1567.9718,-1067.834 1562.5608,-1061.3605"/>
<polygon fill="#000000" stroke="#000000" points="1565.177,-1059.0262 1556.2292,-1053.3528 1559.6861,-1063.3678 1565.177,-1059.0262"/>
</g>
<!-- prespace_24 -->
<g id="node25" class="node">
<title>prespace_24</title>
<ellipse fill="none" stroke="#000000" cx="1636" cy="-1036.8016" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1636" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_16&#45;&gt;prespace_24 -->
<g id="edge24" class="edge">
<title>prose_16&#45;&gt;prespace_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1685.2732,-1116.2958C1676.1722,-1101.6129 1662.9675,-1080.3092 1652.5181,-1063.4508"/>
<polygon fill="#000000" stroke="#000000" points="1655.2832,-1061.2683 1647.0399,-1054.6126 1649.3334,-1064.9562 1655.2832,-1061.2683"/>
</g>
<!-- interpolated_25 -->
<g id="node26" class="node">
<title>interpolated_25</title>
<ellipse fill="none" stroke="#000000" cx="1757" cy="-1036.8016" rx="56.1474" ry="18"/>
<text text-anchor="middle" x="1757" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">interpolated</text>
</g>
<!-- prose_16&#45;&gt;interpolated_25 -->
<g id="edge25" class="edge">
<title>prose_16&#45;&gt;interpolated_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1706.9056,-1116.2958C1716.1582,-1101.6129 1729.5831,-1080.3092 1740.2066,-1063.4508"/>
<polygon fill="#000000" stroke="#000000" points="1743.4058,-1064.9389 1745.7761,-1054.6126 1737.4836,-1061.2069 1743.4058,-1064.9389"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1858" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1858" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_16&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1725.0076,-1125.4445C1751.9149,-1116.9336 1792.1805,-1101.7196 1822,-1079.6017 1828.7993,-1074.5584 1835.143,-1067.9859 1840.5527,-1061.5108"/>
<polygon fill="#000000" stroke="#000000" points="1843.4359,-1063.5066 1846.8695,-1053.4835 1837.9349,-1059.1777 1843.4359,-1063.5066"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2192.5,-1079.4027 1903.5,-1079.4027 1903.5,-994.2006 2192.5,-994.2006 2192.5,-1079.4027"/>
<text text-anchor="middle" x="2048" y="-1064.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2048" y="-1033.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;lib/node/node&quot;</text>
<text text-anchor="middle" x="2048" y="-1017.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Section = require &quot;Orbit/section&quot;</text>
<text text-anchor="middle" x="2048" y="-1002.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;Orbit/own&quot;</text>
</g>
<!-- codeblock_17&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_17&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1931.0599,-1116.5186C1943.9421,-1107.7369 1960.3604,-1096.5447 1976.7935,-1085.3424"/>
<polygon fill="#000000" stroke="#000000" points="1979.0783,-1088.0208 1985.3696,-1079.4962 1975.1354,-1082.2369 1979.0783,-1088.0208"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="2343" cy="-1036.8016" rx="99.1453" ry="18"/>
<text text-anchor="middle" x="2343" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Metatable for Docs.</text>
</g>
<!-- section_18&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_18&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2403.4273,-1115.8471C2392.1283,-1101.0668 2375.8777,-1079.8093 2363.0741,-1063.0607"/>
<polygon fill="#000000" stroke="#000000" points="2365.5912,-1060.5904 2356.7373,-1054.7715 2360.03,-1064.8417 2365.5912,-1060.5904"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="2492" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2492" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_18&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2430.7562,-1115.8471C2442.4959,-1100.6949 2459.5099,-1078.7356 2472.6272,-1061.8054"/>
<polygon fill="#000000" stroke="#000000" points="2475.725,-1063.5217 2479.083,-1053.4731 2470.1916,-1059.2344 2475.725,-1063.5217"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="2684" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2684" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;68</text>
</g>
<!-- section_18&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_18&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2456.6843,-1119.2143C2503.3583,-1102.2927 2580.9683,-1074.1555 2632.3084,-1055.5423"/>
<polygon fill="#000000" stroke="#000000" points="2633.6839,-1058.7666 2641.8921,-1052.0677 2631.298,-1052.1857 2633.6839,-1058.7666"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="3065" cy="-1036.8016" rx="86.074" ry="18"/>
<text text-anchor="middle" x="3065" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Doc Constructor</text>
</g>
<!-- section_19&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_19&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3515.9639,-1128.6434C3436.0878,-1121.8434 3300.0302,-1107.1951 3186,-1079.6017 3161.6634,-1073.7126 3135.378,-1064.747 3113.5438,-1056.5404"/>
<polygon fill="#000000" stroke="#000000" points="3114.7544,-1053.2562 3104.1637,-1052.9594 3112.2577,-1059.7959 3114.7544,-1053.2562"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3227" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3227" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_19&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3519.9853,-1125.8246C3444.3705,-1116.0021 3323.5976,-1098.134 3282,-1079.6017 3270.8306,-1074.6256 3259.9084,-1066.9081 3250.779,-1059.3892"/>
<polygon fill="#000000" stroke="#000000" points="3252.7997,-1056.5098 3242.9431,-1052.6242 3248.2253,-1061.8084 3252.7997,-1056.5098"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3368" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3368" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 74&#45;92</text>
</g>
<!-- section_19&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_19&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3548.1343,-1118.0542C3523.5604,-1107.353 3490.2472,-1092.7506 3461,-1079.6017 3445.0249,-1072.4196 3427.5677,-1064.4247 3412.1368,-1057.3069"/>
<polygon fill="#000000" stroke="#000000" points="3413.368,-1054.0203 3402.8221,-1053.0036 3410.4322,-1060.3749 3413.368,-1054.0203"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="3502" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3502" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_19&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3568.9599,-1115.8471C3555.9272,-1100.4621 3536.9495,-1078.0592 3522.5228,-1061.0286"/>
<polygon fill="#000000" stroke="#000000" points="3524.9865,-1058.522 3515.8522,-1053.154 3519.6453,-1063.0466 3524.9865,-1058.522"/>
</g>
<!-- prose_43 -->
<g id="node44" class="node">
<title>prose_43</title>
<ellipse fill="none" stroke="#000000" cx="3584" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3584" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_43 -->
<g id="edge43" class="edge">
<title>section_19&#45;&gt;prose_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3584,-1115.3943C3584,-1101.1977 3584,-1081.2309 3584,-1064.9755"/>
<polygon fill="#000000" stroke="#000000" points="3587.5001,-1064.9273 3584,-1054.9273 3580.5001,-1064.9274 3587.5001,-1064.9273"/>
</g>
<!-- codeblock_44 -->
<g id="node45" class="node">
<title>codeblock_44</title>
<ellipse fill="none" stroke="#000000" cx="3817" cy="-1036.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3817" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 105&#45;154</text>
</g>
<!-- section_19&#45;&gt;codeblock_44 -->
<g id="edge44" class="edge">
<title>section_19&#45;&gt;codeblock_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3621.1772,-1118.1564C3661.1563,-1101.547 3724.8699,-1075.0771 3768.7021,-1056.867"/>
<polygon fill="#000000" stroke="#000000" points="3770.1204,-1060.0679 3778.0123,-1052.9991 3767.4347,-1053.6036 3770.1204,-1060.0679"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="4052" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4052" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_19&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_19&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3647.5755,-1125.7787C3714.2138,-1116.9715 3821.7148,-1101.0422 3913,-1079.6017 3948.0281,-1071.3745 3987.129,-1059.0449 4014.9152,-1049.7293"/>
<polygon fill="#000000" stroke="#000000" points="4016.2621,-1052.9685 4024.6118,-1046.4467 4014.0175,-1046.3381 4016.2621,-1052.9685"/>
</g>
<!-- structure_46 -->
<g id="node47" class="node">
<title>structure_46</title>
<ellipse fill="none" stroke="#000000" cx="4246" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4246" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_19&#45;&gt;structure_46 -->
<g id="edge46" class="edge">
<title>section_19&#45;&gt;structure_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3653.2822,-1129.9294C3751.7293,-1123.8804 3937.4276,-1109.3973 4093,-1079.6017 4130.1163,-1072.4931 4171.3287,-1060.7339 4201.621,-1051.3382"/>
<polygon fill="#000000" stroke="#000000" points="4202.9605,-1054.5863 4211.4537,-1048.2527 4200.8645,-1047.9074 4202.9605,-1054.5863"/>
</g>
<!-- structure_47 -->
<g id="node48" class="node">
<title>structure_47</title>
<ellipse fill="none" stroke="#000000" cx="4408" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4408" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_19&#45;&gt;structure_47 -->
<g id="edge47" class="edge">
<title>section_19&#45;&gt;structure_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3654.0653,-1131.007C3809.3797,-1124.8187 4178.4437,-1107.5884 4300,-1079.6017 4324.0936,-1074.0544 4349.877,-1064.0058 4370.2072,-1055.0388"/>
<polygon fill="#000000" stroke="#000000" points="4371.7497,-1058.1827 4379.4276,-1050.882 4368.8727,-1051.8012 4371.7497,-1058.1827"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4644" cy="-1036.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4644" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 165&#45;184</text>
</g>
<!-- section_19&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_19&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3653.9127,-1130.8356C3833.2606,-1123.4936 4306.4723,-1102.5028 4462,-1079.6017 4502.4804,-1073.641 4547.2239,-1063.173 4582.217,-1054.0817"/>
<polygon fill="#000000" stroke="#000000" points="4583.5,-1057.3634 4592.2812,-1051.4354 4581.7199,-1050.5935 4583.5,-1057.3634"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1193,-603.4029 1065,-603.4029 1065,-563.5988 1193,-563.5988 1193,-603.4029"/>
<text text-anchor="middle" x="1129" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">«quote endquote»</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1463.1271,-1019.9662C1456.8361,-1010.7877 1447.8361,-1000.0877 1437,-994.0016 1344.8735,-942.2585 1278.2126,-1031.1882 1202,-958.0016 1105.201,-865.0458 1115.8949,-684.6635 1124.5682,-613.4544"/>
<polygon fill="#000000" stroke="#000000" points="1128.0598,-613.7443 1125.8732,-603.3776 1121.1178,-612.8452 1128.0598,-613.7443"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1591,-618.7012 1211,-618.7012 1211,-548.3005 1591,-548.3005 1591,-618.7012"/>
<text text-anchor="middle" x="1401" y="-587.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> In addition to the standard Node fields, a doc has:</text>
<text text-anchor="middle" x="1401" y="-572.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1401" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: The current block. &#160;This will be in</text>
</g>
<!-- raw_23&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_23&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1539.355,-1019.0317C1518.6176,-953.7519 1446.2446,-725.9275 1415.2569,-628.3805"/>
<polygon fill="#000000" stroke="#000000" points="1418.5778,-627.274 1412.2144,-618.803 1411.9064,-629.3934 1418.5778,-627.274"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-601.5009 1609,-601.5009 1609,-565.5009 1663,-565.5009 1663,-601.5009"/>
<text text-anchor="middle" x="1636" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_24&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prespace_24&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1636,-1018.752C1636,-949.0263 1636,-696.9285 1636,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="1639.5001,-611.6021 1636,-601.6021 1632.5001,-611.6021 1639.5001,-611.6021"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1760.5,-601.5009 1681.5,-601.5009 1681.5,-565.5009 1760.5,-565.5009 1760.5,-601.5009"/>
<text text-anchor="middle" x="1721" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">doc[#doc]</text>
</g>
<!-- interpolated_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>interpolated_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1755.5665,-1018.752C1750.0291,-949.0263 1730.0081,-696.9285 1723.2478,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="1726.7183,-611.2936 1722.4376,-601.6021 1719.7403,-611.8478 1726.7183,-611.2936"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2243,-626.1019 1779,-626.1019 1779,-540.8998 2243,-540.8998 2243,-626.1019"/>
<text text-anchor="middle" x="2011" y="-611.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> but may</text>
<text text-anchor="middle" x="2011" y="-595.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;be several layers deep.</text>
<text text-anchor="middle" x="2011" y="-580.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lastOf: An array containing references to the last block of a</text>
<text text-anchor="middle" x="2011" y="-564.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;given level.</text>
</g>
<!-- raw_26&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_26&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1863.9978,-1019.0317C1885.4654,-955.4285 1959.0138,-737.5229 1993.2299,-636.1494"/>
<polygon fill="#000000" stroke="#000000" points="1996.6319,-637.0141 1996.5138,-626.4199 1989.9995,-634.7754 1996.6319,-637.0141"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2438.5,-601.5009 2261.5,-601.5009 2261.5,-565.5009 2438.5,-565.5009 2438.5,-601.5009"/>
<text text-anchor="middle" x="2350" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Metatable for Docs.</text>
</g>
<!-- header_32&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>header_32&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2343.2787,-1018.752C2344.3555,-949.0263 2348.2484,-696.9285 2349.5629,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2353.0656,-611.655 2349.7205,-601.6021 2346.0664,-611.5468 2353.0656,-611.655"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="2484" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2484" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_33&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2491.6815,-1018.752C2490.4509,-949.0263 2486.0018,-696.9285 2484.4995,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2487.9955,-611.5387 2484.3195,-601.6021 2480.9966,-611.6623 2487.9955,-611.5387"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2965,-859.2018 2529,-859.2018 2529,-307.7999 2965,-307.7999 2965,-859.2018"/>
<text text-anchor="middle" x="2747" y="-843.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local D = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="2747" y="-828.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">D.id = &quot;doc&quot;</text>
<text text-anchor="middle" x="2747" y="-797.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__tostring = function (doc)</text>
<text text-anchor="middle" x="2747" y="-781.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2747" y="-766.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(doc) do</text>
<text text-anchor="middle" x="2747" y="-750.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2747" y="-735.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if repr ~= &quot;&quot; and repr ~= &quot;\n&quot; then</text>
<text text-anchor="middle" x="2747" y="-720.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2747" y="-704.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-689.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-657.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase </text>
<text text-anchor="middle" x="2747" y="-642.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2747" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__index = D</text>
<text text-anchor="middle" x="2747" y="-563.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.own = own</text>
<text text-anchor="middle" x="2747" y="-532.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.dotLabel(doc)</text>
<text text-anchor="middle" x="2747" y="-516.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;doc &#45; &quot; .. tostring(doc.linum)</text>
<text text-anchor="middle" x="2747" y="-501.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end </text>
<text text-anchor="middle" x="2747" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.toMarkdown(doc)</text>
<text text-anchor="middle" x="2747" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2747" y="-439.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(doc) do</text>
<text text-anchor="middle" x="2747" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="2747" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="2747" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2747" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method for &quot; .. node.id)</text>
<text text-anchor="middle" x="2747" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2747" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2747" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_34&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.5086,-1018.752C2690.3995,-990.7553 2698.3769,-933.356 2707.2977,-869.1691"/>
<polygon fill="#000000" stroke="#000000" points="2710.7685,-869.6201 2708.6785,-859.2334 2703.8352,-868.6564 2710.7685,-869.6201"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2511,-140.5001 2457,-140.5001 2457,-104.5001 2511,-104.5001 2511,-140.5001"/>
</g>
<!-- raw_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2484,-565.4291C2484,-494.7876 2484,-236.9836 2484,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="2487.5001,-150.6966 2484,-140.6966 2480.5001,-150.6967 2487.5001,-150.6966"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3132.5,-601.5009 2983.5,-601.5009 2983.5,-565.5009 3132.5,-565.5009 3132.5,-601.5009"/>
<text text-anchor="middle" x="3058" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Doc Constructor</text>
</g>
<!-- header_39&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>header_39&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3064.7213,-1018.752C3063.6445,-949.0263 3059.7516,-696.9285 3058.4371,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3061.9336,-611.5468 3058.2795,-601.6021 3054.9344,-611.655 3061.9336,-611.5468"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="3178" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3178" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_40&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3223.656,-1018.7003C3220.7972,-1002.7618 3216.7252,-978.9002 3214,-958.0016 3197.2285,-829.3854 3184.8149,-674.966 3180.0898,-612.1621"/>
<polygon fill="#000000" stroke="#000000" points="3183.5561,-611.5781 3179.3226,-601.8658 3176.5754,-612.0983 3183.5561,-611.5781"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3456.5,-719.1016 3223.5,-719.1016 3223.5,-447.9001 3456.5,-447.9001 3456.5,-719.1016"/>
<text text-anchor="middle" x="3340" y="-704.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local d = {}</text>
<text text-anchor="middle" x="3340" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.parentOf(doc, level)</text>
<text text-anchor="middle" x="3340" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local i = level &#45; 1</text>
<text text-anchor="middle" x="3340" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parent = nil</text>
<text text-anchor="middle" x="3340" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while i &gt;= 0 do</text>
<text text-anchor="middle" x="3340" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;parent = doc.lastOf[i]</text>
<text text-anchor="middle" x="3340" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent then</text>
<text text-anchor="middle" x="3340" y="-564.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return parent</text>
<text text-anchor="middle" x="3340" y="-548.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3340" y="-533.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="3340" y="-518.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3340" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3340" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3340" y="-455.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>codeblock_41&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3366.8851,-1018.752C3363.9217,-970.7766 3355.6252,-836.4615 3349.0247,-729.6042"/>
<polygon fill="#000000" stroke="#000000" points="3352.5014,-729.1179 3348.3915,-719.3528 3345.5147,-729.5496 3352.5014,-729.1179"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="3502" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3502" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_42&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3502,-1018.752C3502,-949.0263 3502,-696.9285 3502,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3505.5001,-611.6021 3502,-601.6021 3498.5001,-611.6021 3505.5001,-611.6021"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="3574" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3574" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_43&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_43&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3583.6018,-1018.752C3582.0636,-949.0263 3576.5023,-696.9285 3574.6244,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3578.1191,-611.5224 3574.3993,-601.6021 3571.1208,-611.6769 3578.1191,-611.5224"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4202.5,-958.0023 3619.5,-958.0023 3619.5,-208.9995 4202.5,-208.9995 4202.5,-958.0023"/>
<text text-anchor="middle" x="3911" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addSection(doc, section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id == &quot;section&quot;, &quot;type of putative section is &quot; .. section.id)</text>
<text text-anchor="middle" x="3911" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.first, &quot;no first in section at line &quot; .. tostring(linum))</text>
<text text-anchor="middle" x="3911" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(type(finish) == &quot;number&quot;, &quot;finish is of type &quot; .. type(finish))</text>
<text text-anchor="middle" x="3911" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not doc.latest then</text>
<text text-anchor="middle" x="3911" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = &#160;section</text>
<text text-anchor="middle" x="3911" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="3911" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="3911" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish &#160;&#160;</text>
<text text-anchor="middle" x="3911" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-773.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local atLevel = doc.latest.level </text>
<text text-anchor="middle" x="3911" y="-758.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if atLevel &lt; section.level then</text>
<text text-anchor="middle" x="3911" y="-742.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add the section under the latest section</text>
<text text-anchor="middle" x="3911" y="-727.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local parent = doc:parentOf(section.level)</text>
<text text-anchor="middle" x="3911" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent.id == &quot;doc&quot; then</text>
<text text-anchor="middle" x="3911" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.level == 1 and doc.latest.level == 1 then</text>
<text text-anchor="middle" x="3911" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[#doc + 1] = section</text>
<text text-anchor="middle" x="3911" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parent:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-527.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-511.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = section</text>
<text text-anchor="middle" x="3911" y="-496.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf[section.level] = section</text>
<text text-anchor="middle" x="3911" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3911" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3911" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addLine(doc, line, linum, finish)</text>
<text text-anchor="middle" x="3911" y="-402.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.latest then</text>
<text text-anchor="middle" x="3911" y="-387.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3911" y="-371.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3911" y="-356.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3911" y="-341.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; a virtual zero block</text>
<text text-anchor="middle" x="3911" y="-325.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = Section(0, linum, 1, #line, doc.str)</text>
<text text-anchor="middle" x="3911" y="-310.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest = doc[1]</text>
<text text-anchor="middle" x="3911" y="-294.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3911" y="-279.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3911" y="-264.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3911" y="-232.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3911" y="-217.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_44&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>codeblock_44&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3820.7429,-1018.752C3823.2303,-1006.7571 3826.8368,-989.3652 3831.1937,-968.3547"/>
<polygon fill="#000000" stroke="#000000" points="3834.6435,-968.9554 3833.247,-958.453 3827.7893,-967.534 3834.6435,-968.9554"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="4248" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="4248" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_45&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_45&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4082.5979,-1031.0708C4119.9093,-1022.33 4181.7308,-1001.8214 4212,-958.0016 4287.0782,-849.3129 4266,-678.6247 4253.8366,-611.7302"/>
<polygon fill="#000000" stroke="#000000" points="4257.2083,-610.7244 4251.9061,-601.5517 4250.3309,-612.0288 4257.2083,-610.7244"/>
</g>
<!-- handleline_60 -->
<g id="node61" class="node">
<title>handleline_60</title>
<ellipse fill="none" stroke="#000000" cx="4343" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4343" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_46&#45;&gt;handleline_60 -->
<g id="edge60" class="edge">
<title>structure_46&#45;&gt;handleline_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4256.3105,-1019.2633C4265.0102,-1003.6857 4277.116,-980.0373 4284,-958.0016 4323.1476,-832.6901 4337.1088,-675.3035 4341.3661,-611.8964"/>
<polygon fill="#000000" stroke="#000000" points="4344.8625,-612.0636 4342.0106,-601.8598 4337.8769,-611.615 4344.8625,-612.0636"/>
</g>
<!-- handleline_63 -->
<g id="node64" class="node">
<title>handleline_63</title>
<ellipse fill="none" stroke="#000000" cx="4462" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4462" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_47&#45;&gt;handleline_63 -->
<g id="edge63" class="edge">
<title>structure_47&#45;&gt;handleline_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4410.1502,-1018.752C4418.4648,-948.9552 4448.549,-696.4144 4458.6593,-611.5442"/>
<polygon fill="#000000" stroke="#000000" points="4462.1361,-611.9459 4459.8437,-601.6021 4455.1853,-611.1178 4462.1361,-611.9459"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4819.5,-727.0013 4530.5,-727.0013 4530.5,-440.0004 4819.5,-440.0004 4819.5,-727.0013"/>
<text text-anchor="middle" x="4675" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Doc, str)</text>
<text text-anchor="middle" x="4675" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc = setmetatable({}, D)</text>
<text text-anchor="middle" x="4675" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.str = str</text>
<text text-anchor="middle" x="4675" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.first = 1</text>
<text text-anchor="middle" x="4675" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.last = #str</text>
<text text-anchor="middle" x="4675" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = nil</text>
<text text-anchor="middle" x="4675" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lines = {}</text>
<text text-anchor="middle" x="4675" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf = {}</text>
<text text-anchor="middle" x="4675" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; for now lets set root to &#39;false&#39;</text>
<text text-anchor="middle" x="4675" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.root = false</text>
<text text-anchor="middle" x="4675" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc:own(str)</text>
<text text-anchor="middle" x="4675" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4675" y="-511.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">setmetatable(D, Node)</text>
<text text-anchor="middle" x="4675" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">d[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="4675" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, d)</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_48&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4645.2344,-1018.752C4648.4362,-971.9331 4657.2613,-842.887 4664.4767,-737.3784"/>
<polygon fill="#000000" stroke="#000000" points="4667.9792,-737.4604 4665.1697,-727.2449 4660.9955,-736.9827 4667.9792,-737.4604"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3205,-142.5001 3151,-142.5001 3151,-102.5001 3205,-102.5001 3205,-142.5001"/>
</g>
<!-- raw_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>raw_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3178,-565.4291C3178,-495.3549 3178,-241.112 3178,-152.8963"/>
<polygon fill="#000000" stroke="#000000" points="3181.5001,-152.75 3178,-142.75 3174.5001,-152.75 3181.5001,-152.75"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="3684.5,-173.0002 3255.5,-173.0002 3255.5,-71.9999 3684.5,-71.9999 3684.5,-173.0002"/>
<text text-anchor="middle" x="3470" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> This function looks at document level and places the block</text>
<text text-anchor="middle" x="3470" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> accordingly.</text>
<text text-anchor="middle" x="3470" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3470" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc : the document</text>
<text text-anchor="middle" x="3470" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; block : block to be appended</text>
</g>
<!-- raw_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3500.7456,-565.4291C3496.3618,-502.276 3481.5948,-289.5376 3474.2382,-183.5564"/>
<polygon fill="#000000" stroke="#000000" points="3477.7127,-183.0672 3473.5286,-173.3336 3470.7295,-183.552 3477.7127,-183.0672"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3873,-150.4016 3703,-150.4016 3703,-94.5986 3873,-94.5986 3873,-150.4016"/>
<text text-anchor="middle" x="3788" y="-119.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns: the document</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3570.0094,-565.6902C3558.1161,-507.7673 3528.6272,-321.9732 3611,-209.0002 3634.6896,-176.5103 3657.8132,-190.5303 3694,-173.0002 3705.4452,-167.4557 3717.5115,-161.2535 3729.0429,-155.1449"/>
<polygon fill="#000000" stroke="#000000" points="3730.9811,-158.0777 3738.1541,-150.2803 3727.6842,-151.9027 3730.9811,-158.0777"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4302,-142.4022 4146,-142.4022 4146,-102.598 4302,-102.598 4302,-142.4022"/>
<text text-anchor="middle" x="4224" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Creates a Doc Node.</text>
</g>
<!-- raw_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>raw_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4247.0592,-565.4291C4243.4027,-495.1951 4230.1146,-239.9515 4225.5512,-152.2954"/>
<polygon fill="#000000" stroke="#000000" points="4229.0423,-152.0319 4225.027,-142.2274 4222.0517,-152.3959 4229.0423,-152.0319"/>
</g>
<!-- handle_61 -->
<g id="node62" class="node">
<title>handle_61</title>
<ellipse fill="none" stroke="#000000" cx="4357" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4357" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_60&#45;&gt;handle_61 -->
<g id="edge61" class="edge">
<title>handleline_60&#45;&gt;handle_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4343.5488,-565.4291C4345.6941,-494.7876 4353.5233,-236.9836 4356.141,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4359.6421,-150.7983 4356.4474,-140.6966 4352.6454,-150.5857 4359.6421,-150.7983"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4384,-36 4330,-36 4330,0 4384,0 4384,-36"/>
</g>
<!-- handle_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>handle_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4357,-104.2976C4357,-88.3618 4357,-64.942 4357,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4360.5001,-46.3445 4357,-36.3446 4353.5001,-46.3446 4360.5001,-46.3445"/>
</g>
<!-- handle_64 -->
<g id="node65" class="node">
<title>handle_64</title>
<ellipse fill="none" stroke="#000000" cx="4462" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4462" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_63&#45;&gt;handle_64 -->
<g id="edge64" class="edge">
<title>handleline_63&#45;&gt;handle_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4462,-565.4291C4462,-494.7876 4462,-236.9836 4462,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4465.5001,-150.6966 4462,-140.6966 4458.5001,-150.6967 4465.5001,-150.6966"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="4489,-36 4435,-36 4435,0 4489,0 4489,-36"/>
</g>
<!-- handle_64&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>handle_64&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4462,-104.2976C4462,-88.3618 4462,-64.942 4462,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4465.5001,-46.3445 4462,-36.3446 4458.5001,-46.3446 4465.5001,-46.3445"/>
</g>
</g>
</svg>