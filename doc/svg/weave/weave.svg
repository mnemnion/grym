<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2949pt" height="1762pt"
 viewBox="0.00 0.00 2949.00 1761.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1757.8024)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1757.8024 2945,-1757.8024 2945,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1735.8024" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="780" y="-1731.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 148</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1663.8024" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="780" y="-1659.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;55</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780,-1717.6338C780,-1709.9334 780,-1700.7767 780,-1692.219"/>
<polygon fill="#000000" stroke="#000000" points="783.5001,-1692.2156 780,-1682.2157 776.5001,-1692.2157 783.5001,-1692.2156"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="441" cy="-1591.8024" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="441" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.4772,-1655.2105C669.8539,-1645.7184 578.079,-1629.1843 500,-1609.8024 496.1348,-1608.8429 492.1476,-1607.7824 488.1554,-1606.6704"/>
<polygon fill="#000000" stroke="#000000" points="488.8661,-1603.2329 478.288,-1603.8285 486.9287,-1609.9594 488.8661,-1603.2329"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="555" cy="-1591.8024" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="555" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;5</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738.0498,-1650.589C703.6229,-1639.7183 653.6197,-1623.8677 610,-1609.8024 606.7459,-1608.7531 603.385,-1607.6647 600.0032,-1606.5661"/>
<polygon fill="#000000" stroke="#000000" points="601.0811,-1603.2363 590.4887,-1603.4672 598.9132,-1609.8921 601.0811,-1603.2363"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="665" cy="-1591.8024" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="665" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 6&#45;7</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M753.9047,-1647.4645C737.4265,-1637.1477 715.9845,-1623.7231 698.2867,-1612.6428"/>
<polygon fill="#000000" stroke="#000000" points="699.7525,-1609.4311 689.4193,-1607.091 696.0378,-1615.3642 699.7525,-1609.4311"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1591.8024" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="780" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 8&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780,-1645.6338C780,-1637.9334 780,-1628.7767 780,-1620.219"/>
<polygon fill="#000000" stroke="#000000" points="783.5001,-1620.2156 780,-1610.2157 776.5001,-1620.2157 783.5001,-1620.2156"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-1591.8024" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="929" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;48</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M811.9642,-1648.3566C834.46,-1637.4861 864.7373,-1622.8555 888.8602,-1611.1988"/>
<polygon fill="#000000" stroke="#000000" points="890.6277,-1614.232 898.1087,-1606.7297 887.582,-1607.9293 890.6277,-1614.232"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1173" cy="-1591.8024" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1173" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 49&#45;55</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M831.782,-1654.3156C904.7897,-1640.9402 1037.6048,-1616.6076 1114.2256,-1602.5702"/>
<polygon fill="#000000" stroke="#000000" points="1114.9901,-1605.9885 1124.1956,-1600.7437 1113.7286,-1599.1031 1114.9901,-1605.9885"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2034" cy="-1591.8024" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2034" y="-1587.6024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 56&#45;148</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M839.6394,-1660.3781C1044.9115,-1648.5922 1722.3582,-1609.6957 1954.8555,-1596.3466"/>
<polygon fill="#000000" stroke="#000000" points="1955.1437,-1599.8359 1964.9266,-1595.7683 1954.7424,-1592.8474 1955.1437,-1599.8359"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1538.0039 0,-1538.0039 0,-1482.2009 450,-1482.2009 450,-1538.0039"/>
<text text-anchor="middle" x="225" y="-1490.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- block_3&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_3&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M520.2276,-1579.9069C513.5462,-1577.7678 506.5809,-1575.6376 500,-1573.8024 456.4423,-1561.6558 408.5578,-1549.9898 365.1243,-1540.036"/>
<polygon fill="#000000" stroke="#000000" points="365.8777,-1536.618 355.3498,-1537.8075 364.3216,-1543.4429 365.8777,-1536.618"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-1528.1024 468.5,-1528.1024 468.5,-1492.1024 659.5,-1492.1024 659.5,-1528.1024"/>
<text text-anchor="middle" x="564" y="-1506.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- block_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M644.5611,-1575.2692C630.2282,-1563.6751 610.8157,-1547.9721 594.6381,-1534.8859"/>
<polygon fill="#000000" stroke="#000000" points="596.4931,-1531.8847 586.5171,-1528.3167 592.0907,-1537.327 596.4931,-1531.8847"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-1530.0045 678,-1530.0045 678,-1490.2003 834,-1490.2003 834,-1530.0045"/>
<text text-anchor="middle" x="756" y="-1514.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- block_5&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_5&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M774.6736,-1573.6705C771.7257,-1563.6352 767.9898,-1550.9178 764.6356,-1539.4993"/>
<polygon fill="#000000" stroke="#000000" points="767.9921,-1538.5073 761.8155,-1529.8992 761.2759,-1540.4803 767.9921,-1538.5073"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-1510.1024" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="929" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;47</text>
</g>
<!-- block_6&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_6&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M929,-1573.6705C929,-1563.3047 929,-1550.0771 929,-1538.3753"/>
<polygon fill="#000000" stroke="#000000" points="932.5001,-1538.1835 929,-1528.1836 925.5001,-1538.1836 932.5001,-1538.1835"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1078,-1528.1024 1024,-1528.1024 1024,-1492.1024 1078,-1492.1024 1078,-1528.1024"/>
</g>
<!-- block_6&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M955.7698,-1575.8973C972.959,-1565.4646 995.6131,-1551.3021 1015,-1537.8024 1016.6017,-1536.6871 1018.2302,-1535.5285 1019.8654,-1534.3454"/>
<polygon fill="#000000" stroke="#000000" points="1022.0537,-1537.0801 1028.0031,-1528.3133 1017.8852,-1531.4566 1022.0537,-1537.0801"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1173" cy="-1510.1024" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1173" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;53</text>
</g>
<!-- block_7&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>block_7&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173,-1573.6705C1173,-1563.3047 1173,-1550.0771 1173,-1538.3753"/>
<polygon fill="#000000" stroke="#000000" points="1176.5001,-1538.1835 1173,-1528.1836 1169.5001,-1538.1836 1176.5001,-1538.1835"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1322,-1528.1024 1268,-1528.1024 1268,-1492.1024 1322,-1492.1024 1322,-1528.1024"/>
</g>
<!-- block_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>block_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1199.7698,-1575.8973C1216.959,-1565.4646 1239.6131,-1551.3021 1259,-1537.8024 1260.6017,-1536.6871 1262.2302,-1535.5285 1263.8654,-1534.3454"/>
<polygon fill="#000000" stroke="#000000" points="1266.0537,-1537.0801 1272.0031,-1528.3133 1261.8852,-1531.4566 1266.0537,-1537.0801"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1765" cy="-1510.1024" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1765" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1983.5406,-1579.1333C1943.9554,-1568.8814 1887.6099,-1553.5971 1839,-1537.8024 1830.2814,-1534.9695 1821.0719,-1531.728 1812.222,-1528.4843"/>
<polygon fill="#000000" stroke="#000000" points="1813.3932,-1525.1857 1802.8003,-1524.9828 1810.9546,-1531.7472 1813.3932,-1525.1857"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="1904" cy="-1510.1024" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1904" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 56&#45;60</text>
</g>
<!-- section_8&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.3789,-1575.072C1987.4006,-1562.5165 1959.8863,-1545.2248 1938.2654,-1531.6369"/>
<polygon fill="#000000" stroke="#000000" points="1940.0288,-1528.6113 1929.6996,-1526.2536 1936.304,-1534.5381 1940.0288,-1528.6113"/>
</g>
<!-- block_20 -->
<g id="node21" class="node">
<title>block_20</title>
<ellipse fill="none" stroke="#000000" cx="2034" cy="-1510.1024" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2034" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 61&#45;77</text>
</g>
<!-- section_8&#45;&gt;block_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;block_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2034,-1573.6705C2034,-1563.3047 2034,-1550.0771 2034,-1538.3753"/>
<polygon fill="#000000" stroke="#000000" points="2037.5001,-1538.1835 2034,-1528.1836 2030.5001,-1538.1836 2037.5001,-1538.1835"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="2169" cy="-1510.1024" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2169" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;136</text>
</g>
<!-- section_8&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2061.645,-1575.072C2082.3477,-1562.5431 2110.8431,-1545.2981 2133.2737,-1531.7234"/>
<polygon fill="#000000" stroke="#000000" points="2135.1101,-1534.7031 2141.8533,-1526.5312 2131.4858,-1528.7144 2135.1101,-1534.7031"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="2487" cy="-1510.1024" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2487" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 137&#45;145</text>
</g>
<!-- section_8&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2091.8329,-1581.3721C2176.4664,-1566.1081 2333.5833,-1537.7716 2422.0717,-1521.8124"/>
<polygon fill="#000000" stroke="#000000" points="2422.7688,-1525.2433 2431.9887,-1520.0238 2421.5263,-1518.3544 2422.7688,-1525.2433"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2782" cy="-1510.1024" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2782" y="-1505.9024" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 146&#45;148</text>
</g>
<!-- section_8&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2100.3188,-1585.5207C2200.4226,-1575.9256 2396.0637,-1556.7316 2562,-1537.8024 2612.4582,-1532.0464 2669.3351,-1524.8667 2712.6155,-1519.2593"/>
<polygon fill="#000000" stroke="#000000" points="2713.2864,-1522.7017 2722.7522,-1517.9426 2712.3846,-1515.76 2713.2864,-1522.7017"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1038,-1446.6029 714,-1446.6029 714,-893.801 1038,-893.801 1038,-1446.6029"/>
<text text-anchor="middle" x="876" y="-1431.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="876" y="-1399.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="876" y="-1384.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="876" y="-1369.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="876" y="-1353.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="876" y="-1338.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="876" y="-1322.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="876" y="-1307.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="876" y="-1292.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="876" y="-1276.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="876" y="-1261.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="876" y="-1245.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="876" y="-1230.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="876" y="-1199.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="876" y="-1183.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="876" y="-1136.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="876" y="-1104.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="876" y="-1073.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="876" y="-1058.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="876" y="-1042.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="876" y="-1027.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="876" y="-1011.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="876" y="-996.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="876" y="-965.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="876" y="-933.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="876" y="-902.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit(Node)</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M926.1505,-1491.8279C924.7354,-1482.7528 922.8556,-1470.6967 920.6537,-1456.5759"/>
<polygon fill="#000000" stroke="#000000" points="924.0786,-1455.8226 919.0797,-1446.4813 917.1622,-1456.9012 924.0786,-1455.8226"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1289.5,-1197.4024 1056.5,-1197.4024 1056.5,-1143.0015 1289.5,-1143.0015 1289.5,-1197.4024"/>
<text text-anchor="middle" x="1173" y="-1182.102" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1173" y="-1166.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1173" y="-1151.302" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173,-1491.8279C1173,-1438.205 1173,-1280.5003 1173,-1207.7521"/>
<polygon fill="#000000" stroke="#000000" points="1176.5001,-1207.6577 1173,-1197.6577 1169.5001,-1207.6578 1176.5001,-1207.6577"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1820.5,-1197.5024 1307.5,-1197.5024 1307.5,-1142.9015 1820.5,-1142.9015 1820.5,-1197.5024"/>
<text text-anchor="middle" x="1564" y="-1166.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The sh&#45;lib monkeypatches the global metatable, and all we want is one</text>
<text text-anchor="middle" x="1564" y="-1151.002" font-family="Inconsolata" font-size="14.00" fill="#000000">command, so we do something odd here:</text>
</g>
<!-- block_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1883.4508,-1493.2961C1868.3447,-1480.7315 1847.4895,-1462.9413 1830,-1446.4024 1741.9433,-1363.1312 1644.6102,-1258.6193 1595.7237,-1205.1856"/>
<polygon fill="#000000" stroke="#000000" points="1598.1977,-1202.7044 1588.8693,-1197.6812 1593.0291,-1207.4253 1598.1977,-1202.7044"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="1916" cy="-1170.202" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1916" y="-1166.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;75</text>
</g>
<!-- block_20&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>block_20&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2024.0928,-1492.3439C2017.3204,-1479.7631 2008.4398,-1462.3542 2002,-1446.4024 1966.2817,-1357.9249 1936.2133,-1248.6508 1923.0812,-1198.1779"/>
<polygon fill="#000000" stroke="#000000" points="1926.4274,-1197.1372 1920.54,-1188.3287 1919.6493,-1198.886 1926.4274,-1197.1372"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2065,-1188.202 2011,-1188.202 2011,-1152.202 2065,-1152.202 2065,-1188.202"/>
</g>
<!-- block_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2034.2151,-1491.8279C2034.873,-1435.9223 2036.8622,-1266.8845 2037.6618,-1198.9378"/>
<polygon fill="#000000" stroke="#000000" points="2041.1659,-1198.6074 2037.7839,-1188.5668 2034.1664,-1198.5249 2041.1659,-1198.6074"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2165" cy="-1170.202" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2165" y="-1166.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;134</text>
</g>
<!-- block_21&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>block_21&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2168.7849,-1491.8279C2168.127,-1435.9223 2166.1378,-1266.8845 2165.3382,-1198.9378"/>
<polygon fill="#000000" stroke="#000000" points="2168.8336,-1198.5249 2165.2161,-1188.5668 2161.8341,-1198.6074 2168.8336,-1198.5249"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2319,-1188.202 2265,-1188.202 2265,-1152.202 2319,-1152.202 2319,-1188.202"/>
</g>
<!-- block_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2201.6061,-1494.7142C2220.6811,-1483.9412 2243.4186,-1467.67 2256,-1446.4024 2303.2367,-1366.5535 2299.8915,-1251.2608 2295.2493,-1198.4959"/>
<polygon fill="#000000" stroke="#000000" points="2298.7021,-1197.8379 2294.2567,-1188.2208 2291.7345,-1198.511 2298.7021,-1197.8379"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2487" cy="-1170.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2487" y="-1166.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 137&#45;144</text>
</g>
<!-- block_22&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_22&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2487,-1491.8279C2487,-1435.9223 2487,-1266.8845 2487,-1198.9378"/>
<polygon fill="#000000" stroke="#000000" points="2490.5001,-1198.5668 2487,-1188.5668 2483.5001,-1198.5669 2490.5001,-1198.5668"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2646,-1188.202 2592,-1188.202 2592,-1152.202 2646,-1152.202 2646,-1188.202"/>
</g>
<!-- block_22&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_22&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2523.8806,-1495.0368C2544.7067,-1484.5524 2569.2476,-1468.4706 2583,-1446.4024 2632.1697,-1367.5003 2627.7907,-1251.3329 2622.5613,-1198.3728"/>
<polygon fill="#000000" stroke="#000000" points="2626.0338,-1197.9287 2621.4856,-1188.3598 2619.0739,-1198.6765 2626.0338,-1197.9287"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="2782" cy="-1170.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2782" y="-1166.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 146&#45;148</text>
</g>
<!-- block_23&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>block_23&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2782,-1491.8279C2782,-1435.9223 2782,-1266.8845 2782,-1198.9378"/>
<polygon fill="#000000" stroke="#000000" points="2785.5001,-1198.5668 2782,-1188.5668 2778.5001,-1198.5669 2785.5001,-1198.5668"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2941,-1188.202 2887,-1188.202 2887,-1152.202 2941,-1152.202 2941,-1188.202"/>
</g>
<!-- block_23&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_23&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2818.8806,-1495.0368C2839.7067,-1484.5524 2864.2476,-1468.4706 2878,-1446.4024 2927.1697,-1367.5003 2922.7907,-1251.3329 2917.5613,-1198.3728"/>
<polygon fill="#000000" stroke="#000000" points="2921.0338,-1197.9287 2916.4856,-1188.3598 2914.0739,-1198.6765 2921.0338,-1197.9287"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1835.5,-533.3013 1378.5,-533.3013 1378.5,-324.7003 1835.5,-324.7003 1835.5,-533.3013"/>
<text text-anchor="middle" x="1607" y="-518.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="1607" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1607" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local run_dot = dot_sh({__input = dotted})</text>
<text text-anchor="middle" x="1607" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if run_dot.__exitcode == 0 then</text>
<text text-anchor="middle" x="1607" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return tostring(run_dot)</text>
<text text-anchor="middle" x="1607" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1607" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(a.red(&quot;Dot returned &quot;) </text>
<text text-anchor="middle" x="1607" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(run_dot.__exitcode)</text>
<text text-anchor="middle" x="1607" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. a.red(&quot; for &quot; .. out_file ))</text>
<text text-anchor="middle" x="1607" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1607" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1607" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911.2552,-1152.1278C1899.3561,-1107.5745 1866.4996,-989.1889 1829,-894.0016 1780.6073,-771.1636 1714.2283,-635.4121 1666.6851,-542.4628"/>
<polygon fill="#000000" stroke="#000000" points="1669.6758,-540.6243 1661.9996,-533.3217 1663.4464,-543.8173 1669.6758,-540.6243"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2444,-858.0023 1854,-858.0023 1854,.0008 2444,.0008 2444,-858.0023"/>
<text text-anchor="middle" x="2149" y="-842.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2149" y="-827.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2149" y="-812.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2149" y="-796.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2149" y="-781.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="2149" y="-749.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2149" y="-734.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2149" y="-719.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2149" y="-703.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2149" y="-688.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2149" y="-672.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2149" y="-657.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2149" y="-642.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2149" y="-626.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2149" y="-611.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2149" y="-595.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2149" y="-580.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2149" y="-565.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2149" y="-549.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2149" y="-534.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2149" y="-518.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2149" y="-503.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2149" y="-488.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2149" y="-472.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2149" y="-457.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2149" y="-441.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2149" y="-426.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2149" y="-411.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2149" y="-395.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2149" y="-380.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2149" y="-364.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2149" y="-349.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2149" y="-334.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2149" y="-318.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-303.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-287.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-241.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2149" y="-225.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2149" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2149" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2149" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="2149" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2149" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2149" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2149" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2149" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2149" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2149" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2164.6045,-1151.88C2163.6698,-1108.5787 2161.1984,-994.0918 2158.4908,-868.6634"/>
<polygon fill="#000000" stroke="#000000" points="2161.9854,-868.3724 2158.2703,-858.4503 2154.9871,-868.5235 2161.9854,-868.3724"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2744,-479.6017 2462,-479.6017 2462,-378.3999 2744,-378.3999 2744,-479.6017"/>
<text text-anchor="middle" x="2603" y="-464.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2603" y="-449.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2603" y="-401.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2603" y="-386.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2489.8674,-1151.88C2504.2656,-1059.8804 2568.954,-646.5433 2593.5071,-489.6572"/>
<polygon fill="#000000" stroke="#000000" points="2596.977,-490.1213 2595.0654,-479.7004 2590.0612,-489.0389 2596.977,-490.1213"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2834,-447.0008 2762,-447.0008 2762,-411.0008 2834,-411.0008 2834,-447.0008"/>
<text text-anchor="middle" x="2798" y="-425.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2782.3955,-1151.88C2784.5398,-1052.546 2794.7707,-578.5968 2797.3887,-457.3178"/>
<polygon fill="#000000" stroke="#000000" points="2800.8945,-457.0858 2797.6112,-447.0126 2793.8961,-456.9347 2800.8945,-457.0858"/>
</g>
</g>
</svg>