<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2744pt" height="1839pt"
 viewBox="0.00 0.00 2744.00 1838.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1834.8026)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1834.8026 2740,-1834.8026 2740,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="658" cy="-1812.8026" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="658" y="-1808.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 152</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="658" cy="-1740.8026" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="658" y="-1736.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;55</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658,-1794.6339C658,-1786.9335 658,-1777.7769 658,-1769.2192"/>
<polygon fill="#000000" stroke="#000000" points="661.5001,-1769.2158 658,-1759.2158 654.5001,-1769.2159 661.5001,-1769.2158"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="394" cy="-1668.8026" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="394" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M611.453,-1729.0865C569.8117,-1718.4756 507.1665,-1702.1932 453,-1686.8026 449.3881,-1685.7763 445.6588,-1684.6935 441.912,-1683.5889"/>
<polygon fill="#000000" stroke="#000000" points="442.6052,-1680.1433 432.022,-1680.6379 440.6037,-1686.8511 442.6052,-1680.1433"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="494" cy="-1668.8026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="494" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M623.6202,-1725.709C595.8097,-1713.4995 556.8158,-1696.3802 528.8739,-1684.1131"/>
<polygon fill="#000000" stroke="#000000" points="530.0513,-1680.8076 519.4879,-1679.9924 527.2374,-1687.2171 530.0513,-1680.8076"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="576" cy="-1668.8026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="576" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.5671,-1723.7396C627.3006,-1713.8469 612.9965,-1701.2873 600.9098,-1690.6746"/>
<polygon fill="#000000" stroke="#000000" points="603.1653,-1687.9973 593.3415,-1684.0293 598.5466,-1693.2574 603.1653,-1687.9973"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="658" cy="-1668.8026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="658" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658,-1722.6339C658,-1714.9335 658,-1705.7769 658,-1697.2192"/>
<polygon fill="#000000" stroke="#000000" points="661.5001,-1697.2158 658,-1687.2158 654.5001,-1697.2159 661.5001,-1697.2158"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="808" cy="-1668.8026" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="808" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;47</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M690.1788,-1725.3568C711.9896,-1714.8876 741.0665,-1700.9307 764.8769,-1689.5016"/>
<polygon fill="#000000" stroke="#000000" points="766.5506,-1692.5806 774.0513,-1685.0979 763.5215,-1686.27 766.5506,-1692.5806"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1060" cy="-1668.8026" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1060" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;53</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M710.1424,-1731.4636C781.1424,-1718.7472 908.519,-1695.9335 988.4214,-1681.6226"/>
<polygon fill="#000000" stroke="#000000" points="989.1787,-1685.0428 998.405,-1679.8345 987.9445,-1678.1524 989.1787,-1685.0428"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1668.8026" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1584" y="-1664.6026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 56&#45;152</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M716.9806,-1736.2166C878.0645,-1723.6917 1325.4879,-1688.9029 1506.5031,-1674.8282"/>
<polygon fill="#000000" stroke="#000000" points="1506.7816,-1678.3172 1516.4802,-1674.0525 1506.2389,-1671.3383 1506.7816,-1678.3172"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="421,-1356.6022 367,-1356.6022 367,-1320.6022 421,-1320.6022 421,-1356.6022"/>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M394,-1650.5792C394,-1595.8928 394,-1432.9042 394,-1366.8621"/>
<polygon fill="#000000" stroke="#000000" points="397.5001,-1366.7691 394,-1356.7692 390.5001,-1366.7692 397.5001,-1366.7691"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="480" cy="-1338.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="480" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M493.2274,-1650.5792C490.9087,-1595.8928 483.9983,-1432.9042 481.1982,-1366.8621"/>
<polygon fill="#000000" stroke="#000000" points="484.6908,-1366.6119 480.7703,-1356.7692 477.6971,-1366.9085 484.6908,-1366.6119"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1338.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M575.3377,-1650.5792C573.3503,-1595.8928 567.4271,-1432.9042 565.027,-1366.8621"/>
<polygon fill="#000000" stroke="#000000" points="568.5212,-1366.6354 564.6602,-1356.7692 561.5258,-1366.8897 568.5212,-1366.6354"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1338.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656.7858,-1650.5792C653.1423,-1595.8928 642.283,-1432.9042 637.8829,-1366.8621"/>
<polygon fill="#000000" stroke="#000000" points="641.3675,-1366.5144 637.2104,-1356.7692 634.383,-1366.9798 641.3675,-1366.5144"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-1615.0031 681,-1615.0031 681,-1062.2012 1005,-1062.2012 1005,-1615.0031"/>
<text text-anchor="middle" x="843" y="-1599.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="843" y="-1568.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="843" y="-1552.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="843" y="-1537.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="843" y="-1522.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="843" y="-1506.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="843" y="-1491.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="843" y="-1475.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="843" y="-1460.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="843" y="-1445.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="843" y="-1429.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="843" y="-1414.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="843" y="-1398.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="843" y="-1367.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="843" y="-1352.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="843" y="-1304.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="843" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="843" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="843" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="843" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="843" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="843" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="843" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="843" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="843" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="843" y="-1070.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit(Node)</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M809.9316,-1650.5792C810.6571,-1643.7347 811.5624,-1635.1936 812.6049,-1625.3583"/>
<polygon fill="#000000" stroke="#000000" points="816.1179,-1625.4198 813.6916,-1615.1066 809.1569,-1624.6819 816.1179,-1625.4198"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1256.5,-1365.8026 1023.5,-1365.8026 1023.5,-1311.4017 1256.5,-1311.4017 1256.5,-1365.8026"/>
<text text-anchor="middle" x="1140" y="-1350.5022" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1140" y="-1335.1022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1140" y="-1319.7021" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.4151,-1650.5792C1077.0907,-1598.2607 1113.7823,-1446.8157 1130.9468,-1375.9694"/>
<polygon fill="#000000" stroke="#000000" points="1134.3792,-1376.6659 1133.3324,-1366.1229 1127.576,-1375.0176 1134.3792,-1376.6659"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1340" cy="-1338.6022" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1340" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1529.2851,-1657.2801C1486.2473,-1647.1646 1430.9707,-1631.494 1415,-1614.8026 1348.3376,-1545.1318 1339.6442,-1422.3713 1339.3398,-1367.0474"/>
<polygon fill="#000000" stroke="#000000" points="1342.8401,-1366.93 1339.3761,-1356.9175 1335.8402,-1366.9048 1342.8401,-1366.93"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1456" cy="-1338.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1456" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1545.4763,-1653.5855C1528.2485,-1644.8121 1509.3128,-1632.0505 1498,-1614.8026 1446.8578,-1536.8294 1448.843,-1420.1958 1453.0026,-1366.9458"/>
<polygon fill="#000000" stroke="#000000" points="1456.4987,-1367.1411 1453.8766,-1356.8759 1449.5249,-1366.5358 1456.4987,-1367.1411"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1338.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1584" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;75</text>
</g>
<!-- section_8&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1584,-1650.5792C1584,-1595.8928 1584,-1432.9042 1584,-1366.8621"/>
<polygon fill="#000000" stroke="#000000" points="1587.5001,-1366.7691 1584,-1356.7692 1580.5001,-1366.7692 1587.5001,-1366.7691"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1880" cy="-1338.6022" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1880" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;138</text>
</g>
<!-- section_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1615.7354,-1652.5357C1632.8514,-1642.8967 1653.7366,-1629.6735 1670,-1614.8026 1756.3899,-1535.809 1832.6329,-1417.5852 1864.3523,-1365.2111"/>
<polygon fill="#000000" stroke="#000000" points="1867.4285,-1366.887 1869.5768,-1356.5122 1861.4276,-1363.2829 1867.4285,-1366.887"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2286" cy="-1338.6022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2286" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 141&#45;148</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1652.1902,-1664.0066C1747.6475,-1656.4957 1915.6387,-1640.1423 1971,-1614.8026 2102.4717,-1554.6259 2219.7075,-1421.3548 2265.537,-1364.7988"/>
<polygon fill="#000000" stroke="#000000" points="2268.4943,-1366.7057 2272.0227,-1356.7157 2263.0346,-1362.3249 2268.4943,-1366.7057"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2589" cy="-1338.6022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2589" y="-1334.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 150&#45;152</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1654.5702,-1667.372C1837.8238,-1663.1882 2318.9696,-1649.0405 2382,-1614.8026 2486.2827,-1558.1565 2553.1004,-1423.8575 2578.0098,-1365.9517"/>
<polygon fill="#000000" stroke="#000000" points="2581.251,-1367.273 2581.9113,-1356.6988 2574.8009,-1364.5533 2581.251,-1367.273"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-602.5021 0,-602.5021 0,-530.6997 450,-530.6997 450,-602.5021"/>
<text text-anchor="middle" x="225" y="-539.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M478.0787,-1320.5234C473.0534,-1275.9597 457.9366,-1157.5526 430,-1062.4017 379.5431,-890.5474 289.2236,-697.1305 247.3944,-611.5058"/>
<polygon fill="#000000" stroke="#000000" points="250.4442,-609.7756 242.8992,-602.3375 244.1589,-612.8572 250.4442,-609.7756"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-586.503 468.5,-586.503 468.5,-546.6988 659.5,-546.6988 659.5,-586.503"/>
<text text-anchor="middle" x="564" y="-555.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1320.2803C564,-1218.6647 564,-724.2887 564,-596.6964"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-596.4936 564,-586.4936 560.5001,-596.4937 567.5001,-596.4936"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-594.5024 678,-594.5024 678,-538.6994 834,-538.6994 834,-594.5024"/>
<text text-anchor="middle" x="756" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.1199,-1320.4718C643.3406,-1276.2741 657.4547,-1159.483 672,-1062.4017 697.6789,-891.0094 734.0418,-687.3022 749.0789,-604.4523"/>
<polygon fill="#000000" stroke="#000000" points="752.5436,-604.9619 750.8888,-594.4971 745.6565,-603.7098 752.5436,-604.9619"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1085,-584.6009 1031,-584.6009 1031,-548.6009 1085,-548.6009 1085,-584.6009"/>
</g>
<!-- header_18&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_18&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1341.0052,-1320.5953C1342.6952,-1271.3409 1340.156,-1133.3451 1265,-1062.4017 1208.5218,-1009.0893 1145.2536,-1084.7547 1094,-1026.4017 983.5042,-900.6008 1029.5032,-673.526 1050.0602,-594.5647"/>
<polygon fill="#000000" stroke="#000000" points="1053.4565,-595.4121 1052.6588,-584.8474 1046.6941,-593.6037 1053.4565,-595.4121"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1130" cy="-566.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1130" y="-562.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_19&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1459.7503,-1320.6185C1468.854,-1271.4237 1486.4337,-1133.5657 1415,-1062.4017 1335.7838,-983.4847 1242.4375,-1108.0131 1166,-1026.4017 1107.485,-963.926 1121.6008,-685.0781 1127.843,-594.8611"/>
<polygon fill="#000000" stroke="#000000" points="1131.3387,-595.0452 1128.5598,-584.8213 1124.3564,-594.5467 1131.3387,-595.0452"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1632.5,-670.9014 1175.5,-670.9014 1175.5,-462.3004 1632.5,-462.3004 1632.5,-670.9014"/>
<text text-anchor="middle" x="1404" y="-655.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="1404" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1404" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local run_dot = dot_sh({__input = dotted})</text>
<text text-anchor="middle" x="1404" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if run_dot.__exitcode == 0 then</text>
<text text-anchor="middle" x="1404" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return tostring(run_dot)</text>
<text text-anchor="middle" x="1404" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1404" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(a.red(&quot;Dot returned &quot;) </text>
<text text-anchor="middle" x="1404" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(run_dot.__exitcode)</text>
<text text-anchor="middle" x="1404" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. a.red(&quot; for &quot; .. out_file ))</text>
<text text-anchor="middle" x="1404" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1404" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1404" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1579.7281,-1320.2803C1559.7615,-1234.6458 1474.7582,-870.0753 1430.71,-681.1571"/>
<polygon fill="#000000" stroke="#000000" points="1434.0648,-680.1317 1428.3855,-671.1877 1427.2477,-681.7212 1434.0648,-680.1317"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2345.5,-1026.2027 1650.5,-1026.2027 1650.5,-106.9991 2345.5,-106.9991 2345.5,-1026.2027"/>
<text text-anchor="middle" x="1998" y="-1011.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="1998" y="-995.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="1998" y="-980.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="1998" y="-965.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="1998" y="-949.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="1998" y="-918.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="1998" y="-902.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="1998" y="-887.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="1998" y="-872.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="1998" y="-856.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="1998" y="-841.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="1998" y="-825.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="1998" y="-810.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="1998" y="-795.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="1998" y="-779.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="1998" y="-764.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="1998" y="-748.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="1998" y="-733.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="1998" y="-718.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="1998" y="-702.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="1998" y="-687.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="1998" y="-671.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="1998" y="-656.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="1998" y="-641.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="1998" y="-625.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="1998" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="1998" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="1998" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1998" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="1998" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="1998" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1998" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;changed = changed or writeOnChange(woven_dot, last_dot, out_dot_name, depth) </text>
<text text-anchor="middle" x="1998" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="1998" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="1998" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="1998" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="1998" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-347.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="1998" y="-332.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1998" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="1998" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="1998" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="1998" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="1998" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="1998" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="1998" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1998" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="1998" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1998" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1882.8005,-1320.2803C1889.3993,-1277.1081 1906.8344,-1163.041 1926.2025,-1036.3274"/>
<polygon fill="#000000" stroke="#000000" points="1929.6688,-1036.8133 1927.7201,-1026.3992 1922.7492,-1035.7555 1929.6688,-1036.8133"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2646,-617.2018 2364,-617.2018 2364,-516 2646,-516 2646,-617.2018"/>
<text text-anchor="middle" x="2505" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2505" y="-586.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2505" y="-539.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2505" y="-524.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2291.1975,-1320.2803C2318.0824,-1225.5078 2441.8839,-789.0928 2487.8003,-627.2318"/>
<polygon fill="#000000" stroke="#000000" points="2491.2183,-628.0074 2490.5804,-617.4318 2484.4841,-626.097 2491.2183,-628.0074"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2736,-584.6009 2664,-584.6009 2664,-548.6009 2736,-548.6009 2736,-584.6009"/>
<text text-anchor="middle" x="2700" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2593.5799,-1320.4337C2605.4719,-1272.6172 2637.6133,-1139.1923 2655,-1026.4017 2680.0477,-863.9127 2693.8343,-666.8486 2698.3348,-594.7508"/>
<polygon fill="#000000" stroke="#000000" points="2701.8351,-594.8527 2698.9548,-584.657 2694.8482,-594.4236 2701.8351,-594.8527"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1386.5,-70.7004 873.5,-70.7004 873.5,-.0997 1386.5,-.0997 1386.5,-70.7004"/>
<text text-anchor="middle" x="1130" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The sh&#45;lib monkeypatches the global metatable, and all we want is one</text>
<text text-anchor="middle" x="1130" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">command, so we do something odd here:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1130,-548.3158C1130,-473.9111 1130,-192.5864 1130,-81.2056"/>
<polygon fill="#000000" stroke="#000000" points="1133.5001,-80.97 1130,-70.97 1126.5001,-80.9701 1133.5001,-80.97"/>
</g>
</g>
</svg>