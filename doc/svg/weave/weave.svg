<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2965pt" height="1823pt"
 viewBox="0.00 0.00 2965.00 1823.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1819.4025)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1819.4025 2961,-1819.4025 2961,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1797.4025" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="780" y="-1793.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 152</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1725.4025" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="780" y="-1721.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;55</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780,-1779.2339C780,-1771.5335 780,-1762.3769 780,-1753.8192"/>
<polygon fill="#000000" stroke="#000000" points="783.5001,-1753.8158 780,-1743.8158 776.5001,-1753.8158 783.5001,-1753.8158"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="441" cy="-1653.4025" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="441" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.4772,-1716.8106C669.8539,-1707.3185 578.079,-1690.7845 500,-1671.4025 496.1348,-1670.4431 492.1476,-1669.3825 488.1554,-1668.2705"/>
<polygon fill="#000000" stroke="#000000" points="488.8661,-1664.833 478.288,-1665.4286 486.9287,-1671.5596 488.8661,-1664.833"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="555" cy="-1653.4025" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="555" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;5</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M738.0498,-1712.1891C703.6229,-1701.3185 653.6197,-1685.4678 610,-1671.4025 606.7459,-1670.3532 603.385,-1669.2648 600.0032,-1668.1662"/>
<polygon fill="#000000" stroke="#000000" points="601.0811,-1664.8364 590.4887,-1665.0673 598.9132,-1671.4922 601.0811,-1664.8364"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="665" cy="-1653.4025" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="665" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 6&#45;7</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M753.9047,-1709.0646C737.4265,-1698.7478 715.9845,-1685.3232 698.2867,-1674.2429"/>
<polygon fill="#000000" stroke="#000000" points="699.7525,-1671.0313 689.4193,-1668.6911 696.0378,-1676.9644 699.7525,-1671.0313"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="780" cy="-1653.4025" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="780" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 8&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M780,-1707.2339C780,-1699.5335 780,-1690.3769 780,-1681.8192"/>
<polygon fill="#000000" stroke="#000000" points="783.5001,-1681.8158 780,-1671.8158 776.5001,-1681.8158 783.5001,-1681.8158"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-1653.4025" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="929" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;48</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M811.9642,-1709.9567C834.46,-1699.0863 864.7373,-1684.4556 888.8602,-1672.7989"/>
<polygon fill="#000000" stroke="#000000" points="890.6277,-1675.8321 898.1087,-1668.3299 887.582,-1669.5294 890.6277,-1675.8321"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1173" cy="-1653.4025" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1173" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 49&#45;55</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M831.782,-1715.9157C904.7897,-1702.5403 1037.6048,-1678.2078 1114.2256,-1664.1704"/>
<polygon fill="#000000" stroke="#000000" points="1114.9901,-1667.5886 1124.1956,-1662.3438 1113.7286,-1660.7032 1114.9901,-1667.5886"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2034" cy="-1653.4025" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2034" y="-1649.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 56&#45;152</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M839.6394,-1721.9783C1044.9115,-1710.1923 1722.3582,-1671.2958 1954.8555,-1657.9467"/>
<polygon fill="#000000" stroke="#000000" points="1955.1437,-1661.436 1964.9266,-1657.3685 1954.7424,-1654.4475 1955.1437,-1661.436"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1599.604 0,-1599.604 0,-1543.801 450,-1543.801 450,-1599.604"/>
<text text-anchor="middle" x="225" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- block_3&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_3&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M520.2276,-1641.507C513.5462,-1639.3679 506.5809,-1637.2377 500,-1635.4025 456.4423,-1623.2559 408.5578,-1611.5899 365.1243,-1601.6361"/>
<polygon fill="#000000" stroke="#000000" points="365.8777,-1598.2181 355.3498,-1599.4076 364.3216,-1605.043 365.8777,-1598.2181"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-1589.7025 468.5,-1589.7025 468.5,-1553.7025 659.5,-1553.7025 659.5,-1589.7025"/>
<text text-anchor="middle" x="564" y="-1568.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- block_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M644.5611,-1636.8693C630.2282,-1625.2752 610.8157,-1609.5722 594.6381,-1596.486"/>
<polygon fill="#000000" stroke="#000000" points="596.4931,-1593.4848 586.5171,-1589.9169 592.0907,-1598.9272 596.4931,-1593.4848"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-1591.6046 678,-1591.6046 678,-1551.8004 834,-1551.8004 834,-1591.6046"/>
<text text-anchor="middle" x="756" y="-1576.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- block_5&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_5&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M774.6736,-1635.2706C771.7257,-1625.2353 767.9898,-1612.5179 764.6356,-1601.0994"/>
<polygon fill="#000000" stroke="#000000" points="767.9921,-1600.1075 761.8155,-1591.4994 761.2759,-1602.0804 767.9921,-1600.1075"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-1571.7025" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="929" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;47</text>
</g>
<!-- block_6&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_6&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M929,-1635.2706C929,-1624.9048 929,-1611.6773 929,-1599.9755"/>
<polygon fill="#000000" stroke="#000000" points="932.5001,-1599.7837 929,-1589.7837 925.5001,-1599.7837 932.5001,-1599.7837"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1078,-1589.7025 1024,-1589.7025 1024,-1553.7025 1078,-1553.7025 1078,-1589.7025"/>
</g>
<!-- block_6&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M955.7698,-1637.4974C972.959,-1627.0647 995.6131,-1612.9022 1015,-1599.4025 1016.6017,-1598.2872 1018.2302,-1597.1286 1019.8654,-1595.9456"/>
<polygon fill="#000000" stroke="#000000" points="1022.0537,-1598.6802 1028.0031,-1589.9135 1017.8852,-1593.0567 1022.0537,-1598.6802"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1173" cy="-1571.7025" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1173" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;53</text>
</g>
<!-- block_7&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>block_7&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173,-1635.2706C1173,-1624.9048 1173,-1611.6773 1173,-1599.9755"/>
<polygon fill="#000000" stroke="#000000" points="1176.5001,-1599.7837 1173,-1589.7837 1169.5001,-1599.7837 1176.5001,-1599.7837"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1322,-1589.7025 1268,-1589.7025 1268,-1553.7025 1322,-1553.7025 1322,-1589.7025"/>
</g>
<!-- block_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>block_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1199.7698,-1637.4974C1216.959,-1627.0647 1239.6131,-1612.9022 1259,-1599.4025 1260.6017,-1598.2872 1262.2302,-1597.1286 1263.8654,-1595.9456"/>
<polygon fill="#000000" stroke="#000000" points="1266.0537,-1598.6802 1272.0031,-1589.9135 1261.8852,-1593.0567 1266.0537,-1598.6802"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1765" cy="-1571.7025" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1765" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1983.5406,-1640.7334C1943.9554,-1630.4815 1887.6099,-1615.1972 1839,-1599.4025 1830.2814,-1596.5696 1821.0719,-1593.3281 1812.222,-1590.0844"/>
<polygon fill="#000000" stroke="#000000" points="1813.3932,-1586.7858 1802.8003,-1586.583 1810.9546,-1593.3473 1813.3932,-1586.7858"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="1904" cy="-1571.7025" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1904" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 56&#45;60</text>
</g>
<!-- section_8&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.3789,-1636.6722C1987.4006,-1624.1166 1959.8863,-1606.8249 1938.2654,-1593.237"/>
<polygon fill="#000000" stroke="#000000" points="1940.0288,-1590.2114 1929.6996,-1587.8537 1936.304,-1596.1382 1940.0288,-1590.2114"/>
</g>
<!-- block_20 -->
<g id="node21" class="node">
<title>block_20</title>
<ellipse fill="none" stroke="#000000" cx="2034" cy="-1571.7025" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2034" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 61&#45;77</text>
</g>
<!-- section_8&#45;&gt;block_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;block_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2034,-1635.2706C2034,-1624.9048 2034,-1611.6773 2034,-1599.9755"/>
<polygon fill="#000000" stroke="#000000" points="2037.5001,-1599.7837 2034,-1589.7837 2030.5001,-1599.7837 2037.5001,-1599.7837"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="2169" cy="-1571.7025" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2169" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;140</text>
</g>
<!-- section_8&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2061.645,-1636.6722C2082.3477,-1624.1432 2110.8431,-1606.8982 2133.2737,-1593.3235"/>
<polygon fill="#000000" stroke="#000000" points="2135.1101,-1596.3033 2141.8533,-1588.1313 2131.4858,-1590.3145 2135.1101,-1596.3033"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="2497" cy="-1571.7025" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2497" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 141&#45;149</text>
</g>
<!-- section_8&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2092.1705,-1643.1379C2178.7873,-1627.8537 2341.1521,-1599.2031 2431.7169,-1583.2222"/>
<polygon fill="#000000" stroke="#000000" points="2432.3519,-1586.6643 2441.5915,-1581.4798 2431.1354,-1579.7708 2432.3519,-1586.6643"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2798" cy="-1571.7025" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2798" y="-1567.5025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 150&#45;152</text>
</g>
<!-- section_8&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2100.3094,-1647.2187C2201.9143,-1637.6367 2402.2042,-1618.3272 2572,-1599.4025 2624.302,-1593.5732 2683.3254,-1586.3156 2727.9348,-1580.6918"/>
<polygon fill="#000000" stroke="#000000" points="2728.6047,-1584.135 2738.0869,-1579.4087 2727.727,-1577.1903 2728.6047,-1584.135"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1038,-1508.203 714,-1508.203 714,-955.4011 1038,-955.4011 1038,-1508.203"/>
<text text-anchor="middle" x="876" y="-1492.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="876" y="-1461.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="876" y="-1446.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="876" y="-1430.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="876" y="-1415.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="876" y="-1399.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="876" y="-1384.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="876" y="-1369.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="876" y="-1353.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="876" y="-1338.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="876" y="-1322.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="876" y="-1307.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="876" y="-1292.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="876" y="-1260.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="876" y="-1245.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="876" y="-1197.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="876" y="-1166.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="876" y="-1135.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="876" y="-1119.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="876" y="-1104.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="876" y="-1088.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="876" y="-1073.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="876" y="-1058.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="876" y="-1026.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="876" y="-995.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="876" y="-963.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit(Node)</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M926.1505,-1553.428C924.7354,-1544.353 922.8556,-1532.2969 920.6537,-1518.176"/>
<polygon fill="#000000" stroke="#000000" points="924.0786,-1517.4228 919.0797,-1508.0814 917.1622,-1518.5013 924.0786,-1517.4228"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1289.5,-1259.0026 1056.5,-1259.0026 1056.5,-1204.6016 1289.5,-1204.6016 1289.5,-1259.0026"/>
<text text-anchor="middle" x="1173" y="-1243.7021" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1173" y="-1228.3021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1173" y="-1212.9021" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1173,-1553.428C1173,-1499.8052 1173,-1342.1005 1173,-1269.3523"/>
<polygon fill="#000000" stroke="#000000" points="1176.5001,-1269.2578 1173,-1259.2579 1169.5001,-1269.2579 1176.5001,-1269.2578"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1820.5,-1259.1025 1307.5,-1259.1025 1307.5,-1204.5017 1820.5,-1204.5017 1820.5,-1259.1025"/>
<text text-anchor="middle" x="1564" y="-1228.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The sh&#45;lib monkeypatches the global metatable, and all we want is one</text>
<text text-anchor="middle" x="1564" y="-1212.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">command, so we do something odd here:</text>
</g>
<!-- block_19&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_19&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1883.4508,-1554.8963C1868.3447,-1542.3316 1847.4895,-1524.5415 1830,-1508.0025 1741.9433,-1424.7314 1644.6102,-1320.2194 1595.7237,-1266.7858"/>
<polygon fill="#000000" stroke="#000000" points="1598.1977,-1264.3046 1588.8693,-1259.2813 1593.0291,-1269.0254 1598.1977,-1264.3046"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="1916" cy="-1231.8021" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1916" y="-1227.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 61&#45;75</text>
</g>
<!-- block_20&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>block_20&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2024.0928,-1553.944C2017.3204,-1541.3632 2008.4398,-1523.9544 2002,-1508.0025 1966.2817,-1419.525 1936.2133,-1310.2509 1923.0812,-1259.778"/>
<polygon fill="#000000" stroke="#000000" points="1926.4274,-1258.7373 1920.54,-1249.9288 1919.6493,-1260.4861 1926.4274,-1258.7373"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2065,-1249.8021 2011,-1249.8021 2011,-1213.8021 2065,-1213.8021 2065,-1249.8021"/>
</g>
<!-- block_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2034.2151,-1553.428C2034.873,-1497.5224 2036.8622,-1328.4846 2037.6618,-1260.5379"/>
<polygon fill="#000000" stroke="#000000" points="2041.1659,-1260.2075 2037.7839,-1250.167 2034.1664,-1260.1251 2041.1659,-1260.2075"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="2165" cy="-1231.8021" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2165" y="-1227.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;138</text>
</g>
<!-- block_21&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>block_21&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2168.7849,-1553.428C2168.127,-1497.5224 2166.1378,-1328.4846 2165.3382,-1260.5379"/>
<polygon fill="#000000" stroke="#000000" points="2168.8336,-1260.1251 2165.2161,-1250.167 2161.8341,-1260.2075 2168.8336,-1260.1251"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2319,-1249.8021 2265,-1249.8021 2265,-1213.8021 2319,-1213.8021 2319,-1249.8021"/>
</g>
<!-- block_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2201.6061,-1556.3144C2220.6811,-1545.5414 2243.4186,-1529.2701 2256,-1508.0025 2303.2367,-1428.1536 2299.8915,-1312.8609 2295.2493,-1260.0961"/>
<polygon fill="#000000" stroke="#000000" points="2298.7021,-1259.438 2294.2567,-1249.8209 2291.7345,-1260.1112 2298.7021,-1259.438"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2497" cy="-1231.8021" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2497" y="-1227.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 141&#45;148</text>
</g>
<!-- block_22&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_22&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2497,-1553.428C2497,-1497.5224 2497,-1328.4846 2497,-1260.5379"/>
<polygon fill="#000000" stroke="#000000" points="2500.5001,-1260.1669 2497,-1250.167 2493.5001,-1260.167 2500.5001,-1260.1669"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2656,-1249.8021 2602,-1249.8021 2602,-1213.8021 2656,-1213.8021 2656,-1249.8021"/>
</g>
<!-- block_22&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_22&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2533.8806,-1556.6369C2554.7067,-1546.1525 2579.2476,-1530.0708 2593,-1508.0025 2642.1697,-1429.1004 2637.7907,-1312.9331 2632.5613,-1259.9729"/>
<polygon fill="#000000" stroke="#000000" points="2636.0338,-1259.5288 2631.4856,-1249.9599 2629.0739,-1260.2766 2636.0338,-1259.5288"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="2798" cy="-1231.8021" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2798" y="-1227.6021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 150&#45;152</text>
</g>
<!-- block_23&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>block_23&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2798,-1553.428C2798,-1497.5224 2798,-1328.4846 2798,-1260.5379"/>
<polygon fill="#000000" stroke="#000000" points="2801.5001,-1260.1669 2798,-1250.167 2794.5001,-1260.167 2801.5001,-1260.1669"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2957,-1249.8021 2903,-1249.8021 2903,-1213.8021 2957,-1213.8021 2957,-1249.8021"/>
</g>
<!-- block_23&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_23&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2834.8806,-1556.6369C2855.7067,-1546.1525 2880.2476,-1530.0708 2894,-1508.0025 2943.1697,-1429.1004 2938.7907,-1312.9331 2933.5613,-1259.9729"/>
<polygon fill="#000000" stroke="#000000" points="2937.0338,-1259.5288 2932.4856,-1249.9599 2930.0739,-1260.2766 2937.0338,-1259.5288"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1811.5,-564.1013 1354.5,-564.1013 1354.5,-355.5004 1811.5,-355.5004 1811.5,-564.1013"/>
<text text-anchor="middle" x="1583" y="-549.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="1583" y="-517.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1583" y="-502.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local run_dot = dot_sh({__input = dotted})</text>
<text text-anchor="middle" x="1583" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if run_dot.__exitcode == 0 then</text>
<text text-anchor="middle" x="1583" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return tostring(run_dot)</text>
<text text-anchor="middle" x="1583" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1583" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(a.red(&quot;Dot returned &quot;) </text>
<text text-anchor="middle" x="1583" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(run_dot.__exitcode)</text>
<text text-anchor="middle" x="1583" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. a.red(&quot; for &quot; .. out_file ))</text>
<text text-anchor="middle" x="1583" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1583" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1583" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911.3461,-1213.6917C1899.6515,-1169.057 1867.2199,-1050.5021 1829,-955.6017 1774.7285,-820.8451 1698.7604,-672.3316 1645.6512,-573.3104"/>
<polygon fill="#000000" stroke="#000000" points="1648.7233,-571.6331 1640.9062,-564.4816 1642.5574,-574.947 1648.7233,-571.6331"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2462,-919.4026 1830,-919.4026 1830,-.1991 2462,-.1991 2462,-919.4026"/>
<text text-anchor="middle" x="2146" y="-904.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2146" y="-889.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2146" y="-873.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2146" y="-858.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2146" y="-842.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="2146" y="-811.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2146" y="-796.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2146" y="-780.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2146" y="-765.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2146" y="-749.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2146" y="-734.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2146" y="-719.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2146" y="-703.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2146" y="-688.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2146" y="-672.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2146" y="-657.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2146" y="-642.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2146" y="-626.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2146" y="-611.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2146" y="-595.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2146" y="-580.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2146" y="-565.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2146" y="-549.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2146" y="-534.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2146" y="-518.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2146" y="-503.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2146" y="-488.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2146" y="-472.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2146" y="-457.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2146" y="-441.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="2146" y="-426.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2146" y="-411.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2146" y="-395.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2146" y="-380.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2146" y="-364.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2146" y="-349.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2146" y="-334.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-318.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-303.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-287.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-241.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2146" y="-225.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2146" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2146" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2146" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="2146" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2146" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2146" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2146" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2146" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2146" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2146" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2164.5491,-1213.4803C2163.4876,-1170.3513 2160.6848,-1056.4695 2157.57,-929.9082"/>
<polygon fill="#000000" stroke="#000000" points="2161.0613,-929.51 2157.3163,-919.5991 2154.0635,-929.6823 2161.0613,-929.51"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2762,-510.4018 2480,-510.4018 2480,-409.1999 2762,-409.1999 2762,-510.4018"/>
<text text-anchor="middle" x="2621" y="-495.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2621" y="-480.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2621" y="-432.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2621" y="-417.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2499.9429,-1213.4803C2515.1502,-1118.8022 2585.1233,-683.1626 2611.1835,-520.9167"/>
<polygon fill="#000000" stroke="#000000" points="2614.7052,-521.0603 2612.8355,-510.6318 2607.7938,-519.9501 2614.7052,-521.0603"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2852,-477.8008 2780,-477.8008 2780,-441.8008 2852,-441.8008 2852,-477.8008"/>
<text text-anchor="middle" x="2816" y="-456.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2798.4272,-1213.4803C2800.807,-1111.4126 2812.4261,-613.0829 2815.3375,-488.2156"/>
<polygon fill="#000000" stroke="#000000" points="2818.8427,-488.0303 2815.5768,-477.9514 2811.8446,-487.8671 2818.8427,-488.0303"/>
</g>
</g>
</svg>