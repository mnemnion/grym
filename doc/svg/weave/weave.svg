<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2781pt" height="1807pt"
 viewBox="0.00 0.00 2781.00 1807.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1803.4025)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1803.4025 2777,-1803.4025 2777,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1781.4025" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="656" y="-1777.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 150</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1709.4025" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="656" y="-1705.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;53</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-1763.2339C656,-1755.5335 656,-1746.3769 656,-1737.8192"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1737.8158 656,-1727.8158 652.5001,-1737.8158 659.5001,-1737.8158"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392" cy="-1637.4025" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="392" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.453,-1697.6864C567.8117,-1687.0756 505.1665,-1670.7932 451,-1655.4025 447.3881,-1654.3763 443.6588,-1653.2934 439.912,-1652.1888"/>
<polygon fill="#000000" stroke="#000000" points="440.6052,-1648.7433 430.022,-1649.2378 438.6037,-1655.451 440.6052,-1648.7433"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1637.4025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="492" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M621.6202,-1694.309C593.8097,-1682.0995 554.8158,-1664.9802 526.8739,-1652.713"/>
<polygon fill="#000000" stroke="#000000" points="528.0513,-1649.4075 517.4879,-1648.5923 525.2374,-1655.8171 528.0513,-1649.4075"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="574" cy="-1637.4025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="574" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M636.5671,-1692.3395C625.3006,-1682.4469 610.9965,-1669.8873 598.9098,-1659.2746"/>
<polygon fill="#000000" stroke="#000000" points="601.1653,-1656.5972 591.3415,-1652.6292 596.5466,-1661.8573 601.1653,-1656.5972"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1637.4025" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="656" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-1691.2339C656,-1683.5335 656,-1674.3769 656,-1665.8192"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1665.8158 656,-1655.8158 652.5001,-1665.8158 659.5001,-1665.8158"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="808" cy="-1637.4025" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="808" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;45</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M688.2353,-1694.1332C710.3919,-1683.6379 740.0766,-1669.5768 764.3491,-1658.0793"/>
<polygon fill="#000000" stroke="#000000" points="766.1596,-1661.0945 773.6987,-1653.6505 763.163,-1654.7683 766.1596,-1661.0945"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1060" cy="-1637.4025" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1060" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 47&#45;51</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M708.4018,-1700.0636C779.8575,-1687.3289 908.1328,-1664.468 988.4106,-1650.161"/>
<polygon fill="#000000" stroke="#000000" points="989.2086,-1653.574 998.4394,-1648.3737 987.9804,-1646.6826 989.2086,-1653.574"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1637.4025" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1584" y="-1633.2025" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 54&#45;150</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M715.108,-1704.8166C876.5398,-1692.2917 1324.9295,-1657.5028 1506.3357,-1643.4282"/>
<polygon fill="#000000" stroke="#000000" points="1506.6351,-1646.9156 1516.3344,-1642.6524 1506.0936,-1639.9366 1506.6351,-1646.9156"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="424.5,-1340.9021 359.5,-1340.9021 359.5,-1304.9021 424.5,-1304.9021 424.5,-1340.9021"/>
<text text-anchor="middle" x="392" y="-1319.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M392,-1619.1343C392,-1566.5886 392,-1414.7713 392,-1351.3111"/>
<polygon fill="#000000" stroke="#000000" points="395.5001,-1351.2208 392,-1341.2208 388.5001,-1351.2209 395.5001,-1351.2208"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="481" cy="-1322.9021" rx="27" ry="18"/>
<text text-anchor="middle" x="481" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M491.361,-1619.1343C489.5232,-1566.5886 484.2132,-1414.7713 481.9936,-1351.3111"/>
<polygon fill="#000000" stroke="#000000" points="485.4882,-1351.0923 481.6407,-1341.2208 478.4925,-1351.3371 485.4882,-1351.0923"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1322.9021" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573.4191,-1619.1343C571.7484,-1566.5886 566.9211,-1414.7713 564.9033,-1351.3111"/>
<polygon fill="#000000" stroke="#000000" points="568.3986,-1351.1045 564.5825,-1341.2208 561.4021,-1351.327 568.3986,-1351.1045"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1322.9021" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M654.8383,-1619.1343C651.4967,-1566.5886 641.8422,-1414.7713 637.8066,-1351.3111"/>
<polygon fill="#000000" stroke="#000000" points="641.2926,-1350.9785 637.1649,-1341.2208 634.3067,-1351.4228 641.2926,-1350.9785"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-1583.4029 681,-1583.4029 681,-1062.4014 1005,-1062.4014 1005,-1583.4029"/>
<text text-anchor="middle" x="843" y="-1568.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="843" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="843" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="843" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="843" y="-1490.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="843" y="-1475.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="843" y="-1459.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="843" y="-1444.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="843" y="-1429.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="843" y="-1413.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="843" y="-1398.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="843" y="-1382.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="843" y="-1367.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="843" y="-1336.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="843" y="-1320.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="843" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="843" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="843" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="843" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="843" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="843" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="843" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="843" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="843" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="843" y="-1070.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M810.033,-1619.1343C810.807,-1612.1799 811.7744,-1603.4868 812.887,-1593.4897"/>
<polygon fill="#000000" stroke="#000000" points="816.3689,-1593.8453 813.9965,-1583.5196 809.4118,-1593.0711 816.3689,-1593.8453"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1256.5,-1350.1026 1023.5,-1350.1026 1023.5,-1295.7017 1256.5,-1295.7017 1256.5,-1350.1026"/>
<text text-anchor="middle" x="1140" y="-1334.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1140" y="-1319.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1140" y="-1304.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.6469,-1619.1343C1077.4298,-1568.8816 1113.3088,-1427.832 1130.5359,-1360.1079"/>
<polygon fill="#000000" stroke="#000000" points="1133.9625,-1360.8342 1133.0358,-1350.28 1127.1786,-1359.1085 1133.9625,-1360.8342"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1340" cy="-1322.9021" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1340" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1529.35,-1625.8175C1486.3518,-1615.6638 1431.0969,-1599.9723 1415,-1583.4025 1351.9532,-1518.5038 1341.3026,-1404.1616 1339.9076,-1351.2421"/>
<polygon fill="#000000" stroke="#000000" points="1343.4067,-1351.1545 1339.7369,-1341.2156 1336.4077,-1351.2737 1343.4067,-1351.1545"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1456" cy="-1322.9021" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1456" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1545.5444,-1622.1406C1528.3321,-1613.3569 1509.3899,-1600.5997 1498,-1583.4025 1449.9249,-1510.8156 1450.0831,-1402.4286 1453.3548,-1351.4046"/>
<polygon fill="#000000" stroke="#000000" points="1456.8669,-1351.3654 1454.1074,-1341.1362 1449.8857,-1350.8536 1456.8669,-1351.3654"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1322.9021" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1584" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 59&#45;73</text>
</g>
<!-- section_8&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1584,-1619.1343C1584,-1566.5886 1584,-1414.7713 1584,-1351.3111"/>
<polygon fill="#000000" stroke="#000000" points="1587.5001,-1351.2208 1584,-1341.2208 1580.5001,-1351.2209 1587.5001,-1351.2208"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1898" cy="-1322.9021" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1898" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 76&#45;136</text>
</g>
<!-- section_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1614.5279,-1621.1552C1631.6674,-1611.3368 1652.9659,-1597.9334 1670,-1583.4025 1757.9957,-1508.3382 1842.5373,-1398.9196 1879.0905,-1349.2174"/>
<polygon fill="#000000" stroke="#000000" points="1882.0717,-1351.07 1885.146,-1340.931 1876.4199,-1346.9398 1882.0717,-1351.07"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2314" cy="-1322.9021" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2314" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 139&#45;146</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1652.307,-1632.7445C1751.4663,-1625.2328 1929.8935,-1608.6796 1989,-1583.4025 2120.5406,-1527.1488 2242.875,-1402.257 2291.6686,-1348.416"/>
<polygon fill="#000000" stroke="#000000" points="2294.5158,-1350.4838 2298.5929,-1340.7049 2289.3075,-1345.8069 2294.5158,-1350.4838"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2622" cy="-1322.9021" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2622" y="-1318.7021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 148&#45;150</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1654.575,-1636.0041C1842.2286,-1631.8355 2343.7548,-1617.595 2410,-1583.4025 2511.6702,-1530.9254 2582.0322,-1405.852 2609.3499,-1350.2992"/>
<polygon fill="#000000" stroke="#000000" points="2612.6071,-1351.6027 2613.8024,-1341.0754 2606.3031,-1348.5596 2612.6071,-1351.6027"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-602.5021 0,-602.5021 0,-530.6997 450,-530.6997 450,-602.5021"/>
<text text-anchor="middle" x="225" y="-539.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M479.0362,-1304.9025C474.0816,-1262.1508 459.5383,-1151.4243 433,-1062.4017 381.7217,-890.3889 290.1221,-697.0516 247.7066,-611.4763"/>
<polygon fill="#000000" stroke="#000000" points="250.7362,-609.708 243.1486,-602.3135 244.4688,-612.8258 250.7362,-609.708"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-586.503 468.5,-586.503 468.5,-546.6988 659.5,-546.6988 659.5,-586.503"/>
<text text-anchor="middle" x="564" y="-555.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1304.5817C564,-1204.2994 564,-721.8257 564,-596.4336"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-596.3979 564,-586.3979 560.5001,-596.398 567.5001,-596.3979"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-594.5024 678,-594.5024 678,-538.6994 834,-538.6994 834,-594.5024"/>
<text text-anchor="middle" x="756" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.299,-1304.8727C643.7432,-1262.5076 658.0179,-1153.329 672,-1062.4017 698.34,-891.1098 734.3388,-687.3473 749.1789,-604.4675"/>
<polygon fill="#000000" stroke="#000000" points="752.6447,-604.9694 750.9646,-594.5086 745.7546,-603.7339 752.6447,-604.9694"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1122,-584.6009 994,-584.6009 994,-548.6009 1122,-548.6009 1122,-584.6009"/>
<text text-anchor="middle" x="1058" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_18&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_18&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1340.4496,-1304.7469C1340.5811,-1257.6199 1334.1633,-1130.3402 1265,-1062.4017 1221.0068,-1019.1876 1172.2569,-1072.2355 1131,-1026.4017 1018.1545,-901.0376 1040.7773,-674.519 1052.9947,-595.0684"/>
<polygon fill="#000000" stroke="#000000" points="1056.5043,-595.2881 1054.6344,-584.8595 1049.5928,-594.1779 1056.5043,-595.2881"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1167" cy="-566.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1167" y="-562.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_19&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1459.4468,-1304.9934C1467.3729,-1257.9095 1481.4449,-1129.6554 1415,-1062.4017 1347.8311,-994.4153 1267.468,-1096.9546 1203,-1026.4017 1145.2586,-963.2104 1158.8557,-684.8422 1164.906,-594.8028"/>
<polygon fill="#000000" stroke="#000000" points="1168.4006,-595.0014 1165.6012,-584.7831 1161.4174,-594.5168 1168.4006,-595.0014"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1669.5,-670.9014 1212.5,-670.9014 1212.5,-462.3004 1669.5,-462.3004 1669.5,-670.9014"/>
<text text-anchor="middle" x="1441" y="-655.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="1441" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1441" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local run_dot = dot_sh({__input = dotted})</text>
<text text-anchor="middle" x="1441" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if run_dot.__exitcode == 0 then</text>
<text text-anchor="middle" x="1441" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return tostring(run_dot)</text>
<text text-anchor="middle" x="1441" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1441" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(a.red(&quot;Dot returned &quot;) </text>
<text text-anchor="middle" x="1441" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(run_dot.__exitcode)</text>
<text text-anchor="middle" x="1441" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. a.red(&quot; for &quot; .. out_file ))</text>
<text text-anchor="middle" x="1441" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1441" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1441" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1580.536,-1304.5817C1564.6102,-1220.3527 1497.7047,-866.5019 1462.6439,-681.0716"/>
<polygon fill="#000000" stroke="#000000" points="1466.0385,-680.1859 1460.7415,-671.0103 1459.1604,-681.4865 1466.0385,-680.1859"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2382.5,-1026.2027 1687.5,-1026.2027 1687.5,-106.9991 2382.5,-106.9991 2382.5,-1026.2027"/>
<text text-anchor="middle" x="2035" y="-1011.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2035" y="-995.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2035" y="-980.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2035" y="-965.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2035" y="-949.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="2035" y="-918.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2035" y="-902.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2035" y="-887.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2035" y="-872.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2035" y="-856.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2035" y="-841.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2035" y="-825.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2035" y="-810.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2035" y="-795.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2035" y="-779.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2035" y="-764.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2035" y="-748.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2035" y="-733.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2035" y="-718.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2035" y="-702.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2035" y="-687.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2035" y="-671.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2035" y="-656.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2035" y="-641.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2035" y="-625.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2035" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2035" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2035" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2035" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2035" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2035" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2035" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;changed = changed or writeOnChange(woven_dot, last_dot, out_dot_name, depth) </text>
<text text-anchor="middle" x="2035" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed then</text>
<text text-anchor="middle" x="2035" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2035" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2035" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2035" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-347.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2035" y="-332.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2035" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2035" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2035" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="2035" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2035" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.green(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2035" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2035" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2035" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2035" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2035" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1901.3187,-1304.5817C1908.8307,-1263.112 1928.1819,-1156.2848 1949.9021,-1036.3791"/>
<polygon fill="#000000" stroke="#000000" points="1953.4008,-1036.7004 1951.7394,-1026.2367 1946.5129,-1035.4527 1953.4008,-1036.7004"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2683,-617.2018 2401,-617.2018 2401,-516 2683,-516 2683,-617.2018"/>
<text text-anchor="middle" x="2542" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2542" y="-586.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2542" y="-539.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2542" y="-524.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2319.523,-1304.5817C2347.6831,-1211.1714 2475.8114,-786.1557 2523.7904,-627.0043"/>
<polygon fill="#000000" stroke="#000000" points="2527.1615,-627.9475 2526.6969,-617.3629 2520.4595,-625.927 2527.1615,-627.9475"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2773,-584.6009 2701,-584.6009 2701,-548.6009 2773,-548.6009 2773,-584.6009"/>
<text text-anchor="middle" x="2737" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2627.2059,-1304.6861C2640.1961,-1258.5358 2674.2662,-1133.0999 2692,-1026.4017 2718.9558,-864.2184 2731.5949,-666.9704 2735.5622,-594.7872"/>
<polygon fill="#000000" stroke="#000000" points="2739.0636,-594.8546 2736.1054,-584.6811 2732.0736,-594.4788 2739.0636,-594.8546"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1423.5,-70.7004 910.5,-70.7004 910.5,-.0997 1423.5,-.0997 1423.5,-70.7004"/>
<text text-anchor="middle" x="1167" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The sh&#45;lib monkeypatches the global metatable, and all we want is one</text>
<text text-anchor="middle" x="1167" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">command, so we do something odd here:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1167,-548.3158C1167,-473.9111 1167,-192.5864 1167,-81.2056"/>
<polygon fill="#000000" stroke="#000000" points="1170.5001,-80.97 1167,-70.97 1163.5001,-80.9701 1170.5001,-80.97"/>
</g>
</g>
</svg>