<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="2767pt" height="1854pt"
 viewBox="0.00 0.00 2767.00 1854.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1850.2026)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1850.2026 2763,-1850.2026 2763,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1828.2026" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="656" y="-1824.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 154</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1756.2026" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="656" y="-1752.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;54</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-1810.034C656,-1802.3335 656,-1793.1769 656,-1784.6192"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1784.6158 656,-1774.6159 652.5001,-1784.6159 659.5001,-1784.6158"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="392" cy="-1684.2026" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="392" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M609.453,-1744.4865C567.8117,-1733.8757 505.1665,-1717.5932 451,-1702.2026 447.3881,-1701.1763 443.6588,-1700.0935 439.912,-1698.9889"/>
<polygon fill="#000000" stroke="#000000" points="440.6052,-1695.5433 430.022,-1696.0379 438.6037,-1702.2511 440.6052,-1695.5433"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="492" cy="-1684.2026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="492" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M621.6202,-1741.109C593.8097,-1728.8995 554.8158,-1711.7803 526.8739,-1699.5131"/>
<polygon fill="#000000" stroke="#000000" points="528.0513,-1696.2076 517.4879,-1695.3924 525.2374,-1702.6171 528.0513,-1696.2076"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="574" cy="-1684.2026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="574" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M636.5671,-1739.1396C625.3006,-1729.247 610.9965,-1716.6873 598.9098,-1706.0746"/>
<polygon fill="#000000" stroke="#000000" points="601.1653,-1703.3973 591.3415,-1699.4293 596.5466,-1708.6574 601.1653,-1703.3973"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="656" cy="-1684.2026" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="656" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656,-1738.034C656,-1730.3335 656,-1721.1769 656,-1712.6192"/>
<polygon fill="#000000" stroke="#000000" points="659.5001,-1712.6158 656,-1702.6159 652.5001,-1712.6159 659.5001,-1712.6158"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="808" cy="-1684.2026" rx="76.6175" ry="18"/>
<text text-anchor="middle" x="808" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 11&#45;46</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M688.2353,-1740.9332C710.3919,-1730.438 740.0766,-1716.3768 764.3491,-1704.8794"/>
<polygon fill="#000000" stroke="#000000" points="766.1596,-1707.8946 773.6987,-1700.4506 763.163,-1701.5684 766.1596,-1707.8946"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1060" cy="-1684.2026" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1060" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;52</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M708.4018,-1746.8637C779.8575,-1734.129 908.1328,-1711.268 988.4106,-1696.9611"/>
<polygon fill="#000000" stroke="#000000" points="989.2086,-1700.3741 998.4394,-1695.1738 987.9804,-1693.4827 989.2086,-1700.3741"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1684.2026" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1584" y="-1680.0026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 55&#45;154</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M715.108,-1751.6166C876.5398,-1739.0917 1324.9295,-1704.3029 1506.3357,-1690.2283"/>
<polygon fill="#000000" stroke="#000000" points="1506.6351,-1693.7157 1516.3344,-1689.4525 1506.0936,-1686.7366 1506.6351,-1693.7157"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="424.5,-1380.0022 359.5,-1380.0022 359.5,-1344.0022 424.5,-1344.0022 424.5,-1380.0022"/>
<text text-anchor="middle" x="392" y="-1358.5022" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M392,-1665.9565C392,-1612.3471 392,-1455.0336 392,-1390.313"/>
<polygon fill="#000000" stroke="#000000" points="395.5001,-1390.0481 392,-1380.0481 388.5001,-1390.0482 395.5001,-1390.0481"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="481" cy="-1362.0022" rx="27" ry="18"/>
<text text-anchor="middle" x="481" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M491.3771,-1665.9565C489.5468,-1612.3471 484.1761,-1455.0336 481.9665,-1390.313"/>
<polygon fill="#000000" stroke="#000000" points="485.4554,-1389.9229 481.6161,-1380.0481 478.4594,-1390.1618 485.4554,-1389.9229"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1362.0022" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573.4337,-1665.9565C571.7699,-1612.3471 566.8874,-1455.0336 564.8787,-1390.313"/>
<polygon fill="#000000" stroke="#000000" points="568.3687,-1389.9347 564.5601,-1380.0481 561.3721,-1390.1519 568.3687,-1389.9347"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1362.0022" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M654.8674,-1665.9565C651.5397,-1612.3471 641.7748,-1455.0336 637.7573,-1390.313"/>
<polygon fill="#000000" stroke="#000000" points="641.2331,-1389.8121 637.1202,-1380.0481 634.2465,-1390.2458 641.2331,-1389.8121"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-1630.4031 681,-1630.4031 681,-1093.6012 1005,-1093.6012 1005,-1630.4031"/>
<text text-anchor="middle" x="843" y="-1615.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="843" y="-1583.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="843" y="-1568.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="843" y="-1552.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="843" y="-1537.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="843" y="-1522.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="843" y="-1506.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="843" y="-1491.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="843" y="-1475.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="843" y="-1460.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="843" y="-1445.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="843" y="-1429.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="843" y="-1414.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="843" y="-1382.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="843" y="-1367.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="843" y="-1320.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot; ()</text>
<text text-anchor="middle" x="843" y="-1304.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="843" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="843" y="-1257.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="843" y="-1242.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="843" y="-1227.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="843" y="-1211.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="843" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="843" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
<text text-anchor="middle" x="843" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
<text text-anchor="middle" x="843" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M809.982,-1665.9565C810.7382,-1658.9956 811.6843,-1650.2863 812.7736,-1640.2582"/>
<polygon fill="#000000" stroke="#000000" points="816.2599,-1640.5732 813.8604,-1630.2536 809.3008,-1639.8171 816.2599,-1640.5732"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1256.5,-1389.2026 1023.5,-1389.2026 1023.5,-1334.8017 1256.5,-1334.8017 1256.5,-1389.2026"/>
<text text-anchor="middle" x="1140" y="-1373.9022" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1140" y="-1358.5022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1140" y="-1343.1022" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1064.5304,-1665.9565C1077.2635,-1614.6739 1113.5589,-1468.494 1130.7523,-1399.2474"/>
<polygon fill="#000000" stroke="#000000" points="1134.2304,-1399.7634 1133.2434,-1389.2146 1127.4367,-1398.0765 1134.2304,-1399.7634"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1340" cy="-1362.0022" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1340" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1529.3173,-1672.6491C1486.2992,-1662.5147 1431.0334,-1646.8338 1415,-1630.2026 1350.172,-1562.9575 1340.4766,-1444.4662 1339.6216,-1390.3704"/>
<polygon fill="#000000" stroke="#000000" points="1343.1201,-1390.1218 1339.5556,-1380.1446 1336.1203,-1390.167 1343.1201,-1390.1218"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1456" cy="-1362.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1456" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1545.51,-1668.9633C1528.29,-1660.1849 1509.351,-1647.4254 1498,-1630.2026 1448.3626,-1554.888 1449.4691,-1442.284 1453.1898,-1390.2402"/>
<polygon fill="#000000" stroke="#000000" points="1456.6932,-1390.3375 1454.0061,-1380.0891 1449.7157,-1389.7763 1456.6932,-1390.3375"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="1584" cy="-1362.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1584" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 60&#45;74</text>
</g>
<!-- section_8&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1584,-1665.9565C1584,-1612.3471 1584,-1455.0336 1584,-1390.313"/>
<polygon fill="#000000" stroke="#000000" points="1587.5001,-1390.0481 1584,-1380.0481 1580.5001,-1390.0482 1587.5001,-1390.0481"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1895" cy="-1362.0022" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="1895" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 77&#45;139</text>
</g>
<!-- section_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1615.051,-1667.859C1632.1568,-1658.1046 1653.2518,-1644.7952 1670,-1630.2026 1758.6186,-1552.9898 1841.7478,-1439.381 1877.1096,-1388.4278"/>
<polygon fill="#000000" stroke="#000000" points="1880.1602,-1390.169 1882.9533,-1379.9489 1874.3966,-1386.1965 1880.1602,-1390.169"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2305" cy="-1362.0022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2305" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 142&#45;149</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1652.2866,-1679.6497C1750.8913,-1672.2973 1927.7146,-1655.9741 1986,-1630.2026 2117.2373,-1572.1747 2236.5831,-1443.0966 2283.7014,-1387.876"/>
<polygon fill="#000000" stroke="#000000" points="2286.5969,-1389.8722 2290.3786,-1379.9753 2281.2505,-1385.3537 2286.5969,-1389.8722"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2610" cy="-1362.0022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2610" y="-1357.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 151&#45;153</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1654.5185,-1682.8263C1840.7506,-1678.7318 2335.9255,-1664.6965 2401,-1630.2026 2503.8332,-1575.6939 2572.2385,-1446.0626 2598.2503,-1389.3542"/>
<polygon fill="#000000" stroke="#000000" points="2601.5654,-1390.516 2602.4755,-1379.9603 2595.1815,-1387.6446 2601.5654,-1390.516"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-618.2021 0,-618.2021 0,-546.3998 450,-546.3998 450,-618.2021"/>
<text text-anchor="middle" x="225" y="-554.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M479.0755,-1343.8134C474.1619,-1300.0748 459.6241,-1185.8147 433,-1093.8018 381.5186,-915.882 289.2667,-715.1667 247.1098,-627.4099"/>
<polygon fill="#000000" stroke="#000000" points="250.2008,-625.7617 242.7055,-618.2736 243.8952,-628.8014 250.2008,-625.7617"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-602.203 468.5,-602.203 468.5,-562.3988 659.5,-562.3988 659.5,-602.203"/>
<text text-anchor="middle" x="564" y="-570.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1343.8767C564,-1242.0097 564,-740.79 564,-612.3376"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-612.0752 564,-602.0752 560.5001,-612.0752 567.5001,-612.0752"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-610.2024 678,-610.2024 678,-554.3994 834,-554.3994 834,-610.2024"/>
<text text-anchor="middle" x="756" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.2604,-1343.7651C643.678,-1300.3863 657.9966,-1187.6629 672,-1093.8018 698.4828,-916.2942 734.6824,-704.9301 749.3874,-620.1875"/>
<polygon fill="#000000" stroke="#000000" points="752.8493,-620.7079 751.1129,-610.2563 745.9526,-619.5095 752.8493,-620.7079"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1122,-600.3009 994,-600.3009 994,-564.3009 1122,-564.3009 1122,-600.3009"/>
<text text-anchor="middle" x="1058" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_18&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>header_18&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1340.631,-1343.6756C1341.2408,-1295.4732 1335.9576,-1164.0381 1265,-1093.8018 1221.1724,-1050.4197 1172.1395,-1103.7409 1131,-1057.8018 1014.222,-927.3995 1039.7278,-691.7987 1052.8137,-610.6606"/>
<polygon fill="#000000" stroke="#000000" points="1056.2836,-611.1308 1054.4872,-600.6894 1049.3802,-609.9721 1056.2836,-611.1308"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="1167" cy="-582.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1167" y="-578.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_19&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1459.5837,-1343.9261C1467.9814,-1295.7679 1483.3744,-1163.3145 1415,-1093.8018 1347.9812,-1025.6673 1267.3773,-1128.4374 1203,-1057.8018 1143.1819,-992.1685 1158.3384,-702.6156 1164.8188,-610.5258"/>
<polygon fill="#000000" stroke="#000000" points="1168.3276,-610.5296 1165.5604,-600.3025 1161.346,-610.023 1168.3276,-610.5296"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1669.5,-686.6014 1212.5,-686.6014 1212.5,-478.0005 1669.5,-478.0005 1669.5,-686.6014"/>
<text text-anchor="middle" x="1441" y="-671.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="1441" y="-640.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1441" y="-624.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local run_dot = dot_sh({__input = dotted})</text>
<text text-anchor="middle" x="1441" y="-609.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if run_dot.__exitcode == 0 then</text>
<text text-anchor="middle" x="1441" y="-593.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return tostring(run_dot)</text>
<text text-anchor="middle" x="1441" y="-578.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1441" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(a.red(&quot;Dot returned &quot;) </text>
<text text-anchor="middle" x="1441" y="-547.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(run_dot.__exitcode)</text>
<text text-anchor="middle" x="1441" y="-532.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. a.red(&quot; for &quot; .. out_file ))</text>
<text text-anchor="middle" x="1441" y="-516.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1441" y="-501.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1441" y="-486.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1580.6757,-1343.8767C1564.9072,-1257.8993 1496.9632,-887.4377 1461.986,-696.7261"/>
<polygon fill="#000000" stroke="#000000" points="1465.3872,-695.8689 1460.1406,-686.6644 1458.5021,-697.1318 1465.3872,-695.8689"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2368.5,-1057.8026 1687.5,-1057.8026 1687.5,-106.7992 2368.5,-106.7992 2368.5,-1057.8026"/>
<text text-anchor="middle" x="2028" y="-1042.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2028" y="-1027.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2028" y="-1011.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2028" y="-996.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2028" y="-981.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="2028" y="-949.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2028" y="-934.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2028" y="-918.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2028" y="-903.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2028" y="-888.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2028" y="-872.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2028" y="-857.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2028" y="-841.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2028" y="-826.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2028" y="-811.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2028" y="-795.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2028" y="-780.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2028" y="-764.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2028" y="-749.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2028" y="-734.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2028" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2028" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2028" y="-687.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2028" y="-672.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2028" y="-657.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2028" y="-641.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2028" y="-626.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2028" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2028" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2028" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2028" y="-564.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2028" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2028" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed </text>
<text text-anchor="middle" x="2028" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2028" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2028" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2028" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2028" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-347.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2028" y="-332.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2028" y="-301.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2028" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2028" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="2028" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2028" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2028" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2028" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2028" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2028" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2028" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_21&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1898.0918,-1343.8767C1905.2642,-1301.8291 1924.0429,-1191.7405 1945.1654,-1067.9117"/>
<polygon fill="#000000" stroke="#000000" points="1948.655,-1068.2684 1946.8865,-1057.8222 1941.7547,-1067.0913 1948.655,-1068.2684"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2669,-632.9018 2387,-632.9018 2387,-531.7 2669,-531.7 2669,-632.9018"/>
<text text-anchor="middle" x="2528" y="-617.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2528" y="-602.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2528" y="-555.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2528" y="-539.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_22&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2310.184,-1343.8767C2337.3751,-1248.8054 2464.053,-805.8864 2510.6989,-642.7927"/>
<polygon fill="#000000" stroke="#000000" points="2514.1371,-643.4993 2513.5219,-632.9223 2507.407,-641.5744 2514.1371,-643.4993"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2759,-600.3009 2687,-600.3009 2687,-564.3009 2759,-564.3009 2759,-600.3009"/>
<text text-anchor="middle" x="2723" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_23&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614.8627,-1343.9824C2627.3158,-1297.1578 2660.5967,-1167.6399 2678,-1057.8018 2704.6607,-889.5369 2717.5122,-685.0897 2721.5479,-610.9141"/>
<polygon fill="#000000" stroke="#000000" points="2725.0633,-610.7152 2722.1004,-600.5431 2718.0733,-610.3427 2725.0633,-610.7152"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1423.5,-70.7004 910.5,-70.7004 910.5,-.0997 1423.5,-.0997 1423.5,-70.7004"/>
<text text-anchor="middle" x="1167" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The sh&#45;lib monkeypatches the global metatable, and all we want is one</text>
<text text-anchor="middle" x="1167" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">command, so we do something odd here:</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1167,-564.1045C1167,-488.1677 1167,-195.2105 1167,-81.1839"/>
<polygon fill="#000000" stroke="#000000" points="1170.5001,-81.0398 1167,-71.0398 1163.5001,-81.0399 1170.5001,-81.0398"/>
</g>
</g>
</svg>