<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="3041pt" height="1884pt"
 viewBox="0.00 0.00 3041.00 1884.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1880.4027)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1880.4027 3037,-1880.4027 3037,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="662" cy="-1858.4027" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="662" y="-1854.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 155</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="662" cy="-1786.4027" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="662" y="-1782.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;55</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M662,-1840.234C662,-1832.5336 662,-1823.377 662,-1814.8193"/>
<polygon fill="#000000" stroke="#000000" points="665.5001,-1814.8159 662,-1804.816 658.5001,-1814.816 665.5001,-1814.8159"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="398" cy="-1714.4027" rx="49.5296" ry="18"/>
<text text-anchor="middle" x="398" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Weave</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M615.453,-1774.6866C573.8117,-1764.0758 511.1665,-1747.7933 457,-1732.4027 453.3881,-1731.3764 449.6588,-1730.2936 445.912,-1729.189"/>
<polygon fill="#000000" stroke="#000000" points="446.6052,-1725.7434 436.022,-1726.238 444.6037,-1732.4512 446.6052,-1725.7434"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="498" cy="-1714.4027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="498" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M627.6202,-1771.3091C599.8097,-1759.0996 560.8158,-1741.9803 532.8739,-1729.7132"/>
<polygon fill="#000000" stroke="#000000" points="534.0513,-1726.4077 523.4879,-1725.5925 531.2374,-1732.8172 534.0513,-1726.4077"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="580" cy="-1714.4027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="580" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M642.5671,-1769.3397C631.3006,-1759.4471 616.9965,-1746.8874 604.9098,-1736.2747"/>
<polygon fill="#000000" stroke="#000000" points="607.1653,-1733.5974 597.3415,-1729.6294 602.5466,-1738.8575 607.1653,-1733.5974"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="662" cy="-1714.4027" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="662" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M662,-1768.234C662,-1760.5336 662,-1751.377 662,-1742.8193"/>
<polygon fill="#000000" stroke="#000000" points="665.5001,-1742.8159 662,-1732.816 658.5001,-1742.816 665.5001,-1742.8159"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="817" cy="-1714.4027" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="817" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 10&#45;47</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M694.8715,-1771.1333C717.6442,-1760.5551 748.2155,-1746.3542 773.074,-1734.807"/>
<polygon fill="#000000" stroke="#000000" points="774.6986,-1737.9116 782.2934,-1730.5245 771.7496,-1731.5631 774.6986,-1737.9116"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1065" cy="-1714.4027" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1065" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;53</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M714.2721,-1777.0638C785.4488,-1764.3473 913.1421,-1741.5336 993.2433,-1727.2227"/>
<polygon fill="#000000" stroke="#000000" points="994.0232,-1730.6389 1003.2517,-1725.4346 992.792,-1723.748 994.0232,-1730.6389"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="1602" cy="-1714.4027" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1602" y="-1710.2027" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 56&#45;155</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M721.1573,-1781.8715C884.3101,-1769.3747 1340.6892,-1734.418 1524.1648,-1720.3645"/>
<polygon fill="#000000" stroke="#000000" points="1524.571,-1723.8438 1534.2745,-1719.5902 1524.0363,-1716.8642 1524.571,-1723.8438"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="430.5,-1395.1022 365.5,-1395.1022 365.5,-1359.1022 430.5,-1359.1022 430.5,-1395.1022"/>
<text text-anchor="middle" x="398" y="-1373.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">* Weave</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M398,-1696.2679C398,-1640.79 398,-1473.0452 398,-1405.6183"/>
<polygon fill="#000000" stroke="#000000" points="401.5001,-1405.3266 398,-1395.3266 394.5001,-1405.3267 401.5001,-1405.3266"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="484" cy="-1377.1022" rx="27" ry="18"/>
<text text-anchor="middle" x="484" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M497.2473,-1696.2679C494.9446,-1640.79 487.9822,-1473.0452 485.1836,-1405.6183"/>
<polygon fill="#000000" stroke="#000000" points="488.6682,-1405.1729 484.7564,-1395.3266 481.6742,-1405.4632 488.6682,-1405.1729"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="564" cy="-1377.1022" rx="27" ry="18"/>
<text text-anchor="middle" x="564" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_4&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M579.1398,-1696.2679C576.5081,-1640.79 568.5511,-1473.0452 565.3527,-1405.6183"/>
<polygon fill="#000000" stroke="#000000" points="568.8345,-1405.1495 564.8645,-1395.3266 561.8423,-1405.4813 568.8345,-1405.1495"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="636" cy="-1377.1022" rx="27" ry="18"/>
<text text-anchor="middle" x="636" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M660.6021,-1696.2679C656.3257,-1640.79 643.3955,-1473.0452 638.1981,-1405.6183"/>
<polygon fill="#000000" stroke="#000000" points="641.6631,-1405.028 637.4048,-1395.3266 634.6838,-1405.5661 641.6631,-1405.028"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-1660.2033 681,-1660.2033 681,-1094.0012 1005,-1094.0012 1005,-1660.2033"/>
<text text-anchor="middle" x="843" y="-1645.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="843" y="-1613.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="843" y="-1598.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="843" y="-1583.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="843" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="843" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="843" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="843" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="843" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="843" y="-1490.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="843" y="-1475.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="843" y="-1459.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="843" y="-1444.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="843" y="-1413.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="843" y="-1397.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="843" y="-1350.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot; ()</text>
<text text-anchor="middle" x="843" y="-1334.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">s.verbose = false</text>
<text text-anchor="middle" x="843" y="-1303.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="843" y="-1288.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="843" y="-1272.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="843" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="843" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="843" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local writeOnChange = walk.writeOnChange</text>
<text text-anchor="middle" x="843" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local Path = require &quot;walk/path&quot;</text>
<text text-anchor="middle" x="843" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local Dir = require &quot;walk/directory&quot;</text>
<text text-anchor="middle" x="843" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local File = require &quot;walk/file&quot;</text>
<text text-anchor="middle" x="843" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
<text text-anchor="middle" x="843" y="-1133.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local Doc = require &quot;Orbit/doc&quot;</text>
<text text-anchor="middle" x="843" y="-1102.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local W, w = u.inherit()</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M818.3979,-1696.2679C818.9374,-1689.2684 819.6147,-1680.4817 820.3969,-1670.3349"/>
<polygon fill="#000000" stroke="#000000" points="823.8988,-1670.4431 821.1778,-1660.2037 816.9195,-1669.9051 823.8988,-1670.4431"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1256.5,-1404.3027 1023.5,-1404.3027 1023.5,-1349.9018 1256.5,-1349.9018 1256.5,-1404.3027"/>
<text text-anchor="middle" x="1140" y="-1389.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">function W.weaveMd(weaver, doc)</text>
<text text-anchor="middle" x="1140" y="-1373.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return doc:toMarkdown()</text>
<text text-anchor="middle" x="1140" y="-1358.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_7&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1069.0323,-1696.2679C1080.8644,-1643.0553 1115.6624,-1486.5569 1131.7144,-1414.3652"/>
<polygon fill="#000000" stroke="#000000" points="1135.1878,-1414.8693 1133.9418,-1404.348 1128.3546,-1413.3499 1135.1878,-1414.8693"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1340" cy="-1377.1022" rx="65.81" ry="18"/>
<text text-anchor="middle" x="1340" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : .dot to .svg</text>
</g>
<!-- section_8&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1543.8509,-1704.0934C1495.926,-1694.4609 1433.015,-1678.8244 1415,-1660.4027 1345.6332,-1589.4699 1338.4262,-1462.2235 1338.9302,-1405.61"/>
<polygon fill="#000000" stroke="#000000" points="1342.4357,-1405.3285 1339.1176,-1395.2667 1335.4369,-1405.2016 1342.4357,-1405.3285"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1456" cy="-1377.1022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1456" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1554.5306,-1700.9836C1533.665,-1692.6608 1510.8113,-1679.7588 1497,-1660.4027 1440.9829,-1581.8967 1446.3334,-1459.6161 1452.2015,-1405.0416"/>
<polygon fill="#000000" stroke="#000000" points="1455.6833,-1405.4004 1453.364,-1395.0625 1448.7303,-1404.5903 1455.6833,-1405.4004"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1538" cy="-1377.1022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1538" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1593.346,-1696.2879C1588.7477,-1685.9795 1583.3657,-1672.7058 1580,-1660.4027 1555.0128,-1569.0623 1543.9586,-1456.8296 1539.936,-1405.3449"/>
<polygon fill="#000000" stroke="#000000" points="1543.4215,-1405.0197 1539.1818,-1395.3101 1536.4412,-1405.5443 1543.4215,-1405.0197"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="1666" cy="-1377.1022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1666" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 62&#45;74</text>
</g>
<!-- section_8&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1605.4409,-1696.2679C1615.9891,-1640.6756 1647.9269,-1472.353 1660.6682,-1405.2025"/>
<polygon fill="#000000" stroke="#000000" points="1664.1165,-1405.8038 1662.5421,-1395.3266 1657.2392,-1404.4989 1664.1165,-1405.8038"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2073" cy="-1377.1022" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2073" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 77&#45;140</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1652.0449,-1701.5587C1682.2489,-1692.5748 1720.796,-1678.8674 1752,-1660.4027 1878.8177,-1585.3594 2001.7258,-1456.6452 2050.7248,-1402.3918"/>
<polygon fill="#000000" stroke="#000000" points="2053.3355,-1404.7229 2057.4096,-1394.9427 2048.1257,-1400.0477 2053.3355,-1404.7229"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2531" cy="-1377.1022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2531" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 143&#45;150</text>
</g>
<!-- section_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1672.3872,-1712.4876C1802.7031,-1708.1481 2076.2681,-1695.0977 2164,-1660.4027 2314.4813,-1600.8924 2454.9518,-1460.1296 2508.3272,-1402.4364"/>
<polygon fill="#000000" stroke="#000000" points="2511.0926,-1404.5994 2515.2727,-1394.864 2505.9339,-1399.8678 2511.0926,-1404.5994"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2860" cy="-1377.1022" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2860" y="-1372.9022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 152&#45;154</text>
</g>
<!-- section_8&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1672.6383,-1713.9575C1890.4943,-1712.1323 2542.3941,-1703.1218 2627,-1660.4027 2740.3517,-1603.1692 2818.4823,-1463.2185 2847.49,-1404.1312"/>
<polygon fill="#000000" stroke="#000000" points="2850.6817,-1405.5705 2851.8755,-1395.0431 2844.3773,-1402.5283 2850.6817,-1405.5705"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-610.5021 0,-610.5021 0,-538.6997 450,-538.6997 450,-610.5021"/>
<text text-anchor="middle" x="225" y="-547.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Our weaver is currently somewhat narrowly focused on markdown.</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M482.5898,-1358.8894C478.7526,-1313.4304 466.5131,-1191.5988 439,-1093.8018 387.8587,-912.0172 291.5991,-708.0912 247.7715,-619.5931"/>
<polygon fill="#000000" stroke="#000000" points="250.7799,-617.7821 243.1942,-610.3857 244.5117,-620.8983 250.7799,-617.7821"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="659.5,-594.503 468.5,-594.503 468.5,-554.6988 659.5,-554.6988 659.5,-594.503"/>
<text text-anchor="middle" x="564" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">This will change in time.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M564,-1358.8331C564,-1254.6739 564,-735.8842 564,-604.7514"/>
<polygon fill="#000000" stroke="#000000" points="567.5001,-604.6289 564,-594.6289 560.5001,-604.629 567.5001,-604.6289"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="834,-594.503 678,-594.503 678,-554.6988 834,-554.6988 834,-594.503"/>
<text text-anchor="middle" x="756" y="-563.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">Now to activate dot!</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.102,-1358.8441C643.3378,-1313.7773 657.5816,-1193.6608 672,-1093.8018 698.9194,-907.3632 737.0017,-684.2429 750.7745,-604.6319"/>
<polygon fill="#000000" stroke="#000000" points="754.2939,-604.8205 752.5529,-594.3697 747.3967,-603.6252 754.2939,-604.8205"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1226,-592.6009 1098,-592.6009 1098,-556.6009 1226,-556.6009 1226,-592.6009"/>
<text text-anchor="middle" x="1162" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** .dot to .svg</text>
</g>
<!-- header_18&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>header_18&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1337.9552,-1358.8848C1332.1649,-1312.3914 1312.8648,-1186.4712 1265,-1093.8018 1255.4421,-1075.2971 1243.537,-1076.7991 1235,-1057.8018 1162.9078,-897.3766 1159.704,-679.9119 1161.0937,-602.9859"/>
<polygon fill="#000000" stroke="#000000" points="1164.5996,-602.7553 1161.3244,-592.6794 1157.6014,-602.5985 1164.5996,-602.7553"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1271" cy="-574.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1271" y="-570.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_19&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1459.2653,-1358.9684C1466.9997,-1309.9017 1481.1464,-1172.9121 1415,-1093.8018 1382.545,-1054.9859 1338.0897,-1097.7196 1307,-1057.8018 1198.4165,-918.3851 1243.7952,-682.4097 1263.5744,-602.2201"/>
<polygon fill="#000000" stroke="#000000" points="1267.0032,-602.9374 1266.0675,-592.384 1260.2177,-601.2175 1267.0032,-602.9374"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1343" cy="-574.6009" rx="27" ry="18"/>
<text text-anchor="middle" x="1343" y="-570.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_20&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.3739,-1358.8764C1549.3819,-1309.578 1564.1549,-1172.0578 1497,-1093.8018 1461.2926,-1052.1917 1413.2432,-1100.6249 1379,-1057.8018 1268.6384,-919.7883 1315.1571,-682.9132 1335.4027,-602.3556"/>
<polygon fill="#000000" stroke="#000000" points="1338.843,-603.0309 1337.9541,-592.4734 1332.0653,-601.2809 1338.843,-603.0309"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1943.5,-663.5017 1388.5,-663.5017 1388.5,-485.7001 1943.5,-485.7001 1943.5,-663.5017"/>
<text text-anchor="middle" x="1666" y="-648.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local popen = io.popen</text>
<text text-anchor="middle" x="1666" y="-632.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dotToSvg(dotted, out_file)</text>
<text text-anchor="middle" x="1666" y="-617.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local success, svg = pcall (popen,</text>
<text text-anchor="middle" x="1666" y="-601.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;dot &#45;Tsvg &quot; .. tostring(out_file), &quot;r&quot;):read(&quot;*a&quot;)</text>
<text text-anchor="middle" x="1666" y="-586.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="1666" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return svg</text>
<text text-anchor="middle" x="1666" y="-555.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1666" y="-540.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo start using %d and format!</text>
<text text-anchor="middle" x="1666" y="-524.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:complain(&quot;dotError&quot;, &quot;dot failed with &quot; .. success)</text>
<text text-anchor="middle" x="1666" y="-509.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1666" y="-494.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1666,-1358.8331C1666,-1268.2276 1666,-863.879 1666,-673.8671"/>
<polygon fill="#000000" stroke="#000000" points="1669.5001,-673.6 1666,-663.6001 1662.5001,-673.6001 1669.5001,-673.6"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2642.5,-1058.0027 1961.5,-1058.0027 1961.5,-91.1991 2642.5,-91.1991 2642.5,-1058.0027"/>
<text text-anchor="middle" x="2302" y="-1042.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_dir(weaver, pwd, depth)</text>
<text text-anchor="middle" x="2302" y="-1027.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="2302" y="-1011.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir_str in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2302" y="-996.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local dir = Dir(dir_str)</text>
<text text-anchor="middle" x="2302" y="-981.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir.path.str)</text>
<text text-anchor="middle" x="2302" y="-965.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir.path.str) then</text>
<text text-anchor="middle" x="2302" y="-950.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dir = dir.path.str &#45;&#45; migrate this down</text>
<text text-anchor="middle" x="2302" y="-934.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="2302" y="-919.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir)</text>
<text text-anchor="middle" x="2302" y="-904.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="2302" y="-888.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="2302" y="-873.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if extension(f) == &quot;.orb&quot; then</text>
<text text-anchor="middle" x="2302" y="-857.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Weave and prepare out directory</text>
<text text-anchor="middle" x="2302" y="-842.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:verb((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. f)</text>
<text text-anchor="middle" x="2302" y="-827.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local orb_f = read(f)</text>
<text text-anchor="middle" x="2302" y="-811.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(orb_f)</text>
<text text-anchor="middle" x="2302" y="-796.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_md_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/md&quot;, dirname(f))</text>
<text text-anchor="middle" x="2302" y="-780.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/dot&quot;, dirname(f))</text>
<text text-anchor="middle" x="2302" y="-765.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_svg_dir = subLastFor(&quot;/orb&quot;, &quot;/doc/svg&quot;, dirname(f))</text>
<text text-anchor="middle" x="2302" y="-750.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_md_dir)</text>
<text text-anchor="middle" x="2302" y="-734.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_dot_dir)</text>
<text text-anchor="middle" x="2302" y="-719.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(doc_svg_dir)</text>
<text text-anchor="middle" x="2302" y="-703.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;5) &#45;&#45; &#160;== #&quot;.orb&quot;</text>
<text text-anchor="middle" x="2302" y="-688.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_md_name = doc_md_dir .. &quot;/&quot; .. bare_name .. &quot;.md&quot;</text>
<text text-anchor="middle" x="2302" y="-673.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_dot_name = doc_dot_dir .. &quot;/&quot; .. bare_name .. &quot;.dot&quot;</text>
<text text-anchor="middle" x="2302" y="-657.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_svg_name = doc_svg_dir .. &quot;/&quot; .. bare_name .. &quot;.svg&quot;</text>
<text text-anchor="middle" x="2302" y="-642.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_md = weaver:weaveMd(doc) or &quot;&quot;</text>
<text text-anchor="middle" x="2302" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Compare, report, and write out if necessary</text>
<text text-anchor="middle" x="2302" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_md = read(out_md_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2302" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_md = writeOnChange(woven_md, last_md, out_md_name, depth)</text>
<text text-anchor="middle" x="2302" y="-564.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_dot = doc:dot() or &quot;&quot;</text>
<text text-anchor="middle" x="2302" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_dot = read(out_dot_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2302" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local changed_dot = writeOnChange(woven_dot, last_dot, out_dot_name, depth)</text>
<text text-anchor="middle" x="2302" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; SVG call is fairly slow and only useful of the dot has changed</text>
<text text-anchor="middle" x="2302" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if changed_dot then</text>
<text text-anchor="middle" x="2302" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local woven_svg = dotToSvg(woven_dot, out_dot_name)</text>
<text text-anchor="middle" x="2302" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last_svg = read(out_svg_name) or &quot;&quot;</text>
<text text-anchor="middle" x="2302" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;writeOnChange(woven_svg, last_svg, out_svg_name, depth)</text>
<text text-anchor="middle" x="2302" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-332.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="2302" y="-317.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2302" y="-285.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function weave_all(weaver, pwd)</text>
<text text-anchor="middle" x="2302" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="2302" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="2302" y="-239.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;orb&quot;, dir) then</text>
<text text-anchor="middle" x="2302" y="-224.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(a.cyan(&quot;Weave: &quot; .. dir))</text>
<text text-anchor="middle" x="2302" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return weave_dir(weaver, dir, 0)</text>
<text text-anchor="middle" x="2302" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-177.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2302" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="2302" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2302" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">W.weave_all = weave_all</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2078.2132,-1358.8331C2090.6918,-1315.1035 2124.0252,-1198.291 2161.2718,-1067.765"/>
<polygon fill="#000000" stroke="#000000" points="2164.6967,-1068.5175 2164.0752,-1057.9409 2157.9654,-1066.5966 2164.6967,-1068.5175"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2943,-625.2018 2661,-625.2018 2661,-524 2943,-524 2943,-625.2018"/>
<text text-anchor="middle" x="2802" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Weaver, doc)</text>
<text text-anchor="middle" x="2802" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local weaver = setmetatable({}, W)</text>
<text text-anchor="middle" x="2802" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return weaver</text>
<text text-anchor="middle" x="2802" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_23&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2538.2645,-1358.8759C2557.5422,-1310.2821 2611.2359,-1173.4448 2651,-1057.8018 2702.9082,-906.8411 2757.1705,-726.8553 2784.3164,-635.0229"/>
<polygon fill="#000000" stroke="#000000" points="2787.6999,-635.9231 2787.1744,-625.3414 2780.9863,-633.9413 2787.6999,-635.9231"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3033,-592.6009 2961,-592.6009 2961,-556.6009 3033,-556.6009 3033,-592.6009"/>
<text text-anchor="middle" x="2997" y="-571.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">return W</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_24&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2866.5087,-1359.0347C2883.5874,-1310.8293 2929.8882,-1174.86 2952,-1057.8018 2984.2699,-886.9675 2993.7548,-677.5868 2996.2201,-602.7981"/>
<polygon fill="#000000" stroke="#000000" points="2999.7196,-602.8656 2996.5347,-592.7609 2992.723,-602.6462 2999.7196,-602.8656"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1260,-55.6015 1132,-55.6015 1132,.2015 1260,.2015 1260,-55.6015"/>
<text text-anchor="middle" x="1196" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Stripped down:</text>
</g>
<!-- raw_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1272.6479,-556.4712C1277.9328,-491.5259 1291.0115,-265.1381 1235,-91.4 1231.9879,-82.057 1227.3468,-72.6694 1222.3035,-64.0805"/>
<polygon fill="#000000" stroke="#000000" points="1225.1988,-62.108 1216.9538,-55.4544 1219.25,-65.7975 1225.1988,-62.108"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1560,-47.6021 1278,-47.6021 1278,-7.7979 1560,-7.7979 1560,-47.6021"/>
<text text-anchor="middle" x="1419" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] #todo add error checking here.</text>
</g>
<!-- raw_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1341.2836,-556.4489C1335.7674,-491.4283 1322.0044,-264.8178 1379,-91.4 1383.0773,-78.9943 1390.0727,-66.5606 1397.0843,-56.0139"/>
<polygon fill="#000000" stroke="#000000" points="1400.0727,-57.8472 1402.9142,-47.6405 1394.3279,-53.8474 1400.0727,-57.8472"/>
</g>
</g>
</svg>
