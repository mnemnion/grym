<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1893pt" height="1451pt"
 viewBox="0.00 0.00 1892.50 1450.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1446.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1446.6022 1888.5,-1446.6022 1888.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1016" cy="-1424.6022" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="1016" y="-1420.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 118</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1016" cy="-1352.6022" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1016" y="-1348.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;118</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1016,-1406.4335C1016,-1398.7331 1016,-1389.5765 1016,-1381.0188"/>
<polygon fill="#000000" stroke="#000000" points="1019.5001,-1381.0154 1016,-1371.0154 1012.5001,-1381.0155 1019.5001,-1381.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="565" cy="-1280.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="565" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M953.9779,-1347.0891C854.9054,-1337.8531 665.5344,-1318.3192 601,-1298.6022 599.0954,-1298.0202 597.1687,-1297.3448 595.2484,-1296.6039"/>
<polygon fill="#000000" stroke="#000000" points="596.3969,-1293.2861 585.8325,-1292.4833 593.5905,-1299.6989 596.3969,-1293.2861"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="642" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="642" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M953.89,-1347.2668C886.2095,-1340.3656 775.2566,-1325.8542 683,-1298.6022 680.5863,-1297.8892 678.1274,-1297.0686 675.6733,-1296.1792"/>
<polygon fill="#000000" stroke="#000000" points="676.9241,-1292.9101 666.3377,-1292.4885 674.3506,-1299.4199 676.9241,-1292.9101"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="765" cy="-1280.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="765" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;77</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M970.8363,-1339.6468C929.2845,-1327.7276 867.4631,-1309.994 822.4199,-1297.0732"/>
<polygon fill="#000000" stroke="#000000" points="823.3679,-1293.704 812.7904,-1294.311 821.4377,-1300.4327 823.3679,-1293.704"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="888" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="888" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M987.2743,-1336.4439C967.2418,-1325.1756 940.5039,-1310.1356 919.824,-1298.5031"/>
<polygon fill="#000000" stroke="#000000" points="921.5143,-1295.4382 911.0826,-1293.5861 918.0824,-1301.5393 921.5143,-1295.4382"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1016" cy="-1280.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1016" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;88</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1016,-1334.4335C1016,-1326.7331 1016,-1317.5765 1016,-1309.0188"/>
<polygon fill="#000000" stroke="#000000" points="1019.5001,-1309.0154 1016,-1299.0154 1012.5001,-1309.0155 1019.5001,-1309.0154"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1215" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1215" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1055.7923,-1338.2049C1091.408,-1325.3188 1143.22,-1306.5728 1177.9664,-1294.0013"/>
<polygon fill="#000000" stroke="#000000" points="1179.5126,-1297.1639 1187.7252,-1290.4704 1177.131,-1290.5815 1179.5126,-1297.1639"/>
</g>
<!-- prose_8 -->
<g id="node9" class="node">
<title>prose_8</title>
<ellipse fill="none" stroke="#000000" cx="1333" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1333" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;prose_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1067.0599,-1341.243C1115.6653,-1330.3992 1190.8533,-1313.5454 1256,-1298.6022 1268.0052,-1295.8484 1281.0532,-1292.814 1292.9384,-1290.0339"/>
<polygon fill="#000000" stroke="#000000" points="1294.0905,-1293.3588 1303.0283,-1287.6696 1292.4935,-1286.5434 1294.0905,-1293.3588"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1433" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1433" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1076.9979,-1346.1585C1148.6569,-1337.9549 1270.8616,-1321.9815 1374,-1298.6022 1380.947,-1297.0274 1388.2671,-1295.0558 1395.2973,-1292.9999"/>
<polygon fill="#000000" stroke="#000000" points="1396.7583,-1296.2144 1405.3129,-1289.9638 1394.7276,-1289.5154 1396.7583,-1296.2144"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1619" cy="-1280.6022" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="1619" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 100&#45;118</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1076.0306,-1345.6434C1163.5573,-1335.4703 1331.3249,-1315.8687 1474,-1298.6022 1493.6044,-1296.2296 1514.6942,-1293.6355 1534.5531,-1291.174"/>
<polygon fill="#000000" stroke="#000000" points="1535.0074,-1294.6446 1544.5001,-1289.9395 1534.1451,-1287.6979 1535.0074,-1294.6446"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="78" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="78" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M617.7618,-1268.3498C612.3636,-1266.0802 606.5826,-1263.9904 601,-1262.6022 548.345,-1249.5078 152.1819,-1265.1529 114,-1226.6022 -33.2758,-1077.9037 41.2025,-784.476 69.0302,-693.7695"/>
<polygon fill="#000000" stroke="#000000" points="72.4504,-694.5593 72.0995,-683.9702 65.7704,-692.4669 72.4504,-694.5593"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="671,-1226.8033 123,-1226.8033 123,-105.999 671,-105.999 671,-1226.8033"/>
<text text-anchor="middle" x="397" y="-1211.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local lpeg = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="397" y="-1196.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="397" y="-1164.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function makerange(first, second)</text>
<text text-anchor="middle" x="397" y="-1149.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patts = {}</text>
<text text-anchor="middle" x="397" y="-1133.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt &#160;= {}</text>
<text text-anchor="middle" x="397" y="-1118.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if (second) then</text>
<text text-anchor="middle" x="397" y="-1103.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if (string.len(first) == string.len(second)) then</text>
<text text-anchor="middle" x="397" y="-1087.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 1, string.len(first) do</text>
<text text-anchor="middle" x="397" y="-1072.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patts[i] = lpeg.R(string.sub(first,i,i)..string.sub(second,i,i))</text>
<text text-anchor="middle" x="397" y="-1056.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-1041.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patts[1]</text>
<text text-anchor="middle" x="397" y="-1026.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 2, string.len(first) do</text>
<text text-anchor="middle" x="397" y="-1010.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patt + patts[i]</text>
<text text-anchor="middle" x="397" y="-995.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-979.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return patt</text>
<text text-anchor="middle" x="397" y="-964.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="397" y="-949.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(&quot;Ranges must be of equal byte width&quot;)</text>
<text text-anchor="middle" x="397" y="-933.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return {}</text>
<text text-anchor="middle" x="397" y="-918.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-902.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else </text>
<text text-anchor="middle" x="397" y="-887.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return lpeg.R(first)</text>
<text text-anchor="middle" x="397" y="-872.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-856.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="397" y="-809.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function num_bytes(str)</text>
<text text-anchor="middle" x="397" y="-793.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;returns the number of bytes in the next character in str</text>
<text text-anchor="middle" x="397" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local c = str:byte(1)</text>
<text text-anchor="middle" x="397" y="-763.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if c &gt;= 0x00 and c &lt;= 0x7F then</text>
<text text-anchor="middle" x="397" y="-747.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 1</text>
<text text-anchor="middle" x="397" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xC2 and c &lt;= 0xDF then</text>
<text text-anchor="middle" x="397" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 2</text>
<text text-anchor="middle" x="397" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xE0 and c &lt;= 0xEF then</text>
<text text-anchor="middle" x="397" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 3</text>
<text text-anchor="middle" x="397" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xF0 and c &lt;= 0xF4 then</text>
<text text-anchor="middle" x="397" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 4</text>
<text text-anchor="middle" x="397" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="397" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Su (str)</text>
<text text-anchor="middle" x="397" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[</text>
<text text-anchor="middle" x="397" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;convert a &#39;set&#39; pattern to uniquely match the characters </text>
<text text-anchor="middle" x="397" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;in the range.</text>
<text text-anchor="middle" x="397" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local catch = {}</text>
<text text-anchor="middle" x="397" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local i = 0</text>
<text text-anchor="middle" x="397" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1, #str do</text>
<text text-anchor="middle" x="397" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;catch[i]</text>
<text text-anchor="middle" x="397" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="397" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="397" y="-407.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function spanner(first, last, str, root)</text>
<text text-anchor="middle" x="397" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local vals = {}</text>
<text text-anchor="middle" x="397" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.span = true</text>
<text text-anchor="middle" x="397" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.val = string.sub(str, first, last &#45; 1)</text>
<text text-anchor="middle" x="397" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.first = first</text>
<text text-anchor="middle" x="397" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.last = last &#45; 1</text>
<text text-anchor="middle" x="397" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if vals.last &gt;= vals.first then</text>
<text text-anchor="middle" x="397" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return vals</text>
<text text-anchor="middle" x="397" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="397" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; If a capture contains nothing, we don&#39;t want a node for it</text>
<text text-anchor="middle" x="397" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return nil</text>
<text text-anchor="middle" x="397" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="397" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Csp (patt)</text>
<text text-anchor="middle" x="397" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return lpeg.Cp() </text>
<text text-anchor="middle" x="397" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cmt(patt, function() return true end) </text>
<text text-anchor="middle" x="397" y="-160.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cp() </text>
<text text-anchor="middle" x="397" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(1) </text>
<text text-anchor="middle" x="397" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(2) / spanner</text>
<text text-anchor="middle" x="397" y="-114.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M730.8692,-1264.4664C713.9727,-1255.1977 694.2064,-1242.2767 680,-1226.6022 679.2454,-1225.7696 678.4923,-1224.9346 677.7406,-1224.0972"/>
<polygon fill="#000000" stroke="#000000" points="680.2644,-1221.6678 671.0161,-1216.4987 675.0224,-1226.3069 680.2644,-1221.6678"/>
</g>
<!-- raw_14 -->
<g id="node15" class="node">
<title>raw_14</title>
<ellipse fill="none" stroke="#000000" cx="716" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="716" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_14 -->
<g id="edge14" class="edge">
<title>prose_5&#45;&gt;raw_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M862.4975,-1269.1638C857.3853,-1266.9394 852.0373,-1264.6607 847,-1262.6022 805.2034,-1245.5211 778.8331,-1262.9161 752,-1226.6022 688.994,-1141.3344 707.0812,-796.3613 713.9309,-694.7159"/>
<polygon fill="#000000" stroke="#000000" points="717.4323,-694.816 714.6305,-684.5984 710.4489,-694.3331 717.4323,-694.816"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1253,-716.8021 761,-716.8021 761,-616.0001 1253,-616.0001 1253,-716.8021"/>
<text text-anchor="middle" x="1007" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function split (s, sep)</text>
<text text-anchor="middle" x="1007" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;sep = lpeg.P(sep)</text>
<text text-anchor="middle" x="1007" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local elem = lpeg.C((1 &#45; sep)^0)</text>
<text text-anchor="middle" x="1007" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local p = lpeg.Ct(elem * (sep * elem)^0) &#160;&#160;&#45;&#45; make a table capture</text>
<text text-anchor="middle" x="1007" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return lpeg.match(p, s)</text>
<text text-anchor="middle" x="1007" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_6&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.7355,-1262.5529C1014.5711,-1183.0851 1009.871,-862.3341 1007.8888,-727.0548"/>
<polygon fill="#000000" stroke="#000000" points="1011.3857,-726.8147 1007.7395,-716.8671 1004.3865,-726.9174 1011.3857,-726.8147"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1298" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1298" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_7&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1233.0066,-1265.5468C1243.459,-1255.6577 1255.7598,-1241.7749 1262,-1226.6022 1340.1278,-1036.6372 1314.0132,-779.758 1302.3439,-694.9028"/>
<polygon fill="#000000" stroke="#000000" points="1305.7743,-694.1645 1300.9027,-684.7561 1298.8438,-695.1489 1305.7743,-694.1645"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1370" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1370" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_8&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_8&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1334.0873,-1262.5529C1339.3155,-1175.7639 1361.8804,-801.1864 1368.2939,-694.7224"/>
<polygon fill="#000000" stroke="#000000" points="1371.8049,-694.6437 1368.9126,-684.4513 1364.8176,-694.2227 1371.8049,-694.6437"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1442" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1442" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_9&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1433.2645,-1262.5529C1434.5362,-1175.7639 1440.025,-801.1864 1441.585,-694.7224"/>
<polygon fill="#000000" stroke="#000000" points="1445.0885,-694.5016 1441.7355,-684.4513 1438.0893,-694.3989 1445.0885,-694.5016"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1832.5,-803.3018 1487.5,-803.3018 1487.5,-529.5005 1832.5,-529.5005 1832.5,-803.3018"/>
<text text-anchor="middle" x="1660" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local I = lpeg.Cp()</text>
<text text-anchor="middle" x="1660" y="-756.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function &#160;anyP(p)</text>
<text text-anchor="middle" x="1660" y="-741.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return lpeg.P{ I * p * I + 1 * lpeg.V(1) }</text>
<text text-anchor="middle" x="1660" y="-725.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1660" y="-662.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ru = makerange</text>
<text text-anchor="middle" x="1660" y="-614.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">return { R = Ru,</text>
<text text-anchor="middle" x="1660" y="-599.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;Csp = Csp,</text>
<text text-anchor="middle" x="1660" y="-584.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;anyP = anyP,</text>
<text text-anchor="middle" x="1660" y="-568.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;match = lpeg.match,</text>
<text text-anchor="middle" x="1660" y="-553.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;split = split,</text>
<text text-anchor="middle" x="1660" y="-537.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;spanner = spanner }</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_10&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1620.2048,-1262.5529C1624.5763,-1197.0661 1639.8855,-967.7269 1650.1904,-813.3534"/>
<polygon fill="#000000" stroke="#000000" points="1653.6879,-813.5069 1650.8618,-803.296 1646.7034,-813.0406 1653.6879,-813.5069"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="156,-55.0021 0,-55.0021 0,-15.198 156,-15.198 156,-55.0021"/>
<text text-anchor="middle" x="78" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> extended PEG module</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M78,-648.1883C78,-559.8525 78,-175.7661 78,-65.0634"/>
<polygon fill="#000000" stroke="#000000" points="81.5001,-64.9347 78,-54.9347 74.5001,-64.9348 81.5001,-64.9347"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="804.5,-55.0021 627.5,-55.0021 627.5,-15.198 804.5,-15.198 804.5,-55.0021"/>
<text text-anchor="middle" x="716" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> from the lpeg tutorial</text>
</g>
<!-- raw_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>raw_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M716,-648.1883C716,-559.8525 716,-175.7661 716,-65.0634"/>
<polygon fill="#000000" stroke="#000000" points="719.5001,-64.9347 716,-54.9347 712.5001,-64.9348 719.5001,-64.9347"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1270,-70.3004 988,-70.3004 988,.1003 1270,.1003 1270,-70.3004"/>
<text text-anchor="middle" x="1129" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Match a pattern anywhere in a string.</text>
<text text-anchor="middle" x="1129" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1129" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Taken from the lpeg tutorial</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1302.5817,-648.51C1320.4472,-574.5049 1378.8565,-287.7048 1262,-106.2001 1254.4155,-94.4197 1244.1906,-84.4576 1232.7604,-76.0684"/>
<polygon fill="#000000" stroke="#000000" points="1234.4728,-72.9989 1224.245,-70.2342 1230.5163,-78.7736 1234.4728,-72.9989"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1451.5,-62.4005 1288.5,-62.4005 1288.5,-7.7996 1451.5,-7.7996 1451.5,-62.4005"/>
<text text-anchor="middle" x="1370" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #param</text>
<text text-anchor="middle" x="1370" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; p : lpeg pattern</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1370,-648.1883C1370,-561.7437 1370,-192.0769 1370,-72.5441"/>
<polygon fill="#000000" stroke="#000000" points="1373.5001,-72.4193 1370,-62.4194 1366.5001,-72.4194 1373.5001,-72.4193"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1884.5,-62.4005 1469.5,-62.4005 1469.5,-7.7996 1884.5,-7.7996 1884.5,-62.4005"/>
<text text-anchor="middle" x="1677" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #returns</text>
<text text-anchor="middle" x="1677" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45; the first and last index of the first match, or nil</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1440.5947,-648.1772C1434.3068,-561.7762 1411.8583,-193.9479 1478,-106.2001 1489.1241,-91.4422 1522.3129,-77.2883 1558.4768,-65.5487"/>
<polygon fill="#000000" stroke="#000000" points="1559.7525,-68.8161 1568.2294,-62.4606 1557.6394,-62.1427 1559.7525,-68.8161"/>
</g>
</g>
</svg>