<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1923pt" height="1451pt"
 viewBox="0.00 0.00 1923.29 1450.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1446.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1446.6022 1919.2876,-1446.6022 1919.2876,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1037.7876" cy="-1424.6022" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="1037.7876" y="-1420.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 118</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1037.7876" cy="-1352.6022" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1037.7876" y="-1348.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;118</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1037.7876,-1406.4335C1037.7876,-1398.7331 1037.7876,-1389.5765 1037.7876,-1381.0188"/>
<polygon fill="#000000" stroke="#000000" points="1041.2877,-1381.0154 1037.7876,-1371.0154 1034.2877,-1381.0155 1041.2877,-1381.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="182.7876" cy="-1280.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="182.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M973.7473,-1349.1652C847.3492,-1342.0855 556.9526,-1324.3513 313.7876,-1298.6022 281.8848,-1295.2239 245.7759,-1290.1701 219.5597,-1286.2768"/>
<polygon fill="#000000" stroke="#000000" points="219.7325,-1282.7636 209.3239,-1284.741 218.6938,-1289.6861 219.7325,-1282.7636"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="354.7876" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="354.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M973.7885,-1349.0766C864.6347,-1342.552 635.6476,-1326.6396 443.7876,-1298.6022 427.6918,-1296.25 410.1118,-1292.8696 394.8592,-1289.672"/>
<polygon fill="#000000" stroke="#000000" points="395.2293,-1286.172 384.7184,-1287.5023 393.7648,-1293.0171 395.2293,-1286.172"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="525.7876" cy="-1280.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="525.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;77</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M979.5531,-1344.4129C885.8285,-1331.2329 701.6786,-1305.3368 599.1318,-1290.9162"/>
<polygon fill="#000000" stroke="#000000" points="599.5552,-1287.4414 589.1652,-1289.5146 598.5804,-1294.3732 599.5552,-1287.4414"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="827.7876" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="827.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M996.7989,-1338.5489C958.6121,-1325.4563 902.1593,-1306.101 865.1769,-1293.4214"/>
<polygon fill="#000000" stroke="#000000" points="865.8883,-1289.9653 855.2936,-1290.0328 863.618,-1296.5869 865.8883,-1289.9653"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1037.7876" cy="-1280.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1037.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;88</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1037.7876,-1334.4335C1037.7876,-1326.7331 1037.7876,-1317.5765 1037.7876,-1309.0188"/>
<polygon fill="#000000" stroke="#000000" points="1041.2877,-1309.0154 1037.7876,-1299.0154 1034.2877,-1309.0155 1041.2877,-1309.0154"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1236.7876" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1236.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1077.5799,-1338.2049C1113.1956,-1325.3188 1165.0076,-1306.5728 1199.754,-1294.0013"/>
<polygon fill="#000000" stroke="#000000" points="1201.3002,-1297.1639 1209.5128,-1290.4704 1198.9185,-1290.5815 1201.3002,-1297.1639"/>
</g>
<!-- prose_8 -->
<g id="node9" class="node">
<title>prose_8</title>
<ellipse fill="none" stroke="#000000" cx="1354.7876" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1354.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;prose_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1088.8474,-1341.243C1137.4529,-1330.3992 1212.6409,-1313.5454 1277.7876,-1298.6022 1289.7928,-1295.8484 1302.8407,-1292.814 1314.726,-1290.0339"/>
<polygon fill="#000000" stroke="#000000" points="1315.8781,-1293.3588 1324.8159,-1287.6696 1314.2811,-1286.5434 1315.8781,-1293.3588"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1454.7876" cy="-1280.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1454.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1098.7855,-1346.1585C1170.4445,-1337.9549 1292.6492,-1321.9815 1395.7876,-1298.6022 1402.7346,-1297.0274 1410.0546,-1295.0558 1417.0849,-1292.9999"/>
<polygon fill="#000000" stroke="#000000" points="1418.5459,-1296.2144 1427.1005,-1289.9638 1416.5151,-1289.5154 1418.5459,-1296.2144"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1640.7876" cy="-1280.6022" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="1640.7876" y="-1276.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 100&#45;118</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1097.8182,-1345.6434C1185.3449,-1335.4703 1353.1125,-1315.8687 1495.7876,-1298.6022 1515.392,-1296.2296 1536.4818,-1293.6355 1556.3407,-1291.174"/>
<polygon fill="#000000" stroke="#000000" points="1556.7949,-1294.6446 1566.2877,-1289.9395 1555.9327,-1287.6979 1556.7949,-1294.6446"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="63.7876,-684.4011 9.7876,-684.4011 9.7876,-648.4011 63.7876,-648.4011 63.7876,-684.4011"/>
</g>
<!-- header_2&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>header_2&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M156.4505,-1275.5758C130.4239,-1269.0936 91.8242,-1255.0763 72.7876,-1226.6022 -42.3861,-1054.3305 8.929,-781.761 29.6208,-694.3538"/>
<polygon fill="#000000" stroke="#000000" points="33.0783,-694.9472 32.0358,-684.4038 26.2758,-693.2961 33.0783,-694.9472"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="108.7876" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="108.7876" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_3&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M322.9856,-1276.9649C270.0318,-1270.2035 167.3566,-1253.8563 144.7876,-1226.6022 77.0926,-1144.8545 98.5309,-796.6744 106.4329,-694.62"/>
<polygon fill="#000000" stroke="#000000" points="109.9363,-694.7148 107.2378,-684.4694 102.9582,-694.1614 109.9363,-694.7148"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="701.7876,-1226.8033 153.7876,-1226.8033 153.7876,-105.999 701.7876,-105.999 701.7876,-1226.8033"/>
<text text-anchor="middle" x="427.7876" y="-1211.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local lpeg = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="427.7876" y="-1196.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="427.7876" y="-1164.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function makerange(first, second)</text>
<text text-anchor="middle" x="427.7876" y="-1149.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patts = {}</text>
<text text-anchor="middle" x="427.7876" y="-1133.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt &#160;= {}</text>
<text text-anchor="middle" x="427.7876" y="-1118.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if (second) then</text>
<text text-anchor="middle" x="427.7876" y="-1103.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if (string.len(first) == string.len(second)) then</text>
<text text-anchor="middle" x="427.7876" y="-1087.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 1, string.len(first) do</text>
<text text-anchor="middle" x="427.7876" y="-1072.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patts[i] = lpeg.R(string.sub(first,i,i)..string.sub(second,i,i))</text>
<text text-anchor="middle" x="427.7876" y="-1056.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-1041.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patts[1]</text>
<text text-anchor="middle" x="427.7876" y="-1026.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 2, string.len(first) do</text>
<text text-anchor="middle" x="427.7876" y="-1010.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patt + patts[i]</text>
<text text-anchor="middle" x="427.7876" y="-995.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-979.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return patt</text>
<text text-anchor="middle" x="427.7876" y="-964.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="427.7876" y="-949.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(&quot;Ranges must be of equal byte width&quot;)</text>
<text text-anchor="middle" x="427.7876" y="-933.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return {}</text>
<text text-anchor="middle" x="427.7876" y="-918.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-902.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else </text>
<text text-anchor="middle" x="427.7876" y="-887.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return lpeg.R(first)</text>
<text text-anchor="middle" x="427.7876" y="-872.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-856.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="427.7876" y="-809.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function num_bytes(str)</text>
<text text-anchor="middle" x="427.7876" y="-793.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;returns the number of bytes in the next character in str</text>
<text text-anchor="middle" x="427.7876" y="-778.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local c = str:byte(1)</text>
<text text-anchor="middle" x="427.7876" y="-763.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if c &gt;= 0x00 and c &lt;= 0x7F then</text>
<text text-anchor="middle" x="427.7876" y="-747.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 1</text>
<text text-anchor="middle" x="427.7876" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xC2 and c &lt;= 0xDF then</text>
<text text-anchor="middle" x="427.7876" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 2</text>
<text text-anchor="middle" x="427.7876" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xE0 and c &lt;= 0xEF then</text>
<text text-anchor="middle" x="427.7876" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 3</text>
<text text-anchor="middle" x="427.7876" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xF0 and c &lt;= 0xF4 then</text>
<text text-anchor="middle" x="427.7876" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 4</text>
<text text-anchor="middle" x="427.7876" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="427.7876" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Su (str)</text>
<text text-anchor="middle" x="427.7876" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[</text>
<text text-anchor="middle" x="427.7876" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;convert a &#39;set&#39; pattern to uniquely match the characters </text>
<text text-anchor="middle" x="427.7876" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;in the range.</text>
<text text-anchor="middle" x="427.7876" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local catch = {}</text>
<text text-anchor="middle" x="427.7876" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local i = 0</text>
<text text-anchor="middle" x="427.7876" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1, #str do</text>
<text text-anchor="middle" x="427.7876" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;catch[i]</text>
<text text-anchor="middle" x="427.7876" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="427.7876" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="427.7876" y="-407.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function spanner(first, last, str, root)</text>
<text text-anchor="middle" x="427.7876" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local vals = {}</text>
<text text-anchor="middle" x="427.7876" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.span = true</text>
<text text-anchor="middle" x="427.7876" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.val = string.sub(str, first, last &#45; 1)</text>
<text text-anchor="middle" x="427.7876" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.first = first</text>
<text text-anchor="middle" x="427.7876" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.last = last &#45; 1</text>
<text text-anchor="middle" x="427.7876" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if vals.last &gt;= vals.first then</text>
<text text-anchor="middle" x="427.7876" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return vals</text>
<text text-anchor="middle" x="427.7876" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="427.7876" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; If a capture contains nothing, we don&#39;t want a node for it</text>
<text text-anchor="middle" x="427.7876" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return nil</text>
<text text-anchor="middle" x="427.7876" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="427.7876" y="-206.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Csp (patt)</text>
<text text-anchor="middle" x="427.7876" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return lpeg.Cp() </text>
<text text-anchor="middle" x="427.7876" y="-176.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cmt(patt, function() return true end) </text>
<text text-anchor="middle" x="427.7876" y="-160.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cp() </text>
<text text-anchor="middle" x="427.7876" y="-145.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(1) </text>
<text text-anchor="middle" x="427.7876" y="-129.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(2) / spanner</text>
<text text-anchor="middle" x="427.7876" y="-114.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_4&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M522.9077,-1262.5529C521.8176,-1255.7207 520.4429,-1247.1049 518.8269,-1236.9769"/>
<polygon fill="#000000" stroke="#000000" points="522.237,-1236.1355 517.205,-1226.8119 515.3244,-1237.2385 522.237,-1236.1355"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="746.7876" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="746.7876" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_5&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M810.0856,-1264.9443C800.1765,-1255.0331 788.6641,-1241.3382 782.7876,-1226.6022 706.7029,-1035.8097 731.4965,-779.4655 742.6351,-694.8252"/>
<polygon fill="#000000" stroke="#000000" points="746.1318,-695.0853 744.0114,-684.7048 739.1957,-694.1419 746.1318,-695.0853"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1283.7876,-716.8021 791.7876,-716.8021 791.7876,-616.0001 1283.7876,-616.0001 1283.7876,-716.8021"/>
<text text-anchor="middle" x="1037.7876" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function split (s, sep)</text>
<text text-anchor="middle" x="1037.7876" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;sep = lpeg.P(sep)</text>
<text text-anchor="middle" x="1037.7876" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local elem = lpeg.C((1 &#45; sep)^0)</text>
<text text-anchor="middle" x="1037.7876" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local p = lpeg.Ct(elem * (sep * elem)^0) &#160;&#160;&#45;&#45; make a table capture</text>
<text text-anchor="middle" x="1037.7876" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return lpeg.match(p, s)</text>
<text text-anchor="middle" x="1037.7876" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1037.7876,-1262.5529C1037.7876,-1183.0851 1037.7876,-862.3341 1037.7876,-727.0548"/>
<polygon fill="#000000" stroke="#000000" points="1041.2877,-726.8671 1037.7876,-716.8671 1034.2877,-726.8671 1041.2877,-726.8671"/>
</g>
<!-- raw_18 -->
<g id="node19" class="node">
<title>raw_18</title>
<ellipse fill="none" stroke="#000000" cx="1328.7876" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1328.7876" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_18 -->
<g id="edge18" class="edge">
<title>prose_7&#45;&gt;raw_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1257.6365,-1266.6875C1270.1927,-1257.0488 1285.1793,-1243.0233 1292.7876,-1226.6022 1379.4219,-1039.6166 1347.4982,-779.3194 1333.7659,-694.3972"/>
<polygon fill="#000000" stroke="#000000" points="1337.21,-693.7717 1332.1144,-684.4827 1330.3051,-694.9219 1337.21,-693.7717"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="1400.7876" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1400.7876" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_8&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_8&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1358.6588,-1262.6853C1360.7825,-1252.213 1363.2825,-1238.713 1364.7876,-1226.6022 1389.9787,-1023.9 1398.0517,-777.6113 1400.1508,-694.9741"/>
<polygon fill="#000000" stroke="#000000" points="1403.6528,-694.9344 1400.3985,-684.8518 1396.6549,-694.7632 1403.6528,-694.9344"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="1472.7876" cy="-666.4011" rx="27" ry="18"/>
<text text-anchor="middle" x="1472.7876" y="-662.2011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_9&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1455.3165,-1262.5529C1457.86,-1175.7639 1468.8375,-801.1864 1471.9576,-694.7224"/>
<polygon fill="#000000" stroke="#000000" points="1475.4641,-694.5496 1472.2586,-684.4513 1468.4671,-694.3445 1475.4641,-694.5496"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1863.2876,-803.3018 1518.2876,-803.3018 1518.2876,-529.5005 1863.2876,-529.5005 1863.2876,-803.3018"/>
<text text-anchor="middle" x="1690.7876" y="-787.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local I = lpeg.Cp()</text>
<text text-anchor="middle" x="1690.7876" y="-756.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function &#160;anyP(p)</text>
<text text-anchor="middle" x="1690.7876" y="-741.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return lpeg.P{ I * p * I + 1 * lpeg.V(1) }</text>
<text text-anchor="middle" x="1690.7876" y="-725.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1690.7876" y="-662.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ru = makerange</text>
<text text-anchor="middle" x="1690.7876" y="-614.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">return { R = Ru,</text>
<text text-anchor="middle" x="1690.7876" y="-599.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;Csp = Csp,</text>
<text text-anchor="middle" x="1690.7876" y="-584.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;anyP = anyP,</text>
<text text-anchor="middle" x="1690.7876" y="-568.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;match = lpeg.match,</text>
<text text-anchor="middle" x="1690.7876" y="-553.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;split = split,</text>
<text text-anchor="middle" x="1690.7876" y="-537.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;spanner = spanner }</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_10&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1642.2569,-1262.5529C1647.588,-1197.0661 1666.2577,-967.7269 1678.8247,-813.3534"/>
<polygon fill="#000000" stroke="#000000" points="1682.3204,-813.547 1679.6434,-803.296 1675.3435,-812.979 1682.3204,-813.547"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="186.7876,-55.0021 30.7876,-55.0021 30.7876,-15.198 186.7876,-15.198 186.7876,-55.0021"/>
<text text-anchor="middle" x="108.7876" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> extended PEG module</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M108.7876,-648.1883C108.7876,-559.8525 108.7876,-175.7661 108.7876,-65.0634"/>
<polygon fill="#000000" stroke="#000000" points="112.2877,-64.9347 108.7876,-54.9347 105.2877,-64.9348 112.2877,-64.9347"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="835.2876,-55.0021 658.2876,-55.0021 658.2876,-15.198 835.2876,-15.198 835.2876,-55.0021"/>
<text text-anchor="middle" x="746.7876" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> from the lpeg tutorial</text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.7876,-648.1883C746.7876,-559.8525 746.7876,-175.7661 746.7876,-65.0634"/>
<polygon fill="#000000" stroke="#000000" points="750.2877,-64.9347 746.7876,-54.9347 743.2877,-64.9348 750.2877,-64.9347"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1300.7876,-70.3004 1018.7876,-70.3004 1018.7876,.1003 1300.7876,.1003 1300.7876,-70.3004"/>
<text text-anchor="middle" x="1159.7876" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Match a pattern anywhere in a string.</text>
<text text-anchor="middle" x="1159.7876" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1159.7876" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Taken from the lpeg tutorial</text>
</g>
<!-- raw_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>raw_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1333.3693,-648.51C1351.2347,-574.5049 1409.644,-287.7048 1292.7876,-106.2001 1285.2031,-94.4197 1274.9782,-84.4576 1263.548,-76.0684"/>
<polygon fill="#000000" stroke="#000000" points="1265.2604,-72.9989 1255.0326,-70.2342 1261.3039,-78.7736 1265.2604,-72.9989"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1482.2876,-62.4005 1319.2876,-62.4005 1319.2876,-7.7996 1482.2876,-7.7996 1482.2876,-62.4005"/>
<text text-anchor="middle" x="1400.7876" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #param</text>
<text text-anchor="middle" x="1400.7876" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; p : lpeg pattern</text>
</g>
<!-- raw_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>raw_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.7876,-648.1883C1400.7876,-561.7437 1400.7876,-192.0769 1400.7876,-72.5441"/>
<polygon fill="#000000" stroke="#000000" points="1404.2877,-72.4193 1400.7876,-62.4194 1397.2877,-72.4194 1404.2877,-72.4193"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1915.2876,-62.4005 1500.2876,-62.4005 1500.2876,-7.7996 1915.2876,-7.7996 1915.2876,-62.4005"/>
<text text-anchor="middle" x="1707.7876" y="-31.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #returns</text>
<text text-anchor="middle" x="1707.7876" y="-15.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45; the first and last index of the first match, or nil</text>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1471.3823,-648.1772C1465.0944,-561.7762 1442.6459,-193.9479 1508.7876,-106.2001 1519.9116,-91.4422 1553.1005,-77.2883 1589.2644,-65.5487"/>
<polygon fill="#000000" stroke="#000000" points="1590.5401,-68.8161 1599.017,-62.4606 1588.4269,-62.1427 1590.5401,-68.8161"/>
</g>
</g>
</svg>