<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="2793pt" height="1344pt"
 viewBox="0.00 0.00 2792.69 1344.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1340.4021)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1340.4021 2788.6946,-1340.4021 2788.6946,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1261.1946" cy="-1318.4021" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="1261.1946" y="-1314.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 118</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1261.1946" cy="-1246.4021" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1261.1946" y="-1242.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;118</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1261.1946,-1300.2334C1261.1946,-1292.533 1261.1946,-1283.3764 1261.1946,-1274.8187"/>
<polygon fill="#000000" stroke="#000000" points="1264.6947,-1274.8153 1261.1946,-1264.8153 1257.6947,-1274.8154 1264.6947,-1274.8153"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="166.1946" cy="-1174.4021" rx="27" ry="18"/>
<text text-anchor="middle" x="166.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1196.0707,-1245.4232C998.3225,-1242.0736 406.8431,-1229.1694 218.1946,-1192.4021 211.8564,-1191.1668 205.24,-1189.3289 198.9342,-1187.2928"/>
<polygon fill="#000000" stroke="#000000" points="199.9601,-1183.9443 189.3654,-1183.9881 197.675,-1190.5608 199.9601,-1183.9443"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="273.1946" cy="-1174.4021" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="273.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;3</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1198.265,-1241.8161C1017.5926,-1228.6497 499.311,-1190.8802 328.5196,-1178.4338"/>
<polygon fill="#000000" stroke="#000000" points="328.7214,-1174.9394 318.4934,-1177.7032 328.2126,-1181.9208 328.7214,-1174.9394"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="644.1946" cy="-1174.4021" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="644.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;77</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1201.1923,-1239.4002C1088.2327,-1226.2185 844.225,-1197.7443 720.0733,-1183.2566"/>
<polygon fill="#000000" stroke="#000000" points="720.2307,-1179.7513 709.8924,-1182.0686 719.4193,-1186.7042 720.2307,-1179.7513"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1009.1946" cy="-1174.4021" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1009.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 79&#45;80</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1215.851,-1233.4467C1172.2854,-1220.9994 1106.5263,-1202.2111 1060.9351,-1189.1851"/>
<polygon fill="#000000" stroke="#000000" points="1061.8186,-1185.7975 1051.2418,-1186.4156 1059.8955,-1192.5282 1061.8186,-1185.7975"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1261.1946" cy="-1174.4021" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1261.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;88</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1261.1946,-1228.2334C1261.1946,-1220.533 1261.1946,-1211.3764 1261.1946,-1202.8187"/>
<polygon fill="#000000" stroke="#000000" points="1264.6947,-1202.8153 1261.1946,-1192.8153 1257.6947,-1202.8154 1264.6947,-1202.8153"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1539.1946" cy="-1174.4021" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1539.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 90&#45;93</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1308.9845,-1234.0248C1358.0315,-1221.322 1434.2051,-1201.5936 1485.3519,-1188.3469"/>
<polygon fill="#000000" stroke="#000000" points="1486.4291,-1191.6835 1495.2322,-1185.788 1484.674,-1184.9071 1486.4291,-1191.6835"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1788.1946" cy="-1174.4021" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1788.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 94&#45;96</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1319.6064,-1238.4217C1419.8749,-1224.7228 1623.8311,-1196.8578 1726.388,-1182.8462"/>
<polygon fill="#000000" stroke="#000000" points="1727.1532,-1186.2743 1736.5874,-1181.4528 1726.2056,-1179.3387 1727.1532,-1186.2743"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="2066.1946" cy="-1174.4021" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2066.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 97&#45;99</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1323.3579,-1240.8421C1472.7876,-1227.477 1850.9372,-1193.6549 2002.2082,-1180.1251"/>
<polygon fill="#000000" stroke="#000000" points="2002.6222,-1183.6021 2012.2707,-1179.2251 2001.9986,-1176.6299 2002.6222,-1183.6021"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="2419.1946" cy="-1174.4021" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="2419.1946" y="-1170.2021" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 100&#45;118</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1324.7781,-1242.4649C1468.4804,-1233.5646 1829.3041,-1211.2052 2131.1946,-1192.4021 2196.1525,-1188.3562 2269.3505,-1183.7811 2325.6966,-1180.2559"/>
<polygon fill="#000000" stroke="#000000" points="2326.2539,-1183.7279 2336.0158,-1179.6102 2325.8167,-1176.7416 2326.2539,-1183.7279"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="61.1946,-578.201 7.1946,-578.201 7.1946,-542.201 61.1946,-542.201 61.1946,-578.201"/>
</g>
<!-- header_2&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>header_2&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M140.9619,-1167.6805C118.248,-1160.184 86.073,-1145.6561 70.1946,-1120.4021 -39.9829,-945.1692 7.8782,-675.101 27.3813,-588.1756"/>
<polygon fill="#000000" stroke="#000000" points="30.8278,-588.8052 29.6601,-578.2749 24.0062,-587.235 30.8278,-588.8052"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="235.1946,-578.201 79.1946,-578.201 79.1946,-542.201 235.1946,-542.201 235.1946,-578.201"/>
<text text-anchor="middle" x="157.1946" y="-556.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> extended PEG module</text>
</g>
<!-- block_3&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>block_3&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M261.6517,-1156.6042C255.5481,-1146.395 248.4563,-1133.1149 244.1946,-1120.4021 178.4117,-924.1681 161.998,-672.3319 158.2336,-588.6428"/>
<polygon fill="#000000" stroke="#000000" points="161.7294,-588.4684 157.8083,-578.6258 154.7357,-588.7653 161.7294,-588.4684"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="801.1946,-1120.6032 253.1946,-1120.6032 253.1946,.2011 801.1946,.2011 801.1946,-1120.6032"/>
<text text-anchor="middle" x="527.1946" y="-1105.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local lpeg = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="527.1946" y="-1089.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="527.1946" y="-1058.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local function makerange(first, second)</text>
<text text-anchor="middle" x="527.1946" y="-1043.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patts = {}</text>
<text text-anchor="middle" x="527.1946" y="-1027.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local patt &#160;= {}</text>
<text text-anchor="middle" x="527.1946" y="-1012.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if (second) then</text>
<text text-anchor="middle" x="527.1946" y="-996.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if (string.len(first) == string.len(second)) then</text>
<text text-anchor="middle" x="527.1946" y="-981.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 1, string.len(first) do</text>
<text text-anchor="middle" x="527.1946" y="-966.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patts[i] = lpeg.R(string.sub(first,i,i)..string.sub(second,i,i))</text>
<text text-anchor="middle" x="527.1946" y="-950.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-935.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patts[1]</text>
<text text-anchor="middle" x="527.1946" y="-919.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = 2, string.len(first) do</text>
<text text-anchor="middle" x="527.1946" y="-904.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;patt = patt + patts[i]</text>
<text text-anchor="middle" x="527.1946" y="-889.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-873.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return patt</text>
<text text-anchor="middle" x="527.1946" y="-858.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="527.1946" y="-842.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(&quot;Ranges must be of equal byte width&quot;)</text>
<text text-anchor="middle" x="527.1946" y="-827.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return {}</text>
<text text-anchor="middle" x="527.1946" y="-812.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-796.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else </text>
<text text-anchor="middle" x="527.1946" y="-781.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return lpeg.R(first)</text>
<text text-anchor="middle" x="527.1946" y="-765.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-750.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="527.1946" y="-703.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function num_bytes(str)</text>
<text text-anchor="middle" x="527.1946" y="-687.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;returns the number of bytes in the next character in str</text>
<text text-anchor="middle" x="527.1946" y="-672.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local c = str:byte(1)</text>
<text text-anchor="middle" x="527.1946" y="-656.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if c &gt;= 0x00 and c &lt;= 0x7F then</text>
<text text-anchor="middle" x="527.1946" y="-641.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 1</text>
<text text-anchor="middle" x="527.1946" y="-626.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xC2 and c &lt;= 0xDF then</text>
<text text-anchor="middle" x="527.1946" y="-610.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 2</text>
<text text-anchor="middle" x="527.1946" y="-595.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xE0 and c &lt;= 0xEF then</text>
<text text-anchor="middle" x="527.1946" y="-579.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 3</text>
<text text-anchor="middle" x="527.1946" y="-564.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;elseif c &gt;= 0xF0 and c &lt;= 0xF4 then</text>
<text text-anchor="middle" x="527.1946" y="-549.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return 4</text>
<text text-anchor="middle" x="527.1946" y="-533.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-518.201" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="527.1946" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Su (str)</text>
<text text-anchor="middle" x="527.1946" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;[[</text>
<text text-anchor="middle" x="527.1946" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;convert a &#39;set&#39; pattern to uniquely match the characters </text>
<text text-anchor="middle" x="527.1946" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;in the range.</text>
<text text-anchor="middle" x="527.1946" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local catch = {}</text>
<text text-anchor="middle" x="527.1946" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local i = 0</text>
<text text-anchor="middle" x="527.1946" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = 1, #str do</text>
<text text-anchor="middle" x="527.1946" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;catch[i]</text>
<text text-anchor="middle" x="527.1946" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="527.1946" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="527.1946" y="-301.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function spanner(first, last, str, root)</text>
<text text-anchor="middle" x="527.1946" y="-286.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local vals = {}</text>
<text text-anchor="middle" x="527.1946" y="-270.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.span = true</text>
<text text-anchor="middle" x="527.1946" y="-255.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.val = string.sub(str, first, last &#45; 1)</text>
<text text-anchor="middle" x="527.1946" y="-239.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.first = first</text>
<text text-anchor="middle" x="527.1946" y="-224.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;vals.last = last &#45; 1</text>
<text text-anchor="middle" x="527.1946" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if vals.last &gt;= vals.first then</text>
<text text-anchor="middle" x="527.1946" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return vals</text>
<text text-anchor="middle" x="527.1946" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="527.1946" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; If a capture contains nothing, we don&#39;t want a node for it</text>
<text text-anchor="middle" x="527.1946" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return nil</text>
<text text-anchor="middle" x="527.1946" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="527.1946" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Csp (patt)</text>
<text text-anchor="middle" x="527.1946" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return lpeg.Cp() </text>
<text text-anchor="middle" x="527.1946" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cmt(patt, function() return true end) </text>
<text text-anchor="middle" x="527.1946" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Cp() </text>
<text text-anchor="middle" x="527.1946" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(1) </text>
<text text-anchor="middle" x="527.1946" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;* lpeg.Carg(2) / spanner</text>
<text text-anchor="middle" x="527.1946" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M640.7564,-1156.3528C639.4415,-1149.4501 637.7798,-1140.727 635.8246,-1130.463"/>
<polygon fill="#000000" stroke="#000000" points="639.2575,-1129.7802 633.948,-1120.6118 632.3812,-1131.0902 639.2575,-1129.7802"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="996.6946,-578.201 819.6946,-578.201 819.6946,-542.201 996.6946,-542.201 996.6946,-578.201"/>
<text text-anchor="middle" x="908.1946" y="-556.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> from the lpeg tutorial</text>
</g>
<!-- block_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1006.2265,-1156.3528C991.9404,-1069.4761 930.2342,-694.2286 912.7988,-588.2002"/>
<polygon fill="#000000" stroke="#000000" points="916.2391,-587.5508 911.1628,-578.2512 909.3319,-588.6867 916.2391,-587.5508"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1507.1946,-610.602 1015.1946,-610.602 1015.1946,-509.8 1507.1946,-509.8 1507.1946,-610.602"/>
<text text-anchor="middle" x="1261.1946" y="-595.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function split (s, sep)</text>
<text text-anchor="middle" x="1261.1946" y="-579.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;sep = lpeg.P(sep)</text>
<text text-anchor="middle" x="1261.1946" y="-564.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local elem = lpeg.C((1 &#45; sep)^0)</text>
<text text-anchor="middle" x="1261.1946" y="-549.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local p = lpeg.Ct(elem * (sep * elem)^0) &#160;&#160;&#45;&#45; make a table capture</text>
<text text-anchor="middle" x="1261.1946" y="-533.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return lpeg.match(p, s)</text>
<text text-anchor="middle" x="1261.1946" y="-518.201" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1261.1946,-1156.3528C1261.1946,-1076.885 1261.1946,-756.134 1261.1946,-620.8547"/>
<polygon fill="#000000" stroke="#000000" points="1264.6947,-620.667 1261.1946,-610.667 1257.6947,-620.6671 1264.6947,-620.667"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1807.1946,-587.4015 1525.1946,-587.4015 1525.1946,-533.0006 1807.1946,-533.0006 1807.1946,-587.4015"/>
<text text-anchor="middle" x="1666.1946" y="-572.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Match a pattern anywhere in a string.</text>
<text text-anchor="middle" x="1666.1946" y="-556.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1666.1946" y="-541.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> Taken from the lpeg tutorial</text>
</g>
<!-- block_7&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>block_7&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1542.9267,-1156.3528C1560.4062,-1071.8179 1634.3417,-714.2489 1658.5131,-597.3502"/>
<polygon fill="#000000" stroke="#000000" points="1661.9653,-597.9392 1660.5628,-587.4376 1655.1103,-596.5217 1661.9653,-597.9392"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1988.6946,-579.5016 1825.6946,-579.5016 1825.6946,-540.9005 1988.6946,-540.9005 1988.6946,-579.5016"/>
<text text-anchor="middle" x="1907.1946" y="-564.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #param</text>
<text text-anchor="middle" x="1907.1946" y="-549.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; p : lpeg pattern</text>
</g>
<!-- block_8&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>block_8&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1799.2876,-1156.5416C1805.1645,-1146.3127 1812.0128,-1133.0339 1816.1946,-1120.4021 1881.0145,-924.6008 1900.6731,-674.4572 1905.6868,-589.751"/>
<polygon fill="#000000" stroke="#000000" points="1909.1915,-589.7668 1906.2643,-579.5844 1902.2027,-589.3698 1909.1915,-589.7668"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="2421.6946,-579.5016 2006.6946,-579.5016 2006.6946,-540.9005 2421.6946,-540.9005 2421.6946,-579.5016"/>
<text text-anchor="middle" x="2214.1946" y="-564.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #returns</text>
<text text-anchor="middle" x="2214.1946" y="-549.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45; the first and last index of the first match, or nil</text>
</g>
<!-- block_9&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_9&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2070.5438,-1156.3528C2091.3835,-1069.8677 2181.085,-697.606 2207.0983,-589.6505"/>
<polygon fill="#000000" stroke="#000000" points="2210.5402,-590.3071 2209.4803,-579.7654 2203.735,-588.6672 2210.5402,-590.3071"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2784.6946,-697.1017 2439.6946,-697.1017 2439.6946,-423.3004 2784.6946,-423.3004 2784.6946,-697.1017"/>
<text text-anchor="middle" x="2612.1946" y="-681.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">local I = lpeg.Cp()</text>
<text text-anchor="middle" x="2612.1946" y="-650.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function &#160;anyP(p)</text>
<text text-anchor="middle" x="2612.1946" y="-634.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return lpeg.P{ I * p * I + 1 * lpeg.V(1) }</text>
<text text-anchor="middle" x="2612.1946" y="-619.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2612.1946" y="-556.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Ru = makerange</text>
<text text-anchor="middle" x="2612.1946" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">return { R = Ru,</text>
<text text-anchor="middle" x="2612.1946" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;Csp = Csp,</text>
<text text-anchor="middle" x="2612.1946" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;anyP = anyP,</text>
<text text-anchor="middle" x="2612.1946" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;match = lpeg.match,</text>
<text text-anchor="middle" x="2612.1946" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;split = split,</text>
<text text-anchor="middle" x="2612.1946" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;spanner = spanner }</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_10&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2424.8662,-1156.3528C2445.4646,-1090.8006 2517.6531,-861.0689 2566.163,-706.6913"/>
<polygon fill="#000000" stroke="#000000" points="2569.5194,-707.6852 2569.1782,-697.0959 2562.8413,-705.5868 2569.5194,-707.6852"/>
</g>
</g>
</svg>