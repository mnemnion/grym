<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1500pt" height="449pt"
 viewBox="0.00 0.00 1500.00 448.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 444.8004)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-444.8004 1496,-444.8004 1496,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="540" cy="-422.8004" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="540" y="-418.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 40</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="540" cy="-350.8004" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="540" y="-346.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;40</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M540,-404.6317C540,-396.9313 540,-387.7747 540,-379.217"/>
<polygon fill="#000000" stroke="#000000" points="543.5001,-379.2136 540,-369.2136 536.5001,-379.2137 543.5001,-379.2136"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="121" cy="-278.8004" rx="27" ry="18"/>
<text text-anchor="middle" x="121" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M480.3599,-347.2978C404.9794,-341.7363 271.8091,-328.1143 162,-296.8004 158.7854,-295.8837 155.494,-294.7671 152.2422,-293.5436"/>
<polygon fill="#000000" stroke="#000000" points="153.3029,-290.1959 142.7223,-289.6456 150.6503,-296.6739 153.3029,-290.1959"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="217" cy="-278.8004" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="217" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;3</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M491.2939,-339.9433C430.8607,-326.4721 328.34,-303.6192 267.2156,-289.994"/>
<polygon fill="#000000" stroke="#000000" points="267.9285,-286.567 257.4065,-287.8074 266.4054,-293.3993 267.9285,-286.567"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="472" cy="-278.8004" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="472" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 4&#45;5</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M523.5391,-333.3712C515.103,-324.4388 504.6831,-313.406 495.425,-303.6033"/>
<polygon fill="#000000" stroke="#000000" points="497.7201,-300.936 488.3093,-296.0691 492.631,-305.7424 497.7201,-300.936"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="736" cy="-278.8004" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="736" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;21</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M578.2561,-336.7471C608.8778,-325.4983 652.084,-309.6267 685.5373,-297.3377"/>
<polygon fill="#000000" stroke="#000000" points="686.9577,-300.5447 695.1375,-293.8111 684.5439,-293.974 686.9577,-300.5447"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1000" cy="-278.8004" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1000" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 23&#45;24</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M594.1205,-342.3293C680.5621,-328.7994 849.2175,-302.4011 939.5139,-288.2678"/>
<polygon fill="#000000" stroke="#000000" points="940.2571,-291.6941 949.5955,-286.6898 939.1746,-284.7783 940.2571,-291.6941"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1265" cy="-278.8004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1265" y="-274.6004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 25&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.7996,-345.0603C726.1388,-332.3149 1035.194,-301.6225 1183.2482,-286.9192"/>
<polygon fill="#000000" stroke="#000000" points="1184.0201,-290.3598 1193.6252,-285.8886 1183.3282,-283.3941 1184.0201,-290.3598"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-130.4002 0,-130.4002 0,-94.4002 54,-94.4002 54,-130.4002"/>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M102.4238,-265.6032C89.7,-255.6881 73.3214,-241.0628 63,-224.8004 46.4532,-198.7292 36.9124,-164.4025 31.8632,-140.5742"/>
<polygon fill="#000000" stroke="#000000" points="35.2921,-139.8714 29.9086,-130.7462 28.4266,-141.2369 35.2921,-139.8714"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="186,-130.4002 72,-130.4002 72,-94.4002 186,-94.4002 186,-130.4002"/>
<text text-anchor="middle" x="129" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Forest module</text>
</g>
<!-- block_3&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_3&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M207.5825,-260.9926C192.1816,-231.8709 161.5104,-173.8745 143.3759,-139.5838"/>
<polygon fill="#000000" stroke="#000000" points="146.3856,-137.788 138.6166,-130.5843 140.1976,-141.0605 146.3856,-137.788"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="626,-130.4002 204,-130.4002 204,-94.4002 626,-94.4002 626,-130.4002"/>
<text text-anchor="middle" x="415" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Provides tools for working with vectors of borrowed Nodes</text>
</g>
<!-- block_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M465.7915,-260.6759C455.855,-231.6681 436.3071,-174.602 424.5725,-140.3452"/>
<polygon fill="#000000" stroke="#000000" points="427.7527,-138.8285 421.2009,-130.5023 421.1304,-141.0969 427.7527,-138.8285"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="968,-224.6007 644,-224.6007 644,-.1997 968,-.1997 968,-224.6007"/>
<text text-anchor="middle" x="806" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function forest_tostring(forest)</text>
<text text-anchor="middle" x="806" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local top_phrase = &quot;[ &quot;</text>
<text text-anchor="middle" x="806" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do </text>
<text text-anchor="middle" x="806" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;top_phrase = top_phrase..v.id..&quot; &quot;</text>
<text text-anchor="middle" x="806" y="-147.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="806" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;top_phrase = top_phrase..&quot;]\n&quot;</text>
<text text-anchor="middle" x="806" y="-116.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local node_phrase = &quot;&quot;</text>
<text text-anchor="middle" x="806" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do</text>
<text text-anchor="middle" x="806" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;node_phrase = node_phrase..tostring(v)</text>
<text text-anchor="middle" x="806" y="-70.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="806" y="-55.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return top_phrase..node_phrase</text>
<text text-anchor="middle" x="806" y="-39.9" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="806" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">local function F ()</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>codeblock_5&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M743.6245,-260.6759C746.6901,-253.3884 750.5007,-244.3301 754.717,-234.3074"/>
<polygon fill="#000000" stroke="#000000" points="758.0419,-235.4297 758.6934,-224.8549 751.5896,-232.7154 758.0419,-235.4297"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1135.5,-130.4002 986.5,-130.4002 986.5,-94.4002 1135.5,-94.4002 1135.5,-130.4002"/>
<text text-anchor="middle" x="1061" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &lt;Forest&gt; metatable</text>
</g>
<!-- block_6&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>block_6&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1006.6442,-260.6759C1017.3239,-231.5431 1038.3782,-174.1095 1050.9177,-139.9035"/>
<polygon fill="#000000" stroke="#000000" points="1054.2082,-141.096 1054.364,-130.5023 1047.6359,-138.6867 1054.2082,-141.096"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1492,-224.7007 1154,-224.7007 1154,-.0997 1492,-.0997 1492,-224.7007"/>
<text text-anchor="middle" x="1323" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local meta = {}</text>
<text text-anchor="middle" x="1323" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__index&quot;] = meta</text>
<text text-anchor="middle" x="1323" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__tostring&quot;] = forest_tostring</text>
<text text-anchor="middle" x="1323" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;meta[&quot;isforest&quot;] = true</text>
<text text-anchor="middle" x="1323" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;the below are added to F in ast.lua </text>
<text text-anchor="middle" x="1323" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;select&quot;] = ast.forest.select</text>
<text text-anchor="middle" x="1323" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;with&quot;] &#160;&#160;= ast.forest.select_with</text>
<text text-anchor="middle" x="1323" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;pick&quot;] &#160;&#160;= ast.forest.pick</text>
<text text-anchor="middle" x="1323" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return meta</text>
<text text-anchor="middle" x="1323" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1323" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local F = F()</text>
<text text-anchor="middle" x="1323" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return F</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_7&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1271.3174,-260.6759C1273.8575,-253.3884 1277.0149,-244.3301 1280.5084,-234.3074"/>
<polygon fill="#000000" stroke="#000000" points="1283.8166,-235.4497 1283.8031,-224.8549 1277.2067,-233.1457 1283.8166,-235.4497"/>
</g>
</g>
</svg>