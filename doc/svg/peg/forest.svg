<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1093pt" height="524pt"
 viewBox="0.00 0.00 1093.00 524.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 520.2004)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-520.2004 1089,-520.2004 1089,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="433" cy="-498.2004" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="433" y="-494.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 40</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="433" cy="-426.2004" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="433" y="-422.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;40</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M433,-480.0318C433,-472.3314 433,-463.1748 433,-454.617"/>
<polygon fill="#000000" stroke="#000000" points="436.5001,-454.6136 433,-444.6137 429.5001,-454.6137 436.5001,-454.6136"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="213" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="213" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M385.7202,-414.8071C348.0884,-405.1496 294.391,-390.0442 249,-372.2004 247.1466,-371.4718 245.2596,-370.6823 243.3696,-369.8546"/>
<polygon fill="#000000" stroke="#000000" points="244.5771,-366.5558 234.0349,-365.5014 241.6186,-372.8999 244.5771,-366.5558"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="290" cy="-354.2004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="290" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M401.9711,-410.5775C378.7656,-398.8936 347.0796,-382.9398 323.3361,-370.985"/>
<polygon fill="#000000" stroke="#000000" points="324.8448,-367.826 314.339,-366.455 321.6967,-374.0783 324.8448,-367.826"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="372" cy="-354.2004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="372" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M417.9213,-408.4026C410.3139,-399.4234 400.9694,-388.3938 392.7003,-378.6335"/>
<polygon fill="#000000" stroke="#000000" points="395.2035,-376.1736 386.0688,-370.8062 389.8626,-380.6986 395.2035,-376.1736"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="495" cy="-354.2004" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="495" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 6&#45;21</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M448.3258,-408.4026C455.7779,-399.7487 464.8698,-389.1904 473.0427,-379.6993"/>
<polygon fill="#000000" stroke="#000000" points="475.7625,-381.9045 479.6356,-372.043 470.4581,-377.3368 475.7625,-381.9045"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="660" cy="-354.2004" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="660" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M474.6353,-412.9945C516.8486,-399.6053 581.5923,-379.0698 622.3246,-366.1503"/>
<polygon fill="#000000" stroke="#000000" points="623.4104,-369.4778 631.8842,-363.1182 621.294,-362.8054 623.4104,-369.4778"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="852" cy="-354.2004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="852" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 25&#45;40</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M485.6424,-417.1545C559.9878,-404.3791 695.9987,-381.0073 779.7489,-366.6159"/>
<polygon fill="#000000" stroke="#000000" points="780.4329,-370.0497 789.6957,-364.9066 779.2473,-363.1508 780.4329,-370.0497"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="164" cy="-187.8002" rx="27" ry="18"/>
<text text-anchor="middle" x="164" y="-183.6002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M277.225,-337.3293C254.8466,-307.7756 208.4758,-246.5366 182.557,-212.3073"/>
<polygon fill="#000000" stroke="#000000" points="185.2623,-210.0821 176.4352,-204.2226 179.6817,-214.3078 185.2623,-210.0821"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="288" cy="-187.8002" rx="27" ry="18"/>
<text text-anchor="middle" x="288" y="-183.6002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_4&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M354.898,-338.5889C344.7079,-328.4905 332.2025,-314.583 324,-300.2004 308.7711,-273.4974 299.0278,-239.4903 293.5708,-215.9105"/>
<polygon fill="#000000" stroke="#000000" points="296.9295,-214.8874 291.3609,-205.874 290.0932,-216.3927 296.9295,-214.8874"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="657,-300.0007 333,-300.0007 333,-75.5997 657,-75.5997 657,-300.0007"/>
<text text-anchor="middle" x="495" y="-284.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function forest_tostring(forest)</text>
<text text-anchor="middle" x="495" y="-269.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local top_phrase = &quot;[ &quot;</text>
<text text-anchor="middle" x="495" y="-253.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do </text>
<text text-anchor="middle" x="495" y="-238.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;top_phrase = top_phrase..v.id..&quot; &quot;</text>
<text text-anchor="middle" x="495" y="-223.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="495" y="-207.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;top_phrase = top_phrase..&quot;]\n&quot;</text>
<text text-anchor="middle" x="495" y="-192.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local node_phrase = &quot;&quot;</text>
<text text-anchor="middle" x="495" y="-176.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do</text>
<text text-anchor="middle" x="495" y="-161.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;node_phrase = node_phrase..tostring(v)</text>
<text text-anchor="middle" x="495" y="-146.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="495" y="-130.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return top_phrase..node_phrase</text>
<text text-anchor="middle" x="495" y="-115.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="495" y="-83.9" font-family="Inconsolata" font-size="14.00" fill="#000000">local function F ()</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_5&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M495,-336.0759C495,-328.9372 495,-320.0991 495,-310.3198"/>
<polygon fill="#000000" stroke="#000000" points="498.5001,-310.2549 495,-300.2549 491.5001,-310.255 498.5001,-310.2549"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="702" cy="-187.8002" rx="27" ry="18"/>
<text text-anchor="middle" x="702" y="-183.6002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_6&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M664.5747,-336.0759C671.9156,-306.9918 686.3759,-249.7015 695.0147,-215.4752"/>
<polygon fill="#000000" stroke="#000000" points="698.4407,-216.203 697.4945,-205.6505 691.6536,-214.4899 698.4407,-216.203"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1085,-300.1007 747,-300.1007 747,-75.4998 1085,-75.4998 1085,-300.1007"/>
<text text-anchor="middle" x="916" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local meta = {}</text>
<text text-anchor="middle" x="916" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__index&quot;] = meta</text>
<text text-anchor="middle" x="916" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__tostring&quot;] = forest_tostring</text>
<text text-anchor="middle" x="916" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;meta[&quot;isforest&quot;] = true</text>
<text text-anchor="middle" x="916" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;the below are added to F in ast.lua </text>
<text text-anchor="middle" x="916" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;select&quot;] = ast.forest.select</text>
<text text-anchor="middle" x="916" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;with&quot;] &#160;&#160;= ast.forest.select_with</text>
<text text-anchor="middle" x="916" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;pick&quot;] &#160;&#160;= ast.forest.pick</text>
<text text-anchor="middle" x="916" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return meta</text>
<text text-anchor="middle" x="916" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="916" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local F = F()</text>
<text text-anchor="middle" x="916" y="-83.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">return F</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_7&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M858.971,-336.0759C861.7738,-328.7884 865.2578,-319.7301 869.1127,-309.7074"/>
<polygon fill="#000000" stroke="#000000" points="872.4251,-310.8449 872.7482,-300.2549 865.8917,-308.332 872.4251,-310.8449"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="114,-39.6021 0,-39.6021 0,.2021 114,.2021 114,-39.6021"/>
<text text-anchor="middle" x="57" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Forest module</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M153.3492,-171.0676C135.1042,-142.4041 97.6719,-83.5968 75.2134,-48.3138"/>
<polygon fill="#000000" stroke="#000000" points="77.8981,-46.0135 69.5757,-39.4569 71.9929,-49.7723 77.8981,-46.0135"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="554,-39.6021 132,-39.6021 132,.2021 554,.2021 554,-39.6021"/>
<text text-anchor="middle" x="343" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Provides tools for working with vectors of borrowed Nodes</text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M293.6327,-169.8569C300.6326,-147.6424 312.9997,-108.667 324,-75.4 326.8358,-66.824 329.9789,-57.5286 332.8788,-49.0334"/>
<polygon fill="#000000" stroke="#000000" points="336.2083,-50.114 336.1384,-39.5194 329.5861,-47.8451 336.2083,-50.114"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="776.5,-39.6021 627.5,-39.6021 627.5,.2021 776.5,.2021 776.5,-39.6021"/>
<text text-anchor="middle" x="702" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &lt;Forest&gt; metatable</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M702,-169.4906C702,-140.6492 702,-84.3508 702,-49.5868"/>
<polygon fill="#000000" stroke="#000000" points="705.5001,-49.5435 702,-39.5436 698.5001,-49.5436 705.5001,-49.5435"/>
</g>
</g>
</svg>