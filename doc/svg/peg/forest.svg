<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1115pt" height="524pt"
 viewBox="0.00 0.00 1115.00 524.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 520.2004)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-520.2004 1111,-520.2004 1111,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="593" cy="-498.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="593" y="-494.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">40 &#160;</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="593" cy="-426.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="593" y="-422.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">40 &#160;</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M593,-480.0318C593,-472.3314 593,-463.1748 593,-454.617"/>
<polygon fill="#000000" stroke="#000000" points="596.5001,-454.6136 593,-444.6137 589.5001,-454.6137 596.5001,-454.6136"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="413" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="413" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">: &#160;&#160;</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M568.7416,-417.9787C539.869,-407.9931 490.3615,-390.2369 449,-372.2004 447.2226,-371.4253 445.4074,-370.6068 443.5837,-369.7633"/>
<polygon fill="#000000" stroke="#000000" points="445.0584,-366.5889 434.5278,-365.4238 442.0334,-372.9015 445.0584,-366.5889"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="485" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="485" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">&#45;3 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573.6918,-413.3282C556.6445,-401.9634 531.5981,-385.2658 512.4656,-372.5108"/>
<polygon fill="#000000" stroke="#000000" points="514.4031,-369.596 504.1411,-366.9611 510.5201,-375.4204 514.4031,-369.596"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="557" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="557" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">&#45;5 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M584.2854,-408.7712C580.0403,-400.2811 574.8464,-389.8933 570.1337,-380.4678"/>
<polygon fill="#000000" stroke="#000000" points="573.237,-378.8481 565.6343,-371.4691 566.976,-381.9786 573.237,-378.8481"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="629" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="629" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">22 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M601.7146,-408.7712C605.9597,-400.2811 611.1536,-389.8933 615.8663,-380.4678"/>
<polygon fill="#000000" stroke="#000000" points="619.024,-381.9786 620.3657,-371.4691 612.763,-378.8481 619.024,-381.9786"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="731" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="731" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">24 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M614.5625,-414.9504C637.6524,-402.9035 674.4788,-383.6897 700.5258,-370.1"/>
<polygon fill="#000000" stroke="#000000" points="702.3421,-373.1002 709.5889,-365.3714 699.1041,-366.8941 702.3421,-373.1002"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-354.2004" rx="27" ry="18"/>
<text text-anchor="middle" x="929" y="-350.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">40 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M618.8074,-420.6702C678.2969,-407.9225 825.1621,-376.4514 893.2621,-361.8585"/>
<polygon fill="#000000" stroke="#000000" points="894.06,-365.2671 903.1046,-359.7494 892.5932,-358.4225 894.06,-365.2671"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="114,-300.4025 0,-300.4025 0,-260.5983 114,-260.5983 114,-300.4025"/>
<text text-anchor="middle" x="57" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> Forest module</text>
</g>
<!-- block_3&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>block_3&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M464.1894,-342.246C459.3359,-339.8996 454.0937,-337.7028 449,-336.2004 312.3255,-295.8885 267.858,-327.6656 124.1438,-300.2105"/>
<polygon fill="#000000" stroke="#000000" points="124.5666,-296.7264 114.078,-298.2226 123.2103,-303.5938 124.5666,-296.7264"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="554,-300.4025 132,-300.4025 132,-260.5983 554,-260.5983 554,-300.4025"/>
<text text-anchor="middle" x="343" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> Provides tools for working with vectors of borrowed Nodes</text>
</g>
<!-- block_4&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_4&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M535.5564,-342.7764C530.8265,-340.4552 525.7954,-338.135 521,-336.2004 490.2456,-323.7932 455.6097,-312.3986 425.1202,-303.192"/>
<polygon fill="#000000" stroke="#000000" points="425.9603,-299.7902 415.3769,-300.2813 423.9566,-306.4973 425.9603,-299.7902"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="599" cy="-280.5004" rx="27" ry="18"/>
<text text-anchor="middle" x="599" y="-276.3004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">21 &#160;</text>
</g>
<!-- block_5&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>block_5&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M621.8904,-336.7345C618.3297,-327.9871 613.9398,-317.2025 609.9599,-307.4251"/>
<polygon fill="#000000" stroke="#000000" points="613.1745,-306.0388 606.1625,-298.0963 606.691,-308.678 613.1745,-306.0388"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="698,-298.5004 644,-298.5004 644,-262.5004 698,-262.5004 698,-298.5004"/>
</g>
<!-- block_5&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>block_5&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M638.7412,-337.1069C643.7877,-328.2515 650.0658,-317.235 655.7387,-307.2804"/>
<polygon fill="#000000" stroke="#000000" points="658.8153,-308.9506 660.7256,-298.5294 652.7335,-305.4847 658.8153,-308.9506"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="865.5,-300.4025 716.5,-300.4025 716.5,-260.5983 865.5,-260.5983 865.5,-300.4025"/>
<text text-anchor="middle" x="791" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &lt;Forest&gt; metatable</text>
</g>
<!-- block_6&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>block_6&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M744.0191,-338.2086C751.1444,-329.4564 760.1752,-318.3635 768.4111,-308.2472"/>
<polygon fill="#000000" stroke="#000000" points="771.1948,-310.3715 774.794,-300.4067 765.7663,-305.9521 771.1948,-310.3715"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="929" cy="-280.5004" rx="27" ry="18"/>
<text text-anchor="middle" x="929" y="-276.3004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">40 &#160;</text>
</g>
<!-- block_7&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_7&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M929,-335.9824C929,-327.7715 929,-317.8858 929,-308.7477"/>
<polygon fill="#000000" stroke="#000000" points="932.5001,-308.5088 929,-298.5088 925.5001,-308.5088 932.5001,-308.5088"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1028,-298.5004 974,-298.5004 974,-262.5004 1028,-262.5004 1028,-298.5004"/>
</g>
<!-- block_7&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>block_7&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M943.9184,-338.9297C953.2222,-329.4063 965.4265,-316.9138 976.1613,-305.9255"/>
<polygon fill="#000000" stroke="#000000" points="978.8202,-308.2125 983.3047,-298.6135 973.813,-303.3208 978.8202,-308.2125"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="751,-224.6007 427,-224.6007 427,-.1997 751,-.1997 751,-224.6007"/>
<text text-anchor="middle" x="589" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function forest_tostring(forest)</text>
<text text-anchor="middle" x="589" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local top_phrase = &quot;[ &quot;</text>
<text text-anchor="middle" x="589" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do </text>
<text text-anchor="middle" x="589" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;top_phrase = top_phrase..v.id..&quot; &quot;</text>
<text text-anchor="middle" x="589" y="-147.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="589" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;top_phrase = top_phrase..&quot;]\n&quot;</text>
<text text-anchor="middle" x="589" y="-116.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local node_phrase = &quot;&quot;</text>
<text text-anchor="middle" x="589" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i,v in ipairs(forest) do</text>
<text text-anchor="middle" x="589" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;node_phrase = node_phrase..tostring(v)</text>
<text text-anchor="middle" x="589" y="-70.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="589" y="-55.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return top_phrase..node_phrase</text>
<text text-anchor="middle" x="589" y="-39.9" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="589" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">local function F ()</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>codeblock_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.9298,-262.5107C597.4746,-254.8588 596.902,-245.2335 596.2676,-234.5695"/>
<polygon fill="#000000" stroke="#000000" points="599.757,-234.2853 595.6693,-224.5109 592.7694,-234.7011 599.757,-234.2853"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1107,-224.7007 769,-224.7007 769,-.0997 1107,-.0997 1107,-224.7007"/>
<text text-anchor="middle" x="938" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local meta = {}</text>
<text text-anchor="middle" x="938" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__index&quot;] = meta</text>
<text text-anchor="middle" x="938" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;meta[&quot;__tostring&quot;] = forest_tostring</text>
<text text-anchor="middle" x="938" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;meta[&quot;isforest&quot;] = true</text>
<text text-anchor="middle" x="938" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;the below are added to F in ast.lua </text>
<text text-anchor="middle" x="938" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;select&quot;] = ast.forest.select</text>
<text text-anchor="middle" x="938" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;with&quot;] &#160;&#160;= ast.forest.select_with</text>
<text text-anchor="middle" x="938" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45;meta[&quot;pick&quot;] &#160;&#160;= ast.forest.pick</text>
<text text-anchor="middle" x="938" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return meta</text>
<text text-anchor="middle" x="938" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="938" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local F = F()</text>
<text text-anchor="middle" x="938" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return F</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M929.9632,-262.5107C930.3652,-255.0011 930.869,-245.5908 931.4273,-235.1632"/>
<polygon fill="#000000" stroke="#000000" points="934.938,-235.0558 931.9777,-224.8829 927.948,-234.6814 934.938,-235.0558"/>
</g>
</g>
</svg>