<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="10509pt" height="5846pt"
 viewBox="0.00 0.00 10508.95 5845.81" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 5841.8099)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-5841.8099 10504.9523,-5841.8099 10504.9523,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1783.4523" cy="-5819.8099" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1783.4523" y="-5815.6099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 289</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1783.4523" cy="-5747.8099" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1783.4523" y="-5743.6099" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;100</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1783.4523,-5801.6413C1783.4523,-5793.9408 1783.4523,-5784.7842 1783.4523,-5776.2265"/>
<polygon fill="#000000" stroke="#000000" points="1786.9524,-5776.2231 1783.4523,-5766.2232 1779.9524,-5776.2232 1786.9524,-5776.2231"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="193.4523" cy="-4907.3086" rx="27" ry="18"/>
<text text-anchor="middle" x="193.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1717.4488,-5746.7271C1424.6462,-5741.7739 256.3081,-5720.3717 229.4523,-5693.8099 14.1104,-5480.8249 144.579,-5047.3034 183.5525,-4934.585"/>
<polygon fill="#000000" stroke="#000000" points="186.9134,-4935.5775 186.9218,-4924.9827 180.3082,-4933.2599 186.9134,-4935.5775"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="284.4523" cy="-4907.3086" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="284.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;3</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1717.5012,-5746.5337C1438.023,-5740.9781 364.5318,-5718.0887 339.4523,-5693.8099 229.2002,-5587.0773 269.8843,-5063.9841 281.6865,-4935.7351"/>
<polygon fill="#000000" stroke="#000000" points="285.1928,-4935.8304 282.6404,-4925.5477 278.2233,-4935.1778 285.1928,-4935.8304"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="399.4523" cy="-4907.3086" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="399.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 4&#45;24</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1717.5705,-5747.3058C1463.7943,-5745.0699 561.4281,-5734.2915 516.4523,-5693.8099 289.0945,-5489.1707 367.6638,-5049.5475 392.8995,-4935.0375"/>
<polygon fill="#000000" stroke="#000000" points="396.3142,-4935.8052 395.0961,-4925.2806 389.4852,-4934.2677 396.3142,-4935.8052"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="581.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="581.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 25&#45;26</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1717.6078,-5746.9238C1484.9911,-5743.495 713.71,-5729.47 675.4523,-5693.8099 452.7967,-5486.272 544.8918,-5049.6636 573.9108,-4935.2428"/>
<polygon fill="#000000" stroke="#000000" points="577.3189,-4936.0432 576.4326,-4925.4855 570.5416,-4934.2915 577.3189,-4936.0432"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="740.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="740.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 27&#45;30</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1717.9877,-5746.177C1513.5895,-5740.789 898.9596,-5722.2795 867.4523,-5693.8099 640.3026,-5488.5602 711.0058,-5050.2832 734.3146,-4935.3687"/>
<polygon fill="#000000" stroke="#000000" points="737.7433,-4936.0713 736.3485,-4925.5687 730.8893,-4934.6487 737.7433,-4936.0713"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="932.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="932.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 31&#45;32</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1718.2472,-5745.1235C1544.7918,-5737.6896 1083.5524,-5715.9295 1059.4523,-5693.8099 834.1339,-5487.0072 903.3004,-5050.6862 926.3333,-4935.6188"/>
<polygon fill="#000000" stroke="#000000" points="929.8271,-4936.0038 928.4068,-4925.5046 922.9697,-4934.5979 929.8271,-4936.0038"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1124.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1124.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 33&#45;36</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1718.2311,-5745.4941C1628.6462,-5741.0546 1473.6848,-5728.4692 1430.4523,-5693.8099 1177.4054,-5490.9429 1133.1801,-5050.8565 1125.8447,-4935.4705"/>
<polygon fill="#000000" stroke="#000000" points="1129.3297,-4935.112 1125.2443,-4925.3366 1122.342,-4935.5262 1129.3297,-4935.112"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="1495.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1495.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 37&#45;38</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1756.6935,-5731.2435C1743.435,-5721.7786 1728.2151,-5708.8114 1718.4523,-5693.8099 1548.9298,-5433.3213 1506.2558,-5042.9957 1497.4586,-4935.5522"/>
<polygon fill="#000000" stroke="#000000" points="1500.9414,-4935.1948 1496.6683,-4925.4999 1493.9629,-4935.7435 1500.9414,-4935.1948"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="1783.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1783.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 39&#45;44</text>
</g>
<!-- section_1&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1783.4523,-5729.4732C1783.4523,-5621.3608 1783.4523,-5067.371 1783.4523,-4935.505"/>
<polygon fill="#000000" stroke="#000000" points="1786.9524,-4935.4039 1783.4523,-4925.4039 1779.9524,-4935.404 1786.9524,-4935.4039"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="1992.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1992.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 45&#45;47</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1811.1374,-5731.3803C1824.477,-5722.0341 1839.4885,-5709.1323 1848.4523,-5693.8099 2001.9465,-5431.4336 1998.2096,-5042.4498 1993.9189,-4935.4337"/>
<polygon fill="#000000" stroke="#000000" points="1997.4148,-4935.2597 1993.4812,-4925.4221 1990.4214,-4935.5655 1997.4148,-4935.2597"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="2470.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2470.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 48&#45;67</text>
</g>
<!-- section_1&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1845.5013,-5741.8267C1915.7213,-5733.9938 2024.6136,-5718.307 2057.4523,-5693.8099 2331.0945,-5489.6777 2440.3,-5050.5141 2464.8439,-4935.401"/>
<polygon fill="#000000" stroke="#000000" points="2468.3369,-4935.7961 2466.9575,-4925.2914 2461.485,-4934.3635 2468.3369,-4935.7961"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="2716.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2716.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 68&#45;69</text>
</g>
<!-- section_1&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1848.5173,-5745.2274C2026.4308,-5737.8901 2509.5251,-5716.0116 2535.4523,-5693.8099 2771.0382,-5492.0763 2734.539,-5051.1633 2720.3477,-4935.5328"/>
<polygon fill="#000000" stroke="#000000" points="2723.7896,-4934.8546 2719.0538,-4925.3771 2716.8458,-4935.7393 2723.7896,-4934.8546"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="3120.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3120.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 70&#45;82</text>
</g>
<!-- section_1&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.1055,-5746.1508C2065.2733,-5740.4422 2743.2017,-5720.484 2781.4523,-5693.8099 3051.9956,-5505.1465 3108.2163,-5052.9104 3118.4054,-4935.529"/>
<polygon fill="#000000" stroke="#000000" points="3121.8959,-4935.7868 3119.2302,-4925.5328 3114.9196,-4935.2111 3121.8959,-4935.7868"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="3327.4523" cy="-4907.3086" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3327.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 83&#45;84</text>
</g>
<!-- section_1&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.2859,-5747.5468C2119.8639,-5746.1765 3134.4846,-5738.0931 3185.4523,-5693.8099 3417.3061,-5492.3639 3354.3695,-5051.2411 3333.0917,-4935.5486"/>
<polygon fill="#000000" stroke="#000000" points="3336.4679,-4934.5648 3331.1739,-4925.3874 3329.5893,-4935.8631 3336.4679,-4934.5648"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="3616.4523" cy="-4907.3086" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="3616.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 85&#45;100</text>
</g>
<!-- section_1&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.1371,-5746.6553C2147.4522,-5741.2819 3361.5542,-5717.961 3392.4523,-5693.8099 3640.3337,-5500.0568 3626.9145,-5052.4021 3618.8327,-4935.5986"/>
<polygon fill="#000000" stroke="#000000" points="3622.3028,-4935.0628 3618.0762,-4925.3475 3615.3218,-4935.578 3622.3028,-4935.0628"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="6582.4523" cy="-4907.3086" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6582.4523" y="-4903.1086" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 101&#45;289</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.1566,-5746.8689C2163.0043,-5742.2494 3501.9237,-5721.0907 3686.4523,-5693.8099 4866.2295,-5519.3912 6251.6662,-5028.0403 6531.6635,-4926.006"/>
<polygon fill="#000000" stroke="#000000" points="6532.9615,-4929.2581 6541.1554,-4922.5417 6530.5614,-4922.6824 6532.9615,-4929.2581"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="7160.9523,-5693.8112 6675.9523,-5693.8112 6675.9523,-4120.8059 7160.9523,-4120.8059 7160.9523,-5693.8112"/>
<text text-anchor="middle" x="6918.4523" y="-5678.6099" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
<text text-anchor="middle" x="6918.4523" y="-5647.2099" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-5631.8098" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="6918.4523" y="-5616.4098" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="6918.4523" y="-5601.0098" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="6918.4523" y="-5585.6097" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="6918.4523" y="-5570.2097" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="6918.4523" y="-5554.8097" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="6918.4523" y="-5539.4096" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="6918.4523" y="-5524.0096" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="6918.4523" y="-5508.6096" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="6918.4523" y="-5493.2095" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="6918.4523" y="-5477.8095" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="6918.4523" y="-5446.4095" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="6918.4523" y="-5431.0095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="6918.4523" y="-5415.6094" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="6918.4523" y="-5400.2094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv</text>
<text text-anchor="middle" x="6918.4523" y="-5384.8094" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6918.4523" y="-5369.4093" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
<text text-anchor="middle" x="6918.4523" y="-5354.0093" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-5322.6093" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
<text text-anchor="middle" x="6918.4523" y="-5291.2092" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-5275.8092" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
<text text-anchor="middle" x="6918.4523" y="-5260.4092" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-5229.0091" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
<text text-anchor="middle" x="6918.4523" y="-5197.6091" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-5182.2091" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="6918.4523" y="-5166.8091" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-5135.409" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
<text text-anchor="middle" x="6918.4523" y="-5104.009" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-5088.609" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="6918.4523" y="-5073.2089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="6918.4523" y="-5057.8089" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6918.4523" y="-5042.4089" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-5011.0088" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="6918.4523" y="-4995.6088" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
<text text-anchor="middle" x="6918.4523" y="-4964.2088" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-4948.8087" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="6918.4523" y="-4933.4087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="6918.4523" y="-4918.0087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="6918.4523" y="-4902.6086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="6918.4523" y="-4887.2086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="6918.4523" y="-4871.8086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="6918.4523" y="-4856.4086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4841.0085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4825.6085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="6918.4523" y="-4810.2085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="6918.4523" y="-4794.8084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="6918.4523" y="-4779.4084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="6918.4523" y="-4764.0084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="6918.4523" y="-4748.6083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4733.2083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4717.8083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="6918.4523" y="-4702.4082" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6918.4523" y="-4687.0082" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-4655.6082" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
<text text-anchor="middle" x="6918.4523" y="-4624.2081" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-4608.8081" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="6918.4523" y="-4593.4081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="6918.4523" y="-4578.0081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="6918.4523" y="-4562.608" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="6918.4523" y="-4547.208" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="6918.4523" y="-4531.808" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="6918.4523" y="-4516.4079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4501.0079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="6918.4523" y="-4485.6079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="6918.4523" y="-4470.2078" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6918.4523" y="-4454.8078" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-4423.4078" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
<text text-anchor="middle" x="6918.4523" y="-4392.0077" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="6918.4523" y="-4376.6077" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="6918.4523" y="-4361.2077" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="6918.4523" y="-4345.8076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="6918.4523" y="-4330.4076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="6918.4523" y="-4315.0076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="6918.4523" y="-4299.6076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="6918.4523" y="-4284.2075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="6918.4523" y="-4268.8075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="6918.4523" y="-4253.4075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="6918.4523" y="-4238.0074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="6918.4523" y="-4222.6074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="6918.4523" y="-4207.2074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="6918.4523" y="-4191.8073" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6918.4523" y="-4176.4073" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="6918.4523" y="-4129.0073" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_1&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>section_1&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1849.4334,-5747.6092C2427.8737,-5745.7872 6615.6555,-5731.307 6666.4523,-5693.8099 6666.8489,-5693.5172 6667.2448,-5693.2238 6667.6401,-5692.9298"/>
<polygon fill="#000000" stroke="#000000" points="6670.0251,-5695.5127 6675.8526,-5686.6644 6665.7792,-5689.9473 6670.0251,-5695.5127"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="161.9523,-2643.7047 26.9523,-2643.7047 26.9523,-2607.7047 161.9523,-2607.7047 161.9523,-2643.7047"/>
<text text-anchor="middle" x="94.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- block_3&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_3&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M288.7783,-4889.2378C309.4541,-4798.4477 390.7198,-4385.994 229.4523,-4120.8072 213.4914,-4094.5612 186.1794,-4111.1941 170.4523,-4084.8072 -127.2486,-3585.324 47.2598,-2810.4265 87.0073,-2653.8422"/>
<polygon fill="#000000" stroke="#000000" points="90.4274,-2654.5953 89.5263,-2644.0388 83.6477,-2652.8531 90.4274,-2654.5953"/>
</g>
<!-- codeblock_19 -->
<g id="node20" class="node">
<title>codeblock_19</title>
<ellipse fill="none" stroke="#000000" cx="252.4523" cy="-2625.7047" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="252.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;23</text>
</g>
<!-- block_4&#45;&gt;codeblock_19 -->
<g id="edge19" class="edge">
<title>block_4&#45;&gt;codeblock_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M398.4901,-4889.2666C393.8232,-4803.3905 372.4172,-4427.5029 339.4523,-4120.8072 337.726,-4104.7462 336.0179,-4100.8848 334.4523,-4084.8072 278.4358,-3509.5646 257.1819,-2802.7286 253.179,-2653.9806"/>
<polygon fill="#000000" stroke="#000000" points="256.6749,-2653.7762 252.9106,-2643.8726 249.6774,-2653.9621 256.6749,-2653.7762"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="397.4523,-2643.7047 343.4523,-2643.7047 343.4523,-2607.7047 397.4523,-2607.7047 397.4523,-2643.7047"/>
</g>
<!-- block_4&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_4&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M399.2231,-4889.2754C396.6903,-4690.0052 373.9593,-2901.6224 370.813,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="374.3088,-2653.7244 370.6819,-2643.7697 367.3094,-2653.8135 374.3088,-2653.7244"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="522.9523,-2643.7047 415.9523,-2643.7047 415.9523,-2607.7047 522.9523,-2607.7047 522.9523,-2643.7047"/>
<text text-anchor="middle" x="469.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- block_5&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>block_5&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M580.2555,-4889.0788C574.4719,-4800.6302 549.0203,-4407.314 532.4523,-4084.8072 502.8192,-3507.9772 476.0391,-2802.3789 470.4986,-2653.9228"/>
<polygon fill="#000000" stroke="#000000" points="473.9928,-2653.6977 470.1229,-2643.8349 466.9976,-2653.9583 473.9928,-2653.6977"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="618.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="618.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- block_6&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>block_6&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M739.4881,-4889.2754C728.8329,-4690.0052 633.206,-2901.6224 619.9696,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="623.4473,-2653.5686 619.4183,-2643.7697 616.4573,-2653.9424 623.4473,-2653.5686"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="767.4523,-2643.7047 713.4523,-2643.7047 713.4523,-2607.7047 767.4523,-2607.7047 767.4523,-2643.7047"/>
</g>
<!-- block_6&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_6&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M740.4523,-4889.2754C740.4523,-4690.0052 740.4523,-2901.6224 740.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="743.9524,-2653.7697 740.4523,-2643.7697 736.9524,-2653.7698 743.9524,-2653.7697"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="906.9523,-2643.7047 785.9523,-2643.7047 785.9523,-2607.7047 906.9523,-2607.7047 906.9523,-2643.7047"/>
<text text-anchor="middle" x="846.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- block_7&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_7&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M931.7726,-4889.2754C924.2616,-4690.0052 856.8524,-2901.6224 847.5219,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="851.0075,-2653.6308 847.1332,-2643.7697 844.0125,-2653.8945 851.0075,-2653.6308"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="1002.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1002.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;35</text>
</g>
<!-- block_8&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>block_8&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1123.4881,-4889.2754C1112.8329,-4690.0052 1017.206,-2901.6224 1003.9696,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="1007.4473,-2653.5686 1003.4183,-2643.7697 1000.4573,-2653.9424 1007.4473,-2653.5686"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1151.4523,-2643.7047 1097.4523,-2643.7047 1097.4523,-2607.7047 1151.4523,-2607.7047 1151.4523,-2643.7047"/>
</g>
<!-- block_8&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_8&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1124.4523,-4889.2754C1124.4523,-4690.0052 1124.4523,-2901.6224 1124.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="1127.9524,-2653.7697 1124.4523,-2643.7697 1120.9524,-2653.7698 1127.9524,-2653.7697"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1626.9523,-2643.7047 1169.9523,-2643.7047 1169.9523,-2607.7047 1626.9523,-2607.7047 1626.9523,-2643.7047"/>
<text text-anchor="middle" x="1398.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- block_9&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_9&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1494.6857,-4889.2754C1486.2139,-4690.0052 1410.1827,-2901.6224 1399.6587,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="1403.142,-2653.612 1399.2203,-2643.7697 1396.1484,-2653.9094 1403.142,-2653.612"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="1722.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1722.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 39&#45;43</text>
</g>
<!-- block_10&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_10&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1782.9702,-4889.2754C1777.6426,-4690.0052 1729.8291,-2901.6224 1723.211,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="1726.7014,-2653.6726 1722.9353,-2643.7697 1719.7039,-2653.8597 1726.7014,-2653.6726"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1871.4523,-2643.7047 1817.4523,-2643.7047 1817.4523,-2607.7047 1871.4523,-2607.7047 1871.4523,-2643.7047"/>
</g>
<!-- block_10&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_10&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1784.0452,-4889.0738C1786.9137,-4800.6019 1799.5758,-4407.1945 1808.4523,-4084.8072 1824.3395,-3507.7972 1840.458,-2802.3392 1843.8164,-2653.9163"/>
<polygon fill="#000000" stroke="#000000" points="1847.3174,-2653.9072 1844.0443,-2643.8307 1840.3192,-2653.749 1847.3174,-2653.9072"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2374.9523,-2645.0053 1889.9523,-2645.0053 1889.9523,-2606.4041 2374.9523,-2606.4041 2374.9523,-2645.0053"/>
<text text-anchor="middle" x="2132.4523" y="-2629.9047" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="2132.4523" y="-2614.5047" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- block_11&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>block_11&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1993.5589,-4889.2754C2005.7669,-4690.3186 2115.1771,-2907.2426 2130.6388,-2655.2593"/>
<polygon fill="#000000" stroke="#000000" points="2134.1464,-2655.2422 2131.2655,-2645.0466 2127.1595,-2654.8134 2134.1464,-2655.2422"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="2470.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2470.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;66</text>
</g>
<!-- block_12&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>block_12&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2470.4523,-4889.2754C2470.4523,-4690.0052 2470.4523,-2901.6224 2470.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="2473.9524,-2653.7697 2470.4523,-2643.7697 2466.9524,-2653.7698 2473.9524,-2653.7697"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2619.4523,-2643.7047 2565.4523,-2643.7047 2565.4523,-2607.7047 2619.4523,-2607.7047 2619.4523,-2643.7047"/>
</g>
<!-- block_12&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_12&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2472.8969,-4889.1181C2484.6444,-4800.852 2535.5858,-4408.2527 2556.4523,-4084.8072 2593.6141,-3508.776 2593.1451,-2802.5549 2592.5909,-2653.9519"/>
<polygon fill="#000000" stroke="#000000" points="2596.0905,-2653.8395 2592.5497,-2643.8539 2589.0906,-2653.8681 2596.0905,-2653.8395"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3024.9523,-2643.7047 2637.9523,-2643.7047 2637.9523,-2607.7047 3024.9523,-2607.7047 3024.9523,-2643.7047"/>
<text text-anchor="middle" x="2831.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- block_13&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_13&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2717.3613,-4889.2754C2727.4051,-4690.0052 2817.5452,-2901.6224 2830.0221,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="2833.5339,-2653.9333 2830.5418,-2643.7697 2826.5427,-2653.5808 2833.5339,-2653.9333"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3120.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3120.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 70&#45;81</text>
</g>
<!-- block_14&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>block_14&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3120.4523,-4889.2754C3120.4523,-4690.0052 3120.4523,-2901.6224 3120.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="3123.9524,-2653.7697 3120.4523,-2643.7697 3116.9524,-2653.7698 3123.9524,-2653.7697"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="3269.4523,-2643.7047 3215.4523,-2643.7047 3215.4523,-2607.7047 3269.4523,-2607.7047 3269.4523,-2643.7047"/>
</g>
<!-- block_14&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>block_14&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3122.8969,-4889.1181C3134.6444,-4800.852 3185.5858,-4408.2527 3206.4523,-4084.8072 3243.6141,-3508.776 3243.1451,-2802.5549 3242.5909,-2653.9519"/>
<polygon fill="#000000" stroke="#000000" points="3246.0905,-2653.8395 3242.5497,-2643.8539 3239.0906,-2653.8681 3246.0905,-2653.8395"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3520.9523,-2643.7047 3287.9523,-2643.7047 3287.9523,-2607.7047 3520.9523,-2607.7047 3520.9523,-2643.7047"/>
<text text-anchor="middle" x="3404.4523" y="-2622.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- block_15&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>block_15&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3328.0609,-4889.2754C3334.7859,-4690.0052 3395.1406,-2901.6224 3403.4947,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="3407.0033,-2653.8821 3403.8427,-2643.7697 3400.0073,-2653.646 3407.0033,-2653.8821"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="3616.4523" cy="-2625.7047" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3616.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 85&#45;99</text>
</g>
<!-- block_16&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>block_16&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3616.4523,-4889.2754C3616.4523,-4690.0052 3616.4523,-2901.6224 3616.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="3619.9524,-2653.7697 3616.4523,-2643.7697 3612.9524,-2653.7698 3619.9524,-2653.7697"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3765.4523,-2643.7047 3711.4523,-2643.7047 3711.4523,-2607.7047 3765.4523,-2607.7047 3765.4523,-2643.7047"/>
</g>
<!-- block_16&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_16&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3618.8969,-4889.1181C3630.6444,-4800.852 3681.5858,-4408.2527 3702.4523,-4084.8072 3739.6141,-3508.776 3739.1451,-2802.5549 3738.5909,-2653.9519"/>
<polygon fill="#000000" stroke="#000000" points="3742.0905,-2653.8395 3738.5497,-2643.8539 3735.0906,-2653.8681 3742.0905,-2653.8395"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="4217.4523" cy="-2625.7047" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="4217.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6525.3653,-4895.4031C6201.6368,-4826.6782 4600.7596,-4470.2901 4311.4523,-4084.8072 3961.4238,-3618.4174 4163.8994,-2814.1335 4209.1557,-2653.9288"/>
<polygon fill="#000000" stroke="#000000" points="4212.6341,-2654.4947 4212.0176,-2643.9178 4205.9037,-2652.5705 4212.6341,-2654.4947"/>
</g>
<!-- block_47 -->
<g id="node48" class="node">
<title>block_47</title>
<ellipse fill="none" stroke="#000000" cx="4386.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4386.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 101&#45;104</text>
</g>
<!-- section_17&#45;&gt;block_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;block_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6507.2937,-4905.2564C6192.7085,-4892.1715 4974.2673,-4795.7026 4460.4523,-4084.8072 4287.7287,-3845.8333 4367.704,-2837.4142 4383.8422,-2654.2913"/>
<polygon fill="#000000" stroke="#000000" points="4387.3475,-2654.3865 4384.7486,-2644.1154 4380.3751,-2653.7654 4387.3475,-2654.3865"/>
</g>
<!-- block_48 -->
<g id="node49" class="node">
<title>block_48</title>
<ellipse fill="none" stroke="#000000" cx="4535.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4535.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 105&#45;107</text>
</g>
<!-- section_17&#45;&gt;block_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;block_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6508.8747,-4903.0371C6210.1822,-4881.3171 5081.7362,-4755.8885 4609.4523,-4084.8072 4439.7528,-3843.6765 4517.2592,-2837.0182 4532.9186,-2654.2368"/>
<polygon fill="#000000" stroke="#000000" points="4536.4223,-2654.3447 4533.7983,-2644.08 4529.4484,-2653.7407 4536.4223,-2654.3447"/>
</g>
<!-- block_49 -->
<g id="node50" class="node">
<title>block_49</title>
<ellipse fill="none" stroke="#000000" cx="4684.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4684.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 108&#45;131</text>
</g>
<!-- section_17&#45;&gt;block_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;block_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6517.1091,-4898.1104C6258.3907,-4857.934 5299.2617,-4672.6771 4874.4523,-4084.8072 4530.7398,-3609.1627 4650.8932,-2812.2335 4679.1823,-2653.6363"/>
<polygon fill="#000000" stroke="#000000" points="4682.6388,-2654.1908 4680.9801,-2643.7267 4675.7512,-2652.9413 4682.6388,-2654.1908"/>
</g>
<!-- block_50 -->
<g id="node51" class="node">
<title>block_50</title>
<ellipse fill="none" stroke="#000000" cx="4949.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4949.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 132&#45;133</text>
</g>
<!-- section_17&#45;&gt;block_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;block_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6524.1843,-4895.7824C6293.6217,-4846.7816 5440.2494,-4632.6067 5081.4523,-4084.8072 4761.6478,-3596.5404 4909.1207,-2811.2084 4943.1111,-2653.7219"/>
<polygon fill="#000000" stroke="#000000" points="4946.5479,-2654.3889 4945.2674,-2643.8718 4939.7098,-2652.892 4946.5479,-2654.3889"/>
</g>
<!-- block_51 -->
<g id="node52" class="node">
<title>block_51</title>
<ellipse fill="none" stroke="#000000" cx="5156.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5156.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 134&#45;151</text>
</g>
<!-- section_17&#45;&gt;block_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;block_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6546.9918,-4891.3585C6395.0362,-4821.0862 5793.6637,-4523.0128 5508.4523,-4084.8072 5182.9295,-3584.6661 5158.1221,-2811.7305 5156.5101,-2654.2748"/>
<polygon fill="#000000" stroke="#000000" points="5160.008,-2653.9862 5156.4302,-2644.0138 5153.0082,-2654.0407 5160.008,-2653.9862"/>
</g>
<!-- block_52 -->
<g id="node53" class="node">
<title>block_52</title>
<ellipse fill="none" stroke="#000000" cx="5583.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5583.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 152&#45;154</text>
</g>
<!-- section_17&#45;&gt;block_52 -->
<g id="edge52" class="edge">
<title>section_17&#45;&gt;block_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6558.0491,-4890.1524C6449.2429,-4812.167 6005.307,-4477.8845 5813.4523,-4084.8072 5556.1361,-3557.6105 5575.0349,-2807.5069 5581.9703,-2653.8433"/>
<polygon fill="#000000" stroke="#000000" points="5585.4678,-2653.976 5582.445,-2643.8215 5578.4756,-2653.6447 5585.4678,-2653.976"/>
</g>
<!-- block_53 -->
<g id="node54" class="node">
<title>block_53</title>
<ellipse fill="none" stroke="#000000" cx="5888.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5888.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 155&#45;209</text>
</g>
<!-- section_17&#45;&gt;block_53 -->
<g id="edge53" class="edge">
<title>section_17&#45;&gt;block_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6572.0654,-4889.439C6522.4951,-4803.4256 6307.7151,-4422.3442 6194.4523,-4084.8072 6006.6835,-3525.233 5910.6261,-2804.7716 5891.8853,-2654.0874"/>
<polygon fill="#000000" stroke="#000000" points="5895.3214,-2653.3529 5890.6234,-2643.8566 5888.374,-2654.2099 5895.3214,-2653.3529"/>
</g>
<!-- block_54 -->
<g id="node55" class="node">
<title>block_54</title>
<ellipse fill="none" stroke="#000000" cx="6269.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6269.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 210&#45;212</text>
</g>
<!-- section_17&#45;&gt;block_54 -->
<g id="edge54" class="edge">
<title>section_17&#45;&gt;block_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6579.9785,-4889.2754C6552.6282,-4689.9065 6307.0605,-2899.8487 6273.2946,-2653.7131"/>
<polygon fill="#000000" stroke="#000000" points="6276.7573,-2653.2012 6271.9306,-2643.7697 6269.8222,-2654.1527 6276.7573,-2653.2012"/>
</g>
<!-- block_55 -->
<g id="node56" class="node">
<title>block_55</title>
<ellipse fill="none" stroke="#000000" cx="6582.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6582.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 213&#45;218</text>
</g>
<!-- section_17&#45;&gt;block_55 -->
<g id="edge55" class="edge">
<title>section_17&#45;&gt;block_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6582.4523,-4889.2754C6582.4523,-4690.0052 6582.4523,-2901.6224 6582.4523,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="6585.9524,-2653.7697 6582.4523,-2643.7697 6578.9524,-2653.7698 6585.9524,-2653.7697"/>
</g>
<!-- block_56 -->
<g id="node57" class="node">
<title>block_56</title>
<ellipse fill="none" stroke="#000000" cx="6801.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6801.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 219&#45;220</text>
</g>
<!-- section_17&#45;&gt;block_56 -->
<g id="edge56" class="edge">
<title>section_17&#45;&gt;block_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6584.1832,-4889.2754C6603.3102,-4690.0052 6774.9683,-2901.6224 6798.7287,-2654.0802"/>
<polygon fill="#000000" stroke="#000000" points="6802.2468,-2654.0584 6799.7184,-2643.7697 6795.2788,-2653.3896 6802.2468,-2654.0584"/>
</g>
<!-- block_57 -->
<g id="node58" class="node">
<title>block_57</title>
<ellipse fill="none" stroke="#000000" cx="7284.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7284.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 221&#45;229</text>
</g>
<!-- section_17&#45;&gt;block_57 -->
<g id="edge57" class="edge">
<title>section_17&#45;&gt;block_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.5575,-4889.3334C6552.952,-4794.6096 6452.1872,-4349.1016 6666.4523,-4120.8072 6731.2565,-4051.7599 6806.1386,-4148.2351 6876.4523,-4084.8072 7326.5538,-3678.7844 7296.9171,-2821.3409 7286.5207,-2654.2624"/>
<polygon fill="#000000" stroke="#000000" points="7289.9852,-2653.6033 7285.8406,-2643.8528 7283.0001,-2654.0597 7289.9852,-2653.6033"/>
</g>
<!-- block_58 -->
<g id="node59" class="node">
<title>block_58</title>
<ellipse fill="none" stroke="#000000" cx="7570.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7570.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 230&#45;232</text>
</g>
<!-- section_17&#45;&gt;block_58 -->
<g id="edge58" class="edge">
<title>section_17&#45;&gt;block_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.1767,-4889.1844C6550.3355,-4792.7616 6438.8625,-4336.3201 6666.4523,-4120.8072 6778.424,-4014.7773 7245.5272,-4188.7354 7359.4523,-4084.8072 7795.6572,-3686.8794 7617.055,-2821.3085 7577.4669,-2654.0131"/>
<polygon fill="#000000" stroke="#000000" points="7580.8048,-2652.9233 7575.0683,-2644.0158 7573.998,-2654.5565 7580.8048,-2652.9233"/>
</g>
<!-- block_59 -->
<g id="node60" class="node">
<title>block_59</title>
<ellipse fill="none" stroke="#000000" cx="8058.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8058.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 233&#45;241</text>
</g>
<!-- section_17&#45;&gt;block_59 -->
<g id="edge59" class="edge">
<title>section_17&#45;&gt;block_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.1194,-4889.1234C6549.9831,-4792.3866 6437.237,-4334.5905 6666.4523,-4120.8072 6746.0548,-4046.5641 7559.8531,-4152.0484 7645.4523,-4084.8072 8123.5481,-3709.2463 8075.163,-2823.9357 8061.101,-2654.1389"/>
<polygon fill="#000000" stroke="#000000" points="8064.5734,-2653.6662 8060.2303,-2644.0024 8057.5991,-2654.2653 8064.5734,-2653.6662"/>
</g>
<!-- block_60 -->
<g id="node61" class="node">
<title>block_60</title>
<ellipse fill="none" stroke="#000000" cx="8332.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8332.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 242&#45;243</text>
</g>
<!-- section_17&#45;&gt;block_60 -->
<g id="edge60" class="edge">
<title>section_17&#45;&gt;block_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.0735,-4889.0739C6549.7008,-4792.0821 6435.935,-4333.1859 6666.4523,-4120.8072 6726.4095,-4065.5679 8072.6964,-4139.1669 8133.4523,-4084.8072 8573.4449,-3691.1364 8381.5621,-2820.3886 8339.7598,-2653.6179"/>
<polygon fill="#000000" stroke="#000000" points="8343.0857,-2652.4943 8337.2317,-2643.6636 8336.301,-2654.2174 8343.0857,-2652.4943"/>
</g>
<!-- block_61 -->
<g id="node62" class="node">
<title>block_61</title>
<ellipse fill="none" stroke="#000000" cx="8784.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8784.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 244&#45;272</text>
</g>
<!-- section_17&#45;&gt;block_61 -->
<g id="edge61" class="edge">
<title>section_17&#45;&gt;block_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.0591,-4889.0582C6549.612,-4791.9856 6435.5255,-4332.7406 6666.4523,-4120.8072 6737.7282,-4055.3937 8331.5818,-4144.831 8407.4523,-4084.8072 8881.2908,-3709.9375 8807.0349,-2824.071 8787.9467,-2654.1588"/>
<polygon fill="#000000" stroke="#000000" points="8791.3995,-2653.5479 8786.7755,-2644.0154 8784.4457,-2654.3508 8791.3995,-2653.5479"/>
</g>
<!-- block_62 -->
<g id="node63" class="node">
<title>block_62</title>
<ellipse fill="none" stroke="#000000" cx="9058.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9058.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 273&#45;275</text>
</g>
<!-- section_17&#45;&gt;block_62 -->
<g id="edge62" class="edge">
<title>section_17&#45;&gt;block_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.0432,-4889.0408C6549.5143,-4791.8788 6435.0746,-4332.2482 6666.4523,-4120.8072 6756.4012,-4038.6089 8768.315,-4165.6859 8859.4523,-4084.8072 9301.0397,-3692.9261 9107.8744,-2820.7392 9065.8057,-2653.6694"/>
<polygon fill="#000000" stroke="#000000" points="9069.125,-2652.5214 9063.2615,-2643.697 9062.3423,-2654.2519 9069.125,-2652.5214"/>
</g>
<!-- block_63 -->
<g id="node64" class="node">
<title>block_63</title>
<ellipse fill="none" stroke="#000000" cx="9510.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9510.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 276&#45;283</text>
</g>
<!-- section_17&#45;&gt;block_63 -->
<g id="edge63" class="edge">
<title>section_17&#45;&gt;block_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.1266,-4889.3515C6549.7239,-4792.8406 6434.6283,-4332.2686 6666.4523,-4120.8072 6767.721,-4028.4337 9025.697,-4169.5245 9133.4523,-4084.8072 9608.4288,-3711.3805 9533.2578,-2824.3537 9513.9794,-2654.2003"/>
<polygon fill="#000000" stroke="#000000" points="9517.4298,-2653.5705 9512.7968,-2644.0424 9510.4768,-2654.3801 9517.4298,-2653.5705"/>
</g>
<!-- block_64 -->
<g id="node65" class="node">
<title>block_64</title>
<ellipse fill="none" stroke="#000000" cx="9712.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9712.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 284&#45;285</text>
</g>
<!-- section_17&#45;&gt;block_64 -->
<g id="edge64" class="edge">
<title>section_17&#45;&gt;block_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.1184,-4889.3424C6549.6727,-4792.7843 6434.3896,-4332.0066 6666.4523,-4120.8072 6726.4237,-4066.2276 9526.0181,-4139.9714 9585.4523,-4084.8072 9802.6717,-3883.1942 9729.6043,-2838.9451 9714.7985,-2653.7874"/>
<polygon fill="#000000" stroke="#000000" points="9718.2822,-2653.443 9713.9858,-2643.7584 9711.3051,-2654.0084 9718.2822,-2653.443"/>
</g>
<!-- block_65 -->
<g id="node66" class="node">
<title>block_65</title>
<ellipse fill="none" stroke="#000000" cx="9904.4523" cy="-2625.7047" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9904.4523" y="-2621.5047" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 286&#45;289</text>
</g>
<!-- section_17&#45;&gt;block_65 -->
<g id="edge65" class="edge">
<title>section_17&#45;&gt;block_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.1155,-4889.3392C6549.6546,-4792.7644 6434.3053,-4331.9139 6666.4523,-4120.8072 6730.5965,-4062.4767 9724.0832,-4143.9789 9787.4523,-4084.8072 10003.9418,-3882.6577 9923.1823,-2838.8492 9907.0066,-2653.7745"/>
<polygon fill="#000000" stroke="#000000" points="9910.4875,-2653.4026 9906.1197,-2643.75 9903.5147,-2654.0196 9910.4875,-2653.4026"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="10500.9523,-4084.9098 9987.9523,-4084.9098 9987.9523,-1166.4996 10500.9523,-1166.4996 10500.9523,-4084.9098"/>
<text text-anchor="middle" x="10244.4523" y="-4069.6072" font-family="Inconsolata" font-size="14.00" fill="#000000">*** make_ast_node</text>
<text text-anchor="middle" x="10244.4523" y="-4038.2072" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
<text text-anchor="middle" x="10244.4523" y="-4006.8072" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
<text text-anchor="middle" x="10244.4523" y="-3959.4071" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-3944.0071" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="10244.4523" y="-3928.6071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="10244.4523" y="-3913.2071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="10244.4523" y="-3897.807" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="10244.4523" y="-3882.407" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="10244.4523" y="-3867.007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="10244.4523" y="-3851.6069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="10244.4523" y="-3836.2069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10244.4523" y="-3820.8069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="10244.4523" y="-3805.4068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="10244.4523" y="-3790.0068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-3774.6068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="10244.4523" y="-3759.2067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="10244.4523" y="-3743.8067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="10244.4523" y="-3728.4067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="10244.4523" y="-3713.0066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-3697.6066" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-3666.2066" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="10244.4523" y="-3650.8066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="10244.4523" y="-3635.4065" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-3620.0065" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-3588.6065" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
<text text-anchor="middle" x="10244.4523" y="-3557.2064" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-3541.8064" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="10244.4523" y="-3526.4064" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="10244.4523" y="-3511.0063" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="10244.4523" y="-3495.6063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="10244.4523" y="-3480.2063" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-3464.8062" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="10244.4523" y="-3449.4062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="10244.4523" y="-3434.0062" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-3418.6061" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="10244.4523" y="-3403.2061" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="10244.4523" y="-3387.8061" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="10244.4523" y="-3372.4061" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="10244.4523" y="-3357.006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="10244.4523" y="-3341.606" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-3326.206" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
<text text-anchor="middle" x="10244.4523" y="-3310.8059" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-3279.4059" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="10244.4523" y="-3264.0059" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
<text text-anchor="middle" x="10244.4523" y="-3232.6058" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-3217.2058" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="10244.4523" y="-3201.8058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="10244.4523" y="-3186.4057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="10244.4523" y="-3171.0057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="10244.4523" y="-3155.6057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="10244.4523" y="-3140.2056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="10244.4523" y="-3124.8056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="10244.4523" y="-3109.4056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="10244.4523" y="-3094.0056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="10244.4523" y="-3078.6055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="10244.4523" y="-3063.2055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="10244.4523" y="-3047.8055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-3032.4054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="10244.4523" y="-3017.0054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="10244.4523" y="-3001.6054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="10244.4523" y="-2986.2053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="10244.4523" y="-2970.8053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="10244.4523" y="-2955.4053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="10244.4523" y="-2940.0052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="10244.4523" y="-2924.6052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="10244.4523" y="-2909.2052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="10244.4523" y="-2893.8051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="10244.4523" y="-2878.4051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="10244.4523" y="-2863.0051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-2847.6051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-2832.205" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="10244.4523" y="-2816.805" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="10244.4523" y="-2801.405" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="10244.4523" y="-2786.0049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="10244.4523" y="-2770.6049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="10244.4523" y="-2755.2049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="10244.4523" y="-2739.8048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="10244.4523" y="-2724.4048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10244.4523" y="-2709.0048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="10244.4523" y="-2693.6047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="10244.4523" y="-2678.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="10244.4523" y="-2662.8047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="10244.4523" y="-2647.4047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="10244.4523" y="-2632.0046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="10244.4523" y="-2616.6046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="10244.4523" y="-2601.2046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="10244.4523" y="-2585.8045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-2570.4045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-2555.0045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="10244.4523" y="-2539.6044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="10244.4523" y="-2524.2044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="10244.4523" y="-2508.8044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="10244.4523" y="-2493.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-2478.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="10244.4523" y="-2462.6043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-2447.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="10244.4523" y="-2431.8042" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-2416.4042" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-2385.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="10244.4523" y="-2369.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
<text text-anchor="middle" x="10244.4523" y="-2338.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-2322.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="10244.4523" y="-2307.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="10244.4523" y="-2292.004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-2276.604" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-2245.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
<text text-anchor="middle" x="10244.4523" y="-2213.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-2198.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="10244.4523" y="-2183.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="10244.4523" y="-2167.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="10244.4523" y="-2152.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="10244.4523" y="-2136.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="10244.4523" y="-2121.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-2106.0037" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-2074.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="10244.4523" y="-2059.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
<text text-anchor="middle" x="10244.4523" y="-2027.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-2012.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="10244.4523" y="-1997.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="10244.4523" y="-1981.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="10244.4523" y="-1966.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="10244.4523" y="-1950.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="10244.4523" y="-1935.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-1920.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-1888.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
<text text-anchor="middle" x="10244.4523" y="-1857.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-1841.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="10244.4523" y="-1810.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="10244.4523" y="-1779.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="10244.4523" y="-1763.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="10244.4523" y="-1748.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1732.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="10244.4523" y="-1717.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1702.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="10244.4523" y="-1686.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="10244.4523" y="-1671.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="10244.4523" y="-1655.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1640.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-1625.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="10244.4523" y="-1609.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="10244.4523" y="-1594.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1578.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1563.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-1548.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-1532.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-1517.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1501.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="10244.4523" y="-1486.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1471.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="10244.4523" y="-1455.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-1440.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-1408.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="10244.4523" y="-1393.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
<text text-anchor="middle" x="10244.4523" y="-1362.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-1346.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="10244.4523" y="-1331.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="10244.4523" y="-1315.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="10244.4523" y="-1300.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="10244.4523" y="-1237.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
<text text-anchor="middle" x="10244.4523" y="-1205.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="10244.4523" y="-1190.2022" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
<text text-anchor="middle" x="10244.4523" y="-1174.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
</g>
<!-- section_17&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>section_17&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6577.113,-4889.3365C6549.6394,-4792.7478 6434.2348,-4331.8363 6666.4523,-4120.8072 6734.5627,-4058.9115 9909.1208,-4144.1671 9979.4523,-4084.8072 9979.7175,-4084.5835 9979.9824,-4084.3595 9980.2472,-4084.1354"/>
<polygon fill="#000000" stroke="#000000" points="9982.5629,-4086.7602 9987.8671,-4077.5887 9978.0012,-4081.4506 9982.5629,-4086.7602"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="431.9523,-1130.5025 72.9523,-1130.5025 72.9523,-844.9013 431.9523,-844.9013 431.9523,-1130.5025"/>
<text text-anchor="middle" x="252.4523" y="-1115.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="252.4523" y="-1100.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="252.4523" y="-1084.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="252.4523" y="-1069.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="252.4523" y="-1053.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="252.4523" y="-1038.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="252.4523" y="-1023.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="252.4523" y="-1007.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="252.4523" y="-992.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="252.4523" y="-976.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="252.4523" y="-961.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="252.4523" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="252.4523" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="252.4523" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="252.4523" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv</text>
<text text-anchor="middle" x="252.4523" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="252.4523" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>codeblock_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M252.4523,-2607.5893C252.4523,-2464.8453 252.4523,-1516.9244 252.4523,-1140.9438"/>
<polygon fill="#000000" stroke="#000000" points="255.9524,-1140.8055 252.4523,-1130.8056 248.9524,-1140.8056 255.9524,-1140.8055"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="678.9523,-1005.7019 557.9523,-1005.7019 557.9523,-969.7019 678.9523,-969.7019 678.9523,-1005.7019"/>
<text text-anchor="middle" x="618.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M618.4523,-2607.5893C618.4523,-2443.651 618.4523,-1217.6841 618.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="621.9524,-1015.7137 618.4523,-1005.7137 614.9524,-1015.7137 621.9524,-1015.7137"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1115.4523,-1005.7019 889.4523,-1005.7019 889.4523,-969.7019 1115.4523,-969.7019 1115.4523,-1005.7019"/>
<text text-anchor="middle" x="1002.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1002.4523,-2607.5893C1002.4523,-2443.651 1002.4523,-1217.6841 1002.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="1005.9524,-1015.7137 1002.4523,-1005.7137 998.9524,-1015.7137 1005.9524,-1015.7137"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1877.4523,-1014.9024 1567.4523,-1014.9024 1567.4523,-960.5014 1877.4523,-960.5014 1877.4523,-1014.9024"/>
<text text-anchor="middle" x="1722.4523" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1722.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1722.4523" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1722.4523,-2607.5893C1722.4523,-2445.9926 1722.4523,-1252.4882 1722.4523,-1025.0748"/>
<polygon fill="#000000" stroke="#000000" points="1725.9524,-1024.9837 1722.4523,-1014.9838 1718.9524,-1024.9838 1725.9524,-1024.9837"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2632.4523,-1122.5025 2308.4523,-1122.5025 2308.4523,-852.9013 2632.4523,-852.9013 2632.4523,-1122.5025"/>
<text text-anchor="middle" x="2470.4523" y="-1107.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="2470.4523" y="-1092.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="2470.4523" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="2470.4523" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2470.4523" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="2470.4523" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="2470.4523" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2470.4523" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2470.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="2470.4523" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="2470.4523" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2470.4523" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="2470.4523" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2470.4523" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2470.4523" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2470.4523" y="-876.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="2470.4523" y="-861.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2470.4523,-2607.5893C2470.4523,-2463.7997 2470.4523,-1502.9937 2470.4523,-1132.7739"/>
<polygon fill="#000000" stroke="#000000" points="2473.9524,-1132.53 2470.4523,-1122.53 2466.9524,-1132.53 2473.9524,-1132.53"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="3201.4523,-1068.7022 2779.4523,-1068.7022 2779.4523,-906.7016 3201.4523,-906.7016 3201.4523,-1068.7022"/>
<text text-anchor="middle" x="2990.4523" y="-1053.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="2990.4523" y="-1038.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="2990.4523" y="-1022.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="2990.4523" y="-1007.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="2990.4523" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="2990.4523" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="2990.4523" y="-961.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2990.4523" y="-945.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="2990.4523" y="-930.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="2990.4523" y="-914.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3120.5754,-2607.4546C3121.1617,-2483.5169 3120.6644,-1752.6933 3033.4523,-1166.6022 3029.1625,-1137.7735 3022.4683,-1106.7688 3015.6285,-1078.8013"/>
<polygon fill="#000000" stroke="#000000" points="3019.0127,-1077.9065 3013.2068,-1069.0441 3012.2188,-1079.5928 3019.0127,-1077.9065"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3662.9523,-1091.9024 3219.9523,-1091.9024 3219.9523,-883.5014 3662.9523,-883.5014 3662.9523,-1091.9024"/>
<text text-anchor="middle" x="3441.4523" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="3441.4523" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="3441.4523" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="3441.4523" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="3441.4523" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="3441.4523" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="3441.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="3441.4523" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="3441.4523" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="3441.4523" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="3441.4523" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="3441.4523" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3441.4523" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3618.0294,-2607.5508C3628.3298,-2482.783 3681.0002,-1740.0952 3529.4523,-1166.6022 3523.6749,-1144.7391 3515.115,-1122.3835 3505.5691,-1101.2108"/>
<polygon fill="#000000" stroke="#000000" points="3508.6387,-1099.5092 3501.2723,-1091.8943 3502.2822,-1102.4409 3508.6387,-1099.5092"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4095.9523,-1007.604 3680.9523,-1007.604 3680.9523,-967.7998 4095.9523,-967.7998 4095.9523,-1007.604"/>
<text text-anchor="middle" x="3888.4523" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- block_47&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>block_47&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4388.4632,-2607.4786C4404.8727,-2455.0246 4511.1913,-1392.0618 4311.4523,-1166.6022 4249.5295,-1096.7054 4191.2296,-1165.0942 4104.4523,-1130.6022 4032.1341,-1101.8573 3958.8717,-1046.6628 3918.9972,-1013.9215"/>
<polygon fill="#000000" stroke="#000000" points="3921.1741,-1011.1799 3911.2425,-1007.4902 3916.7055,-1016.568 3921.1741,-1011.1799"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4388.9523,-1007.604 4113.9523,-1007.604 4113.9523,-967.7998 4388.9523,-967.7998 4388.9523,-1007.604"/>
<text text-anchor="middle" x="4251.4523" y="-992.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- block_48&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>block_48&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4536.8553,-2607.4947C4548.0903,-2457.3441 4619.0177,-1422.9293 4461.4523,-1166.6022 4444.5643,-1139.1287 4424.2186,-1149.9954 4398.4523,-1130.6022 4351.464,-1095.2359 4303.8922,-1045.9912 4276.0655,-1015.5174"/>
<polygon fill="#000000" stroke="#000000" points="4278.4008,-1012.8821 4269.0931,-1007.8207 4273.213,-1017.5818 4278.4008,-1012.8821"/>
</g>
<!-- codeblock_68 -->
<g id="node69" class="node">
<title>codeblock_68</title>
<ellipse fill="none" stroke="#000000" cx="4494.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4494.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 108&#45;130</text>
</g>
<!-- block_49&#45;&gt;codeblock_68 -->
<g id="edge68" class="edge">
<title>block_49&#45;&gt;codeblock_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4687.0092,-2607.3377C4703.8783,-2481.1483 4792.9903,-1730.691 4610.4523,-1166.6022 4605.0433,-1149.887 4543.8641,-1059.5792 4512.605,-1014.0203"/>
<polygon fill="#000000" stroke="#000000" points="4515.3258,-1011.7995 4506.7776,-1005.5402 4509.5566,-1015.7641 4515.3258,-1011.7995"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="4653.4523,-1005.7019 4599.4523,-1005.7019 4599.4523,-969.7019 4653.4523,-969.7019 4653.4523,-1005.7019"/>
</g>
<!-- block_49&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>block_49&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4683.8109,-2607.5893C4678.006,-2443.651 4634.5958,-1217.6841 4627.4474,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="4630.9419,-1015.5835 4627.0901,-1005.7137 4623.9463,-1015.8313 4630.9419,-1015.5835"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4918.9523,-1005.7019 4671.9523,-1005.7019 4671.9523,-969.7019 4918.9523,-969.7019 4918.9523,-1005.7019"/>
<text text-anchor="middle" x="4795.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- block_50&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>block_50&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4947.7492,-2607.5893C4932.3362,-2443.651 4817.0746,-1217.6841 4798.0944,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="4801.5665,-1015.3421 4797.1457,-1005.7137 4794.5972,-1015.9974 4801.5665,-1015.3421"/>
</g>
<!-- codeblock_72 -->
<g id="node73" class="node">
<title>codeblock_72</title>
<ellipse fill="none" stroke="#000000" cx="5024.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5024.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;150</text>
</g>
<!-- block_51&#45;&gt;codeblock_72 -->
<g id="edge72" class="edge">
<title>block_51&#45;&gt;codeblock_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5154.9925,-2607.5893C5141.7814,-2443.651 5042.9857,-1217.6841 5026.7169,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="5030.1959,-1015.4002 5025.9038,-1005.7137 5023.2185,-1015.9626 5030.1959,-1015.4002"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="5183.4523,-1005.7019 5129.4523,-1005.7019 5129.4523,-969.7019 5183.4523,-969.7019 5183.4523,-1005.7019"/>
</g>
<!-- block_51&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>block_51&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5156.4523,-2607.5893C5156.4523,-2443.651 5156.4523,-1217.6841 5156.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="5159.9524,-1015.7137 5156.4523,-1005.7137 5152.9524,-1015.7137 5159.9524,-1015.7137"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="5651.4523,-1007.0025 5201.4523,-1007.0025 5201.4523,-968.4013 5651.4523,-968.4013 5651.4523,-1007.0025"/>
<text text-anchor="middle" x="5426.4523" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="5426.4523" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- block_52&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>block_52&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5581.716,-2607.5893C5566.036,-2443.9982 5448.993,-1222.8719 5429.2701,-1017.1001"/>
<polygon fill="#000000" stroke="#000000" points="5432.7443,-1016.6622 5428.306,-1007.0418 5425.7762,-1017.3301 5432.7443,-1016.6622"/>
</g>
<!-- codeblock_76 -->
<g id="node77" class="node">
<title>codeblock_76</title>
<ellipse fill="none" stroke="#000000" cx="5756.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5756.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 155&#45;208</text>
</g>
<!-- block_53&#45;&gt;codeblock_76 -->
<g id="edge76" class="edge">
<title>block_53&#45;&gt;codeblock_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5886.9925,-2607.5893C5873.7814,-2443.651 5774.9857,-1217.6841 5758.7169,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="5762.1959,-1015.4002 5757.9038,-1005.7137 5755.2185,-1015.9626 5762.1959,-1015.4002"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="5915.4523,-1005.7019 5861.4523,-1005.7019 5861.4523,-969.7019 5915.4523,-969.7019 5915.4523,-1005.7019"/>
</g>
<!-- block_53&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>block_53&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5888.4523,-2607.5893C5888.4523,-2443.651 5888.4523,-1217.6841 5888.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="5891.9524,-1015.7137 5888.4523,-1005.7137 5884.9524,-1015.7137 5891.9524,-1015.7137"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="6411.4523,-1007.0025 5933.4523,-1007.0025 5933.4523,-968.4013 6411.4523,-968.4013 6411.4523,-1007.0025"/>
<text text-anchor="middle" x="6172.4523" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="6172.4523" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- block_54&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>block_54&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6268.3796,-2607.5893C6258.692,-2443.9982 6186.3787,-1222.8719 6174.1932,-1017.1001"/>
<polygon fill="#000000" stroke="#000000" points="6177.6827,-1016.8173 6173.5976,-1007.0418 6170.695,-1017.2312 6177.6827,-1016.8173"/>
</g>
<!-- codeblock_80 -->
<g id="node81" class="node">
<title>codeblock_80</title>
<ellipse fill="none" stroke="#000000" cx="6516.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6516.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 213&#45;217</text>
</g>
<!-- block_55&#45;&gt;codeblock_80 -->
<g id="edge80" class="edge">
<title>block_55&#45;&gt;codeblock_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6581.7224,-2607.5893C6575.1168,-2443.651 6525.719,-1217.6841 6517.5846,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="6521.0779,-1015.5646 6517.1781,-1005.7137 6514.0836,-1015.8465 6521.0779,-1015.5646"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="6675.4523,-1005.7019 6621.4523,-1005.7019 6621.4523,-969.7019 6675.4523,-969.7019 6675.4523,-1005.7019"/>
</g>
<!-- block_55&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>block_55&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6583.1823,-2607.5893C6589.7878,-2443.651 6639.1857,-1217.6841 6647.32,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="6650.821,-1015.8465 6647.7266,-1005.7137 6643.8267,-1015.5646 6650.821,-1015.8465"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="7178.9523,-1005.7019 6693.9523,-1005.7019 6693.9523,-969.7019 7178.9523,-969.7019 7178.9523,-1005.7019"/>
<text text-anchor="middle" x="6936.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- block_56&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>block_56&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6802.9454,-2607.5893C6816.4567,-2443.651 6917.4978,-1217.6841 6934.1362,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="6937.6345,-1015.9674 6934.9678,-1005.7137 6930.6582,-1015.3924 6937.6345,-1015.9674"/>
</g>
<!-- codeblock_84 -->
<g id="node85" class="node">
<title>codeblock_84</title>
<ellipse fill="none" stroke="#000000" cx="7284.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7284.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 221&#45;228</text>
</g>
<!-- block_57&#45;&gt;codeblock_84 -->
<g id="edge84" class="edge">
<title>block_57&#45;&gt;codeblock_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7284.4523,-2607.5893C7284.4523,-2443.651 7284.4523,-1217.6841 7284.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="7287.9524,-1015.7137 7284.4523,-1005.7137 7280.9524,-1015.7137 7287.9524,-1015.7137"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="7443.4523,-1005.7019 7389.4523,-1005.7019 7389.4523,-969.7019 7443.4523,-969.7019 7443.4523,-1005.7019"/>
</g>
<!-- block_57&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>block_57&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7285.9122,-2607.5893C7299.1233,-2443.651 7397.919,-1217.6841 7414.1877,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="7417.6862,-1015.9626 7415.0008,-1005.7137 7410.7088,-1015.4002 7417.6862,-1015.9626"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="7953.4523,-1007.0025 7461.4523,-1007.0025 7461.4523,-968.4013 7953.4523,-968.4013 7953.4523,-1007.0025"/>
<text text-anchor="middle" x="7707.4523" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="7707.4523" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- block_58&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>block_58&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7571.9675,-2607.5893C7585.65,-2443.9982 7687.7831,-1222.8719 7704.9935,-1017.1001"/>
<polygon fill="#000000" stroke="#000000" points="7708.489,-1017.2987 7705.8348,-1007.0418 7701.5134,-1016.7152 7708.489,-1017.2987"/>
</g>
<!-- codeblock_88 -->
<g id="node89" class="node">
<title>codeblock_88</title>
<ellipse fill="none" stroke="#000000" cx="8058.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8058.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 233&#45;240</text>
</g>
<!-- block_59&#45;&gt;codeblock_88 -->
<g id="edge88" class="edge">
<title>block_59&#45;&gt;codeblock_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8058.4523,-2607.5893C8058.4523,-2443.651 8058.4523,-1217.6841 8058.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="8061.9524,-1015.7137 8058.4523,-1005.7137 8054.9524,-1015.7137 8061.9524,-1015.7137"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="8217.4523,-1005.7019 8163.4523,-1005.7019 8163.4523,-969.7019 8217.4523,-969.7019 8217.4523,-1005.7019"/>
</g>
<!-- block_59&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>block_59&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8059.9122,-2607.5893C8073.1233,-2443.651 8171.919,-1217.6841 8188.1877,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="8191.6862,-1015.9626 8189.0008,-1005.7137 8184.7088,-1015.4002 8191.6862,-1015.9626"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="8678.9523,-1005.7019 8235.9523,-1005.7019 8235.9523,-969.7019 8678.9523,-969.7019 8678.9523,-1005.7019"/>
<text text-anchor="middle" x="8457.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- block_60&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>block_60&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8333.8348,-2607.5893C8346.3453,-2443.651 8439.9018,-1217.6841 8455.3078,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="8458.8067,-1015.9511 8456.0778,-1005.7137 8451.8269,-1015.4184 8458.8067,-1015.9511"/>
</g>
<!-- codeblock_92 -->
<g id="node93" class="node">
<title>codeblock_92</title>
<ellipse fill="none" stroke="#000000" cx="8784.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8784.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 244&#45;271</text>
</g>
<!-- block_61&#45;&gt;codeblock_92 -->
<g id="edge92" class="edge">
<title>block_61&#45;&gt;codeblock_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8784.4523,-2607.5893C8784.4523,-2443.651 8784.4523,-1217.6841 8784.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="8787.9524,-1015.7137 8784.4523,-1005.7137 8780.9524,-1015.7137 8787.9524,-1015.7137"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="8943.4523,-1005.7019 8889.4523,-1005.7019 8889.4523,-969.7019 8943.4523,-969.7019 8943.4523,-1005.7019"/>
</g>
<!-- block_61&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>block_61&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8785.9122,-2607.5893C8799.1233,-2443.651 8897.919,-1217.6841 8914.1877,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="8917.6862,-1015.9626 8915.0008,-1005.7137 8910.7088,-1015.4002 8917.6862,-1015.9626"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="9404.9523,-1007.0025 8961.9523,-1007.0025 8961.9523,-968.4013 9404.9523,-968.4013 9404.9523,-1007.0025"/>
<text text-anchor="middle" x="9183.4523" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="9183.4523" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- block_62&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>block_62&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9059.8348,-2607.5893C9072.3188,-2443.9982 9165.5059,-1222.8719 9181.2089,-1017.1001"/>
<polygon fill="#000000" stroke="#000000" points="9184.7053,-1017.2791 9181.9765,-1007.0418 9177.7256,-1016.7464 9184.7053,-1017.2791"/>
</g>
<!-- codeblock_96 -->
<g id="node97" class="node">
<title>codeblock_96</title>
<ellipse fill="none" stroke="#000000" cx="9510.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9510.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 276&#45;280</text>
</g>
<!-- block_63&#45;&gt;codeblock_96 -->
<g id="edge96" class="edge">
<title>block_63&#45;&gt;codeblock_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9510.4523,-2607.5893C9510.4523,-2443.651 9510.4523,-1217.6841 9510.4523,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="9513.9524,-1015.7137 9510.4523,-1005.7137 9506.9524,-1015.7137 9513.9524,-1015.7137"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="9669.4523,-1007.7019 9615.4523,-1007.7019 9615.4523,-967.7019 9669.4523,-967.7019 9669.4523,-1007.7019"/>
</g>
<!-- block_63&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>block_63&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9511.9122,-2607.5893C9525.0746,-2444.2554 9623.1917,-1226.7093 9640.0044,-1018.0783"/>
<polygon fill="#000000" stroke="#000000" points="9643.5132,-1018.109 9640.8279,-1007.8602 9636.5358,-1017.5467 9643.5132,-1018.109"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="9843.4523,-1005.7019 9687.4523,-1005.7019 9687.4523,-969.7019 9843.4523,-969.7019 9843.4523,-1005.7019"/>
<text text-anchor="middle" x="9765.4523" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- block_64&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>block_64&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9713.0385,-2607.5893C9718.3429,-2443.651 9758.0109,-1217.6841 9764.5431,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="9768.0442,-1015.8217 9764.8695,-1005.7137 9761.0479,-1015.5952 9768.0442,-1015.8217"/>
</g>
<!-- codeblock_100 -->
<g id="node101" class="node">
<title>codeblock_100</title>
<ellipse fill="none" stroke="#000000" cx="9948.4523" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9948.4523" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 286&#45;288</text>
</g>
<!-- block_65&#45;&gt;codeblock_100 -->
<g id="edge100" class="edge">
<title>block_65&#45;&gt;codeblock_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9904.9389,-2607.5893C9909.3427,-2443.651 9942.2745,-1217.6841 9947.6975,-1015.8038"/>
<polygon fill="#000000" stroke="#000000" points="9951.1986,-1015.8041 9947.9685,-1005.7137 9944.2011,-1015.6161 9951.1986,-1015.8041"/>
</g>
<!-- leaf_102 -->
<g id="node103" class="node">
<title>leaf_102</title>
<polygon fill="none" stroke="#c0c0c0" points="10107.4523,-1005.7019 10053.4523,-1005.7019 10053.4523,-969.7019 10107.4523,-969.7019 10107.4523,-1005.7019"/>
</g>
<!-- block_65&#45;&gt;leaf_102 -->
<g id="edge102" class="edge">
<title>block_65&#45;&gt;leaf_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9899.3484,-2607.6338C9863.6311,-2477.2197 9661.6359,-1670.7427 9978.4523,-1166.6022 9996.231,-1138.3115 10023.9894,-1157.0164 10044.4523,-1130.6022 10070.3815,-1097.1319 10077.8313,-1047.219 10079.8578,-1016.1084"/>
<polygon fill="#000000" stroke="#000000" points="10083.3621,-1016.1096 10080.3699,-1005.9461 10076.371,-1015.7573 10083.3621,-1016.1096"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="4750.9523,-570.4014 4237.9523,-570.4014 4237.9523,-238.4002 4750.9523,-238.4002 4750.9523,-570.4014"/>
<text text-anchor="middle" x="4494.4523" y="-555.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="4494.4523" y="-539.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="4494.4523" y="-524.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="4494.4523" y="-509.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="4494.4523" y="-493.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="4494.4523" y="-478.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="4494.4523" y="-462.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="4494.4523" y="-447.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4494.4523" y="-432.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="4494.4523" y="-416.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="4494.4523" y="-401.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4494.4523" y="-385.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="4494.4523" y="-370.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="4494.4523" y="-355.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="4494.4523" y="-339.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="4494.4523" y="-324.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4494.4523" y="-308.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4494.4523" y="-277.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="4494.4523" y="-262.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="4494.4523" y="-246.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_68&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_68&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4494.4523,-969.6052C4494.4523,-911.344 4494.4523,-724.1157 4494.4523,-580.9557"/>
<polygon fill="#000000" stroke="#000000" points="4497.9524,-580.7267 4494.4523,-570.7267 4490.9524,-580.7267 4497.9524,-580.7267"/>
</g>
<!-- leaf_73 -->
<g id="node74" class="node">
<title>leaf_73</title>
<polygon fill="none" stroke="#c0c0c0" points="5217.9523,-523.9013 4830.9523,-523.9013 4830.9523,-284.9003 5217.9523,-284.9003 5217.9523,-523.9013"/>
<text text-anchor="middle" x="5024.4523" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="5024.4523" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="5024.4523" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="5024.4523" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="5024.4523" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5024.4523" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="5024.4523" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="5024.4523" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5024.4523" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="5024.4523" y="-370.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="5024.4523" y="-354.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="5024.4523" y="-339.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="5024.4523" y="-323.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="5024.4523" y="-308.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5024.4523" y="-293.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_72&#45;&gt;leaf_73 -->
<g id="edge73" class="edge">
<title>codeblock_72&#45;&gt;leaf_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5024.4523,-969.6052C5024.4523,-904.7714 5024.4523,-680.2311 5024.4523,-534.436"/>
<polygon fill="#000000" stroke="#000000" points="5027.9524,-534.0781 5024.4523,-524.0781 5020.9524,-534.0782 5027.9524,-534.0781"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="6009.4523,-808.7025 5503.4523,-808.7025 5503.4523,-.0992 6009.4523,-.0992 6009.4523,-808.7025"/>
<text text-anchor="middle" x="5756.4523" y="-793.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="5756.4523" y="-778.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="5756.4523" y="-762.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="5756.4523" y="-747.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="5756.4523" y="-732.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="5756.4523" y="-716.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="5756.4523" y="-701.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="5756.4523" y="-685.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="5756.4523" y="-670.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="5756.4523" y="-655.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="5756.4523" y="-639.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="5756.4523" y="-624.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-608.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="5756.4523" y="-593.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="5756.4523" y="-578.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="5756.4523" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="5756.4523" y="-547.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="5756.4523" y="-531.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="5756.4523" y="-516.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="5756.4523" y="-501.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="5756.4523" y="-485.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="5756.4523" y="-470.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="5756.4523" y="-454.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="5756.4523" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="5756.4523" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="5756.4523" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="5756.4523" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="5756.4523" y="-347.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="5756.4523" y="-331.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="5756.4523" y="-316.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="5756.4523" y="-300.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="5756.4523" y="-285.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="5756.4523" y="-270.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="5756.4523" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="5756.4523" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="5756.4523" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="5756.4523" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="5756.4523" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="5756.4523" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="5756.4523" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="5756.4523" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="5756.4523" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="5756.4523" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="5756.4523" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="5756.4523" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="5756.4523" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="5756.4523" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="5756.4523" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_76&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>codeblock_76&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5756.4523,-969.6052C5756.4523,-942.1237 5756.4523,-885.9474 5756.4523,-819.2365"/>
<polygon fill="#000000" stroke="#000000" points="5759.9524,-818.8819 5756.4523,-808.882 5752.9524,-818.882 5759.9524,-818.8819"/>
</g>
<!-- leaf_81 -->
<g id="node82" class="node">
<title>leaf_81</title>
<polygon fill="none" stroke="#c0c0c0" points="6741.4523,-431.6013 6291.4523,-431.6013 6291.4523,-377.2003 6741.4523,-377.2003 6741.4523,-431.6013"/>
<text text-anchor="middle" x="6516.4523" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="6516.4523" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="6516.4523" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_80&#45;&gt;leaf_81 -->
<g id="edge81" class="edge">
<title>codeblock_80&#45;&gt;leaf_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6516.4523,-969.6052C6516.4523,-888.1984 6516.4523,-554.9998 6516.4523,-442.0494"/>
<polygon fill="#000000" stroke="#000000" points="6519.9524,-441.8221 6516.4523,-431.8222 6512.9524,-441.8222 6519.9524,-441.8221"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="7519.9523,-454.8018 7048.9523,-454.8018 7048.9523,-353.9998 7519.9523,-353.9998 7519.9523,-454.8018"/>
<text text-anchor="middle" x="7284.4523" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="7284.4523" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="7284.4523" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="7284.4523" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="7284.4523" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="7284.4523" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_84&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>codeblock_84&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7284.4523,-969.6052C7284.4523,-893.124 7284.4523,-594.3989 7284.4523,-464.8663"/>
<polygon fill="#000000" stroke="#000000" points="7287.9524,-464.7226 7284.4523,-454.7226 7280.9524,-464.7226 7287.9524,-464.7226"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="8283.4523,-454.8018 7833.4523,-454.8018 7833.4523,-353.9998 8283.4523,-353.9998 8283.4523,-454.8018"/>
<text text-anchor="middle" x="8058.4523" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="8058.4523" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="8058.4523" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="8058.4523" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="8058.4523" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="8058.4523" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_88&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>codeblock_88&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8058.4523,-969.6052C8058.4523,-893.124 8058.4523,-594.3989 8058.4523,-464.8663"/>
<polygon fill="#000000" stroke="#000000" points="8061.9524,-464.7226 8058.4523,-454.7226 8054.9524,-464.7226 8061.9524,-464.7226"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="9005.9523,-609.0018 8562.9523,-609.0018 8562.9523,-199.7999 9005.9523,-199.7999 9005.9523,-609.0018"/>
<text text-anchor="middle" x="8784.4523" y="-594.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="8784.4523" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="8784.4523" y="-531.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="8784.4523" y="-515.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="8784.4523" y="-500.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-485.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="8784.4523" y="-469.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-454.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="8784.4523" y="-438.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="8784.4523" y="-423.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="8784.4523" y="-408.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-392.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8784.4523" y="-377.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="8784.4523" y="-361.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="8784.4523" y="-346.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-331.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-315.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8784.4523" y="-300.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8784.4523" y="-284.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8784.4523" y="-269.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-254.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8784.4523" y="-238.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8784.4523" y="-223.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8784.4523" y="-207.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_92&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>codeblock_92&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8784.4523,-969.6052C8784.4523,-916.4206 8784.4523,-755.7646 8784.4523,-619.2675"/>
<polygon fill="#000000" stroke="#000000" points="8787.9524,-619.0674 8784.4523,-609.0674 8780.9524,-619.0675 8787.9524,-619.0674"/>
</g>
<!-- leaf_97 -->
<g id="node98" class="node">
<title>leaf_97</title>
<polygon fill="none" stroke="#c0c0c0" points="9619.9523,-431.6013 9400.9523,-431.6013 9400.9523,-377.2003 9619.9523,-377.2003 9619.9523,-431.6013"/>
<text text-anchor="middle" x="9510.4523" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="9510.4523" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="9510.4523" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_96&#45;&gt;leaf_97 -->
<g id="edge97" class="edge">
<title>codeblock_96&#45;&gt;leaf_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9510.4523,-969.6052C9510.4523,-888.1984 9510.4523,-554.9998 9510.4523,-442.0494"/>
<polygon fill="#000000" stroke="#000000" points="9513.9524,-441.8221 9510.4523,-431.8222 9506.9524,-441.8222 9513.9524,-441.8221"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="9994.9523,-422.4008 9901.9523,-422.4008 9901.9523,-386.4008 9994.9523,-386.4008 9994.9523,-422.4008"/>
<text text-anchor="middle" x="9948.4523" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_100&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>codeblock_100&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9948.4523,-969.6052C9948.4523,-885.8364 9948.4523,-535.4525 9948.4523,-432.7855"/>
<polygon fill="#000000" stroke="#000000" points="9951.9524,-432.5744 9948.4523,-422.5744 9944.9524,-432.5744 9951.9524,-432.5744"/>
</g>
</g>
</svg>