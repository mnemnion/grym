<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="9457pt" height="1339pt"
 viewBox="0.00 0.00 9456.80 1338.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1334.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1334.6022 9452.7972,-1334.6022 9452.7972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1312.6022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1308.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 288</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1240.6022" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1236.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;99</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1744.5,-1294.4335C1744.5,-1286.7331 1744.5,-1277.5765 1744.5,-1269.0188"/>
<polygon fill="#000000" stroke="#000000" points="1748.0001,-1269.0154 1744.5,-1259.0154 1741.0001,-1269.0155 1748.0001,-1269.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="845.5" cy="-1168.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="845.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1683.5383,-1239.9394C1512.9003,-1237.5856 1033.0683,-1227.4211 881.5,-1186.6022 879.5264,-1186.0706 877.5338,-1185.4256 875.5524,-1184.6999"/>
<polygon fill="#000000" stroke="#000000" points="876.4473,-1181.2755 865.8772,-1180.5517 873.6889,-1187.7091 876.4473,-1181.2755"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="922.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="922.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1683.7649,-1239.0963C1524.8824,-1234.7274 1099.846,-1220.165 963.5,-1186.6022 961.0562,-1186.0006 958.5747,-1185.2633 956.1043,-1184.4342"/>
<polygon fill="#000000" stroke="#000000" points="957.3244,-1181.1537 946.7332,-1180.8747 954.8387,-1187.6975 957.3244,-1181.1537"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1045.5" cy="-1168.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1045.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;22</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1684.1983,-1237.9067C1573.4149,-1232.3826 1330.2535,-1217.5962 1127.5,-1186.6022 1121.1651,-1185.6338 1114.5874,-1184.467 1108.0371,-1183.1987"/>
<polygon fill="#000000" stroke="#000000" points="1108.2997,-1179.6813 1097.8052,-1181.1358 1106.9162,-1186.5432 1108.2997,-1179.6813"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1168.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1168.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1684.8198,-1236.8581C1564.9652,-1228.9637 1298.9142,-1209.4453 1210.5,-1186.6022 1207.8549,-1185.9188 1205.1614,-1185.0935 1202.4804,-1184.1769"/>
<polygon fill="#000000" stroke="#000000" points="1203.5261,-1180.8301 1192.935,-1180.5479 1201.0385,-1187.3732 1203.5261,-1180.8301"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1296.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1296.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 26&#45;28</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1688.9932,-1233.2742C1617.9828,-1223.6759 1491.2773,-1205.7972 1383.5,-1186.6022 1376.9704,-1185.4392 1370.1798,-1184.1592 1363.4,-1182.8341"/>
<polygon fill="#000000" stroke="#000000" points="1363.9966,-1179.3843 1353.5063,-1180.8688 1362.6328,-1186.2501 1363.9966,-1179.3843"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1424.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1424.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1688.791,-1233.3491C1632.0475,-1225.1353 1541.9248,-1209.7994 1466.5,-1186.6022 1464.0451,-1185.8471 1461.5395,-1184.9952 1459.0351,-1184.083"/>
<polygon fill="#000000" stroke="#000000" points="1460.0802,-1180.7334 1449.4926,-1180.3429 1457.5258,-1187.2507 1460.0802,-1180.7334"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1552.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1552.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;34</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1706.567,-1226.3773C1676.9538,-1215.2723 1635.5326,-1199.7394 1603.0962,-1187.5757"/>
<polygon fill="#000000" stroke="#000000" points="1603.9335,-1184.1518 1593.3412,-1183.9176 1601.4756,-1190.7061 1603.9335,-1184.1518"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1680.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1680.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1729.0074,-1223.173C1720.834,-1213.9779 1710.6821,-1202.557 1701.7811,-1192.5434"/>
<polygon fill="#000000" stroke="#000000" points="1704.2322,-1190.0327 1694.9726,-1184.8838 1699.0003,-1194.6832 1704.2322,-1190.0327"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1808.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1808.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;42</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1759.9926,-1223.173C1767.7383,-1214.4591 1777.2608,-1203.7463 1785.8116,-1194.1266"/>
<polygon fill="#000000" stroke="#000000" points="1788.6777,-1196.1704 1792.7054,-1186.371 1783.4458,-1191.5199 1788.6777,-1196.1704"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="2080.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2080.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1794.078,-1229.9783C1860.8602,-1215.6678 1978.4384,-1190.4725 2040.1276,-1177.2534"/>
<polygon fill="#000000" stroke="#000000" points="2041.2075,-1180.6015 2050.2522,-1175.0838 2039.7408,-1173.7569 2041.2075,-1180.6015"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="2428.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2428.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 47&#45;65</text>
</g>
<!-- section_1&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1801.9342,-1234.5565C1923.5821,-1221.7514 2207.5024,-1191.8651 2347.5053,-1177.1279"/>
<polygon fill="#000000" stroke="#000000" points="2348.1622,-1180.5782 2357.7409,-1176.0505 2347.4294,-1173.6166 2348.1622,-1180.5782"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="2789.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2789.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1803.6779,-1236.5248C1993.3749,-1223.4548 2583.426,-1182.8006 2747.049,-1171.527"/>
<polygon fill="#000000" stroke="#000000" points="2747.4653,-1175.0067 2757.2011,-1170.8275 2746.9841,-1168.0233 2747.4653,-1175.0067"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="3181.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3181.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 69&#45;80</text>
</g>
<!-- section_1&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1804.5439,-1237.6494C1968.7815,-1229.5655 2439.2913,-1206.3593 2830.5,-1186.6022 2920.9648,-1182.0334 3024.5397,-1176.7106 3095.6003,-1173.0446"/>
<polygon fill="#000000" stroke="#000000" points="3096.037,-1176.5268 3105.8433,-1172.516 3095.6762,-1169.5361 3096.037,-1176.5268"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="3550.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3550.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.1049,-1239.0648C2010.4879,-1233.7243 2699.0278,-1214.7532 3267.5,-1186.6022 3352.9586,-1182.3702 3452.818,-1175.5881 3508.1363,-1171.6689"/>
<polygon fill="#000000" stroke="#000000" points="3508.5349,-1175.1495 3518.2611,-1170.9483 3508.0378,-1168.1672 3508.5349,-1175.1495"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="3912.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3912.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 84&#45;98</text>
</g>
<!-- section_1&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.5053,-1239.4121C2037.8943,-1234.753 2889.9938,-1216.52 3591.5,-1186.6022 3671.5629,-1183.1876 3762.7842,-1177.9417 3827.4672,-1173.9924"/>
<polygon fill="#000000" stroke="#000000" points="3827.8477,-1177.4757 3837.6148,-1173.3702 3827.4193,-1170.4888 3827.8477,-1177.4757"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-1168.6022" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 100&#45;288</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.1476,-1239.4857C2252.8945,-1231.2428 5043.0516,-1179.8771 5569.7764,-1170.1803"/>
<polygon fill="#000000" stroke="#000000" points="5570.0276,-1173.6764 5579.9614,-1169.9928 5569.8986,-1166.6775 5570.0276,-1173.6764"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="135,-997.7019 0,-997.7019 0,-961.7019 135,-961.7019 135,-997.7019"/>
<text text-anchor="middle" x="67.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- prose_3&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_3&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M898.7245,-1156.4275C893.2007,-1154.0925 887.2509,-1151.9561 881.5,-1150.6022 801.5872,-1131.7886 213.3507,-1157.7401 143.5,-1114.6022 104.9075,-1090.7685 84.1715,-1039.7455 74.5191,-1007.7308"/>
<polygon fill="#000000" stroke="#000000" points="77.8711,-1006.722 71.7661,-998.0629 71.1387,-1008.6391 77.8711,-1006.722"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="512,-1114.5025 153,-1114.5025 153,-844.9013 512,-844.9013 512,-1114.5025"/>
<text text-anchor="middle" x="332.5" y="-1099.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="332.5" y="-1084.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="332.5" y="-1068.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="332.5" y="-1053.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="332.5" y="-1037.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="332.5" y="-1022.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="332.5" y="-1007.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="332.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="332.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="332.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="332.5" y="-945.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="332.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setfenv </text>
<text text-anchor="middle" x="332.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="332.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setfenv = setfenv</text>
<text text-anchor="middle" x="332.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( setfenv )</text>
<text text-anchor="middle" x="332.5" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="332.5" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_4&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M993.2022,-1156.0195C983.3769,-1153.9697 973.1577,-1152.0478 963.5,-1150.6022 771.3819,-1121.8443 708.0448,-1180.6513 521.58,-1114.7713"/>
<polygon fill="#000000" stroke="#000000" points="522.6243,-1111.4273 512.03,-1111.3272 520.2495,-1118.0122 522.6243,-1111.4273"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="637,-997.7019 530,-997.7019 530,-961.7019 637,-961.7019 637,-997.7019"/>
<text text-anchor="middle" x="583.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- prose_5&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_5&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1144.261,-1156.353C1138.8628,-1154.0832 1133.0821,-1151.9926 1127.5,-1150.6022 1023.2752,-1124.641 733.7056,-1175.8929 645.5,-1114.6022 609.9379,-1089.8914 594.3496,-1039.5129 587.835,-1007.8002"/>
<polygon fill="#000000" stroke="#000000" points="591.2469,-1007.0052 585.9578,-997.8251 584.3676,-1008.2999 591.2469,-1007.0052"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="776,-997.7019 655,-997.7019 655,-961.7019 776,-961.7019 776,-997.7019"/>
<text text-anchor="middle" x="715.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_6&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1240.5141,-1155.9929C1230.2364,-1153.9709 1219.5741,-1152.0656 1209.5,-1150.6022 1115.7019,-1136.9761 863.1927,-1167.4341 784.5,-1114.6022 747.8065,-1089.9672 729.5568,-1039.565 721.3464,-1007.8271"/>
<polygon fill="#000000" stroke="#000000" points="724.6851,-1006.742 718.9348,-997.8434 717.8808,-1008.3857 724.6851,-1006.742"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="915,-997.7019 794,-997.7019 794,-961.7019 915,-961.7019 915,-997.7019"/>
<text text-anchor="middle" x="854.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- prose_7&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_7&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.0894,-1156.5595C1394.4338,-1154.2177 1388.3539,-1152.0451 1382.5,-1150.6022 1283.375,-1126.1695 1009.5986,-1171.0019 924.5,-1114.6022 887.5489,-1090.1125 868.9491,-1039.6649 860.5284,-1007.8786"/>
<polygon fill="#000000" stroke="#000000" points="863.8531,-1006.7436 858.0511,-997.8787 857.0585,-1008.4269 863.8531,-1006.7436"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1159.5,-997.7019 933.5,-997.7019 933.5,-961.7019 1159.5,-961.7019 1159.5,-997.7019"/>
<text text-anchor="middle" x="1046.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_8&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0005,-1156.1999C1485.8722,-1154.1803 1475.3938,-1152.2224 1465.5,-1150.6022 1334.2817,-1129.1136 1286.5569,-1175.7787 1168.5,-1114.6022 1120.782,-1089.875 1082.5882,-1038.3994 1062.3463,-1006.672"/>
<polygon fill="#000000" stroke="#000000" points="1065.1409,-1004.5382 1056.8849,-997.8983 1059.1982,-1008.2375 1065.1409,-1004.5382"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1635,-997.7019 1178,-997.7019 1178,-961.7019 1635,-961.7019 1635,-997.7019"/>
<text text-anchor="middle" x="1406.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- prose_9&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_9&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1659.9055,-1154.4039C1613.2639,-1122.2484 1499.1369,-1043.5674 1441.306,-1003.6978"/>
<polygon fill="#000000" stroke="#000000" points="1443.0813,-1000.6705 1432.8616,-997.876 1439.1081,-1006.4337 1443.0813,-1000.6705"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1963.5,-1006.9024 1653.5,-1006.9024 1653.5,-952.5014 1963.5,-952.5014 1963.5,-1006.9024"/>
<text text-anchor="middle" x="1808.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1808.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1808.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_10&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1808.5,-1150.4896C1808.5,-1119.888 1808.5,-1057.3533 1808.5,-1017.0418"/>
<polygon fill="#000000" stroke="#000000" points="1812.0001,-1016.8059 1808.5,-1006.8059 1805.0001,-1016.806 1812.0001,-1016.8059"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2467,-999.0025 1982,-999.0025 1982,-960.4013 2467,-960.4013 2467,-999.0025"/>
<text text-anchor="middle" x="2224.5" y="-983.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="2224.5" y="-968.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- prose_11&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>prose_11&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.279,-1151.8385C2118.1482,-1119.2149 2173.2621,-1046.9162 2203.5514,-1007.1825"/>
<polygon fill="#000000" stroke="#000000" points="2206.3392,-1009.2987 2209.6182,-999.224 2200.7722,-1005.0549 2206.3392,-1009.2987"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2809.5,-1114.5025 2485.5,-1114.5025 2485.5,-844.9013 2809.5,-844.9013 2809.5,-1114.5025"/>
<text text-anchor="middle" x="2647.5" y="-1099.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="2647.5" y="-1084.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="2647.5" y="-1068.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="2647.5" y="-1053.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-1037.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="2647.5" y="-1022.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="2647.5" y="-1007.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="2647.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="2647.5" y="-945.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="2647.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2647.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="2647.5" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_12&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2448.7104,-1151.1695C2458.0022,-1143.1548 2469.9482,-1132.8507 2483.3656,-1121.2774"/>
<polygon fill="#000000" stroke="#000000" points="2485.6773,-1123.9056 2490.9635,-1114.7237 2481.1052,-1118.605 2485.6773,-1123.9056"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3215,-997.7019 2828,-997.7019 2828,-961.7019 3215,-961.7019 3215,-997.7019"/>
<text text-anchor="middle" x="3021.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- prose_13&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_13&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2808.0934,-1153.463C2848.0397,-1120.9377 2942.3738,-1044.1285 2991.1364,-1004.4247"/>
<polygon fill="#000000" stroke="#000000" points="2993.5777,-1006.9504 2999.1224,-997.9223 2989.1579,-1001.5222 2993.5777,-1006.9504"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3655.5,-1060.7022 3233.5,-1060.7022 3233.5,-898.7016 3655.5,-898.7016 3655.5,-1060.7022"/>
<text text-anchor="middle" x="3444.5" y="-1045.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1030.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1014.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="3444.5" y="-999.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="3444.5" y="-983.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="3444.5" y="-968.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="3444.5" y="-953.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3444.5" y="-937.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="3444.5" y="-922.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="3444.5" y="-906.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_14&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3205.771,-1151.1695C3232.886,-1131.6941 3278.8215,-1098.7008 3323.1987,-1066.8268"/>
<polygon fill="#000000" stroke="#000000" points="3325.3816,-1069.5682 3331.4619,-1060.8917 3321.298,-1063.8827 3325.3816,-1069.5682"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3907,-997.7019 3674,-997.7019 3674,-961.7019 3907,-961.7019 3907,-997.7019"/>
<text text-anchor="middle" x="3790.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- prose_15&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_15&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3577.8737,-1159.0107C3602.0085,-1149.7957 3637.4442,-1134.3678 3664.5,-1114.6022 3707.6009,-1083.1148 3747.9537,-1035.496 3770.8895,-1006.0653"/>
<polygon fill="#000000" stroke="#000000" points="3773.8362,-1007.975 3777.1585,-997.9145 3768.2875,-1003.7074 3773.8362,-1007.975"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="4368,-1083.9024 3925,-1083.9024 3925,-875.5014 4368,-875.5014 4368,-1083.9024"/>
<text text-anchor="middle" x="4146.5" y="-1068.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="4146.5" y="-1053.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="4146.5" y="-1037.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="4146.5" y="-1022.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-1007.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="4146.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="4146.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="4146.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="4146.5" y="-945.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="4146.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="4146.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4146.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_16&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3934.0947,-1151.1695C3952.2704,-1136.4969 3979.9506,-1114.1515 4009.3819,-1090.3927"/>
<polygon fill="#000000" stroke="#000000" points="4011.7258,-1092.9987 4017.3084,-1083.9939 4007.3289,-1087.5519 4011.7258,-1092.9987"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="4471.5" cy="-979.7019" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="4471.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_17&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.3446,-1166.68C5341.184,-1160.3271 4610.829,-1139.0149 4566.5,-1114.6022 4523.7504,-1091.0592 4495.8249,-1039.1023 4481.9266,-1006.9798"/>
<polygon fill="#000000" stroke="#000000" points="4485.1381,-1005.5871 4478.0629,-997.7009 4478.676,-1008.278 4485.1381,-1005.5871"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="4607.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4607.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.1218,-1166.9105C5352.4314,-1161.4932 4685.0408,-1143.2353 4648.5,-1114.6022 4616.4425,-1089.4821 4608.7365,-1040.0312 4607.2698,-1008.4872"/>
<polygon fill="#000000" stroke="#000000" points="4610.759,-1008.0444 4606.9816,-998.1458 4603.7617,-1008.2395 4610.759,-1008.0444"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="4689.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4689.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.3218,-1166.5262C5365.9275,-1160.3009 4764.7474,-1140.6018 4731.5,-1114.6022 4699.3508,-1089.4614 4691.2499,-1040.0166 4689.518,-1008.4796"/>
<polygon fill="#000000" stroke="#000000" points="4693.0032,-1008.0068 4689.142,-998.1406 4686.0078,-1008.2612 4693.0032,-1008.0068"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="4827.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4827.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 107&#45;129</text>
</g>
<!-- section_17&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.4304,-1166.6375C5405.3837,-1161.5487 4980.707,-1146.084 4924.5,-1114.6022 4881.8493,-1090.7133 4853.159,-1039.3357 4838.6366,-1007.3325"/>
<polygon fill="#000000" stroke="#000000" points="4841.8005,-1005.8321 4834.5847,-998.0744 4835.3878,-1008.6387 4841.8005,-1005.8321"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="4965.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4965.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.2499,-1166.9973C5419.0331,-1162.8981 5051.3371,-1149.7664 5007.5,-1114.6022 4975.6646,-1089.0652 4967.4696,-1039.7393 4965.6334,-1008.334"/>
<polygon fill="#000000" stroke="#000000" points="4969.1186,-1007.893 4965.2207,-998.0413 4962.1242,-1008.1735 4969.1186,-1007.893"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="5103.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5103.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 133&#45;149</text>
</g>
<!-- section_17&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_17&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5579.9801,-1166.9216C5467.6411,-1163.216 5263.0269,-1151.4703 5200.5,-1114.6022 5158.39,-1089.7726 5129.5245,-1038.6998 5114.8219,-1007.0101"/>
<polygon fill="#000000" stroke="#000000" points="5117.9992,-1005.5415 5110.7147,-997.8482 5111.6117,-1008.405 5117.9992,-1005.5415"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="5241.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5241.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_17&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.6253,-1162.3893C5483.1091,-1152.8824 5305.9917,-1133.8003 5283.5,-1114.6022 5252.4584,-1088.106 5244.0253,-1039.0677 5241.9252,-1007.9813"/>
<polygon fill="#000000" stroke="#000000" points="5245.4114,-1007.6149 5241.4197,-997.8008 5238.42,-1007.962 5245.4114,-1007.6149"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="5379.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5379.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 154&#45;207</text>
</g>
<!-- section_17&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_17&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5590.0784,-1159.4481C5554.0133,-1151.932 5509.9144,-1138.4669 5476.5,-1114.6022 5437.3141,-1086.6153 5407.9874,-1037.7666 5392.3243,-1007.1637"/>
<polygon fill="#000000" stroke="#000000" points="5395.3124,-1005.312 5387.7238,-997.9185 5389.0454,-1008.4306 5395.3124,-1005.312"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="5517.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5517.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_17&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5613.7721,-1153.5153C5594.8316,-1144.7716 5573.5702,-1131.9973 5559.5,-1114.6022 5534.3581,-1083.5189 5524.2058,-1037.3349 5520.1474,-1007.8772"/>
<polygon fill="#000000" stroke="#000000" points="5523.6075,-1007.3374 5518.9115,-997.8401 5516.66,-1008.193 5523.6075,-1007.3374"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 212&#45;216</text>
</g>
<!-- section_17&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_17&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5655.5,-1150.4896C5655.5,-1117.4859 5655.5,-1047.3394 5655.5,-1007.9862"/>
<polygon fill="#000000" stroke="#000000" points="5659.0001,-1007.7596 5655.5,-997.7596 5652.0001,-1007.7596 5659.0001,-1007.7596"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="5793.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5793.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_17&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5697.2279,-1153.5153C5716.1684,-1144.7716 5737.4298,-1131.9973 5751.5,-1114.6022 5776.6419,-1083.5189 5786.7942,-1037.3349 5790.8526,-1007.8772"/>
<polygon fill="#000000" stroke="#000000" points="5794.34,-1008.193 5792.0885,-997.8401 5787.3925,-1007.3374 5794.34,-1008.193"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="6110.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6110.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 220&#45;227</text>
</g>
<!-- section_17&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_17&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5707.1707,-1155.3983C5743.3345,-1145.5821 5792.4968,-1131.078 5834.5,-1114.6022 5921.1515,-1080.613 6017.9286,-1030.2717 6070.7545,-1001.6699"/>
<polygon fill="#000000" stroke="#000000" points="6072.669,-1004.6129 6079.7827,-996.7614 6069.3254,-998.4631 6072.669,-1004.6129"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="6519.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6519.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_17&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5728.8551,-1164.2306C5857.3938,-1156.1016 6118.079,-1137.3977 6206.5,-1114.6022 6314.0181,-1086.8832 6432.0828,-1027.3217 6487.467,-997.4906"/>
<polygon fill="#000000" stroke="#000000" points="6489.3156,-1000.4695 6496.4356,-992.6237 6485.9769,-994.317 6489.3156,-1000.4695"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="6968.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6968.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 232&#45;239</text>
</g>
<!-- section_17&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_17&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5730.7624,-1166.6247C5918.22,-1161.2957 6402.2477,-1144.9487 6560.5,-1114.6022 6694.7826,-1088.8521 6845.9059,-1030.8323 6920.9349,-999.9442"/>
<polygon fill="#000000" stroke="#000000" points="6922.6723,-1003.013 6930.5723,-995.9532 6919.994,-996.5456 6922.6723,-1003.013"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="7425.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7425.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5730.7732,-1167.1203C6003.9175,-1161.5504 6933.6909,-1140.841 7064.5,-1114.6022 7189.9712,-1089.434 7329.4698,-1026.5705 7391.9948,-996.3882"/>
<polygon fill="#000000" stroke="#000000" points="7393.8931,-999.3571 7401.3548,-991.8356 7390.8312,-993.0622 7393.8931,-999.3571"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="7884.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7884.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 243&#45;270</text>
</g>
<!-- section_17&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.0203,-1167.607C6051.9417,-1163.2072 7293.9867,-1144.3915 7466.5,-1114.6022 7605.0371,-1090.6798 7760.8288,-1031.2477 7837.1699,-999.8597"/>
<polygon fill="#000000" stroke="#000000" points="7838.6189,-1003.048 7846.5216,-995.9912 7835.9431,-996.5796 7838.6189,-1003.048"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="8344.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8344.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.1271,-1168.3318C6105.9859,-1166.792 7755.7621,-1157.6063 7980.5,-1114.6022 8107.3676,-1090.3257 8248.2976,-1026.7859 8311.1222,-996.3811"/>
<polygon fill="#000000" stroke="#000000" points="8312.7132,-999.4993 8320.1675,-991.9704 8309.6452,-993.2075 8312.7132,-999.4993"/>
</g>
<!-- codeblock_49 -->
<g id="node50" class="node">
<title>codeblock_49</title>
<ellipse fill="none" stroke="#000000" cx="8748.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8748.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 275&#45;279</text>
</g>
<!-- section_17&#45;&gt;codeblock_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;codeblock_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.1578,-1167.8207C6158.0919,-1163.3207 8251.7156,-1140.0256 8385.5,-1114.6022 8506.0565,-1091.6925 8639.2325,-1032.8755 8705.7488,-1000.9997"/>
<polygon fill="#000000" stroke="#000000" points="8707.5859,-1003.9994 8715.0696,-996.4997 8704.5425,-997.6956 8707.5859,-1003.9994"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="9053.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9053.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.0341,-1168.4973C6199.2886,-1167.7002 8690.9417,-1161.2722 8844.5,-1114.6022 8919.0252,-1091.9522 8992.2795,-1034.2581 9029.0623,-1002.1417"/>
<polygon fill="#000000" stroke="#000000" points="9031.6001,-1004.5695 9036.7669,-995.3199 9026.9597,-999.3286 9031.6001,-1004.5695"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="9361.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9361.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 285&#45;287</text>
</g>
<!-- section_17&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.2718,-1168.3761C6221.1583,-1166.794 8925.8273,-1156.1953 9094.5,-1114.6022 9184.9298,-1092.303 9279.6919,-1035.0438 9328.3376,-1002.7497"/>
<polygon fill="#000000" stroke="#000000" points="9330.5179,-1005.5017 9336.8727,-997.0242 9326.6183,-999.6885 9330.5179,-1005.5017"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2082,-424.3029 1667,-424.3029 1667,-384.4987 2082,-384.4987 2082,-424.3029"/>
<text text-anchor="middle" x="1874.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- prose_33&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_33&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4607.9991,-961.5685C4607.7175,-931.5836 4602.2434,-872.2591 4565.5,-844.8016 4455.3445,-762.485 2207.9221,-880.3718 2090.5,-808.8016 1950.2885,-723.341 1895.7869,-513.0031 1879.909,-434.5491"/>
<polygon fill="#000000" stroke="#000000" points="1883.2747,-433.523 1877.9199,-424.381 1876.4048,-434.8669 1883.2747,-433.523"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2375,-424.3029 2100,-424.3029 2100,-384.4987 2375,-384.4987 2375,-424.3029"/>
<text text-anchor="middle" x="2237.5" y="-408.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- prose_34&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>prose_34&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4690.1369,-961.5885C4690.0826,-931.633 4685.0554,-872.3506 4648.5,-844.8016 4547.9957,-769.0592 2485.9178,-881.9359 2383.5,-808.8016 2258.4726,-719.5223 2240.1122,-512.4016 2237.7183,-434.6331"/>
<polygon fill="#000000" stroke="#000000" points="2241.2152,-434.4573 2237.477,-424.5438 2234.2172,-434.6247 2241.2152,-434.4573"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2906,-570.4014 2393,-570.4014 2393,-238.4002 2906,-238.4002 2906,-570.4014"/>
<text text-anchor="middle" x="2649.5" y="-555.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="2649.5" y="-539.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="2649.5" y="-524.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="2649.5" y="-509.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="2649.5" y="-493.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="2649.5" y="-478.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="2649.5" y="-462.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="2649.5" y="-447.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2649.5" y="-432.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="2649.5" y="-416.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="2649.5" y="-401.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2649.5" y="-385.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="2649.5" y="-370.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="2649.5" y="-355.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="2649.5" y="-339.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="2649.5" y="-324.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2649.5" y="-308.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2649.5" y="-277.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="2649.5" y="-262.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="2649.5" y="-246.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_35&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4820.7665,-961.5416C4808.3189,-930.9503 4778.5117,-870.0178 4730.5,-844.8016 4551.8266,-750.9609 3091.0995,-906.4894 2914.5,-808.8016 2824.6716,-759.1121 2760.1913,-664.6063 2717.3409,-579.4438"/>
<polygon fill="#000000" stroke="#000000" points="2720.4532,-577.8416 2712.8727,-570.4398 2714.1828,-580.9533 2720.4532,-577.8416"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3171,-422.4008 2924,-422.4008 2924,-386.4008 3171,-386.4008 3171,-422.4008"/>
<text text-anchor="middle" x="3047.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- prose_36&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prose_36&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4965.9809,-961.5929C4965.6723,-931.6439 4960.1596,-872.371 4923.5,-844.8016 4846.0482,-786.555 3257.3483,-866.5172 3179.5,-808.8016 3056.5112,-717.6195 3046.1521,-508.9272 3046.6612,-432.8331"/>
<polygon fill="#000000" stroke="#000000" points="3050.164,-432.6456 3046.803,-422.598 3043.1647,-432.5485 3050.164,-432.6456"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3576,-523.9013 3189,-523.9013 3189,-284.9003 3576,-284.9003 3576,-523.9013"/>
<text text-anchor="middle" x="3382.5" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="3382.5" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="3382.5" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="3382.5" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="3382.5" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="3382.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="3382.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="3382.5" y="-370.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="3382.5" y="-354.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="3382.5" y="-339.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="3382.5" y="-323.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="3382.5" y="-308.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-293.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>codeblock_37&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5096.7518,-961.5695C5084.282,-931.0205 5054.4421,-870.1499 5006.5,-844.8016 4866.8754,-770.9784 3718.856,-893.4248 3585.5,-808.8016 3489.8862,-748.1284 3437.5858,-627.5637 3410.1362,-533.7921"/>
<polygon fill="#000000" stroke="#000000" points="3413.4329,-532.5906 3407.3145,-523.941 3406.7035,-534.5182 3413.4329,-532.5906"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4044.5,-423.7014 3594.5,-423.7014 3594.5,-385.1002 4044.5,-385.1002 4044.5,-423.7014"/>
<text text-anchor="middle" x="3819.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="3819.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- prose_38&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_38&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5241.9484,-961.6358C5241.5921,-931.7501 5236.0107,-872.5679 5199.5,-844.8016 5098.0963,-767.6844 4162.846,-874.1715 4053.5,-808.8016 3909.5393,-722.7382 3845.4748,-511.8729 3826.1601,-433.9615"/>
<polygon fill="#000000" stroke="#000000" points="3829.4751,-432.7778 3823.7281,-423.8771 3822.6702,-434.419 3829.4751,-432.7778"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="4568.5,-808.7025 4062.5,-808.7025 4062.5,-.0992 4568.5,-.0992 4568.5,-808.7025"/>
<text text-anchor="middle" x="4315.5" y="-793.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="4315.5" y="-778.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="4315.5" y="-762.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="4315.5" y="-747.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="4315.5" y="-732.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="4315.5" y="-716.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="4315.5" y="-701.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="4315.5" y="-685.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="4315.5" y="-670.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="4315.5" y="-655.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="4315.5" y="-639.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="4315.5" y="-624.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-608.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="4315.5" y="-593.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="4315.5" y="-578.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="4315.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="4315.5" y="-547.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="4315.5" y="-531.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="4315.5" y="-516.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="4315.5" y="-501.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="4315.5" y="-485.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="4315.5" y="-470.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="4315.5" y="-454.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="4315.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4315.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="4315.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="4315.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="4315.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="4315.5" y="-347.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="4315.5" y="-331.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="4315.5" y="-316.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="4315.5" y="-300.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4315.5" y="-285.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="4315.5" y="-270.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="4315.5" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4315.5" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="4315.5" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4315.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="4315.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="4315.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="4315.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="4315.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="4315.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="4315.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="4315.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4315.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="4315.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="4315.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="4315.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_39&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5372.682,-961.6994C5360.1069,-931.3465 5330.1125,-870.7636 5282.5,-844.8016 5144.7735,-769.7026 4713.3643,-887.2194 4577.5,-808.8016 4577.4066,-808.7477 4577.3132,-808.6938 4577.2199,-808.6398"/>
<polygon fill="#000000" stroke="#000000" points="4578.9946,-805.623 4568.6187,-803.4804 4575.3938,-811.6259 4578.9946,-805.623"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="5064.5,-423.7014 4586.5,-423.7014 4586.5,-385.1002 5064.5,-385.1002 5064.5,-423.7014"/>
<text text-anchor="middle" x="4825.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="4825.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- prose_40&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>prose_40&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5517.7595,-961.3871C5517.0859,-931.6866 5511.0006,-873.4592 5475.5,-844.8016 5405.7104,-788.4646 5149.7282,-856.0637 5073.5,-808.8016 4929.0985,-719.2716 4856.3795,-511.4229 4833.5855,-434.0889"/>
<polygon fill="#000000" stroke="#000000" points="4836.8303,-432.7088 4830.6982,-424.0689 4830.104,-434.647 4836.8303,-432.7088"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5532.5,-431.6013 5082.5,-431.6013 5082.5,-377.2003 5532.5,-377.2003 5532.5,-431.6013"/>
<text text-anchor="middle" x="5307.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="5307.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="5307.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_41&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5642.796,-961.4912C5621.3168,-930.5206 5576.7245,-865.4355 5541.5,-808.8016 5458.4755,-675.315 5367.0516,-512.1765 5327.5259,-440.7803"/>
<polygon fill="#000000" stroke="#000000" points="5330.4233,-438.7871 5322.5214,-431.7295 5324.2974,-442.1744 5330.4233,-438.7871"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="6036,-422.4008 5551,-422.4008 5551,-386.4008 6036,-386.4008 6036,-422.4008"/>
<text text-anchor="middle" x="5793.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- prose_42&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_42&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5793.5,-961.5341C5793.5,-878.4233 5793.5,-534.1566 5793.5,-432.6748"/>
<polygon fill="#000000" stroke="#000000" points="5797.0001,-432.573 5793.5,-422.573 5790.0001,-432.573 5797.0001,-432.573"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6525,-454.8018 6054,-454.8018 6054,-353.9998 6525,-353.9998 6525,-454.8018"/>
<text text-anchor="middle" x="6289.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="6289.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="6289.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="6289.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="6289.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="6289.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_43&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6116.1528,-961.5341C6139.7543,-885.6794 6231.0431,-592.2798 6270.8095,-464.4716"/>
<polygon fill="#000000" stroke="#000000" points="6274.1815,-465.4148 6273.8105,-454.8265 6267.4975,-463.3351 6274.1815,-465.4148"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="7035.5,-423.7014 6543.5,-423.7014 6543.5,-385.1002 7035.5,-385.1002 7035.5,-423.7014"/>
<text text-anchor="middle" x="6789.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="6789.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- prose_44&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_44&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6527.728,-962.1701C6566.1699,-880.2603 6728.2246,-534.963 6776.1173,-432.916"/>
<polygon fill="#000000" stroke="#000000" points="6779.3075,-434.3565 6780.3877,-423.8169 6772.9706,-431.3825 6779.3075,-434.3565"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="7503.5,-454.8018 7053.5,-454.8018 7053.5,-353.9998 7503.5,-353.9998 7503.5,-454.8018"/>
<text text-anchor="middle" x="7278.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="7278.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="7278.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="7278.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="7278.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="7278.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_45&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6978.2897,-961.5341C7019.2457,-885.5274 7177.8958,-591.103 7246.5439,-463.7052"/>
<polygon fill="#000000" stroke="#000000" points="7249.6657,-465.2901 7251.3282,-454.8265 7243.5034,-461.9695 7249.6657,-465.2901"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="7965,-422.4008 7522,-422.4008 7522,-386.4008 7965,-386.4008 7965,-422.4008"/>
<text text-anchor="middle" x="7743.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- prose_46&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>prose_46&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7435.0171,-962.4843C7480.168,-880.8007 7672.8914,-532.1404 7728.4527,-431.6233"/>
<polygon fill="#000000" stroke="#000000" points="7731.6173,-433.1329 7733.3918,-422.6878 7725.4909,-429.7465 7731.6173,-433.1329"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="8426,-609.0018 7983,-609.0018 7983,-199.7999 8426,-199.7999 8426,-609.0018"/>
<text text-anchor="middle" x="8204.5" y="-594.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="8204.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="8204.5" y="-531.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="8204.5" y="-515.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-500.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-485.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="8204.5" y="-469.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-454.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="8204.5" y="-438.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-423.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="8204.5" y="-408.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-392.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-377.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="8204.5" y="-361.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-346.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="8204.5" y="-331.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-315.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-300.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-284.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-269.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-254.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8204.5" y="-238.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-223.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8204.5" y="-207.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_47&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7894.6055,-961.5341C7923.8429,-908.9706 8011.1846,-751.9463 8085.7194,-617.9464"/>
<polygon fill="#000000" stroke="#000000" points="8088.8073,-619.5951 8090.6096,-609.1547 8082.69,-616.1925 8088.8073,-619.5951"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="8887,-423.7014 8444,-423.7014 8444,-385.1002 8887,-385.1002 8887,-423.7014"/>
<text text-anchor="middle" x="8665.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="8665.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- prose_48&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_48&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8354.1069,-962.4843C8399.5274,-881.0809 8592.8921,-534.5298 8649.7285,-432.6667"/>
<polygon fill="#000000" stroke="#000000" points="8652.8276,-434.2956 8654.6438,-423.8575 8646.7148,-430.8848 8652.8276,-434.2956"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="9124,-431.6013 8905,-431.6013 8905,-377.2003 9124,-377.2003 9124,-431.6013"/>
<text text-anchor="middle" x="9014.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="9014.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="9014.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_49&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_49&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8768.4201,-961.9977C8799.8704,-932.9991 8860.9922,-872.2282 8895.5,-808.8016 8963.4225,-683.9577 8996.774,-515.8082 9008.9183,-441.8982"/>
<polygon fill="#000000" stroke="#000000" points="9012.4271,-442.1223 9010.5578,-431.6937 9005.5157,-441.0118 9012.4271,-442.1223"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="9298.5,-422.4008 9142.5,-422.4008 9142.5,-386.4008 9298.5,-386.4008 9298.5,-422.4008"/>
<text text-anchor="middle" x="9220.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- prose_50&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>prose_50&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9063.1242,-962.2655C9079.5129,-931.9205 9112.9577,-867.0627 9132.5,-808.8016 9178.6033,-671.3546 9206.6981,-499.3578 9216.5325,-432.6527"/>
<polygon fill="#000000" stroke="#000000" points="9220.0311,-432.9147 9218.0051,-422.5154 9213.1038,-431.9083 9220.0311,-432.9147"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="9410,-422.4008 9317,-422.4008 9317,-386.4008 9410,-386.4008 9410,-422.4008"/>
<text text-anchor="middle" x="9363.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_51&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9361.5632,-961.5341C9361.8521,-878.4233 9363.0489,-534.1566 9363.4017,-432.6748"/>
<polygon fill="#000000" stroke="#000000" points="9366.9019,-432.5851 9363.4368,-422.573 9359.902,-432.5607 9366.9019,-432.5851"/>
</g>
</g>
</svg>