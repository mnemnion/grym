<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="9455pt" height="1339pt"
 viewBox="0.00 0.00 9454.80 1338.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1334.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1334.6022 9450.7972,-1334.6022 9450.7972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1312.6022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1308.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 287</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1240.6022" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1236.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;98</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1744.5,-1294.4335C1744.5,-1286.7331 1744.5,-1277.5765 1744.5,-1269.0188"/>
<polygon fill="#000000" stroke="#000000" points="1748.0001,-1269.0154 1744.5,-1259.0154 1741.0001,-1269.0155 1748.0001,-1269.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="845.5" cy="-1168.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="845.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1683.5383,-1239.9394C1512.9003,-1237.5856 1033.0683,-1227.4211 881.5,-1186.6022 879.5264,-1186.0706 877.5338,-1185.4256 875.5524,-1184.6999"/>
<polygon fill="#000000" stroke="#000000" points="876.4473,-1181.2755 865.8772,-1180.5517 873.6889,-1187.7091 876.4473,-1181.2755"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="922.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="922.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1683.7649,-1239.0963C1524.8824,-1234.7274 1099.846,-1220.165 963.5,-1186.6022 961.0562,-1186.0006 958.5747,-1185.2633 956.1043,-1184.4342"/>
<polygon fill="#000000" stroke="#000000" points="957.3244,-1181.1537 946.7332,-1180.8747 954.8387,-1187.6975 957.3244,-1181.1537"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1045.5" cy="-1168.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1045.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;21</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1684.1983,-1237.9067C1573.4149,-1232.3826 1330.2535,-1217.5962 1127.5,-1186.6022 1121.1651,-1185.6338 1114.5874,-1184.467 1108.0371,-1183.1987"/>
<polygon fill="#000000" stroke="#000000" points="1108.2997,-1179.6813 1097.8052,-1181.1358 1106.9162,-1186.5432 1108.2997,-1179.6813"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1168.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1168.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1684.8198,-1236.8581C1564.9652,-1228.9637 1298.9142,-1209.4453 1210.5,-1186.6022 1207.8549,-1185.9188 1205.1614,-1185.0935 1202.4804,-1184.1769"/>
<polygon fill="#000000" stroke="#000000" points="1203.5261,-1180.8301 1192.935,-1180.5479 1201.0385,-1187.3732 1203.5261,-1180.8301"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1296.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1296.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 25&#45;27</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1688.9932,-1233.2742C1617.9828,-1223.6759 1491.2773,-1205.7972 1383.5,-1186.6022 1376.9704,-1185.4392 1370.1798,-1184.1592 1363.4,-1182.8341"/>
<polygon fill="#000000" stroke="#000000" points="1363.9966,-1179.3843 1353.5063,-1180.8688 1362.6328,-1186.2501 1363.9966,-1179.3843"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1424.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1424.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1688.791,-1233.3491C1632.0475,-1225.1353 1541.9248,-1209.7994 1466.5,-1186.6022 1464.0451,-1185.8471 1461.5395,-1184.9952 1459.0351,-1184.083"/>
<polygon fill="#000000" stroke="#000000" points="1460.0802,-1180.7334 1449.4926,-1180.3429 1457.5258,-1187.2507 1460.0802,-1180.7334"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1552.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1552.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;33</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1706.567,-1226.3773C1676.9538,-1215.2723 1635.5326,-1199.7394 1603.0962,-1187.5757"/>
<polygon fill="#000000" stroke="#000000" points="1603.9335,-1184.1518 1593.3412,-1183.9176 1601.4756,-1190.7061 1603.9335,-1184.1518"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1680.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1680.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1729.0074,-1223.173C1720.834,-1213.9779 1710.6821,-1202.557 1701.7811,-1192.5434"/>
<polygon fill="#000000" stroke="#000000" points="1704.2322,-1190.0327 1694.9726,-1184.8838 1699.0003,-1194.6832 1704.2322,-1190.0327"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1808.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1808.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 37&#45;41</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1759.9926,-1223.173C1767.7383,-1214.4591 1777.2608,-1203.7463 1785.8116,-1194.1266"/>
<polygon fill="#000000" stroke="#000000" points="1788.6777,-1196.1704 1792.7054,-1186.371 1783.4458,-1191.5199 1788.6777,-1196.1704"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="2080.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2080.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1794.078,-1229.9783C1860.8602,-1215.6678 1978.4384,-1190.4725 2040.1276,-1177.2534"/>
<polygon fill="#000000" stroke="#000000" points="2041.2075,-1180.6015 2050.2522,-1175.0838 2039.7408,-1173.7569 2041.2075,-1180.6015"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="2428.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2428.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 46&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1801.9342,-1234.5565C1923.5821,-1221.7514 2207.5024,-1191.8651 2347.5053,-1177.1279"/>
<polygon fill="#000000" stroke="#000000" points="2348.1622,-1180.5782 2357.7409,-1176.0505 2347.4294,-1173.6166 2348.1622,-1180.5782"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="2789.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2789.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1803.6779,-1236.5248C1993.3749,-1223.4548 2583.426,-1182.8006 2747.049,-1171.527"/>
<polygon fill="#000000" stroke="#000000" points="2747.4653,-1175.0067 2757.2011,-1170.8275 2746.9841,-1168.0233 2747.4653,-1175.0067"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="3181.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3181.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 68&#45;79</text>
</g>
<!-- section_1&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1804.5439,-1237.6494C1968.7815,-1229.5655 2439.2913,-1206.3593 2830.5,-1186.6022 2920.9648,-1182.0334 3024.5397,-1176.7106 3095.6003,-1173.0446"/>
<polygon fill="#000000" stroke="#000000" points="3096.037,-1176.5268 3105.8433,-1172.516 3095.6762,-1169.5361 3096.037,-1176.5268"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="3550.5" cy="-1168.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3550.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.1049,-1239.0648C2010.4879,-1233.7243 2699.0278,-1214.7532 3267.5,-1186.6022 3352.9586,-1182.3702 3452.818,-1175.5881 3508.1363,-1171.6689"/>
<polygon fill="#000000" stroke="#000000" points="3508.5349,-1175.1495 3518.2611,-1170.9483 3508.0378,-1168.1672 3508.5349,-1175.1495"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="3912.5" cy="-1168.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3912.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 83&#45;97</text>
</g>
<!-- section_1&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.5053,-1239.4121C2037.8943,-1234.753 2889.9938,-1216.52 3591.5,-1186.6022 3671.5629,-1183.1876 3762.7842,-1177.9417 3827.4672,-1173.9924"/>
<polygon fill="#000000" stroke="#000000" points="3827.8477,-1177.4757 3837.6148,-1173.3702 3827.4193,-1170.4888 3827.8477,-1177.4757"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="5654.5" cy="-1168.6022" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5654.5" y="-1164.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 99&#45;287</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.1321,-1239.4857C2254.0939,-1231.2183 5058.7967,-1179.5716 5573.4299,-1170.095"/>
<polygon fill="#000000" stroke="#000000" points="5573.7957,-1173.589 5583.7295,-1169.9053 5573.6667,-1166.5901 5573.7957,-1173.589"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="135,-999.604 0,-999.604 0,-959.7998 135,-959.7998 135,-999.604"/>
<text text-anchor="middle" x="67.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- prose_3&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_3&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M898.7245,-1156.4275C893.2007,-1154.0925 887.2509,-1151.9561 881.5,-1150.6022 801.5872,-1131.7886 213.3507,-1157.7401 143.5,-1114.6022 105.5266,-1091.1508 84.8414,-1041.3756 74.9923,-1009.2861"/>
<polygon fill="#000000" stroke="#000000" points="78.314,-1008.174 72.1671,-999.5446 71.591,-1010.1238 78.314,-1008.174"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="512,-1107.1027 153,-1107.1027 153,-852.3011 512,-852.3011 512,-1107.1027"/>
<text text-anchor="middle" x="332.5" y="-1091.7021" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="332.5" y="-1076.3021" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="332.5" y="-1060.9021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="332.5" y="-1045.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="332.5" y="-1030.102" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="332.5" y="-1014.702" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="332.5" y="-999.302" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="332.5" y="-983.9019" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="332.5" y="-968.5019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="332.5" y="-953.1019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="332.5" y="-937.7018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="332.5" y="-922.3018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setfenv </text>
<text text-anchor="middle" x="332.5" y="-906.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="332.5" y="-891.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="332.5" y="-876.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="332.5" y="-860.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_4&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M993.2022,-1156.0195C983.3769,-1153.9697 973.1577,-1152.0478 963.5,-1150.6022 768.1386,-1121.3588 705.943,-1182.6618 520.5,-1114.6022 517.3887,-1113.4603 514.2827,-1112.2519 511.1849,-1110.9825"/>
<polygon fill="#000000" stroke="#000000" points="512.4881,-1107.733 501.9189,-1106.9966 509.722,-1114.1634 512.4881,-1107.733"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="637,-999.604 530,-999.604 530,-959.7998 637,-959.7998 637,-999.604"/>
<text text-anchor="middle" x="583.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- prose_5&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_5&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1144.261,-1156.353C1138.8628,-1154.0832 1133.0821,-1151.9926 1127.5,-1150.6022 1023.2752,-1124.641 733.7056,-1175.8929 645.5,-1114.6022 610.6035,-1090.3539 594.9401,-1041.3898 588.2104,-1009.6002"/>
<polygon fill="#000000" stroke="#000000" points="591.5986,-1008.6873 586.2557,-999.5383 584.727,-1010.0223 591.5986,-1008.6873"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="776,-997.7019 655,-997.7019 655,-961.7019 776,-961.7019 776,-997.7019"/>
<text text-anchor="middle" x="715.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_6&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1240.5141,-1155.9929C1230.2364,-1153.9709 1219.5741,-1152.0656 1209.5,-1150.6022 1115.7019,-1136.9761 863.1927,-1167.4341 784.5,-1114.6022 747.8065,-1089.9672 729.5568,-1039.565 721.3464,-1007.8271"/>
<polygon fill="#000000" stroke="#000000" points="724.6851,-1006.742 718.9348,-997.8434 717.8808,-1008.3857 724.6851,-1006.742"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="915,-999.604 794,-999.604 794,-959.7998 915,-959.7998 915,-999.604"/>
<text text-anchor="middle" x="854.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- prose_7&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_7&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.0894,-1156.5595C1394.4338,-1154.2177 1388.3539,-1152.0451 1382.5,-1150.6022 1283.375,-1126.1695 1009.5986,-1171.0019 924.5,-1114.6022 888.2405,-1090.5709 869.6518,-1041.5443 861.0119,-1009.6827"/>
<polygon fill="#000000" stroke="#000000" points="864.3046,-1008.4281 858.4522,-999.5964 857.5197,-1010.1501 864.3046,-1008.4281"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1159.5,-997.7019 933.5,-997.7019 933.5,-961.7019 1159.5,-961.7019 1159.5,-997.7019"/>
<text text-anchor="middle" x="1046.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_8&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0005,-1156.1999C1485.8722,-1154.1803 1475.3938,-1152.2224 1465.5,-1150.6022 1334.2817,-1129.1136 1286.5569,-1175.7787 1168.5,-1114.6022 1120.782,-1089.875 1082.5882,-1038.3994 1062.3463,-1006.672"/>
<polygon fill="#000000" stroke="#000000" points="1065.1409,-1004.5382 1056.8849,-997.8983 1059.1982,-1008.2375 1065.1409,-1004.5382"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1635,-999.604 1178,-999.604 1178,-959.7998 1635,-959.7998 1635,-999.604"/>
<text text-anchor="middle" x="1406.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- prose_9&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_9&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1659.9055,-1154.4039C1613.9741,-1122.7381 1502.5972,-1045.9529 1443.9868,-1005.5459"/>
<polygon fill="#000000" stroke="#000000" points="1445.6133,-1002.4161 1435.3937,-999.6217 1441.6401,-1008.1793 1445.6133,-1002.4161"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1963.5,-1006.9024 1653.5,-1006.9024 1653.5,-952.5014 1963.5,-952.5014 1963.5,-1006.9024"/>
<text text-anchor="middle" x="1808.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1808.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1808.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_10&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1808.5,-1150.4896C1808.5,-1119.888 1808.5,-1057.3533 1808.5,-1017.0418"/>
<polygon fill="#000000" stroke="#000000" points="1812.0001,-1016.8059 1808.5,-1006.8059 1805.0001,-1016.806 1812.0001,-1016.8059"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2467,-1007.0023 1982,-1007.0023 1982,-952.4015 2467,-952.4015 2467,-1007.0023"/>
<text text-anchor="middle" x="2224.5" y="-975.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="2224.5" y="-960.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- prose_11&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>prose_11&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.279,-1151.8385C2116.526,-1121.343 2166.2004,-1056.1797 2197.3223,-1015.3538"/>
<polygon fill="#000000" stroke="#000000" points="2200.1967,-1017.3564 2203.4757,-1007.2818 2194.6297,-1013.1127 2200.1967,-1017.3564"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2809.5,-1114.5025 2485.5,-1114.5025 2485.5,-844.9013 2809.5,-844.9013 2809.5,-1114.5025"/>
<text text-anchor="middle" x="2647.5" y="-1099.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="2647.5" y="-1084.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="2647.5" y="-1068.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="2647.5" y="-1053.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-1037.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="2647.5" y="-1022.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="2647.5" y="-1007.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="2647.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="2647.5" y="-945.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="2647.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2647.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="2647.5" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_12&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2448.7104,-1151.1695C2458.0022,-1143.1548 2469.9482,-1132.8507 2483.3656,-1121.2774"/>
<polygon fill="#000000" stroke="#000000" points="2485.6773,-1123.9056 2490.9635,-1114.7237 2481.1052,-1118.605 2485.6773,-1123.9056"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3215,-999.604 2828,-999.604 2828,-959.7998 3215,-959.7998 3215,-999.604"/>
<text text-anchor="middle" x="3021.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- prose_13&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_13&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2808.0934,-1153.463C2847.5111,-1121.3681 2939.8867,-1046.1535 2989.1769,-1006.0202"/>
<polygon fill="#000000" stroke="#000000" points="2991.447,-1008.6853 2996.9917,-999.6572 2987.0272,-1003.2571 2991.447,-1008.6853"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3655.5,-1060.7022 3233.5,-1060.7022 3233.5,-898.7016 3655.5,-898.7016 3655.5,-1060.7022"/>
<text text-anchor="middle" x="3444.5" y="-1045.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1030.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1014.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="3444.5" y="-999.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="3444.5" y="-983.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="3444.5" y="-968.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="3444.5" y="-953.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3444.5" y="-937.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="3444.5" y="-922.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="3444.5" y="-906.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_14&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3205.771,-1151.1695C3232.886,-1131.6941 3278.8215,-1098.7008 3323.1987,-1066.8268"/>
<polygon fill="#000000" stroke="#000000" points="3325.3816,-1069.5682 3331.4619,-1060.8917 3321.298,-1063.8827 3325.3816,-1069.5682"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3907,-999.604 3674,-999.604 3674,-959.7998 3907,-959.7998 3907,-999.604"/>
<text text-anchor="middle" x="3790.5" y="-968.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- prose_15&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_15&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3577.8737,-1159.0107C3602.0085,-1149.7957 3637.4442,-1134.3678 3664.5,-1114.6022 3706.6588,-1083.8031 3746.1884,-1037.57 3769.3608,-1008.0209"/>
<polygon fill="#000000" stroke="#000000" points="3772.3791,-1009.8394 3775.7316,-999.789 3766.8433,-1005.5551 3772.3791,-1009.8394"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="4368,-1083.9024 3925,-1083.9024 3925,-875.5014 4368,-875.5014 4368,-1083.9024"/>
<text text-anchor="middle" x="4146.5" y="-1068.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="4146.5" y="-1053.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="4146.5" y="-1037.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="4146.5" y="-1022.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-1007.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="4146.5" y="-991.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="4146.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="4146.5" y="-960.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="4146.5" y="-945.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="4146.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="4146.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4146.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_16&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3934.0947,-1151.1695C3952.2704,-1136.4969 3979.9506,-1114.1515 4009.3819,-1090.3927"/>
<polygon fill="#000000" stroke="#000000" points="4011.7258,-1092.9987 4017.3084,-1083.9939 4007.3289,-1087.5519 4011.7258,-1092.9987"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="4471.5" cy="-979.7019" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="4471.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_17&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5583.9609,-1166.799C5349.883,-1160.5942 4611.0726,-1139.1504 4566.5,-1114.6022 4523.751,-1091.0583 4495.8252,-1039.1017 4481.9268,-1006.9794"/>
<polygon fill="#000000" stroke="#000000" points="4485.1383,-1005.5868 4478.063,-997.7007 4478.6762,-1008.2777 4485.1383,-1005.5868"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="4607.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4607.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5583.9558,-1167.0212C5361.1929,-1161.7418 4685.262,-1143.4102 4648.5,-1114.6022 4616.4431,-1089.4812 4608.737,-1040.0306 4607.2701,-1008.4869"/>
<polygon fill="#000000" stroke="#000000" points="4610.7592,-1008.0441 4606.9818,-998.1456 4603.7619,-1008.2393 4610.7592,-1008.0441"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="4689.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4689.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.302,-1166.6657C5374.563,-1160.5958 4764.9676,-1140.7757 4731.5,-1114.6022 4699.3516,-1089.4604 4691.2505,-1040.0159 4689.5183,-1008.4792"/>
<polygon fill="#000000" stroke="#000000" points="4693.0035,-1008.0065 4689.1422,-998.1404 4686.0081,-1008.261 4693.0035,-1008.0065"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="4827.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4827.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 106&#45;128</text>
</g>
<!-- section_17&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.0088,-1166.7622C5412.0829,-1161.7985 4981.114,-1146.3157 4924.5,-1114.6022 4881.8505,-1090.7111 4853.1598,-1039.3342 4838.637,-1007.3318"/>
<polygon fill="#000000" stroke="#000000" points="4841.801,-1005.8315 4834.585,-998.0739 4835.3883,-1008.6382 4841.801,-1005.8315"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="4965.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4965.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.1531,-1167.111C5425.8047,-1163.1376 5051.7073,-1150.068 5007.5,-1114.6022 4975.6663,-1089.0632 4967.4708,-1039.7378 4965.634,-1008.3332"/>
<polygon fill="#000000" stroke="#000000" points="4969.1192,-1007.8924 4965.2211,-998.0408 4962.1248,-1008.173 4969.1192,-1007.8924"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="5103.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5103.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 132&#45;148</text>
</g>
<!-- section_17&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_17&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.1491,-1167.0669C5473.2375,-1163.524 5263.8268,-1151.9529 5200.5,-1114.6022 5158.3932,-1089.7671 5129.5267,-1038.6961 5114.823,-1007.0082"/>
<polygon fill="#000000" stroke="#000000" points="5118.0004,-1005.5398 5110.7155,-997.8469 5111.613,-1008.4036 5118.0004,-1005.5398"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="5241.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5241.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_17&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5587.5504,-1162.7276C5486.9805,-1153.3297 5306.2073,-1133.9918 5283.5,-1114.6022 5252.4634,-1088.1001 5244.0289,-1039.0636 5241.927,-1007.9792"/>
<polygon fill="#000000" stroke="#000000" points="5245.4133,-1007.6131 5241.421,-997.7993 5238.4219,-1007.9607 5245.4133,-1007.6131"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="5379.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5379.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 153&#45;206</text>
</g>
<!-- section_17&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_17&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5592.3999,-1159.9864C5556.0122,-1152.5717 5510.6442,-1139.0282 5476.5,-1114.6022 5437.3358,-1086.5849 5408.0026,-1037.7454 5392.3322,-1007.1527"/>
<polygon fill="#000000" stroke="#000000" points="5395.3205,-1005.3017 5387.7294,-997.9107 5389.0545,-1008.4223 5395.3205,-1005.3017"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="5517.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5517.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_17&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5613.2053,-1153.7805C5594.1315,-1145.0414 5572.631,-1132.194 5558.5,-1114.6022 5533.5156,-1083.4988 5523.7256,-1037.3203 5519.9097,-1007.8693"/>
<polygon fill="#000000" stroke="#000000" points="5523.3754,-1007.3699 5518.7571,-997.8346 5516.4212,-1008.1688 5523.3754,-1007.3699"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="5654.5" cy="-979.7019" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="5654.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 211&#45;215</text>
</g>
<!-- section_17&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_17&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5654.5,-1150.4896C5654.5,-1117.4859 5654.5,-1047.3394 5654.5,-1007.9862"/>
<polygon fill="#000000" stroke="#000000" points="5658.0001,-1007.7596 5654.5,-997.7596 5651.0001,-1007.7596 5658.0001,-1007.7596"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="5791.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5791.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_17&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5695.7947,-1153.7805C5714.8685,-1145.0414 5736.369,-1132.194 5750.5,-1114.6022 5775.4844,-1083.4988 5785.2744,-1037.3203 5789.0903,-1007.8693"/>
<polygon fill="#000000" stroke="#000000" points="5792.5788,-1008.1688 5790.2429,-997.8346 5785.6246,-1007.3699 5792.5788,-1008.1688"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="6108.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6108.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 219&#45;226</text>
</g>
<!-- section_17&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_17&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5704.3336,-1155.7873C5740.4292,-1145.9517 5790.1234,-1131.2624 5832.5,-1114.6022 5919.1251,-1080.5458 6015.9118,-1030.2289 6068.7465,-1001.6495"/>
<polygon fill="#000000" stroke="#000000" points="6070.6593,-1004.5935 6077.7762,-996.7449 6067.3182,-998.4423 6070.6593,-1004.5935"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="6517.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6517.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_17&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5723.7146,-1164.4775C5850.5305,-1156.4781 6115.3109,-1137.6041 6204.5,-1114.6022 6312.0157,-1086.8737 6430.0815,-1027.3167 6485.4664,-997.4885"/>
<polygon fill="#000000" stroke="#000000" points="6487.3149,-1000.4677 6494.4352,-992.6221 6483.9764,-994.315 6487.3149,-1000.4677"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="6966.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6966.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 231&#45;238</text>
</g>
<!-- section_17&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_17&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5724.9433,-1166.7558C5908.6413,-1161.5631 6399.0718,-1145.1796 6558.5,-1114.6022 6692.7817,-1088.8477 6843.9054,-1030.8297 6918.9347,-999.9431"/>
<polygon fill="#000000" stroke="#000000" points="6920.672,-1003.012 6928.5721,-995.9523 6917.9938,-996.5446 6920.672,-1003.012"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="7423.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7423.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.0895,-1167.2136C5991.989,-1161.7828 6931.0345,-1140.9745 7062.5,-1114.6022 7187.9709,-1089.4323 7327.4696,-1026.5696 7389.9947,-996.3879"/>
<polygon fill="#000000" stroke="#000000" points="7391.893,-999.3567 7399.3548,-991.8353 7388.8312,-993.0618 7391.893,-999.3567"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="7882.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7882.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 242&#45;269</text>
</g>
<!-- section_17&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.1869,-1167.6718C6038.1495,-1163.3933 7291.2108,-1144.5269 7464.5,-1114.6022 7603.0369,-1090.6786 7758.8287,-1031.2471 7835.1698,-999.8595"/>
<polygon fill="#000000" stroke="#000000" points="7836.6189,-1003.0478 7844.5216,-995.991 7833.9431,-996.5793 7836.6189,-1003.0478"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="8342.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8342.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.2105,-1168.3511C6090.2152,-1166.8686 7752.868,-1157.7785 7978.5,-1114.6022 8105.3675,-1090.3251 8246.2975,-1026.7856 8309.1222,-996.381"/>
<polygon fill="#000000" stroke="#000000" points="8310.7132,-999.4992 8318.1675,-991.9703 8307.6451,-993.2074 8310.7132,-999.4992"/>
</g>
<!-- codeblock_49 -->
<g id="node50" class="node">
<title>codeblock_49</title>
<ellipse fill="none" stroke="#000000" cx="8746.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8746.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 274&#45;278</text>
</g>
<!-- section_17&#45;&gt;codeblock_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;codeblock_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.3279,-1167.871C6140.9426,-1163.4964 8249.2555,-1140.1135 8383.5,-1114.6022 8504.0564,-1091.692 8637.2324,-1032.8752 8703.7488,-1000.9996"/>
<polygon fill="#000000" stroke="#000000" points="8705.5859,-1003.9993 8713.0696,-996.4996 8702.5425,-997.6955 8705.5859,-1003.9993"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="9051.5" cy="-979.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9051.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.1643,-1168.5051C6180.6331,-1167.7422 8688.452,-1161.4215 8842.5,-1114.6022 8917.0252,-1091.952 8990.2795,-1034.258 9027.0623,-1002.1416"/>
<polygon fill="#000000" stroke="#000000" points="9029.6001,-1004.5694 9034.7669,-995.3198 9024.9597,-999.3285 9029.6001,-1004.5694"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="9359.5" cy="-979.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9359.5" y="-975.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 284&#45;286</text>
</g>
<!-- section_17&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5725.202,-1168.392C6201.0851,-1166.8655 8923.2878,-1156.3288 9092.5,-1114.6022 9182.9297,-1092.3028 9277.6918,-1035.0437 9326.3375,-1002.7496"/>
<polygon fill="#000000" stroke="#000000" points="9328.5178,-1005.5016 9334.8727,-997.0242 9324.6183,-999.6884 9328.5178,-1005.5016"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2080,-432.3023 1665,-432.3023 1665,-376.4993 2080,-376.4993 2080,-432.3023"/>
<text text-anchor="middle" x="1872.5" y="-384.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- prose_33&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_33&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4607.9992,-961.5685C4607.7176,-931.5835 4602.2436,-872.2589 4565.5,-844.8016 4455.2551,-762.4191 2206.0174,-880.4289 2088.5,-808.8016 1952.6276,-725.9869 1897.2425,-525.904 1879.4956,-442.2052"/>
<polygon fill="#000000" stroke="#000000" points="1882.9127,-441.4456 1877.4683,-432.3566 1876.0564,-442.8569 1882.9127,-441.4456"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2373,-432.3023 2098,-432.3023 2098,-376.4993 2373,-376.4993 2373,-432.3023"/>
<text text-anchor="middle" x="2235.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- prose_34&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>prose_34&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4690.137,-961.5884C4690.0827,-931.6328 4685.0556,-872.3504 4648.5,-844.8016 4547.9064,-768.9931 2484.0087,-881.9997 2381.5,-808.8016 2260.4531,-722.366 2239.3894,-525.4728 2235.9983,-442.4476"/>
<polygon fill="#000000" stroke="#000000" points="2239.4879,-442.0794 2235.6474,-432.2052 2232.492,-442.3192 2239.4879,-442.0794"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2904,-570.4014 2391,-570.4014 2391,-238.4002 2904,-238.4002 2904,-570.4014"/>
<text text-anchor="middle" x="2647.5" y="-555.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="2647.5" y="-539.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="2647.5" y="-524.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="2647.5" y="-509.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="2647.5" y="-493.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="2647.5" y="-478.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="2647.5" y="-462.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="2647.5" y="-447.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2647.5" y="-432.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="2647.5" y="-416.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="2647.5" y="-401.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-385.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="2647.5" y="-370.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="2647.5" y="-355.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="2647.5" y="-339.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="2647.5" y="-324.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-308.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2647.5" y="-277.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="2647.5" y="-262.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="2647.5" y="-246.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_35&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4820.7666,-961.5414C4808.3191,-930.95 4778.512,-870.0172 4730.5,-844.8016 4551.6289,-750.8595 3089.295,-906.595 2912.5,-808.8016 2822.671,-759.1131 2758.1907,-664.6073 2715.3405,-579.4446"/>
<polygon fill="#000000" stroke="#000000" points="2718.4527,-577.8424 2710.8722,-570.4406 2712.1823,-580.9541 2718.4527,-577.8424"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3169,-424.3029 2922,-424.3029 2922,-384.4987 3169,-384.4987 3169,-424.3029"/>
<text text-anchor="middle" x="3045.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- prose_36&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prose_36&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4965.9809,-961.5928C4965.6725,-931.6437 4960.1599,-872.3705 4923.5,-844.8016 4845.9587,-786.4891 3255.4383,-866.5825 3177.5,-808.8016 3055.3913,-718.2743 3044.3059,-511.9123 3044.6518,-434.4892"/>
<polygon fill="#000000" stroke="#000000" points="3048.152,-434.4849 3044.7661,-424.4457 3041.1524,-434.4052 3048.152,-434.4849"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3574,-523.9013 3187,-523.9013 3187,-284.9003 3574,-284.9003 3574,-523.9013"/>
<text text-anchor="middle" x="3380.5" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="3380.5" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="3380.5" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="3380.5" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="3380.5" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3380.5" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="3380.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="3380.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3380.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="3380.5" y="-370.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="3380.5" y="-354.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="3380.5" y="-339.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="3380.5" y="-323.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="3380.5" y="-308.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3380.5" y="-293.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>codeblock_37&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5096.7519,-961.5693C5084.2822,-931.02 5054.4425,-870.149 5006.5,-844.8016 4866.6777,-770.877 3717.0451,-893.5414 3583.5,-808.8016 3487.8851,-748.1301 3435.5848,-627.5652 3408.1356,-533.793"/>
<polygon fill="#000000" stroke="#000000" points="3411.4323,-532.5916 3405.3139,-523.942 3404.7029,-534.5192 3411.4323,-532.5916"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4042.5,-431.7012 3592.5,-431.7012 3592.5,-377.1004 4042.5,-377.1004 4042.5,-431.7012"/>
<text text-anchor="middle" x="3817.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="3817.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- prose_38&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_38&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5241.9486,-961.6356C5241.5925,-931.7495 5236.0114,-872.5669 5199.5,-844.8016 5097.9174,-767.5527 4161.0385,-874.2825 4051.5,-808.8016 3911.9807,-725.3985 3847.505,-524.7733 3826.0773,-441.5492"/>
<polygon fill="#000000" stroke="#000000" points="3829.4504,-440.6107 3823.6185,-431.7654 3822.6615,-442.3169 3829.4504,-440.6107"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="4566.5,-808.7025 4060.5,-808.7025 4060.5,-.0992 4566.5,-.0992 4566.5,-808.7025"/>
<text text-anchor="middle" x="4313.5" y="-793.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="4313.5" y="-778.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="4313.5" y="-762.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="4313.5" y="-747.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="4313.5" y="-732.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="4313.5" y="-716.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="4313.5" y="-701.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="4313.5" y="-685.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="4313.5" y="-670.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="4313.5" y="-655.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="4313.5" y="-639.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="4313.5" y="-624.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4313.5" y="-608.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="4313.5" y="-593.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="4313.5" y="-578.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="4313.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="4313.5" y="-547.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="4313.5" y="-531.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="4313.5" y="-516.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="4313.5" y="-501.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="4313.5" y="-485.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="4313.5" y="-470.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="4313.5" y="-454.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="4313.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4313.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4313.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="4313.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="4313.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="4313.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="4313.5" y="-347.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="4313.5" y="-331.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="4313.5" y="-316.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="4313.5" y="-300.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4313.5" y="-285.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="4313.5" y="-270.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="4313.5" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4313.5" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="4313.5" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4313.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="4313.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="4313.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="4313.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4313.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4313.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="4313.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="4313.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="4313.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="4313.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4313.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="4313.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="4313.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="4313.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_39&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5372.6824,-961.6987C5360.1079,-931.3447 5330.1144,-870.7602 5282.5,-844.8016 5144.3784,-769.5001 4711.7544,-887.4315 4575.5,-808.8016 4575.4066,-808.7477 4575.3132,-808.6938 4575.2199,-808.6398"/>
<polygon fill="#000000" stroke="#000000" points="4576.9944,-805.6229 4566.6183,-803.4811 4573.394,-811.626 4576.9944,-805.6229"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="5062.5,-431.7012 4584.5,-431.7012 4584.5,-377.1004 5062.5,-377.1004 5062.5,-431.7012"/>
<text text-anchor="middle" x="4823.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="4823.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- prose_40&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>prose_40&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5517.7609,-961.3854C5517.0894,-931.6824 5511.0069,-873.4514 5475.5,-844.8016 5405.3535,-788.202 5148.1149,-856.2801 5071.5,-808.8016 4931.5488,-722.0734 4858.9412,-524.1891 4833.8433,-441.6417"/>
<polygon fill="#000000" stroke="#000000" points="4837.1597,-440.5149 4830.9494,-431.9311 4830.4513,-442.5142 4837.1597,-440.5149"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5530.5,-431.6013 5080.5,-431.6013 5080.5,-377.2003 5530.5,-377.2003 5530.5,-431.6013"/>
<text text-anchor="middle" x="5305.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="5305.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="5305.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_41&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5641.663,-961.5091C5619.9637,-930.5648 5574.9345,-865.5175 5539.5,-808.8016 5456.2062,-675.483 5364.9207,-512.2581 5325.4782,-440.8101"/>
<polygon fill="#000000" stroke="#000000" points="5328.3777,-438.8199 5320.4845,-431.7525 5322.2476,-442.1996 5328.3777,-438.8199"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="6034,-424.3029 5549,-424.3029 5549,-384.4987 6034,-384.4987 6034,-424.3029"/>
<text text-anchor="middle" x="5791.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- prose_42&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_42&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5791.5,-961.5341C5791.5,-878.8926 5791.5,-538.0361 5791.5,-434.4169"/>
<polygon fill="#000000" stroke="#000000" points="5795.0001,-434.3292 5791.5,-424.3292 5788.0001,-434.3293 5795.0001,-434.3292"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6523,-454.8018 6052,-454.8018 6052,-353.9998 6523,-353.9998 6523,-454.8018"/>
<text text-anchor="middle" x="6287.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="6287.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="6287.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="6287.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="6287.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="6287.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_43&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6114.1528,-961.5341C6137.7543,-885.6794 6229.0431,-592.2798 6268.8095,-464.4716"/>
<polygon fill="#000000" stroke="#000000" points="6272.1815,-465.4148 6271.8105,-454.8265 6265.4975,-463.3351 6272.1815,-465.4148"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="7033.5,-431.7012 6541.5,-431.7012 6541.5,-377.1004 7033.5,-377.1004 7033.5,-431.7012"/>
<text text-anchor="middle" x="6787.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="6787.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- prose_44&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_44&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6525.728,-962.1701C6563.2127,-882.2999 6718.231,-551.9953 6770.3311,-440.9834"/>
<polygon fill="#000000" stroke="#000000" points="6773.5386,-442.387 6774.6188,-431.8473 6767.2018,-439.4129 6773.5386,-442.387"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="7501.5,-454.8018 7051.5,-454.8018 7051.5,-353.9998 7501.5,-353.9998 7501.5,-454.8018"/>
<text text-anchor="middle" x="7276.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="7276.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="7276.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="7276.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="7276.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="7276.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_45&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6976.2897,-961.5341C7017.2457,-885.5274 7175.8958,-591.103 7244.5439,-463.7052"/>
<polygon fill="#000000" stroke="#000000" points="7247.6657,-465.2901 7249.3282,-454.8265 7241.5034,-461.9695 7247.6657,-465.2901"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="7963,-424.3029 7520,-424.3029 7520,-384.4987 7963,-384.4987 7963,-424.3029"/>
<text text-anchor="middle" x="7741.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- prose_46&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>prose_46&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7433.0171,-962.4843C7477.963,-881.1716 7669.1442,-535.3013 7725.6873,-433.0079"/>
<polygon fill="#000000" stroke="#000000" points="7728.8062,-434.6003 7730.5807,-424.1552 7722.6798,-431.2139 7728.8062,-434.6003"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="8424,-609.0018 7981,-609.0018 7981,-199.7999 8424,-199.7999 8424,-609.0018"/>
<text text-anchor="middle" x="8202.5" y="-594.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="8202.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="8202.5" y="-531.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="8202.5" y="-515.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="8202.5" y="-500.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-485.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="8202.5" y="-469.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-454.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="8202.5" y="-438.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="8202.5" y="-423.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="8202.5" y="-408.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-392.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8202.5" y="-377.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="8202.5" y="-361.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="8202.5" y="-346.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="8202.5" y="-331.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-315.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8202.5" y="-300.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8202.5" y="-284.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8202.5" y="-269.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-254.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8202.5" y="-238.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8202.5" y="-223.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8202.5" y="-207.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_47&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7892.6055,-961.5341C7921.8429,-908.9706 8009.1846,-751.9463 8083.7194,-617.9464"/>
<polygon fill="#000000" stroke="#000000" points="8086.8073,-619.5951 8088.6096,-609.1547 8080.69,-616.1925 8086.8073,-619.5951"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="8885,-431.7012 8442,-431.7012 8442,-377.1004 8885,-377.1004 8885,-431.7012"/>
<text text-anchor="middle" x="8663.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="8663.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- prose_48&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_48&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8352.1069,-962.4843C8396.3963,-883.1081 8581.3533,-551.6254 8643.2328,-440.724"/>
<polygon fill="#000000" stroke="#000000" points="8646.3377,-442.3424 8648.1539,-431.9043 8640.2249,-438.9316 8646.3377,-442.3424"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="9122,-431.6013 8903,-431.6013 8903,-377.2003 9122,-377.2003 9122,-431.6013"/>
<text text-anchor="middle" x="9012.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="9012.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="9012.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_49&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_49&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8766.4201,-961.9977C8797.8704,-932.9991 8858.9922,-872.2282 8893.5,-808.8016 8961.4225,-683.9577 8994.774,-515.8082 9006.9183,-441.8982"/>
<polygon fill="#000000" stroke="#000000" points="9010.4271,-442.1223 9008.5578,-431.6937 9003.5157,-441.0118 9010.4271,-442.1223"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="9296.5,-424.3029 9140.5,-424.3029 9140.5,-384.4987 9296.5,-384.4987 9296.5,-424.3029"/>
<text text-anchor="middle" x="9218.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- prose_50&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>prose_50&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9061.1242,-962.2655C9077.5129,-931.9205 9110.9577,-867.0627 9130.5,-808.8016 9176.2646,-672.3645 9204.2843,-501.8833 9214.3128,-434.14"/>
<polygon fill="#000000" stroke="#000000" points="9217.7868,-434.5714 9215.7678,-424.1707 9210.8602,-433.5604 9217.7868,-434.5714"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="9408,-422.4008 9315,-422.4008 9315,-386.4008 9408,-386.4008 9408,-422.4008"/>
<text text-anchor="middle" x="9361.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_51&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9359.5632,-961.5341C9359.8521,-878.4233 9361.0489,-534.1566 9361.4017,-432.6748"/>
<polygon fill="#000000" stroke="#000000" points="9364.9019,-432.5851 9361.4368,-422.573 9357.902,-432.5607 9364.9019,-432.5851"/>
</g>
</g>
</svg>