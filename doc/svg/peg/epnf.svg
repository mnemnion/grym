<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="7008pt" height="1446pt"
 viewBox="0.00 0.00 7008.30 1446.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1442.0022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1442.0022 7004.2972,-1442.0022 7004.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1159" cy="-1420.0022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1159" y="-1415.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 289</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1159" cy="-1348.0022" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1159" y="-1343.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;100</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1159,-1401.8335C1159,-1394.1331 1159,-1384.9765 1159,-1376.4188"/>
<polygon fill="#000000" stroke="#000000" points="1162.5001,-1376.4154 1159,-1366.4155 1155.5001,-1376.4155 1162.5001,-1376.4154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="57" cy="-1276.0022" rx="27" ry="18"/>
<text text-anchor="middle" x="57" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1093.7694,-1345.8818C938.6157,-1340.4998 535.4631,-1324.5234 200,-1294.0022 163.7131,-1290.7007 122.4394,-1285.3312 93.5927,-1281.3144"/>
<polygon fill="#000000" stroke="#000000" points="93.9498,-1277.8303 83.5595,-1279.9021 92.974,-1284.7619 93.9498,-1277.8303"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="241" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="241" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1093.396,-1346.4082C953.6295,-1342.4179 616.3654,-1329.6266 336,-1294.0022 317.9345,-1291.7067 298.1202,-1288.1243 281.2834,-1284.7579"/>
<polygon fill="#000000" stroke="#000000" points="281.7254,-1281.276 271.2271,-1282.7032 280.3241,-1288.1343 281.7254,-1281.276"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="418" cy="-1276.0022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="418" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;23</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1094.6821,-1344.1791C980.2293,-1337.0035 733.7942,-1319.8711 527,-1294.0022 514.0333,-1292.3801 500.2478,-1290.3465 486.9979,-1288.2352"/>
<polygon fill="#000000" stroke="#000000" points="487.4241,-1284.7587 476.9924,-1286.6111 486.3024,-1291.6682 487.4241,-1284.7587"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="568" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="568" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1093.2141,-1346.6327C990.5355,-1343.3369 786.4754,-1332.1227 618,-1294.0022 613.2983,-1292.9383 608.433,-1291.5589 603.6667,-1290.0371"/>
<polygon fill="#000000" stroke="#000000" points="604.701,-1286.6919 594.1065,-1286.7687 602.4365,-1293.3155 604.701,-1286.6919"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="704" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="704" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1099.9133,-1340.1248C1027.7874,-1330.3044 902.1745,-1312.5406 795,-1294.0022 787.6072,-1292.7234 779.8916,-1291.314 772.2154,-1289.8638"/>
<polygon fill="#000000" stroke="#000000" points="772.6573,-1286.3849 762.1774,-1287.9415 771.3406,-1293.26 772.6573,-1286.3849"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="836" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="836" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1099.9445,-1340.0313C1042.9089,-1331.5266 954.4657,-1316.2036 880,-1294.0022 877.0118,-1293.1113 873.9472,-1292.0913 870.8939,-1290.9997"/>
<polygon fill="#000000" stroke="#000000" points="871.8781,-1287.6293 861.2872,-1287.3397 869.3859,-1294.1706 871.8781,-1287.6293"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="966" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="966" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;35</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1119.9436,-1333.4319C1090.197,-1322.3348 1049.0009,-1306.9662 1016.7097,-1294.9198"/>
<polygon fill="#000000" stroke="#000000" points="1017.5894,-1291.5124 1006.9967,-1291.2963 1015.1426,-1298.0709 1017.5894,-1291.5124"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1095" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1095" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1143.1798,-1330.2044C1135.1184,-1321.1353 1125.1979,-1309.9748 1116.4584,-1300.1429"/>
<polygon fill="#000000" stroke="#000000" points="1119.0204,-1297.7568 1109.7607,-1292.608 1113.7885,-1302.4074 1119.0204,-1297.7568"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1259" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1259" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 39&#45;43</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1182.4456,-1331.1214C1195.6681,-1321.6012 1212.381,-1309.5679 1226.8151,-1299.1753"/>
<polygon fill="#000000" stroke="#000000" points="1228.9365,-1301.9608 1235.0068,-1293.2773 1224.8463,-1296.28 1228.9365,-1301.9608"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="1441" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1441" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1207.1571,-1335.7068C1262.0517,-1321.6911 1350.7442,-1299.0462 1401.664,-1286.0454"/>
<polygon fill="#000000" stroke="#000000" points="1402.8035,-1289.3668 1411.6269,-1283.5017 1401.0718,-1282.5844 1402.8035,-1289.3668"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="1635" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1635" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;66</text>
</g>
<!-- section_1&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1216.8911,-1339.2456C1302.9501,-1326.2282 1464.6714,-1301.7662 1559.7881,-1287.3788"/>
<polygon fill="#000000" stroke="#000000" points="1560.5493,-1290.8035 1569.9133,-1285.8472 1559.5023,-1283.8823 1560.5493,-1290.8035"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1836" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1836" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1222.3475,-1343.151C1326.5592,-1334.8933 1540.6057,-1316.7662 1721,-1294.0022 1745.5777,-1290.9007 1772.9866,-1286.6422 1794.8796,-1283.0458"/>
<polygon fill="#000000" stroke="#000000" points="1795.541,-1286.484 1804.8331,-1281.3942 1794.395,-1279.5785 1795.541,-1286.484"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="2047" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2047" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 70&#45;81</text>
</g>
<!-- section_1&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1222.9291,-1343.8495C1348.4217,-1335.5526 1635.7895,-1315.8377 1877,-1294.0022 1906.3525,-1291.3451 1938.5133,-1288.0409 1966.8868,-1284.9914"/>
<polygon fill="#000000" stroke="#000000" points="1967.5908,-1288.4358 1977.1567,-1283.8811 1966.8384,-1281.4764 1967.5908,-1288.4358"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="2289" cy="-1276.0022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2289" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1224.3558,-1345.7227C1381.2471,-1339.9575 1791.5052,-1323.1443 2133,-1294.0022 2171.8046,-1290.6907 2215.8774,-1285.4701 2247.256,-1281.5021"/>
<polygon fill="#000000" stroke="#000000" points="2247.9086,-1284.9473 2257.3848,-1280.2091 2247.0221,-1278.0037 2247.9086,-1284.9473"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="2544" cy="-1276.0022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2544" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 85&#45;99</text>
</g>
<!-- section_1&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1224.4314,-1345.8537C1402.2206,-1339.828 1909.1065,-1321.3981 2330,-1294.0022 2373.4669,-1291.1729 2421.8301,-1287.1771 2461.5677,-1283.6688"/>
<polygon fill="#000000" stroke="#000000" points="2462.0891,-1287.1364 2471.74,-1282.7648 2461.4694,-1280.1639 2462.0891,-1287.1364"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="4621" cy="-1276.0022" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4621" y="-1271.8022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 101&#45;289</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1224.6853,-1346.6361C1653.3858,-1337.7203 4050.3883,-1287.8693 4535.4137,-1277.7821"/>
<polygon fill="#000000" stroke="#000000" points="4535.5711,-1281.2797 4545.4962,-1277.5725 4535.4255,-1274.2812 4535.5711,-1281.2797"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-1097.1019 0,-1097.1019 0,-1061.1019 54,-1061.1019 54,-1097.1019"/>
</g>
<!-- header_2&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>header_2&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M54.2314,-1257.8312C48.9851,-1223.3979 37.5621,-1148.4249 31.3069,-1107.3696"/>
<polygon fill="#000000" stroke="#000000" points="34.7282,-1106.5877 29.7619,-1097.229 27.8081,-1107.6421 34.7282,-1106.5877"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="99" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_3&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M211.4645,-1268.3523C187.3881,-1260.5994 154.3158,-1246.2229 135,-1222.0022 108.6018,-1188.9006 101.2894,-1138.8797 99.4186,-1107.6467"/>
<polygon fill="#000000" stroke="#000000" points="102.9056,-1107.2746 98.9615,-1097.4413 95.9126,-1107.5879 102.9056,-1107.2746"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="503.5,-1221.9025 144.5,-1221.9025 144.5,-936.3013 503.5,-936.3013 503.5,-1221.9025"/>
<text text-anchor="middle" x="324" y="-1206.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="324" y="-1191.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="324" y="-1176.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="324" y="-1160.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="324" y="-1145.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="324" y="-1129.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="324" y="-1114.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="324" y="-1099.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="324" y="-1083.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="324" y="-1068.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="324" y="-1052.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="324" y="-1021.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="324" y="-1006.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="324" y="-990.6018" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="324" y="-975.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv</text>
<text text-anchor="middle" x="324" y="-959.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="324" y="-944.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_4&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M409.3252,-1257.8312C405.8451,-1250.5414 401.4975,-1241.4346 396.6198,-1231.2174"/>
<polygon fill="#000000" stroke="#000000" points="399.6721,-1229.4869 392.2053,-1221.9705 393.3551,-1232.5027 399.6721,-1229.4869"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="549" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="549" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_5&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M566.2466,-1257.8312C562.9239,-1223.3979 555.6894,-1148.4249 551.7277,-1107.3696"/>
<polygon fill="#000000" stroke="#000000" points="555.1936,-1106.8465 550.7492,-1097.229 548.2259,-1107.5189 555.1936,-1106.8465"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="715.5,-1097.1019 594.5,-1097.1019 594.5,-1061.1019 715.5,-1061.1019 715.5,-1097.1019"/>
<text text-anchor="middle" x="655" y="-1075.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_6&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M699.478,-1257.8312C690.8908,-1223.3247 672.1721,-1148.1056 661.9695,-1107.108"/>
<polygon fill="#000000" stroke="#000000" points="665.3224,-1106.0878 659.511,-1097.229 658.5296,-1107.7783 665.3224,-1106.0878"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="761" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="761" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_7&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M821.5724,-1259.5379C813.3087,-1249.3408 803.3508,-1235.6286 797,-1222.0022 779.4812,-1184.4138 769.7145,-1137.1348 764.9065,-1107.5068"/>
<polygon fill="#000000" stroke="#000000" points="768.3375,-1106.7902 763.3544,-1097.4405 761.4193,-1107.8571 768.3375,-1106.7902"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1032,-1097.1019 806,-1097.1019 806,-1061.1019 1032,-1061.1019 1032,-1097.1019"/>
<text text-anchor="middle" x="919" y="-1075.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_8&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M961.6626,-1257.8312C953.4259,-1223.3247 935.4712,-1148.1056 925.685,-1107.108"/>
<polygon fill="#000000" stroke="#000000" points="929.0531,-1106.1431 923.3269,-1097.229 922.2444,-1107.7684 929.0531,-1106.1431"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1077" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="1077" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_9&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_9&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1093.3389,-1257.8312C1090.1911,-1223.3979 1083.3373,-1148.4249 1079.5841,-1107.3696"/>
<polygon fill="#000000" stroke="#000000" points="1083.053,-1106.8688 1078.6571,-1097.229 1076.0821,-1107.5061 1083.053,-1106.8688"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1432,-1106.3024 1122,-1106.3024 1122,-1051.9015 1432,-1051.9015 1432,-1106.3024"/>
<text text-anchor="middle" x="1277" y="-1091.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1277" y="-1075.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1277" y="-1060.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_10&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1260.6611,-1257.8312C1263.5896,-1225.7966 1269.7258,-1158.6737 1273.5887,-1116.4182"/>
<polygon fill="#000000" stroke="#000000" points="1277.0934,-1116.5247 1274.5184,-1106.2475 1270.1225,-1115.8873 1277.0934,-1116.5247"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="1477" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="1477" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_11&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1444.3223,-1257.8312C1450.6312,-1223.3247 1464.3838,-1148.1056 1471.8795,-1107.108"/>
<polygon fill="#000000" stroke="#000000" points="1475.3301,-1107.6954 1473.6858,-1097.229 1468.4442,-1106.4364 1475.3301,-1107.6954"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1846,-1213.9025 1522,-1213.9025 1522,-944.3013 1846,-944.3013 1846,-1213.9025"/>
<text text-anchor="middle" x="1684" y="-1198.8022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="1684" y="-1183.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="1684" y="-1168.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="1684" y="-1152.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="1684" y="-1137.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="1684" y="-1121.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="1684" y="-1106.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1684" y="-1091.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1684" y="-1075.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="1684" y="-1060.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="1684" y="-1044.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="1684" y="-1029.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="1684" y="-1014.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="1684" y="-998.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1684" y="-983.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1684" y="-967.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="1684" y="-952.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_12&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1639.522,-1257.8312C1641.7525,-1248.8679 1644.6667,-1237.1576 1647.9377,-1224.0137"/>
<polygon fill="#000000" stroke="#000000" points="1651.3593,-1224.7575 1650.3779,-1214.2082 1644.5665,-1223.067 1651.3593,-1224.7575"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1891" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="1891" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_13&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1842.7484,-1258.1376C1846.5812,-1247.6828 1851.3312,-1234.1828 1855,-1222.0022 1866.8944,-1182.512 1878.0838,-1136.0927 1884.7397,-1107.1295"/>
<polygon fill="#000000" stroke="#000000" points="1888.1716,-1107.8214 1886.9796,-1097.2938 1881.3464,-1106.2669 1888.1716,-1107.8214"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2358,-1160.1022 1936,-1160.1022 1936,-998.1016 2358,-998.1016 2358,-1160.1022"/>
<text text-anchor="middle" x="2147" y="-1144.9021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="2147" y="-1129.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="2147" y="-1114.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="2147" y="-1098.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="2147" y="-1083.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="2147" y="-1067.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="2147" y="-1052.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2147" y="-1037.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="2147" y="-1021.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="2147" y="-1006.3018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_14&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2056.2285,-1257.8312C2066.6146,-1237.381 2084.263,-1202.6313 2101.2519,-1169.18"/>
<polygon fill="#000000" stroke="#000000" points="2104.3773,-1170.7554 2105.7849,-1160.2545 2098.1361,-1167.5856 2104.3773,-1170.7554"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="2403" cy="-1079.1019" rx="27" ry="18"/>
<text text-anchor="middle" x="2403" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_15&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2314.071,-1264.6567C2331.4535,-1255.5325 2353.7722,-1241.0896 2367,-1222.0022 2390.9859,-1187.391 2399.0102,-1138.2142 2401.6825,-1107.509"/>
<polygon fill="#000000" stroke="#000000" points="2405.1776,-1107.7029 2402.4219,-1097.4728 2398.1965,-1107.1885 2405.1776,-1107.7029"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2891.5,-1183.3024 2448.5,-1183.3024 2448.5,-974.9014 2891.5,-974.9014 2891.5,-1183.3024"/>
<text text-anchor="middle" x="2670" y="-1168.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="2670" y="-1152.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="2670" y="-1137.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="2670" y="-1121.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="2670" y="-1106.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="2670" y="-1091.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="2670" y="-1075.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="2670" y="-1060.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="2670" y="-1044.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="2670" y="-1029.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="2670" y="-1014.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="2670" y="-998.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2670" y="-983.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>codeblock_16&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2555.4039,-1258.1813C2565.5164,-1242.3785 2581.2167,-1217.8436 2597.786,-1191.9507"/>
<polygon fill="#000000" stroke="#000000" points="2600.7482,-1193.8151 2603.1903,-1183.5055 2594.8521,-1190.042 2600.7482,-1193.8151"/>
</g>
<!-- header_40 -->
<g id="node41" class="node">
<title>header_40</title>
<ellipse fill="none" stroke="#000000" cx="3033" cy="-1079.1019" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="3033" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_40 -->
<g id="edge40" class="edge">
<title>section_17&#45;&gt;header_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.2538,-1274.8996C4282.2534,-1270.7972 3418.0604,-1254.9291 3298,-1222.0022 3206.8868,-1197.0141 3112.3294,-1136.0743 3064.6125,-1102.4074"/>
<polygon fill="#000000" stroke="#000000" points="3066.4339,-1099.4075 3056.2592,-1096.4532 3062.3708,-1105.1077 3066.4339,-1099.4075"/>
</g>
<!-- prose_41 -->
<g id="node42" class="node">
<title>prose_41</title>
<ellipse fill="none" stroke="#000000" cx="3339" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3339" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_41 -->
<g id="edge41" class="edge">
<title>section_17&#45;&gt;prose_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.7237,-1274.0995C4296.873,-1267.599 3513.7087,-1245.3765 3465,-1222.0022 3412.8023,-1196.9536 3373.0774,-1139.3494 3353.1724,-1105.4211"/>
<polygon fill="#000000" stroke="#000000" points="3356.09,-1103.4723 3348.0899,-1096.5261 3350.0122,-1106.9451 3356.09,-1103.4723"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="3506" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3506" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_17&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.7432,-1274.0068C4315.0228,-1267.6342 3630.7156,-1246.7335 3590,-1222.0022 3547.6488,-1196.2775 3524.2674,-1140.5098 3513.4971,-1106.7513"/>
<polygon fill="#000000" stroke="#000000" points="3516.8033,-1105.5931 3510.5524,-1097.0388 3510.1044,-1107.6241 3516.8033,-1105.5931"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="3686" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3686" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 108&#45;130</text>
</g>
<!-- section_17&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_17&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.754,-1274.4132C4356.1058,-1269.9316 3869.0021,-1255.2893 3804,-1222.0022 3754.2647,-1196.5331 3717.7032,-1139.8532 3699.331,-1106.0313"/>
<polygon fill="#000000" stroke="#000000" points="3702.4013,-1104.3502 3694.6356,-1097.1429 3696.2118,-1107.6199 3702.4013,-1104.3502"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="3845" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3845" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_17&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.4921,-1274.9211C4370.6235,-1271.776 3948.8537,-1260.2691 3898,-1222.0022 3861.942,-1194.8689 3850.4051,-1140.4679 3846.7207,-1107.1716"/>
<polygon fill="#000000" stroke="#000000" points="3850.2005,-1106.7922 3845.7793,-1097.164 3843.2313,-1107.4478 3850.2005,-1106.7922"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="3994" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3994" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;150</text>
</g>
<!-- section_17&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_17&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4547.419,-1271.7904C4412.1241,-1263.5569 4134.1442,-1244.1821 4096,-1222.0022 4050.673,-1195.6456 4020.2062,-1140.1876 4005.0949,-1106.6381"/>
<polygon fill="#000000" stroke="#000000" points="4008.2704,-1105.1637 4001.0692,-1097.3924 4001.8524,-1107.9582 4008.2704,-1105.1637"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="4137" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4137" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4548.058,-1271.3199C4430.5267,-1263.1457 4209.5573,-1244.9348 4182,-1222.0022 4148.2308,-1193.9002 4139.4332,-1140.6733 4137.3557,-1107.7092"/>
<polygon fill="#000000" stroke="#000000" points="4140.8363,-1107.2019 4136.8825,-1097.3725 4133.8436,-1107.5221 4140.8363,-1107.2019"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="4278" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4278" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 155&#45;208</text>
</g>
<!-- section_17&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4555.376,-1267.0908C4493.0939,-1257.6565 4404.8444,-1241.4534 4376,-1222.0022 4333.5061,-1193.3463 4304.1671,-1139.5386 4289.2948,-1106.75"/>
<polygon fill="#000000" stroke="#000000" points="4292.3705,-1105.0491 4285.1451,-1097.3002 4285.9612,-1107.8636 4292.3705,-1105.0491"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="4417" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4417" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4584.9944,-1260.1793C4565.9394,-1250.7587 4542.8579,-1237.6017 4525,-1222.0022 4485.3101,-1187.3316 4450.8401,-1135.9412 4432.0721,-1105.1612"/>
<polygon fill="#000000" stroke="#000000" points="4434.9091,-1103.0865 4426.7633,-1096.3118 4428.9064,-1106.6876 4434.9091,-1103.0865"/>
</g>
<!-- codeblock_49 -->
<g id="node50" class="node">
<title>codeblock_49</title>
<ellipse fill="none" stroke="#000000" cx="4621" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4621" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 213&#45;217</text>
</g>
<!-- section_17&#45;&gt;codeblock_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;codeblock_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4621,-1257.8312C4621,-1223.3979 4621,-1148.4249 4621,-1107.3696"/>
<polygon fill="#000000" stroke="#000000" points="4624.5001,-1107.2289 4621,-1097.229 4617.5001,-1107.229 4624.5001,-1107.2289"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="4825" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4825" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4657.0056,-1260.1793C4676.0606,-1250.7587 4699.1421,-1237.6017 4717,-1222.0022 4756.6899,-1187.3316 4791.1599,-1135.9412 4809.9279,-1105.1612"/>
<polygon fill="#000000" stroke="#000000" points="4813.0936,-1106.6876 4815.2367,-1096.3118 4807.0909,-1103.0865 4813.0936,-1106.6876"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="5067" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5067" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 221&#45;228</text>
</g>
<!-- section_17&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4689.5821,-1268.372C4740.022,-1261.0004 4809.3636,-1247.1239 4866,-1222.0022 4934.5888,-1191.5788 5003.4637,-1135.8431 5040.0912,-1103.7073"/>
<polygon fill="#000000" stroke="#000000" points="5042.6737,-1106.0952 5047.8343,-1096.8421 5038.0298,-1100.8574 5042.6737,-1106.0952"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="5329" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5329" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_17&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.0656,-1274.0777C4824.587,-1269.8671 5080.8681,-1257.215 5163,-1222.0022 5224.8619,-1195.4798 5280.5355,-1137.3205 5309.0054,-1103.951"/>
<polygon fill="#000000" stroke="#000000" points="5311.8997,-1105.9466 5315.6446,-1096.0357 5306.5365,-1101.4481 5311.8997,-1105.9466"/>
</g>
<!-- codeblock_53 -->
<g id="node54" class="node">
<title>codeblock_53</title>
<ellipse fill="none" stroke="#000000" cx="5595" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5595" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 233&#45;240</text>
</g>
<!-- section_17&#45;&gt;codeblock_53 -->
<g id="edge53" class="edge">
<title>section_17&#45;&gt;codeblock_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.6106,-1275.2258C4861.1041,-1272.7815 5246.5881,-1262.7496 5370,-1222.0022 5448.5192,-1196.0772 5527.0474,-1136.721 5567.3165,-1103.235"/>
<polygon fill="#000000" stroke="#000000" points="5569.6831,-1105.8179 5575.0821,-1096.7018 5565.1767,-1100.4614 5569.6831,-1105.8179"/>
</g>
<!-- prose_54 -->
<g id="node55" class="node">
<title>prose_54</title>
<ellipse fill="none" stroke="#000000" cx="5863" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5863" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_54 -->
<g id="edge54" class="edge">
<title>section_17&#45;&gt;prose_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.4174,-1274.9454C4924.838,-1271.3629 5599.1025,-1257.8402 5691,-1222.0022 5755.3531,-1196.9059 5813.3365,-1137.6679 5842.7194,-1103.8681"/>
<polygon fill="#000000" stroke="#000000" points="5845.7265,-1105.7364 5849.5598,-1095.8593 5840.4038,-1101.1901 5845.7265,-1105.7364"/>
</g>
<!-- codeblock_55 -->
<g id="node56" class="node">
<title>codeblock_55</title>
<ellipse fill="none" stroke="#000000" cx="6130" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6130" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 244&#45;271</text>
</g>
<!-- section_17&#45;&gt;codeblock_55 -->
<g id="edge55" class="edge">
<title>section_17&#45;&gt;codeblock_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.7653,-1275.0897C4954.7063,-1271.6693 5789.0946,-1257.9182 5904,-1222.0022 5983.3802,-1197.1903 6062.3418,-1137.1191 6102.593,-1103.2918"/>
<polygon fill="#000000" stroke="#000000" points="6104.9995,-1105.8397 6110.3484,-1096.6942 6100.4638,-1100.508 6104.9995,-1105.8397"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="6391" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6391" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>section_17&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.4157,-1274.8638C5004.4292,-1270.0347 6154.1134,-1250.1899 6226,-1222.0022 6288.7713,-1197.3887 6343.9904,-1137.9625 6371.8342,-1104.0029"/>
<polygon fill="#000000" stroke="#000000" points="6374.7684,-1105.9394 6378.3113,-1095.9545 6369.315,-1101.5507 6374.7684,-1105.9394"/>
</g>
<!-- codeblock_57 -->
<g id="node58" class="node">
<title>codeblock_57</title>
<ellipse fill="none" stroke="#000000" cx="6591" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6591" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 276&#45;280</text>
</g>
<!-- section_17&#45;&gt;codeblock_57 -->
<g id="edge57" class="edge">
<title>section_17&#45;&gt;codeblock_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.6498,-1275.1983C5029.4469,-1271.4765 6350.3774,-1254.6947 6432,-1222.0022 6492.6652,-1197.7039 6545.0978,-1139.2279 6571.9234,-1105.0843"/>
<polygon fill="#000000" stroke="#000000" points="6574.8496,-1107.021 6578.1812,-1096.9636 6569.3049,-1102.7483 6574.8496,-1107.021"/>
</g>
<!-- prose_58 -->
<g id="node59" class="node">
<title>prose_58</title>
<ellipse fill="none" stroke="#000000" cx="6760" cy="-1079.1019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6760" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_58 -->
<g id="edge58" class="edge">
<title>section_17&#45;&gt;prose_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.4799,-1275.0798C5063.3057,-1270.4678 6644.0755,-1249.0527 6687,-1222.0022 6727.4081,-1196.5375 6746.4341,-1141.0886 6754.5941,-1107.2379"/>
<polygon fill="#000000" stroke="#000000" points="6758.1008,-1107.5954 6756.875,-1097.0718 6751.2706,-1106.063 6758.1008,-1107.5954"/>
</g>
<!-- codeblock_59 -->
<g id="node60" class="node">
<title>codeblock_59</title>
<ellipse fill="none" stroke="#000000" cx="6913" cy="-1079.1019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6913" y="-1074.9019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 286&#45;288</text>
</g>
<!-- section_17&#45;&gt;codeblock_59 -->
<g id="edge59" class="edge">
<title>section_17&#45;&gt;codeblock_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4696.4265,-1275.0125C5075.1327,-1269.9352 6752.9873,-1246.1138 6801,-1222.0022 6849.84,-1197.4751 6883.8988,-1140.6213 6900.795,-1106.4804"/>
<polygon fill="#000000" stroke="#000000" points="6904.131,-1107.6177 6905.2946,-1097.0869 6897.8179,-1104.5936 6904.131,-1107.6177"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="166.5,-515.7029 31.5,-515.7029 31.5,-475.8988 166.5,-475.8988 166.5,-515.7029"/>
<text text-anchor="middle" x="99" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M99,-1061.0053C99,-977.7088 99,-630.7957 99,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="102.5001,-525.7461 99,-515.7462 95.5001,-525.7462 102.5001,-525.7461"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="602.5,-515.7029 495.5,-515.7029 495.5,-475.8988 602.5,-475.8988 602.5,-515.7029"/>
<text text-anchor="middle" x="549" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M549,-1061.0053C549,-977.7088 549,-630.7957 549,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="552.5001,-525.7461 549,-515.7462 545.5001,-525.7462 552.5001,-525.7461"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="777.5,-515.7029 656.5,-515.7029 656.5,-475.8988 777.5,-475.8988 777.5,-515.7029"/>
<text text-anchor="middle" x="717" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M759.6349,-1061.0053C753.3516,-977.7088 727.183,-630.7957 719.2739,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="722.7469,-525.4546 718.5045,-515.7462 715.7667,-525.9812 722.7469,-525.4546"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1252.5,-515.7029 795.5,-515.7029 795.5,-475.8988 1252.5,-475.8988 1252.5,-515.7029"/>
<text text-anchor="middle" x="1024" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- raw_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1075.3557,-1061.0053C1067.7872,-977.7088 1036.2659,-630.7957 1026.7391,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="1030.2029,-525.3884 1025.8123,-515.7462 1023.2316,-526.0219 1030.2029,-525.3884"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1755.5,-523.1013 1270.5,-523.1013 1270.5,-468.5004 1755.5,-468.5004 1755.5,-523.1013"/>
<text text-anchor="middle" x="1513" y="-492.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="1513" y="-476.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1478.1169,-1061.0053C1483.1411,-979.5984 1503.7054,-646.3998 1510.6764,-533.4495"/>
<polygon fill="#000000" stroke="#000000" points="1514.1849,-533.4188 1511.3076,-523.2222 1507.1982,-532.9876 1514.1849,-533.4188"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2160.5,-515.7029 1773.5,-515.7029 1773.5,-475.8988 2160.5,-475.8988 2160.5,-515.7029"/>
<text text-anchor="middle" x="1967" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1893.3579,-1061.0053C1904.2108,-977.7088 1949.4111,-630.7957 1963.0723,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="1966.5798,-526.1146 1964.4013,-515.7462 1959.6385,-525.2101 1966.5798,-526.1146"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2483.5,-515.7029 2250.5,-515.7029 2250.5,-475.8988 2483.5,-475.8988 2483.5,-515.7029"/>
<text text-anchor="middle" x="2367" y="-484.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.8831,-1061.0053C2396.7423,-977.7088 2375.3316,-630.7957 2368.8605,-525.946"/>
<polygon fill="#000000" stroke="#000000" points="2372.3404,-525.5116 2368.231,-515.7462 2365.3537,-525.9428 2372.3404,-525.5116"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="2556,-513.8008 2502,-513.8008 2502,-477.8008 2556,-477.8008 2556,-513.8008"/>
</g>
<!-- header_40&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>header_40&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3022.2085,-1060.7534C3002.4745,-1029.1007 2957.2782,-964.8774 2900,-936.2017 2833.0486,-902.6832 2617.4575,-953.6262 2565,-900.2017 2463.0954,-796.4186 2502.083,-597.1935 2521.0383,-523.8219"/>
<polygon fill="#000000" stroke="#000000" points="2524.4796,-524.5 2523.6705,-513.9361 2517.7153,-522.6989 2524.4796,-524.5"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="2601" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="2601" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_41&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_41&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3322.5576,-1063.45C3288.9848,-1032.6063 3208.7922,-964.5121 3127,-936.2017 3023.8233,-900.4895 2714.7976,-976.8066 2637,-900.2017 2533.1212,-797.9154 2573.5958,-596.9398 2592.9768,-523.5078"/>
<polygon fill="#000000" stroke="#000000" points="2596.4173,-524.1939 2595.6636,-513.6259 2589.6625,-522.3573 2596.4173,-524.1939"/>
</g>
<!-- raw_63 -->
<g id="node64" class="node">
<title>raw_63</title>
<ellipse fill="none" stroke="#000000" cx="2673" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="2673" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_63 -->
<g id="edge63" class="edge">
<title>prose_42&#45;&gt;raw_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3496.892,-1061.7153C3479.2341,-1030.0733 3437.0101,-963.8027 3380,-936.2017 3312.7988,-903.6666 2762.7152,-952.0593 2709,-900.2017 2604.1168,-798.9455 2645.21,-597.3356 2664.8657,-523.6218"/>
<polygon fill="#000000" stroke="#000000" points="2668.3169,-524.271 2667.5902,-513.7012 2661.5668,-522.4172 2668.3169,-524.271"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="3231.5,-661.8015 2718.5,-661.8015 2718.5,-329.8002 3231.5,-329.8002 3231.5,-661.8015"/>
<text text-anchor="middle" x="2975" y="-646.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="2975" y="-631.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="2975" y="-615.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="2975" y="-600.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="2975" y="-585.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="2975" y="-569.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="2975" y="-554.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="2975" y="-538.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2975" y="-523.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="2975" y="-508.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="2975" y="-492.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2975" y="-477.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="2975" y="-461.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="2975" y="-446.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="2975" y="-431.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="2975" y="-415.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2975" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2975" y="-368.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="2975" y="-353.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="2975" y="-338.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>codeblock_43&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3674.4759,-1060.8062C3653.4713,-1029.2351 3605.6661,-965.1342 3547,-936.2017 3424.1854,-875.6329 3357.5244,-972.1326 3241,-900.2017 3154.844,-847.0172 3090.8651,-754.3175 3047.2723,-671.0785"/>
<polygon fill="#000000" stroke="#000000" points="3050.2902,-669.2948 3042.5882,-662.0195 3044.0722,-672.5099 3050.2902,-669.2948"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="3277" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="3277" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_44&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_44&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3842.907,-1060.9456C3838.2301,-1029.5902 3823.8224,-965.8126 3782,-936.2017 3696.6892,-875.8002 3387.3617,-973.6633 3313,-900.2017 3209.2886,-797.7456 3249.6601,-596.8746 3268.9954,-523.489"/>
<polygon fill="#000000" stroke="#000000" points="3272.4341,-524.1812 3271.6758,-513.6135 3265.6785,-522.3475 3272.4341,-524.1812"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="3709.5,-615.3013 3322.5,-615.3013 3322.5,-376.3004 3709.5,-376.3004 3709.5,-615.3013"/>
<text text-anchor="middle" x="3516" y="-600.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="3516" y="-584.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="3516" y="-569.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="3516" y="-553.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="3516" y="-538.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3516" y="-523.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="3516" y="-507.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="3516" y="-492.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3516" y="-476.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="3516" y="-461.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="3516" y="-446.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="3516" y="-430.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="3516" y="-415.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="3516" y="-399.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3516" y="-384.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_45&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3985.6198,-1060.8673C3970.4274,-1029.9757 3935.2843,-967.6501 3886,-936.2017 3821.9936,-895.359 3779.031,-946.6905 3719,-900.2017 3631.0569,-832.0972 3578.2953,-715.6192 3548.7006,-625.111"/>
<polygon fill="#000000" stroke="#000000" points="3551.9477,-623.775 3545.5573,-615.3244 3545.2831,-625.9157 3551.9477,-623.775"/>
</g>
<!-- raw_69 -->
<g id="node70" class="node">
<title>raw_69</title>
<ellipse fill="none" stroke="#000000" cx="3755" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="3755" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_46&#45;&gt;raw_69 -->
<g id="edge69" class="edge">
<title>prose_46&#45;&gt;raw_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4136.8522,-1060.7973C4135.5236,-1029.8002 4127.9787,-967.3197 4090,-936.2017 3986.4665,-851.3708 3884.1651,-996.3043 3791,-900.2017 3689.7603,-795.7699 3728.3409,-596.9419 3747.1133,-523.7487"/>
<polygon fill="#000000" stroke="#000000" points="3750.5481,-524.45 3749.7203,-513.8875 3743.7806,-522.6608 3750.5481,-524.45"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="4306,-900.1025 3800,-900.1025 3800,-91.4992 4306,-91.4992 4306,-900.1025"/>
<text text-anchor="middle" x="4053" y="-885.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="4053" y="-869.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="4053" y="-854.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="4053" y="-838.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="4053" y="-823.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="4053" y="-808.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="4053" y="-792.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="4053" y="-777.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="4053" y="-761.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="4053" y="-746.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="4053" y="-731.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="4053" y="-715.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4053" y="-700.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="4053" y="-684.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="4053" y="-669.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="4053" y="-654.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="4053" y="-638.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="4053" y="-623.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="4053" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="4053" y="-592.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="4053" y="-577.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="4053" y="-561.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="4053" y="-546.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="4053" y="-530.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4053" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4053" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="4053" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="4053" y="-469.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="4053" y="-453.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="4053" y="-438.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="4053" y="-423.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="4053" y="-407.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="4053" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4053" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="4053" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="4053" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4053" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="4053" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4053" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="4053" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="4053" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="4053" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4053" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4053" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="4053" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="4053" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="4053" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="4053" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4053" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="4053" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="4053" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="4053" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>codeblock_47&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4271.0195,-1061.0053C4260.3753,-1033.4108 4238.5715,-976.8855 4212.6997,-909.8141"/>
<polygon fill="#000000" stroke="#000000" points="4215.8872,-908.3523 4209.0228,-900.282 4209.3563,-910.8716 4215.8872,-908.3523"/>
</g>
<!-- raw_72 -->
<g id="node73" class="node">
<title>raw_72</title>
<ellipse fill="none" stroke="#000000" cx="4351" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="4351" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_48&#45;&gt;raw_72 -->
<g id="edge72" class="edge">
<title>prose_48&#45;&gt;raw_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4413.5144,-1061.1411C4407.3798,-1028.9829 4394.5864,-959.3962 4387,-900.2017 4368.9635,-759.4685 4357.0335,-590.0227 4352.7583,-524.0299"/>
<polygon fill="#000000" stroke="#000000" points="4356.2476,-523.7489 4352.1158,-513.993 4349.2619,-524.1962 4356.2476,-523.7489"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="4846,-523.0013 4396,-523.0013 4396,-468.6004 4846,-468.6004 4846,-523.0013"/>
<text text-anchor="middle" x="4621" y="-507.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="4621" y="-492.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="4621" y="-476.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_49&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>codeblock_49&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4621,-1061.0053C4621,-979.5984 4621,-646.3998 4621,-533.4495"/>
<polygon fill="#000000" stroke="#000000" points="4624.5001,-533.2222 4621,-523.2222 4617.5001,-533.2222 4624.5001,-533.2222"/>
</g>
<!-- raw_75 -->
<g id="node76" class="node">
<title>raw_75</title>
<ellipse fill="none" stroke="#000000" cx="4891" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="4891" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_50&#45;&gt;raw_75 -->
<g id="edge75" class="edge">
<title>prose_50&#45;&gt;raw_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4828.4856,-1061.1411C4834.6202,-1028.9829 4847.4136,-959.3962 4855,-900.2017 4873.0365,-759.4685 4884.9665,-590.0227 4889.2417,-524.0299"/>
<polygon fill="#000000" stroke="#000000" points="4892.7381,-524.1962 4889.8842,-513.993 4885.7524,-523.7489 4892.7381,-524.1962"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="5407.5,-546.2018 4936.5,-546.2018 4936.5,-445.3999 5407.5,-445.3999 5407.5,-546.2018"/>
<text text-anchor="middle" x="5172" y="-530.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="5172" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="5172" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="5172" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="5172" y="-469.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="5172" y="-453.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>codeblock_51&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5070.2576,-1061.0053C5084.025,-984.524 5137.7985,-685.7989 5161.1156,-556.2663"/>
<polygon fill="#000000" stroke="#000000" points="5164.6145,-556.5845 5162.9416,-546.1226 5157.7252,-555.3443 5164.6145,-556.5845"/>
</g>
<!-- raw_78 -->
<g id="node79" class="node">
<title>raw_78</title>
<ellipse fill="none" stroke="#000000" cx="5453" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="5453" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_78 -->
<g id="edge78" class="edge">
<title>prose_52&#45;&gt;raw_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5340.1556,-1061.6744C5359.4026,-1030.6247 5398.4674,-963.0779 5416,-900.2017 5454.2077,-763.1793 5455.1722,-590.9377 5453.8661,-524.1099"/>
<polygon fill="#000000" stroke="#000000" points="5457.3617,-523.8703 5453.6329,-513.9533 5450.3635,-524.0311 5457.3617,-523.8703"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="5948,-546.2018 5498,-546.2018 5498,-445.3999 5948,-445.3999 5948,-546.2018"/>
<text text-anchor="middle" x="5723" y="-530.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="5723" y="-515.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="5723" y="-500.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="5723" y="-484.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="5723" y="-469.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="5723" y="-453.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_53&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>codeblock_53&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5598.9711,-1061.0053C5615.7542,-984.524 5681.3067,-685.7989 5709.7314,-556.2663"/>
<polygon fill="#000000" stroke="#000000" points="5713.2325,-556.6404 5711.9574,-546.1226 5706.3952,-555.14 5713.2325,-556.6404"/>
</g>
<!-- raw_81 -->
<g id="node82" class="node">
<title>raw_81</title>
<ellipse fill="none" stroke="#000000" cx="5993" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="5993" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_54&#45;&gt;raw_81 -->
<g id="edge81" class="edge">
<title>prose_54&#45;&gt;raw_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5874.7685,-1062.3118C5895.5142,-1031.7213 5938.1751,-964.1508 5957,-900.2017 5997.1612,-763.7719 5996.3787,-591.1888 5994.2448,-524.1897"/>
<polygon fill="#000000" stroke="#000000" points="5997.7359,-523.8756 5993.8827,-514.0063 5990.7403,-524.1244 5997.7359,-523.8756"/>
</g>
<!-- leaf_83 -->
<g id="node84" class="node">
<title>leaf_83</title>
<polygon fill="none" stroke="#c0c0c0" points="6481.5,-700.4018 6038.5,-700.4018 6038.5,-291.1999 6481.5,-291.1999 6481.5,-700.4018"/>
<text text-anchor="middle" x="6260" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="6260" y="-654.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="6260" y="-622.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="6260" y="-607.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="6260" y="-591.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="6260" y="-576.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="6260" y="-561.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="6260" y="-545.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="6260" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="6260" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="6260" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="6260" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6260" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="6260" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="6260" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="6260" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="6260" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6260" y="-391.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6260" y="-376.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6260" y="-360.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="6260" y="-345.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="6260" y="-330.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="6260" y="-314.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="6260" y="-299.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_55&#45;&gt;leaf_83 -->
<g id="edge83" class="edge">
<title>codeblock_55&#45;&gt;leaf_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.0332,-1061.0053C6145.8983,-1007.7674 6181.7634,-846.8429 6212.2041,-710.2577"/>
<polygon fill="#000000" stroke="#000000" points="6215.6268,-710.9894 6214.3861,-700.4675 6208.7945,-709.4666 6215.6268,-710.9894"/>
</g>
<!-- raw_84 -->
<g id="node85" class="node">
<title>raw_84</title>
<ellipse fill="none" stroke="#000000" cx="6527" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="6527" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_56&#45;&gt;raw_84 -->
<g id="edge84" class="edge">
<title>prose_56&#45;&gt;raw_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6403.3948,-1062.4148C6425.2447,-1031.9878 6470.1757,-964.6677 6490,-900.2017 6531.8116,-764.2357 6530.6991,-591.3853 6528.3514,-524.2522"/>
<polygon fill="#000000" stroke="#000000" points="6531.8406,-523.9043 6527.955,-514.0477 6524.8459,-524.1761 6531.8406,-523.9043"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="6791.5,-523.0013 6572.5,-523.0013 6572.5,-468.6004 6791.5,-468.6004 6791.5,-523.0013"/>
<text text-anchor="middle" x="6682" y="-507.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="6682" y="-492.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="6682" y="-476.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_57&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>codeblock_57&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6593.8232,-1061.0053C6606.5362,-979.5164 6658.6101,-645.7278 6676.1797,-533.1086"/>
<polygon fill="#000000" stroke="#000000" points="6679.6387,-533.6422 6677.722,-523.2222 6672.7223,-532.5631 6679.6387,-533.6422"/>
</g>
<!-- raw_87 -->
<g id="node88" class="node">
<title>raw_87</title>
<ellipse fill="none" stroke="#000000" cx="6837" cy="-495.8008" rx="27" ry="18"/>
<text text-anchor="middle" x="6837" y="-491.6008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_58&#45;&gt;raw_87 -->
<g id="edge87" class="edge">
<title>prose_58&#45;&gt;raw_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6764.803,-1061.2194C6773.2262,-1029.184 6790.6533,-959.7832 6800,-900.2017 6821.9938,-760.0006 6832.2761,-590.2502 6835.6663,-524.1028"/>
<polygon fill="#000000" stroke="#000000" points="6839.1655,-524.204 6836.1693,-514.0417 6832.1743,-523.8544 6839.1655,-524.204"/>
</g>
<!-- leaf_89 -->
<g id="node90" class="node">
<title>leaf_89</title>
<polygon fill="none" stroke="#c0c0c0" points="6975.5,-513.8008 6882.5,-513.8008 6882.5,-477.8008 6975.5,-477.8008 6975.5,-513.8008"/>
<text text-anchor="middle" x="6929" y="-492.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_59&#45;&gt;leaf_89 -->
<g id="edge89" class="edge">
<title>codeblock_59&#45;&gt;leaf_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6913.4964,-1061.0053C6915.7942,-977.2364 6925.4052,-626.8525 6928.2214,-524.1856"/>
<polygon fill="#000000" stroke="#000000" points="6931.7259,-524.0667 6928.5015,-513.9744 6924.7285,-523.8747 6931.7259,-524.0667"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="2663.5,-55.6015 2248.5,-55.6015 2248.5,.2015 2663.5,.2015 2663.5,-55.6015"/>
<text text-anchor="middle" x="2456" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- raw_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2604.7728,-477.8516C2616.3968,-417.6277 2646.1851,-219.3645 2565,-91.4 2557.3201,-79.2949 2546.4493,-69.2172 2534.5195,-60.9211"/>
<polygon fill="#000000" stroke="#000000" points="2536.4093,-57.975 2526.1174,-55.4592 2532.5941,-63.844 2536.4093,-57.975"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="2956.5,-55.6015 2681.5,-55.6015 2681.5,.2015 2956.5,.2015 2956.5,-55.6015"/>
<text text-anchor="middle" x="2819" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- raw_63&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>raw_63&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2669.2077,-477.8392C2657.5219,-417.576 2627.5611,-219.2031 2709,-91.4 2716.7085,-79.303 2727.5941,-69.2423 2739.5464,-60.9638"/>
<polygon fill="#000000" stroke="#000000" points="2741.4726,-63.8863 2747.9655,-55.5142 2737.6688,-58.0099 2741.4726,-63.8863"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="3400.5,-47.6021 3153.5,-47.6021 3153.5,-7.7979 3400.5,-7.7979 3400.5,-47.6021"/>
<text text-anchor="middle" x="3277" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- raw_66&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>raw_66&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3277,-477.7376C3277,-406.7689 3277,-146.6119 3277,-57.7137"/>
<polygon fill="#000000" stroke="#000000" points="3280.5001,-57.51 3277,-47.5101 3273.5001,-57.5101 3280.5001,-57.51"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="3980,-55.0004 3530,-55.0004 3530,-.3996 3980,-.3996 3980,-55.0004"/>
<text text-anchor="middle" x="3755" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="3755" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- raw_69&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>raw_69&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3755,-477.7376C3755,-408.6664 3755,-160.3885 3755,-65.2049"/>
<polygon fill="#000000" stroke="#000000" points="3758.5001,-65.1632 3755,-55.1633 3751.5001,-65.1633 3758.5001,-65.1632"/>
</g>
<!-- leaf_73 -->
<g id="node74" class="node">
<title>leaf_73</title>
<polygon fill="none" stroke="#c0c0c0" points="4590,-55.0004 4112,-55.0004 4112,-.3996 4590,-.3996 4590,-55.0004"/>
<text text-anchor="middle" x="4351" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="4351" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- raw_72&#45;&gt;leaf_73 -->
<g id="edge73" class="edge">
<title>raw_72&#45;&gt;leaf_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4351,-477.7376C4351,-408.6664 4351,-160.3885 4351,-65.2049"/>
<polygon fill="#000000" stroke="#000000" points="4354.5001,-65.1632 4351,-55.1633 4347.5001,-65.1633 4354.5001,-65.1632"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="5133.5,-47.6021 4648.5,-47.6021 4648.5,-7.7979 5133.5,-7.7979 5133.5,-47.6021"/>
<text text-anchor="middle" x="4891" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- raw_75&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>raw_75&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4891,-477.7376C4891,-406.7689 4891,-146.6119 4891,-57.7137"/>
<polygon fill="#000000" stroke="#000000" points="4894.5001,-57.51 4891,-47.5101 4887.5001,-57.5101 4894.5001,-57.51"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="5699,-55.0004 5207,-55.0004 5207,-.3996 5699,-.3996 5699,-55.0004"/>
<text text-anchor="middle" x="5453" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="5453" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- raw_78&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>raw_78&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5453,-477.7376C5453,-408.6664 5453,-160.3885 5453,-65.2049"/>
<polygon fill="#000000" stroke="#000000" points="5456.5001,-65.1632 5453,-55.1633 5449.5001,-65.1633 5456.5001,-65.1632"/>
</g>
<!-- leaf_82 -->
<g id="node83" class="node">
<title>leaf_82</title>
<polygon fill="none" stroke="#c0c0c0" points="6214.5,-47.6021 5771.5,-47.6021 5771.5,-7.7979 6214.5,-7.7979 6214.5,-47.6021"/>
<text text-anchor="middle" x="5993" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- raw_81&#45;&gt;leaf_82 -->
<g id="edge82" class="edge">
<title>raw_81&#45;&gt;leaf_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5993,-477.7376C5993,-406.7689 5993,-146.6119 5993,-57.7137"/>
<polygon fill="#000000" stroke="#000000" points="5996.5001,-57.51 5993,-47.5101 5989.5001,-57.5101 5996.5001,-57.51"/>
</g>
<!-- leaf_85 -->
<g id="node86" class="node">
<title>leaf_85</title>
<polygon fill="none" stroke="#c0c0c0" points="6744.5,-55.0004 6301.5,-55.0004 6301.5,-.3996 6744.5,-.3996 6744.5,-55.0004"/>
<text text-anchor="middle" x="6523" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="6523" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- raw_84&#45;&gt;leaf_85 -->
<g id="edge85" class="edge">
<title>raw_84&#45;&gt;leaf_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6526.8456,-477.7376C6526.2554,-408.6664 6524.1338,-160.3885 6523.3205,-65.2049"/>
<polygon fill="#000000" stroke="#000000" points="6526.8201,-65.1329 6523.2347,-55.1633 6519.8204,-65.1928 6526.8201,-65.1329"/>
</g>
<!-- leaf_88 -->
<g id="node89" class="node">
<title>leaf_88</title>
<polygon fill="none" stroke="#c0c0c0" points="6919,-47.6021 6763,-47.6021 6763,-7.7979 6919,-7.7979 6919,-47.6021"/>
<text text-anchor="middle" x="6841" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- raw_87&#45;&gt;leaf_88 -->
<g id="edge88" class="edge">
<title>raw_87&#45;&gt;leaf_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6837.1544,-477.7376C6837.7608,-406.7689 6839.9839,-146.6119 6840.7435,-57.7137"/>
<polygon fill="#000000" stroke="#000000" points="6844.245,-57.5397 6840.8307,-47.5101 6837.2453,-57.4798 6844.245,-57.5397"/>
</g>
</g>
</svg>