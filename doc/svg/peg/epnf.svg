<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="9457pt" height="1355pt"
 viewBox="0.00 0.00 9456.80 1354.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1350.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1350.6022 9452.7972,-1350.6022 9452.7972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1328.6022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1324.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 289</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1744.5" cy="-1256.6022" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1744.5" y="-1252.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;100</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1744.5,-1310.4335C1744.5,-1302.7331 1744.5,-1293.5765 1744.5,-1285.0188"/>
<polygon fill="#000000" stroke="#000000" points="1748.0001,-1285.0154 1744.5,-1275.0154 1741.0001,-1285.0155 1748.0001,-1285.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="845.5" cy="-1184.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="845.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1678.8744,-1255.8742C1504.3224,-1253.4009 1031.7094,-1243.0551 881.5,-1202.6022 879.5264,-1202.0706 877.5338,-1201.4256 875.5524,-1200.6999"/>
<polygon fill="#000000" stroke="#000000" points="876.4473,-1197.2755 865.8772,-1196.5517 873.6889,-1203.7091 876.4473,-1197.2755"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="922.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="922.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1679.0769,-1254.9665C1516.6813,-1250.4438 1098.5262,-1235.8401 963.5,-1202.6022 961.0562,-1202.0006 958.5747,-1201.2633 956.1043,-1200.4342"/>
<polygon fill="#000000" stroke="#000000" points="957.3244,-1197.1537 946.7332,-1196.8747 954.8387,-1203.6975 957.3244,-1197.1537"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1045.5" cy="-1184.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1045.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;23</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1679.3249,-1253.662C1566.4121,-1247.9529 1327.3304,-1233.1494 1127.5,-1202.6022 1121.1651,-1201.6338 1114.5874,-1200.467 1108.0371,-1199.1987"/>
<polygon fill="#000000" stroke="#000000" points="1108.2997,-1195.6813 1097.8052,-1197.1358 1106.9162,-1202.5432 1108.2997,-1195.6813"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1168.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1168.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1680.1628,-1252.5504C1558.2071,-1244.4652 1297.7865,-1225.154 1210.5,-1202.6022 1207.8549,-1201.9188 1205.1614,-1201.0935 1202.4804,-1200.1769"/>
<polygon fill="#000000" stroke="#000000" points="1203.5261,-1196.8301 1192.935,-1196.5479 1201.0385,-1203.3732 1203.5261,-1196.8301"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1296.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1296.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1685.2437,-1248.7667C1613.5877,-1239.0545 1489.4056,-1221.4638 1383.5,-1202.6022 1376.9704,-1201.4392 1370.1798,-1200.1592 1363.4,-1198.8341"/>
<polygon fill="#000000" stroke="#000000" points="1363.9966,-1195.3843 1353.5063,-1196.8688 1362.6328,-1202.2501 1363.9966,-1195.3843"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="1424.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1424.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1685.0317,-1248.8015C1628.1239,-1240.4627 1540.28,-1225.2936 1466.5,-1202.6022 1464.0451,-1201.8471 1461.5395,-1200.9952 1459.0351,-1200.083"/>
<polygon fill="#000000" stroke="#000000" points="1460.0802,-1196.7334 1449.4926,-1196.3429 1457.5258,-1203.2507 1460.0802,-1196.7334"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1552.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1552.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;35</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1705.6459,-1242.0319C1676.1528,-1230.972 1635.3457,-1215.6693 1603.2707,-1203.6412"/>
<polygon fill="#000000" stroke="#000000" points="1604.2111,-1200.2559 1593.6189,-1200.0217 1601.7532,-1206.8102 1604.2111,-1200.2559"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1680.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1680.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1728.6798,-1238.8044C1720.6184,-1229.7353 1710.6979,-1218.5748 1701.9584,-1208.7428"/>
<polygon fill="#000000" stroke="#000000" points="1704.5204,-1206.3568 1695.2607,-1201.208 1699.2885,-1211.0074 1704.5204,-1206.3568"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1808.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1808.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 39&#45;43</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1760.3202,-1238.8044C1768.0126,-1230.1504 1777.3978,-1219.5921 1785.8344,-1210.101"/>
<polygon fill="#000000" stroke="#000000" points="1788.6122,-1212.2441 1792.64,-1202.4447 1783.3803,-1207.5935 1788.6122,-1212.2441"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="2080.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2080.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1796.2636,-1245.5099C1863.434,-1231.1163 1979.2289,-1206.3031 2040.2247,-1193.2326"/>
<polygon fill="#000000" stroke="#000000" points="2041.1959,-1196.604 2050.2406,-1191.0863 2039.7292,-1189.7594 2041.1959,-1196.604"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="2428.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2428.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;66</text>
</g>
<!-- section_1&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1805.8024,-1250.1493C1929.5244,-1237.1259 2209.0629,-1207.7008 2347.5773,-1193.1203"/>
<polygon fill="#000000" stroke="#000000" points="2348.128,-1196.5818 2357.7066,-1192.0541 2347.3952,-1189.6203 2348.128,-1196.5818"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="2789.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2789.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1808.2964,-1252.2066C2002.7723,-1238.8073 2584.7632,-1198.7084 2747.062,-1187.5261"/>
<polygon fill="#000000" stroke="#000000" points="2747.4011,-1191.0111 2757.1368,-1186.832 2746.9199,-1184.0277 2747.4011,-1191.0111"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="3181.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3181.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 70&#45;81</text>
</g>
<!-- section_1&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1809.3779,-1253.4114C1977.8442,-1245.1185 2443.062,-1222.1689 2830.5,-1202.6022 2920.9648,-1198.0334 3024.5397,-1192.7106 3095.6003,-1189.0446"/>
<polygon fill="#000000" stroke="#000000" points="3096.037,-1192.5268 3105.8433,-1188.516 3095.6762,-1185.5361 3096.037,-1192.5268"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="3550.5" cy="-1184.6022" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3550.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1810.2127,-1254.9318C2021.6822,-1249.4151 2703.6522,-1230.5242 3267.5,-1202.6022 3352.9586,-1198.3702 3452.818,-1191.5881 3508.1363,-1187.6689"/>
<polygon fill="#000000" stroke="#000000" points="3508.5349,-1191.1495 3518.2611,-1186.9483 3508.0378,-1184.1672 3508.5349,-1191.1495"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="3912.5" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3912.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 85&#45;99</text>
</g>
<!-- section_1&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1810.3702,-1255.3144C2049.5665,-1250.5026 2894.8014,-1232.315 3591.5,-1202.6022 3671.5629,-1199.1876 3762.7842,-1193.9417 3827.4672,-1189.9924"/>
<polygon fill="#000000" stroke="#000000" points="3827.8477,-1193.4757 3837.6148,-1189.3702 3827.4193,-1186.4888 3827.8477,-1193.4757"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-1184.6022" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 101&#45;289</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1810.3344,-1255.3902C2274.0359,-1246.8536 5045.5638,-1195.8308 5569.9234,-1186.1776"/>
<polygon fill="#000000" stroke="#000000" points="5570.1296,-1189.6745 5580.0635,-1185.9909 5570.0007,-1182.6757 5570.1296,-1189.6745"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="135,-1007.604 0,-1007.604 0,-967.7998 135,-967.7998 135,-1007.604"/>
<text text-anchor="middle" x="67.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- prose_3&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_3&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M898.7245,-1172.4275C893.2007,-1170.0925 887.2509,-1167.9561 881.5,-1166.6022 801.5872,-1147.7886 212.8222,-1174.5843 143.5,-1130.6022 103.5053,-1105.2271 83.2294,-1051.3135 74.0445,-1017.4451"/>
<polygon fill="#000000" stroke="#000000" points="77.4043,-1016.4557 71.5406,-1007.6315 70.6216,-1018.1864 77.4043,-1016.4557"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="512,-1130.5025 153,-1130.5025 153,-844.9013 512,-844.9013 512,-1130.5025"/>
<text text-anchor="middle" x="332.5" y="-1115.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="332.5" y="-1100.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="332.5" y="-1084.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="332.5" y="-1069.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="332.5" y="-1053.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="332.5" y="-1038.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="332.5" y="-1023.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="332.5" y="-1007.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="332.5" y="-992.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="332.5" y="-976.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="332.5" y="-961.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="332.5" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="332.5" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="332.5" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="332.5" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv</text>
<text text-anchor="middle" x="332.5" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="332.5" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_4&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M993.2022,-1172.0195C983.3769,-1169.9697 973.1577,-1168.0478 963.5,-1166.6022 771.3819,-1137.8443 707.1219,-1199.1134 521.6894,-1130.8259"/>
<polygon fill="#000000" stroke="#000000" points="522.7854,-1127.4988 512.1933,-1127.2556 520.3219,-1134.051 522.7854,-1127.4988"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="637,-1007.604 530,-1007.604 530,-967.7998 637,-967.7998 637,-1007.604"/>
<text text-anchor="middle" x="583.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- prose_5&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_5&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1144.261,-1172.353C1138.8628,-1170.0832 1133.0821,-1167.9926 1127.5,-1166.6022 1023.2752,-1140.641 733.0433,-1192.8353 645.5,-1130.6022 608.6057,-1104.3746 593.4519,-1051.3525 587.3815,-1017.7877"/>
<polygon fill="#000000" stroke="#000000" points="590.7881,-1016.9329 585.7138,-1007.6323 583.8807,-1018.0674 590.7881,-1016.9329"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="776,-1005.7019 655,-1005.7019 655,-969.7019 776,-969.7019 776,-1005.7019"/>
<text text-anchor="middle" x="715.5" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_6&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1240.5141,-1171.9929C1230.2364,-1169.9709 1219.5741,-1168.0656 1209.5,-1166.6022 1115.7019,-1152.9761 862.581,-1184.334 784.5,-1130.6022 745.7949,-1103.967 728.0369,-1049.4005 720.4942,-1015.9381"/>
<polygon fill="#000000" stroke="#000000" points="723.8633,-1014.9493 718.3906,-1005.8774 717.0114,-1016.3821 723.8633,-1014.9493"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="915,-1007.604 794,-1007.604 794,-967.7998 915,-967.7998 915,-1007.604"/>
<text text-anchor="middle" x="854.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- prose_7&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_7&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.0894,-1172.5595C1394.4338,-1170.2177 1388.3539,-1168.0451 1382.5,-1166.6022 1283.375,-1142.1695 1008.9399,-1187.9835 924.5,-1130.6022 886.1508,-1104.5419 867.9982,-1051.2305 860.0433,-1017.6014"/>
<polygon fill="#000000" stroke="#000000" points="863.3734,-1016.4482 857.8063,-1007.434 856.5369,-1017.9525 863.3734,-1016.4482"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1159.5,-1005.7019 933.5,-1005.7019 933.5,-969.7019 1159.5,-969.7019 1159.5,-1005.7019"/>
<text text-anchor="middle" x="1046.5" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_8&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1496.0005,-1172.1999C1485.8722,-1170.1803 1475.3938,-1168.2224 1465.5,-1166.6022 1334.2817,-1145.1136 1285.6712,-1193.4584 1168.5,-1130.6022 1118.8396,-1103.962 1080.6453,-1048.2001 1061.0571,-1014.7532"/>
<polygon fill="#000000" stroke="#000000" points="1064.0303,-1012.9017 1056.0315,-1005.954 1057.9518,-1016.3734 1064.0303,-1012.9017"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1635,-1007.604 1178,-1007.604 1178,-967.7998 1635,-967.7998 1635,-1007.604"/>
<text text-anchor="middle" x="1406.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- prose_9&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_9&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1660.3521,-1170.1236C1614.2945,-1137.0259 1500.7939,-1055.4628 1442.4319,-1013.5231"/>
<polygon fill="#000000" stroke="#000000" points="1444.399,-1010.6266 1434.2358,-1007.6332 1440.314,-1016.3111 1444.399,-1010.6266"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1963.5,-1014.9024 1653.5,-1014.9024 1653.5,-960.5014 1963.5,-960.5014 1963.5,-1014.9024"/>
<text text-anchor="middle" x="1808.5" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1808.5" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1808.5" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>codeblock_10&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1808.5,-1166.4312C1808.5,-1134.3966 1808.5,-1067.2736 1808.5,-1025.0181"/>
<polygon fill="#000000" stroke="#000000" points="1812.0001,-1024.8475 1808.5,-1014.8475 1805.0001,-1024.8475 1812.0001,-1024.8475"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2467,-1015.0023 1982,-1015.0023 1982,-960.4015 2467,-960.4015 2467,-1015.0023"/>
<text text-anchor="middle" x="2224.5" y="-983.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="2224.5" y="-968.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- prose_11&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>prose_11&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2092.7774,-1167.8145C2116.0509,-1135.9911 2167.0522,-1066.2539 2198.3227,-1023.4957"/>
<polygon fill="#000000" stroke="#000000" points="2201.2216,-1025.4609 2204.2997,-1015.323 2195.5714,-1021.3287 2201.2216,-1025.4609"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2809.5,-1122.5025 2485.5,-1122.5025 2485.5,-852.9013 2809.5,-852.9013 2809.5,-1122.5025"/>
<text text-anchor="middle" x="2647.5" y="-1107.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="2647.5" y="-1092.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="2647.5" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="2647.5" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="2647.5" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="2647.5" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="2647.5" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="2647.5" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2647.5" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="2647.5" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2647.5" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2647.5" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2647.5" y="-876.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="2647.5" y="-861.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_12&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2447.9348,-1167.1286C2458.7375,-1157.4159 2473.2927,-1144.3295 2489.6489,-1129.624"/>
<polygon fill="#000000" stroke="#000000" points="2492.1873,-1132.0483 2497.2836,-1122.7597 2487.5071,-1126.8429 2492.1873,-1132.0483"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3215,-1007.604 2828,-1007.604 2828,-967.7998 3215,-967.7998 3215,-1007.604"/>
<text text-anchor="middle" x="3021.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- prose_13&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_13&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2807.3194,-1169.4787C2846.6186,-1136.1251 2941.1421,-1055.9023 2990.4258,-1014.0748"/>
<polygon fill="#000000" stroke="#000000" points="2992.8592,-1016.6002 2998.2187,-1007.4609 2988.3296,-1011.2632 2992.8592,-1016.6002"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3655.5,-1068.7022 3233.5,-1068.7022 3233.5,-906.7016 3655.5,-906.7016 3655.5,-1068.7022"/>
<text text-anchor="middle" x="3444.5" y="-1053.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1038.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="3444.5" y="-1022.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="3444.5" y="-1007.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="3444.5" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="3444.5" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="3444.5" y="-961.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3444.5" y="-945.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="3444.5" y="-930.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="3444.5" y="-914.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_14&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3204.8395,-1167.1286C3232.8263,-1146.1757 3281.7848,-1109.5219 3328.1868,-1074.7821"/>
<polygon fill="#000000" stroke="#000000" points="3330.3023,-1077.5706 3336.2098,-1068.7756 3326.107,-1071.967 3330.3023,-1077.5706"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3907,-1007.604 3674,-1007.604 3674,-967.7998 3907,-967.7998 3907,-1007.604"/>
<text text-anchor="middle" x="3790.5" y="-976.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- prose_15&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_15&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3578.0126,-1175.1981C3602.2387,-1166.1061 3637.7303,-1150.7535 3664.5,-1130.6022 3708.4612,-1097.5096 3748.4958,-1047.081 3771.1426,-1015.8224"/>
<polygon fill="#000000" stroke="#000000" points="3774.0915,-1017.7157 3777.0579,-1007.5446 3768.3962,-1013.6459 3774.0915,-1017.7157"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="4368,-1091.9024 3925,-1091.9024 3925,-883.5014 4368,-883.5014 4368,-1091.9024"/>
<text text-anchor="middle" x="4146.5" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="4146.5" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="4146.5" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="4146.5" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="4146.5" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="4146.5" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="4146.5" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="4146.5" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="4146.5" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4146.5" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="4146.5" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4146.5" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_16&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3933.2659,-1167.1286C3952.5264,-1150.9217 3982.9506,-1125.3212 4014.8508,-1098.4787"/>
<polygon fill="#000000" stroke="#000000" points="4017.1483,-1101.1197 4022.5464,-1092.0031 4012.6414,-1095.7636 4017.1483,-1101.1197"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="4471.5" cy="-987.7019" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="4471.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_17&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.3177,-1182.7281C5341.0748,-1176.5222 4610.4974,-1155.6077 4566.5,-1130.6022 4521.9029,-1105.2557 4494.3204,-1049.3575 4481.04,-1015.473"/>
<polygon fill="#000000" stroke="#000000" points="4484.1695,-1013.851 4477.3746,-1005.722 4477.6171,-1016.3141 4484.1695,-1013.851"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="4607.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4607.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.102,-1182.9356C5352.3542,-1177.5909 4684.8157,-1159.5203 4648.5,-1130.6022 4614.2154,-1103.3013 4607.3741,-1049.3464 4606.6539,-1016.1082"/>
<polygon fill="#000000" stroke="#000000" points="4610.1524,-1015.6851 4606.6135,-1005.6987 4603.1524,-1015.7123 4610.1524,-1015.6851"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="4689.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4689.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.3017,-1182.5517C5365.8527,-1176.3958 4764.5388,-1156.8664 4731.5,-1130.6022 4697.1617,-1103.3049 4689.8896,-1049.4353 4688.891,-1016.1968"/>
<polygon fill="#000000" stroke="#000000" points="4692.3907,-1016.1435 4688.7608,-1006.1899 4685.3913,-1016.2346 4692.3907,-1016.1435"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="4827.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4827.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 108&#45;130</text>
</g>
<!-- section_17&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.374,-1182.7367C5405.2036,-1177.8652 4980.2762,-1162.8412 4924.5,-1130.6022 4879.9175,-1104.8332 4851.498,-1049.3294 4837.6191,-1015.5819"/>
<polygon fill="#000000" stroke="#000000" points="4840.7086,-1013.8766 4833.7769,-1005.864 4834.199,-1016.4504 4840.7086,-1013.8766"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="4965.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4965.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5580.2081,-1183.049C5418.9077,-1179.0531 5051.055,-1166.1152 5007.5,-1130.6022 4973.6495,-1103.0018 4966.1839,-1049.6145 4965.0221,-1016.4834"/>
<polygon fill="#000000" stroke="#000000" points="4968.5148,-1016.028 4964.8407,-1006.0906 4961.5158,-1016.1502 4968.5148,-1016.028"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="5103.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5103.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;150</text>
</g>
<!-- section_17&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_17&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5579.8554,-1183.1298C5467.3515,-1179.6996 5262.5227,-1168.3124 5200.5,-1130.6022 5156.6164,-1103.9206 5128.0328,-1048.9731 5113.9203,-1015.5273"/>
<polygon fill="#000000" stroke="#000000" points="5117.0122,-1013.839 5110.0042,-1005.893 5110.5274,-1016.4749 5117.0122,-1013.839"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="5241.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5241.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_17&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5584.1652,-1178.3959C5482.5307,-1168.9345 5305.8069,-1149.9525 5283.5,-1130.6022 5250.5071,-1101.9821 5242.7674,-1048.9207 5241.3199,-1016.1293"/>
<polygon fill="#000000" stroke="#000000" points="5244.8111,-1015.7524 5241.0428,-1005.8504 5237.8136,-1015.9411 5244.8111,-1015.7524"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="5379.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5379.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 155&#45;208</text>
</g>
<!-- section_17&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_17&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5589.3994,-1175.7052C5553.3353,-1168.2803 5509.4579,-1154.8205 5476.5,-1130.6022 5435.5519,-1100.5124 5406.31,-1047.6379 5391.2202,-1015.3313"/>
<polygon fill="#000000" stroke="#000000" points="5394.3121,-1013.6749 5386.9942,-1006.0134 5387.9371,-1016.5662 5394.3121,-1013.6749"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="5517.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5517.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_17&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5613.6488,-1169.6142C5594.6803,-1160.893 5573.4309,-1148.1091 5559.5,-1130.6022 5532.8548,-1097.1171 5523.1075,-1047.2085 5519.5458,-1016.1029"/>
<polygon fill="#000000" stroke="#000000" points="5523.0072,-1015.5429 5518.5263,-1005.9423 5516.0422,-1016.2418 5523.0072,-1015.5429"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 213&#45;217</text>
</g>
<!-- section_17&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_17&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5655.5,-1166.4312C5655.5,-1131.9979 5655.5,-1057.0248 5655.5,-1015.9696"/>
<polygon fill="#000000" stroke="#000000" points="5659.0001,-1015.8289 5655.5,-1005.8289 5652.0001,-1015.829 5659.0001,-1015.8289"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="5793.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5793.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_17&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5697.3512,-1169.6142C5716.3197,-1160.893 5737.5691,-1148.1091 5751.5,-1130.6022 5778.1452,-1097.1171 5787.8925,-1047.2085 5791.4542,-1016.1029"/>
<polygon fill="#000000" stroke="#000000" points="5794.9578,-1016.2418 5792.4737,-1005.9423 5787.9928,-1015.5429 5794.9578,-1016.2418"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="6110.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6110.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 221&#45;228</text>
</g>
<!-- section_17&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_17&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5708.0756,-1171.4924C5744.2185,-1161.8168 5792.9909,-1147.4405 5834.5,-1130.6022 5922.9416,-1094.7254 6020.9288,-1040.2061 6073.0493,-1009.9332"/>
<polygon fill="#000000" stroke="#000000" points="6075.056,-1012.8146 6081.9294,-1004.7518 6071.5282,-1006.7685 6075.056,-1012.8146"/>
</g>
<!-- prose_44 -->
<g id="node45" class="node">
<title>prose_44</title>
<ellipse fill="none" stroke="#000000" cx="6519.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6519.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_44 -->
<g id="edge44" class="edge">
<title>section_17&#45;&gt;prose_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5729.1587,-1180.4031C5857.865,-1172.5637 6118.3855,-1154.3248 6206.5,-1130.6022 6315.2821,-1101.3153 6433.6531,-1037.627 6488.4495,-1006.1168"/>
<polygon fill="#000000" stroke="#000000" points="6490.4096,-1009.0262 6497.3071,-1000.9841 6486.9,-1002.9696 6490.4096,-1009.0262"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="6968.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6968.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 233&#45;240</text>
</g>
<!-- section_17&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_17&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5730.7952,-1182.7917C5918.3292,-1177.8519 6402.5204,-1162.3378 6560.5,-1130.6022 6696.4117,-1103.2996 6848.596,-1041.0044 6922.8183,-1008.4248"/>
<polygon fill="#000000" stroke="#000000" points="6924.6016,-1011.4635 6932.3356,-1004.2221 6921.7739,-1005.06 6924.6016,-1011.4635"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="7425.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7425.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5730.7903,-1183.2037C6003.9945,-1177.9248 6933.9503,-1158.1022 7064.5,-1130.6022 7191.2291,-1103.9069 7331.081,-1036.7871 7392.9708,-1004.9603"/>
<polygon fill="#000000" stroke="#000000" points="7394.6043,-1008.0559 7401.8734,-1000.348 7391.3842,-1001.8405 7394.6043,-1008.0559"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="7884.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7884.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 244&#45;271</text>
</g>
<!-- section_17&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.0338,-1183.6827C6052.0103,-1179.5946 7294.2498,-1161.877 7466.5,-1130.6022 7606.8867,-1105.1126 7763.9881,-1041.2002 7839.3666,-1008.173"/>
<polygon fill="#000000" stroke="#000000" points="7840.8439,-1011.3469 7848.5823,-1004.1102 7838.0201,-1004.9417 7840.8439,-1011.3469"/>
</g>
<!-- prose_48 -->
<g id="node49" class="node">
<title>prose_48</title>
<ellipse fill="none" stroke="#000000" cx="8344.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8344.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;prose_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.1438,-1184.4165C6106.0827,-1183.2852 7756.185,-1175.76 7980.5,-1130.6022 8108.6923,-1104.7952 8250.0409,-1036.9272 8312.1797,-1004.9001"/>
<polygon fill="#000000" stroke="#000000" points="8313.8493,-1007.9769 8321.1106,-1000.2617 8310.6229,-1001.7648 8313.8493,-1007.9769"/>
</g>
<!-- codeblock_49 -->
<g id="node50" class="node">
<title>codeblock_49</title>
<ellipse fill="none" stroke="#000000" cx="8748.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8748.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 276&#45;280</text>
</g>
<!-- section_17&#45;&gt;codeblock_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;codeblock_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.1656,-1183.861C6158.1432,-1179.5836 8251.9662,-1157.3103 8385.5,-1130.6022 8507.6686,-1106.1672 8641.6954,-1043.0637 8707.4583,-1009.4802"/>
<polygon fill="#000000" stroke="#000000" points="8709.3655,-1012.435 8716.6561,-1004.7475 8706.1628,-1006.2106 8709.3655,-1012.435"/>
</g>
<!-- prose_50 -->
<g id="node51" class="node">
<title>prose_50</title>
<ellipse fill="none" stroke="#000000" cx="9053.5" cy="-987.7019" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9053.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;prose_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.051,-1184.5515C6199.4079,-1184.0836 8691.5747,-1179.3066 8844.5,-1130.6022 8920.6231,-1106.3581 8994.0048,-1044.5082 9030.1668,-1010.6717"/>
<polygon fill="#000000" stroke="#000000" points="9032.875,-1012.9267 9037.718,-1003.5035 9028.0556,-1007.8498 9032.875,-1012.9267"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="9361.5" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9361.5" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 286&#45;288</text>
</g>
<!-- section_17&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5731.2842,-1184.4252C6221.2495,-1183.1547 8926.3294,-1174.1811 9094.5,-1130.6022 9186.492,-1106.7638 9281.6843,-1045.3501 9329.6984,-1011.3053"/>
<polygon fill="#000000" stroke="#000000" points="9332.0137,-1013.9521 9338.1033,-1005.2822 9327.9362,-1008.2623 9332.0137,-1013.9521"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2082,-432.3023 1667,-432.3023 1667,-376.4993 2082,-376.4993 2082,-432.3023"/>
<text text-anchor="middle" x="1874.5" y="-384.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- prose_33&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_33&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4608.3718,-969.5365C4608.7617,-938.1671 4604.4143,-874.3684 4565.5,-844.8016 4456.0052,-761.6082 2207.9221,-880.3718 2090.5,-808.8016 1954.6281,-725.9861 1899.2427,-525.9036 1881.4956,-442.2051"/>
<polygon fill="#000000" stroke="#000000" points="1884.9127,-441.4455 1879.4683,-432.3565 1878.0565,-442.8569 1884.9127,-441.4455"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2375,-432.3023 2100,-432.3023 2100,-376.4993 2375,-376.4993 2375,-432.3023"/>
<text text-anchor="middle" x="2237.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- prose_34&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>prose_34&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4690.5027,-969.5562C4691.1181,-938.2173 4687.226,-874.4644 4648.5,-844.8016 4548.5914,-768.2752 2485.9178,-881.9359 2383.5,-808.8016 2262.4537,-722.3651 2241.3896,-525.4724 2237.9984,-442.4475"/>
<polygon fill="#000000" stroke="#000000" points="2241.488,-442.0793 2237.6474,-432.2051 2234.4921,-442.3191 2241.488,-442.0793"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2906,-570.4014 2393,-570.4014 2393,-238.4002 2906,-238.4002 2906,-570.4014"/>
<text text-anchor="middle" x="2649.5" y="-555.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="2649.5" y="-539.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="2649.5" y="-524.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="2649.5" y="-509.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="2649.5" y="-493.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="2649.5" y="-478.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="2649.5" y="-462.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="2649.5" y="-447.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2649.5" y="-432.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="2649.5" y="-416.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="2649.5" y="-401.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2649.5" y="-385.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="2649.5" y="-370.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="2649.5" y="-355.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="2649.5" y="-339.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="2649.5" y="-324.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2649.5" y="-308.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2649.5" y="-277.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="2649.5" y="-262.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="2649.5" y="-246.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_35&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4821.4674,-969.5225C4809.7516,-937.5266 4780.5749,-871.9715 4730.5,-844.8016 4553.1118,-748.5534 3091.0995,-906.4894 2914.5,-808.8016 2824.6716,-759.1121 2760.1913,-664.6063 2717.3409,-579.4438"/>
<polygon fill="#000000" stroke="#000000" points="2720.4532,-577.8416 2712.8727,-570.4398 2714.1828,-580.9533 2720.4532,-577.8416"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3171,-424.3029 2924,-424.3029 2924,-384.4987 3171,-384.4987 3171,-424.3029"/>
<text text-anchor="middle" x="3047.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- prose_36&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>prose_36&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4966.3532,-969.5608C4966.7144,-938.2291 4962.324,-874.4869 4923.5,-844.8016 4846.5156,-785.9385 3257.3483,-866.5172 3179.5,-808.8016 3057.3924,-718.2728 3046.3063,-511.9117 3046.6519,-434.4891"/>
<polygon fill="#000000" stroke="#000000" points="3050.1521,-434.4848 3046.7662,-424.4456 3043.1526,-434.4051 3050.1521,-434.4848"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3576,-523.9013 3189,-523.9013 3189,-284.9003 3576,-284.9003 3576,-523.9013"/>
<text text-anchor="middle" x="3382.5" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="3382.5" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="3382.5" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="3382.5" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="3382.5" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="3382.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="3382.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="3382.5" y="-370.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="3382.5" y="-354.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="3382.5" y="-339.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="3382.5" y="-323.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="3382.5" y="-308.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3382.5" y="-293.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>codeblock_37&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5097.4525,-969.55C5085.7129,-937.5977 5056.4999,-872.1093 5006.5,-844.8016 4867.8864,-769.0971 3718.856,-893.4248 3585.5,-808.8016 3489.8862,-748.1284 3437.5858,-627.5637 3410.1362,-533.7921"/>
<polygon fill="#000000" stroke="#000000" points="3413.4329,-532.5906 3407.3145,-523.941 3406.7035,-534.5182 3413.4329,-532.5906"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4044.5,-431.7012 3594.5,-431.7012 3594.5,-377.1004 4044.5,-377.1004 4044.5,-431.7012"/>
<text text-anchor="middle" x="3819.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="3819.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- prose_38&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_38&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5242.3203,-969.6037C5242.6305,-938.3383 5238.1636,-874.6954 5199.5,-844.8016 5098.7152,-766.8773 4162.846,-874.1715 4053.5,-808.8016 3913.983,-725.3947 3849.5059,-524.7716 3828.0776,-441.5487"/>
<polygon fill="#000000" stroke="#000000" points="3831.4507,-440.6102 3825.6187,-431.765 3824.6618,-442.3165 3831.4507,-440.6102"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="4568.5,-808.7025 4062.5,-808.7025 4062.5,-.0992 4568.5,-.0992 4568.5,-808.7025"/>
<text text-anchor="middle" x="4315.5" y="-793.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="4315.5" y="-778.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="4315.5" y="-762.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="4315.5" y="-747.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="4315.5" y="-732.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="4315.5" y="-716.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="4315.5" y="-701.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="4315.5" y="-685.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="4315.5" y="-670.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="4315.5" y="-655.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="4315.5" y="-639.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="4315.5" y="-624.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-608.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="4315.5" y="-593.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="4315.5" y="-578.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="4315.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="4315.5" y="-547.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="4315.5" y="-531.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="4315.5" y="-516.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="4315.5" y="-501.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="4315.5" y="-485.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="4315.5" y="-470.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="4315.5" y="-454.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="4315.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4315.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="4315.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="4315.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="4315.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="4315.5" y="-347.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="4315.5" y="-331.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="4315.5" y="-316.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="4315.5" y="-300.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4315.5" y="-285.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="4315.5" y="-270.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="4315.5" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4315.5" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="4315.5" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4315.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="4315.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="4315.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="4315.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4315.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="4315.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="4315.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="4315.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="4315.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4315.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="4315.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="4315.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="4315.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_39&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5373.3817,-969.6776C5361.5299,-937.9277 5332.145,-872.7493 5282.5,-844.8016 5145.8016,-767.8472 4713.3643,-887.2194 4577.5,-808.8016 4577.4066,-808.7477 4577.3132,-808.6938 4577.2199,-808.6398"/>
<polygon fill="#000000" stroke="#000000" points="4578.9946,-805.623 4568.6187,-803.4804 4575.3938,-811.6259 4578.9946,-805.623"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="5064.5,-431.7012 4586.5,-431.7012 4586.5,-377.1004 5064.5,-377.1004 5064.5,-431.7012"/>
<text text-anchor="middle" x="4825.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="4825.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- prose_40&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>prose_40&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5518.1392,-969.3377C5518.1164,-938.2506 5513.0821,-875.6382 5475.5,-844.8016 5406.1624,-787.9092 5149.7282,-856.0637 5073.5,-808.8016 4933.5679,-722.0426 4860.9495,-524.1756 4835.8461,-441.6372"/>
<polygon fill="#000000" stroke="#000000" points="4839.1626,-440.511 4832.9515,-431.9278 4832.4544,-442.5109 4839.1626,-440.511"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5532.5,-431.6013 5082.5,-431.6013 5082.5,-377.2003 5532.5,-377.2003 5532.5,-431.6013"/>
<text text-anchor="middle" x="5307.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="5307.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="5307.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_41&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5643.7547,-969.8324C5622.7926,-937.8173 5577.7377,-868.4473 5541.5,-808.8016 5459.8769,-674.4536 5367.7326,-511.7578 5327.7741,-440.6277"/>
<polygon fill="#000000" stroke="#000000" points="5330.6601,-438.6186 5322.7132,-431.6116 5324.5559,-442.0449 5330.6601,-438.6186"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="6036,-424.3029 5551,-424.3029 5551,-384.4987 6036,-384.4987 6036,-424.3029"/>
<text text-anchor="middle" x="5793.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- prose_42&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_42&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5793.5,-969.6052C5793.5,-886.3088 5793.5,-539.3957 5793.5,-434.5459"/>
<polygon fill="#000000" stroke="#000000" points="5797.0001,-434.3461 5793.5,-424.3462 5790.0001,-434.3462 5797.0001,-434.3461"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6525,-454.8018 6054,-454.8018 6054,-353.9998 6525,-353.9998 6525,-454.8018"/>
<text text-anchor="middle" x="6289.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="6289.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="6289.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="6289.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="6289.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="6289.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_43&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6116.0534,-969.6052C6139.5471,-893.0473 6231.3785,-593.7994 6271.0642,-464.477"/>
<polygon fill="#000000" stroke="#000000" points="6274.4698,-465.3094 6274.0575,-454.7226 6267.7778,-463.2558 6274.4698,-465.3094"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="7035.5,-431.7012 6543.5,-431.7012 6543.5,-377.1004 7035.5,-377.1004 7035.5,-431.7012"/>
<text text-anchor="middle" x="6789.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="6789.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- prose_44&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>prose_44&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6527.5806,-970.2448C6564.8386,-889.7536 6720.4483,-553.5784 6772.4747,-441.1818"/>
<polygon fill="#000000" stroke="#000000" points="6775.7298,-442.4815 6776.7543,-431.9363 6769.3774,-439.541 6775.7298,-442.4815"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="7503.5,-454.8018 7053.5,-454.8018 7053.5,-353.9998 7503.5,-353.9998 7503.5,-454.8018"/>
<text text-anchor="middle" x="7278.5" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="7278.5" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="7278.5" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="7278.5" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="7278.5" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="7278.5" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_45&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6978.1176,-969.6052C7018.8865,-892.8938 7178.4805,-592.5991 7246.9841,-463.7016"/>
<polygon fill="#000000" stroke="#000000" points="7250.1537,-465.1956 7251.7561,-454.7226 7243.9724,-461.9104 7250.1537,-465.1956"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="7965,-424.3029 7522,-424.3029 7522,-384.4987 7965,-384.4987 7965,-424.3029"/>
<text text-anchor="middle" x="7743.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- prose_46&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>prose_46&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7435.0171,-970.2448C7480.0131,-887.7095 7671.5707,-536.3393 7727.8759,-433.0597"/>
<polygon fill="#000000" stroke="#000000" points="7731.0315,-434.5834 7732.7452,-424.1281 7724.8855,-431.2328 7731.0315,-434.5834"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="8426,-609.0018 7983,-609.0018 7983,-199.7999 8426,-199.7999 8426,-609.0018"/>
<text text-anchor="middle" x="8204.5" y="-594.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="8204.5" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="8204.5" y="-531.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="8204.5" y="-515.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-500.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-485.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="8204.5" y="-469.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-454.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="8204.5" y="-438.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-423.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="8204.5" y="-408.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-392.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-377.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="8204.5" y="-361.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="8204.5" y="-346.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="8204.5" y="-331.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-315.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-300.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-284.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8204.5" y="-269.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-254.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8204.5" y="-238.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8204.5" y="-223.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8204.5" y="-207.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_47&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7894.4279,-969.6052C7923.6927,-916.2609 8012.2711,-754.7988 8087.298,-618.0385"/>
<polygon fill="#000000" stroke="#000000" points="8090.4783,-619.5182 8092.2195,-609.0674 8084.3411,-616.1513 8090.4783,-619.5182"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="8887,-431.7012 8444,-431.7012 8444,-377.1004 8887,-377.1004 8887,-431.7012"/>
<text text-anchor="middle" x="8665.5" y="-400.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="8665.5" y="-385.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- prose_48&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_48&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8354.1069,-970.2448C8398.4471,-889.6727 8583.7772,-552.9024 8645.445,-440.8436"/>
<polygon fill="#000000" stroke="#000000" points="8648.5918,-442.3848 8650.3468,-431.9363 8642.4591,-439.0098 8648.5918,-442.3848"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="9124,-431.6013 8905,-431.6013 8905,-377.2003 9124,-377.2003 9124,-431.6013"/>
<text text-anchor="middle" x="9014.5" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="9014.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="9014.5" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_49&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_49&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8767.6134,-969.7103C8798.7639,-939.378 8860.5088,-874.8793 8895.5,-808.8016 8961.9302,-683.3546 8996.0092,-515.8542 9008.6252,-442.0375"/>
<polygon fill="#000000" stroke="#000000" points="9012.1327,-442.2831 9010.3322,-431.8424 9005.2288,-441.1271 9012.1327,-442.2831"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="9298.5,-424.3029 9142.5,-424.3029 9142.5,-384.4987 9298.5,-384.4987 9298.5,-424.3029"/>
<text text-anchor="middle" x="9220.5" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- prose_50&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>prose_50&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9062.5593,-970.3904C9078.6765,-938.9732 9112.5107,-870.1363 9132.5,-808.8016 9177.092,-671.9767 9205.7738,-501.7145 9216.1462,-434.0849"/>
<polygon fill="#000000" stroke="#000000" points="9219.6164,-434.5442 9217.6533,-424.1328 9212.6953,-433.496 9219.6164,-434.5442"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="9410,-422.4008 9317,-422.4008 9317,-386.4008 9410,-386.4008 9410,-422.4008"/>
<text text-anchor="middle" x="9363.5" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_51&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9361.562,-969.6052C9361.8493,-885.8364 9363.0507,-535.4525 9363.4027,-432.7855"/>
<polygon fill="#000000" stroke="#000000" points="9366.9033,-432.5864 9363.4377,-422.5744 9359.9033,-432.5623 9366.9033,-432.5864"/>
</g>
</g>
</svg>