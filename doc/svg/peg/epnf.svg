<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="10129pt" height="1355pt"
 viewBox="0.00 0.00 10129.30 1354.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1350.6022)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1350.6022 10125.2972,-1350.6022 10125.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1730" cy="-1328.6022" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1730" y="-1324.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 289</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1730" cy="-1256.6022" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1730" y="-1252.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;100</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1730,-1310.4335C1730,-1302.7331 1730,-1293.5765 1730,-1285.0188"/>
<polygon fill="#000000" stroke="#000000" points="1733.5001,-1285.0154 1730,-1275.0154 1726.5001,-1285.0155 1733.5001,-1285.0154"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="81" cy="-1184.6022" rx="27" ry="18"/>
<text text-anchor="middle" x="81" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1664.444,-1254.6491C1466.5864,-1248.6213 858.0461,-1229.1048 354,-1202.6022 269.6856,-1198.1689 170.8391,-1191.2139 118.2912,-1187.3765"/>
<polygon fill="#000000" stroke="#000000" points="118.339,-1183.8707 108.1097,-1186.6296 117.8268,-1190.8519 118.339,-1183.8707"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="409" cy="-1184.6022" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="409" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;3</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1664.5554,-1254.8228C1489.0511,-1249.7701 993.3497,-1233.6514 582,-1202.6022 542.1591,-1199.5949 497.288,-1194.8879 463.2291,-1191.0415"/>
<polygon fill="#000000" stroke="#000000" points="463.3558,-1187.5333 453.0237,-1189.8782 462.563,-1194.4883 463.3558,-1187.5333"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="664" cy="-1184.6022" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="664" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;23</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1664.7671,-1254.3607C1513.3329,-1248.8159 1126.2838,-1232.6806 804,-1202.6022 782.1991,-1200.5675 758.5619,-1197.7604 737.0259,-1194.968"/>
<polygon fill="#000000" stroke="#000000" points="737.3386,-1191.479 726.9676,-1193.6455 736.426,-1198.4193 737.3386,-1191.479"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="869" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="869" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 25&#45;26</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1664.6752,-1254.5717C1532.1025,-1249.8843 1222.1431,-1236.0405 964,-1202.6022 951.5209,-1200.9857 938.2046,-1198.7725 925.6113,-1196.4507"/>
<polygon fill="#000000" stroke="#000000" points="926.1729,-1192.995 915.6965,-1194.5747 924.8714,-1199.8729 926.1729,-1192.995"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1050" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1050" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 27&#45;29</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1665.9723,-1252.3833C1559.0074,-1244.9432 1337.3298,-1227.85 1151,-1202.6022 1140.8349,-1201.2248 1130.1315,-1199.5561 1119.6467,-1197.7969"/>
<polygon fill="#000000" stroke="#000000" points="1120.1335,-1194.3294 1109.6858,-1196.0891 1118.9505,-1201.2287 1120.1335,-1194.3294"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1216" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1216" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 31&#45;32</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1667.0457,-1251.3753C1580.9783,-1243.6697 1421.9711,-1227.4342 1288,-1202.6022 1281.7645,-1201.4464 1275.2653,-1200.0697 1268.8342,-1198.5997"/>
<polygon fill="#000000" stroke="#000000" points="1269.3695,-1195.1297 1258.8321,-1196.2313 1267.7565,-1201.9414 1269.3695,-1195.1297"/>
</g>
<!-- codeblock_8 -->
<g id="node9" class="node">
<title>codeblock_8</title>
<ellipse fill="none" stroke="#000000" cx="1374" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1374" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 33&#45;35</text>
</g>
<!-- section_1&#45;&gt;codeblock_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;codeblock_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1677.0876,-1245.9008C1614.6883,-1233.2807 1510.8192,-1212.2735 1442.3712,-1198.43"/>
<polygon fill="#000000" stroke="#000000" points="1443.0338,-1194.9933 1432.5385,-1196.4414 1441.6462,-1201.8543 1443.0338,-1194.9933"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="1529" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1529" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 37&#45;38</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1689.8077,-1242.2049C1657.0665,-1230.4767 1610.774,-1213.8943 1576.2595,-1201.5309"/>
<polygon fill="#000000" stroke="#000000" points="1577.0017,-1198.0791 1566.4071,-1198.0017 1574.6411,-1204.669 1577.0017,-1198.0791"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1781" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1781" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 39&#45;43</text>
</g>
<!-- section_1&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1742.6067,-1238.8044C1748.614,-1230.3235 1755.9168,-1220.0137 1762.5341,-1210.6717"/>
<polygon fill="#000000" stroke="#000000" points="1765.4374,-1212.628 1768.3615,-1202.4447 1759.7252,-1208.5819 1765.4374,-1212.628"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="2115" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2115" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 45&#45;47</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1784.3445,-1246.439C1856.3049,-1232.9815 1982.7048,-1209.3431 2056.6311,-1195.5179"/>
<polygon fill="#000000" stroke="#000000" points="2057.5169,-1198.913 2066.703,-1193.6343 2056.23,-1192.0323 2057.5169,-1198.913"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="2493" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2493" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;66</text>
</g>
<!-- section_1&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1792.116,-1250.7406C1929.0635,-1237.8177 2256.9601,-1206.8759 2410.7481,-1192.3638"/>
<polygon fill="#000000" stroke="#000000" points="2411.4418,-1195.814 2421.0687,-1191.3899 2410.7841,-1188.8449 2411.4418,-1195.814"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="2869" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2869" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 68&#45;69</text>
</g>
<!-- section_1&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1794.089,-1252.5509C1993.6978,-1239.9329 2602.8644,-1201.4255 2803.8783,-1188.7187"/>
<polygon fill="#000000" stroke="#000000" points="2804.2297,-1192.2036 2813.989,-1188.0796 2803.788,-1185.2175 2804.2297,-1192.2036"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="3269" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3269" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 70&#45;81</text>
</g>
<!-- section_1&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1794.9397,-1253.8922C1975.5354,-1246.312 2499.0516,-1224.0407 2934,-1202.6022 3018.7971,-1198.4225 3115.6403,-1193.1667 3183.3186,-1189.4154"/>
<polygon fill="#000000" stroke="#000000" points="3183.7146,-1192.8989 3193.5052,-1188.8499 3183.3265,-1185.9097 3183.7146,-1192.8989"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="3642" cy="-1184.6022" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3642" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 83&#45;84</text>
</g>
<!-- section_1&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1795.8145,-1255.1099C2016.3629,-1249.9609 2749.5131,-1231.6436 3355,-1202.6022 3431.3264,-1198.9412 3518.978,-1193.2235 3577.1276,-1189.2171"/>
<polygon fill="#000000" stroke="#000000" points="3577.5395,-1192.697 3587.2739,-1188.5147 3577.056,-1185.7137 3577.5395,-1192.697"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="4006" cy="-1184.6022" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4006" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 85&#45;99</text>
</g>
<!-- section_1&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1795.7308,-1255.5899C2045.1086,-1251.5834 2956.6238,-1235.4278 3707,-1202.6022 3779.4413,-1199.4332 3861.671,-1194.3764 3921.5361,-1190.4284"/>
<polygon fill="#000000" stroke="#000000" points="3921.9486,-1193.9088 3931.6952,-1189.7549 3921.4855,-1186.9241 3921.9486,-1193.9088"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="6059" cy="-1184.6022" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="6059" y="-1180.4022" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 101&#45;289</text>
</g>
<!-- section_1&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1795.8362,-1255.5072C2290.036,-1247.2876 5414.7079,-1195.318 5973.5191,-1186.0239"/>
<polygon fill="#000000" stroke="#000000" points="5973.5822,-1189.5234 5983.5226,-1185.8575 5973.4657,-1182.5244 5973.5822,-1189.5234"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-1005.7019 0,-1005.7019 0,-969.7019 54,-969.7019 54,-1005.7019"/>
</g>
<!-- header_2&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>header_2&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M74.6606,-1166.7082C71.0475,-1156.2436 66.5475,-1142.7436 63,-1130.6022 51.4333,-1091.0148 40.1589,-1044.6207 33.3951,-1015.6895"/>
<polygon fill="#000000" stroke="#000000" points="36.7854,-1014.8154 31.1151,-1005.8657 29.9666,-1016.3981 36.7854,-1014.8154"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="207.5,-1005.7019 72.5,-1005.7019 72.5,-969.7019 207.5,-969.7019 207.5,-1005.7019"/>
<text text-anchor="middle" x="140" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> A modified epnf.</text>
</g>
<!-- block_3&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>block_3&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M366.9642,-1176.8626C317.5062,-1167.078 239.1801,-1149.2479 216,-1130.6022 179.0545,-1100.8837 157.7943,-1048.2581 147.5932,-1015.8344"/>
<polygon fill="#000000" stroke="#000000" points="150.8903,-1014.644 144.6639,-1006.0718 144.1856,-1016.6558 150.8903,-1014.644"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="584.5,-1130.5025 225.5,-1130.5025 225.5,-844.9013 584.5,-844.9013 584.5,-1130.5025"/>
<text text-anchor="middle" x="405" y="-1115.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require( &quot;lpeg&quot; )</text>
<text text-anchor="middle" x="405" y="-1100.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="405" y="-1084.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local assert = assert</text>
<text text-anchor="middle" x="405" y="-1069.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">local _VERSION = assert( _VERSION )</text>
<text text-anchor="middle" x="405" y="-1053.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local string, io = assert( string ), assert( io )</text>
<text text-anchor="middle" x="405" y="-1038.402" font-family="Inconsolata" font-size="14.00" fill="#000000">local error = assert( error )</text>
<text text-anchor="middle" x="405" y="-1023.002" font-family="Inconsolata" font-size="14.00" fill="#000000">local pairs = assert( pairs )</text>
<text text-anchor="middle" x="405" y="-1007.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local next = assert( next )</text>
<text text-anchor="middle" x="405" y="-992.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local type = assert( type )</text>
<text text-anchor="middle" x="405" y="-976.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local tostring = assert( tostring )</text>
<text text-anchor="middle" x="405" y="-961.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">local setmetatable = assert( setmetatable )</text>
<text text-anchor="middle" x="405" y="-930.0018" font-family="Inconsolata" font-size="14.00" fill="#000000">if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="405" y="-914.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv = assert( setfenv )</text>
<text text-anchor="middle" x="405" y="-899.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="405" y="-883.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local setfenv</text>
<text text-anchor="middle" x="405" y="-868.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="405" y="-853.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>codeblock_4&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M641.4685,-1167.473C628.8668,-1157.8928 611.8481,-1144.9545 592.6829,-1130.3846"/>
<polygon fill="#000000" stroke="#000000" points="594.724,-1127.5397 584.6451,-1124.2739 590.4876,-1133.1122 594.724,-1127.5397"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="709.5,-1005.7019 602.5,-1005.7019 602.5,-969.7019 709.5,-969.7019 709.5,-1005.7019"/>
<text text-anchor="middle" x="656" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> module table</text>
</g>
<!-- block_5&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_5&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M818.0767,-1177.0304C785.9296,-1169.9012 745.4384,-1156.289 718,-1130.6022 684.8312,-1099.5507 668.4948,-1047.7085 661.1832,-1015.7386"/>
<polygon fill="#000000" stroke="#000000" points="664.5538,-1014.7632 659.0383,-1005.7172 657.7088,-1016.2283 664.5538,-1014.7632"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="848.5,-1005.7019 727.5,-1005.7019 727.5,-969.7019 848.5,-969.7019 848.5,-1005.7019"/>
<text text-anchor="middle" x="788" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = {}</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_6&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M989.3964,-1173.3104C940.6724,-1163.2205 877.1444,-1147.4627 857,-1130.6022 821.3517,-1100.7652 802.7199,-1048.1772 794.1599,-1015.7931"/>
<polygon fill="#000000" stroke="#000000" points="797.5438,-1014.8976 791.7258,-1006.0431 790.7523,-1016.5931 797.5438,-1014.8976"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="987.5,-1005.7019 866.5,-1005.7019 866.5,-969.7019 987.5,-969.7019 987.5,-1005.7019"/>
<text text-anchor="middle" x="927" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> Node metatable</text>
</g>
<!-- block_7&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_7&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1170.0709,-1174.3185C1107.8827,-1160.2438 1003.8116,-1136.0939 997,-1130.6022 960.7102,-1101.3443 941.848,-1048.572 933.2056,-1015.995"/>
<polygon fill="#000000" stroke="#000000" points="936.5731,-1015.0338 930.7496,-1006.183 929.7826,-1016.7336 936.5731,-1015.0338"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1232,-1005.7019 1006,-1005.7019 1006,-969.7019 1232,-969.7019 1232,-1005.7019"/>
<text text-anchor="middle" x="1119" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.Node = require &quot;peg/node&quot;</text>
</g>
<!-- codeblock_8&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_8&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1324.3735,-1170.7563C1298.0495,-1161.9148 1266.062,-1148.6805 1241,-1130.6022 1196.213,-1098.2954 1157.3096,-1046.2265 1136.0936,-1014.6601"/>
<polygon fill="#000000" stroke="#000000" points="1138.7718,-1012.3643 1130.3391,-1005.9501 1132.9313,-1016.223 1138.7718,-1012.3643"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1707.5,-1005.7019 1250.5,-1005.7019 1250.5,-969.7019 1707.5,-969.7019 1707.5,-1005.7019"/>
<text text-anchor="middle" x="1479" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> maximum of two numbers while avoiding math lib as a dependency</text>
</g>
<!-- block_9&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_9&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1524.3857,-1166.4312C1515.6233,-1131.9246 1496.5225,-1056.7056 1486.1117,-1015.708"/>
<polygon fill="#000000" stroke="#000000" points="1489.4568,-1014.6599 1483.6031,-1005.8289 1482.6721,-1016.3828 1489.4568,-1014.6599"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2036,-1014.9024 1726,-1014.9024 1726,-960.5014 2036,-960.5014 2036,-1014.9024"/>
<text text-anchor="middle" x="1881" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">local function max( a, b )</text>
<text text-anchor="middle" x="1881" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if a &lt; b then return b else return a end</text>
<text text-anchor="middle" x="1881" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_10&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1790.2285,-1166.4312C1806.6358,-1134.1251 1841.1669,-1066.1334 1862.591,-1023.9493"/>
<polygon fill="#000000" stroke="#000000" points="1865.8059,-1025.3484 1867.2135,-1014.8475 1859.5647,-1022.1786 1865.8059,-1025.3484"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2539.5,-1007.0025 2054.5,-1007.0025 2054.5,-968.4013 2539.5,-968.4013 2539.5,-1007.0025"/>
<text text-anchor="middle" x="2297" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> get the line which p points into, the line number and the position</text>
<text text-anchor="middle" x="2297" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> of the beginning of the line</text>
</g>
<!-- block_11&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_11&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2131.1513,-1167.1286C2163.0257,-1132.6447 2234.2096,-1055.6329 2272.1211,-1014.6176"/>
<polygon fill="#000000" stroke="#000000" points="2274.7996,-1016.8762 2279.0171,-1007.157 2269.6591,-1012.1248 2274.7996,-1016.8762"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2882,-1122.5025 2558,-1122.5025 2558,-852.9013 2882,-852.9013 2882,-1122.5025"/>
<text text-anchor="middle" x="2720" y="-1107.4022" font-family="Inconsolata" font-size="14.00" fill="#000000">local function getline( s, p )</text>
<text text-anchor="middle" x="2720" y="-1092.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lno, sol = 1, 1</text>
<text text-anchor="middle" x="2720" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = 1, p do</text>
<text text-anchor="middle" x="2720" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2720" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;lno = lno + 1</text>
<text text-anchor="middle" x="2720" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;sol = i + 1</text>
<text text-anchor="middle" x="2720" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2720" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2720" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local eol = #s</text>
<text text-anchor="middle" x="2720" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for i = sol, #s do</text>
<text text-anchor="middle" x="2720" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, i, i ) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="2720" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;eol = i &#45; 1</text>
<text text-anchor="middle" x="2720" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="2720" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2720" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="2720" y="-876.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return string.sub( s, sol, eol ), lno, sol</text>
<text text-anchor="middle" x="2720" y="-861.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_12&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2513.1447,-1167.1286C2524.3892,-1157.3751 2539.5558,-1144.2195 2556.5964,-1129.4385"/>
<polygon fill="#000000" stroke="#000000" points="2559.2896,-1131.7357 2564.5504,-1122.5392 2554.7028,-1126.4478 2559.2896,-1131.7357"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3287.5,-1005.7019 2900.5,-1005.7019 2900.5,-969.7019 3287.5,-969.7019 3287.5,-1005.7019"/>
<text text-anchor="middle" x="3094" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> raise an error during semantic validation of the ast</text>
</g>
<!-- block_13&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_13&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2888.5737,-1167.473C2928.496,-1132.5364 3019.4481,-1052.9432 3065.7651,-1012.4106"/>
<polygon fill="#000000" stroke="#000000" points="3068.1165,-1015.0038 3073.3369,-1005.7844 3063.5066,-1009.7361 3068.1165,-1015.0038"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3728,-1068.7022 3306,-1068.7022 3306,-906.7016 3728,-906.7016 3728,-1068.7022"/>
<text text-anchor="middle" x="3517" y="-1053.502" font-family="Inconsolata" font-size="14.00" fill="#000000">local function raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="3517" y="-1038.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local line, lno, sol = getline( s, p )</text>
<text text-anchor="middle" x="3517" y="-1022.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( p &lt;= #s )</text>
<text text-anchor="middle" x="3517" y="-1007.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local clen = max( 70, p+10&#45;sol )</text>
<text text-anchor="middle" x="3517" y="-991.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #line &gt; clen then</text>
<text text-anchor="middle" x="3517" y="-976.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;line = string.sub( line, 1, clen ) .. &quot;...&quot;</text>
<text text-anchor="middle" x="3517" y="-961.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3517" y="-945.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local marker = string.rep( &quot; &quot;, p&#45;sol ) .. &quot;^&quot;</text>
<text text-anchor="middle" x="3517" y="-930.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;error(&quot;:&quot;..lno..&quot;: &quot;..msg..&quot;\n&quot;..line..&quot;\n&quot;..marker, 0 )</text>
<text text-anchor="middle" x="3517" y="-914.9018" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_14&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3291.0083,-1167.1286C3317.3444,-1146.219 3363.3745,-1109.6733 3407.0494,-1074.9975"/>
<polygon fill="#000000" stroke="#000000" points="3409.2306,-1077.7347 3414.886,-1068.7756 3404.8779,-1072.2525 3409.2306,-1077.7347"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="3979.5,-1005.7019 3746.5,-1005.7019 3746.5,-969.7019 3979.5,-969.7019 3979.5,-1005.7019"/>
<text text-anchor="middle" x="3863" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse&#45;error reporting function</text>
</g>
<!-- block_15&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>block_15&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3674.0366,-1169.7633C3693.2905,-1160.0507 3717.7149,-1146.2779 3737,-1130.6022 3780.1675,-1095.5139 3820.9993,-1044.8509 3843.9322,-1014.2229"/>
<polygon fill="#000000" stroke="#000000" points="3846.7754,-1016.2647 3849.9129,-1006.1451 3841.1495,-1012.0994 3846.7754,-1016.2647"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="4440.5,-1091.9024 3997.5,-1091.9024 3997.5,-883.5014 4440.5,-883.5014 4440.5,-1091.9024"/>
<text text-anchor="middle" x="4219" y="-1076.6021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function parse_error( s, p, n, e )</text>
<text text-anchor="middle" x="4219" y="-1061.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if p &lt;= #s then</text>
<text text-anchor="middle" x="4219" y="-1045.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;parse error&quot;</text>
<text text-anchor="middle" x="4219" y="-1030.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4219" y="-1015.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;raise_error( n, msg, s, p )</text>
<text text-anchor="middle" x="4219" y="-999.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else &#45;&#45; parse error at end of input</text>
<text text-anchor="middle" x="4219" y="-984.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local _,lno = string.gsub( s, &quot;\n&quot;, &quot;\n&quot; )</text>
<text text-anchor="middle" x="4219" y="-968.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.sub( s, &#45;1, &#45;1 ) ~= &quot;\n&quot; then lno = lno + 1 end</text>
<text text-anchor="middle" x="4219" y="-953.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local msg = &quot;: parse error at &lt;eof&gt;&quot;</text>
<text text-anchor="middle" x="4219" y="-938.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if e then msg = msg .. &quot;, &quot; .. e end</text>
<text text-anchor="middle" x="4219" y="-922.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;error( n..&quot;:&quot;..lno..msg, 0 )</text>
<text text-anchor="middle" x="4219" y="-907.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4219" y="-891.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_16&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4024.9023,-1167.1286C4042.3604,-1150.9901 4069.8946,-1125.5371 4098.7979,-1098.8184"/>
<polygon fill="#000000" stroke="#000000" points="4101.2031,-1101.3614 4106.1705,-1092.0031 4096.4514,-1096.2212 4101.2031,-1101.3614"/>
</g>
<!-- header_33 -->
<g id="node34" class="node">
<title>header_33</title>
<ellipse fill="none" stroke="#000000" cx="4544" cy="-987.7019" rx="85.1565" ry="18"/>
<text text-anchor="middle" x="4544" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : make_ast_node</text>
</g>
<!-- section_17&#45;&gt;header_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;header_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.1996,-1183.6379C5697.2223,-1179.7531 4696.9353,-1163.8371 4638,-1130.6022 4593.462,-1105.4861 4566.3115,-1049.5084 4553.3076,-1015.547"/>
<polygon fill="#000000" stroke="#000000" points="4556.452,-1013.9558 4549.7225,-1005.7727 4549.8802,-1016.3664 4556.452,-1013.9558"/>
</g>
<!-- block_34 -->
<g id="node35" class="node">
<title>block_34</title>
<ellipse fill="none" stroke="#000000" cx="4713" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4713" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 101&#45;104</text>
</g>
<!-- section_17&#45;&gt;block_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;block_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.4104,-1183.4761C5717.3737,-1179.2435 4837.5795,-1162.8583 4787,-1130.6022 4746.721,-1104.915 4727.2352,-1049.7879 4718.7356,-1016.0098"/>
<polygon fill="#000000" stroke="#000000" points="4722.0447,-1014.7915 4716.3496,-1005.8574 4715.2304,-1016.393 4722.0447,-1014.7915"/>
</g>
<!-- block_35 -->
<g id="node36" class="node">
<title>block_35</title>
<ellipse fill="none" stroke="#000000" cx="4862" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4862" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 105&#45;107</text>
</g>
<!-- section_17&#45;&gt;block_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;block_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.5787,-1183.0218C5739.0052,-1177.6302 4981.0846,-1158.7213 4937,-1130.6022 4896.6074,-1104.838 4876.7136,-1049.7368 4867.9556,-1015.9843"/>
<polygon fill="#000000" stroke="#000000" points="4871.2531,-1014.7314 4865.4915,-1005.8402 4864.4509,-1016.3838 4871.2531,-1014.7314"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="5033" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5033" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 108&#45;130</text>
</g>
<!-- section_17&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.5164,-1184.042C5775.1257,-1181.9634 5202.348,-1172.4646 5129,-1130.6022 5084.3046,-1105.0928 5056.3036,-1049.2508 5042.7597,-1015.4206"/>
<polygon fill="#000000" stroke="#000000" points="5045.873,-1013.7646 5039.0181,-1005.6861 5039.339,-1016.2761 5045.873,-1013.7646"/>
</g>
<!-- block_37 -->
<g id="node38" class="node">
<title>block_37</title>
<ellipse fill="none" stroke="#000000" cx="5204" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5204" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 132&#45;133</text>
</g>
<!-- section_17&#45;&gt;block_37 -->
<g id="edge37" class="edge">
<title>section_17&#45;&gt;block_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5983.3803,-1183.5189C5798.9886,-1180.294 5337.042,-1168.4884 5279,-1130.6022 5238.9864,-1104.4838 5219.0006,-1049.7455 5210.1162,-1016.1108"/>
<polygon fill="#000000" stroke="#000000" points="5213.4123,-1014.8601 5207.6105,-1005.9951 5206.6176,-1016.5433 5213.4123,-1014.8601"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="5375" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5375" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 134&#45;150</text>
</g>
<!-- section_17&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>section_17&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5984.6443,-1181.3305C5836.3361,-1174.2921 5514.2294,-1156.2464 5471,-1130.6022 5426.9721,-1104.4842 5398.885,-1049.3461 5385.1168,-1015.7125"/>
<polygon fill="#000000" stroke="#000000" points="5388.2215,-1014.0439 5381.3019,-1006.0208 5381.7079,-1016.6078 5388.2215,-1014.0439"/>
</g>
<!-- block_39 -->
<g id="node40" class="node">
<title>block_39</title>
<ellipse fill="none" stroke="#000000" cx="5546" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5546" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 152&#45;154</text>
</g>
<!-- section_17&#45;&gt;block_39 -->
<g id="edge39" class="edge">
<title>section_17&#45;&gt;block_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5986.6469,-1179.3523C5870.0023,-1170.3469 5650.4201,-1150.9493 5621,-1130.6022 5581.6999,-1103.4219 5561.4769,-1049.0365 5552.3548,-1015.7558"/>
<polygon fill="#000000" stroke="#000000" points="5555.6612,-1014.5612 5549.773,-1005.7532 5548.8833,-1016.3107 5555.6612,-1014.5612"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="5717" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5717" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 155&#45;208</text>
</g>
<!-- section_17&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_17&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5993.0696,-1175.7764C5930.5035,-1166.4083 5841.8712,-1150.2553 5813,-1130.6022 5770.9062,-1101.9481 5742.3206,-1048.1398 5727.9075,-1015.3506"/>
<polygon fill="#000000" stroke="#000000" points="5731.0235,-1013.7342 5723.8902,-1005.9006 5724.5815,-1016.4728 5731.0235,-1013.7342"/>
</g>
<!-- block_41 -->
<g id="node42" class="node">
<title>block_41</title>
<ellipse fill="none" stroke="#000000" cx="5888" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5888" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 210&#45;212</text>
</g>
<!-- section_17&#45;&gt;block_41 -->
<g id="edge41" class="edge">
<title>section_17&#45;&gt;block_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6020.0429,-1169.0106C6001.0814,-1159.9562 5978.9884,-1147.0622 5963,-1130.6022 5930.5523,-1097.1973 5908.6231,-1046.9312 5897.232,-1015.78"/>
<polygon fill="#000000" stroke="#000000" points="5900.4073,-1014.261 5893.7729,-1006.0005 5893.8079,-1016.5953 5900.4073,-1014.261"/>
</g>
<!-- codeblock_42 -->
<g id="node43" class="node">
<title>codeblock_42</title>
<ellipse fill="none" stroke="#000000" cx="6059" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6059" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 213&#45;217</text>
</g>
<!-- section_17&#45;&gt;codeblock_42 -->
<g id="edge42" class="edge">
<title>section_17&#45;&gt;codeblock_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6059,-1166.4312C6059,-1131.9979 6059,-1057.0248 6059,-1015.9696"/>
<polygon fill="#000000" stroke="#000000" points="6062.5001,-1015.8289 6059,-1005.8289 6055.5001,-1015.829 6062.5001,-1015.8289"/>
</g>
<!-- block_43 -->
<g id="node44" class="node">
<title>block_43</title>
<ellipse fill="none" stroke="#000000" cx="6387" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6387" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 219&#45;220</text>
</g>
<!-- section_17&#45;&gt;block_43 -->
<g id="edge43" class="edge">
<title>section_17&#45;&gt;block_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6089.4417,-1167.883C6108.4061,-1157.3678 6133.2498,-1143.4111 6155,-1130.6022 6225.6965,-1088.9681 6307.087,-1038.1571 6352.2322,-1009.7136"/>
<polygon fill="#000000" stroke="#000000" points="6354.1729,-1012.6275 6360.764,-1004.3324 6350.4386,-1006.7068 6354.1729,-1012.6275"/>
</g>
<!-- codeblock_44 -->
<g id="node45" class="node">
<title>codeblock_44</title>
<ellipse fill="none" stroke="#000000" cx="6760" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6760" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 221&#45;228</text>
</g>
<!-- section_17&#45;&gt;codeblock_44 -->
<g id="edge44" class="edge">
<title>section_17&#45;&gt;codeblock_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6133.6306,-1181.5935C6215.6507,-1176.6881 6350.5638,-1163.8768 6462,-1130.6022 6561.2106,-1100.978 6668.6253,-1042.1133 6723.3819,-1009.951"/>
<polygon fill="#000000" stroke="#000000" points="6725.2017,-1012.9411 6732.0268,-1004.8375 6721.6379,-1006.9162 6725.2017,-1012.9411"/>
</g>
<!-- block_45 -->
<g id="node46" class="node">
<title>block_45</title>
<ellipse fill="none" stroke="#000000" cx="7197" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="7197" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 230&#45;232</text>
</g>
<!-- section_17&#45;&gt;block_45 -->
<g id="edge45" class="edge">
<title>section_17&#45;&gt;block_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.1348,-1182.6562C6305.3615,-1177.7129 6720.1945,-1162.7213 6856,-1130.6022 6970.9702,-1103.4108 7096.8845,-1041.454 7158.5791,-1008.7761"/>
<polygon fill="#000000" stroke="#000000" points="7160.3869,-1011.7787 7167.5625,-1003.9837 7157.092,-1005.6025 7160.3869,-1011.7787"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="7660" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7660" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 233&#45;240</text>
</g>
<!-- section_17&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>section_17&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.7691,-1184.2735C6364.8368,-1182.7957 7052.9491,-1174.7064 7272,-1130.6022 7401.8852,-1104.4508 7546.1659,-1041.7286 7616.5701,-1008.7621"/>
<polygon fill="#000000" stroke="#000000" points="7618.4519,-1011.7445 7626.005,-1004.3148 7615.4672,-1005.4127 7618.4519,-1011.7445"/>
</g>
<!-- block_47 -->
<g id="node48" class="node">
<title>block_47</title>
<ellipse fill="none" stroke="#000000" cx="8124" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="8124" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 242&#45;243</text>
</g>
<!-- section_17&#45;&gt;block_47 -->
<g id="edge47" class="edge">
<title>section_17&#45;&gt;block_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.4402,-1183.7008C6442.4658,-1179.8161 7596.0622,-1163.2067 7756,-1130.6022 7880.4947,-1105.223 8017.6609,-1041.6643 8083.862,-1008.5303"/>
<polygon fill="#000000" stroke="#000000" points="8085.7507,-1011.4978 8093.1044,-1003.8706 8082.5994,-1005.2472 8085.7507,-1011.4978"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="8586" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8586" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 244&#45;271</text>
</g>
<!-- section_17&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_17&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.7204,-1184.1619C6491.1822,-1181.8911 7993.3482,-1170.0411 8199,-1130.6022 8328.9933,-1105.6727 8472.9847,-1042.2646 8543.0181,-1008.9257"/>
<polygon fill="#000000" stroke="#000000" points="8544.8957,-1011.907 8552.4001,-1004.4281 8541.8697,-1005.5948 8544.8957,-1011.907"/>
</g>
<!-- block_49 -->
<g id="node50" class="node">
<title>block_49</title>
<ellipse fill="none" stroke="#000000" cx="9048" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9048" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 273&#45;275</text>
</g>
<!-- section_17&#45;&gt;block_49 -->
<g id="edge49" class="edge">
<title>section_17&#45;&gt;block_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.7402,-1183.7909C6551.7737,-1179.2298 8553.9865,-1156.0737 8682,-1130.6022 8806.343,-1105.861 8943.0535,-1041.7226 9008.633,-1008.4338"/>
<polygon fill="#000000" stroke="#000000" points="9010.473,-1011.424 9017.7826,-1003.7545 9007.2857,-1005.1917 9010.473,-1011.424"/>
</g>
<!-- codeblock_50 -->
<g id="node51" class="node">
<title>codeblock_50</title>
<ellipse fill="none" stroke="#000000" cx="9453" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9453" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 276&#45;280</text>
</g>
<!-- section_17&#45;&gt;codeblock_50 -->
<g id="edge50" class="edge">
<title>section_17&#45;&gt;codeblock_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.7934,-1184.1003C6592.4643,-1180.9652 8972.6502,-1163.1416 9123,-1130.6022 9234.7879,-1106.4085 9355.5779,-1043.6605 9415.2376,-1009.9288"/>
<polygon fill="#000000" stroke="#000000" points="9417.3236,-1012.7684 9424.277,-1004.7745 9413.8563,-1006.6875 9417.3236,-1012.7684"/>
</g>
<!-- block_51 -->
<g id="node52" class="node">
<title>block_51</title>
<ellipse fill="none" stroke="#000000" cx="9860" cy="-987.7019" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="9860" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 284&#45;285</text>
</g>
<!-- section_17&#45;&gt;block_51 -->
<g id="edge51" class="edge">
<title>section_17&#45;&gt;block_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.6799,-1184.3168C6628.4863,-1182.3445 9376.9297,-1169.6397 9549,-1130.6022 9655.4898,-1106.4429 9769.3531,-1043.3314 9825.1287,-1009.6408"/>
<polygon fill="#000000" stroke="#000000" points="9827.175,-1012.4925 9833.8925,-1004.2995 9823.5319,-1006.5152 9827.175,-1012.4925"/>
</g>
<!-- codeblock_52 -->
<g id="node53" class="node">
<title>codeblock_52</title>
<ellipse fill="none" stroke="#000000" cx="10034" cy="-987.7019" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10034" y="-983.5019" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 286&#45;288</text>
</g>
<!-- section_17&#45;&gt;codeblock_52 -->
<g id="edge52" class="edge">
<title>section_17&#45;&gt;codeblock_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6134.5825,-1184.5047C6668.0856,-1183.7014 9847.9455,-1176.972 9935,-1130.6022 9981.1861,-1106.001 10010.2226,-1049.1734 10024.1537,-1015.0572"/>
<polygon fill="#000000" stroke="#000000" points="10027.4422,-1016.2583 10027.8396,-1005.6709 10020.9265,-1013.6997 10027.4422,-1016.2583"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2321,-422.4008 2267,-422.4008 2267,-386.4008 2321,-386.4008 2321,-422.4008"/>
</g>
<!-- header_33&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>header_33&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4538.2148,-969.5213C4526.9356,-937.5234 4498.6593,-871.9653 4449,-844.8016 4345.7045,-788.2989 2416.1887,-889.014 2330,-808.8016 2223.2809,-709.4823 2265.5047,-506.6796 2285.6625,-432.4361"/>
<polygon fill="#000000" stroke="#000000" points="2289.1346,-433.0157 2288.4561,-422.4426 2282.393,-431.1311 2289.1346,-433.0157"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="2754.5,-424.3029 2339.5,-424.3029 2339.5,-384.4987 2754.5,-384.4987 2754.5,-424.3029"/>
<text text-anchor="middle" x="2547" y="-392.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to look for a metatable in the defined parser.</text>
</g>
<!-- block_34&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>block_34&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4709.6464,-969.6834C4702.6664,-937.9425 4683.2911,-872.7781 4638,-844.8016 4549.3611,-790.049 2851.8367,-863.2326 2763,-808.8016 2622.9877,-723.015 2568.3643,-512.8765 2552.4315,-434.5123"/>
<polygon fill="#000000" stroke="#000000" points="2555.7982,-433.4932 2550.4352,-424.356 2548.9296,-434.8433 2555.7982,-433.4932"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3047.5,-424.3029 2772.5,-424.3029 2772.5,-384.4987 3047.5,-384.4987 3047.5,-424.3029"/>
<text text-anchor="middle" x="2910" y="-408.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">Which means we need to pass that in. </text>
</g>
<!-- block_35&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>block_35&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4858.7659,-969.6993C4851.9975,-937.9836 4833.0622,-872.8578 4788,-844.8016 4706.2985,-793.9334 3134.1869,-864.9223 3056,-808.8016 2931.1912,-719.2169 2912.6979,-512.2818 2910.2435,-434.5979"/>
<polygon fill="#000000" stroke="#000000" points="2913.7405,-434.4302 2909.9942,-424.5198 2906.7426,-434.6033 2913.7405,-434.4302"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3578.5,-570.4014 3065.5,-570.4014 3065.5,-238.4002 3578.5,-238.4002 3578.5,-570.4014"/>
<text text-anchor="middle" x="3322" y="-555.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function make_ast_node(metatables, id, first, t, last, str, root)</text>
<text text-anchor="middle" x="3322" y="-539.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type(t[1]) == &quot;table&quot; then &#160;&#160;&#160;</text>
<text text-anchor="middle" x="3322" y="-524.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if t[1].span then</text>
<text text-anchor="middle" x="3322" y="-509.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.val = t[1].val</text>
<text text-anchor="middle" x="3322" y="-493.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.first = t[1].first</text>
<text text-anchor="middle" x="3322" y="-478.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t.last = t[1].last</text>
<text text-anchor="middle" x="3322" y="-462.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;t[1] = nil</text>
<text text-anchor="middle" x="3322" y="-447.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3322" y="-432.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.first = first</text>
<text text-anchor="middle" x="3322" y="-416.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;t.last = last</text>
<text text-anchor="middle" x="3322" y="-401.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3322" y="-385.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.id = id</text>
<text text-anchor="middle" x="3322" y="-370.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;t.root = root</text>
<text text-anchor="middle" x="3322" y="-355.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setmetatable(t,epnf.Node)</text>
<text text-anchor="middle" x="3322" y="-339.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return t</text>
<text text-anchor="middle" x="3322" y="-324.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="3322" y="-308.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3322" y="-277.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function anon_node (t) </text>
<text text-anchor="middle" x="3322" y="-262.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return unpack(t)</text>
<text text-anchor="middle" x="3322" y="-246.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>codeblock_36&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5027.0686,-969.5628C5015.5353,-937.6308 4986.7541,-872.1736 4937,-844.8016 4805.529,-772.4734 3718.0544,-881.8821 3587,-808.8016 3497.4305,-758.8546 3432.9966,-664.4723 3390.1075,-579.4447"/>
<polygon fill="#000000" stroke="#000000" points="3393.2229,-577.849 3385.6348,-570.455 3386.9557,-580.9672 3393.2229,-577.849"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3843.5,-422.4008 3596.5,-422.4008 3596.5,-386.4008 3843.5,-386.4008 3843.5,-422.4008"/>
<text text-anchor="middle" x="3720" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> some useful/common lpeg patterns</text>
</g>
<!-- block_37&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>block_37&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5200.6212,-969.7239C5193.6013,-938.0473 5174.1649,-872.9813 5129,-844.8016 5008.5727,-769.6636 3965.7063,-893.7683 3852,-808.8016 3729.356,-717.1562 3718.7833,-508.7509 3719.1986,-432.7828"/>
<polygon fill="#000000" stroke="#000000" points="3722.701,-432.6084 3719.3276,-422.565 3715.7015,-432.52 3722.701,-432.6084"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="4248.5,-523.9013 3861.5,-523.9013 3861.5,-284.9003 4248.5,-284.9003 4248.5,-523.9013"/>
<text text-anchor="middle" x="4055" y="-508.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Cp = L.Cp()</text>
<text text-anchor="middle" x="4055" y="-493.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local L_Carg_1 = L.Carg( 1 )</text>
<text text-anchor="middle" x="4055" y="-477.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function E( msg )</text>
<text text-anchor="middle" x="4055" y="-462.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.Cmt( L_Carg_1 * L.Cc( msg ), parse_error )</text>
<text text-anchor="middle" x="4055" y="-447.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4055" y="-431.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function EOF( msg )</text>
<text text-anchor="middle" x="4055" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &#45;L.P( 1 ) + E( msg )</text>
<text text-anchor="middle" x="4055" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4055" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local letter = L.R( &quot;az&quot;, &quot;AZ&quot; ) + L.P&quot;_&quot;</text>
<text text-anchor="middle" x="4055" y="-370.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local digit = L.R&quot;09&quot;</text>
<text text-anchor="middle" x="4055" y="-354.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ID = L.C( letter * (letter+digit)^0 )</text>
<text text-anchor="middle" x="4055" y="-339.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function W( s )</text>
<text text-anchor="middle" x="4055" y="-323.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.P( s ) * &#45;(letter+digit)</text>
<text text-anchor="middle" x="4055" y="-308.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4055" y="-293.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local WS = L.S&quot; \r\n\t\f\v&quot;</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_38&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5369.0451,-969.6054C5357.4745,-937.7408 5328.6361,-872.3869 5279,-844.8016 5179.7783,-789.6591 4353.5434,-870.0968 4258,-808.8016 4162.8478,-747.7575 4110.5251,-627.5536 4082.9478,-533.9917"/>
<polygon fill="#000000" stroke="#000000" points="4086.2469,-532.8004 4080.1121,-524.1624 4079.5212,-534.7407 4086.2469,-532.8004"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4717,-423.7014 4267,-423.7014 4267,-385.1002 4717,-385.1002 4717,-423.7014"/>
<text text-anchor="middle" x="4492" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">setup an environment where you can easily define lpeg grammars</text>
<text text-anchor="middle" x="4492" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> with lots of syntax sugar</text>
</g>
<!-- block_39&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>block_39&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5542.5079,-969.5645C5535.3509,-937.9396 5515.7613,-873.3585 5471,-844.8016 5331.2666,-755.6545 4867.5417,-895.0489 4726,-808.8016 4582.7708,-721.5261 4518.2562,-511.4067 4498.7413,-433.8271"/>
<polygon fill="#000000" stroke="#000000" points="4502.0607,-432.6671 4496.2828,-423.7865 4495.2616,-434.332 4502.0607,-432.6671"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5241,-808.7025 4735,-808.7025 4735,-.0992 5241,-.0992 5241,-808.7025"/>
<text text-anchor="middle" x="4988" y="-793.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.define( func, g, unsuppressed)</text>
<text text-anchor="middle" x="4988" y="-778.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;g = g or {}</text>
<text text-anchor="middle" x="4988" y="-762.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local suppressed = {}</text>
<text text-anchor="middle" x="4988" y="-747.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env = {}</text>
<text text-anchor="middle" x="4988" y="-732.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local node_mts = {}</text>
<text text-anchor="middle" x="4988" y="-716.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local env_index = {</text>
<text text-anchor="middle" x="4988" y="-701.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;START = function( name ) g[ 1 ] = name end,</text>
<text text-anchor="middle" x="4988" y="-685.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;SUPPRESS = function( ... )</text>
<text text-anchor="middle" x="4988" y="-670.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;suppressed = {}</text>
<text text-anchor="middle" x="4988" y="-655.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i = 1, select( &#39;#&#39;, ... ) do</text>
<text text-anchor="middle" x="4988" y="-639.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;suppressed[ select( i, ... ) ] = true</text>
<text text-anchor="middle" x="4988" y="-624.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4988" y="-608.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end,</text>
<text text-anchor="middle" x="4988" y="-593.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;E = E,</text>
<text text-anchor="middle" x="4988" y="-578.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;EOF = EOF,</text>
<text text-anchor="middle" x="4988" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;ID = ID,</text>
<text text-anchor="middle" x="4988" y="-547.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;W = W,</text>
<text text-anchor="middle" x="4988" y="-531.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;WS = WS,</text>
<text text-anchor="middle" x="4988" y="-516.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;}</text>
<text text-anchor="middle" x="4988" y="-501.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; copy lpeg shortcuts</text>
<text text-anchor="middle" x="4988" y="-485.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for k,v in pairs( L ) do</text>
<text text-anchor="middle" x="4988" y="-470.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if string.match( k, &quot;^%u%w*$&quot; ) then</text>
<text text-anchor="middle" x="4988" y="-454.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;env_index[ k ] = v</text>
<text text-anchor="middle" x="4988" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4988" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4988" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env_index, { __index = _G } )</text>
<text text-anchor="middle" x="4988" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;setmetatable( env, {</text>
<text text-anchor="middle" x="4988" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__index = env_index,</text>
<text text-anchor="middle" x="4988" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;__newindex = function( _, name, val )</text>
<text text-anchor="middle" x="4988" y="-347.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if suppressed[ name ] and not unsuppressed then</text>
<text text-anchor="middle" x="4988" y="-331.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = L.Ct( val ) / anon_node</text>
<text text-anchor="middle" x="4988" y="-316.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[ name ] = v</text>
<text text-anchor="middle" x="4988" y="-300.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4988" y="-285.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ( L.Cc(node_mts)</text>
<text text-anchor="middle" x="4988" y="-270.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Cc( name ) </text>
<text text-anchor="middle" x="4988" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4988" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Ct( val ) </text>
<text text-anchor="middle" x="4988" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L_Cp </text>
<text text-anchor="middle" x="4988" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(1)</text>
<text text-anchor="middle" x="4988" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* L.Carg(2)) / make_ast_node</text>
<text text-anchor="middle" x="4988" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;g[name] = v</text>
<text text-anchor="middle" x="4988" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4988" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4988" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;} )</text>
<text text-anchor="middle" x="4988" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; call passed function with custom environment (5.1&#45; and 5.2&#45;style)</text>
<text text-anchor="middle" x="4988" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if _VERSION == &quot;Lua 5.1&quot; then</text>
<text text-anchor="middle" x="4988" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;setfenv( func, env )</text>
<text text-anchor="middle" x="4988" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="4988" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;func( env )</text>
<text text-anchor="middle" x="4988" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert( g[ 1 ] and g[ g[ 1 ] ], &quot;no start rule defined&quot; )</text>
<text text-anchor="middle" x="4988" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return g</text>
<text text-anchor="middle" x="4988" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_40&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5710.6828,-969.4087C5698.7166,-937.8416 5669.5081,-873.7465 5621,-844.8016 5478.7383,-759.9137 5391.5493,-894.8722 5250,-808.8016 5249.9079,-808.7456 5249.8157,-808.6895 5249.7237,-808.6334"/>
<polygon fill="#000000" stroke="#000000" points="5251.5615,-805.6546 5241.2354,-803.2834 5247.829,-811.5765 5251.5615,-805.6546"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="5737,-423.7014 5259,-423.7014 5259,-385.1002 5737,-385.1002 5737,-423.7014"/>
<text text-anchor="middle" x="5498" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. also allows</text>
<text text-anchor="middle" x="5498" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> to set the name of the string for error messages</text>
</g>
<!-- block_41&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>block_41&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5882.3097,-969.3223C5872.3988,-939.8579 5849.4735,-881.6317 5813,-844.8016 5789.2135,-820.7825 5770.5752,-832.0132 5746,-808.8016 5623.6253,-693.2173 5538.5749,-504.4217 5509.2545,-432.9922"/>
<polygon fill="#000000" stroke="#000000" points="5512.4921,-431.6623 5505.4891,-423.712 5506.0057,-434.2942 5512.4921,-431.6623"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6205,-431.6013 5755,-431.6013 5755,-377.2003 6205,-377.2003 6205,-431.6013"/>
<text text-anchor="middle" x="5980" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parse( g, name, input, ... )</text>
<text text-anchor="middle" x="5980" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return L.match( L.P( g ), input, 1, name, ... ), name, input</text>
<text text-anchor="middle" x="5980" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_42&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_42&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6056.5491,-969.6052C6045.5236,-888.1984 6000.3965,-554.9998 5985.099,-442.0494"/>
<polygon fill="#000000" stroke="#000000" points="5988.5244,-441.2619 5983.7138,-431.8222 5981.5877,-442.2015 5988.5244,-441.2619"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="6708.5,-422.4008 6223.5,-422.4008 6223.5,-386.4008 6708.5,-386.4008 6708.5,-422.4008"/>
<text text-anchor="middle" x="6466" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to the contents of a file and return the ast</text>
</g>
<!-- block_43&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>block_43&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6389.4509,-969.6052C6400.7963,-885.8364 6448.2509,-535.4525 6462.1557,-432.7855"/>
<polygon fill="#000000" stroke="#000000" points="6465.6648,-432.9537 6463.5386,-422.5744 6458.7281,-432.0142 6465.6648,-432.9537"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="7197.5,-454.8018 6726.5,-454.8018 6726.5,-353.9998 7197.5,-353.9998 7197.5,-454.8018"/>
<text text-anchor="middle" x="6962" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsefile( g, fname, ... )</text>
<text text-anchor="middle" x="6962" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local f = assert( io.open( fname, &quot;r&quot; ) )</text>
<text text-anchor="middle" x="6962" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local a,n,i = epnf.parse( g, fname, assert( f:read&quot;*a&quot; ), ... )</text>
<text text-anchor="middle" x="6962" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;f:close()</text>
<text text-anchor="middle" x="6962" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return a,n,i</text>
<text text-anchor="middle" x="6962" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_44&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_44&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6766.267,-969.6052C6792.7794,-893.0473 6896.4104,-593.7994 6941.1953,-464.477"/>
<polygon fill="#000000" stroke="#000000" points="6944.6082,-465.3174 6944.5733,-454.7226 6937.9936,-463.0267 6944.6082,-465.3174"/>
</g>
<!-- leaf_65 -->
<g id="node66" class="node">
<title>leaf_65</title>
<polygon fill="none" stroke="#c0c0c0" points="7708,-423.7014 7216,-423.7014 7216,-385.1002 7708,-385.1002 7708,-423.7014"/>
<text text-anchor="middle" x="7462" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> apply a given grammar to a string and return the ast. automatically</text>
<text text-anchor="middle" x="7462" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> picks a sensible name for error messages</text>
</g>
<!-- block_45&#45;&gt;leaf_65 -->
<g id="edge65" class="edge">
<title>block_45&#45;&gt;leaf_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7205.2215,-969.6052C7243.2634,-885.8698 7402.3348,-535.732 7449.0486,-432.9086"/>
<polygon fill="#000000" stroke="#000000" points="7452.261,-434.2994 7453.2107,-423.7472 7445.8878,-431.404 7452.261,-434.2994"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="8176,-454.8018 7726,-454.8018 7726,-353.9998 8176,-353.9998 8176,-454.8018"/>
<text text-anchor="middle" x="7951" y="-439.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.parsestring( g, str, ... )</text>
<text text-anchor="middle" x="7951" y="-424.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local s = string.sub( str, 1, 20 )</text>
<text text-anchor="middle" x="7951" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if #s &lt; #str then s = s .. &quot;...&quot; end</text>
<text text-anchor="middle" x="7951" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local name = &quot;[\&quot;&quot; .. string.gsub( s, &quot;\n&quot;, &quot;\\n&quot; ) .. &quot;\&quot;]&quot;</text>
<text text-anchor="middle" x="7951" y="-377.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return epnf.parse( g, name, str, ... )</text>
<text text-anchor="middle" x="7951" y="-362.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>codeblock_46&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7669.0282,-969.6052C7707.2983,-892.8938 7857.1107,-592.5991 7921.4158,-463.7016"/>
<polygon fill="#000000" stroke="#000000" points="7924.5629,-465.2333 7925.8952,-454.7226 7918.2991,-462.1084 7924.5629,-465.2333"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="8637.5,-422.4008 8194.5,-422.4008 8194.5,-386.4008 8637.5,-386.4008 8637.5,-422.4008"/>
<text text-anchor="middle" x="8416" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> export a function for reporting errors during ast validation</text>
</g>
<!-- block_47&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>block_47&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8133.0592,-969.6052C8175.1635,-885.4973 8351.8181,-532.611 8402.4087,-431.5508"/>
<polygon fill="#000000" stroke="#000000" points="8405.5556,-433.0833 8406.9023,-422.5744 8399.2961,-429.9498 8405.5556,-433.0833"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="9098.5,-609.0018 8655.5,-609.0018 8655.5,-199.7999 9098.5,-199.7999 9098.5,-609.0018"/>
<text text-anchor="middle" x="8877" y="-594.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">epnf.raise = raise_error</text>
<text text-anchor="middle" x="8877" y="-562.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function write( ... ) return io.stderr:write( ... ) end</text>
<text text-anchor="middle" x="8877" y="-531.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dump_ast( node, prefix )</text>
<text text-anchor="middle" x="8877" y="-515.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;if type( node ) == &quot;table&quot; then</text>
<text text-anchor="middle" x="8877" y="-500.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( &quot;{&quot; )</text>
<text text-anchor="middle" x="8877" y="-485.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if next( node ) ~= nil then</text>
<text text-anchor="middle" x="8877" y="-469.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;write( &quot;\n&quot; )</text>
<text text-anchor="middle" x="8877" y="-454.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type( node.id ) == &quot;string&quot; and</text>
<text text-anchor="middle" x="8877" y="-438.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;type( node.pos ) == &quot;number&quot; then</text>
<text text-anchor="middle" x="8877" y="-423.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;id = &quot;, node.id,</text>
<text text-anchor="middle" x="8877" y="-408.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;, &#160;pos = &quot;, tostring( node.pos ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8877" y="-392.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8877" y="-377.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for k,v in pairs( node ) do</text>
<text text-anchor="middle" x="8877" y="-361.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if k ~= &quot;id&quot; and k ~= &quot;pos&quot; then</text>
<text text-anchor="middle" x="8877" y="-346.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write( prefix, &quot; &#160;&quot;, tostring( k ), &quot; = &quot; )</text>
<text text-anchor="middle" x="8877" y="-331.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dump_ast( v, prefix..&quot; &#160;&quot; )</text>
<text text-anchor="middle" x="8877" y="-315.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8877" y="-300.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8877" y="-284.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="8877" y="-269.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( prefix, &quot;}\n&quot; )</text>
<text text-anchor="middle" x="8877" y="-254.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;else</text>
<text text-anchor="middle" x="8877" y="-238.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;write( tostring( node ), &quot;\n&quot; )</text>
<text text-anchor="middle" x="8877" y="-223.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="8877" y="-207.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>codeblock_48&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8595.0282,-969.6052C8621.6408,-916.2609 8702.1918,-754.7988 8770.4194,-618.0385"/>
<polygon fill="#000000" stroke="#000000" points="8773.5626,-619.5782 8774.8949,-609.0674 8767.2988,-616.4532 8773.5626,-619.5782"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="9559.5,-423.7014 9116.5,-423.7014 9116.5,-385.1002 9559.5,-385.1002 9559.5,-423.7014"/>
<text text-anchor="middle" x="9338" y="-408.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> write a string representation of the given ast to stderr for</text>
<text text-anchor="middle" x="9338" y="-393.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> debugging</text>
</g>
<!-- block_49&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>block_49&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9056.9971,-969.6052C9098.6279,-885.8698 9272.706,-535.732 9323.8268,-432.9086"/>
<polygon fill="#000000" stroke="#000000" points="9327.0637,-434.2598 9328.3815,-423.7472 9320.7956,-431.1434 9327.0637,-434.2598"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="9796.5,-431.6013 9577.5,-431.6013 9577.5,-377.2003 9796.5,-377.2003 9796.5,-431.6013"/>
<text text-anchor="middle" x="9687" y="-416.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function epnf.dumpast( node )</text>
<text text-anchor="middle" x="9687" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return dump_ast( node, &quot;&quot; )</text>
<text text-anchor="middle" x="9687" y="-385.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_50&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>codeblock_50&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9466.9231,-969.9029C9490.649,-938.8224 9539.1422,-871.9332 9568,-808.8016 9626.8682,-680.0167 9664.7279,-514.8963 9679.7082,-441.931"/>
<polygon fill="#000000" stroke="#000000" points="9683.1952,-442.3457 9681.7521,-431.8496 9676.3348,-440.9547 9683.1952,-442.3457"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="9971,-422.4008 9815,-422.4008 9815,-386.4008 9971,-386.4008 9971,-422.4008"/>
<text text-anchor="middle" x="9893" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> return module table</text>
</g>
<!-- block_51&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>block_51&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9861.0238,-969.6052C9865.763,-885.8364 9885.5858,-535.4525 9891.3941,-432.7855"/>
<polygon fill="#000000" stroke="#000000" points="9894.9013,-432.7562 9891.9718,-422.5744 9887.9125,-432.3607 9894.9013,-432.7562"/>
</g>
<!-- leaf_72 -->
<g id="node73" class="node">
<title>leaf_72</title>
<polygon fill="none" stroke="#c0c0c0" points="10082.5,-422.4008 9989.5,-422.4008 9989.5,-386.4008 10082.5,-386.4008 10082.5,-422.4008"/>
<text text-anchor="middle" x="10036" y="-400.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">return epnf</text>
</g>
<!-- codeblock_52&#45;&gt;leaf_72 -->
<g id="edge72" class="edge">
<title>codeblock_52&#45;&gt;leaf_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10034.062,-969.6052C10034.3493,-885.8364 10035.5507,-535.4525 10035.9027,-432.7855"/>
<polygon fill="#000000" stroke="#000000" points="10039.4033,-432.5864 10035.9377,-422.5744 10032.4033,-432.5623 10039.4033,-432.5864"/>
</g>
</g>
</svg>