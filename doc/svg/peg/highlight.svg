<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3472pt" height="1204pt"
 viewBox="0.00 0.00 3472.00 1204.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1200.4014)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1200.4014 3468,-1200.4014 3468,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1418" cy="-1178.4014" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1418" y="-1174.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 196</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1418" cy="-1106.4014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1418" y="-1102.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;196</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1418,-1160.2328C1418,-1152.5324 1418,-1143.3758 1418,-1134.8181"/>
<polygon fill="#000000" stroke="#000000" points="1421.5001,-1134.8147 1418,-1124.8147 1414.5001,-1134.8147 1421.5001,-1134.8147"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="890" cy="-1034.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="890" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1353.7266,-1102.179C1239.2335,-1094.1879 1004.6152,-1075.5604 926,-1052.4014 923.876,-1051.7757 921.7263,-1051.0292 919.5897,-1050.2012"/>
<polygon fill="#000000" stroke="#000000" points="920.9904,-1046.9938 910.4275,-1046.1728 918.173,-1053.4017 920.9904,-1046.9938"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="981" cy="-1034.4014" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="981" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;1</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1355.1832,-1100.9405C1278.9703,-1093.5328 1146.908,-1078.1778 1036,-1052.4014 1032.3608,-1051.5556 1028.6183,-1050.5757 1024.8793,-1049.5185"/>
<polygon fill="#000000" stroke="#000000" points="1025.6473,-1046.095 1015.0635,-1046.5786 1023.6388,-1052.8007 1025.6473,-1046.095"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="1096" cy="-1034.4014" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="1096" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 2&#45;14</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1362.9833,-1096.5244C1309.7457,-1086.623 1226.9201,-1070.3109 1156,-1052.4014 1152.1365,-1051.4258 1148.1498,-1050.3607 1144.1544,-1049.2517"/>
<polygon fill="#000000" stroke="#000000" points="1144.8464,-1045.8095 1134.2698,-1046.4307 1142.9253,-1052.5408 1144.8464,-1045.8095"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1221" cy="-1034.4014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1221" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 15&#45;63</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1378.1341,-1091.8312C1346.2076,-1080.1626 1301.3596,-1063.7714 1267.7442,-1051.4856"/>
<polygon fill="#000000" stroke="#000000" points="1268.7348,-1048.1213 1258.141,-1047.9758 1266.3319,-1054.6959 1268.7348,-1048.1213"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1351" cy="-1034.4014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1351" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 64&#45;66</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1401.4382,-1088.6037C1393.1824,-1079.7317 1383.064,-1068.8583 1374.0626,-1059.1852"/>
<polygon fill="#000000" stroke="#000000" points="1376.5147,-1056.6824 1367.1401,-1051.746 1371.3902,-1061.4511 1376.5147,-1056.6824"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1485" cy="-1034.4014" rx="60.1864" ry="18"/>
<text text-anchor="middle" x="1485" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 67&#45;118</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1434.5618,-1088.6037C1442.8176,-1079.7317 1452.936,-1068.8583 1461.9374,-1059.1852"/>
<polygon fill="#000000" stroke="#000000" points="1464.6098,-1061.4511 1468.8599,-1051.746 1459.4853,-1056.6824 1464.6098,-1061.4511"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1911" cy="-1034.4014" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="1911" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 119&#45;127</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1476.0031,-1097.9304C1567.6986,-1084.5388 1745.7132,-1058.5407 1843.18,-1044.3062"/>
<polygon fill="#000000" stroke="#000000" points="1843.8286,-1047.7487 1853.2178,-1042.8402 1842.8169,-1040.8222 1843.8286,-1047.7487"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="2213" cy="-1034.4014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2213" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 128&#45;177</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1480.3823,-1100.7517C1625.5682,-1087.6028 1985.4746,-1055.0075 2140.2914,-1040.9864"/>
<polygon fill="#000000" stroke="#000000" points="2140.9897,-1044.4375 2150.6332,-1040.0497 2140.3583,-1037.4661 2140.9897,-1044.4375"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="2848" cy="-1034.4014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2848" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 178&#45;182</text>
</g>
<!-- section_1&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1482.6903,-1103.1443C1717.299,-1091.3318 2522.7402,-1050.7782 2773.1187,-1038.1717"/>
<polygon fill="#000000" stroke="#000000" points="2773.3962,-1041.6622 2783.2075,-1037.6637 2773.0441,-1034.6711 2773.3962,-1041.6622"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="3132" cy="-1034.4014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3132" y="-1030.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 183&#45;196</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1483.7013,-1105.218C1693.5999,-1101.1859 2366.8112,-1086.309 2923,-1052.4014 2968.5758,-1049.623 3019.6393,-1045.2486 3059.884,-1041.508"/>
<polygon fill="#000000" stroke="#000000" points="3060.2429,-1044.9898 3069.8727,-1040.5721 3059.5898,-1038.0204 3060.2429,-1044.9898"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="252" cy="-962.4014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="252" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_3&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>block_3&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M947.6126,-1021.9958C940.5609,-1019.7951 933.1028,-1017.7718 926,-1016.4014 683.7262,-969.6595 617.3333,-1006.7255 372,-980.4014 345.6618,-977.5754 316.2463,-973.1829 293.1307,-969.4446"/>
<polygon fill="#000000" stroke="#000000" points="293.4217,-965.9456 282.9871,-967.781 292.2888,-972.8533 293.4217,-965.9456"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="454" cy="-962.4014" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="454" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 2&#45;10</text>
</g>
<!-- block_4&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_4&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1058.8395,-1022.0033C1051.3451,-1019.8581 1043.4729,-1017.854 1036,-1016.4014 860.0189,-982.1939 649.7522,-969.4827 536.3327,-964.8896"/>
<polygon fill="#000000" stroke="#000000" points="536.4616,-961.392 526.3316,-964.4955 536.186,-968.3866 536.4616,-961.392"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="876" cy="-962.4014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="876" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 15&#45;61</text>
</g>
<!-- block_5&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>block_5&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1179.1672,-1022.2895C1171.489,-1020.2169 1163.5241,-1018.1658 1156,-1016.4014 1086.0909,-1000.0079 1005.5184,-984.8565 948.8065,-974.8021"/>
<polygon fill="#000000" stroke="#000000" points="949.3128,-971.3374 938.8568,-973.047 948.0967,-978.231 949.3128,-971.3374"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="1231" cy="-962.4014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1231" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_6&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>block_6&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1324.3681,-1018.4223C1305.8895,-1007.3351 1281.2194,-992.5331 1261.8788,-980.9287"/>
<polygon fill="#000000" stroke="#000000" points="1263.5123,-977.8272 1253.1366,-975.6834 1259.9108,-983.8296 1263.5123,-977.8272"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="1485" cy="-962.4014" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="1485" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 67&#45;117</text>
</g>
<!-- block_7&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>block_7&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1485,-1016.2328C1485,-1008.5324 1485,-999.3758 1485,-990.8181"/>
<polygon fill="#000000" stroke="#000000" points="1488.5001,-990.8147 1485,-980.8147 1481.5001,-990.8147 1488.5001,-990.8147"/>
</g>
<!-- structure_22 -->
<g id="node23" class="node">
<title>structure_22</title>
<ellipse fill="none" stroke="#000000" cx="1798" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="1798" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_8&#45;&gt;structure_22 -->
<g id="edge22" class="edge">
<title>block_8&#45;&gt;structure_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1885.0755,-1017.8832C1868.8733,-1007.5596 1847.8707,-994.1774 1830.5518,-983.1424"/>
<polygon fill="#000000" stroke="#000000" points="1832.1902,-980.0363 1821.8759,-977.6144 1828.4287,-985.9398 1832.1902,-980.0363"/>
</g>
<!-- structure_23 -->
<g id="node24" class="node">
<title>structure_23</title>
<ellipse fill="none" stroke="#000000" cx="1911" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="1911" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_8&#45;&gt;structure_23 -->
<g id="edge23" class="edge">
<title>block_8&#45;&gt;structure_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911,-1016.2328C1911,-1008.5324 1911,-999.3758 1911,-990.8181"/>
<polygon fill="#000000" stroke="#000000" points="1914.5001,-990.8147 1911,-980.8147 1907.5001,-990.8147 1914.5001,-990.8147"/>
</g>
<!-- structure_24 -->
<g id="node25" class="node">
<title>structure_24</title>
<ellipse fill="none" stroke="#000000" cx="2024" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="2024" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_8&#45;&gt;structure_24 -->
<g id="edge24" class="edge">
<title>block_8&#45;&gt;structure_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1936.9245,-1017.8832C1953.1267,-1007.5596 1974.1293,-994.1774 1991.4482,-983.1424"/>
<polygon fill="#000000" stroke="#000000" points="1993.5713,-985.9398 2000.1241,-977.6144 1989.8098,-980.0363 1993.5713,-985.9398"/>
</g>
<!-- structure_25 -->
<g id="node26" class="node">
<title>structure_25</title>
<ellipse fill="none" stroke="#000000" cx="2140" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="2140" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_8&#45;&gt;structure_25 -->
<g id="edge25" class="edge">
<title>block_8&#45;&gt;structure_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1954.0731,-1020.8588C1994.29,-1008.2142 2054.0811,-989.4153 2094.9303,-976.5718"/>
<polygon fill="#000000" stroke="#000000" points="2096.1369,-979.8614 2104.6267,-973.5232 2094.0373,-973.1837 2096.1369,-979.8614"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="2365" cy="-962.4014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2365" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 128&#45;176</text>
</g>
<!-- block_9&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>block_9&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2245.9817,-1018.7785C2267.8728,-1008.409 2296.864,-994.6764 2320.7523,-983.3608"/>
<polygon fill="#000000" stroke="#000000" points="2322.4281,-986.44 2329.9671,-978.996 2319.4314,-980.1138 2322.4281,-986.44"/>
</g>
<!-- structure_40 -->
<g id="node41" class="node">
<title>structure_40</title>
<ellipse fill="none" stroke="#000000" cx="2735" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="2735" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_10&#45;&gt;structure_40 -->
<g id="edge40" class="edge">
<title>block_10&#45;&gt;structure_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2821.7915,-1017.7022C2805.6907,-1007.4433 2784.9303,-994.2154 2767.751,-983.2693"/>
<polygon fill="#000000" stroke="#000000" points="2769.4517,-980.2029 2759.1374,-977.781 2765.6901,-986.1064 2769.4517,-980.2029"/>
</g>
<!-- structure_41 -->
<g id="node42" class="node">
<title>structure_41</title>
<ellipse fill="none" stroke="#000000" cx="2848" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="2848" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_10&#45;&gt;structure_41 -->
<g id="edge41" class="edge">
<title>block_10&#45;&gt;structure_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2848,-1016.2328C2848,-1008.5324 2848,-999.3758 2848,-990.8181"/>
<polygon fill="#000000" stroke="#000000" points="2851.5001,-990.8147 2848,-980.8147 2844.5001,-990.8147 2851.5001,-990.8147"/>
</g>
<!-- structure_42 -->
<g id="node43" class="node">
<title>structure_42</title>
<ellipse fill="none" stroke="#000000" cx="2961" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="2961" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_10&#45;&gt;structure_42 -->
<g id="edge42" class="edge">
<title>block_10&#45;&gt;structure_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2874.2085,-1017.7022C2890.3093,-1007.4433 2911.0697,-994.2154 2928.249,-983.2693"/>
<polygon fill="#000000" stroke="#000000" points="2930.3099,-986.1064 2936.8626,-977.781 2926.5483,-980.2029 2930.3099,-986.1064"/>
</g>
<!-- structure_43 -->
<g id="node44" class="node">
<title>structure_43</title>
<ellipse fill="none" stroke="#000000" cx="3077" cy="-962.4014" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="3077" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_10&#45;&gt;structure_43 -->
<g id="edge43" class="edge">
<title>block_10&#45;&gt;structure_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2891.3424,-1020.7741C2931.5918,-1008.1193 2991.277,-989.3536 3032.0378,-976.538"/>
<polygon fill="#000000" stroke="#000000" points="3033.223,-979.8344 3041.7128,-973.4961 3031.1234,-973.1567 3033.223,-979.8344"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="3268" cy="-962.4014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3268" y="-958.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 183&#45;196</text>
</g>
<!-- block_11&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>block_11&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3162.5211,-1018.2432C3181.6226,-1008.1307 3206.4621,-994.9803 3227.2378,-983.9814"/>
<polygon fill="#000000" stroke="#000000" points="3228.9621,-987.0289 3236.1623,-979.2567 3225.6868,-980.8423 3228.9621,-987.0289"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-544.2007 0,-544.2007 0,-508.2007 54,-508.2007 54,-544.2007"/>
</g>
<!-- prose_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>prose_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M220.7133,-957.7842C172.406,-949.9761 83.1164,-932.6165 63,-908.4014 -23.7133,-804.0206 4.7343,-623.9086 20.0104,-554.5577"/>
<polygon fill="#000000" stroke="#000000" points="23.5143,-554.9352 22.3294,-544.4069 16.6901,-553.3762 23.5143,-554.9352"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="543.5,-584.6016 72.5,-584.6016 72.5,-467.7998 543.5,-467.7998 543.5,-584.6016"/>
<text text-anchor="middle" x="308" y="-569.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45; Generates a terminal syntax highlighter for a given grammar. </text>
<text text-anchor="middle" x="308" y="-537.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local clu = require &quot;clu/prelude&quot;</text>
<text text-anchor="middle" x="308" y="-522.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local lpeg = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="308" y="-507.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast = require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="308" y="-491.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="308" y="-476.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local tableand = util.tableand</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M447.9124,-944.2138C428.15,-885.1701 365.0874,-696.7594 330.771,-594.2332"/>
<polygon fill="#000000" stroke="#000000" points="334.0354,-592.9587 327.5423,-584.5867 327.3973,-595.1805 334.0354,-592.9587"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="976.5,-878.302 561.5,-878.302 561.5,-174.0994 976.5,-174.0994 976.5,-878.302"/>
<text text-anchor="middle" x="769" y="-863.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local p = clu.env.palette</text>
<text text-anchor="middle" x="769" y="-831.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> testrules = { atom &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;White&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-816.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pattern &#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Blue&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-801.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;optional &#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-785.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;more_than_one &#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-770.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;some_number &#160;&#160;&#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-754.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;some_suffix &#160;&#160;&#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-739.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;which_suffix &#160;&#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-724.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;maybe &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Green&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-708.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Yellow&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-693.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;range &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Yellow&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-677.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;literal &#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Yellow&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-662.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PEL &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Grey&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-647.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PER &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Grey&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-631.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hidden_rule &#160;&#160;&#160;= {&quot;Cyan&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-616.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hidden_pattern = {&quot;Cyan&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-600.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hidden_match &#160;&#160;= {&quot;Cyan&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-585.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;repeats &#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Red&quot;,&quot;Clear&quot;},</text>
<text text-anchor="middle" x="769" y="-570.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment &#160;&#160;&#160;&#160;&#160;&#160;&#160;= {&quot;Grey&quot;,&quot;Clear&quot;}}</text>
<text text-anchor="middle" x="769" y="-522.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">function makerules(rules)</text>
<text text-anchor="middle" x="769" y="-507.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local rule_table = {}</text>
<text text-anchor="middle" x="769" y="-491.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local p = nil</text>
<text text-anchor="middle" x="769" y="-476.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; this logic belongs in a palette </text>
<text text-anchor="middle" x="769" y="-461.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; object which may be called. </text>
<text text-anchor="middle" x="769" y="-445.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if clu.env.ansi then </text>
<text text-anchor="middle" x="769" y="-430.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;p = clu.env.palette.default</text>
<text text-anchor="middle" x="769" y="-414.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="769" y="-399.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;p = clu.env.palette.no_color</text>
<text text-anchor="middle" x="769" y="-384.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end </text>
<text text-anchor="middle" x="769" y="-368.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for k,v in pairs(rules) do</text>
<text text-anchor="middle" x="769" y="-353.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(v) == &quot;table&quot; then </text>
<text text-anchor="middle" x="769" y="-337.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rule_table[k] = { p[v[1]] , p[v[2]] }</text>
<text text-anchor="middle" x="769" y="-322.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else &#45;&#45; string or function</text>
<text text-anchor="middle" x="769" y="-307.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error &quot;error in makerules, non&#45;table values NYI&quot;</text>
<text text-anchor="middle" x="769" y="-291.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="769" y="-276.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="769" y="-260.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return rule_table</text>
<text text-anchor="middle" x="769" y="-245.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="769" y="-182.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;local testrules = { atom = {&quot;&quot;,&quot;&quot;}, lhs = {&quot;&quot;,&quot;&quot;}}</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M871.5386,-944.2138C868.3404,-931.1761 863.595,-911.8306 857.8707,-888.4949"/>
<polygon fill="#000000" stroke="#000000" points="861.2321,-887.5065 855.4505,-878.6283 854.4337,-889.1742 861.2321,-887.5065"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1227.5,-545.5013 994.5,-545.5013 994.5,-506.9001 1227.5,-506.9001 1227.5,-545.5013"/>
<text text-anchor="middle" x="1111" y="-530.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> wraps a value in a rule, or</text>
<text text-anchor="middle" x="1111" y="-515.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns it if the rule is nil.</text>
</g>
<!-- prose_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>prose_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1226.0721,-944.4886C1207.5684,-877.2273 1142.1205,-639.3239 1119.0898,-555.6072"/>
<polygon fill="#000000" stroke="#000000" points="1122.4017,-554.4505 1116.3745,-545.7371 1115.6524,-556.3073 1122.4017,-554.4505"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1724,-908.6023 1246,-908.6023 1246,-143.7992 1724,-143.7992 1724,-908.6023"/>
<text text-anchor="middle" x="1485" y="-893.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function rulewrap_value(ast,rules)</text>
<text text-anchor="middle" x="1485" y="-877.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if rules[ast.id] then</text>
<text text-anchor="middle" x="1485" y="-862.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local rule = rules[ast.id]</text>
<text text-anchor="middle" x="1485" y="-847.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if type (rule) == &quot;string&quot; then &#45;&#45; pre only</text>
<text text-anchor="middle" x="1485" y="-831.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return rule..ast.val..p.Clear</text>
<text text-anchor="middle" x="1485" y="-816.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type (rule) == &quot;table&quot; then &#45;&#45; pre and post</text>
<text text-anchor="middle" x="1485" y="-800.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return rule[1]..ast.val..rule[2]</text>
<text text-anchor="middle" x="1485" y="-785.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type (rule) == &quot;function&quot; then &#45;&#45; function over value</text>
<text text-anchor="middle" x="1485" y="-770.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print &quot;function reached in rulewrap_value&quot;</text>
<text text-anchor="middle" x="1485" y="-754.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1485" y="-739.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-723.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1485" y="-708.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return ast.val</text>
<text text-anchor="middle" x="1485" y="-693.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-677.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1485" y="-646.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function rulewrap_open(ast,rules)</text>
<text text-anchor="middle" x="1485" y="-630.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if rules[ast.id] then</text>
<text text-anchor="middle" x="1485" y="-615.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local rule = rules[ast.id]</text>
<text text-anchor="middle" x="1485" y="-600.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(rule) == &quot;string&quot; then &#45;&#45; pre only</text>
<text text-anchor="middle" x="1485" y="-584.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return rule</text>
<text text-anchor="middle" x="1485" y="-569.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(rule) == &quot;table&quot; then &#45;&#45; use pre</text>
<text text-anchor="middle" x="1485" y="-553.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return rule[1]</text>
<text text-anchor="middle" x="1485" y="-538.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(rule) == &quot;function&quot; then &#45;&#45; fn over span</text>
<text text-anchor="middle" x="1485" y="-523.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print &quot;function reached in rulewrap_start&quot;</text>
<text text-anchor="middle" x="1485" y="-507.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1485" y="-492.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-476.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else </text>
<text text-anchor="middle" x="1485" y="-461.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return &quot;&quot; </text>
<text text-anchor="middle" x="1485" y="-446.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-430.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1485" y="-399.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function rulewrap_close(ast,rules)</text>
<text text-anchor="middle" x="1485" y="-383.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if rules[ast.id] then</text>
<text text-anchor="middle" x="1485" y="-368.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local rule = rules[ast.id]</text>
<text text-anchor="middle" x="1485" y="-353.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(rule) == &quot;string&quot; then </text>
<text text-anchor="middle" x="1485" y="-337.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1485" y="-322.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(rule) == &quot;table&quot; then</text>
<text text-anchor="middle" x="1485" y="-306.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return rule[2]</text>
<text text-anchor="middle" x="1485" y="-291.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(rule) == &quot;function&quot; then</text>
<text text-anchor="middle" x="1485" y="-276.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print &quot;function reached in rulewrap_close&quot;</text>
<text text-anchor="middle" x="1485" y="-260.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1485" y="-245.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-229.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="1485" y="-214.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1485" y="-199.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1485" y="-183.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1485" y="-152.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45; highlights a Node.</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1485,-944.2138C1485,-937.3101 1485,-928.6378 1485,-918.541"/>
<polygon fill="#000000" stroke="#000000" points="1488.5001,-918.4352 1485,-908.4352 1481.5001,-918.4353 1488.5001,-918.4352"/>
</g>
<!-- handleline_26 -->
<g id="node27" class="node">
<title>handleline_26</title>
<ellipse fill="none" stroke="#000000" cx="1792" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="1792" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_22&#45;&gt;handleline_26 -->
<g id="edge26" class="edge">
<title>structure_22&#45;&gt;handleline_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1797.7498,-944.2138C1796.8159,-876.3171 1793.5289,-637.3503 1792.3911,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="1795.8885,-554.4169 1792.2512,-544.466 1788.8892,-554.5132 1795.8885,-554.4169"/>
</g>
<!-- handleline_29 -->
<g id="node30" class="node">
<title>handleline_29</title>
<ellipse fill="none" stroke="#000000" cx="1911" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="1911" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_23&#45;&gt;handleline_29 -->
<g id="edge29" class="edge">
<title>structure_23&#45;&gt;handleline_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911,-944.2138C1911,-876.3171 1911,-637.3503 1911,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="1914.5001,-554.466 1911,-544.466 1907.5001,-554.466 1914.5001,-554.466"/>
</g>
<!-- handleline_32 -->
<g id="node33" class="node">
<title>handleline_32</title>
<ellipse fill="none" stroke="#000000" cx="2030" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="2030" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_24&#45;&gt;handleline_32 -->
<g id="edge32" class="edge">
<title>structure_24&#45;&gt;handleline_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2024.2502,-944.2138C2025.1841,-876.3171 2028.4711,-637.3503 2029.6089,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="2033.1108,-554.5132 2029.7488,-544.466 2026.1115,-554.4169 2033.1108,-554.5132"/>
</g>
<!-- handleline_35 -->
<g id="node36" class="node">
<title>handleline_35</title>
<ellipse fill="none" stroke="#000000" cx="2149" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="2149" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_25&#45;&gt;handleline_35 -->
<g id="edge35" class="edge">
<title>structure_25&#45;&gt;handleline_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2140.3753,-944.2138C2141.7762,-876.3171 2146.7067,-637.3503 2148.4134,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="2151.916,-554.5361 2148.6231,-544.466 2144.9175,-554.3917 2151.916,-554.5361"/>
</g>
<!-- handle_27 -->
<g id="node28" class="node">
<title>handle_27</title>
<ellipse fill="none" stroke="#000000" cx="1792" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="1792" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_26&#45;&gt;handle_27 -->
<g id="edge27" class="edge">
<title>handleline_26&#45;&gt;handle_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1792,-508.0131C1792,-440.1164 1792,-201.1496 1792,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="1795.5001,-118.2653 1792,-108.2653 1788.5001,-118.2653 1795.5001,-118.2653"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1819,-36 1765,-36 1765,0 1819,0 1819,-36"/>
</g>
<!-- handle_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>handle_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1792,-71.8314C1792,-64.131 1792,-54.9743 1792,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="1795.5001,-46.4132 1792,-36.4133 1788.5001,-46.4133 1795.5001,-46.4132"/>
</g>
<!-- handle_30 -->
<g id="node31" class="node">
<title>handle_30</title>
<ellipse fill="none" stroke="#000000" cx="1911" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="1911" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_29&#45;&gt;handle_30 -->
<g id="edge30" class="edge">
<title>handleline_29&#45;&gt;handle_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911,-508.0131C1911,-440.1164 1911,-201.1496 1911,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="1914.5001,-118.2653 1911,-108.2653 1907.5001,-118.2653 1914.5001,-118.2653"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1938,-36 1884,-36 1884,0 1938,0 1938,-36"/>
</g>
<!-- handle_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>handle_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1911,-71.8314C1911,-64.131 1911,-54.9743 1911,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="1914.5001,-46.4132 1911,-36.4133 1907.5001,-46.4133 1914.5001,-46.4132"/>
</g>
<!-- handle_33 -->
<g id="node34" class="node">
<title>handle_33</title>
<ellipse fill="none" stroke="#000000" cx="2030" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="2030" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_32&#45;&gt;handle_33 -->
<g id="edge33" class="edge">
<title>handleline_32&#45;&gt;handle_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2030,-508.0131C2030,-440.1164 2030,-201.1496 2030,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="2033.5001,-118.2653 2030,-108.2653 2026.5001,-118.2653 2033.5001,-118.2653"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2057,-36 2003,-36 2003,0 2057,0 2057,-36"/>
</g>
<!-- handle_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>handle_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2030,-71.8314C2030,-64.131 2030,-54.9743 2030,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="2033.5001,-46.4132 2030,-36.4133 2026.5001,-46.4133 2033.5001,-46.4132"/>
</g>
<!-- handle_36 -->
<g id="node37" class="node">
<title>handle_36</title>
<ellipse fill="none" stroke="#000000" cx="2149" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="2149" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_35&#45;&gt;handle_36 -->
<g id="edge36" class="edge">
<title>handleline_35&#45;&gt;handle_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2149,-508.0131C2149,-440.1164 2149,-201.1496 2149,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="2152.5001,-118.2653 2149,-108.2653 2145.5001,-118.2653 2152.5001,-118.2653"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2176,-36 2122,-36 2122,0 2176,0 2176,-36"/>
</g>
<!-- handle_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>handle_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2149,-71.8314C2149,-64.131 2149,-54.9743 2149,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="2152.5001,-46.4132 2149,-36.4133 2145.5001,-46.4133 2152.5001,-46.4132"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2660.5,-892.7021 2217.5,-892.7021 2217.5,-159.6993 2660.5,-159.6993 2660.5,-892.7021"/>
<text text-anchor="middle" x="2439" y="-877.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">local function light(ast, rules)</text>
<text text-anchor="middle" x="2439" y="-862.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if rules then </text>
<text text-anchor="middle" x="2439" y="-846.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;rules = makerules(rules)</text>
<text text-anchor="middle" x="2439" y="-831.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else </text>
<text text-anchor="middle" x="2439" y="-815.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;rules = makerules(testrules) </text>
<text text-anchor="middle" x="2439" y="-800.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-769.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local source = ast:root().str</text>
<text text-anchor="middle" x="2439" y="-753.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local queue = {}</text>
<text text-anchor="middle" x="2439" y="-738.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2439" y="-722.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local cursor = 1</text>
<text text-anchor="middle" x="2439" y="-707.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local gap = &quot;&quot;</text>
<text text-anchor="middle" x="2439" y="-692.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local ndx, first, last = ast:range()</text>
<text text-anchor="middle" x="2439" y="-676.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local new = true</text>
<text text-anchor="middle" x="2439" y="-661.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for i = first, last do</text>
<text text-anchor="middle" x="2439" y="-645.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local node, close, _ = ndx(i)</text>
<text text-anchor="middle" x="2439" y="-630.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if rules[node.id] </text>
<text text-anchor="middle" x="2439" y="-615.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;and node.val == nil then &#45;&#45; open regional rule</text>
<text text-anchor="middle" x="2439" y="-599.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gap = source:sub(cursor,node.first&#45;1)</text>
<text text-anchor="middle" x="2439" y="-584.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cursor = node.first</text>
<text text-anchor="middle" x="2439" y="-568.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;queue[close] = node</text>
<text text-anchor="middle" x="2439" y="-553.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..gap..rulewrap_open(node,rules)</text>
<text text-anchor="middle" x="2439" y="-538.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif node.id and node.val then &#45;&#45; wrap values in rule</text>
<text text-anchor="middle" x="2439" y="-522.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if new then </text>
<text text-anchor="middle" x="2439" y="-507.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..source:sub(1,ndx[1].first&#45;1)</text>
<text text-anchor="middle" x="2439" y="-491.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;new = false</text>
<text text-anchor="middle" x="2439" y="-476.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-461.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if cursor &lt;= node.first then</text>
<text text-anchor="middle" x="2439" y="-445.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gap = source:sub(cursor,node.first&#45;1)</text>
<text text-anchor="middle" x="2439" y="-430.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-414.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cursor = node.last+1</text>
<text text-anchor="middle" x="2439" y="-399.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..gap..rulewrap_value(node,rules)</text>
<text text-anchor="middle" x="2439" y="-384.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-368.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if queue[i] then &#45;&#45; close regional rule</text>
<text text-anchor="middle" x="2439" y="-353.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gap = source:sub(cursor,queue[i].last&#45;1)</text>
<text text-anchor="middle" x="2439" y="-337.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cursor = queue[i].last</text>
<text text-anchor="middle" x="2439" y="-322.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase</text>
<text text-anchor="middle" x="2439" y="-307.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;..rulewrap_open(queue[i],rules)</text>
<text text-anchor="middle" x="2439" y="-291.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;..gap</text>
<text text-anchor="middle" x="2439" y="-276.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;..rulewrap_close(queue[i],rules)</text>
<text text-anchor="middle" x="2439" y="-260.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-245.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2439" y="-230.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;phrase = phrase..source:sub(cursor,&#45;1)</text>
<text text-anchor="middle" x="2439" y="-214.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="2439" y="-199.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2439" y="-167.9" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45; generates a highlighter from a rule table</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>codeblock_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2368.0855,-944.2138C2369.8119,-934.0375 2372.1902,-920.0183 2375.0335,-903.2582"/>
<polygon fill="#000000" stroke="#000000" points="2378.5379,-903.5263 2376.7599,-893.0817 2371.6365,-902.3555 2378.5379,-903.5263"/>
</g>
<!-- handleline_44 -->
<g id="node45" class="node">
<title>handleline_44</title>
<ellipse fill="none" stroke="#000000" cx="2729" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="2729" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_40&#45;&gt;handleline_44 -->
<g id="edge44" class="edge">
<title>structure_40&#45;&gt;handleline_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2734.7498,-944.2138C2733.8159,-876.3171 2730.5289,-637.3503 2729.3911,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="2732.8885,-554.4169 2729.2512,-544.466 2725.8892,-554.5132 2732.8885,-554.4169"/>
</g>
<!-- handleline_47 -->
<g id="node48" class="node">
<title>handleline_47</title>
<ellipse fill="none" stroke="#000000" cx="2848" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="2848" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_41&#45;&gt;handleline_47 -->
<g id="edge47" class="edge">
<title>structure_41&#45;&gt;handleline_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2848,-944.2138C2848,-876.3171 2848,-637.3503 2848,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="2851.5001,-554.466 2848,-544.466 2844.5001,-554.466 2851.5001,-554.466"/>
</g>
<!-- handleline_50 -->
<g id="node51" class="node">
<title>handleline_50</title>
<ellipse fill="none" stroke="#000000" cx="2967" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="2967" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_42&#45;&gt;handleline_50 -->
<g id="edge50" class="edge">
<title>structure_42&#45;&gt;handleline_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2961.2502,-944.2138C2962.1841,-876.3171 2965.4711,-637.3503 2966.6089,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="2970.1108,-554.5132 2966.7488,-544.466 2963.1115,-554.4169 2970.1108,-554.5132"/>
</g>
<!-- handleline_53 -->
<g id="node54" class="node">
<title>handleline_53</title>
<ellipse fill="none" stroke="#000000" cx="3086" cy="-526.2007" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="3086" y="-522.0007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_43&#45;&gt;handleline_53 -->
<g id="edge53" class="edge">
<title>structure_43&#45;&gt;handleline_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3077.3753,-944.2138C3078.7762,-876.3171 3083.7067,-637.3503 3085.4134,-554.633"/>
<polygon fill="#000000" stroke="#000000" points="3088.916,-554.5361 3085.6231,-544.466 3081.9175,-554.3917 3088.916,-554.5361"/>
</g>
<!-- handle_45 -->
<g id="node46" class="node">
<title>handle_45</title>
<ellipse fill="none" stroke="#000000" cx="2729" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="2729" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_44&#45;&gt;handle_45 -->
<g id="edge45" class="edge">
<title>handleline_44&#45;&gt;handle_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2729,-508.0131C2729,-440.1164 2729,-201.1496 2729,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="2732.5001,-118.2653 2729,-108.2653 2725.5001,-118.2653 2732.5001,-118.2653"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2756,-36 2702,-36 2702,0 2756,0 2756,-36"/>
</g>
<!-- handle_45&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>handle_45&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2729,-71.8314C2729,-64.131 2729,-54.9743 2729,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="2732.5001,-46.4132 2729,-36.4133 2725.5001,-46.4133 2732.5001,-46.4132"/>
</g>
<!-- handle_48 -->
<g id="node49" class="node">
<title>handle_48</title>
<ellipse fill="none" stroke="#000000" cx="2848" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="2848" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_47&#45;&gt;handle_48 -->
<g id="edge48" class="edge">
<title>handleline_47&#45;&gt;handle_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2848,-508.0131C2848,-440.1164 2848,-201.1496 2848,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="2851.5001,-118.2653 2848,-108.2653 2844.5001,-118.2653 2851.5001,-118.2653"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="2875,-36 2821,-36 2821,0 2875,0 2875,-36"/>
</g>
<!-- handle_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>handle_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2848,-71.8314C2848,-64.131 2848,-54.9743 2848,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="2851.5001,-46.4132 2848,-36.4133 2844.5001,-46.4133 2851.5001,-46.4132"/>
</g>
<!-- handle_51 -->
<g id="node52" class="node">
<title>handle_51</title>
<ellipse fill="none" stroke="#000000" cx="2967" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="2967" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_50&#45;&gt;handle_51 -->
<g id="edge51" class="edge">
<title>handleline_50&#45;&gt;handle_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2967,-508.0131C2967,-440.1164 2967,-201.1496 2967,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="2970.5001,-118.2653 2967,-108.2653 2963.5001,-118.2653 2970.5001,-118.2653"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2994,-36 2940,-36 2940,0 2994,0 2994,-36"/>
</g>
<!-- handle_51&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>handle_51&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2967,-71.8314C2967,-64.131 2967,-54.9743 2967,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="2970.5001,-46.4132 2967,-36.4133 2963.5001,-46.4133 2970.5001,-46.4132"/>
</g>
<!-- handle_54 -->
<g id="node55" class="node">
<title>handle_54</title>
<ellipse fill="none" stroke="#000000" cx="3086" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="3086" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_53&#45;&gt;handle_54 -->
<g id="edge54" class="edge">
<title>handleline_53&#45;&gt;handle_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3086,-508.0131C3086,-440.1164 3086,-201.1496 3086,-118.4323"/>
<polygon fill="#000000" stroke="#000000" points="3089.5001,-118.2653 3086,-108.2653 3082.5001,-118.2653 3089.5001,-118.2653"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="3113,-36 3059,-36 3059,0 3113,0 3113,-36"/>
</g>
<!-- handle_54&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>handle_54&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3086,-71.8314C3086,-64.131 3086,-54.9743 3086,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="3089.5001,-46.4132 3086,-36.4133 3082.5001,-46.4133 3089.5001,-46.4132"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3464,-623.1015 3154,-623.1015 3154,-429.3 3464,-429.3 3464,-623.1015"/>
<text text-anchor="middle" x="3309" y="-607.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function Highlighter(parser, rules)</text>
<text text-anchor="middle" x="3309" y="-592.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function lighter(source)</text>
<text text-anchor="middle" x="3309" y="-576.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(source) == &quot;string&quot; then</text>
<text text-anchor="middle" x="3309" y="-561.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;source = ast.parse(parser,source)</text>
<text text-anchor="middle" x="3309" y="-546.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3309" y="-530.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return light(source, rules)</text>
<text text-anchor="middle" x="3309" y="-515.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3309" y="-499.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return lighter</text>
<text text-anchor="middle" x="3309" y="-484.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3309" y="-453.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">return {Highlighter = Highlighter,</text>
<text text-anchor="middle" x="3309" y="-437.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;light = light}</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>codeblock_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3269.7095,-944.2138C3274.6132,-892.0429 3289.0105,-738.8694 3298.9439,-633.1876"/>
<polygon fill="#000000" stroke="#000000" points="3302.4396,-633.3973 3299.8908,-623.1136 3295.4703,-632.7421 3302.4396,-633.3973"/>
</g>
</g>
</svg>