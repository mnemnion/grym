<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3298pt" height="1397pt"
 viewBox="0.00 0.00 3297.50 1397.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1393.4016)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1393.4016 3293.5,-1393.4016 3293.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1537" cy="-1371.4016" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1537" y="-1367.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 151</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1537" cy="-1299.4016" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1537" y="-1295.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;151</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1537,-1353.233C1537,-1345.5325 1537,-1336.3759 1537,-1327.8182"/>
<polygon fill="#000000" stroke="#000000" points="1540.5001,-1327.8148 1537,-1317.8149 1533.5001,-1327.8149 1540.5001,-1327.8148"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="159" cy="-1227.4016" rx="27" ry="18"/>
<text text-anchor="middle" x="159" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1471.3576,-1298.3808C1218.983,-1294.2347 319.0565,-1277.3339 195,-1245.4016 193.0206,-1244.8921 191.0236,-1244.264 189.0388,-1243.5512"/>
<polygon fill="#000000" stroke="#000000" points="189.9272,-1240.1259 179.3548,-1239.4362 187.1896,-1246.5684 189.9272,-1240.1259"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="250" cy="-1227.4016" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="250" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;1</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1471.293,-1298.8764C1249.8331,-1296.7379 531.9577,-1286.7114 305,-1245.4016 301.108,-1244.6932 297.112,-1243.7769 293.1362,-1242.7333"/>
<polygon fill="#000000" stroke="#000000" points="293.9435,-1239.3237 283.3657,-1239.9234 292.0087,-1246.051 293.9435,-1239.3237"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="360" cy="-1227.4016" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="360" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 2&#45;8</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1472.7402,-1295.4733C1327.0764,-1286.5683 960.5966,-1264.1622 654,-1245.4016 571.0604,-1240.3265 474.9597,-1234.442 415.8217,-1230.8204"/>
<polygon fill="#000000" stroke="#000000" points="415.7754,-1227.3111 405.5801,-1230.1932 415.3474,-1234.298 415.7754,-1227.3111"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="713" cy="-1227.4016" rx="50.0142" ry="18"/>
<text text-anchor="middle" x="713" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 9&#45;11</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.3898,-1293.9308C1319.9174,-1280.4332 922.2847,-1245.6886 771.8469,-1232.5436"/>
<polygon fill="#000000" stroke="#000000" points="772.1413,-1229.056 761.8745,-1231.6722 771.5319,-1236.0295 772.1413,-1229.056"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1252" cy="-1227.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1252" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 12&#45;13</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1488.6536,-1287.1878C1438.076,-1274.4103 1358.8555,-1254.3967 1306.1939,-1241.0927"/>
<polygon fill="#000000" stroke="#000000" points="1306.9104,-1237.6638 1296.3577,-1238.6077 1305.1958,-1244.4506 1306.9104,-1237.6638"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1537" cy="-1227.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1537" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 14&#45;70</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1537,-1281.233C1537,-1273.5325 1537,-1264.3759 1537,-1255.8182"/>
<polygon fill="#000000" stroke="#000000" points="1540.5001,-1255.8148 1537,-1245.8149 1533.5001,-1255.8149 1540.5001,-1255.8148"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="1728" cy="-1227.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1728" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 71&#45;73</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1575.6517,-1284.8313C1606.3742,-1273.2501 1649.4379,-1257.0166 1681.946,-1244.7623"/>
<polygon fill="#000000" stroke="#000000" points="1683.5479,-1247.8989 1691.6705,-1241.0965 1681.0787,-1241.3488 1683.5479,-1247.8989"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="2065" cy="-1227.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2065" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 74&#45;76</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1596.0314,-1291.3519C1696.7157,-1277.6222 1900.6831,-1249.8084 2003.2159,-1235.8267"/>
<polygon fill="#000000" stroke="#000000" points="2003.9773,-1239.2553 2013.4127,-1234.4362 2003.0315,-1232.3195 2003.9773,-1239.2553"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="2572" cy="-1227.4016" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2572" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 77&#45;140</text>
</g>
<!-- section_1&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1600.9628,-1294.952C1784.5641,-1282.1797 2312.235,-1245.4722 2502.5288,-1232.2344"/>
<polygon fill="#000000" stroke="#000000" points="2502.9525,-1235.7134 2512.6855,-1231.5278 2502.4666,-1228.7303 2502.9525,-1235.7134"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="2797" cy="-1227.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2797" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 141&#45;142</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1602.4868,-1297.7281C1773.608,-1293.0243 2248.1526,-1277.8571 2642,-1245.4016 2670.0105,-1243.0934 2700.7743,-1239.6998 2727.4595,-1236.4796"/>
<polygon fill="#000000" stroke="#000000" points="2727.9711,-1239.9432 2737.473,-1235.2566 2727.1224,-1232.9949 2727.9711,-1239.9432"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="3117" cy="-1227.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3117" y="-1223.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 143&#45;151</text>
</g>
<!-- section_1&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1602.3267,-1297.5212C1796.0925,-1291.7797 2384.5132,-1273.161 2872,-1245.4016 2929.8403,-1242.1079 2995.2793,-1237.2416 3043.9678,-1233.399"/>
<polygon fill="#000000" stroke="#000000" points="3044.4026,-1236.8756 3054.0944,-1232.5955 3043.8489,-1229.8975 3044.4026,-1236.8756"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-1171.4016 0,-1171.4016 0,-1135.4016 54,-1135.4016 54,-1171.4016"/>
</g>
<!-- block_3&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>block_3&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M214.8735,-1215.6159C208.2881,-1213.4888 201.4479,-1211.3347 195,-1209.4016 139.7098,-1192.8259 121.1954,-1195.9435 63.7468,-1173.2605"/>
<polygon fill="#000000" stroke="#000000" points="64.7635,-1169.8963 54.1807,-1169.3915 62.1389,-1176.3856 64.7635,-1169.8963"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="140" cy="-1153.4016" rx="67.748" ry="18"/>
<text text-anchor="middle" x="140" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 2&#45;4</text>
</g>
<!-- block_4&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_4&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M324.6532,-1215.5122C288.6699,-1203.4087 232.5067,-1184.5175 191.5634,-1170.7456"/>
<polygon fill="#000000" stroke="#000000" points="192.622,-1167.4091 182.028,-1167.5383 190.3903,-1174.0438 192.622,-1167.4091"/>
</g>
<!-- structure_15 -->
<g id="node16" class="node">
<title>structure_15</title>
<ellipse fill="none" stroke="#000000" cx="270" cy="-1153.4016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="270" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_4&#45;&gt;structure_15 -->
<g id="edge15" class="edge">
<title>block_4&#45;&gt;structure_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M340.0261,-1210.9786C327.675,-1200.8232 311.6358,-1187.6355 298.0246,-1176.444"/>
<polygon fill="#000000" stroke="#000000" points="299.8652,-1173.4263 289.9181,-1169.7787 295.4195,-1178.8333 299.8652,-1173.4263"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="387,-1173.4016 333,-1173.4016 333,-1133.4016 387,-1133.4016 387,-1173.4016"/>
</g>
<!-- block_4&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_4&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M360,-1209.1095C360,-1201.4416 360,-1192.319 360,-1183.6987"/>
<polygon fill="#000000" stroke="#000000" points="363.5001,-1183.5643 360,-1173.5644 356.5001,-1183.5644 363.5001,-1183.5643"/>
</g>
<!-- structure_21 -->
<g id="node22" class="node">
<title>structure_21</title>
<ellipse fill="none" stroke="#000000" cx="450" cy="-1153.4016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="450" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_5&#45;&gt;structure_21 -->
<g id="edge21" class="edge">
<title>block_5&#45;&gt;structure_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M669.9791,-1217.791C627.2569,-1207.908 560.0694,-1191.4476 503,-1173.4016 499.2052,-1172.2016 495.2857,-1170.8813 491.3758,-1169.5085"/>
<polygon fill="#000000" stroke="#000000" points="492.3473,-1166.138 481.753,-1166.0272 489.9658,-1172.7205 492.3473,-1166.138"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="913.5,-1173.3037 512.5,-1173.3037 512.5,-1133.4995 913.5,-1133.4995 913.5,-1173.3037"/>
<text text-anchor="middle" x="713" y="-1141.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] Make header and footer configurable values of t</text>
</g>
<!-- block_5&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_5&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M713,-1209.1095C713,-1201.3807 713,-1192.1741 713,-1183.4935"/>
<polygon fill="#000000" stroke="#000000" points="716.5001,-1183.3006 713,-1173.3007 709.5001,-1183.3007 716.5001,-1183.3006"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1382,-1171.4016 932,-1171.4016 932,-1135.4016 1382,-1135.4016 1382,-1171.4016"/>
<text text-anchor="middle" x="1157" y="-1149.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45; [ ] Make leaf_font and leaf_color configurable values of t</text>
</g>
<!-- block_6&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_6&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1230.443,-1210.6098C1218.0212,-1200.9339 1202.185,-1188.5983 1188.4003,-1177.8608"/>
<polygon fill="#000000" stroke="#000000" points="1190.1713,-1174.8038 1180.1314,-1171.4197 1185.8697,-1180.3261 1190.1713,-1174.8038"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="1477" cy="-1153.4016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1477" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;69</text>
</g>
<!-- block_7&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>block_7&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1522.7808,-1209.8646C1515.3432,-1200.6916 1506.0966,-1189.2874 1497.8644,-1179.1344"/>
<polygon fill="#000000" stroke="#000000" points="1500.5506,-1176.89 1491.5339,-1171.3267 1495.1133,-1181.2986 1500.5506,-1176.89"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1626,-1171.4016 1572,-1171.4016 1572,-1135.4016 1626,-1135.4016 1626,-1171.4016"/>
</g>
<!-- block_7&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_7&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1551.6931,-1209.8646C1559.3221,-1200.759 1568.7931,-1189.4549 1577.2523,-1179.3586"/>
<polygon fill="#000000" stroke="#000000" points="1580.0255,-1181.4985 1583.7649,-1171.5855 1574.6598,-1177.0029 1580.0255,-1181.4985"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2052,-1172.7022 1644,-1172.7022 1644,-1134.101 2052,-1134.101 2052,-1172.7022"/>
<text text-anchor="middle" x="1848" y="-1157.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Recursively walk an AST, concatenating dot descriptions</text>
<text text-anchor="middle" x="1848" y="-1142.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> to the phrase. </text>
</g>
<!-- block_8&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_8&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1754.0382,-1211.3447C1769.6523,-1201.716 1789.8417,-1189.2659 1807.502,-1178.3754"/>
<polygon fill="#000000" stroke="#000000" points="1809.7944,-1181.0738 1816.469,-1172.8457 1806.1201,-1175.1156 1809.7944,-1181.0738"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2471.5,-1172.7022 2070.5,-1172.7022 2070.5,-1134.101 2471.5,-1134.101 2471.5,-1172.7022"/>
<text text-anchor="middle" x="2271" y="-1157.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] #todo allow nodes to skip themselves to collapse</text>
<text text-anchor="middle" x="2271" y="-1142.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;semantic intermediates</text>
</g>
<!-- block_9&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>block_9&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2102.305,-1214.0007C2131.5556,-1203.4933 2172.9379,-1188.6278 2207.3947,-1176.2501"/>
<polygon fill="#000000" stroke="#000000" points="2208.6859,-1179.5053 2216.9138,-1172.8306 2206.3193,-1172.9175 2208.6859,-1179.5053"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="2572" cy="-1153.4016" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2572" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 77&#45;139</text>
</g>
<!-- block_10&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>block_10&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2572,-1209.1095C2572,-1200.8651 2572,-1190.9392 2572,-1181.7638"/>
<polygon fill="#000000" stroke="#000000" points="2575.5001,-1181.4833 2572,-1171.4833 2568.5001,-1181.4833 2575.5001,-1181.4833"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2726,-1171.4016 2672,-1171.4016 2672,-1135.4016 2726,-1135.4016 2726,-1171.4016"/>
</g>
<!-- block_10&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>block_10&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2599.5571,-1211.3447C2618.1566,-1200.5072 2642.8905,-1186.0953 2663.0375,-1174.3561"/>
<polygon fill="#000000" stroke="#000000" points="2665.0548,-1177.2316 2671.933,-1169.1729 2661.5306,-1171.1834 2665.0548,-1177.2316"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3012,-1171.4016 2744,-1171.4016 2744,-1135.4016 3012,-1135.4016 3012,-1171.4016"/>
<text text-anchor="middle" x="2878" y="-1149.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> turn an AST into a dotfile string. </text>
</g>
<!-- block_11&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_11&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2816.1959,-1209.8646C2826.4588,-1200.4886 2839.2734,-1188.7815 2850.5688,-1178.4622"/>
<polygon fill="#000000" stroke="#000000" points="2853.0738,-1180.9144 2858.096,-1171.5855 2848.3524,-1175.7463 2853.0738,-1180.9144"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="3117" cy="-1153.4016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3117" y="-1149.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 143&#45;151</text>
</g>
<!-- block_12&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>block_12&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3117,-1209.1095C3117,-1200.8651 3117,-1190.9392 3117,-1181.7638"/>
<polygon fill="#000000" stroke="#000000" points="3120.5001,-1181.4833 3117,-1171.4833 3113.5001,-1181.4833 3120.5001,-1181.4833"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3276,-1171.4016 3222,-1171.4016 3222,-1135.4016 3276,-1135.4016 3276,-1171.4016"/>
</g>
<!-- block_12&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_12&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3145.968,-1211.162C3165.6683,-1200.1179 3191.877,-1185.4251 3212.9305,-1173.6223"/>
<polygon fill="#000000" stroke="#000000" points="3214.8894,-1176.5367 3221.9007,-1168.5936 3211.4663,-1170.4307 3214.8894,-1176.5367"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="210,-638.7008 54,-638.7008 54,-602.7008 210,-602.7008 210,-638.7008"/>
<text text-anchor="middle" x="132" y="-617.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45; Transform Module</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>codeblock_14&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M139.7292,-1135.3724C138.5505,-1056.8854 133.8613,-744.6427 132.4222,-648.8149"/>
<polygon fill="#000000" stroke="#000000" points="135.9206,-648.6717 132.2707,-638.7255 128.9213,-648.7769 135.9206,-648.6717"/>
</g>
<!-- handleline_17 -->
<g id="node18" class="node">
<title>handleline_17</title>
<ellipse fill="none" stroke="#000000" cx="278" cy="-620.7008" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="278" y="-616.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_15&#45;&gt;handleline_17 -->
<g id="edge17" class="edge">
<title>structure_15&#45;&gt;handleline_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M270.2708,-1135.3724C271.4495,-1056.8854 276.1387,-744.6427 277.5778,-648.8149"/>
<polygon fill="#000000" stroke="#000000" points="281.0787,-648.7769 277.7293,-638.7255 274.0794,-648.6717 281.0787,-648.7769"/>
</g>
<!-- handle_18 -->
<g id="node19" class="node">
<title>handle_18</title>
<ellipse fill="none" stroke="#000000" cx="278" cy="-90" rx="36.827" ry="18"/>
<text text-anchor="middle" x="278" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_17&#45;&gt;handle_18 -->
<g id="edge18" class="edge">
<title>handleline_17&#45;&gt;handle_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M278,-602.4329C278,-523.8093 278,-213.9177 278,-118.2696"/>
<polygon fill="#000000" stroke="#000000" points="281.5001,-118.1911 278,-108.1911 274.5001,-118.1911 281.5001,-118.1911"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="305,-36 251,-36 251,0 305,0 305,-36"/>
</g>
<!-- handle_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>handle_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M278,-71.8314C278,-64.131 278,-54.9743 278,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="281.5001,-46.4132 278,-36.4133 274.5001,-46.4133 281.5001,-46.4132"/>
</g>
<!-- hashline_22 -->
<g id="node23" class="node">
<title>hashline_22</title>
<ellipse fill="none" stroke="#000000" cx="450" cy="-620.7008" rx="43.0992" ry="18"/>
<text text-anchor="middle" x="450" y="-616.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashline</text>
</g>
<!-- structure_21&#45;&gt;hashline_22 -->
<g id="edge22" class="edge">
<title>structure_21&#45;&gt;hashline_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M450,-1135.3724C450,-1056.8854 450,-744.6427 450,-648.8149"/>
<polygon fill="#000000" stroke="#000000" points="453.5001,-648.7254 450,-638.7255 446.5001,-648.7255 453.5001,-648.7254"/>
</g>
<!-- hashtag_23 -->
<g id="node24" class="node">
<title>hashtag_23</title>
<ellipse fill="none" stroke="#000000" cx="450" cy="-90" rx="41.6544" ry="18"/>
<text text-anchor="middle" x="450" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashtag</text>
</g>
<!-- hashline_22&#45;&gt;hashtag_23 -->
<g id="edge23" class="edge">
<title>hashline_22&#45;&gt;hashtag_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M450,-602.4329C450,-523.8093 450,-213.9177 450,-118.2696"/>
<polygon fill="#000000" stroke="#000000" points="453.5001,-118.1911 450,-108.1911 446.5001,-118.1911 453.5001,-118.1911"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="477,-36 423,-36 423,0 477,0 477,-36"/>
</g>
<!-- hashtag_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>hashtag_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M450,-71.8314C450,-64.131 450,-54.9743 450,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="453.5001,-46.4132 450,-36.4133 446.5001,-46.4133 453.5001,-46.4132"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1740.5,-1043.9022 1213.5,-1043.9022 1213.5,-197.4994 1740.5,-197.4994 1740.5,-1043.9022"/>
<text text-anchor="middle" x="1477" y="-1028.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local t = {}</text>
<text text-anchor="middle" x="1477" y="-997.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_header = [=[</text>
<text text-anchor="middle" x="1477" y="-981.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">digraph hierarchy {</text>
<text text-anchor="middle" x="1477" y="-950.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">node [fontname=Helvetica]</text>
<text text-anchor="middle" x="1477" y="-935.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">edge [style=dashed]</text>
<text text-anchor="middle" x="1477" y="-903.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">]=]</text>
<text text-anchor="middle" x="1477" y="-872.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_footer = [=[</text>
<text text-anchor="middle" x="1477" y="-840.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="1477" y="-825.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">]=]</text>
<text text-anchor="middle" x="1477" y="-794.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local leaf_font &#160;= &quot;Inconsolata&quot;</text>
<text text-anchor="middle" x="1477" y="-778.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local leaf_color = &quot;Gray&quot;</text>
<text text-anchor="middle" x="1477" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function sanitize_string(str)</text>
<text text-anchor="middle" x="1477" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; filter \ and &quot;</text>
<text text-anchor="middle" x="1477" y="-716.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = str:gsub(&quot;\\&quot;, &quot;\\\\&quot;):gsub(&#39;&quot;&#39;, &#39;\\&quot;&#39;)</text>
<text text-anchor="middle" x="1477" y="-701.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if phrase:sub(&#45;1,&#45;1) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="1477" y="-685.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return phrase:sub(1, &#45;2)</text>
<text text-anchor="middle" x="1477" y="-670.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="1477" y="-654.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="1477" y="-639.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1477" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1477" y="-592.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function ast_to_label(ast, leaf_count)</text>
<text text-anchor="middle" x="1477" y="-577.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; nodes need unique names, so we append a leaf_count and increment it</text>
<text text-anchor="middle" x="1477" y="-561.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label &#160;&#160;&#160;&#160;&#160;= ast.id.. &quot;_&quot; .. leaf_count </text>
<text text-anchor="middle" x="1477" y="-546.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label_line = label .. &quot; [label=\&quot;&quot;</text>
<text text-anchor="middle" x="1477" y="-531.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. sanitize_string(ast:dotLabel()) .. &quot;\&quot;]\n&quot;</text>
<text text-anchor="middle" x="1477" y="-515.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return label, label_line, leaf_count + 1</text>
<text text-anchor="middle" x="1477" y="-500.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1477" y="-468.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function list_from_table(tab)</text>
<text text-anchor="middle" x="1477" y="-453.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local table_list = &quot;&quot;</text>
<text text-anchor="middle" x="1477" y="-438.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(tab) do</text>
<text text-anchor="middle" x="1477" y="-422.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;table_list = table_list..&quot; &quot;..v</text>
<text text-anchor="middle" x="1477" y="-407.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1477" y="-391.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return table_list</text>
<text text-anchor="middle" x="1477" y="-376.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1477" y="-345.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function value_to_label(value, leaf_count)</text>
<text text-anchor="middle" x="1477" y="-329.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Generates a name and label for a leaf node.</text>
<text text-anchor="middle" x="1477" y="-314.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns these with an incremented leaf_count.</text>
<text text-anchor="middle" x="1477" y="-298.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local value = sanitize_string(value)</text>
<text text-anchor="middle" x="1477" y="-283.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local name &#160;= &quot;leaf_&quot;..leaf_count</text>
<text text-anchor="middle" x="1477" y="-268.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label = &quot; [color=&quot;..leaf_color..&quot;,shape=rectangle,fontname=&quot;</text>
<text text-anchor="middle" x="1477" y="-252.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;..leaf_font..&quot;,label=\&quot;&quot;..value..&quot;\&quot;]\n&quot;</text>
<text text-anchor="middle" x="1477" y="-221.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return name, label, leaf_count + 1</text>
<text text-anchor="middle" x="1477" y="-205.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1477,-1135.3724C1477,-1118.0539 1477,-1089.3542 1477,-1054.1097"/>
<polygon fill="#000000" stroke="#000000" points="1480.5001,-1053.9993 1477,-1043.9994 1473.5001,-1053.9994 1480.5001,-1053.9993"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2867,-1097.6025 2277,-1097.6025 2277,-143.7991 2867,-143.7991 2867,-1097.6025"/>
<text text-anchor="middle" x="2572" y="-1082.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dot_ranks(ast, phrase, leaf_count, ast_label)</text>
<text text-anchor="middle" x="2572" y="-1066.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local leaf_count = leaf_count or 0</text>
<text text-anchor="middle" x="2572" y="-1035.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Add the node we&#39;re working on</text>
<text text-anchor="middle" x="2572" y="-1020.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if ast.isnode then</text>
<text text-anchor="middle" x="2572" y="-1004.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local label = &quot;&quot;</text>
<text text-anchor="middle" x="2572" y="-989.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local label_line = &quot;&quot;</text>
<text text-anchor="middle" x="2572" y="-973.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_labels = {}</text>
<text text-anchor="middle" x="2572" y="-958.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_label_lines = {}</text>
<text text-anchor="middle" x="2572" y="-927.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Handle anonymous nodes</text>
<text text-anchor="middle" x="2572" y="-911.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not ast_label then</text>
<text text-anchor="middle" x="2572" y="-896.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;label, label_line, leaf_count = ast_to_label(ast, leaf_count)</text>
<text text-anchor="middle" x="2572" y="-880.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. label_line .. &quot;\n\n&quot;</text>
<text text-anchor="middle" x="2572" y="-865.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2572" y="-850.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;label = ast_label </text>
<text text-anchor="middle" x="2572" y="-834.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-803.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Document child nodes</text>
<text text-anchor="middle" x="2572" y="-787.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i,v in ipairs(ast) do</text>
<text text-anchor="middle" x="2572" y="-772.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; assemble labels and label lines for all child nodes</text>
<text text-anchor="middle" x="2572" y="-757.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.isnode then</text>
<text text-anchor="middle" x="2572" y="-741.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;child_labels[i], child_label_lines[i], leaf_count = </text>
<text text-anchor="middle" x="2572" y="-726.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ast_to_label(v, leaf_count)</text>
<text text-anchor="middle" x="2572" y="-710.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-695.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-664.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_list = list_from_table(child_labels)</text>
<text text-anchor="middle" x="2572" y="-632.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if next(child_labels) ~= nil then</text>
<text text-anchor="middle" x="2572" y="-617.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..label..&quot; &#45;&gt; {&quot;..child_list..&quot;}\n&quot;</text>
<text text-anchor="middle" x="2572" y="-601.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..&quot;{rank=same;&quot;..list_from_table(child_labels)..&quot;}\n\n&quot;</text>
<text text-anchor="middle" x="2572" y="-586.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-555.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Concatenate child label lines</text>
<text text-anchor="middle" x="2572" y="-539.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for _, v in ipairs(child_label_lines) do</text>
<text text-anchor="middle" x="2572" y="-524.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..v..&quot;\n&quot;</text>
<text text-anchor="middle" x="2572" y="-508.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-477.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if next(child_labels) ~= nil then</text>
<text text-anchor="middle" x="2572" y="-462.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..&quot;\n&quot;</text>
<text text-anchor="middle" x="2572" y="-446.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-415.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Execute recursively for all nodes</text>
<text text-anchor="middle" x="2572" y="-399.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i,v in ipairs(ast) do</text>
<text text-anchor="middle" x="2572" y="-384.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.isnode then</text>
<text text-anchor="middle" x="2572" y="-369.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase, leaf_count = dot_ranks(v, phrase, leaf_count, child_labels[i])</text>
<text text-anchor="middle" x="2572" y="-353.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-338.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-306.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Document value of Node (aka span)</text>
<text text-anchor="middle" x="2572" y="-291.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.val then</text>
<text text-anchor="middle" x="2572" y="-276.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local name = &quot;&quot; ; local val_label = &quot;&quot;</text>
<text text-anchor="middle" x="2572" y="-260.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;name, val_label, leaf_count = value_to_label(ast.val, leaf_count)</text>
<text text-anchor="middle" x="2572" y="-245.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..label..&quot; &#45;&gt; &quot;..name..&quot;\n&quot;</text>
<text text-anchor="middle" x="2572" y="-229.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..name..&quot; &quot;..val_label</text>
<text text-anchor="middle" x="2572" y="-214.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-199.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2572" y="-167.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase, leaf_count</text>
<text text-anchor="middle" x="2572" y="-152.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2572,-1135.3724C2572,-1128.0629 2572,-1118.7261 2572,-1107.7254"/>
<polygon fill="#000000" stroke="#000000" points="2575.5001,-1107.6389 2572,-1097.6389 2568.5001,-1107.639 2575.5001,-1107.6389"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="3289.5,-679.201 2944.5,-679.201 2944.5,-562.2006 3289.5,-562.2006 3289.5,-679.201"/>
<text text-anchor="middle" x="3117" y="-664.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">function t.dot(ast)</text>
<text text-anchor="middle" x="3117" y="-648.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = dot_header</text>
<text text-anchor="middle" x="3117" y="-617.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return &#160;dot_ranks(ast, phrase) .. dot_footer</text>
<text text-anchor="middle" x="3117" y="-601.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3117" y="-570.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">return t</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3117,-1135.3724C3117,-1065.9003 3117,-813.2865 3117,-689.7179"/>
<polygon fill="#000000" stroke="#000000" points="3120.5001,-689.6094 3117,-679.6094 3113.5001,-689.6094 3120.5001,-689.6094"/>
</g>
</g>
</svg>