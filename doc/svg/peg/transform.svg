<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1938pt" height="1249pt"
 viewBox="0.00 0.00 1938.16 1249.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1245.4016)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1245.4016 1934.1592,-1245.4016 1934.1592,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-1223.4016" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 151</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-692.7008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-688.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;151</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M65.6592,-1205.1337C65.6592,-1126.5101 65.6592,-816.6185 65.6592,-720.9704"/>
<polygon fill="#000000" stroke="#000000" points="69.1593,-720.8918 65.6592,-710.8919 62.1593,-720.8919 69.1593,-720.8918"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="65.6592" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="65.6592" y="-157.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M65.6592,-674.4329C65.6592,-595.8093 65.6592,-285.9177 65.6592,-190.2696"/>
<polygon fill="#000000" stroke="#000000" points="69.1593,-190.1911 65.6592,-180.1911 62.1593,-190.1911 69.1593,-190.1911"/>
</g>
<!-- codeblock_3 -->
<g id="node4" class="node">
<title>codeblock_3</title>
<ellipse fill="none" stroke="#000000" cx="227.6592" cy="-1223.4016" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="227.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_3</text>
</g>
<!-- leaf_8 -->
<g id="node5" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="305.6592,-710.7008 149.6592,-710.7008 149.6592,-674.7008 305.6592,-674.7008 305.6592,-710.7008"/>
<text text-anchor="middle" x="227.6592" y="-689.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45; Transform Module</text>
</g>
<!-- codeblock_3&#45;&gt;leaf_8 -->
<g id="edge3" class="edge">
<title>codeblock_3&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M227.6592,-1205.1337C227.6592,-1126.5101 227.6592,-816.6185 227.6592,-720.9704"/>
<polygon fill="#000000" stroke="#000000" points="231.1593,-720.8918 227.6592,-710.8919 224.1593,-720.8919 231.1593,-720.8918"/>
</g>
<!-- block_4 -->
<g id="node6" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="368.6592" cy="-1223.4016" rx="40.6767" ry="18"/>
<text text-anchor="middle" x="368.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block_4</text>
</g>
<!-- structure_9 -->
<g id="node7" class="node">
<title>structure_9</title>
<ellipse fill="none" stroke="#000000" cx="368.6592" cy="-692.7008" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="368.6592" y="-688.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- block_4&#45;&gt;structure_9 -->
<g id="edge4" class="edge">
<title>block_4&#45;&gt;structure_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M368.6592,-1205.1337C368.6592,-1126.5101 368.6592,-816.6185 368.6592,-720.9704"/>
<polygon fill="#000000" stroke="#000000" points="372.1593,-720.8918 368.6592,-710.8919 365.1593,-720.8919 372.1593,-720.8918"/>
</g>
<!-- hashline_10 -->
<g id="node8" class="node">
<title>hashline_10</title>
<ellipse fill="none" stroke="#000000" cx="368.6592" cy="-162" rx="43.0992" ry="18"/>
<text text-anchor="middle" x="368.6592" y="-157.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashline</text>
</g>
<!-- structure_9&#45;&gt;hashline_10 -->
<g id="edge5" class="edge">
<title>structure_9&#45;&gt;hashline_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M368.6592,-674.4329C368.6592,-595.8093 368.6592,-285.9177 368.6592,-190.2696"/>
<polygon fill="#000000" stroke="#000000" points="372.1593,-190.1911 368.6592,-180.1911 365.1593,-190.1911 372.1593,-190.1911"/>
</g>
<!-- hashtag_11 -->
<g id="node9" class="node">
<title>hashtag_11</title>
<ellipse fill="none" stroke="#000000" cx="368.6592" cy="-90" rx="41.6544" ry="18"/>
<text text-anchor="middle" x="368.6592" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">hashtag</text>
</g>
<!-- hashline_10&#45;&gt;hashtag_11 -->
<g id="edge6" class="edge">
<title>hashline_10&#45;&gt;hashtag_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M368.6592,-143.8314C368.6592,-136.131 368.6592,-126.9743 368.6592,-118.4166"/>
<polygon fill="#000000" stroke="#000000" points="372.1593,-118.4132 368.6592,-108.4133 365.1593,-118.4133 372.1593,-118.4132"/>
</g>
<!-- leaf_12 -->
<g id="node10" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="395.6592,-36 341.6592,-36 341.6592,0 395.6592,0 395.6592,-36"/>
</g>
<!-- hashtag_11&#45;&gt;leaf_12 -->
<g id="edge7" class="edge">
<title>hashtag_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M368.6592,-71.8314C368.6592,-64.131 368.6592,-54.9743 368.6592,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="372.1593,-46.4132 368.6592,-36.4133 365.1593,-46.4133 372.1593,-46.4132"/>
</g>
<!-- codeblock_5 -->
<g id="node11" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="694.6592" cy="-1223.4016" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="694.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_5</text>
</g>
<!-- leaf_13 -->
<g id="node12" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="958.1592,-1115.9022 431.1592,-1115.9022 431.1592,-269.4994 958.1592,-269.4994 958.1592,-1115.9022"/>
<text text-anchor="middle" x="694.6592" y="-1100.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local t = {}</text>
<text text-anchor="middle" x="694.6592" y="-1069.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_header = [=[</text>
<text text-anchor="middle" x="694.6592" y="-1053.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">digraph hierarchy {</text>
<text text-anchor="middle" x="694.6592" y="-1022.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">node [fontname=Helvetica]</text>
<text text-anchor="middle" x="694.6592" y="-1007.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">edge [style=dashed]</text>
<text text-anchor="middle" x="694.6592" y="-975.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">]=]</text>
<text text-anchor="middle" x="694.6592" y="-944.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local dot_footer = [=[</text>
<text text-anchor="middle" x="694.6592" y="-912.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">}</text>
<text text-anchor="middle" x="694.6592" y="-897.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">]=]</text>
<text text-anchor="middle" x="694.6592" y="-866.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local leaf_font &#160;= &quot;Inconsolata&quot;</text>
<text text-anchor="middle" x="694.6592" y="-850.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local leaf_color = &quot;Gray&quot;</text>
<text text-anchor="middle" x="694.6592" y="-819.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function sanitize_string(str)</text>
<text text-anchor="middle" x="694.6592" y="-803.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; filter \ and &quot;</text>
<text text-anchor="middle" x="694.6592" y="-788.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = str:gsub(&quot;\\&quot;, &quot;\\\\&quot;):gsub(&#39;&quot;&#39;, &#39;\\&quot;&#39;)</text>
<text text-anchor="middle" x="694.6592" y="-773.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if phrase:sub(&#45;1,&#45;1) == &quot;\n&quot; then</text>
<text text-anchor="middle" x="694.6592" y="-757.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return phrase:sub(1, &#45;2)</text>
<text text-anchor="middle" x="694.6592" y="-742.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;else</text>
<text text-anchor="middle" x="694.6592" y="-726.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="694.6592" y="-711.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="694.6592" y="-696.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="694.6592" y="-664.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function ast_to_label(ast, leaf_count)</text>
<text text-anchor="middle" x="694.6592" y="-649.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; nodes need unique names, so we append a leaf_count and increment it</text>
<text text-anchor="middle" x="694.6592" y="-633.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label &#160;&#160;&#160;&#160;&#160;= ast.id.. &quot;_&quot; .. leaf_count </text>
<text text-anchor="middle" x="694.6592" y="-618.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label_line = label .. &quot; [label=\&quot;&quot;</text>
<text text-anchor="middle" x="694.6592" y="-603.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;.. sanitize_string(ast:dotLabel()) .. &quot;\&quot;]\n&quot;</text>
<text text-anchor="middle" x="694.6592" y="-587.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return label, label_line, leaf_count + 1</text>
<text text-anchor="middle" x="694.6592" y="-572.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="694.6592" y="-540.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function list_from_table(tab)</text>
<text text-anchor="middle" x="694.6592" y="-525.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local table_list = &quot;&quot;</text>
<text text-anchor="middle" x="694.6592" y="-510.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _,v in ipairs(tab) do</text>
<text text-anchor="middle" x="694.6592" y="-494.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;table_list = table_list..&quot; &quot;..v</text>
<text text-anchor="middle" x="694.6592" y="-479.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="694.6592" y="-463.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return table_list</text>
<text text-anchor="middle" x="694.6592" y="-448.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="694.6592" y="-417.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function value_to_label(value, leaf_count)</text>
<text text-anchor="middle" x="694.6592" y="-401.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Generates a name and label for a leaf node.</text>
<text text-anchor="middle" x="694.6592" y="-386.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns these with an incremented leaf_count.</text>
<text text-anchor="middle" x="694.6592" y="-370.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local value = sanitize_string(value)</text>
<text text-anchor="middle" x="694.6592" y="-355.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local name &#160;= &quot;leaf_&quot;..leaf_count</text>
<text text-anchor="middle" x="694.6592" y="-340.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local label = &quot; [color=&quot;..leaf_color..&quot;,shape=rectangle,fontname=&quot;</text>
<text text-anchor="middle" x="694.6592" y="-324.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;..leaf_font..&quot;,label=\&quot;&quot;..value..&quot;\&quot;]\n&quot;</text>
<text text-anchor="middle" x="694.6592" y="-293.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return name, label, leaf_count + 1</text>
<text text-anchor="middle" x="694.6592" y="-277.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_13 -->
<g id="edge8" class="edge">
<title>codeblock_5&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M694.6592,-1205.1337C694.6592,-1188.1302 694.6592,-1160.3103 694.6592,-1126.1801"/>
<polygon fill="#000000" stroke="#000000" points="698.1593,-1125.8927 694.6592,-1115.8928 691.1593,-1125.8928 698.1593,-1125.8927"/>
</g>
<!-- codeblock_6 -->
<g id="node13" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1271.6592" cy="-1223.4016" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="1271.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_6</text>
</g>
<!-- leaf_14 -->
<g id="node14" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1566.6592,-1169.6025 976.6592,-1169.6025 976.6592,-215.7991 1566.6592,-215.7991 1566.6592,-1169.6025"/>
<text text-anchor="middle" x="1271.6592" y="-1154.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local function dot_ranks(ast, phrase, leaf_count, ast_label)</text>
<text text-anchor="middle" x="1271.6592" y="-1138.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local leaf_count = leaf_count or 0</text>
<text text-anchor="middle" x="1271.6592" y="-1107.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Add the node we&#39;re working on</text>
<text text-anchor="middle" x="1271.6592" y="-1092.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;if ast.isnode then</text>
<text text-anchor="middle" x="1271.6592" y="-1076.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local label = &quot;&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-1061.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local label_line = &quot;&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-1045.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_labels = {}</text>
<text text-anchor="middle" x="1271.6592" y="-1030.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_label_lines = {}</text>
<text text-anchor="middle" x="1271.6592" y="-999.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Handle anonymous nodes</text>
<text text-anchor="middle" x="1271.6592" y="-983.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if not ast_label then</text>
<text text-anchor="middle" x="1271.6592" y="-968.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;label, label_line, leaf_count = ast_to_label(ast, leaf_count)</text>
<text text-anchor="middle" x="1271.6592" y="-952.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. label_line .. &quot;\n\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-937.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1271.6592" y="-922.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;label = ast_label </text>
<text text-anchor="middle" x="1271.6592" y="-906.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-875.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Document child nodes</text>
<text text-anchor="middle" x="1271.6592" y="-859.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i,v in ipairs(ast) do</text>
<text text-anchor="middle" x="1271.6592" y="-844.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; assemble labels and label lines for all child nodes</text>
<text text-anchor="middle" x="1271.6592" y="-829.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.isnode then</text>
<text text-anchor="middle" x="1271.6592" y="-813.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;child_labels[i], child_label_lines[i], leaf_count = </text>
<text text-anchor="middle" x="1271.6592" y="-798.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ast_to_label(v, leaf_count)</text>
<text text-anchor="middle" x="1271.6592" y="-782.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-767.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-736.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local child_list = list_from_table(child_labels)</text>
<text text-anchor="middle" x="1271.6592" y="-704.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if next(child_labels) ~= nil then</text>
<text text-anchor="middle" x="1271.6592" y="-689.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..label..&quot; &#45;&gt; {&quot;..child_list..&quot;}\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-673.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..&quot;{rank=same;&quot;..list_from_table(child_labels)..&quot;}\n\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-658.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-627.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Concatenate child label lines</text>
<text text-anchor="middle" x="1271.6592" y="-611.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for _, v in ipairs(child_label_lines) do</text>
<text text-anchor="middle" x="1271.6592" y="-596.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..v..&quot;\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-580.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-549.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if next(child_labels) ~= nil then</text>
<text text-anchor="middle" x="1271.6592" y="-534.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..&quot;\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-518.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-487.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Execute recursively for all nodes</text>
<text text-anchor="middle" x="1271.6592" y="-471.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i,v in ipairs(ast) do</text>
<text text-anchor="middle" x="1271.6592" y="-456.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.isnode then</text>
<text text-anchor="middle" x="1271.6592" y="-441.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase, leaf_count = dot_ranks(v, phrase, leaf_count, child_labels[i])</text>
<text text-anchor="middle" x="1271.6592" y="-425.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-410.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-378.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Document value of Node (aka span)</text>
<text text-anchor="middle" x="1271.6592" y="-363.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if ast.val then</text>
<text text-anchor="middle" x="1271.6592" y="-348.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local name = &quot;&quot; ; local val_label = &quot;&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-332.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;name, val_label, leaf_count = value_to_label(ast.val, leaf_count)</text>
<text text-anchor="middle" x="1271.6592" y="-317.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..label..&quot; &#45;&gt; &quot;..name..&quot;\n&quot;</text>
<text text-anchor="middle" x="1271.6592" y="-301.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase..name..&quot; &quot;..val_label</text>
<text text-anchor="middle" x="1271.6592" y="-286.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-271.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="1271.6592" y="-239.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase, leaf_count</text>
<text text-anchor="middle" x="1271.6592" y="-224.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_14 -->
<g id="edge9" class="edge">
<title>codeblock_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1271.6592,-1205.1337C1271.6592,-1198.2967 1271.6592,-1189.7109 1271.6592,-1179.6693"/>
<polygon fill="#000000" stroke="#000000" points="1275.1593,-1179.6052 1271.6592,-1169.6052 1268.1593,-1179.6052 1275.1593,-1179.6052"/>
</g>
<!-- codeblock_7 -->
<g id="node15" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1757.6592" cy="-1223.4016" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="1757.6592" y="-1219.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_7</text>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1930.1592,-751.201 1585.1592,-751.201 1585.1592,-634.2006 1930.1592,-634.2006 1930.1592,-751.201"/>
<text text-anchor="middle" x="1757.6592" y="-736.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">function t.dot(ast)</text>
<text text-anchor="middle" x="1757.6592" y="-720.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = dot_header</text>
<text text-anchor="middle" x="1757.6592" y="-689.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return &#160;dot_ranks(ast, phrase) .. dot_footer</text>
<text text-anchor="middle" x="1757.6592" y="-673.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1757.6592" y="-642.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">return t</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_15 -->
<g id="edge10" class="edge">
<title>codeblock_7&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1757.6592,-1205.1337C1757.6592,-1135.4631 1757.6592,-884.1951 1757.6592,-761.3213"/>
<polygon fill="#000000" stroke="#000000" points="1761.1593,-761.2697 1757.6592,-751.2697 1754.1593,-761.2698 1761.1593,-761.2697"/>
</g>
</g>
</svg>