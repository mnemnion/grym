<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="4069pt" height="1153pt"
 viewBox="0.00 0.00 4069.00 1152.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1148.6012)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1148.6012 4065,-1148.6012 4065,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1126.6012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1122.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 158</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1054.6012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1050.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.5,-1108.4326C736.5,-1100.7322 736.5,-1091.5756 736.5,-1083.0179"/>
<polygon fill="#000000" stroke="#000000" points="740.0001,-1083.0144 736.5,-1073.0145 733.0001,-1083.0145 740.0001,-1083.0144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="546.5" cy="-982.6012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="546.5" y="-978.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.9621,-1040.3763C670.4414,-1029.5685 630.8527,-1014.5665 599.1644,-1002.5582"/>
<polygon fill="#000000" stroke="#000000" points="600.196,-999.2064 589.6047,-998.9356 597.7155,-1005.7521 600.196,-999.2064"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="695.5" cy="-982.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="695.5" y="-978.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.3652,-1036.8035C721.5632,-1028.3707 715.7315,-1018.1298 710.4358,-1008.83"/>
<polygon fill="#000000" stroke="#000000" points="713.3667,-1006.9037 705.3768,-999.9458 707.2838,-1010.3676 713.3667,-1006.9037"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-982.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="777.5" y="-978.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.6348,-1036.8035C751.4368,-1028.3707 757.2685,-1018.1298 762.5642,-1008.83"/>
<polygon fill="#000000" stroke="#000000" points="765.7162,-1010.3676 767.6232,-999.9458 759.6333,-1006.9037 765.7162,-1010.3676"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1409.5" cy="-982.6012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1409.5" y="-978.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;78</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M793.8796,-1048.4625C916.4057,-1035.3542 1203.3659,-1004.6542 1337.7273,-990.2797"/>
<polygon fill="#000000" stroke="#000000" points="1338.3412,-993.7341 1347.9121,-989.1901 1337.5965,-986.7738 1338.3412,-993.7341"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="624.5,-928.6012 468.5,-928.6012 468.5,-892.6012 624.5,-892.6012 624.5,-928.6012"/>
<text text-anchor="middle" x="546.5" y="-907.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Code Block Module</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M546.5,-964.4326C546.5,-956.7322 546.5,-947.5756 546.5,-939.0179"/>
<polygon fill="#000000" stroke="#000000" points="550.0001,-939.0144 546.5,-929.0145 543.0001,-939.0145 550.0001,-939.0144"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="682.5" cy="-910.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="682.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M692.2196,-964.4326C690.8078,-956.6137 689.125,-947.2935 687.5595,-938.6233"/>
<polygon fill="#000000" stroke="#000000" points="690.9556,-937.7336 685.7344,-928.5146 684.067,-938.9774 690.9556,-937.7336"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-910.6012" rx="27" ry="18"/>
<text text-anchor="middle" x="777.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_4&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-964.4326C777.5,-956.7322 777.5,-947.5756 777.5,-939.0179"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-939.0144 777.5,-929.0145 774.0001,-939.0145 781.0001,-939.0144"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="1103.5" cy="-910.6012" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1103.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1359.6548,-970.8729C1302.6202,-957.453 1209.7882,-935.6102 1152.9286,-922.2315"/>
<polygon fill="#000000" stroke="#000000" points="1153.6272,-918.8003 1143.0914,-919.9168 1152.0239,-925.6143 1153.6272,-918.8003"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1238.5" cy="-910.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1238.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1373.6528,-967.5077C1344.2647,-955.1337 1302.8995,-937.7168 1273.6914,-925.4187"/>
<polygon fill="#000000" stroke="#000000" points="1274.8616,-922.1138 1264.287,-921.4589 1272.1452,-928.5653 1274.8616,-922.1138"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1340.5" cy="-910.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1340.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1392.797,-965.172C1383.8978,-955.8859 1372.8231,-944.3297 1363.1591,-934.2455"/>
<polygon fill="#000000" stroke="#000000" points="1365.5493,-931.6811 1356.1033,-926.8829 1360.4954,-936.5245 1365.5493,-931.6811"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1473.5" cy="-910.6012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1473.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;49</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1425.3202,-964.8035C1433.0126,-956.1495 1442.3978,-945.5912 1450.8344,-936.1001"/>
<polygon fill="#000000" stroke="#000000" points="1453.6122,-938.2432 1457.64,-928.4438 1448.3803,-933.5926 1453.6122,-938.2432"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1655.5" cy="-910.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1655.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1454.6202,-969.3953C1501.2036,-955.7611 1573.1047,-934.7169 1617.0672,-921.8499"/>
<polygon fill="#000000" stroke="#000000" points="1618.1926,-925.1674 1626.8068,-918.9992 1616.2262,-918.4492 1618.1926,-925.1674"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1874.5" cy="-910.6012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1874.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 54&#45;77</text>
</g>
<!-- section_5&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1466.9845,-973.7004C1550.8319,-960.7176 1706.7599,-936.5739 1799.5259,-922.2101"/>
<polygon fill="#000000" stroke="#000000" points="1800.3385,-925.6261 1809.6852,-920.6371 1799.2673,-918.7085 1800.3385,-925.6261"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2733.5" cy="-910.6012" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2733.5" y="-906.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 79&#45;158</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.2555,-979.0798C1694.3407,-967.1114 2413.2028,-928.0192 2654.0465,-914.922"/>
<polygon fill="#000000" stroke="#000000" points="2654.3307,-918.4118 2664.1259,-914.3738 2653.9505,-911.4221 2654.3307,-918.4118"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-725.3012 0,-725.3012 0,-638.7006 499,-638.7006 499,-725.3012"/>
<text text-anchor="middle" x="249.5" y="-662.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="249.5" y="-646.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.694,-901.4672C650.7267,-898.5145 641.7689,-895.3069 633.5,-892.6012 578.553,-874.6221 560.886,-881.0579 508.5,-856.6012 436.3535,-822.9192 361.7673,-770.4388 311.2723,-731.8028"/>
<polygon fill="#000000" stroke="#000000" points="313.1262,-728.8129 303.0677,-725.4845 308.8552,-734.359 313.1262,-728.8129"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1037.5,-755.7013 517.5,-755.7013 517.5,-608.3006 1037.5,-608.3006 1037.5,-755.7013"/>
<text text-anchor="middle" x="777.5" y="-724.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="777.5" y="-709.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="777.5" y="-693.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="777.5" y="-678.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="777.5" y="-662.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="777.5" y="-647.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="777.5" y="-632.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="777.5" y="-616.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-892.2803C777.5,-864.9386 777.5,-811.738 777.5,-765.692"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-765.6846 777.5,-755.6846 774.0001,-765.6847 781.0001,-765.6846"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1141.5,-700.0009 1055.5,-700.0009 1055.5,-664.0009 1141.5,-664.0009 1141.5,-700.0009"/>
<text text-anchor="middle" x="1098.5" y="-678.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_11&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>header_11&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1103.0993,-892.2803C1102.2286,-852.4718 1100.1589,-757.8467 1099.1189,-710.2981"/>
<polygon fill="#000000" stroke="#000000" points="1102.6136,-710.0128 1098.8957,-700.0918 1095.6153,-710.1659 1102.6136,-710.0128"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1186.5" cy="-682.0009" rx="27" ry="18"/>
<text text-anchor="middle" x="1186.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1232.7831,-892.7061C1229.5442,-882.241 1225.5442,-868.741 1222.5,-856.6012 1209.6059,-805.1814 1197.8504,-744.4082 1191.482,-709.8159"/>
<polygon fill="#000000" stroke="#000000" points="1194.9218,-709.1692 1189.6832,-699.9602 1188.0356,-710.4261 1194.9218,-709.1692"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1258.5" cy="-682.0009" rx="27" ry="18"/>
<text text-anchor="middle" x="1258.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_13&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1323.6005,-895.1472C1313.643,-885.108 1301.636,-871.2075 1294.5,-856.6012 1271.0447,-808.592 1262.8526,-745.9298 1260.0045,-710.2119"/>
<polygon fill="#000000" stroke="#000000" points="1263.4816,-709.7647 1259.2812,-700.0381 1256.4992,-710.2611 1263.4816,-709.7647"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-779.8013 1304,-779.8013 1304,-584.2006 1663,-584.2006 1663,-779.8013"/>
<text text-anchor="middle" x="1483.5" y="-764.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1483.5" y="-733.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="1483.5" y="-701.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;Orbit/morphemes&quot;</text>
<text text-anchor="middle" x="1483.5" y="-670.501" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1483.5" y="-655.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="1483.5" y="-623.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1483.5" y="-592.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_14&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.3014,-892.2803C1475.2906,-869.6684 1477.0534,-829.3705 1478.773,-790.0599"/>
<polygon fill="#000000" stroke="#000000" points="1482.2801,-789.9722 1479.2206,-779.8288 1475.2868,-789.6663 1482.2801,-789.9722"/>
</g>
<!-- raw_24 -->
<g id="node25" class="node">
<title>raw_24</title>
<ellipse fill="none" stroke="#000000" cx="1708.5" cy="-682.0009" rx="27" ry="18"/>
<text text-anchor="middle" x="1708.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_24 -->
<g id="edge24" class="edge">
<title>prose_15&#45;&gt;raw_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1661.1919,-892.6998C1664.4225,-882.2326 1668.4225,-868.7326 1671.5,-856.6012 1684.5501,-805.158 1696.7005,-744.3927 1703.3132,-709.8082"/>
<polygon fill="#000000" stroke="#000000" points="1706.7572,-710.432 1705.1825,-699.9549 1699.8799,-709.1272 1706.7572,-710.432"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2175.5,-856.7016 1753.5,-856.7016 1753.5,-507.3003 2175.5,-507.3003 2175.5,-856.7016"/>
<text text-anchor="middle" x="1964.5" y="-841.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-826.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="1964.5" y="-810.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="1964.5" y="-795.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1964.5" y="-779.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1964.5" y="-748.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="1964.5" y="-733.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-701.601" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-686.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="1964.5" y="-670.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local lang = codeblock.lang or &quot;orbdefault&quot;</text>
<text text-anchor="middle" x="1964.5" y="-655.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="1964.5" y="-640.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="1964.5" y="-624.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="1964.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="1964.5" y="-547.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-515.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_16&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1881.5621,-892.6633C1884.3541,-885.5718 1887.8474,-876.6987 1891.8092,-866.6358"/>
<polygon fill="#000000" stroke="#000000" points="1895.1659,-867.6638 1895.5726,-857.0768 1888.6525,-865.0994 1895.1659,-867.6638"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="2244.5" cy="-682.0009" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2244.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_17&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2665.0239,-905.9388C2550.9887,-897.5956 2331.9146,-878.8842 2304.5,-856.6012 2259.9581,-820.3969 2248.3725,-749.4044 2245.4315,-710.0114"/>
<polygon fill="#000000" stroke="#000000" points="2248.9248,-709.7924 2244.8219,-700.0243 2241.9378,-710.219 2248.9248,-709.7924"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2345.5" cy="-682.0009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2345.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2663.2499,-908.6334C2573.9369,-904.653 2426.6126,-892.6586 2387.5,-856.6012 2346.642,-818.9348 2342.3189,-749.0775 2343.4622,-710.1154"/>
<polygon fill="#000000" stroke="#000000" points="2346.9643,-710.141 2343.9038,-699.9978 2339.971,-709.8357 2346.9643,-710.141"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2473.5" cy="-682.0009" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2473.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 81&#45;86</text>
</g>
<!-- section_17&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2669.1587,-903.0231C2633.7338,-896.0048 2590.9193,-882.5125 2560.5,-856.6012 2514.6638,-817.5578 2490.5321,-748.5351 2480.065,-710.0031"/>
<polygon fill="#000000" stroke="#000000" points="2483.3675,-708.7946 2477.4685,-699.9939 2476.5918,-710.5524 2483.3675,-708.7946"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2601.5" cy="-682.0009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2601.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_17&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2693.8572,-895.6807C2675.6586,-886.9182 2655.3227,-874.0796 2642.5,-856.6012 2610.3143,-812.7293 2602.965,-747.395 2601.542,-710.3423"/>
<polygon fill="#000000" stroke="#000000" points="2605.0382,-710.1484 2601.2757,-700.2442 2598.0407,-710.3331 2605.0382,-710.1484"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2733.5" cy="-682.0009" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="2733.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 99&#45;110</text>
</g>
<!-- section_17&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>section_17&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2733.5,-892.2803C2733.5,-852.4718 2733.5,-757.8467 2733.5,-710.2981"/>
<polygon fill="#000000" stroke="#000000" points="2737.0001,-710.0917 2733.5,-700.0918 2730.0001,-710.0918 2737.0001,-710.0917"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2888.5" cy="-682.0009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2888.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_17&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2771.7874,-895.2049C2789.8835,-886.2663 2810.5291,-873.4157 2824.5,-856.6012 2860.6488,-813.0947 2877.2949,-747.3574 2884.2014,-710.1968"/>
<polygon fill="#000000" stroke="#000000" points="2887.6962,-710.5299 2885.9713,-700.0764 2880.8008,-709.3239 2887.6962,-710.5299"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="3015.5" cy="-682.0009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3015.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2791.1086,-900.1579C2841.0147,-890.1526 2908.4204,-874.0338 2929.5,-856.6012 2975.7941,-818.3165 2999.2654,-748.9987 3009.2862,-710.2156"/>
<polygon fill="#000000" stroke="#000000" points="3012.7752,-710.684 3011.7637,-700.1376 3005.9776,-709.0129 3012.7752,-710.684"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="3233.5" cy="-682.0009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3233.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 124&#45;135</text>
</g>
<!-- section_17&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2799.8821,-904.2688C2880.9726,-895.7158 3012.7637,-878.9341 3056.5,-856.6012 3126.5491,-820.8324 3186.5541,-747.5226 3215.3234,-708.2368"/>
<polygon fill="#000000" stroke="#000000" points="3218.2972,-710.0968 3221.3057,-699.938 3212.6188,-706.0034 3218.2972,-710.0968"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="3479.5" cy="-682.0009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3479.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2802.9815,-907.24C2950.1574,-899.699 3283.6371,-880.2278 3329.5,-856.6012 3394.456,-823.1388 3443.1433,-748.409 3465.6656,-708.4301"/>
<polygon fill="#000000" stroke="#000000" points="3468.8123,-709.9716 3470.5728,-699.5241 3462.6814,-706.5935 3468.8123,-709.9716"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="3785.5" cy="-682.0009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3785.5" y="-677.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 139&#45;157</text>
</g>
<!-- section_17&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2803.5338,-907.8346C2983.6575,-900.4305 3453.5926,-879.1862 3520.5,-856.6012 3617.7584,-823.7711 3713.8136,-746.2464 3758.9017,-706.4727"/>
<polygon fill="#000000" stroke="#000000" points="3761.325,-709.0012 3766.4612,-699.7346 3756.6673,-703.7757 3761.325,-709.0012"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="973,-378.6007 502,-378.6007 502,-292.0002 973,-292.0002 973,-378.6007"/>
<text text-anchor="middle" x="737.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="737.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1188.6065,-664.0109C1191.6532,-628.7186 1192.901,-550.1319 1150.5,-507.4007 1096.714,-453.1957 1053.9914,-498.2351 982.5,-471.4007 922.2472,-448.7847 858.8537,-413.207 811.6494,-384.0988"/>
<polygon fill="#000000" stroke="#000000" points="813.3695,-381.047 803.0281,-378.7435 809.6759,-386.9932 813.3695,-381.047"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1525.5,-447.5009 991.5,-447.5009 991.5,-223.1 1525.5,-223.1 1525.5,-447.5009"/>
<text text-anchor="middle" x="1258.5" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="1258.5" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="1258.5" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="1258.5" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="1258.5" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="1258.5" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="1258.5" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="1258.5" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="1258.5" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="1258.5" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="1258.5" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1258.5" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="1258.5" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1258.5,-663.849C1258.5,-625.7132 1258.5,-534.4563 1258.5,-457.7732"/>
<polygon fill="#000000" stroke="#000000" points="1262.0001,-457.5387 1258.5,-447.5387 1255.0001,-457.5387 1262.0001,-457.5387"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1917,-362.6009 1544,-362.6009 1544,-308 1917,-308 1917,-362.6009"/>
<text text-anchor="middle" x="1730.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1730.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- raw_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1709.6518,-663.849C1713.0984,-609.5348 1723.3824,-447.4675 1728.0941,-373.216"/>
<polygon fill="#000000" stroke="#000000" points="1731.6069,-373.1229 1728.7473,-362.9213 1724.621,-372.6796 1731.6069,-373.1229"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2065,-353.3005 1972,-353.3005 1972,-317.3005 2065,-317.3005 2065,-353.3005"/>
<text text-anchor="middle" x="2018.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** asserts</text>
</g>
<!-- header_27&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>header_27&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2243.4405,-663.9179C2240.4104,-628.8103 2228.7914,-551.0451 2184.5,-507.4007 2147.8595,-471.2953 2112.1956,-506.403 2074.5,-471.4007 2043.5149,-442.6294 2029.1883,-394.1819 2022.9309,-363.5201"/>
<polygon fill="#000000" stroke="#000000" points="2026.3301,-362.6575 2021.0401,-353.4779 2019.451,-363.9528 2026.3301,-362.6575"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2110.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2110.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_28&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2346.9771,-664.0023C2348.8103,-628.6947 2347.465,-550.0822 2304.5,-507.4007 2253.4045,-456.6423 2198.2997,-521.4401 2146.5,-471.4007 2117.4095,-443.2987 2110.8857,-394.6552 2109.909,-363.7711"/>
<polygon fill="#000000" stroke="#000000" points="2113.407,-363.6004 2109.767,-353.6505 2106.4077,-363.6987 2113.407,-363.6004"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2381.5,-369.9017 2155.5,-369.9017 2155.5,-300.6992 2381.5,-300.6992 2381.5,-369.9017"/>
<text text-anchor="middle" x="2268.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="2268.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="2268.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="2268.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_29&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2465.5245,-663.9754C2451.0746,-631.8128 2419.0356,-562.7206 2386.5,-507.4007 2359.7494,-461.9169 2325.2396,-412.4775 2300.46,-378.308"/>
<polygon fill="#000000" stroke="#000000" points="2303.0972,-375.9839 2294.3804,-369.9616 2297.4391,-380.1053 2303.0972,-375.9839"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2426.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2426.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_30&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2602.3717,-663.9306C2603.0459,-629.1879 2599.5391,-552.5264 2559.5,-507.4007 2528.9806,-473.004 2493.4049,-505.4515 2462.5,-471.4007 2435.5815,-441.7421 2428.3742,-394.2841 2426.6728,-363.9682"/>
<polygon fill="#000000" stroke="#000000" points="2430.1571,-363.495 2426.2688,-353.6395 2423.1624,-363.7687 2430.1571,-363.495"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2921.5,-416.3008 2471.5,-416.3008 2471.5,-254.3001 2921.5,-254.3001 2921.5,-416.3008"/>
<text text-anchor="middle" x="2696.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="2696.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="2696.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="2696.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="2696.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="2696.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="2696.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2696.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="2696.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2696.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_31&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2731.5628,-663.849C2726.9285,-620.4244 2714.9437,-508.1231 2706.2745,-426.8908"/>
<polygon fill="#000000" stroke="#000000" points="2709.7227,-426.2183 2705.1812,-416.6462 2702.7623,-426.9612 2709.7227,-426.2183"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="2966.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2966.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_32&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2892.5838,-663.849C2905.3781,-606.98 2944.7485,-431.9831 2960.1913,-363.3417"/>
<polygon fill="#000000" stroke="#000000" points="2963.6763,-363.7971 2962.4566,-353.2727 2956.847,-362.2606 2963.6763,-363.7971"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3038.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="3038.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_33&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3016.7042,-663.849C3020.4681,-607.1123 3032.0322,-432.7964 3036.6079,-363.8223"/>
<polygon fill="#000000" stroke="#000000" points="3040.1103,-363.9008 3037.28,-353.691 3033.1256,-363.4374 3040.1103,-363.9008"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3541,-416.3008 3084,-416.3008 3084,-254.3001 3541,-254.3001 3541,-416.3008"/>
<text text-anchor="middle" x="3312.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="3312.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="3312.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="3312.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3312.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="3312.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3312.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3312.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3312.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3312.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_34&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3237.6362,-663.849C3247.531,-620.4244 3273.1202,-508.1231 3291.63,-426.8908"/>
<polygon fill="#000000" stroke="#000000" points="3295.1551,-427.1739 3293.9644,-416.6462 3288.3301,-425.6187 3295.1551,-427.1739"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="3586.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="3586.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_35&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_35&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3485.9848,-664.1009C3498.987,-627.9341 3528.8498,-543.4581 3550.5,-471.4007 3561.6629,-434.2478 3572.8224,-390.8466 3579.6916,-363.2271"/>
<polygon fill="#000000" stroke="#000000" points="3583.1038,-364.008 3582.1053,-353.4604 3576.3083,-362.3286 3583.1038,-364.008"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="4061,-471.5009 3632,-471.5009 3632,-199.1 4061,-199.1 4061,-471.5009"/>
<text text-anchor="middle" x="3846.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="3846.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="3846.5" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="3846.5" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="3846.5" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="3846.5" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="3846.5" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="3846.5" y="-348.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="3846.5" y="-317.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="3846.5" y="-301.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3846.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="3846.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="3846.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>codeblock_36&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3788.6937,-663.849C3794.7225,-629.5835 3808.2969,-552.4321 3820.777,-481.4999"/>
<polygon fill="#000000" stroke="#000000" points="3824.244,-481.9927 3822.5299,-471.5375 3817.3499,-480.7797 3824.244,-481.9927"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2137.5,-99.6001 2083.5,-99.6001 2083.5,-63.6001 2137.5,-63.6001 2137.5,-99.6001"/>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2110.5,-317.055C2110.5,-273.3538 2110.5,-162.4281 2110.5,-109.9469"/>
<polygon fill="#000000" stroke="#000000" points="2114.0001,-109.6803 2110.5,-99.6803 2107.0001,-109.6803 2114.0001,-109.6803"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2641,-155.4005 2212,-155.4005 2212,-7.7998 2641,-7.7998 2641,-155.4005"/>
<text text-anchor="middle" x="2426.5" y="-124.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2426.5" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2426.5" y="-93.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2426.5" y="-78.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2426.5" y="-62.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2426.5" y="-47.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2426.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2426.5,-317.055C2426.5,-285.7278 2426.5,-219.8557 2426.5,-165.7315"/>
<polygon fill="#000000" stroke="#000000" points="2430.0001,-165.4254 2426.5,-155.4255 2423.0001,-165.4255 2430.0001,-165.4254"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2992.5,-101.5022 2738.5,-101.5022 2738.5,-61.698 2992.5,-61.698 2992.5,-101.5022"/>
<text text-anchor="middle" x="2865.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2963.1989,-317.2319C2958.0295,-290.7271 2946.8901,-240.0272 2930.5,-199.2002 2917.7638,-167.4751 2898.3089,-133.5347 2884.0012,-110.3116"/>
<polygon fill="#000000" stroke="#000000" points="2886.8662,-108.2915 2878.6032,-101.6602 2880.9274,-111.997 2886.8662,-108.2915"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3440,-163.3005 3011,-163.3005 3011,.1002 3440,.1002 3440,-163.3005"/>
<text text-anchor="middle" x="3225.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3225.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3225.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3225.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3225.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3225.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3225.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3225.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3039.6385,-317.062C3042.1284,-289.4463 3049.9793,-236.3144 3074.5,-199.2002 3081.0825,-189.2371 3088.7926,-179.7538 3097.184,-170.8118"/>
<polygon fill="#000000" stroke="#000000" points="3099.9074,-173.0322 3104.3832,-163.4292 3094.8958,-168.1451 3099.9074,-173.0322"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3636.5,-101.5022 3536.5,-101.5022 3536.5,-61.698 3636.5,-61.698 3636.5,-101.5022"/>
<text text-anchor="middle" x="3586.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- raw_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3586.5,-317.055C3586.5,-273.7938 3586.5,-164.6552 3586.5,-111.5499"/>
<polygon fill="#000000" stroke="#000000" points="3590.0001,-111.4118 3586.5,-101.4118 3583.0001,-111.4118 3590.0001,-111.4118"/>
</g>
</g>
</svg>