<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4670pt" height="1065pt"
 viewBox="0.00 0.00 4670.00 1064.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1060.6012)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1060.6012 4666,-1060.6012 4666,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1038.6012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1034.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 157</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-966.6012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736.5" y="-962.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.5,-1020.4326C736.5,-1012.7322 736.5,-1003.5756 736.5,-995.0179"/>
<polygon fill="#000000" stroke="#000000" points="740.0001,-995.0144 736.5,-985.0145 733.0001,-995.0145 740.0001,-995.0144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="546.5" cy="-894.6012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="546.5" y="-890.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.9621,-952.3763C670.4414,-941.5685 630.8527,-926.5665 599.1644,-914.5582"/>
<polygon fill="#000000" stroke="#000000" points="600.196,-911.2064 589.6047,-910.9356 597.7155,-917.7521 600.196,-911.2064"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="695.5" cy="-894.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="695.5" y="-890.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.3652,-948.8035C721.5632,-940.3707 715.7315,-930.1298 710.4358,-920.83"/>
<polygon fill="#000000" stroke="#000000" points="713.3667,-918.9037 705.3768,-911.9458 707.2838,-922.3676 713.3667,-918.9037"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-894.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="777.5" y="-890.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.6348,-948.8035C751.4368,-940.3707 757.2685,-930.1298 762.5642,-920.83"/>
<polygon fill="#000000" stroke="#000000" points="765.7162,-922.3676 767.6232,-911.9458 759.6333,-918.9037 765.7162,-922.3676"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-894.6012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-890.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;76</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M793.06,-959.8923C904.2738,-946.7005 1151.154,-917.4166 1272.8673,-902.9794"/>
<polygon fill="#000000" stroke="#000000" points="1273.3116,-906.4513 1282.8297,-901.7977 1272.487,-899.5001 1273.3116,-906.4513"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-810.3014 0,-810.3014 0,-723.7008 499,-723.7008 499,-810.3014"/>
<text text-anchor="middle" x="249.5" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="249.5" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- prose_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M670.618,-882.864C665.3609,-880.6149 659.7993,-878.4029 654.5,-876.6012 591.2245,-855.0888 573.0979,-857.7381 508.5,-840.6012 476.0126,-831.9828 441.3428,-822.3995 408.2794,-813.0733"/>
<polygon fill="#000000" stroke="#000000" points="409.1136,-809.6721 398.5386,-810.3202 407.2097,-816.4082 409.1136,-809.6721"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="1037.5,-840.7015 517.5,-840.7015 517.5,-693.3007 1037.5,-693.3007 1037.5,-840.7015"/>
<text text-anchor="middle" x="777.5" y="-809.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="777.5" y="-794.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="777.5" y="-778.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="777.5" y="-763.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="777.5" y="-747.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="777.5" y="-732.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="777.5" y="-717.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="777.5" y="-701.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prose_4&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_4&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-876.5899C777.5,-869.3498 777.5,-860.447 777.5,-850.8728"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-850.6939 777.5,-840.6939 774.0001,-850.6939 781.0001,-850.6939"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="1101.5" cy="-767.0011" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1101.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_5&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1283.2394,-887.2835C1244.341,-880.2489 1194.1585,-866.6466 1156.5,-840.6012 1139.1722,-828.617 1125.0841,-809.4076 1115.5053,-793.6185"/>
<polygon fill="#000000" stroke="#000000" points="1118.4369,-791.6967 1110.396,-784.7978 1112.3797,-795.2053 1118.4369,-791.6967"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1197.5" cy="-767.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1197.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_5&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1302.856,-880.3232C1281.7724,-871.3885 1256.696,-858.2022 1238.5,-840.6012 1225.0466,-827.5877 1214.7983,-809.1935 1207.9125,-794.0497"/>
<polygon fill="#000000" stroke="#000000" points="1211.0391,-792.4606 1203.8732,-784.6567 1204.6085,-795.226 1211.0391,-792.4606"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="1279.5" cy="-767.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1279.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1334.4661,-876.5899C1323.6371,-854.9996 1305.3919,-818.6231 1292.9153,-793.7478"/>
<polygon fill="#000000" stroke="#000000" points="1295.8944,-791.8807 1288.2825,-784.5112 1289.6374,-795.0191 1295.8944,-791.8807"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="1407.5" cy="-767.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1407.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;48</text>
</g>
<!-- section_5&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1352.5339,-876.5899C1363.302,-855.1209 1381.4033,-819.0314 1393.8739,-794.1682"/>
<polygon fill="#000000" stroke="#000000" points="1397.1572,-795.4287 1398.5121,-784.9208 1390.9001,-792.2903 1397.1572,-795.4287"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1599.5" cy="-767.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1599.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1389.0916,-881.6087C1419.5076,-872.1234 1459.9238,-857.9211 1493.5,-840.6012 1522.3747,-825.7066 1552.5511,-804.0686 1573.2884,-788.1069"/>
<polygon fill="#000000" stroke="#000000" points="1575.5598,-790.7741 1581.2941,-781.8652 1571.2557,-785.2536 1575.5598,-790.7741"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="1935.5" cy="-767.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1935.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;75</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1400.0989,-885.43C1460.0169,-875.4597 1557.247,-858.5355 1640.5,-840.6012 1722.0837,-823.0265 1815.4154,-799.0872 1874.8665,-783.3482"/>
<polygon fill="#000000" stroke="#000000" points="1876.0682,-786.6505 1884.8354,-780.7018 1874.2721,-779.8848 1876.0682,-786.6505"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="2913.5" cy="-767.0011" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2913.5" y="-762.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 77&#45;157</text>
</g>
<!-- section_5&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1407.0673,-889.599C1527.1379,-880.137 1795.5258,-858.9229 2021.5,-840.6012 2322.7868,-816.1733 2681.2494,-786.3717 2836.0238,-773.4684"/>
<polygon fill="#000000" stroke="#000000" points="2836.6922,-776.9249 2846.3668,-772.606 2836.1105,-769.9491 2836.6922,-776.9249"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="593,-533.801 122,-533.801 122,-447.2004 593,-447.2004 593,-533.801"/>
<text text-anchor="middle" x="357.5" y="-470.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="357.5" y="-455.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- prose_9&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_9&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1192.8727,-748.989C1187.3519,-731.5296 1176.2816,-705.9058 1156.5,-693.401 1052.2179,-627.4799 719.1558,-697.5479 602.5,-657.401 530.044,-632.4653 458.9971,-580.081 412.2281,-540.6101"/>
<polygon fill="#000000" stroke="#000000" points="414.2387,-537.7247 404.3594,-533.8972 409.6955,-543.0501 414.2387,-537.7247"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1145.5,-602.7012 611.5,-602.7012 611.5,-378.3002 1145.5,-378.3002 1145.5,-602.7012"/>
<text text-anchor="middle" x="878.5" y="-571.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="878.5" y="-556.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="878.5" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="878.5" y="-525.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="878.5" y="-509.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="878.5" y="-494.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="878.5" y="-479.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="878.5" y="-463.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="878.5" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="878.5" y="-432.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="878.5" y="-417.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="878.5" y="-402.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="878.5" y="-386.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- prose_10&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>prose_10&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1273.3767,-749.0778C1266.9642,-732.6686 1255.4464,-708.6804 1238.5,-693.401 1208.3338,-666.2021 1190.6322,-675.9546 1154.5,-657.401 1124.9172,-642.2104 1094.2066,-625.0858 1064.4834,-607.742"/>
<polygon fill="#000000" stroke="#000000" points="1066.1093,-604.6381 1055.7122,-602.6011 1062.5697,-610.6773 1066.1093,-604.6381"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1523,-580.9013 1164,-580.9013 1164,-400.1001 1523,-400.1001 1523,-580.9013"/>
<text text-anchor="middle" x="1343.5" y="-565.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1343.5" y="-534.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1343.5" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1343.5" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1343.5" y="-439.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1343.5" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_11&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1403.3008,-748.8591C1395.94,-717.0584 1380.2077,-649.0898 1366.7267,-590.8476"/>
<polygon fill="#000000" stroke="#000000" points="1370.0767,-589.7991 1364.4117,-580.8459 1363.257,-591.3776 1370.0767,-589.7991"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1914,-517.8011 1541,-517.8011 1541,-463.2003 1914,-463.2003 1914,-517.8011"/>
<text text-anchor="middle" x="1727.5" y="-486.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1727.5" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- prose_12&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1607.7017,-749.2841C1628.3377,-704.7071 1682.7463,-587.1759 1710.5782,-527.0544"/>
<polygon fill="#000000" stroke="#000000" points="1713.7828,-528.4633 1714.8077,-517.9181 1707.4305,-525.5226 1713.7828,-528.4633"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2354.5,-657.3013 1932.5,-657.3013 1932.5,-323.7001 2354.5,-323.7001 2354.5,-657.3013"/>
<text text-anchor="middle" x="2143.5" y="-642.201" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-626.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="2143.5" y="-611.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="2143.5" y="-596.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2143.5" y="-580.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2143.5" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="2143.5" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="2143.5" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. codeblock.lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="2143.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="2143.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="2143.5" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="2143.5" y="-363.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_13&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1949.1475,-748.8591C1963.0788,-730.3398 1986.2374,-699.5545 2011.8045,-665.5673"/>
<polygon fill="#000000" stroke="#000000" points="2014.7819,-667.4315 2017.9965,-657.3361 2009.188,-663.2234 2014.7819,-667.4315"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="2423.5" cy="-490.5007" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2423.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_14&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_14&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2851.2085,-758.4077C2745.5257,-742.6718 2537.3073,-706.2983 2483.5,-657.401 2443.4714,-621.0249 2430.1259,-555.9873 2425.6918,-518.7486"/>
<polygon fill="#000000" stroke="#000000" points="2429.15,-518.1664 2424.6222,-508.5878 2422.1884,-518.8993 2429.15,-518.1664"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="2524.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2524.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_14&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2857.1247,-756.1276C2769.5033,-738.1256 2606.5226,-699.8746 2566.5,-657.401 2530.6921,-619.4001 2524.1998,-555.5094 2523.6857,-518.7817"/>
<polygon fill="#000000" stroke="#000000" points="2527.1856,-518.7504 2523.6858,-508.7504 2520.1856,-518.7503 2527.1856,-518.7504"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2652.5" cy="-490.5007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2652.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 79&#45;84</text>
</g>
<!-- section_14&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_14&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2877.6089,-751.3921C2839.4287,-733.327 2779.1786,-700.4565 2739.5,-657.401 2701.1057,-615.7391 2674.811,-553.9516 2661.8382,-518.4109"/>
<polygon fill="#000000" stroke="#000000" points="2665.0331,-516.9489 2658.387,-508.6978 2658.4371,-519.2926 2665.0331,-516.9489"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2780.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2780.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_14&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2894.5569,-749.461C2873.8293,-729.2245 2841.0833,-694.0088 2822.5,-657.401 2799.5565,-612.2038 2788.5775,-553.6186 2783.7812,-519.2355"/>
<polygon fill="#000000" stroke="#000000" points="2787.2055,-518.4297 2782.4338,-508.9703 2780.265,-519.3407 2787.2055,-518.4297"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2913.5" cy="-490.5007" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2913.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 97&#45;108</text>
</g>
<!-- section_14&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_14&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2913.5,-748.8591C2913.5,-701.7923 2913.5,-575.4976 2913.5,-518.7707"/>
<polygon fill="#000000" stroke="#000000" points="2917.0001,-518.7094 2913.5,-508.7095 2910.0001,-518.7095 2917.0001,-518.7094"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="3046.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3046.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_14&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2932.4431,-749.461C2953.1707,-729.2245 2985.9167,-694.0088 3004.5,-657.401 3027.4435,-612.2038 3038.4225,-553.6186 3043.2188,-519.2355"/>
<polygon fill="#000000" stroke="#000000" points="3046.735,-519.3407 3044.5662,-508.9703 3039.7945,-518.4297 3046.735,-519.3407"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="3267.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3267.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_14&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2943.2332,-750.5419C2978.7862,-730.3557 3039.505,-694.2579 3087.5,-657.401 3147.8923,-611.0237 3211.6675,-548.0813 3244.684,-514.2892"/>
<polygon fill="#000000" stroke="#000000" points="3247.554,-516.358 3252.014,-506.7476 3242.5344,-511.4792 3247.554,-516.358"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-490.5007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 122&#45;133</text>
</g>
<!-- section_14&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_14&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2967.954,-755.5294C3045.1752,-738.4501 3190.2602,-703.3541 3308.5,-657.401 3417.8254,-614.9124 3539.0231,-547.5363 3598.8482,-512.8147"/>
<polygon fill="#000000" stroke="#000000" points="3600.6892,-515.7928 3607.5664,-507.7334 3597.1643,-509.7451 3600.6892,-515.7928"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="3969.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3969.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_14&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2981.4485,-762.0932C3152.2236,-749.0941 3595.5016,-711.0571 3732.5,-657.401 3819.9211,-623.162 3905.7928,-550.1878 3945.9448,-513.1197"/>
<polygon fill="#000000" stroke="#000000" points="3948.4293,-515.5885 3953.3525,-506.207 3943.6535,-510.4707 3948.4293,-515.5885"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="4375.5" cy="-490.5007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4375.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 137&#45;156</text>
</g>
<!-- section_14&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_14&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2982.5931,-763.0749C3191.6019,-750.73 3814.7731,-710.3555 4010.5,-657.401 4136.4713,-623.3191 4273.4829,-549.7747 4337.9563,-512.751"/>
<polygon fill="#000000" stroke="#000000" points="4340.0263,-515.5972 4346.9325,-507.5626 4336.5232,-509.5368 4340.0263,-515.5972"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1741.5,-161.8002 1687.5,-161.8002 1687.5,-125.8002 1741.5,-125.8002 1741.5,-161.8002"/>
</g>
<!-- prose_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2526.3092,-472.3535C2528.6785,-437.2839 2528.1617,-360.4232 2483.5,-323.6004 2357.6685,-219.8545 1876.5605,-391.068 1750.5,-287.6004 1716.5738,-259.7546 1711.8729,-205.191 1712.515,-171.8656"/>
<polygon fill="#000000" stroke="#000000" points="1716.0133,-171.9738 1712.8809,-161.8526 1709.0179,-171.7181 1716.0133,-171.9738"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1985.5,-178.4015 1759.5,-178.4015 1759.5,-109.199 1985.5,-109.199 1985.5,-178.4015"/>
<text text-anchor="middle" x="1872.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="1872.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="1872.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="1872.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2649.1335,-472.5052C2641.4347,-436.9938 2618.9158,-358.3394 2565.5,-323.6004 2458.9166,-254.284 2108.1356,-344.6244 1994.5,-287.6004 1951.1186,-265.831 1917.0675,-221.0494 1896.0889,-187.2095"/>
<polygon fill="#000000" stroke="#000000" points="1898.9477,-185.173 1890.7807,-178.4239 1892.9564,-188.793 1898.9477,-185.173"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2433,-217.6006 2004,-217.6006 2004,-69.9999 2433,-69.9999 2433,-217.6006"/>
<text text-anchor="middle" x="2218.5" y="-186.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2218.5" y="-171.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2218.5" y="-155.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2218.5" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2218.5" y="-124.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2218.5" y="-109.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2218.5" y="-94.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- prose_23&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>prose_23&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2781.9665,-472.3515C2783.6701,-437.6254 2781.8654,-361.8384 2738.5,-323.6004 2688.7993,-279.7762 2504.8385,-310.0642 2442.5,-287.6004 2400.2382,-272.3713 2357.7742,-247.9741 2321.355,-223.567"/>
<polygon fill="#000000" stroke="#000000" points="2322.9551,-220.4229 2312.7157,-217.7014 2319.0231,-226.2143 2322.9551,-220.4229"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2901.5,-224.8005 2451.5,-224.8005 2451.5,-62.7999 2901.5,-62.7999 2901.5,-224.8005"/>
<text text-anchor="middle" x="2676.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="2676.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="2676.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="2676.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="2676.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="2676.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="2676.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2676.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="2676.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2676.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_24&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2904.8135,-472.3604C2889.5347,-441.0468 2856.1701,-375.2445 2821.5,-323.6004 2800.9672,-293.0151 2776.4992,-261.228 2753.5642,-233.04"/>
<polygon fill="#000000" stroke="#000000" points="2756.1819,-230.7122 2747.1406,-225.189 2750.7642,-235.1449 2756.1819,-230.7122"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="3173.5,-163.7023 2919.5,-163.7023 2919.5,-123.8981 3173.5,-123.8981 3173.5,-163.7023"/>
<text text-anchor="middle" x="3046.5" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- prose_25&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>prose_25&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3046.5,-472.3487C3046.5,-416.1411 3046.5,-244.5366 3046.5,-174.2787"/>
<polygon fill="#000000" stroke="#000000" points="3050.0001,-173.9061 3046.5,-163.9061 3043.0001,-173.9062 3050.0001,-173.9061"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3621,-225.5006 3192,-225.5006 3192,-62.0998 3621,-62.0998 3621,-225.5006"/>
<text text-anchor="middle" x="3406.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3406.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3406.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3406.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3406.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3406.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3406.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3406.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- prose_26&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_26&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3274.5841,-472.8311C3291.8969,-429.6487 3337.327,-316.3347 3370.0356,-234.7514"/>
<polygon fill="#000000" stroke="#000000" points="3373.2856,-236.0504 3373.7583,-225.4661 3366.7883,-233.4455 3373.2856,-236.0504"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4096,-224.8005 3639,-224.8005 3639,-62.7999 4096,-62.7999 4096,-224.8005"/>
<text text-anchor="middle" x="3867.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="3867.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="3867.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="3867.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3867.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="3867.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3867.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3867.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3867.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3867.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_27&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3648.5943,-472.3487C3677.704,-428.6589 3753.2676,-315.2479 3807.4649,-233.905"/>
<polygon fill="#000000" stroke="#000000" points="3810.6687,-235.4086 3813.3009,-225.146 3804.8433,-231.5273 3810.6687,-235.4086"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4214.5,-163.7023 4114.5,-163.7023 4114.5,-123.8981 4214.5,-123.8981 4214.5,-163.7023"/>
<text text-anchor="middle" x="4164.5" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- prose_28&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>prose_28&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3982.3575,-473.8586C4008.0467,-440.0992 4066.588,-360.5664 4105.5,-287.6004 4125.7186,-249.6875 4143.6107,-203.3065 4154.2487,-173.6582"/>
<polygon fill="#000000" stroke="#000000" points="4157.6617,-174.5051 4157.7008,-163.9103 4151.0632,-172.1682 4157.6617,-174.5051"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4662,-287.4009 4233,-287.4009 4233,-.1995 4662,-.1995 4662,-287.4009"/>
<text text-anchor="middle" x="4447.5" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="4447.5" y="-257.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="4447.5" y="-241.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="4447.5" y="-226.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="4447.5" y="-210.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="4447.5" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="4447.5" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="4447.5" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="4447.5" y="-149.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="4447.5" y="-117.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="4447.5" y="-102.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4447.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="4447.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="4447.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_29&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4379.2697,-472.3487C4386.1229,-439.3485 4401.2367,-366.571 4415.5019,-297.8802"/>
<polygon fill="#000000" stroke="#000000" points="4418.9928,-298.2831 4417.5994,-287.7803 4412.1391,-296.8597 4418.9928,-298.2831"/>
</g>
</g>
</svg>