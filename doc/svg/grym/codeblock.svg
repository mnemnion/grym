<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4670pt" height="1049pt"
 viewBox="0.00 0.00 4670.00 1048.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1044.6012)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1044.6012 4666,-1044.6012 4666,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1022.6012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1018.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 157</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-950.6012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736.5" y="-946.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.5,-1004.4326C736.5,-996.7322 736.5,-987.5756 736.5,-979.0179"/>
<polygon fill="#000000" stroke="#000000" points="740.0001,-979.0144 736.5,-969.0145 733.0001,-979.0145 740.0001,-979.0144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="546.5" cy="-878.6012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="546.5" y="-874.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.9621,-936.3763C670.4414,-925.5685 630.8527,-910.5665 599.1644,-898.5582"/>
<polygon fill="#000000" stroke="#000000" points="600.196,-895.2064 589.6047,-894.9356 597.7155,-901.7521 600.196,-895.2064"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="695.5" cy="-878.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="695.5" y="-874.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.3652,-932.8035C721.5632,-924.3707 715.7315,-914.1298 710.4358,-904.83"/>
<polygon fill="#000000" stroke="#000000" points="713.3667,-902.9037 705.3768,-895.9458 707.2838,-906.3676 713.3667,-902.9037"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-878.6012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="777.5" y="-874.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.6348,-932.8035C751.4368,-924.3707 757.2685,-914.1298 762.5642,-904.83"/>
<polygon fill="#000000" stroke="#000000" points="765.7162,-906.3676 767.6232,-895.9458 759.6333,-902.9037 765.7162,-906.3676"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-878.6012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-874.4012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;76</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M793.06,-943.8923C904.2738,-930.7005 1151.154,-901.4166 1272.8673,-886.9794"/>
<polygon fill="#000000" stroke="#000000" points="1273.3116,-890.4513 1282.8297,-885.7977 1272.487,-883.5001 1273.3116,-890.4513"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-794.3014 0,-794.3014 0,-723.7007 499,-723.7007 499,-794.3014"/>
<text text-anchor="middle" x="249.5" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="249.5" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- prose_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M670.618,-866.864C665.3609,-864.6149 659.7993,-862.4029 654.5,-860.6012 591.2245,-839.0888 573.3381,-840.8059 508.5,-824.6012 472.8165,-815.683 434.3895,-805.9957 398.3422,-796.8714"/>
<polygon fill="#000000" stroke="#000000" points="398.7956,-793.3758 388.2424,-794.3139 397.0772,-800.1616 398.7956,-793.3758"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="1037.5,-824.7015 517.5,-824.7015 517.5,-693.3007 1037.5,-693.3007 1037.5,-824.7015"/>
<text text-anchor="middle" x="777.5" y="-809.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="777.5" y="-794.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="777.5" y="-778.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="777.5" y="-763.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="777.5" y="-747.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="777.5" y="-732.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="777.5" y="-717.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="777.5" y="-701.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prose_4&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_4&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-860.4365C777.5,-853.1616 777.5,-844.2545 777.5,-834.7691"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-834.719 777.5,-824.7191 774.0001,-834.7191 781.0001,-834.719"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="1101.5" cy="-759.0011" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1101.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_5&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1284.142,-870.6572C1245.3834,-863.348 1195.0142,-849.6749 1156.5,-824.6012 1140.9699,-814.4907 1127.5204,-798.6669 1117.809,-785.0937"/>
<polygon fill="#000000" stroke="#000000" points="1120.5194,-782.8569 1111.9827,-776.5818 1114.743,-786.8108 1120.5194,-782.8569"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1197.5" cy="-759.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1197.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_5&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1303.7163,-864.1695C1282.6319,-855.1216 1257.2841,-841.8774 1238.5,-824.6012 1226.6478,-813.7005 1216.9041,-798.6209 1209.8937,-785.6679"/>
<polygon fill="#000000" stroke="#000000" points="1212.9681,-783.9931 1205.281,-776.7021 1206.7436,-787.1955 1212.9681,-783.9931"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="1279.5" cy="-759.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1279.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1333.9186,-860.6959C1323.1917,-840.65 1305.7106,-807.9822 1293.4636,-785.0955"/>
<polygon fill="#000000" stroke="#000000" points="1296.535,-783.4169 1288.7309,-776.2513 1290.3631,-786.7197 1296.535,-783.4169"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="1407.5" cy="-759.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1407.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;48</text>
</g>
<!-- section_5&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1353.0814,-860.6959C1363.6857,-840.8791 1380.8907,-808.7273 1393.1145,-785.884"/>
<polygon fill="#000000" stroke="#000000" points="1396.2208,-787.4972 1397.8531,-777.0288 1390.0489,-784.1945 1396.2208,-787.4972"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1599.5" cy="-759.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1599.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1388.1366,-865.2392C1418.5001,-855.5001 1459.2295,-841.1501 1493.5,-824.6012 1520.9546,-811.3437 1550.2922,-792.812 1571.1265,-778.8255"/>
<polygon fill="#000000" stroke="#000000" points="1573.1967,-781.6506 1579.5047,-773.1382 1569.2651,-775.8589 1573.1967,-781.6506"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="1935.5" cy="-759.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1935.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;75</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1399.4581,-869.0966C1459.2555,-858.7835 1556.7667,-841.5167 1640.5,-824.6012 1719.9855,-808.5439 1811.0228,-787.9639 1870.6902,-774.1753"/>
<polygon fill="#000000" stroke="#000000" points="1871.7696,-777.518 1880.7224,-771.8526 1870.1906,-770.6984 1871.7696,-777.518"/>
</g>
<!-- section_14 -->
<g id="node15" class="node">
<title>section_14</title>
<ellipse fill="none" stroke="#000000" cx="2913.5" cy="-759.0011" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2913.5" y="-754.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 77&#45;157</text>
</g>
<!-- section_5&#45;&gt;section_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;section_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1406.9904,-873.7646C1655.6368,-854.8231 2562.908,-785.7086 2835.5179,-764.9416"/>
<polygon fill="#000000" stroke="#000000" points="2836.0112,-768.4143 2845.7164,-764.1647 2835.4794,-761.4345 2836.0112,-768.4143"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="593,-525.801 122,-525.801 122,-455.2004 593,-455.2004 593,-525.801"/>
<text text-anchor="middle" x="357.5" y="-478.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="357.5" y="-463.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- prose_9&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_9&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1191.6162,-741.1094C1185.4857,-725.5933 1174.2552,-704.0089 1156.5,-693.401 1050.5916,-630.1257 719.1558,-697.5479 602.5,-657.401 525.2136,-630.803 449.5304,-572.9744 403.2048,-532.9"/>
<polygon fill="#000000" stroke="#000000" points="405.297,-530.0801 395.4649,-526.1327 400.6894,-535.3499 405.297,-530.0801"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1145.5,-594.7012 611.5,-594.7012 611.5,-386.3002 1145.5,-386.3002 1145.5,-594.7012"/>
<text text-anchor="middle" x="878.5" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="878.5" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="878.5" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="878.5" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="878.5" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="878.5" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="878.5" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="878.5" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="878.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="878.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="878.5" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="878.5" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="878.5" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- prose_10&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>prose_10&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1272.1009,-741.3167C1265.2438,-726.7791 1253.7967,-706.5102 1238.5,-693.401 1207.6588,-666.97 1190.6322,-675.9546 1154.5,-657.401 1120.5479,-639.9668 1085.1101,-619.9851 1051.3846,-600.0482"/>
<polygon fill="#000000" stroke="#000000" points="1052.7722,-596.8017 1042.3866,-594.7064 1049.1988,-602.8209 1052.7722,-596.8017"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1523,-580.9013 1164,-580.9013 1164,-400.1001 1523,-400.1001 1523,-580.9013"/>
<text text-anchor="middle" x="1343.5" y="-565.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1343.5" y="-534.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1343.5" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1343.5" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1343.5" y="-439.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1343.5" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_11&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1403.2014,-740.9671C1395.9174,-710.4085 1380.6452,-646.3368 1367.3714,-590.6489"/>
<polygon fill="#000000" stroke="#000000" points="1370.7276,-589.6338 1365.0043,-580.7179 1363.9184,-591.2569 1370.7276,-589.6338"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1914,-509.8013 1541,-509.8013 1541,-471.2001 1914,-471.2001 1914,-509.8013"/>
<text text-anchor="middle" x="1727.5" y="-494.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1727.5" y="-479.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- prose_12&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_12&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1607.8984,-741.384C1629.5153,-696.0393 1687.2331,-574.967 1713.786,-519.2679"/>
<polygon fill="#000000" stroke="#000000" points="1717.0733,-520.5056 1718.2173,-509.9727 1710.7546,-517.4933 1717.0733,-520.5056"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2354.5,-657.3013 1932.5,-657.3013 1932.5,-323.7001 2354.5,-323.7001 2354.5,-657.3013"/>
<text text-anchor="middle" x="2143.5" y="-642.201" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-626.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="2143.5" y="-611.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="2143.5" y="-596.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2143.5" y="-580.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2143.5" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="2143.5" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="2143.5" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. codeblock.lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="2143.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="2143.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="2143.5" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="2143.5" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="2143.5" y="-363.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2143.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_13&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1949.4704,-740.9671C1962.6815,-723.9134 1983.9781,-696.4223 2007.7191,-665.7759"/>
<polygon fill="#000000" stroke="#000000" points="2010.781,-667.5385 2014.1382,-657.4896 2005.2472,-663.2516 2010.781,-667.5385"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="2423.5" cy="-490.5007" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2423.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_14&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_14&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2849.1367,-751.3587C2742.8776,-737.5353 2537.1434,-705.2969 2483.5,-657.401 2443.1538,-621.3775 2429.9265,-556.2086 2425.598,-518.8528"/>
<polygon fill="#000000" stroke="#000000" points="2429.0549,-518.2517 2424.5588,-508.6582 2422.091,-518.9616 2429.0549,-518.2517"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="2524.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2524.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_14&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2854.6598,-749.0235C2766.5323,-732.9207 2606.3285,-698.7852 2566.5,-657.401 2530.1989,-619.682 2523.9137,-555.4169 2523.5623,-518.6092"/>
<polygon fill="#000000" stroke="#000000" points="2527.0624,-518.5796 2523.6085,-508.5636 2520.0624,-518.5474 2527.0624,-518.5796"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2652.5" cy="-490.5007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2652.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 79&#45;84</text>
</g>
<!-- section_14&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_14&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2874.7363,-743.9463C2836.4305,-727.4745 2778.1157,-697.9156 2739.5,-657.401 2700.3086,-616.2823 2674.2261,-554.046 2661.5211,-518.3332"/>
<polygon fill="#000000" stroke="#000000" points="2664.7244,-516.8868 2658.15,-508.5785 2658.1084,-519.1733 2664.7244,-516.8868"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2780.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2780.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_14&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2892.984,-741.6673C2872.1613,-722.9637 2840.502,-691.2757 2822.5,-657.401 2798.5871,-612.4036 2787.8954,-553.2888 2783.4219,-518.8361"/>
<polygon fill="#000000" stroke="#000000" points="2786.8552,-518.0729 2782.1791,-508.5658 2779.9058,-518.9139 2786.8552,-518.0729"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2913.5" cy="-490.5007" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2913.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 97&#45;108</text>
</g>
<!-- section_14&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_14&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2913.5,-740.9671C2913.5,-695.221 2913.5,-574.3721 2913.5,-518.9749"/>
<polygon fill="#000000" stroke="#000000" points="2917.0001,-518.8097 2913.5,-508.8098 2910.0001,-518.8098 2917.0001,-518.8097"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="3046.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3046.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>section_14&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2934.016,-741.6673C2954.8387,-722.9637 2986.498,-691.2757 3004.5,-657.401 3028.4129,-612.4036 3039.1046,-553.2888 3043.5781,-518.8361"/>
<polygon fill="#000000" stroke="#000000" points="3047.0942,-518.9139 3044.8209,-508.5658 3040.1448,-518.0729 3047.0942,-518.9139"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="3267.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3267.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_14&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2945.9267,-742.8155C2981.8993,-724.2456 3040.9974,-691.8855 3087.5,-657.401 3148.663,-612.0449 3212.133,-548.6982 3244.8949,-514.5687"/>
<polygon fill="#000000" stroke="#000000" points="3247.7948,-516.5995 3252.1652,-506.948 3242.73,-511.7675 3247.7948,-516.5995"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-490.5007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 122&#45;133</text>
</g>
<!-- section_14&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_14&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2970.6275,-748.4058C3048.5318,-733.0403 3191.754,-701.5081 3308.5,-657.401 3418.5063,-615.8401 3539.8747,-547.7703 3599.4062,-512.7914"/>
<polygon fill="#000000" stroke="#000000" points="3601.243,-515.7715 3608.0755,-507.6742 3597.6847,-509.7433 3601.243,-515.7715"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="3969.5" cy="-490.5007" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3969.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_14&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_14&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2982.3774,-754.7682C3153.8088,-743.548 3595.666,-710.236 3732.5,-657.401 3820.0846,-623.5824 3905.8815,-550.4158 3945.9809,-513.2125"/>
<polygon fill="#000000" stroke="#000000" points="3948.4793,-515.6678 3953.3784,-506.2737 3943.6903,-510.5622 3948.4793,-515.6678"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="4375.5" cy="-490.5007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4375.5" y="-486.3007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 137&#45;156</text>
</g>
<!-- section_14&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_14&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2982.9586,-755.6208C3192.3185,-744.9519 3814.8348,-709.5809 4010.5,-657.401 4136.5936,-623.7744 4273.5485,-550.0191 4337.9828,-512.8495"/>
<polygon fill="#000000" stroke="#000000" points="4340.0634,-515.6886 4346.9533,-507.64 4336.548,-509.6353 4340.0634,-515.6886"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1741.5,-161.8002 1687.5,-161.8002 1687.5,-125.8002 1741.5,-125.8002 1741.5,-161.8002"/>
</g>
<!-- prose_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2526.3092,-472.3535C2528.6785,-437.2839 2528.1617,-360.4232 2483.5,-323.6004 2357.6685,-219.8545 1876.5605,-391.068 1750.5,-287.6004 1716.5738,-259.7546 1711.8729,-205.191 1712.515,-171.8656"/>
<polygon fill="#000000" stroke="#000000" points="1716.0133,-171.9738 1712.8809,-161.8526 1709.0179,-171.7181 1716.0133,-171.9738"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1985.5,-178.4015 1759.5,-178.4015 1759.5,-109.199 1985.5,-109.199 1985.5,-178.4015"/>
<text text-anchor="middle" x="1872.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="1872.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="1872.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="1872.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2649.1335,-472.5052C2641.4347,-436.9938 2618.9158,-358.3394 2565.5,-323.6004 2458.9166,-254.284 2108.1356,-344.6244 1994.5,-287.6004 1951.1186,-265.831 1917.0675,-221.0494 1896.0889,-187.2095"/>
<polygon fill="#000000" stroke="#000000" points="1898.9477,-185.173 1890.7807,-178.4239 1892.9564,-188.793 1898.9477,-185.173"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2433,-209.6006 2004,-209.6006 2004,-77.9998 2433,-77.9998 2433,-209.6006"/>
<text text-anchor="middle" x="2218.5" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2218.5" y="-179.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2218.5" y="-163.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2218.5" y="-148.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2218.5" y="-132.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2218.5" y="-117.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2218.5" y="-102.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- prose_23&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>prose_23&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2781.9665,-472.3515C2783.6701,-437.6254 2781.8654,-361.8384 2738.5,-323.6004 2688.7993,-279.7762 2504.8385,-310.0642 2442.5,-287.6004 2395.7148,-270.7413 2348.6818,-242.6464 2309.8763,-215.7408"/>
<polygon fill="#000000" stroke="#000000" points="2311.4122,-212.5428 2301.2165,-209.662 2307.3904,-218.2721 2311.4122,-212.5428"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2901.5,-224.8005 2451.5,-224.8005 2451.5,-62.7999 2901.5,-62.7999 2901.5,-224.8005"/>
<text text-anchor="middle" x="2676.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="2676.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="2676.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="2676.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="2676.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="2676.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="2676.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2676.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="2676.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2676.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_24&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2904.8135,-472.3604C2889.5347,-441.0468 2856.1701,-375.2445 2821.5,-323.6004 2800.9672,-293.0151 2776.4992,-261.228 2753.5642,-233.04"/>
<polygon fill="#000000" stroke="#000000" points="2756.1819,-230.7122 2747.1406,-225.189 2750.7642,-235.1449 2756.1819,-230.7122"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="3173.5,-161.8002 2919.5,-161.8002 2919.5,-125.8002 3173.5,-125.8002 3173.5,-161.8002"/>
<text text-anchor="middle" x="3046.5" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- prose_25&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>prose_25&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3046.5,-472.3487C3046.5,-415.6121 3046.5,-241.2961 3046.5,-172.3221"/>
<polygon fill="#000000" stroke="#000000" points="3050.0001,-172.1908 3046.5,-162.1908 3043.0001,-172.1908 3050.0001,-172.1908"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3621,-217.5006 3192,-217.5006 3192,-70.0998 3621,-70.0998 3621,-217.5006"/>
<text text-anchor="middle" x="3406.5" y="-202.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3406.5" y="-186.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3406.5" y="-171.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3406.5" y="-156.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3406.5" y="-140.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3406.5" y="-125.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3406.5" y="-109.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3406.5" y="-94.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- prose_26&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_26&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3274.5841,-472.8311C3292.4563,-428.2535 3340.2919,-308.9397 3373.1646,-226.9469"/>
<polygon fill="#000000" stroke="#000000" points="3376.4234,-228.224 3376.8961,-217.6398 3369.9261,-225.6191 3376.4234,-228.224"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4096,-224.8005 3639,-224.8005 3639,-62.7999 4096,-62.7999 4096,-224.8005"/>
<text text-anchor="middle" x="3867.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="3867.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="3867.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="3867.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3867.5" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="3867.5" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3867.5" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3867.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3867.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3867.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_27&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3648.5943,-472.3487C3677.704,-428.6589 3753.2676,-315.2479 3807.4649,-233.905"/>
<polygon fill="#000000" stroke="#000000" points="3810.6687,-235.4086 3813.3009,-225.146 3804.8433,-231.5273 3810.6687,-235.4086"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4214.5,-161.8002 4114.5,-161.8002 4114.5,-125.8002 4214.5,-125.8002 4214.5,-161.8002"/>
<text text-anchor="middle" x="4164.5" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- prose_28&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>prose_28&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3982.3575,-473.8586C4008.0467,-440.0992 4066.588,-360.5664 4105.5,-287.6004 4126.1729,-248.8355 4144.4137,-201.2176 4154.9548,-171.685"/>
<polygon fill="#000000" stroke="#000000" points="4158.3319,-172.6322 4158.3536,-162.0374 4151.7296,-170.3062 4158.3319,-172.6322"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4662,-287.4009 4233,-287.4009 4233,-.1995 4662,-.1995 4662,-287.4009"/>
<text text-anchor="middle" x="4447.5" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="4447.5" y="-257.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="4447.5" y="-241.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="4447.5" y="-226.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="4447.5" y="-210.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="4447.5" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="4447.5" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="4447.5" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="4447.5" y="-149.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="4447.5" y="-117.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="4447.5" y="-102.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4447.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="4447.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="4447.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_29&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4379.2697,-472.3487C4386.1229,-439.3485 4401.2367,-366.571 4415.5019,-297.8802"/>
<polygon fill="#000000" stroke="#000000" points="4418.9928,-298.2831 4417.5994,-287.7803 4412.1391,-296.8597 4418.9928,-298.2831"/>
</g>
</g>
</svg>