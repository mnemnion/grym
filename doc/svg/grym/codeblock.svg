<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3876pt" height="1137pt"
 viewBox="0.00 0.00 3876.00 1137.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1133.2012)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1133.2012 3872,-1133.2012 3872,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1111.2012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1107.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 157</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1039.2012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1035.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.5,-1093.0325C736.5,-1085.3321 736.5,-1076.1755 736.5,-1067.6178"/>
<polygon fill="#000000" stroke="#000000" points="740.0001,-1067.6144 736.5,-1057.6145 733.0001,-1067.6145 740.0001,-1067.6144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="546.5" cy="-967.2012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="546.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.9621,-1024.9763C670.4414,-1014.1685 630.8527,-999.1664 599.1644,-987.1582"/>
<polygon fill="#000000" stroke="#000000" points="600.196,-983.8063 589.6047,-983.5356 597.7155,-990.3521 600.196,-983.8063"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="695.5" cy="-967.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="695.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.3652,-1021.4034C721.5632,-1012.9707 715.7315,-1002.7297 710.4358,-993.43"/>
<polygon fill="#000000" stroke="#000000" points="713.3667,-991.5037 705.3768,-984.5458 707.2838,-994.9676 713.3667,-991.5037"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-967.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="777.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.6348,-1021.4034C751.4368,-1012.9707 757.2685,-1002.7297 762.5642,-993.43"/>
<polygon fill="#000000" stroke="#000000" points="765.7162,-994.9676 767.6232,-984.5458 759.6333,-991.5037 765.7162,-994.9676"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1315.5" cy="-967.2012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1315.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;77</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M792.543,-1032.2321C898.7436,-1019.0258 1129.0556,-990.386 1245.3307,-975.9269"/>
<polygon fill="#000000" stroke="#000000" points="1246.0488,-979.3646 1255.5404,-974.6573 1245.1849,-972.4182 1246.0488,-979.3646"/>
</g>
<!-- raw_6 -->
<g id="node7" class="node">
<title>raw_6</title>
<ellipse fill="none" stroke="#000000" cx="472.5" cy="-895.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="472.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;raw_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M670.5506,-955.6549C665.2983,-953.3919 659.7558,-951.126 654.5,-949.2012 604.2873,-930.8118 544.6178,-914.0417 507.6473,-904.2248"/>
<polygon fill="#000000" stroke="#000000" points="508.41,-900.8064 497.8484,-901.6448 506.6276,-907.5757 508.41,-900.8064"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-895.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="777.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_4&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-949.0325C777.5,-941.3321 777.5,-932.1755 777.5,-923.6178"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-923.6144 777.5,-913.6145 774.0001,-923.6145 781.0001,-923.6144"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="1073.5" cy="-895.2012" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1073.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1269.2564,-954.3361C1231.3297,-943.6675 1176.2972,-927.9188 1128.5,-913.2012 1125.1828,-912.1798 1121.7593,-911.1062 1118.3185,-910.0132"/>
<polygon fill="#000000" stroke="#000000" points="1119.2415,-906.6336 1108.6503,-906.9085 1117.1013,-913.2984 1119.2415,-906.6336"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="1169.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1169.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1283.4597,-951.4005C1259.5983,-939.6332 1227.1044,-923.6088 1202.9189,-911.6818"/>
<polygon fill="#000000" stroke="#000000" points="1204.2832,-908.4521 1193.7664,-907.1682 1201.1871,-914.7302 1204.2832,-908.4521"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1251.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1251.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1299.6798,-949.4034C1291.6184,-940.3343 1281.6979,-929.1738 1272.9584,-919.3419"/>
<polygon fill="#000000" stroke="#000000" points="1275.5204,-916.9559 1266.2607,-911.807 1270.2885,-921.6064 1275.5204,-916.9559"/>
</g>
<!-- codeblock_13 -->
<g id="node14" class="node">
<title>codeblock_13</title>
<ellipse fill="none" stroke="#000000" cx="1379.5" cy="-895.2012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1379.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;49</text>
</g>
<!-- section_5&#45;&gt;codeblock_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;codeblock_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1331.3202,-949.4034C1339.0126,-940.7495 1348.3978,-930.1912 1356.8344,-920.7"/>
<polygon fill="#000000" stroke="#000000" points="1359.6122,-922.8431 1363.64,-913.0437 1354.3803,-918.1926 1359.6122,-922.8431"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1556.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1556.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1359.984,-953.9114C1405.3125,-940.3692 1474.8971,-919.5805 1517.9525,-906.7175"/>
<polygon fill="#000000" stroke="#000000" points="1519.1903,-910.0006 1527.7699,-903.7845 1517.1864,-903.2935 1519.1903,-910.0006"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1772.5" cy="-895.2012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1772.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 54&#45;76</text>
</g>
<!-- section_5&#45;&gt;codeblock_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;codeblock_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1372.4553,-958.2279C1454.7887,-945.2564 1607.1465,-921.2525 1698.2175,-906.9043"/>
<polygon fill="#000000" stroke="#000000" points="1698.8608,-910.3462 1708.1942,-905.3325 1697.7713,-903.4315 1698.8608,-910.3462"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="2630.5" cy="-895.2012" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2630.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;157</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1380.2625,-963.6553C1599.2747,-951.6637 2311.8808,-912.6465 2551.2534,-899.5402"/>
<polygon fill="#000000" stroke="#000000" points="2551.4786,-903.0332 2561.2723,-898.9916 2551.0959,-896.0436 2551.4786,-903.0332"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-717.6012 0,-717.6012 0,-631.0006 499,-631.0006 499,-717.6012"/>
<text text-anchor="middle" x="249.5" y="-654.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="249.5" y="-639.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- raw_6&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>raw_6&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M457.1723,-880.0178C425.4714,-848.6154 351.4447,-775.2857 300.9066,-725.2235"/>
<polygon fill="#000000" stroke="#000000" points="303.196,-722.5648 293.6284,-718.0138 298.2697,-727.5379 303.196,-722.5648"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1037.5,-748.0013 517.5,-748.0013 517.5,-600.6005 1037.5,-600.6005 1037.5,-748.0013"/>
<text text-anchor="middle" x="777.5" y="-716.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="777.5" y="-701.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="777.5" y="-685.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="777.5" y="-670.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="777.5" y="-655.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="777.5" y="-639.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="777.5" y="-624.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="777.5" y="-608.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-877.124C777.5,-851.1698 777.5,-801.6653 777.5,-758.0632"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-757.9954 777.5,-747.9954 774.0001,-757.9955 781.0001,-757.9954"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="1082.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1082.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_11&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_11&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1150.7767,-880.0676C1139.7417,-870.149 1126.4302,-856.2627 1118.5,-841.2012 1094.9481,-796.4701 1086.7992,-737.2668 1083.9831,-702.7253"/>
<polygon fill="#000000" stroke="#000000" points="1087.4509,-702.1502 1083.2435,-692.4267 1080.4689,-702.6518 1087.4509,-702.1502"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1154.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1154.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1229.9613,-881.4596C1216.5777,-871.7978 1200.1414,-857.6822 1190.5,-841.2012 1164.9062,-797.4512 1157.4415,-737.6836 1155.3061,-702.8154"/>
<polygon fill="#000000" stroke="#000000" points="1158.7813,-702.233 1154.7838,-692.4213 1151.7902,-702.5843 1158.7813,-702.233"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1559,-772.1012 1200,-772.1012 1200,-576.5006 1559,-576.5006 1559,-772.1012"/>
<text text-anchor="middle" x="1379.5" y="-757.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1379.5" y="-725.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1379.5" y="-694.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1379.5" y="-662.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1379.5" y="-647.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="1379.5" y="-616.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1379.5" y="-584.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_13&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_13&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1379.5,-877.124C1379.5,-855.932 1379.5,-819.039 1379.5,-782.4782"/>
<polygon fill="#000000" stroke="#000000" points="1383.0001,-782.1883 1379.5,-772.1883 1376.0001,-782.1884 1383.0001,-782.1883"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="1604.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1604.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_14&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_14&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1560.428,-877.124C1568.7992,-838.599 1588.4453,-748.186 1598.436,-702.2081"/>
<polygon fill="#000000" stroke="#000000" points="1601.8817,-702.8333 1600.585,-692.3181 1595.0414,-701.3468 1601.8817,-702.8333"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2071.5,-841.1015 1649.5,-841.1015 1649.5,-507.5003 2071.5,-507.5003 2071.5,-841.1015"/>
<text text-anchor="middle" x="1860.5" y="-826.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="1860.5" y="-810.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="1860.5" y="-795.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="1860.5" y="-779.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1860.5" y="-764.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1860.5" y="-733.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="1860.5" y="-717.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1860.5" y="-686.201" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="1860.5" y="-670.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="1860.5" y="-655.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. codeblock.lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="1860.5" y="-640.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="1860.5" y="-624.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1860.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="1860.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="1860.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="1860.5" y="-547.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1860.5" y="-515.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_15&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1779.7014,-877.124C1782.5905,-869.8716 1786.2122,-860.7804 1790.3104,-850.493"/>
<polygon fill="#000000" stroke="#000000" points="1793.5787,-851.746 1794.0281,-841.1607 1787.0757,-849.1554 1793.5787,-851.746"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2140.5" cy="-674.3009" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2140.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_16&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_16&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2561.8977,-890.5078C2447.6475,-882.1176 2228.1376,-863.3369 2200.5,-841.2012 2158.0648,-807.2136 2145.6236,-740.7119 2141.9885,-702.7165"/>
<polygon fill="#000000" stroke="#000000" points="2145.4453,-702.0413 2141.149,-692.3567 2138.4682,-702.6067 2145.4453,-702.0413"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2241.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2241.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_16&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2560.105,-893.1995C2470.5984,-889.1817 2322.9195,-877.1459 2283.5,-841.2012 2244.6166,-805.7453 2239.3553,-740.0834 2239.858,-702.5563"/>
<polygon fill="#000000" stroke="#000000" points="2243.3633,-702.4171 2240.1486,-692.3217 2236.3661,-702.2183 2243.3633,-702.4171"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2369.5" cy="-674.3009" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2369.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 80&#45;85</text>
</g>
<!-- section_16&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_16&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2566.3908,-887.5776C2530.7402,-880.5408 2487.4584,-867.0451 2456.5,-841.2012 2412.2475,-804.2595 2387.6705,-738.974 2376.6663,-701.9522"/>
<polygon fill="#000000" stroke="#000000" points="2380.0243,-700.9644 2373.9174,-692.3066 2373.2923,-702.883 2380.0243,-700.9644"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2497.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2497.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_16&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2590.9779,-880.1914C2572.8079,-871.4077 2552.4611,-858.5772 2539.5,-841.2012 2508.658,-799.8535 2500.3133,-738.37 2498.1491,-702.7132"/>
<polygon fill="#000000" stroke="#000000" points="2501.6356,-702.3471 2497.6578,-692.5274 2494.6437,-702.6844 2501.6356,-702.3471"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2630.5" cy="-674.3009" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2630.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 98&#45;109</text>
</g>
<!-- section_16&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_16&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2630.5,-877.124C2630.5,-838.6801 2630.5,-748.5665 2630.5,-702.499"/>
<polygon fill="#000000" stroke="#000000" points="2634.0001,-702.3181 2630.5,-692.3181 2627.0001,-702.3181 2634.0001,-702.3181"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2763.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2763.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_16&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2670.0221,-880.1914C2688.1921,-871.4077 2708.5389,-858.5772 2721.5,-841.2012 2752.342,-799.8535 2760.6867,-738.37 2762.8509,-702.7132"/>
<polygon fill="#000000" stroke="#000000" points="2766.3563,-702.6844 2763.3422,-692.5274 2759.3644,-702.3471 2766.3563,-702.6844"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2845.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2845.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_16&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.4831,-884.0755C2730.9138,-874.1461 2788.1826,-858.5288 2804.5,-841.2012 2840.3389,-803.1435 2846.3261,-739.0033 2846.5355,-702.3082"/>
<polygon fill="#000000" stroke="#000000" points="2850.0354,-702.2655 2846.4518,-692.2951 2843.0356,-702.3241 2850.0354,-702.2655"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="3051.5" cy="-674.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3051.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 123&#45;134</text>
</g>
<!-- section_16&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>section_16&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2692.0762,-886.3864C2756.7661,-876.3949 2853.605,-859.1507 2886.5,-841.2012 2950.738,-806.1489 3006.0541,-738.1317 3033.349,-700.6566"/>
<polygon fill="#000000" stroke="#000000" points="3036.3826,-702.4321 3039.3635,-692.2652 3030.6931,-698.3541 3036.3826,-702.4321"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="3291.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3291.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_16&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2701.2059,-894.1901C2824.1869,-891.3911 3071.6146,-880.8525 3147.5,-841.2012 3208.787,-809.1778 3255.2963,-739.2148 3277.3571,-700.8216"/>
<polygon fill="#000000" stroke="#000000" points="3280.5881,-702.2161 3282.4331,-691.7832 3274.4847,-698.7884 3280.5881,-702.2161"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="3592.5" cy="-674.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3592.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;156</text>
</g>
<!-- section_16&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_16&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2701.0974,-894.139C2855.148,-891.1158 3216.9039,-879.9869 3332.5,-841.2012 3426.331,-809.7183 3519.9722,-736.914 3564.9519,-698.7097"/>
<polygon fill="#000000" stroke="#000000" points="3567.4647,-701.1654 3572.7734,-691.9965 3562.9056,-695.8537 3567.4647,-701.1654"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="869,-378.6007 398,-378.6007 398,-292.0002 869,-292.0002 869,-378.6007"/>
<text text-anchor="middle" x="633.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="633.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1084.3871,-656.2972C1086.8854,-622.1596 1086.9804,-547.8264 1046.5,-507.4007 992.4677,-453.4412 949.9914,-498.2351 878.5,-471.4007 818.2472,-448.7847 754.8537,-413.207 707.6494,-384.0988"/>
<polygon fill="#000000" stroke="#000000" points="709.3695,-381.047 699.0281,-378.7435 705.6759,-386.9932 709.3695,-381.047"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1421.5,-447.5009 887.5,-447.5009 887.5,-223.1 1421.5,-223.1 1421.5,-447.5009"/>
<text text-anchor="middle" x="1154.5" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="1154.5" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="1154.5" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="1154.5" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="1154.5" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="1154.5" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="1154.5" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="1154.5" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="1154.5" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="1154.5" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="1154.5" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1154.5" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="1154.5" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1154.5,-656.0748C1154.5,-618.9687 1154.5,-531.8915 1154.5,-457.8143"/>
<polygon fill="#000000" stroke="#000000" points="1158.0001,-457.4545 1154.5,-447.4545 1151.0001,-457.4545 1158.0001,-457.4545"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1813,-362.6009 1440,-362.6009 1440,-308 1813,-308 1813,-362.6009"/>
<text text-anchor="middle" x="1626.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1626.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1605.6828,-656.0748C1609.1535,-602.5939 1619.361,-445.3068 1624.0696,-372.7512"/>
<polygon fill="#000000" stroke="#000000" points="1627.5679,-372.8892 1624.7229,-362.6835 1620.5826,-372.4359 1627.5679,-372.8892"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="1917.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="1917.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_26&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_26&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2243.0043,-656.255C2244.7932,-621.7076 2243.2397,-546.2163 2200.5,-507.4007 2118.3759,-432.8165 2036.2811,-545.2549 1953.5,-471.4007 1923.1554,-444.3283 1917.0478,-394.9559 1916.4904,-363.7062"/>
<polygon fill="#000000" stroke="#000000" points="1919.9904,-363.4762 1916.494,-353.4749 1912.9904,-363.4736 1919.9904,-363.4762"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2188.5,-369.9017 1962.5,-369.9017 1962.5,-300.6992 2188.5,-300.6992 2188.5,-369.9017"/>
<text text-anchor="middle" x="2075.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="2075.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="2075.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="2075.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_27&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2364.5498,-656.2019C2354.4869,-622.5598 2328.5989,-549.9562 2282.5,-507.4007 2252.3546,-479.5723 2230.8833,-495.2484 2197.5,-471.4007 2161.3896,-445.6048 2128.3236,-407.3757 2105.7524,-377.9963"/>
<polygon fill="#000000" stroke="#000000" points="2108.497,-375.8229 2099.6707,-369.9622 2102.9157,-380.0478 2108.497,-375.8229"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2233.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2233.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_28&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2498.7318,-656.1531C2499.989,-621.7692 2497.3891,-547.0333 2455.5,-507.4007 2394.3365,-449.5318 2331.0114,-528.8996 2269.5,-471.4007 2239.7923,-443.6308 2233.4938,-394.4676 2232.7245,-363.4498"/>
<polygon fill="#000000" stroke="#000000" points="2236.2235,-363.2753 2232.6537,-353.3 2229.2237,-363.3242 2236.2235,-363.2753"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2728.5,-416.3008 2278.5,-416.3008 2278.5,-254.3001 2728.5,-254.3001 2728.5,-416.3008"/>
<text text-anchor="middle" x="2503.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="2503.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="2503.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="2503.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="2503.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="2503.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="2503.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2503.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="2503.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2503.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_29&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2623.6719,-656.0748C2607.7052,-613.4548 2567.0407,-504.9093 2537.4261,-425.8592"/>
<polygon fill="#000000" stroke="#000000" points="2540.6576,-424.5081 2533.8717,-416.3716 2534.1025,-426.9639 2540.6576,-424.5081"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2773.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2773.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_30&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2764.0376,-656.0748C2765.6824,-600.3172 2770.6556,-431.727 2772.6546,-363.9602"/>
<polygon fill="#000000" stroke="#000000" points="2776.1632,-363.7156 2772.9597,-353.6167 2769.1663,-363.5091 2776.1632,-363.7156"/>
</g>
<!-- raw_43 -->
<g id="node44" class="node">
<title>raw_43</title>
<ellipse fill="none" stroke="#000000" cx="2845.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2845.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_31&#45;&gt;raw_43 -->
<g id="edge43" class="edge">
<title>prose_31&#45;&gt;raw_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2845.5,-656.0748C2845.5,-600.3172 2845.5,-431.727 2845.5,-363.9602"/>
<polygon fill="#000000" stroke="#000000" points="2849.0001,-363.6167 2845.5,-353.6167 2842.0001,-363.6167 2849.0001,-363.6167"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3348,-416.3008 2891,-416.3008 2891,-254.3001 3348,-254.3001 3348,-416.3008"/>
<text text-anchor="middle" x="3119.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="3119.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="3119.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="3119.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3119.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="3119.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3119.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3119.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3119.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3119.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>codeblock_32&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3055.156,-656.0748C3063.6877,-613.5414 3085.3898,-505.3503 3101.2381,-426.3416"/>
<polygon fill="#000000" stroke="#000000" points="3104.7028,-426.8647 3103.238,-416.3716 3097.8395,-425.4879 3104.7028,-426.8647"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3393.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="3393.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_33&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3297.6646,-656.4919C3309.7595,-621.3113 3337.1893,-540.3331 3357.5,-471.4007 3368.4644,-434.1887 3379.6716,-390.8017 3386.6056,-363.2016"/>
<polygon fill="#000000" stroke="#000000" points="3390.0155,-363.9925 3389.0445,-353.4423 3383.2244,-362.2953 3390.0155,-363.9925"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3868,-471.5009 3439,-471.5009 3439,-199.1 3868,-199.1 3868,-471.5009"/>
<text text-anchor="middle" x="3653.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="3653.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="3653.5" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="3653.5" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="3653.5" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="3653.5" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="3653.5" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="3653.5" y="-348.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="3653.5" y="-317.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="3653.5" y="-301.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3653.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="3653.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="3653.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_34&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3595.7796,-656.0748C3601.7471,-622.9114 3614.897,-549.8323 3627.1401,-481.7926"/>
<polygon fill="#000000" stroke="#000000" points="3630.6126,-482.2576 3628.9389,-471.7958 3623.7232,-481.0179 3630.6126,-482.2576"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="1944.5,-99.6001 1890.5,-99.6001 1890.5,-63.6001 1944.5,-63.6001 1944.5,-99.6001"/>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1917.5,-317.055C1917.5,-273.3538 1917.5,-162.4281 1917.5,-109.9469"/>
<polygon fill="#000000" stroke="#000000" points="1921.0001,-109.6803 1917.5,-99.6803 1914.0001,-109.6803 1921.0001,-109.6803"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2448,-155.4005 2019,-155.4005 2019,-7.7998 2448,-7.7998 2448,-155.4005"/>
<text text-anchor="middle" x="2233.5" y="-124.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2233.5" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2233.5" y="-93.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2233.5" y="-78.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2233.5" y="-62.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2233.5" y="-47.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2233.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2233.5,-317.055C2233.5,-285.7278 2233.5,-219.8557 2233.5,-165.7315"/>
<polygon fill="#000000" stroke="#000000" points="2237.0001,-165.4254 2233.5,-155.4255 2230.0001,-165.4255 2237.0001,-165.4254"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2799.5,-101.5022 2545.5,-101.5022 2545.5,-61.698 2799.5,-61.698 2799.5,-101.5022"/>
<text text-anchor="middle" x="2672.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2770.1989,-317.2319C2765.0295,-290.7271 2753.8901,-240.0272 2737.5,-199.2002 2724.7638,-167.4751 2705.3089,-133.5347 2691.0012,-110.3116"/>
<polygon fill="#000000" stroke="#000000" points="2693.8662,-108.2915 2685.6032,-101.6602 2687.9274,-111.997 2693.8662,-108.2915"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="3247,-163.3005 2818,-163.3005 2818,.1002 3247,.1002 3247,-163.3005"/>
<text text-anchor="middle" x="3032.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3032.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3032.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3032.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3032.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3032.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3032.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3032.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>raw_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2846.6385,-317.062C2849.1284,-289.4463 2856.9793,-236.3144 2881.5,-199.2002 2888.0825,-189.2371 2895.7926,-179.7538 2904.184,-170.8118"/>
<polygon fill="#000000" stroke="#000000" points="2906.9074,-173.0322 2911.3832,-163.4292 2901.8958,-168.1451 2906.9074,-173.0322"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3443.5,-101.5022 3343.5,-101.5022 3343.5,-61.698 3443.5,-61.698 3443.5,-101.5022"/>
<text text-anchor="middle" x="3393.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3393.5,-317.055C3393.5,-273.7938 3393.5,-164.6552 3393.5,-111.5499"/>
<polygon fill="#000000" stroke="#000000" points="3397.0001,-111.4118 3393.5,-101.4118 3390.0001,-111.4118 3397.0001,-111.4118"/>
</g>
</g>
</svg>