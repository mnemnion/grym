<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4069pt" height="1137pt"
 viewBox="0.00 0.00 4069.00 1137.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1133.2012)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1133.2012 4065,-1133.2012 4065,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1111.2012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1107.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 157</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="736.5" cy="-1039.2012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="736.5" y="-1035.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.5,-1093.0325C736.5,-1085.3321 736.5,-1076.1755 736.5,-1067.6178"/>
<polygon fill="#000000" stroke="#000000" points="740.0001,-1067.6144 736.5,-1057.6145 733.0001,-1067.6145 740.0001,-1067.6144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="546.5" cy="-967.2012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="546.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.9621,-1024.9763C670.4414,-1014.1685 630.8527,-999.1664 599.1644,-987.1582"/>
<polygon fill="#000000" stroke="#000000" points="600.196,-983.8063 589.6047,-983.5356 597.7155,-990.3521 600.196,-983.8063"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="695.5" cy="-967.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="695.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M726.3652,-1021.4034C721.5632,-1012.9707 715.7315,-1002.7297 710.4358,-993.43"/>
<polygon fill="#000000" stroke="#000000" points="713.3667,-991.5037 705.3768,-984.5458 707.2838,-994.9676 713.3667,-991.5037"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-967.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="777.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M746.6348,-1021.4034C751.4368,-1012.9707 757.2685,-1002.7297 762.5642,-993.43"/>
<polygon fill="#000000" stroke="#000000" points="765.7162,-994.9676 767.6232,-984.5458 759.6333,-991.5037 765.7162,-994.9676"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1409.5" cy="-967.2012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1409.5" y="-963.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;77</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M793.8796,-1033.0625C916.4057,-1019.9542 1203.3659,-989.2542 1337.7273,-974.8797"/>
<polygon fill="#000000" stroke="#000000" points="1338.3412,-978.3341 1347.9121,-973.7901 1337.5965,-971.3738 1338.3412,-978.3341"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="624.5,-913.2012 468.5,-913.2012 468.5,-877.2012 624.5,-877.2012 624.5,-913.2012"/>
<text text-anchor="middle" x="546.5" y="-891.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Code Block Module</text>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M546.5,-949.0325C546.5,-941.3321 546.5,-932.1755 546.5,-923.6178"/>
<polygon fill="#000000" stroke="#000000" points="550.0001,-923.6144 546.5,-913.6145 543.0001,-923.6145 550.0001,-923.6144"/>
</g>
<!-- raw_7 -->
<g id="node8" class="node">
<title>raw_7</title>
<ellipse fill="none" stroke="#000000" cx="682.5" cy="-895.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="682.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_7 -->
<g id="edge7" class="edge">
<title>prose_3&#45;&gt;raw_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M692.2196,-949.0325C690.8078,-941.2137 689.125,-931.8934 687.5595,-923.2233"/>
<polygon fill="#000000" stroke="#000000" points="690.9556,-922.3336 685.7344,-913.1146 684.067,-923.5774 690.9556,-922.3336"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="777.5" cy="-895.2012" rx="27" ry="18"/>
<text text-anchor="middle" x="777.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_4&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-949.0325C777.5,-941.3321 777.5,-932.1755 777.5,-923.6178"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-923.6144 777.5,-913.6145 774.0001,-923.6145 781.0001,-923.6144"/>
</g>
<!-- header_11 -->
<g id="node12" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="1103.5" cy="-895.2012" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1103.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1359.6548,-955.4729C1302.6202,-942.053 1209.7882,-920.2102 1152.9286,-906.8314"/>
<polygon fill="#000000" stroke="#000000" points="1153.6272,-903.4003 1143.0914,-904.5168 1152.0239,-910.2142 1153.6272,-903.4003"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1238.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1238.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1373.6528,-952.1076C1344.2647,-939.7337 1302.8995,-922.3168 1273.6914,-910.0186"/>
<polygon fill="#000000" stroke="#000000" points="1274.8616,-906.7138 1264.287,-906.0589 1272.1452,-913.1652 1274.8616,-906.7138"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="1340.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1340.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1392.797,-949.772C1383.8978,-940.4859 1372.8231,-928.9296 1363.1591,-918.8454"/>
<polygon fill="#000000" stroke="#000000" points="1365.5493,-916.2811 1356.1033,-911.4829 1360.4954,-921.1245 1365.5493,-916.2811"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1473.5" cy="-895.2012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1473.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;49</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1425.3202,-949.4034C1433.0126,-940.7495 1442.3978,-930.1912 1450.8344,-920.7"/>
<polygon fill="#000000" stroke="#000000" points="1453.6122,-922.8431 1457.64,-913.0437 1448.3803,-918.1926 1453.6122,-922.8431"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1655.5" cy="-895.2012" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1655.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1454.6202,-953.9953C1501.2036,-940.3611 1573.1047,-919.3169 1617.0672,-906.4498"/>
<polygon fill="#000000" stroke="#000000" points="1618.1926,-909.7673 1626.8068,-903.5992 1616.2262,-903.0492 1618.1926,-909.7673"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1874.5" cy="-895.2012" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1874.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 54&#45;76</text>
</g>
<!-- section_5&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1466.9845,-958.3004C1550.8319,-945.3175 1706.7599,-921.1738 1799.5259,-906.8101"/>
<polygon fill="#000000" stroke="#000000" points="1800.3385,-910.2261 1809.6852,-905.237 1799.2673,-903.3085 1800.3385,-910.2261"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2734.5" cy="-895.2012" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2734.5" y="-891.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;157</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.3045,-963.6797C1694.5559,-951.7114 2413.9609,-912.6192 2654.9865,-899.5219"/>
<polygon fill="#000000" stroke="#000000" points="2655.2781,-903.0113 2665.0735,-898.9738 2654.8982,-896.0216 2655.2781,-903.0113"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-717.6012 0,-717.6012 0,-631.0006 499,-631.0006 499,-717.6012"/>
<text text-anchor="middle" x="249.5" y="-654.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="249.5" y="-639.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- raw_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>raw_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.694,-886.0672C650.7267,-883.1145 641.7689,-879.9068 633.5,-877.2012 578.553,-859.2221 561.1366,-865.1138 508.5,-841.2012 438.376,-809.3441 365.2015,-760.5255 314.5908,-723.9026"/>
<polygon fill="#000000" stroke="#000000" points="316.4969,-720.9611 306.3525,-717.9047 312.3768,-726.6201 316.4969,-720.9611"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1037.5,-748.0013 517.5,-748.0013 517.5,-600.6005 1037.5,-600.6005 1037.5,-748.0013"/>
<text text-anchor="middle" x="777.5" y="-716.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="777.5" y="-701.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="777.5" y="-685.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="777.5" y="-670.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="777.5" y="-655.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="777.5" y="-639.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="777.5" y="-624.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="777.5" y="-608.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M777.5,-877.124C777.5,-851.1698 777.5,-801.6653 777.5,-758.0632"/>
<polygon fill="#000000" stroke="#000000" points="781.0001,-757.9954 777.5,-747.9954 774.0001,-757.9955 781.0001,-757.9954"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1141.5,-692.3009 1055.5,-692.3009 1055.5,-656.3009 1141.5,-656.3009 1141.5,-692.3009"/>
<text text-anchor="middle" x="1098.5" y="-670.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_11&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>header_11&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1103.0908,-877.124C1102.2207,-838.6801 1100.181,-748.5665 1099.1383,-702.499"/>
<polygon fill="#000000" stroke="#000000" points="1102.6333,-702.2363 1098.9078,-692.3181 1095.6351,-702.3948 1102.6333,-702.2363"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="1186.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1186.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_12&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_12&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1232.8246,-877.2955C1229.5994,-866.827 1225.5994,-853.327 1222.5,-841.2012 1210.1134,-792.7416 1198.4152,-735.6536 1191.8793,-702.3655"/>
<polygon fill="#000000" stroke="#000000" points="1195.2924,-701.581 1189.9444,-692.435 1188.4216,-702.9198 1195.2924,-701.581"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1258.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1258.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_13&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_13&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1323.6473,-879.7242C1313.7074,-869.6764 1301.7025,-855.7749 1294.5,-841.2012 1272.1023,-795.8811 1263.5698,-736.8736 1260.369,-702.5284"/>
<polygon fill="#000000" stroke="#000000" points="1263.8339,-701.9633 1259.5063,-692.2926 1256.8586,-702.5512 1263.8339,-701.9633"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1663,-772.1012 1304,-772.1012 1304,-576.5006 1663,-576.5006 1663,-772.1012"/>
<text text-anchor="middle" x="1483.5" y="-757.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1483.5" y="-725.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="1483.5" y="-694.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1483.5" y="-662.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1483.5" y="-647.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="1483.5" y="-616.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1483.5" y="-584.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_14&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.3183,-877.124C1475.2777,-855.932 1476.9478,-819.039 1478.6029,-782.4782"/>
<polygon fill="#000000" stroke="#000000" points="1482.1128,-782.3364 1479.0687,-772.1883 1475.12,-782.0198 1482.1128,-782.3364"/>
</g>
<!-- raw_24 -->
<g id="node25" class="node">
<title>raw_24</title>
<ellipse fill="none" stroke="#000000" cx="1708.5" cy="-674.3009" rx="27" ry="18"/>
<text text-anchor="middle" x="1708.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_24 -->
<g id="edge24" class="edge">
<title>prose_15&#45;&gt;raw_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1661.1494,-877.2889C1664.3659,-866.8181 1668.3659,-853.3181 1671.5,-841.2012 1684.0408,-792.7166 1696.1244,-735.6366 1702.9051,-702.3567"/>
<polygon fill="#000000" stroke="#000000" points="1706.361,-702.9245 1704.9141,-692.429 1699.5001,-701.536 1706.361,-702.9245"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2175.5,-841.1015 1753.5,-841.1015 1753.5,-507.5003 2175.5,-507.5003 2175.5,-841.1015"/>
<text text-anchor="middle" x="1964.5" y="-826.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-810.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="1964.5" y="-795.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="1964.5" y="-779.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1964.5" y="-764.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1964.5" y="-733.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="1964.5" y="-717.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-686.201" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-670.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="1964.5" y="-655.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. codeblock.lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="1964.5" y="-640.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="1964.5" y="-624.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="1964.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="1964.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="1964.5" y="-547.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1964.5" y="-515.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_16&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1881.8651,-877.124C1884.8199,-869.8716 1888.5238,-860.7804 1892.7152,-850.493"/>
<polygon fill="#000000" stroke="#000000" points="1895.9855,-851.7422 1896.5174,-841.1607 1889.5029,-849.101 1895.9855,-851.7422"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="2244.5" cy="-674.3009" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2244.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_17&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2665.8977,-890.5078C2551.6475,-882.1176 2332.1376,-863.3369 2304.5,-841.2012 2262.0648,-807.2136 2249.6236,-740.7119 2245.9885,-702.7165"/>
<polygon fill="#000000" stroke="#000000" points="2249.4453,-702.0413 2245.149,-692.3567 2242.4682,-702.6067 2249.4453,-702.0413"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2345.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2345.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2664.105,-893.1995C2574.5984,-889.1817 2426.9195,-877.1459 2387.5,-841.2012 2348.6166,-805.7453 2343.3553,-740.0834 2343.858,-702.5563"/>
<polygon fill="#000000" stroke="#000000" points="2347.3633,-702.4171 2344.1486,-692.3217 2340.3661,-702.2183 2347.3633,-702.4171"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2473.5" cy="-674.3009" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2473.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 80&#45;85</text>
</g>
<!-- section_17&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2670.3908,-887.5776C2634.7402,-880.5408 2591.4584,-867.0451 2560.5,-841.2012 2516.2475,-804.2595 2491.6705,-738.974 2480.6663,-701.9522"/>
<polygon fill="#000000" stroke="#000000" points="2484.0243,-700.9644 2477.9174,-692.3066 2477.2923,-702.883 2484.0243,-700.9644"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2601.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2601.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_17&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2694.9779,-880.1914C2676.8079,-871.4077 2656.4611,-858.5772 2643.5,-841.2012 2612.658,-799.8535 2604.3133,-738.37 2602.1491,-702.7132"/>
<polygon fill="#000000" stroke="#000000" points="2605.6356,-702.3471 2601.6578,-692.5274 2598.6437,-702.6844 2605.6356,-702.3471"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2734.5" cy="-674.3009" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2734.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 98&#45;109</text>
</g>
<!-- section_17&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>section_17&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2734.5,-877.124C2734.5,-838.6801 2734.5,-748.5665 2734.5,-702.499"/>
<polygon fill="#000000" stroke="#000000" points="2738.0001,-702.3181 2734.5,-692.3181 2731.0001,-702.3181 2738.0001,-702.3181"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="2890.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2890.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>section_17&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2772.1885,-879.9091C2790.3563,-870.9311 2811.2425,-858.015 2825.5,-841.2012 2860.3109,-800.1489 2877.7636,-738.3087 2885.4168,-702.5601"/>
<polygon fill="#000000" stroke="#000000" points="2888.9289,-702.8513 2887.4857,-692.3553 2882.0685,-701.4604 2888.9289,-702.8513"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="3016.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3016.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_17&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2792.3463,-884.7237C2842.4683,-874.6948 2910.1924,-858.5606 2931.5,-841.2012 2976.0887,-804.8745 2999.639,-739.075 3009.9375,-701.8687"/>
<polygon fill="#000000" stroke="#000000" points="3013.3265,-702.7435 3012.4973,-692.1811 3006.5587,-700.9552 3013.3265,-702.7435"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="3233.5" cy="-674.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3233.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 123&#45;134</text>
</g>
<!-- section_17&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>section_17&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2800.4616,-888.7694C2881.4495,-880.0838 3013.4822,-863.1337 3057.5,-841.2012 3125.6531,-807.2429 3185.3375,-737.9868 3214.5136,-700.2403"/>
<polygon fill="#000000" stroke="#000000" points="3217.3275,-702.3222 3220.6004,-692.2455 3211.758,-698.0818 3217.3275,-702.3222"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="3479.5" cy="-674.3009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3479.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_17&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2803.8257,-891.7572C2950.6775,-884.0528 3283.4543,-864.2785 3329.5,-841.2012 3392.5922,-809.5805 3441.502,-739.1409 3464.7094,-700.6527"/>
<polygon fill="#000000" stroke="#000000" points="3467.9837,-701.9906 3470.0489,-691.599 3461.9541,-698.4347 3467.9837,-701.9906"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="3785.5" cy="-674.3009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3785.5" y="-670.1009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;156</text>
</g>
<!-- section_17&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>section_17&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2804.4191,-892.3538C2984.2512,-884.7534 3453.4501,-863.0734 3520.5,-841.2012 3616.075,-810.0239 3711.8297,-736.8178 3757.6469,-698.5582"/>
<polygon fill="#000000" stroke="#000000" points="3759.9618,-701.1845 3765.3488,-692.0614 3755.4484,-695.8339 3759.9618,-701.1845"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="973,-378.6007 502,-378.6007 502,-292.0002 973,-292.0002 973,-378.6007"/>
<text text-anchor="middle" x="737.5" y="-315.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="737.5" y="-300.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1188.3871,-656.2972C1190.8854,-622.1596 1190.9804,-547.8264 1150.5,-507.4007 1096.4677,-453.4412 1053.9914,-498.2351 982.5,-471.4007 922.2472,-448.7847 858.8537,-413.207 811.6494,-384.0988"/>
<polygon fill="#000000" stroke="#000000" points="813.3695,-381.047 803.0281,-378.7435 809.6759,-386.9932 813.3695,-381.047"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1525.5,-447.5009 991.5,-447.5009 991.5,-223.1 1525.5,-223.1 1525.5,-447.5009"/>
<text text-anchor="middle" x="1258.5" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="1258.5" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="1258.5" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="1258.5" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="1258.5" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="1258.5" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="1258.5" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="1258.5" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="1258.5" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="1258.5" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="1258.5" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1258.5" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="1258.5" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1258.5,-656.0748C1258.5,-618.9687 1258.5,-531.8915 1258.5,-457.8143"/>
<polygon fill="#000000" stroke="#000000" points="1262.0001,-457.4545 1258.5,-447.4545 1255.0001,-457.4545 1262.0001,-457.4545"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1917,-362.6009 1544,-362.6009 1544,-308 1917,-308 1917,-362.6009"/>
<text text-anchor="middle" x="1730.5" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1730.5" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- raw_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1709.6828,-656.0748C1713.1535,-602.5939 1723.361,-445.3068 1728.0696,-372.7512"/>
<polygon fill="#000000" stroke="#000000" points="1731.5679,-372.8892 1728.7229,-362.6835 1724.5826,-372.4359 1731.5679,-372.8892"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2065,-353.3005 1972,-353.3005 1972,-317.3005 2065,-317.3005 2065,-353.3005"/>
<text text-anchor="middle" x="2018.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">*** asserts</text>
</g>
<!-- header_27&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>header_27&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2243.1034,-656.2125C2239.516,-622.2624 2227.0121,-548.7047 2184.5,-507.4007 2147.6057,-471.5547 2112.1956,-506.403 2074.5,-471.4007 2043.5149,-442.6294 2029.1883,-394.1819 2022.9309,-363.5201"/>
<polygon fill="#000000" stroke="#000000" points="2026.3301,-362.6575 2021.0401,-353.4779 2019.451,-363.9528 2026.3301,-362.6575"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="2110.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2110.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_28&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2346.7332,-656.2879C2348.0132,-622.1344 2345.5612,-547.7753 2304.5,-507.4007 2253.1452,-456.9046 2198.2997,-521.4401 2146.5,-471.4007 2117.4095,-443.2987 2110.8857,-394.6552 2109.909,-363.7711"/>
<polygon fill="#000000" stroke="#000000" points="2113.407,-363.6004 2109.767,-353.6505 2106.4077,-363.6987 2113.407,-363.6004"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="2381.5,-369.9017 2155.5,-369.9017 2155.5,-300.6992 2381.5,-300.6992 2381.5,-369.9017"/>
<text text-anchor="middle" x="2268.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="2268.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="2268.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="2268.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_29&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2465.0397,-656.3768C2450.2203,-625.3897 2418.1247,-560.0662 2386.5,-507.4007 2359.3356,-462.1628 2324.8829,-412.6895 2300.2294,-378.4451"/>
<polygon fill="#000000" stroke="#000000" points="2302.8773,-376.1337 2294.1831,-370.0789 2297.2038,-380.234 2302.8773,-376.1337"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2426.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2426.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_30&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2602.1185,-656.2312C2602.2743,-622.638 2597.7985,-550.1125 2559.5,-507.4007 2528.801,-473.1641 2493.4049,-505.4515 2462.5,-471.4007 2435.5815,-441.7421 2428.3742,-394.2841 2426.6728,-363.9682"/>
<polygon fill="#000000" stroke="#000000" points="2430.1571,-363.495 2426.2688,-353.6395 2423.1624,-363.7687 2430.1571,-363.495"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2921.5,-416.3008 2471.5,-416.3008 2471.5,-254.3001 2921.5,-254.3001 2921.5,-416.3008"/>
<text text-anchor="middle" x="2696.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="2696.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="2696.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="2696.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="2696.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="2696.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="2696.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2696.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="2696.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2696.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_31&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2732.457,-656.0748C2727.6892,-613.5414 2715.5616,-505.3503 2706.7052,-426.3416"/>
<polygon fill="#000000" stroke="#000000" points="2710.1799,-425.9194 2705.5876,-416.3716 2703.2234,-426.6993 2710.1799,-425.9194"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="2966.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="2966.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_32&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_32&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2894.5861,-656.0748C2907.1413,-600.0717 2945.2156,-430.2402 2960.2742,-363.0709"/>
<polygon fill="#000000" stroke="#000000" points="2963.7135,-363.7288 2962.4859,-353.2053 2956.8831,-362.1974 2963.7135,-363.7288"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3038.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="3038.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_33&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_33&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3017.6828,-656.0748C3021.3013,-600.3172 3032.2422,-431.727 3036.6401,-363.9602"/>
<polygon fill="#000000" stroke="#000000" points="3040.1563,-363.8224 3037.3113,-353.6167 3033.171,-363.369 3040.1563,-363.8224"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3541,-416.3008 3084,-416.3008 3084,-254.3001 3541,-254.3001 3541,-416.3008"/>
<text text-anchor="middle" x="3312.5" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="3312.5" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="3312.5" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="3312.5" y="-354.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3312.5" y="-339.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="3312.5" y="-324.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3312.5" y="-308.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3312.5" y="-293.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3312.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3312.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_34&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3237.7474,-656.0748C3247.6593,-613.5414 3272.8719,-505.3503 3291.284,-426.3416"/>
<polygon fill="#000000" stroke="#000000" points="3294.7464,-426.905 3293.6073,-416.3716 3287.929,-425.3163 3294.7464,-426.905"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="3586.5" cy="-335.3005" rx="27" ry="18"/>
<text text-anchor="middle" x="3586.5" y="-331.1005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_35&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_35&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3486.2406,-656.5423C3499.4429,-621.4499 3529.2702,-540.6192 3550.5,-471.4007 3561.8753,-434.3123 3572.9838,-390.8956 3579.7836,-363.2551"/>
<polygon fill="#000000" stroke="#000000" points="3583.1984,-364.0249 3582.1703,-353.4801 3576.3981,-362.3645 3583.1984,-364.0249"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="4061,-471.5009 3632,-471.5009 3632,-199.1 4061,-199.1 4061,-471.5009"/>
<text text-anchor="middle" x="3846.5" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="3846.5" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="3846.5" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="3846.5" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="3846.5" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="3846.5" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="3846.5" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="3846.5" y="-348.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="3846.5" y="-317.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="3846.5" y="-301.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3846.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="3846.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="3846.5" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>codeblock_36&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3788.7796,-656.0748C3794.7471,-622.9114 3807.897,-549.8323 3820.1401,-481.7926"/>
<polygon fill="#000000" stroke="#000000" points="3823.6126,-482.2576 3821.9389,-471.7958 3816.7232,-481.0179 3823.6126,-482.2576"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2137.5,-99.6001 2083.5,-99.6001 2083.5,-63.6001 2137.5,-63.6001 2137.5,-99.6001"/>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2110.5,-317.055C2110.5,-273.3538 2110.5,-162.4281 2110.5,-109.9469"/>
<polygon fill="#000000" stroke="#000000" points="2114.0001,-109.6803 2110.5,-99.6803 2107.0001,-109.6803 2114.0001,-109.6803"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2641,-155.4005 2212,-155.4005 2212,-7.7998 2641,-7.7998 2641,-155.4005"/>
<text text-anchor="middle" x="2426.5" y="-124.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2426.5" y="-108.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2426.5" y="-93.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2426.5" y="-78.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2426.5" y="-62.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2426.5" y="-47.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2426.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2426.5,-317.055C2426.5,-285.7278 2426.5,-219.8557 2426.5,-165.7315"/>
<polygon fill="#000000" stroke="#000000" points="2430.0001,-165.4254 2426.5,-155.4255 2423.0001,-165.4255 2430.0001,-165.4254"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2992.5,-101.5022 2738.5,-101.5022 2738.5,-61.698 2992.5,-61.698 2992.5,-101.5022"/>
<text text-anchor="middle" x="2865.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2963.1989,-317.2319C2958.0295,-290.7271 2946.8901,-240.0272 2930.5,-199.2002 2917.7638,-167.4751 2898.3089,-133.5347 2884.0012,-110.3116"/>
<polygon fill="#000000" stroke="#000000" points="2886.8662,-108.2915 2878.6032,-101.6602 2880.9274,-111.997 2886.8662,-108.2915"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3440,-163.3005 3011,-163.3005 3011,.1002 3440,.1002 3440,-163.3005"/>
<text text-anchor="middle" x="3225.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3225.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3225.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3225.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3225.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3225.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3225.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3225.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3039.6385,-317.062C3042.1284,-289.4463 3049.9793,-236.3144 3074.5,-199.2002 3081.0825,-189.2371 3088.7926,-179.7538 3097.184,-170.8118"/>
<polygon fill="#000000" stroke="#000000" points="3099.9074,-173.0322 3104.3832,-163.4292 3094.8958,-168.1451 3099.9074,-173.0322"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3636.5,-101.5022 3536.5,-101.5022 3536.5,-61.698 3636.5,-61.698 3636.5,-101.5022"/>
<text text-anchor="middle" x="3586.5" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- raw_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3586.5,-317.055C3586.5,-273.7938 3586.5,-164.6552 3586.5,-111.5499"/>
<polygon fill="#000000" stroke="#000000" points="3590.0001,-111.4118 3586.5,-101.4118 3583.0001,-111.4118 3590.0001,-111.4118"/>
</g>
</g>
</svg>