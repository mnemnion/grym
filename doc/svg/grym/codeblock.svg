<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5180pt" height="1033pt"
 viewBox="0.00 0.00 5179.50 1033.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1029.2012)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1029.2012 5175.5,-1029.2012 5175.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="652" cy="-1007.2012" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="652" y="-1003.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 157</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="652" cy="-935.2012" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="652" y="-931.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;15</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M652,-989.0325C652,-981.3321 652,-972.1755 652,-963.6178"/>
<polygon fill="#000000" stroke="#000000" points="655.5001,-963.6144 652,-953.6145 648.5001,-963.6145 655.5001,-963.6144"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="159" cy="-863.2012" rx="99.1626" ry="18"/>
<text text-anchor="middle" x="159" y="-859.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Code Block Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M597.3567,-927.2208C512.4393,-914.8191 348.0243,-890.8072 246.4627,-875.9746"/>
<polygon fill="#000000" stroke="#000000" points="246.932,-872.5061 236.5312,-874.5242 245.9204,-879.4327 246.932,-872.5061"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="388" cy="-863.2012" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="388" y="-859.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M607.216,-922.9874C559.5966,-910.0003 484.567,-889.5377 435.82,-876.243"/>
<polygon fill="#000000" stroke="#000000" points="436.7053,-872.8567 426.1367,-873.6021 434.8634,-879.61 436.7053,-872.8567"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="718" cy="-863.2012" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="718" y="-859.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;15</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M667.9768,-917.772C676.1647,-908.8397 686.2782,-897.8068 695.264,-888.0041"/>
<polygon fill="#000000" stroke="#000000" points="697.9931,-890.2065 702.1704,-880.4699 692.833,-885.4764 697.9931,-890.2065"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1499" cy="-863.2012" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1499" y="-859.0012" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;77</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M710.5519,-930.2239C861.0222,-917.4331 1260.9631,-883.4357 1426.1018,-869.398"/>
<polygon fill="#000000" stroke="#000000" points="1426.4936,-872.8774 1436.1612,-868.5429 1425.9007,-865.9025 1426.4936,-872.8774"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-761.6011 0,-761.6011 0,-725.6011 54,-725.6011 54,-761.6011"/>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M118.2687,-846.5619C99.7763,-837.5338 78.6026,-824.9683 63,-809.2012 52.2959,-798.3842 43.8501,-783.7312 37.8371,-771.0175"/>
<polygon fill="#000000" stroke="#000000" points="40.9832,-769.4787 33.716,-761.769 34.5892,-772.3278 40.9832,-769.4787"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="571.5,-778.9014 72.5,-778.9014 72.5,-708.3007 571.5,-708.3007 571.5,-778.9014"/>
<text text-anchor="middle" x="322" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Code blocks are the motivating object for Grimoire. &#160;Perforce they</text>
<text text-anchor="middle" x="322" y="-716.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> will do a lot of the heavy lifting.</text>
</g>
<!-- block_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>block_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M378.2615,-845.5538C369.928,-830.4525 357.5677,-808.0541 346.5534,-788.0948"/>
<polygon fill="#000000" stroke="#000000" points="349.5027,-786.1952 341.6068,-779.1309 343.374,-789.5773 349.5027,-786.1952"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="1110,-809.3015 590,-809.3015 590,-677.9007 1110,-677.9007 1110,-809.3015"/>
<text text-anchor="middle" x="850" y="-794.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> From the compiler&#39;s perspective, Code, Structure, and Prose are the</text>
<text text-anchor="middle" x="850" y="-778.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> three basic genres of Grimmorian text. &#160;In this implementation,</text>
<text text-anchor="middle" x="850" y="-763.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> you may think of Code as a clade diverged early from both Structure</text>
<text text-anchor="middle" x="850" y="-747.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> and Prose, with some later convergence toward the former. </text>
<text text-anchor="middle" x="850" y="-732.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="850" y="-717.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Specifically, Structure and Prose will actually inherit from Block, and</text>
<text text-anchor="middle" x="850" y="-701.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> Code block, name notwithstanding, merely imitates some behaviours.</text>
<text text-anchor="middle" x="850" y="-686.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- block_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>block_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.6324,-846.3191C745.8405,-837.976 757.6484,-827.2773 770.1506,-815.9495"/>
<polygon fill="#000000" stroke="#000000" points="772.5171,-818.5284 777.5776,-809.2202 767.8169,-813.341 772.5171,-818.5284"/>
</g>
<!-- header_9 -->
<g id="node10" class="node">
<title>header_9</title>
<ellipse fill="none" stroke="#000000" cx="1174" cy="-743.6011" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1174" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_5&#45;&gt;header_9 -->
<g id="edge9" class="edge">
<title>section_5&#45;&gt;header_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1438.6834,-855.8685C1370.2833,-846.738 1263.7447,-829.8036 1229,-809.2012 1212.9555,-799.6873 1199.4233,-783.7345 1189.7965,-769.943"/>
<polygon fill="#000000" stroke="#000000" points="1192.4936,-767.6774 1184.0471,-761.2815 1186.6615,-771.5487 1192.4936,-767.6774"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="1294" cy="-743.6011" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1294" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 16&#45;21</text>
</g>
<!-- section_5&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1451.8905,-850.508C1423.5536,-841.5792 1387.5632,-827.8767 1359,-809.2012 1342.3309,-798.3025 1326.5344,-782.5351 1314.6884,-769.19"/>
<polygon fill="#000000" stroke="#000000" points="1317.0312,-766.5473 1307.8506,-761.259 1311.7296,-771.1182 1317.0312,-766.5473"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="1424" cy="-743.6011" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1424" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 22&#45;35</text>
</g>
<!-- section_5&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1487.7717,-845.2958C1475.2896,-825.391 1455.0034,-793.0412 1440.6674,-770.18"/>
<polygon fill="#000000" stroke="#000000" points="1443.583,-768.2414 1435.305,-761.6288 1437.6526,-771.9603 1443.583,-768.2414"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="1575" cy="-743.6011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1575" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 36&#45;49</text>
</g>
<!-- section_5&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1510.378,-845.2958C1523.0265,-825.391 1543.5832,-793.0412 1558.1104,-770.18"/>
<polygon fill="#000000" stroke="#000000" points="1561.135,-771.9461 1563.5443,-761.6288 1555.2269,-768.1918 1561.135,-771.9461"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="1843" cy="-743.6011" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1843" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 51&#45;53</text>
</g>
<!-- section_5&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1541.3909,-849.3818C1574.1292,-838.634 1620.5262,-823.2387 1661,-809.2012 1707.3161,-793.1374 1759.9802,-774.0667 1796.6981,-760.6396"/>
<polygon fill="#000000" stroke="#000000" points="1797.9566,-763.9061 1806.1437,-757.1813 1795.5499,-757.3328 1797.9566,-763.9061"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="2185" cy="-743.6011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2185" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 54&#45;76</text>
</g>
<!-- section_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1560.9744,-856.9953C1641.3646,-848.4938 1785.7841,-831.6813 1908,-809.2012 1983.1974,-795.3695 2068.6729,-774.297 2124.5396,-759.7872"/>
<polygon fill="#000000" stroke="#000000" points="2125.4812,-763.1588 2134.2737,-757.2476 2123.714,-756.3855 2125.4812,-763.1588"/>
</g>
<!-- section_15 -->
<g id="node16" class="node">
<title>section_15</title>
<ellipse fill="none" stroke="#000000" cx="3238" cy="-743.6011" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3238" y="-739.4011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;157</text>
</g>
<!-- section_5&#45;&gt;section_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;section_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1562.6949,-858.8206C1830.5506,-840.3987 2865.284,-769.2347 3159.536,-748.9974"/>
<polygon fill="#000000" stroke="#000000" points="3159.9524,-752.4772 3169.6886,-748.2992 3159.472,-745.4937 3159.9524,-752.4772"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="335,-493.1007 281,-493.1007 281,-457.1007 335,-457.1007 335,-493.1007"/>
</g>
<!-- header_9&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>header_9&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1164.7123,-725.7984C1155.4523,-710.1149 1139.6444,-688.2226 1119,-678.0009 1041.7469,-639.7507 409.7997,-697.6922 344,-642.0009 304.0493,-608.1877 302.0828,-541.6198 304.7084,-503.5666"/>
<polygon fill="#000000" stroke="#000000" points="308.2308,-503.4501 305.5881,-493.1901 301.2558,-502.8587 308.2308,-503.4501"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="824.5,-510.401 353.5,-510.401 353.5,-439.8003 824.5,-439.8003 824.5,-510.401"/>
<text text-anchor="middle" x="589" y="-463.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Codeblock inherits from Node directly, and is born with these </text>
<text text-anchor="middle" x="589" y="-447.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> additional fields:</text>
</g>
<!-- block_10&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>block_10&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1282.1277,-725.9727C1270.566,-710.4095 1251.4792,-688.5958 1229,-678.0009 1069.5406,-602.8447 999.9285,-701.5283 834,-642.0009 757.2949,-614.4827 681.7489,-557.1559 635.2725,-517.4219"/>
<polygon fill="#000000" stroke="#000000" points="637.3594,-514.5996 627.5037,-510.7118 632.7838,-519.8972 637.3594,-514.5996"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1377,-579.3012 843,-579.3012 843,-370.9002 1377,-370.9002 1377,-579.3012"/>
<text text-anchor="middle" x="1110" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level &#160;: &#160;The number of !s, which is the number of / needed to close</text>
<text text-anchor="middle" x="1110" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;the block.</text>
<text text-anchor="middle" x="1110" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : &#160;The line after # and at least one !.</text>
<text text-anchor="middle" x="1110" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; footer : &#160;The line closing the block. Optional, as a code block may</text>
<text text-anchor="middle" x="1110" y="-502.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end a file without a closing line.</text>
<text text-anchor="middle" x="1110" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines &#160;: &#160;Array containing the lines of code. &#160;Header and footer</text>
<text text-anchor="middle" x="1110" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;are not included.</text>
<text text-anchor="middle" x="1110" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_first : &#160;The first (header) line of the block. </text>
<text text-anchor="middle" x="1110" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line_last &#160;: &#160;The closing line of the block. Note that code blocks also</text>
<text text-anchor="middle" x="1110" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;collect blank lines and may have a clinging tag. </text>
<text text-anchor="middle" x="1110" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1110" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> To be added:</text>
<text text-anchor="middle" x="1110" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; [ ] lang : The language, derived from the header line.</text>
</g>
<!-- block_11&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_11&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1407.6469,-726.1078C1394.7832,-712.5935 1376.2167,-693.6226 1359,-678.0009 1325.0215,-647.1703 1287.1635,-615.1986 1251.4296,-586.0041"/>
<polygon fill="#000000" stroke="#000000" points="1253.3242,-583.0331 1243.361,-579.4295 1248.9024,-588.4597 1253.3242,-583.0331"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1754.5,-572.901 1395.5,-572.901 1395.5,-377.3004 1754.5,-377.3004 1754.5,-572.901"/>
<text text-anchor="middle" x="1575" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1575" y="-526.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1575" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1575" y="-463.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local CB = setmetatable({}, Node)</text>
<text text-anchor="middle" x="1575" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.id = &quot;codeblock&quot;</text>
<text text-anchor="middle" x="1575" y="-416.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__index = CB</text>
<text text-anchor="middle" x="1575" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">CB.__tostring = function() return &quot;codeblock&quot; end</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_12&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1575,-725.5671C1575,-696.4605 1575,-636.9501 1575,-583.2396"/>
<polygon fill="#000000" stroke="#000000" points="1578.5001,-582.9368 1575,-572.9368 1571.5001,-582.9368 1578.5001,-582.9368"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2145.5,-494.4012 1772.5,-494.4012 1772.5,-455.8001 2145.5,-455.8001 2145.5,-494.4012"/>
<text text-anchor="middle" x="1959" y="-479.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="1959" y="-463.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- block_13&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_13&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1850.7912,-725.5671C1870.5346,-679.8678 1922.6582,-559.2195 1946.6247,-503.7452"/>
<polygon fill="#000000" stroke="#000000" points="1949.871,-505.0562 1950.624,-494.4882 1943.445,-502.28 1949.871,-505.0562"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2586,-641.9013 2164,-641.9013 2164,-308.3001 2586,-308.3001 2586,-641.9013"/>
<text text-anchor="middle" x="2375" y="-626.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toValue(codeblock)</text>
<text text-anchor="middle" x="2375" y="-611.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.val = &quot;&quot;</text>
<text text-anchor="middle" x="2375" y="-596.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(codeblock.lines) do</text>
<text text-anchor="middle" x="2375" y="-580.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;codeblock.val = codeblock.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2375" y="-565.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2375" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock.val</text>
<text text-anchor="middle" x="2375" y="-518.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2375" y="-487.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.toMarkdown(codeblock)</text>
<text text-anchor="middle" x="2375" y="-471.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#45;&#45; hardcode lua</text>
<text text-anchor="middle" x="2375" y="-456.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return &quot;```&quot; .. codeblock.lang .. &quot;\n&quot; </text>
<text text-anchor="middle" x="2375" y="-440.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. codeblock:toValue() .. &quot;```\n&quot;</text>
<text text-anchor="middle" x="2375" y="-425.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2375" y="-394.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.dotLabel(codeblock)</text>
<text text-anchor="middle" x="2375" y="-378.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;code block &quot; .. tostring(codeblock.line_first)</text>
<text text-anchor="middle" x="2375" y="-363.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(codeblock.line_last)</text>
<text text-anchor="middle" x="2375" y="-347.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2375" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local cb = {}</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>codeblock_14&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2197.7615,-725.5671C2209.8293,-708.5133 2229.2829,-681.0223 2250.9693,-650.3758"/>
<polygon fill="#000000" stroke="#000000" points="2253.9136,-652.2743 2256.833,-642.0896 2248.1995,-648.2308 2253.9136,-652.2743"/>
</g>
<!-- header_22 -->
<g id="node23" class="node">
<title>header_22</title>
<ellipse fill="none" stroke="#000000" cx="2655" cy="-475.1007" rx="50.8" ry="18"/>
<text text-anchor="middle" x="2655" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : asserts</text>
</g>
<!-- section_15&#45;&gt;header_22 -->
<g id="edge22" class="edge">
<title>section_15&#45;&gt;header_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3169.9025,-738.645C3044.2506,-728.197 2782.5857,-699.9497 2715,-642.0009 2673.8324,-606.7034 2660.9108,-540.982 2656.8551,-503.4023"/>
<polygon fill="#000000" stroke="#000000" points="2660.3125,-502.7824 2655.8946,-493.1526 2653.343,-503.4356 2660.3125,-502.7824"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2780" cy="-475.1007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2780" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;79</text>
</g>
<!-- section_15&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_15&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3176.5153,-734.666C3078.7632,-719.3439 2893.9381,-685.4627 2845,-642.0009 2804.1585,-605.7297 2788.7615,-540.653 2783.1199,-503.3796"/>
<polygon fill="#000000" stroke="#000000" points="2786.5508,-502.6377 2781.7193,-493.2087 2779.6163,-503.5927 2786.5508,-502.6377"/>
</g>
<!-- codeblock_24 -->
<g id="node25" class="node">
<title>codeblock_24</title>
<ellipse fill="none" stroke="#000000" cx="2931" cy="-475.1007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2931" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 80&#45;85</text>
</g>
<!-- section_15&#45;&gt;codeblock_24 -->
<g id="edge24" class="edge">
<title>section_15&#45;&gt;codeblock_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3187.7604,-730.8799C3139.0296,-716.3565 3065.5307,-688.4011 3017,-642.0009 2975.8282,-602.6367 2950.7925,-539.244 2939.0479,-502.9697"/>
<polygon fill="#000000" stroke="#000000" points="2942.278,-501.5712 2935.9558,-493.0695 2935.5963,-503.6582 2942.278,-501.5712"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="3082" cy="-475.1007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3082" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 89&#45;97</text>
</g>
<!-- section_15&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_15&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3218.6962,-726.1385C3198.572,-707.0855 3167.2042,-674.8884 3147,-642.0009 3119.1203,-596.6197 3099.4501,-537.2516 3089.4843,-502.9279"/>
<polygon fill="#000000" stroke="#000000" points="3092.7995,-501.7892 3086.7047,-493.1229 3086.0649,-503.6984 3092.7995,-501.7892"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="3238" cy="-475.1007" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3238" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 98&#45;109</text>
</g>
<!-- section_15&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_15&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3238,-725.5671C3238,-679.821 3238,-558.972 3238,-503.5748"/>
<polygon fill="#000000" stroke="#000000" points="3241.5001,-503.4097 3238,-493.4097 3234.5001,-503.4098 3241.5001,-503.4097"/>
</g>
<!-- block_27 -->
<g id="node28" class="node">
<title>block_27</title>
<ellipse fill="none" stroke="#000000" cx="3505" cy="-475.1007" rx="63.9154" ry="18"/>
<text text-anchor="middle" x="3505" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 111&#45;112</text>
</g>
<!-- section_15&#45;&gt;block_27 -->
<g id="edge27" class="edge">
<title>section_15&#45;&gt;block_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3255.5186,-725.984C3301.7402,-679.5027 3427.0887,-553.4498 3480.4338,-499.8049"/>
<polygon fill="#000000" stroke="#000000" points="3483.1945,-501.9924 3487.764,-492.4335 3478.2309,-497.0565 3483.1945,-501.9924"/>
</g>
<!-- block_28 -->
<g id="node29" class="node">
<title>block_28</title>
<ellipse fill="none" stroke="#000000" cx="3784" cy="-475.1007" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="3784" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 113&#45;122</text>
</g>
<!-- section_15&#45;&gt;block_28 -->
<g id="edge28" class="edge">
<title>section_15&#45;&gt;block_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3296.2814,-733.3972C3366.1885,-719.5659 3485.5145,-690.8163 3578,-642.0009 3651.5365,-603.1872 3723.8692,-536.0422 3760.0786,-499.8786"/>
<polygon fill="#000000" stroke="#000000" points="3762.6877,-502.2181 3767.2444,-492.6532 3757.7175,-497.2889 3762.6877,-502.2181"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="4166" cy="-475.1007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4166" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 123&#45;134</text>
</g>
<!-- section_15&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_15&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3307.2491,-739.7889C3423.7872,-731.7277 3665.2619,-707.9128 3858,-642.0009 3964.2979,-605.6496 4077.5527,-534.8628 4132.3825,-498.2602"/>
<polygon fill="#000000" stroke="#000000" points="4134.639,-500.9607 4140.9852,-492.4768 4130.7335,-495.1514 4134.639,-500.9607"/>
</g>
<!-- block_30 -->
<g id="node31" class="node">
<title>block_30</title>
<ellipse fill="none" stroke="#000000" cx="4506" cy="-475.1007" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4506" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 136&#45;137</text>
</g>
<!-- section_15&#45;&gt;block_30 -->
<g id="edge30" class="edge">
<title>section_15&#45;&gt;block_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3308.2337,-741.159C3509.5981,-733.4471 4085.7513,-706.2183 4262,-642.0009 4350.7924,-609.6489 4438.0864,-537.491 4480.101,-499.5268"/>
<polygon fill="#000000" stroke="#000000" points="4482.6257,-501.961 4487.6484,-492.6324 4477.9046,-496.7927 4482.6257,-501.961"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="4901" cy="-475.1007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4901" y="-470.9007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;156</text>
</g>
<!-- section_15&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>section_15&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3308.3328,-742.013C3549.0158,-735.9985 4338.1725,-711.3353 4581,-642.0009 4693.3792,-609.9134 4811.8739,-535.9836 4867.9152,-498.2179"/>
<polygon fill="#000000" stroke="#000000" points="4870.0577,-500.9937 4876.3628,-492.4792 4866.1242,-495.2034 4870.0577,-500.9937"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2179,-154.1002 2125,-154.1002 2125,-118.1002 2179,-118.1002 2179,-154.1002"/>
</g>
<!-- header_22&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>header_22&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2654.4702,-456.8933C2652.3685,-421.7182 2642.3015,-344.6811 2595,-308.2004 2523.1014,-252.7496 2257.4332,-330.7087 2188,-272.2004 2156.9027,-245.9961 2151.0208,-196.3634 2150.7137,-164.8251"/>
<polygon fill="#000000" stroke="#000000" points="2154.2164,-164.523 2150.8053,-154.4923 2147.2166,-164.4609 2154.2164,-164.523"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2251,-154.1002 2197,-154.1002 2197,-118.1002 2251,-118.1002 2251,-154.1002"/>
</g>
<!-- block_23&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_23&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2778.9527,-457.0787C2775.8433,-421.8776 2763.541,-344.2799 2715,-308.2004 2633.5964,-247.6949 2337.8636,-337.1982 2260,-272.2004 2228.7816,-246.1404 2222.9361,-196.4645 2222.6691,-164.8782"/>
<polygon fill="#000000" stroke="#000000" points="2226.1724,-164.5638 2222.7749,-154.5285 2219.1728,-164.4922 2226.1724,-164.5638"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2495,-170.7015 2269,-170.7015 2269,-101.4989 2495,-101.4989 2495,-170.7015"/>
<text text-anchor="middle" x="2382" y="-155.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">function CB.check(codeblock)</text>
<text text-anchor="middle" x="2382" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_first)</text>
<text text-anchor="middle" x="2382" y="-124.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;assert(codeblock.line_last)</text>
<text text-anchor="middle" x="2382" y="-109.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_24&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>codeblock_24&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2927.5539,-457.0308C2919.7824,-421.7448 2897.3227,-344.0034 2845,-308.2004 2719.2286,-222.1386 2639.6946,-341.5694 2504,-272.2004 2463.324,-251.4063 2429.8146,-210.9579 2408.2752,-179.5371"/>
<polygon fill="#000000" stroke="#000000" points="2410.9914,-177.3027 2402.5214,-170.938 2405.1737,-181.1955 2410.9914,-177.3027"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2942.5,-201.9006 2513.5,-201.9006 2513.5,-70.2998 2942.5,-70.2998 2942.5,-201.9006"/>
<text text-anchor="middle" x="2728" y="-186.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="2728" y="-171.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str : &#160;The string to match against.</text>
<text text-anchor="middle" x="2728" y="-156.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2728" y="-140.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="2728" y="-125.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For header match</text>
<text text-anchor="middle" x="2728" y="-109.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="2728" y="-94.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- block_25&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_25&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3079.1153,-456.9348C3073.0289,-423.817 3056.0819,-352.9228 3017,-308.2004 2995.2695,-283.3337 2980.5616,-288.7777 2952,-272.2004 2916.4445,-251.5638 2878.087,-228.5425 2843.3333,-207.3898"/>
<polygon fill="#000000" stroke="#000000" points="2844.9399,-204.2702 2834.5792,-202.0549 2841.297,-210.2476 2844.9399,-204.2702"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3411,-217.1005 2961,-217.1005 2961,-55.0999 3411,-55.0999 3411,-217.1005"/>
<text text-anchor="middle" x="3186" y="-201.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchHead(str)</text>
<text text-anchor="middle" x="3186" y="-186.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codestart, str) then</text>
<text text-anchor="middle" x="3186" y="-171.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax, str))</text>
<text text-anchor="middle" x="3186" y="-155.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.zaps, trimmed) &#45; 1</text>
<text text-anchor="middle" x="3186" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.zaps, trimmed))</text>
<text text-anchor="middle" x="3186" y="-124.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="3186" y="-109.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="3186" y="-94.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="3186" y="-78.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3186" y="-63.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_26&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3235.2043,-456.8745C3228.68,-414.3412 3212.0843,-306.1501 3199.965,-227.1413"/>
<polygon fill="#000000" stroke="#000000" points="3203.4115,-226.525 3198.4357,-217.1713 3196.4924,-227.5864 3203.4115,-226.525"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="3683,-154.1002 3429,-154.1002 3429,-118.1002 3683,-118.1002 3683,-154.1002"/>
<text text-anchor="middle" x="3556" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Matches a code block footer line.</text>
</g>
<!-- block_27&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_27&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3507.742,-456.8745C3516.1476,-401.002 3541.598,-231.8311 3551.7512,-164.3421"/>
<polygon fill="#000000" stroke="#000000" points="3555.2177,-164.8259 3553.2445,-154.4165 3548.2956,-163.7845 3555.2177,-164.8259"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4130.5,-209.8006 3701.5,-209.8006 3701.5,-62.3998 4130.5,-62.3998 4130.5,-209.8006"/>
<text text-anchor="middle" x="3916" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #args</text>
<text text-anchor="middle" x="3916" y="-179.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; str &#160;&#160;: &#160;The string to match against.</text>
<text text-anchor="middle" x="3916" y="-163.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; level : &#160;Required level for a match.</text>
<text text-anchor="middle" x="3916" y="-148.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3916" y="-132.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return 3</text>
<text text-anchor="middle" x="3916" y="-117.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; boolean : &#160;For footer match</text>
<text text-anchor="middle" x="3916" y="-102.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; number &#160;: &#160;Level of header</text>
<text text-anchor="middle" x="3916" y="-86.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45; string &#160;: &#160;Header stripped of left whitespace and tars</text>
</g>
<!-- block_28&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_28&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3791.0969,-456.8745C3808.2068,-412.933 3852.6035,-298.9142 3883.5673,-219.3934"/>
<polygon fill="#000000" stroke="#000000" points="3886.907,-220.4622 3887.2741,-209.8738 3880.3841,-217.9223 3886.907,-220.4622"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="4605.5,-217.1005 4148.5,-217.1005 4148.5,-55.0999 4605.5,-55.0999 4605.5,-217.1005"/>
<text text-anchor="middle" x="4377" y="-201.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">function cb.matchFoot(str)</text>
<text text-anchor="middle" x="4377" y="-186.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if str ~= &quot;&quot; and L.match(m.codefinish, str) then</text>
<text text-anchor="middle" x="4377" y="-171.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local trimmed = str:sub(L.match(m.WS * m.hax &#160;&#160;&#160;, str))</text>
<text text-anchor="middle" x="4377" y="-155.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local level = L.match(m.fass, trimmed) &#45; 1</text>
<text text-anchor="middle" x="4377" y="-140.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local bareline = trimmed:sub(L.match(m.fass, trimmed))</text>
<text text-anchor="middle" x="4377" y="-124.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, level, bareline</text>
<text text-anchor="middle" x="4377" y="-109.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="4377" y="-94.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, 0, &quot;&quot;</text>
<text text-anchor="middle" x="4377" y="-78.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4377" y="-63.3001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>codeblock_29&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4177.3443,-456.8745C4203.9796,-414.0813 4271.9823,-304.8255 4321.2337,-225.6964"/>
<polygon fill="#000000" stroke="#000000" points="4324.2271,-227.5107 4326.5399,-217.1713 4318.2842,-223.8117 4324.2271,-227.5107"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="4724,-154.1002 4624,-154.1002 4624,-118.1002 4724,-118.1002 4724,-154.1002"/>
<text text-anchor="middle" x="4674" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor</text>
</g>
<!-- block_30&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>block_30&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4516.1359,-457.1441C4535.8235,-422.0361 4580.2621,-341.6563 4614,-272.2004 4631.987,-235.1707 4650.8399,-191.4803 4662.5048,-163.7853"/>
<polygon fill="#000000" stroke="#000000" points="4665.8229,-164.9231 4666.4622,-154.3475 4659.3674,-162.2161 4665.8229,-164.9231"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="5171.5,-272.3007 4742.5,-272.3007 4742.5,.1003 5171.5,.1003 5171.5,-272.3007"/>
<text text-anchor="middle" x="4957" y="-257.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Codeblock, level, headline, linum)</text>
<text text-anchor="middle" x="4957" y="-241.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local codeblock = setmetatable({}, CB)</text>
<text text-anchor="middle" x="4957" y="-226.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.level = level</text>
<text text-anchor="middle" x="4957" y="-210.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.header = headline</text>
<text text-anchor="middle" x="4957" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lang = L.match(L.C(m.symbol), headline) or &quot;&quot;</text>
<text text-anchor="middle" x="4957" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.footer = &quot;&quot;</text>
<text text-anchor="middle" x="4957" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.line_first = linum</text>
<text text-anchor="middle" x="4957" y="-149.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;codeblock.lines = {}</text>
<text text-anchor="middle" x="4957" y="-117.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return codeblock</text>
<text text-anchor="middle" x="4957" y="-102.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4957" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__call = new</text>
<text text-anchor="middle" x="4957" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">cb.__index = cb</text>
<text text-anchor="middle" x="4957" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, cb)</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>codeblock_31&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4904.0108,-456.8745C4909.4891,-423.7112 4921.5612,-350.632 4932.8007,-282.5923"/>
<polygon fill="#000000" stroke="#000000" points="4936.2754,-283.0323 4934.4521,-272.5956 4929.369,-281.8914 4936.2754,-283.0323"/>
</g>
</g>
</svg>