<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3014pt" height="2378pt"
 viewBox="0.00 0.00 3014.00 2378.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2374.4036)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2374.4036 3010,-2374.4036 3010,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="982.5" cy="-2352.4036" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="982.5" y="-2348.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 171</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="982.5" cy="-2280.4036" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="982.5" y="-2276.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;48</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M982.5,-2334.235C982.5,-2326.5346 982.5,-2317.378 982.5,-2308.8203"/>
<polygon fill="#000000" stroke="#000000" points="986.0001,-2308.8169 982.5,-2298.8169 979.0001,-2308.8169 986.0001,-2308.8169"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="711.5" cy="-2208.4036" rx="98.1935" ry="18"/>
<text text-anchor="middle" x="711.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Ownership function</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M937.1407,-2268.3524C893.3499,-2256.718 826.5713,-2238.9761 777.0113,-2225.8088"/>
<polygon fill="#000000" stroke="#000000" points="777.9042,-2222.4247 767.3407,-2223.2395 776.1067,-2229.19 777.9042,-2222.4247"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="859.5" cy="-2208.4036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="859.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M954.8964,-2264.2454C935.8555,-2253.0996 910.5105,-2238.2635 890.7307,-2226.685"/>
<polygon fill="#000000" stroke="#000000" points="892.4752,-2223.6506 882.0769,-2221.6194 888.9389,-2229.6917 892.4752,-2223.6506"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="941.5" cy="-2208.4036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="941.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M972.3652,-2262.6059C967.5632,-2254.1731 961.7315,-2243.9322 956.4358,-2234.6324"/>
<polygon fill="#000000" stroke="#000000" points="959.3667,-2232.7061 951.3768,-2225.7482 953.2838,-2236.17 959.3667,-2232.7061"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1023.5" cy="-2208.4036" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1023.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M992.6348,-2262.6059C997.4368,-2254.1731 1003.2685,-2243.9322 1008.5642,-2234.6324"/>
<polygon fill="#000000" stroke="#000000" points="1011.7162,-2236.17 1013.6232,-2225.7482 1005.6333,-2232.7061 1011.7162,-2236.17"/>
</g>
<!-- codeblock_6 -->
<g id="node7" class="node">
<title>codeblock_6</title>
<ellipse fill="none" stroke="#000000" cx="1187.5" cy="-2208.4036" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1187.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;46</text>
</g>
<!-- section_1&#45;&gt;codeblock_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;codeblock_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1022.0261,-2266.5213C1054.1438,-2255.2409 1099.7299,-2239.2302 1134.925,-2226.869"/>
<polygon fill="#000000" stroke="#000000" points="1136.2813,-2230.1023 1144.5565,-2223.4862 1133.9617,-2223.4978 1136.2813,-2230.1023"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2027.5" cy="-2208.4036" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2027.5" y="-2204.2036" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 49&#45;171</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1041.6779,-2276.3263C1219.3892,-2264.0821 1748.4613,-2227.6293 1949.1356,-2213.8029"/>
<polygon fill="#000000" stroke="#000000" points="1949.5658,-2217.2816 1959.3016,-2213.1025 1949.0846,-2210.2982 1949.5658,-2217.2816"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="793,-1926.4033 630,-1926.4033 630,-1890.4033 793,-1890.4033 793,-1926.4033"/>
<text text-anchor="middle" x="711.5" y="-1904.9033" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Ownership function</text>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M711.5,-2190.0889C711.5,-2139.4445 711.5,-1997.2598 711.5,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="715.0001,-1936.4783 711.5,-1926.4784 708.0001,-1936.4784 715.0001,-1936.4783"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="848.5" cy="-1908.4033" rx="27" ry="18"/>
<text text-anchor="middle" x="848.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M858.8285,-2190.0889C856.9715,-2139.4445 851.7581,-1997.2598 849.5304,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="853.0269,-1936.3434 849.1628,-1926.4784 846.0316,-1936.5999 853.0269,-1936.3434"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="930.5" cy="-1908.4033" rx="27" ry="18"/>
<text text-anchor="middle" x="930.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_4&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M940.8285,-2190.0889C938.9715,-2139.4445 933.7581,-1997.2598 931.5304,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="935.0269,-1936.3434 931.1628,-1926.4784 928.0316,-1936.5999 935.0269,-1936.3434"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="1023.5" cy="-1908.4033" rx="27" ry="18"/>
<text text-anchor="middle" x="1023.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_5&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1023.5,-2190.0889C1023.5,-2139.4445 1023.5,-1997.2598 1023.5,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="1027.0001,-1936.4783 1023.5,-1926.4784 1020.0001,-1936.4784 1027.0001,-1936.4783"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1378.5,-2154.4039 1068.5,-2154.4039 1068.5,-1662.4027 1378.5,-1662.4027 1378.5,-2154.4039"/>
<text text-anchor="middle" x="1223.5" y="-2139.2036" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1223.5" y="-2107.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="1223.5" y="-2076.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="1223.5" y="-2061.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
<text text-anchor="middle" x="1223.5" y="-2029.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Csp = epeg.Csp</text>
<text text-anchor="middle" x="1223.5" y="-1998.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;../lib/ansi&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1982.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1935.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast = require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1904.0034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1872.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1841.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">local Header = require &quot;grym/header&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1825.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">local Section = require &quot;grym/section&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1810.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">local Block = require &quot;grym/block&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1795.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="1223.5" y="-1763.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = {}</text>
<text text-anchor="middle" x="1223.5" y="-1732.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">local blue = tostring(a.blue)</text>
<text text-anchor="middle" x="1223.5" y="-1716.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">local red = tostring(a.red)</text>
<text text-anchor="middle" x="1223.5" y="-1701.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">local dim = tostring(a.dim)</text>
<text text-anchor="middle" x="1223.5" y="-1686.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">local green = tostring(a.green)</text>
<text text-anchor="middle" x="1223.5" y="-1670.603" font-family="Inconsolata" font-size="14.00" fill="#000000">local cl &#160;&#160;= tostring(a.clear)</text>
</g>
<!-- codeblock_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1189.6978,-2190.0889C1190.5221,-2183.2192 1191.5486,-2174.6652 1192.7254,-2164.8587"/>
<polygon fill="#000000" stroke="#000000" points="1196.2339,-2164.9964 1193.9504,-2154.6506 1189.2838,-2164.1623 1196.2339,-2164.9964"/>
</g>
<!-- header_16 -->
<g id="node17" class="node">
<title>header_16</title>
<ellipse fill="none" stroke="#000000" cx="1708.5" cy="-1908.4033" rx="142.1715" ry="18"/>
<text text-anchor="middle" x="1708.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Helper functions for own.parse</text>
</g>
<!-- section_7&#45;&gt;header_16 -->
<g id="edge16" class="edge">
<title>section_7&#45;&gt;header_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1984.6063,-2193.9954C1961.2695,-2184.8831 1932.717,-2171.5701 1910.5,-2154.4036 1826.8993,-2089.8078 1755.5083,-1984.4974 1724.7146,-1935.3079"/>
<polygon fill="#000000" stroke="#000000" points="1727.5148,-1933.1817 1719.2743,-1926.5226 1721.5635,-1936.8671 1727.5148,-1933.1817"/>
</g>
<!-- prose_17 -->
<g id="node18" class="node">
<title>prose_17</title>
<ellipse fill="none" stroke="#000000" cx="1951.5" cy="-1908.4033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1951.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_17 -->
<g id="edge17" class="edge">
<title>section_7&#45;&gt;prose_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2022.8603,-2190.0889C2010.0304,-2139.4445 1974.0103,-1997.2598 1958.6188,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="1961.9277,-1935.3126 1956.079,-1926.4784 1955.142,-1937.0317 1961.9277,-1935.3126"/>
</g>
<!-- codeblock_18 -->
<g id="node19" class="node">
<title>codeblock_18</title>
<ellipse fill="none" stroke="#000000" cx="2104.5" cy="-1908.4033" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2104.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;65</text>
</g>
<!-- section_7&#45;&gt;codeblock_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;codeblock_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2032.2008,-2190.0889C2045.1995,-2139.4445 2081.6935,-1997.2598 2097.2875,-1936.5039"/>
<polygon fill="#000000" stroke="#000000" points="2100.7647,-1937.0346 2099.8607,-1926.4784 2093.9845,-1935.2943 2100.7647,-1937.0346"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2304.5" cy="-1908.4033" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2304.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2090.0193,-2199.9406C2123.1776,-2192.6646 2162.6916,-2179.2086 2190.5,-2154.4036 2257.5651,-2094.5818 2288.004,-1987.1652 2299.1461,-1936.4166"/>
<polygon fill="#000000" stroke="#000000" points="2302.6017,-1936.9917 2301.237,-1926.4851 2295.7518,-1935.5495 2302.6017,-1936.9917"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="2578.5" cy="-1908.4033" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2578.5" y="-1904.2033" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;170</text>
</g>
<!-- section_7&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_7&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2093.6739,-2202.1396C2173.6947,-2193.7123 2302.9545,-2177.1171 2345.5,-2154.4036 2446.3439,-2100.5668 2528.3503,-1986.7091 2562.0076,-1934.9786"/>
<polygon fill="#000000" stroke="#000000" points="2565.084,-1936.6651 2567.5408,-1926.3591 2559.1933,-1932.8836 2565.084,-1936.6651"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="527,-909.6019 0,-909.6019 0,-839.0012 527,-839.0012 527,-909.6019"/>
<text text-anchor="middle" x="263.5" y="-862.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Taking a multi&#45;pass approach to this Grimoire instance will benefit us </text>
<text text-anchor="middle" x="263.5" y="-847.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">in a few ways. </text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M851.3525,-1890.3016C857.4237,-1844.5733 866.2151,-1723.6986 801.5,-1662.403 714.8848,-1580.3646 628.3282,-1701.3391 535.5,-1626.403 308.2866,-1442.9837 270.8223,-1053.3551 264.6871,-920.1038"/>
<polygon fill="#000000" stroke="#000000" points="268.173,-919.6947 264.2544,-909.8512 261.1792,-919.9899 268.173,-919.6947"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1002,-901.602 545,-901.602 545,-847.0011 1002,-847.0011 1002,-901.602"/>
<text text-anchor="middle" x="773.5" y="-870.5016" font-family="Inconsolata" font-size="14.00" fill="#000000">First, Grimoire itself is structured in a certain fashion. The </text>
<text text-anchor="middle" x="773.5" y="-855.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">straightforward thing is to mirror that fashion in code.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M927.775,-1890.4545C909.5083,-1770.1384 804.8143,-1080.5577 779.1693,-911.6432"/>
<polygon fill="#000000" stroke="#000000" points="782.6254,-911.0894 777.664,-901.7281 775.7047,-912.1402 782.6254,-911.0894"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1547,-916.9026 1020,-916.9026 1020,-831.7005 1547,-831.7005 1547,-916.9026"/>
<text text-anchor="middle" x="1283.5" y="-885.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">Second, the critical path right now is simple code generation from </text>
<text text-anchor="middle" x="1283.5" y="-870.5016" font-family="Inconsolata" font-size="14.00" fill="#000000">Grimoire documents. Parsing prose gets useful later, for now I simply</text>
<text text-anchor="middle" x="1283.5" y="-855.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">wish to unravel some existing code into Grimoire format and start working</text>
<text text-anchor="middle" x="1283.5" y="-839.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">on it accordingly. </text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1025.3174,-1890.3563C1029.613,-1849.479 1041.4101,-1746.8129 1059.5,-1662.403 1119.7918,-1381.074 1224.6503,-1052.3048 1266.0088,-926.6962"/>
<polygon fill="#000000" stroke="#000000" points="1269.4172,-927.5364 1269.2271,-916.9433 1262.7697,-925.3429 1269.4172,-927.5364"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1826,-892.3015 1565,-892.3015 1565,-856.3015 1826,-856.3015 1826,-892.3015"/>
<text text-anchor="middle" x="1695.5" y="-870.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** Helper functions for own.parse</text>
</g>
<!-- header_16&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>header_16&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1708.2688,-1890.0156C1706.7118,-1766.1625 1697.7591,-1054.0019 1695.8557,-902.5971"/>
<polygon fill="#000000" stroke="#000000" points="1699.3518,-902.2571 1695.7263,-892.3019 1692.3524,-902.3452 1699.3518,-902.2571"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="1871.5" cy="-874.3015" rx="27" ry="18"/>
<text text-anchor="middle" x="1871.5" y="-870.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_17&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_17&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1947.9941,-1890.3448C1939.4863,-1845.7456 1917.6977,-1726.7218 1907.5,-1626.403 1878.8931,-1344.9848 1872.926,-1001.9555 1871.7643,-902.5369"/>
<polygon fill="#000000" stroke="#000000" points="1875.2627,-902.3602 1871.653,-892.3992 1868.2631,-902.4371 1875.2627,-902.3602"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2318,-947.4024 1917,-947.4024 1917,-801.2007 2318,-801.2007 2318,-947.4024"/>
<text text-anchor="middle" x="2117.5" y="-932.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local function lead_whitespace(str)</text>
<text text-anchor="middle" x="2117.5" y="-917.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local lead_ws = L.match(m.WS, str)</text>
<text text-anchor="middle" x="2117.5" y="-901.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if lead_ws &gt; 1 then</text>
<text text-anchor="middle" x="2117.5" y="-886.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; &#160;io.write(green..(&quot;%&quot;):rep(lead_ws &#45; 1)..cl)</text>
<text text-anchor="middle" x="2117.5" y="-870.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return lead_ws, str:sub(lead_ws)</text>
<text text-anchor="middle" x="2117.5" y="-855.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2117.5" y="-840.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0, str</text>
<text text-anchor="middle" x="2117.5" y="-824.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2117.5" y="-809.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_18&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_18&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2104.7312,-1890.0156C2106.1446,-1777.5836 2113.6527,-1180.3429 2116.4492,-957.8867"/>
<polygon fill="#000000" stroke="#000000" points="2119.9527,-957.6236 2116.5788,-947.5803 2112.9533,-957.5355 2119.9527,-957.6236"/>
</g>
<!-- raw_25 -->
<g id="node26" class="node">
<title>raw_25</title>
<ellipse fill="none" stroke="#000000" cx="2363.5" cy="-874.3015" rx="27" ry="18"/>
<text text-anchor="middle" x="2363.5" y="-870.1015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_25 -->
<g id="edge25" class="edge">
<title>prose_19&#45;&gt;raw_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2306.0961,-1890.2708C2309.9969,-1845.5048 2320.1579,-1726.1346 2326.5,-1626.403 2344.453,-1344.0866 2358.4914,-1001.6775 2362.406,-902.4724"/>
<polygon fill="#000000" stroke="#000000" points="2365.9081,-902.4866 2362.8033,-892.3569 2358.9135,-902.2118 2365.9081,-902.4866"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="3006,-1626.5045 2409,-1626.5045 2409,-122.0986 3006,-122.0986 3006,-1626.5045"/>
<text text-anchor="middle" x="2707.5" y="-1611.203" font-family="Inconsolata" font-size="14.00" fill="#000000">function own(doc, str)</text>
<text text-anchor="middle" x="2707.5" y="-1595.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 1</text>
<text text-anchor="middle" x="2707.5" y="-1580.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc_level = 0</text>
<text text-anchor="middle" x="2707.5" y="-1565.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local start = 1</text>
<text text-anchor="middle" x="2707.5" y="-1549.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local num_lines = #(epeg.split(str,&quot;\n&quot;))</text>
<text text-anchor="middle" x="2707.5" y="-1534.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Track code blocks separately to avoid `* A` type collisions in code</text>
<text text-anchor="middle" x="2707.5" y="-1518.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local code_block = false</text>
<text text-anchor="middle" x="2707.5" y="-1503.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, line in ipairs(epeg.split(str, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="2707.5" y="-1488.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2707.5" y="-1472.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; tab and return filtration</text>
<text text-anchor="middle" x="2707.5" y="-1457.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local l, err = line:gsub(&quot;\t&quot;, &quot; &#160;&quot;):gsub(&quot;\r&quot;, &quot;&quot;) </text>
<text text-anchor="middle" x="2707.5" y="-1441.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local finish = start + #l</text>
<text text-anchor="middle" x="2707.5" y="-1426.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; We should always have a string but..</text>
<text text-anchor="middle" x="2707.5" y="-1411.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if l then</text>
<text text-anchor="middle" x="2707.5" y="-1395.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not code_block then</text>
<text text-anchor="middle" x="2707.5" y="-1380.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local indent, l_trim = lead_whitespace(l)</text>
<text text-anchor="middle" x="2707.5" y="-1364.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local code_head = Codeblock.matchHead(l)</text>
<text text-anchor="middle" x="2707.5" y="-1349.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if code_head then </text>
<text text-anchor="middle" x="2707.5" y="-1334.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = true </text>
<text text-anchor="middle" x="2707.5" y="-1318.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-1303.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isHeader, level, bareline = Header.match(l_trim) </text>
<text text-anchor="middle" x="2707.5" y="-1271.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if isHeader then &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="2707.5" y="-1256.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local header = Header(bareline, level, start, finish, str)</text>
<text text-anchor="middle" x="2707.5" y="-1225.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; make new block and append to doc</text>
<text text-anchor="middle" x="2707.5" y="-1209.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc:addSection(Section(header, linum, start, finish, doc.str), </text>
<text text-anchor="middle" x="2707.5" y="-1194.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linum, start)</text>
<text text-anchor="middle" x="2707.5" y="-1162.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2707.5" y="-1147.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc:addLine(l, linum, finish)</text>
<text text-anchor="middle" x="2707.5" y="-1132.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-1116.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2707.5" y="-1101.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code block logic, including restarts</text>
<text text-anchor="middle" x="2707.5" y="-1085.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45;</text>
<text text-anchor="middle" x="2707.5" y="-1070.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; NOTE that this will choke on unmatched code headers,</text>
<text text-anchor="middle" x="2707.5" y="-1055.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; which I intend to fix. But it&#39;s fiddly.</text>
<text text-anchor="middle" x="2707.5" y="-1039.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local code_foot = Codeblock.matchFoot(l)</text>
<text text-anchor="middle" x="2707.5" y="-1024.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if code_foot then </text>
<text text-anchor="middle" x="2707.5" y="-1008.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = false</text>
<text text-anchor="middle" x="2707.5" y="-993.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-978.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc:addLine(l, linum, finish)</text>
<text text-anchor="middle" x="2707.5" y="-962.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-947.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif ER then</text>
<text text-anchor="middle" x="2707.5" y="-931.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;HUH?&quot;)</text>
<text text-anchor="middle" x="2707.5" y="-916.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-901.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="2707.5" y="-885.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;start = finish</text>
<text text-anchor="middle" x="2707.5" y="-870.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &lt; num_lines then start = start + 1 end</text>
<text text-anchor="middle" x="2707.5" y="-854.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-839.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (doc.latest) then</text>
<text text-anchor="middle" x="2707.5" y="-824.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="2707.5" y="-808.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(type(start) == &#39;number&#39;)</text>
<text text-anchor="middle" x="2707.5" y="-793.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = start</text>
<text text-anchor="middle" x="2707.5" y="-777.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2707.5" y="-762.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(false, &quot;no doc.latest&quot;)</text>
<text text-anchor="middle" x="2707.5" y="-747.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-731.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.isnode then </text>
<text text-anchor="middle" x="2707.5" y="-716.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local sections = doc:select(&quot;section&quot;)</text>
<text text-anchor="middle" x="2707.5" y="-700.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, s in ipairs(sections) do</text>
<text text-anchor="middle" x="2707.5" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:check()</text>
<text text-anchor="middle" x="2707.5" y="-670.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:block()</text>
<text text-anchor="middle" x="2707.5" y="-654.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;s:weed()</text>
<text text-anchor="middle" x="2707.5" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local blocks = doc:select(&quot;block&quot;)</text>
<text text-anchor="middle" x="2707.5" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, block in ipairs(blocks) do</text>
<text text-anchor="middle" x="2707.5" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:toValue()</text>
<text text-anchor="middle" x="2707.5" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:parseProse()</text>
<text text-anchor="middle" x="2707.5" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, sec in ipairs(sections) do</text>
<text text-anchor="middle" x="2707.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sec:weed()</text>
<text text-anchor="middle" x="2707.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local cbs = doc:select(&quot;codeblock&quot;)</text>
<text text-anchor="middle" x="2707.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, v in ipairs(cbs) do</text>
<text text-anchor="middle" x="2707.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;v:toValue()</text>
<text text-anchor="middle" x="2707.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2707.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for sec in doc:select(&quot;section&quot;) do</text>
<text text-anchor="middle" x="2707.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sec:check()</text>
<text text-anchor="middle" x="2707.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sec:block()</text>
<text text-anchor="middle" x="2707.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for block in doc:select(&quot;block&quot;) do</text>
<text text-anchor="middle" x="2707.5" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:toValue()</text>
<text text-anchor="middle" x="2707.5" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:parseProse()</text>
<text text-anchor="middle" x="2707.5" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for sec in doc:select(&quot;section&quot;) do</text>
<text text-anchor="middle" x="2707.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sec:weed()</text>
<text text-anchor="middle" x="2707.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for cbs in doc:select(&quot;codeblock&quot;) do</text>
<text text-anchor="middle" x="2707.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cbs:toValue()</text>
<text text-anchor="middle" x="2707.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2707.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.linum = linum &#45; 1</text>
<text text-anchor="middle" x="2707.5" y="-177.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="2707.5" y="-161.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2707.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">return own</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_20&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2580.7938,-1890.0156C2585.6229,-1851.3042 2597.6216,-1755.1192 2612.413,-1636.547"/>
<polygon fill="#000000" stroke="#000000" points="2615.9021,-1636.851 2613.667,-1626.4947 2608.9559,-1635.9845 2615.9021,-1636.851"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="2082.5,-86.3004 1660.5,-86.3004 1660.5,.1003 2082.5,.1003 2082.5,-86.3004"/>
<text text-anchor="middle" x="1871.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Trims leading whitespace, returning the amount taken and</text>
<text text-anchor="middle" x="1871.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">the trimmed string.</text>
<text text-anchor="middle" x="1871.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- raw_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1871.5,-856.1677C1871.5,-755.2284 1871.5,-261.2662 1871.5,-96.6182"/>
<polygon fill="#000000" stroke="#000000" points="1875.0001,-96.2569 1871.5,-86.257 1868.0001,-96.257 1875.0001,-96.2569"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2494,-78.4004 2233,-78.4004 2233,-7.7997 2494,-7.7997 2494,-78.4004"/>
<text text-anchor="middle" x="2363.5" y="-47.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Takes a string, parsing ownership.</text>
<text text-anchor="middle" x="2363.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> Returns a Doc.</text>
</g>
<!-- raw_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>raw_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2363.5,-856.1677C2363.5,-753.5885 2363.5,-245.1127 2363.5,-88.8574"/>
<polygon fill="#000000" stroke="#000000" points="2367.0001,-88.6536 2363.5,-78.6536 2360.0001,-88.6536 2367.0001,-88.6536"/>
</g>
</g>
</svg>