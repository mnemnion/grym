<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4739pt" height="1376pt"
 viewBox="0.00 0.00 4738.50 1375.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1371.6017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1371.6017 4734.5,-1371.6017 4734.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1349.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="775" y="-1345.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 185</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1277.6017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="775" y="-1273.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;10</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M775,-1331.433C775,-1323.7326 775,-1314.576 775,-1306.0183"/>
<polygon fill="#000000" stroke="#000000" points="778.5001,-1306.0149 775,-1296.015 771.5001,-1306.015 778.5001,-1306.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="573" cy="-1205.6017" rx="69.6687" ry="18"/>
<text text-anchor="middle" x="573" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Doc module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.0524,-1263.7194C703.9855,-1252.2896 658.2935,-1236.0033 623.433,-1223.5778"/>
<polygon fill="#000000" stroke="#000000" points="624.5028,-1220.2435 613.9081,-1220.1828 622.1525,-1226.8372 624.5028,-1220.2435"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="693" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="693" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M755.5671,-1260.5387C744.3006,-1250.6461 729.9965,-1238.0864 717.9098,-1227.4737"/>
<polygon fill="#000000" stroke="#000000" points="720.1653,-1224.7964 710.3415,-1220.8284 715.5466,-1230.0565 720.1653,-1224.7964"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="775" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M775,-1259.433C775,-1251.7326 775,-1242.576 775,-1234.0183"/>
<polygon fill="#000000" stroke="#000000" points="778.5001,-1234.0149 775,-1224.015 771.5001,-1234.015 778.5001,-1234.0149"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="895" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="895" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M801.9303,-1261.4435C820.4231,-1250.3478 845.011,-1235.5951 864.2699,-1224.0397"/>
<polygon fill="#000000" stroke="#000000" points="866.1996,-1226.9637 872.9738,-1218.8174 862.5981,-1220.9612 866.1996,-1226.9637"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1789" cy="-1205.6017" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1789" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 11&#45;70</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M834.2717,-1273.393C1009.3703,-1260.96 1524.0211,-1224.4168 1715.8347,-1210.7969"/>
<polygon fill="#000000" stroke="#000000" points="1716.09,-1214.2876 1725.817,-1210.0881 1715.5942,-1207.3052 1716.09,-1214.2876"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="626.5,-1151.6017 519.5,-1151.6017 519.5,-1115.6017 626.5,-1115.6017 626.5,-1151.6017"/>
<text text-anchor="middle" x="573" y="-1130.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Doc module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573,-1187.433C573,-1179.7326 573,-1170.576 573,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="576.5001,-1162.0149 573,-1152.015 569.5001,-1162.015 576.5001,-1162.0149"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="682" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="682" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M690.2242,-1187.433C689.0297,-1179.6142 687.6058,-1170.2939 686.2812,-1161.6238"/>
<polygon fill="#000000" stroke="#000000" points="689.707,-1160.8718 684.7368,-1151.5151 682.7873,-1161.929 689.707,-1160.8718"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="765" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="765" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_4&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.4766,-1187.433C771.4071,-1179.7326 770.1353,-1170.576 768.9468,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="772.3999,-1161.4384 767.5574,-1152.015 765.4664,-1162.4014 772.3999,-1161.4384"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="932" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="932" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_5&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M903.9567,-1188.1725C908.3197,-1179.6823 913.6578,-1169.2945 918.5015,-1159.8691"/>
<polygon fill="#000000" stroke="#000000" points="921.6681,-1161.3645 923.1258,-1150.8704 915.4421,-1158.1649 921.6681,-1161.3645"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1487" cy="-1133.6017" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1487" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_6&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1739.469,-1193.793C1683.3876,-1180.4226 1592.5509,-1158.7661 1536.4874,-1145.4"/>
<polygon fill="#000000" stroke="#000000" points="1536.9791,-1141.9192 1526.4401,-1143.0046 1535.3557,-1148.7284 1536.9791,-1141.9192"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1685" cy="-1133.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1685" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1764.6166,-1188.7209C1749.4196,-1178.1999 1729.7893,-1164.6097 1713.8237,-1153.5565"/>
<polygon fill="#000000" stroke="#000000" points="1715.5965,-1150.527 1705.3823,-1147.7125 1711.612,-1156.2823 1715.5965,-1150.527"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1893" cy="-1133.6017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1893" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;28</text>
</g>
<!-- section_6&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1813.3834,-1188.7209C1827.1348,-1179.2007 1844.5162,-1167.1674 1859.5277,-1156.7748"/>
<polygon fill="#000000" stroke="#000000" points="1861.8174,-1159.4466 1868.047,-1150.8768 1857.8329,-1153.6913 1861.8174,-1159.4466"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2328" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2328" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;70</text>
</g>
<!-- section_6&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1847.7085,-1197.7594C1948.0176,-1184.36 2151.9082,-1157.1242 2258.9086,-1142.831"/>
<polygon fill="#000000" stroke="#000000" points="2259.5057,-1146.2824 2268.9542,-1141.4891 2258.5788,-1139.344 2259.5057,-1146.2824"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="3495" cy="-1133.6017" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3495" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 71&#45;185</text>
</g>
<!-- section_6&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1853.2779,-1202.8889C2117.8777,-1191.7217 3122.6903,-1149.3146 3414.8655,-1136.9837"/>
<polygon fill="#000000" stroke="#000000" points="3415.1126,-1140.4765 3424.9561,-1136.5578 3414.8174,-1133.4827 3415.1126,-1140.4765"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="520,-1064.7031 0,-1064.7031 0,-1008.9001 520,-1008.9001 520,-1064.7031"/>
<text text-anchor="middle" x="260" y="-1017.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Represents a Document, which is generally the same as a file, at first.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.8221,-1123.8879C651.3084,-1120.9655 642.8788,-1117.9222 635,-1115.6017 568.6857,-1096.0699 494.4189,-1079.4109 429.5823,-1066.5106"/>
<polygon fill="#000000" stroke="#000000" points="430.1628,-1063.0577 419.6742,-1064.5537 428.8065,-1069.9251 430.1628,-1063.0577"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="841.5,-1056.7037 538.5,-1056.7037 538.5,-1016.8995 841.5,-1016.8995 841.5,-1056.7037"/>
<text text-anchor="middle" x="690" y="-1025.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> A document contains an array of blocks. </text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M752.2773,-1117.1809C741.1435,-1102.8108 724.7352,-1081.6332 711.5557,-1064.6229"/>
<polygon fill="#000000" stroke="#000000" points="714.2739,-1062.4165 705.3824,-1056.6552 708.7404,-1066.7039 714.2739,-1062.4165"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1324,-1072.102 860,-1072.102 860,-1001.5013 1324,-1001.5013 1324,-1072.102"/>
<text text-anchor="middle" x="1092" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> At some point documents can also contain documents, this is not</text>
<text text-anchor="middle" x="1092" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> currently supported.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M952.2641,-1121.3419C970.547,-1110.2807 998.5006,-1093.3688 1024.6147,-1077.5698"/>
<polygon fill="#000000" stroke="#000000" points="1026.6393,-1080.4356 1033.3836,-1072.2646 1023.0158,-1074.4464 1026.6393,-1080.4356"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1428,-1054.8016 1342,-1054.8016 1342,-1018.8016 1428,-1018.8016 1428,-1054.8016"/>
<text text-anchor="middle" x="1385" y="-1033.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_14&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>header_14&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1469.233,-1116.7404C1453.3511,-1101.6682 1429.8537,-1079.3687 1411.7087,-1062.1487"/>
<polygon fill="#000000" stroke="#000000" points="1413.9607,-1059.4607 1404.2978,-1055.1157 1409.1421,-1064.5382 1413.9607,-1059.4607"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="1473" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1473" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_15&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1653.4425,-1129.4588C1616.3184,-1123.3957 1554.045,-1109.4102 1509,-1079.6017 1501.8264,-1074.8546 1495.3064,-1068.2672 1489.8468,-1061.6818"/>
<polygon fill="#000000" stroke="#000000" points="1492.4042,-1059.2664 1483.529,-1053.4801 1486.8587,-1063.5381 1492.4042,-1059.2664"/>
</g>
<!-- prespace_21 -->
<g id="node22" class="node">
<title>prespace_21</title>
<ellipse fill="none" stroke="#000000" cx="1564" cy="-1036.8016" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="1564" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_15&#45;&gt;prespace_21 -->
<g id="edge21" class="edge">
<title>prose_15&#45;&gt;prespace_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1666.3589,-1118.6888C1646.6391,-1102.913 1615.2819,-1077.8271 1592.4662,-1059.5746"/>
<polygon fill="#000000" stroke="#000000" points="1594.4794,-1056.703 1584.4843,-1053.1891 1590.1065,-1062.1691 1594.4794,-1056.703"/>
</g>
<!-- interpolated_22 -->
<g id="node23" class="node">
<title>interpolated_22</title>
<ellipse fill="none" stroke="#000000" cx="1685" cy="-1036.8016" rx="56.1474" ry="18"/>
<text text-anchor="middle" x="1685" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">interpolated</text>
</g>
<!-- prose_15&#45;&gt;interpolated_22 -->
<g id="edge22" class="edge">
<title>prose_15&#45;&gt;interpolated_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1685,-1115.3943C1685,-1101.1977 1685,-1081.2309 1685,-1064.9755"/>
<polygon fill="#000000" stroke="#000000" points="1688.5001,-1064.9273 1685,-1054.9273 1681.5001,-1064.9274 1688.5001,-1064.9273"/>
</g>
<!-- raw_23 -->
<g id="node24" class="node">
<title>raw_23</title>
<ellipse fill="none" stroke="#000000" cx="1786" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1786" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_23 -->
<g id="edge23" class="edge">
<title>prose_15&#45;&gt;raw_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1704.2575,-1119.0819C1717.6164,-1108.662 1735.5364,-1093.9774 1750,-1079.6017 1755.9074,-1073.7302 1761.898,-1066.9879 1767.2527,-1060.6177"/>
<polygon fill="#000000" stroke="#000000" points="1769.9977,-1062.7901 1773.6411,-1052.8414 1764.5888,-1058.3466 1769.9977,-1062.7901"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2113,-1079.4027 1831,-1079.4027 1831,-994.2006 2113,-994.2006 2113,-1079.4027"/>
<text text-anchor="middle" x="1972" y="-1064.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1972" y="-1033.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;lib/node/node&quot;</text>
<text text-anchor="middle" x="1972" y="-1017.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Section = require &quot;grym/section&quot;</text>
<text text-anchor="middle" x="1972" y="-1002.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_16&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1907.4898,-1115.8471C1914.0921,-1107.7572 1922.278,-1097.7268 1930.5774,-1087.5574"/>
<polygon fill="#000000" stroke="#000000" points="1933.3105,-1089.744 1936.9218,-1079.7836 1927.8873,-1085.3181 1933.3105,-1089.744"/>
</g>
<!-- header_29 -->
<g id="node30" class="node">
<title>header_29</title>
<ellipse fill="none" stroke="#000000" cx="2254" cy="-1036.8016" rx="99.1453" ry="18"/>
<text text-anchor="middle" x="2254" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Metatable for Docs.</text>
</g>
<!-- section_17&#45;&gt;header_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;header_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2314.4273,-1115.8471C2303.1283,-1101.0668 2286.8777,-1079.8093 2274.0741,-1063.0607"/>
<polygon fill="#000000" stroke="#000000" points="2276.5912,-1060.5904 2267.7373,-1054.7715 2271.03,-1064.8417 2276.5912,-1060.5904"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="2403" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2403" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_17&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2341.7562,-1115.8471C2353.4959,-1100.6949 2370.5099,-1078.7356 2383.6272,-1061.8054"/>
<polygon fill="#000000" stroke="#000000" points="2386.725,-1063.5217 2390.083,-1053.4731 2381.1916,-1059.2344 2386.725,-1063.5217"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2595" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2595" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;68</text>
</g>
<!-- section_17&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>section_17&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2367.6843,-1119.2143C2414.3583,-1102.2927 2491.9683,-1074.1555 2543.3084,-1055.5423"/>
<polygon fill="#000000" stroke="#000000" points="2544.6839,-1058.7666 2552.8921,-1052.0677 2542.298,-1052.1857 2544.6839,-1058.7666"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="2976" cy="-1036.8016" rx="86.074" ry="18"/>
<text text-anchor="middle" x="2976" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Doc Constructor</text>
</g>
<!-- section_18&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_18&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3426.9639,-1128.6434C3347.0878,-1121.8434 3211.0302,-1107.1951 3097,-1079.6017 3072.6634,-1073.7126 3046.378,-1064.747 3024.5438,-1056.5404"/>
<polygon fill="#000000" stroke="#000000" points="3025.7544,-1053.2562 3015.1637,-1052.9594 3023.2577,-1059.7959 3025.7544,-1053.2562"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="3138" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3138" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_18&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3430.9853,-1125.8246C3355.3705,-1116.0021 3234.5976,-1098.134 3193,-1079.6017 3181.8306,-1074.6256 3170.9084,-1066.9081 3161.779,-1059.3892"/>
<polygon fill="#000000" stroke="#000000" points="3163.7997,-1056.5098 3153.9431,-1052.6242 3159.2253,-1061.8084 3163.7997,-1056.5098"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="3279" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3279" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 74&#45;92</text>
</g>
<!-- section_18&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>section_18&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3459.1343,-1118.0542C3434.5604,-1107.353 3401.2472,-1092.7506 3372,-1079.6017 3356.0249,-1072.4196 3338.5677,-1064.4247 3323.1368,-1057.3069"/>
<polygon fill="#000000" stroke="#000000" points="3324.368,-1054.0203 3313.8221,-1053.0036 3321.4322,-1060.3749 3324.368,-1054.0203"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3413" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3413" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_18&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3479.9599,-1115.8471C3466.9272,-1100.4621 3447.9495,-1078.0592 3433.5228,-1061.0286"/>
<polygon fill="#000000" stroke="#000000" points="3435.9865,-1058.522 3426.8522,-1053.154 3430.6453,-1063.0466 3435.9865,-1058.522"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3495" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3495" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_18&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3495,-1115.3943C3495,-1101.1977 3495,-1081.2309 3495,-1064.9755"/>
<polygon fill="#000000" stroke="#000000" points="3498.5001,-1064.9273 3495,-1054.9273 3491.5001,-1064.9274 3498.5001,-1064.9273"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3728" cy="-1036.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3728" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 105&#45;154</text>
</g>
<!-- section_18&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_18&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3532.1772,-1118.1564C3572.1563,-1101.547 3635.8699,-1075.0771 3679.7021,-1056.867"/>
<polygon fill="#000000" stroke="#000000" points="3681.1204,-1060.0679 3689.0123,-1052.9991 3678.4347,-1053.6036 3681.1204,-1060.0679"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="3963" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3963" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_18&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3558.5755,-1125.7787C3625.2138,-1116.9715 3732.7148,-1101.0422 3824,-1079.6017 3859.0281,-1071.3745 3898.129,-1059.0449 3925.9152,-1049.7293"/>
<polygon fill="#000000" stroke="#000000" points="3927.2621,-1052.9685 3935.6118,-1046.4467 3925.0175,-1046.3381 3927.2621,-1052.9685"/>
</g>
<!-- structure_43 -->
<g id="node44" class="node">
<title>structure_43</title>
<ellipse fill="none" stroke="#000000" cx="4157" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4157" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_18&#45;&gt;structure_43 -->
<g id="edge43" class="edge">
<title>section_18&#45;&gt;structure_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3564.2822,-1129.9294C3662.7293,-1123.8804 3848.4276,-1109.3973 4004,-1079.6017 4041.1163,-1072.4931 4082.3287,-1060.7339 4112.621,-1051.3382"/>
<polygon fill="#000000" stroke="#000000" points="4113.9605,-1054.5863 4122.4537,-1048.2527 4111.8645,-1047.9074 4113.9605,-1054.5863"/>
</g>
<!-- structure_44 -->
<g id="node45" class="node">
<title>structure_44</title>
<ellipse fill="none" stroke="#000000" cx="4319" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4319" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_18&#45;&gt;structure_44 -->
<g id="edge44" class="edge">
<title>section_18&#45;&gt;structure_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3565.0653,-1131.007C3720.3797,-1124.8187 4089.4437,-1107.5884 4211,-1079.6017 4235.0936,-1074.0544 4260.877,-1064.0058 4281.2072,-1055.0388"/>
<polygon fill="#000000" stroke="#000000" points="4282.7497,-1058.1827 4290.4276,-1050.882 4279.8727,-1051.8012 4282.7497,-1058.1827"/>
</g>
<!-- codeblock_45 -->
<g id="node46" class="node">
<title>codeblock_45</title>
<ellipse fill="none" stroke="#000000" cx="4555" cy="-1036.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4555" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 165&#45;184</text>
</g>
<!-- section_18&#45;&gt;codeblock_45 -->
<g id="edge45" class="edge">
<title>section_18&#45;&gt;codeblock_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3564.9127,-1130.8356C3744.2606,-1123.4936 4217.4723,-1102.5028 4373,-1079.6017 4413.4804,-1073.641 4458.2239,-1063.173 4493.217,-1054.0817"/>
<polygon fill="#000000" stroke="#000000" points="4494.5,-1057.3634 4503.2812,-1051.4354 4492.7199,-1050.5935 4494.5,-1057.3634"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1502,-634.7011 1122,-634.7011 1122,-532.3006 1502,-532.3006 1502,-634.7011"/>
<text text-anchor="middle" x="1312" y="-571.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> In addition to the standard Node fields, a doc has:</text>
<text text-anchor="middle" x="1312" y="-556.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1312" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: The current block. &#160;This will be in</text>
</g>
<!-- raw_20&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>raw_20&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1466.6886,-1019.0317C1444.6731,-957.0462 1370.6059,-748.5077 1333.5253,-644.1062"/>
<polygon fill="#000000" stroke="#000000" points="1336.8085,-642.8924 1330.1634,-634.6405 1330.2122,-645.2352 1336.8085,-642.8924"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1574,-601.5009 1520,-601.5009 1520,-565.5009 1574,-565.5009 1574,-601.5009"/>
<text text-anchor="middle" x="1547" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_21&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>prespace_21&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1563.3231,-1018.752C1560.7082,-949.0263 1551.2538,-696.9285 1548.0614,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="1551.5512,-611.4639 1547.6788,-601.6021 1544.5562,-611.7263 1551.5512,-611.4639"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1671.5,-601.5009 1592.5,-601.5009 1592.5,-565.5009 1671.5,-565.5009 1671.5,-601.5009"/>
<text text-anchor="middle" x="1632" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">doc[#doc]</text>
</g>
<!-- interpolated_22&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>interpolated_22&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1682.8896,-1018.752C1674.729,-948.9552 1645.2019,-696.4144 1635.2788,-611.5442"/>
<polygon fill="#000000" stroke="#000000" points="1638.7541,-611.1279 1634.1164,-601.6021 1631.8015,-611.9409 1638.7541,-611.1279"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2154,-626.1019 1690,-626.1019 1690,-540.8998 2154,-540.8998 2154,-626.1019"/>
<text text-anchor="middle" x="1922" y="-611.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> but may</text>
<text text-anchor="middle" x="1922" y="-595.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;be several layers deep.</text>
<text text-anchor="middle" x="1922" y="-580.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lastOf: An array containing references to the last block of a</text>
<text text-anchor="middle" x="1922" y="-564.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;given level.</text>
</g>
<!-- raw_23&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>raw_23&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1791.3314,-1019.0317C1810.4137,-955.4285 1875.7901,-737.5229 1906.2043,-636.1494"/>
<polygon fill="#000000" stroke="#000000" points="1909.602,-637.0039 1909.1234,-626.4199 1902.8973,-634.9923 1909.602,-637.0039"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2349.5,-601.5009 2172.5,-601.5009 2172.5,-565.5009 2349.5,-565.5009 2349.5,-601.5009"/>
<text text-anchor="middle" x="2261" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Metatable for Docs.</text>
</g>
<!-- header_29&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>header_29&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2254.2787,-1018.752C2255.3555,-949.0263 2259.2484,-696.9285 2260.5629,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2264.0656,-611.655 2260.7205,-601.6021 2257.0664,-611.5468 2264.0656,-611.655"/>
</g>
<!-- raw_33 -->
<g id="node34" class="node">
<title>raw_33</title>
<ellipse fill="none" stroke="#000000" cx="2395" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2395" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_33 -->
<g id="edge33" class="edge">
<title>prose_30&#45;&gt;raw_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2402.6815,-1018.752C2401.4509,-949.0263 2397.0018,-696.9285 2395.4995,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2398.9955,-611.5387 2395.3195,-601.6021 2391.9966,-611.6623 2398.9955,-611.5387"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2876,-859.2018 2440,-859.2018 2440,-307.7999 2876,-307.7999 2876,-859.2018"/>
<text text-anchor="middle" x="2658" y="-843.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">local D = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="2658" y="-828.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">D.id = &quot;doc&quot;</text>
<text text-anchor="middle" x="2658" y="-797.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__tostring = function (doc)</text>
<text text-anchor="middle" x="2658" y="-781.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2658" y="-766.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(doc) do</text>
<text text-anchor="middle" x="2658" y="-750.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2658" y="-735.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if repr ~= &quot;&quot; and repr ~= &quot;\n&quot; then</text>
<text text-anchor="middle" x="2658" y="-720.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2658" y="-704.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2658" y="-689.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2658" y="-657.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase </text>
<text text-anchor="middle" x="2658" y="-642.501" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2658" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__index = D</text>
<text text-anchor="middle" x="2658" y="-563.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">D.own = own</text>
<text text-anchor="middle" x="2658" y="-532.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.dotLabel(doc)</text>
<text text-anchor="middle" x="2658" y="-516.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;doc &#45; &quot; .. tostring(doc.linum)</text>
<text text-anchor="middle" x="2658" y="-501.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end </text>
<text text-anchor="middle" x="2658" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.toMarkdown(doc)</text>
<text text-anchor="middle" x="2658" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2658" y="-439.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(doc) do</text>
<text text-anchor="middle" x="2658" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="2658" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="2658" y="-393.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2658" y="-377.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method for &quot; .. node.id)</text>
<text text-anchor="middle" x="2658" y="-362.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2658" y="-346.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2658" y="-331.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2658" y="-316.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_31&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2597.5086,-1018.752C2601.3995,-990.7553 2609.3769,-933.356 2618.2977,-869.1691"/>
<polygon fill="#000000" stroke="#000000" points="2621.7685,-869.6201 2619.6785,-859.2334 2614.8352,-868.6564 2621.7685,-869.6201"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2422,-140.5001 2368,-140.5001 2368,-104.5001 2422,-104.5001 2422,-140.5001"/>
</g>
<!-- raw_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2395,-565.4291C2395,-494.7876 2395,-236.9836 2395,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="2398.5001,-150.6966 2395,-140.6966 2391.5001,-150.6967 2398.5001,-150.6966"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="3043.5,-601.5009 2894.5,-601.5009 2894.5,-565.5009 3043.5,-565.5009 3043.5,-601.5009"/>
<text text-anchor="middle" x="2969" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Doc Constructor</text>
</g>
<!-- header_36&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>header_36&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2975.7213,-1018.752C2974.6445,-949.0263 2970.7516,-696.9285 2969.4371,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2972.9336,-611.5468 2969.2795,-601.6021 2965.9344,-611.655 2972.9336,-611.5468"/>
</g>
<!-- raw_47 -->
<g id="node48" class="node">
<title>raw_47</title>
<ellipse fill="none" stroke="#000000" cx="3089" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3089" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_47 -->
<g id="edge47" class="edge">
<title>prose_37&#45;&gt;raw_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3134.656,-1018.7003C3131.7972,-1002.7618 3127.7252,-978.9002 3125,-958.0016 3108.2285,-829.3854 3095.8149,-674.966 3091.0898,-612.1621"/>
<polygon fill="#000000" stroke="#000000" points="3094.5561,-611.5781 3090.3226,-601.8658 3087.5754,-612.0983 3094.5561,-611.5781"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3367.5,-719.1016 3134.5,-719.1016 3134.5,-447.9001 3367.5,-447.9001 3367.5,-719.1016"/>
<text text-anchor="middle" x="3251" y="-704.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local d = {}</text>
<text text-anchor="middle" x="3251" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.parentOf(doc, level)</text>
<text text-anchor="middle" x="3251" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local i = level &#45; 1</text>
<text text-anchor="middle" x="3251" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parent = nil</text>
<text text-anchor="middle" x="3251" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while i &gt;= 0 do</text>
<text text-anchor="middle" x="3251" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;parent = doc.lastOf[i]</text>
<text text-anchor="middle" x="3251" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent then</text>
<text text-anchor="middle" x="3251" y="-564.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return parent</text>
<text text-anchor="middle" x="3251" y="-548.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3251" y="-533.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="3251" y="-518.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3251" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3251" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3251" y="-455.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>codeblock_38&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3277.8851,-1018.752C3274.9217,-970.7766 3266.6252,-836.4615 3260.0247,-729.6042"/>
<polygon fill="#000000" stroke="#000000" points="3263.5014,-729.1179 3259.3915,-719.3528 3256.5147,-729.5496 3263.5014,-729.1179"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="3413" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3413" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_39&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_39&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3413,-1018.752C3413,-949.0263 3413,-696.9285 3413,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3416.5001,-611.6021 3413,-601.6021 3409.5001,-611.6021 3416.5001,-611.6021"/>
</g>
<!-- raw_52 -->
<g id="node53" class="node">
<title>raw_52</title>
<ellipse fill="none" stroke="#000000" cx="3485" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3485" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_52 -->
<g id="edge52" class="edge">
<title>prose_40&#45;&gt;raw_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3494.6018,-1018.752C3493.0636,-949.0263 3487.5023,-696.9285 3485.6244,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3489.1191,-611.5224 3485.3993,-601.6021 3482.1208,-611.6769 3489.1191,-611.5224"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4113.5,-958.0023 3530.5,-958.0023 3530.5,-208.9995 4113.5,-208.9995 4113.5,-958.0023"/>
<text text-anchor="middle" x="3822" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addSection(doc, section, linum, finish)</text>
<text text-anchor="middle" x="3822" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id == &quot;section&quot;, &quot;type of putative section is &quot; .. section.id)</text>
<text text-anchor="middle" x="3822" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.first, &quot;no first in section at line &quot; .. tostring(linum))</text>
<text text-anchor="middle" x="3822" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(type(finish) == &quot;number&quot;, &quot;finish is of type &quot; .. type(finish))</text>
<text text-anchor="middle" x="3822" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not doc.latest then</text>
<text text-anchor="middle" x="3822" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = &#160;section</text>
<text text-anchor="middle" x="3822" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3822" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="3822" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="3822" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish &#160;&#160;</text>
<text text-anchor="middle" x="3822" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-773.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local atLevel = doc.latest.level </text>
<text text-anchor="middle" x="3822" y="-758.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if atLevel &lt; section.level then</text>
<text text-anchor="middle" x="3822" y="-742.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add the section under the latest section</text>
<text text-anchor="middle" x="3822" y="-727.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3822" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3822" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local parent = doc:parentOf(section.level)</text>
<text text-anchor="middle" x="3822" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent.id == &quot;doc&quot; then</text>
<text text-anchor="middle" x="3822" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.level == 1 and doc.latest.level == 1 then</text>
<text text-anchor="middle" x="3822" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[#doc + 1] = section</text>
<text text-anchor="middle" x="3822" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3822" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3822" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3822" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parent:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3822" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-527.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-511.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = section</text>
<text text-anchor="middle" x="3822" y="-496.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf[section.level] = section</text>
<text text-anchor="middle" x="3822" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3822" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3822" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addLine(doc, line, linum, finish)</text>
<text text-anchor="middle" x="3822" y="-402.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.latest then</text>
<text text-anchor="middle" x="3822" y="-387.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3822" y="-371.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3822" y="-356.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3822" y="-341.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; a virtual zero block</text>
<text text-anchor="middle" x="3822" y="-325.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = Section(0, linum, 1, #line, doc.str)</text>
<text text-anchor="middle" x="3822" y="-310.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest = doc[1]</text>
<text text-anchor="middle" x="3822" y="-294.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3822" y="-279.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3822" y="-264.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3822" y="-232.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3822" y="-217.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_41&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3731.7429,-1018.752C3734.2303,-1006.7571 3737.8368,-989.3652 3742.1937,-968.3547"/>
<polygon fill="#000000" stroke="#000000" points="3745.6435,-968.9554 3744.247,-958.453 3738.7893,-967.534 3745.6435,-968.9554"/>
</g>
<!-- raw_55 -->
<g id="node56" class="node">
<title>raw_55</title>
<ellipse fill="none" stroke="#000000" cx="4159" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="4159" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_55 -->
<g id="edge55" class="edge">
<title>prose_42&#45;&gt;raw_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3993.5979,-1031.0708C4030.9093,-1022.33 4092.7308,-1001.8214 4123,-958.0016 4198.0782,-849.3129 4177,-678.6247 4164.8366,-611.7302"/>
<polygon fill="#000000" stroke="#000000" points="4168.2083,-610.7244 4162.9061,-601.5517 4161.3309,-612.0288 4168.2083,-610.7244"/>
</g>
<!-- handleline_57 -->
<g id="node58" class="node">
<title>handleline_57</title>
<ellipse fill="none" stroke="#000000" cx="4254" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4254" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_43&#45;&gt;handleline_57 -->
<g id="edge57" class="edge">
<title>structure_43&#45;&gt;handleline_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4167.3105,-1019.2633C4176.0102,-1003.6857 4188.116,-980.0373 4195,-958.0016 4234.1476,-832.6901 4248.1088,-675.3035 4252.3661,-611.8964"/>
<polygon fill="#000000" stroke="#000000" points="4255.8625,-612.0636 4253.0106,-601.8598 4248.8769,-611.615 4255.8625,-612.0636"/>
</g>
<!-- handleline_60 -->
<g id="node61" class="node">
<title>handleline_60</title>
<ellipse fill="none" stroke="#000000" cx="4373" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4373" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_44&#45;&gt;handleline_60 -->
<g id="edge60" class="edge">
<title>structure_44&#45;&gt;handleline_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4321.1502,-1018.752C4329.4648,-948.9552 4359.549,-696.4144 4369.6593,-611.5442"/>
<polygon fill="#000000" stroke="#000000" points="4373.1361,-611.9459 4370.8437,-601.6021 4366.1853,-611.1178 4373.1361,-611.9459"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="4730.5,-727.0013 4441.5,-727.0013 4441.5,-440.0004 4730.5,-440.0004 4730.5,-727.0013"/>
<text text-anchor="middle" x="4586" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Doc, str)</text>
<text text-anchor="middle" x="4586" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc = setmetatable({}, D)</text>
<text text-anchor="middle" x="4586" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.str = str</text>
<text text-anchor="middle" x="4586" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.first = 1</text>
<text text-anchor="middle" x="4586" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.last = #str</text>
<text text-anchor="middle" x="4586" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = nil</text>
<text text-anchor="middle" x="4586" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lines = {}</text>
<text text-anchor="middle" x="4586" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf = {}</text>
<text text-anchor="middle" x="4586" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; for now lets set root to &#39;false&#39;</text>
<text text-anchor="middle" x="4586" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.root = false</text>
<text text-anchor="middle" x="4586" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc:own(str)</text>
<text text-anchor="middle" x="4586" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4586" y="-511.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">setmetatable(D, Node)</text>
<text text-anchor="middle" x="4586" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">d[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="4586" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, d)</text>
</g>
<!-- codeblock_45&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>codeblock_45&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4556.2344,-1018.752C4559.4362,-971.9331 4568.2613,-842.887 4575.4767,-737.3784"/>
<polygon fill="#000000" stroke="#000000" points="4578.9792,-737.4604 4576.1697,-727.2449 4571.9955,-736.9827 4578.9792,-737.4604"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3116,-142.5001 3062,-142.5001 3062,-102.5001 3116,-102.5001 3116,-142.5001"/>
</g>
<!-- raw_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>raw_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3089,-565.4291C3089,-495.3549 3089,-241.112 3089,-152.8963"/>
<polygon fill="#000000" stroke="#000000" points="3092.5001,-152.75 3089,-142.75 3085.5001,-152.75 3092.5001,-152.75"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3595.5,-173.0002 3166.5,-173.0002 3166.5,-71.9999 3595.5,-71.9999 3595.5,-173.0002"/>
<text text-anchor="middle" x="3381" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> This function looks at document level and places the block</text>
<text text-anchor="middle" x="3381" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> accordingly.</text>
<text text-anchor="middle" x="3381" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3381" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc : the document</text>
<text text-anchor="middle" x="3381" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; block : block to be appended</text>
</g>
<!-- raw_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>raw_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3411.7456,-565.4291C3407.3618,-502.276 3392.5948,-289.5376 3385.2382,-183.5564"/>
<polygon fill="#000000" stroke="#000000" points="3388.7127,-183.0672 3384.5286,-173.3336 3381.7295,-183.552 3388.7127,-183.0672"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="3784,-150.4016 3614,-150.4016 3614,-94.5986 3784,-94.5986 3784,-150.4016"/>
<text text-anchor="middle" x="3699" y="-119.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns: the document</text>
</g>
<!-- raw_52&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>raw_52&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3481.0094,-565.6902C3469.1161,-507.7673 3439.6272,-321.9732 3522,-209.0002 3545.6896,-176.5103 3568.8132,-190.5303 3605,-173.0002 3616.4452,-167.4557 3628.5115,-161.2535 3640.0429,-155.1449"/>
<polygon fill="#000000" stroke="#000000" points="3641.9811,-158.0777 3649.1541,-150.2803 3638.6842,-151.9027 3641.9811,-158.0777"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4213,-142.4022 4057,-142.4022 4057,-102.598 4213,-102.598 4213,-142.4022"/>
<text text-anchor="middle" x="4135" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Creates a Doc Node.</text>
</g>
<!-- raw_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>raw_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4158.0592,-565.4291C4154.4027,-495.1951 4141.1146,-239.9515 4136.5512,-152.2954"/>
<polygon fill="#000000" stroke="#000000" points="4140.0423,-152.0319 4136.027,-142.2274 4133.0517,-152.3959 4140.0423,-152.0319"/>
</g>
<!-- handle_58 -->
<g id="node59" class="node">
<title>handle_58</title>
<ellipse fill="none" stroke="#000000" cx="4268" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4268" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_57&#45;&gt;handle_58 -->
<g id="edge58" class="edge">
<title>handleline_57&#45;&gt;handle_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4254.5488,-565.4291C4256.6941,-494.7876 4264.5233,-236.9836 4267.141,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4270.6421,-150.7983 4267.4474,-140.6966 4263.6454,-150.5857 4270.6421,-150.7983"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4295,-36 4241,-36 4241,0 4295,0 4295,-36"/>
</g>
<!-- handle_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>handle_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4268,-104.2976C4268,-88.3618 4268,-64.942 4268,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4271.5001,-46.3445 4268,-36.3446 4264.5001,-46.3446 4271.5001,-46.3445"/>
</g>
<!-- handle_61 -->
<g id="node62" class="node">
<title>handle_61</title>
<ellipse fill="none" stroke="#000000" cx="4373" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4373" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_60&#45;&gt;handle_61 -->
<g id="edge61" class="edge">
<title>handleline_60&#45;&gt;handle_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4373,-565.4291C4373,-494.7876 4373,-236.9836 4373,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4376.5001,-150.6966 4373,-140.6966 4369.5001,-150.6967 4376.5001,-150.6966"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4400,-36 4346,-36 4346,0 4400,0 4400,-36"/>
</g>
<!-- handle_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>handle_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4373,-104.2976C4373,-88.3618 4373,-64.942 4373,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4376.5001,-46.3445 4373,-36.3446 4369.5001,-46.3446 4376.5001,-46.3445"/>
</g>
</g>
</svg>