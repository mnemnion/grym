<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3719pt" height="1316pt"
 viewBox="0.00 0.00 3718.50 1315.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1311.8015)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1311.8015 3714.5,-1311.8015 3714.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="772" cy="-1289.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="772" y="-1285.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">75 &#160;</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="772" cy="-1217.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="772" y="-1213.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">10 &#160;</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772,-1271.6328C772,-1263.9324 772,-1254.7758 772,-1246.2181"/>
<polygon fill="#000000" stroke="#000000" points="775.5001,-1246.2147 772,-1236.2147 768.5001,-1246.2148 775.5001,-1246.2147"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="628" cy="-1145.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="628" y="-1141.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">le &#160;</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M750.1295,-1206.8662C725.7778,-1194.6904 686.238,-1174.9205 658.7715,-1161.1872"/>
<polygon fill="#000000" stroke="#000000" points="660.114,-1157.9454 649.6045,-1156.6037 656.9835,-1164.2064 660.114,-1157.9454"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="700" cy="-1145.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="700" y="-1141.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">&#45;4 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M756.7307,-1202.5321C746.803,-1192.6045 733.6847,-1179.4862 722.5637,-1168.3651"/>
<polygon fill="#000000" stroke="#000000" points="724.7933,-1165.645 715.2473,-1161.0488 719.8436,-1170.5948 724.7933,-1165.645"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="772" cy="-1145.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="772" y="-1141.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">&#45;6 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772,-1199.6328C772,-1191.9324 772,-1182.7758 772,-1174.2181"/>
<polygon fill="#000000" stroke="#000000" points="775.5001,-1174.2147 772,-1164.2147 768.5001,-1174.2148 775.5001,-1174.2147"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1009" cy="-1145.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="1009" y="-1141.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">10 &#160;</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M796.9152,-1210.2323C839.5213,-1197.2887 926.4418,-1170.8825 974.7305,-1156.2124"/>
<polygon fill="#000000" stroke="#000000" points="975.8678,-1159.525 984.4186,-1153.2692 973.833,-1152.8272 975.8678,-1159.525"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1972" cy="-1145.8015" rx="27" ry="18"/>
<text text-anchor="middle" x="1972" y="-1141.6015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">75 &#160;</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M799.0316,-1216.1796C956.2853,-1206.7444 1752.5619,-1158.9678 1934.8069,-1148.0331"/>
<polygon fill="#000000" stroke="#000000" points="1935.1847,-1151.5168 1944.9571,-1147.424 1934.7654,-1144.5293 1935.1847,-1151.5168"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="520,-1084.3029 0,-1084.3029 0,-1028.4999 520,-1028.4999 520,-1084.3029"/>
<text text-anchor="middle" x="260" y="-1052.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> Represents a Document, which is generally the same as a file, at first.</text>
</g>
<!-- block_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>block_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M679.1131,-1134.0912C674.2635,-1131.7321 669.0423,-1129.4684 664,-1127.8015 610.0129,-1109.9534 550.4094,-1096.2936 493.9424,-1085.9455"/>
<polygon fill="#000000" stroke="#000000" points="494.2697,-1082.4481 483.8072,-1084.1172 493.027,-1089.3369 494.2697,-1082.4481"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="841.5,-1076.3035 538.5,-1076.3035 538.5,-1036.4994 841.5,-1036.4994 841.5,-1076.3035"/>
<text text-anchor="middle" x="690" y="-1060.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> A document contains an array of blocks. </text>
</g>
<!-- block_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>block_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M757.7167,-1130.2292C745.9943,-1117.4489 729.111,-1099.042 715.1354,-1083.8052"/>
<polygon fill="#000000" stroke="#000000" points="717.4737,-1081.1766 708.1349,-1076.1729 712.3151,-1085.9082 717.4737,-1081.1766"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1324,-1091.7018 860,-1091.7018 860,-1021.1011 1324,-1021.1011 1324,-1091.7018"/>
<text text-anchor="middle" x="1092" y="-1076.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> At some point documents can also contain documents, this is not</text>
<text text-anchor="middle" x="1092" y="-1061.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> currently supported.</text>
</g>
<!-- block_5&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_5&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1023.4575,-1130.2292C1031.4577,-1121.6121 1041.8328,-1110.437 1052.0793,-1099.4004"/>
<polygon fill="#000000" stroke="#000000" points="1054.8828,-1101.5249 1059.1217,-1091.8149 1049.7528,-1096.7621 1054.8828,-1101.5249"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="1369" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1369" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">ds &#160;</text>
</g>
<!-- section_6&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_6&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1944.6877,-1145.5939C1845.1698,-1144.4725 1502.7003,-1137.3172 1405,-1091.8015 1398.9514,-1088.9836 1393.3168,-1084.7114 1388.3848,-1080.0989"/>
<polygon fill="#000000" stroke="#000000" points="1390.7237,-1077.4828 1381.2543,-1072.7307 1385.6934,-1082.3507 1390.7237,-1077.4828"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="1441" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1441" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">21 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_6&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1944.7559,-1145.1627C1853.7173,-1142.6703 1561.0647,-1131.6684 1477,-1091.8015 1470.9709,-1088.9422 1465.3442,-1084.6532 1460.4136,-1080.0376"/>
<polygon fill="#000000" stroke="#000000" points="1462.7525,-1077.4217 1453.2809,-1072.6741 1457.7246,-1082.292 1462.7525,-1077.4217"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="1513" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1513" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">29 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_6&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1944.7745,-1144.5875C1862.782,-1140.5816 1619.5119,-1126.0353 1549,-1091.8015 1542.9973,-1088.8871 1537.3813,-1084.5758 1532.4528,-1079.956"/>
<polygon fill="#000000" stroke="#000000" points="1534.7917,-1077.3403 1525.3171,-1072.5988 1529.7669,-1082.2139 1534.7917,-1077.3403"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="1585" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1585" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">32 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_6&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1945.1357,-1143.8088C1873.2679,-1138.1434 1678.1797,-1120.4753 1621,-1091.8015 1615.0352,-1088.8103 1609.4346,-1084.4678 1604.5089,-1079.8422"/>
<polygon fill="#000000" stroke="#000000" points="1606.8478,-1077.2268 1597.3689,-1072.4938 1601.8273,-1082.1049 1606.8478,-1077.2268"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="1657" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1657" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">68 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1946.7115,-1139.4082C1908.3659,-1129.6313 1833.2763,-1110.1617 1770,-1091.8015 1743.4615,-1084.1011 1713.6392,-1074.7278 1691.2976,-1067.5611"/>
<polygon fill="#000000" stroke="#000000" points="1692.1892,-1064.1713 1681.5977,-1064.4376 1690.0435,-1070.8344 1692.1892,-1064.1713"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="1806" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1806" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">71 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1950.976,-1134.4789C1921.8689,-1118.8032 1869.1365,-1090.4038 1835.9278,-1072.5192"/>
<polygon fill="#000000" stroke="#000000" points="1837.5788,-1069.4331 1827.1148,-1067.7729 1834.2596,-1075.5961 1837.5788,-1069.4331"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="1916" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="1916" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">91 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1961.4668,-1128.986C1953.1757,-1115.7498 1941.4825,-1097.0825 1932.0308,-1081.9935"/>
<polygon fill="#000000" stroke="#000000" points="1934.7606,-1079.7582 1926.4859,-1073.1415 1928.8284,-1083.4742 1934.7606,-1079.7582"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="2028" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="2028" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">93 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1982.5332,-1128.986C1990.8243,-1115.7498 2002.5175,-1097.0825 2011.9692,-1081.9935"/>
<polygon fill="#000000" stroke="#000000" points="2015.1716,-1083.4742 2017.5141,-1073.1415 2009.2394,-1079.7582 2015.1716,-1083.4742"/>
</g>
<!-- block_18 -->
<g id="node19" class="node">
<title>block_18</title>
<ellipse fill="none" stroke="#000000" cx="2253" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="2253" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">99 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;block_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1996.4453,-1138.0242C2046.5788,-1122.0743 2161.1474,-1085.6243 2218.6894,-1067.3173"/>
<polygon fill="#000000" stroke="#000000" points="2219.9429,-1070.5915 2228.4111,-1064.2244 2217.8206,-1063.9209 2219.9429,-1070.5915"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="2525" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="2525" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">02 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.3003,-1141.5497C2088.3636,-1126.9897 2384.542,-1079.1084 2488.5218,-1062.2986"/>
<polygon fill="#000000" stroke="#000000" points="2489.2254,-1065.7304 2498.5387,-1060.6793 2488.1082,-1058.8201 2489.2254,-1065.7304"/>
</g>
<!-- block_20 -->
<g id="node21" class="node">
<title>block_20</title>
<ellipse fill="none" stroke="#000000" cx="2854" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="2854" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">47 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_20 -->
<g id="edge20" class="edge">
<title>section_6&#45;&gt;block_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999.0331,-1143.6021C2082.6555,-1136.739 2344.5241,-1114.7972 2561,-1091.8015 2653.3821,-1081.9879 2761.8812,-1068.3177 2817.3256,-1061.1766"/>
<polygon fill="#000000" stroke="#000000" points="2817.8966,-1064.632 2827.3659,-1059.88 2817,-1057.6897 2817.8966,-1064.632"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="2988" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="2988" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">49 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_6&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999.1439,-1145.2562C2131.8486,-1142.4303 2713.0929,-1128.1594 2890,-1091.8015 2912.7848,-1087.1187 2937.4053,-1078.2089 2956.269,-1070.4999"/>
<polygon fill="#000000" stroke="#000000" points="2957.6958,-1073.697 2965.5685,-1066.6068 2954.9926,-1067.24 2957.6958,-1073.697"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="3208" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="3208" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">52 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_6&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999.1001,-1144.9212C2142.7903,-1140.1761 2816.8068,-1116.9271 3024,-1091.8015 3076.1001,-1085.4835 3135.6096,-1073.0694 3172.4978,-1064.752"/>
<polygon fill="#000000" stroke="#000000" points="3173.3051,-1068.1578 3182.2773,-1062.5232 3171.7496,-1061.3328 3173.3051,-1068.1578"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="3388" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="3388" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">55 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_6&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999.0528,-1145.3847C2159.8456,-1142.7972 2991.4047,-1127.8461 3244,-1091.8015 3282.073,-1086.3686 3324.7466,-1075.2219 3353.6869,-1066.8798"/>
<polygon fill="#000000" stroke="#000000" points="3354.7065,-1070.2283 3363.3207,-1064.0601 3352.7401,-1063.5102 3354.7065,-1070.2283"/>
</g>
<!-- block_24 -->
<g id="node25" class="node">
<title>block_24</title>
<ellipse fill="none" stroke="#000000" cx="3555" cy="-1056.4014" rx="27" ry="18"/>
<text text-anchor="middle" x="3555" y="-1052.2014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">75 &#160;</text>
</g>
<!-- section_6&#45;&gt;block_24 -->
<g id="edge24" class="edge">
<title>section_6&#45;&gt;block_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1999.1307,-1145.6318C2173.1128,-1144.4172 3134.0675,-1135.7834 3424,-1091.8015 3457.5173,-1086.717 3494.745,-1076.1635 3520.9217,-1067.8958"/>
<polygon fill="#000000" stroke="#000000" points="3522.2791,-1071.1359 3530.7274,-1064.7423 3520.136,-1064.472 3522.2791,-1071.1359"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1183,-985.202 705,-985.202 705,-820.4006 1183,-820.4006 1183,-985.202"/>
<text text-anchor="middle" x="944" y="-937.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> In addition to the standard Node fields, a doc has:</text>
<text text-anchor="middle" x="944" y="-922.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="944" y="-907.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: The current block. &#160;This will be in `doc[#doc]` but may</text>
<text text-anchor="middle" x="944" y="-891.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;be several layers deep.</text>
<text text-anchor="middle" x="944" y="-876.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lastOf: An array containing references to the last block of a</text>
<text text-anchor="middle" x="944" y="-860.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;given level.</text>
</g>
<!-- block_11&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_11&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1428.6007,-1040.3693C1422.2958,-1033.3284 1414.0552,-1025.6264 1405,-1021.0014 1322.3366,-978.7808 1287.5072,-1006.2062 1192.9952,-985.0844"/>
<polygon fill="#000000" stroke="#000000" points="1193.579,-981.626 1183.042,-982.7316 1191.9686,-988.4382 1193.579,-981.626"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="1228" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="1228" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">28 &#160;</text>
</g>
<!-- block_12&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>block_12&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1500.6007,-1040.3693C1494.2958,-1033.3284 1486.0552,-1025.6264 1477,-1021.0014 1391.4976,-977.3308 1339.6863,-1044.0722 1264,-985.0014 1247.0839,-971.799 1237.9495,-949.0085 1233.1199,-930.7689"/>
<polygon fill="#000000" stroke="#000000" points="1236.5017,-929.86 1230.8025,-920.9287 1229.6881,-931.4647 1236.5017,-929.86"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1327,-920.8013 1273,-920.8013 1273,-884.8013 1327,-884.8013 1327,-920.8013"/>
</g>
<!-- block_12&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_12&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1500.0927,-1040.3399C1493.7949,-1033.4668 1485.704,-1025.91 1477,-1021.0014 1420.664,-989.2309 1385.301,-1026.8646 1336,-985.0014 1319.7428,-971.1969 1310.5783,-948.6509 1305.5696,-930.6598"/>
<polygon fill="#000000" stroke="#000000" points="1308.9638,-929.8052 1303.1372,-920.9563 1302.1738,-931.5073 1308.9638,-929.8052"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1501,-930.7028 1345,-930.7028 1345,-874.8998 1501,-874.8998 1501,-930.7028"/>
<text text-anchor="middle" x="1423" y="-915.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> Metatable for Docs.</text>
</g>
<!-- block_13&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_13&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1569.6879,-1041.1344C1563.3321,-1034.8523 1555.8539,-1027.5315 1549,-1021.0014 1531.9214,-1004.7298 1527.2401,-1001.1018 1510,-985.0014 1493.425,-969.5221 1475.17,-952.3009 1459.68,-937.6366"/>
<polygon fill="#000000" stroke="#000000" points="1461.9842,-934.9982 1452.3174,-930.6619 1457.1701,-940.0801 1461.9842,-934.9982"/>
</g>
<!-- codeblock_30 -->
<g id="node31" class="node">
<title>codeblock_30</title>
<ellipse fill="none" stroke="#000000" cx="1546" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="1546" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">67 &#160;</text>
</g>
<!-- block_14&#45;&gt;codeblock_30 -->
<g id="edge30" class="edge">
<title>block_14&#45;&gt;codeblock_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1641.6879,-1041.1344C1635.3321,-1034.8523 1627.8539,-1027.5315 1621,-1021.0014 1603.9214,-1004.7298 1595.6885,-1004.2126 1582,-985.0014 1570.0961,-968.2948 1560.9138,-947.0281 1554.8026,-930.3119"/>
<polygon fill="#000000" stroke="#000000" points="1558.002,-928.8577 1551.3975,-920.5733 1551.3942,-931.1681 1558.002,-928.8577"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1645,-920.8013 1591,-920.8013 1591,-884.8013 1645,-884.8013 1645,-920.8013"/>
</g>
<!-- block_14&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>block_14&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1652.4499,-1038.4809C1645.7343,-1012.0319 1633.1068,-962.2988 1625.1471,-930.9501"/>
<polygon fill="#000000" stroke="#000000" points="1628.4954,-929.9149 1622.642,-921.0838 1621.7107,-931.6376 1628.4954,-929.9149"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1798.5,-930.7028 1663.5,-930.7028 1663.5,-874.8998 1798.5,-874.8998 1798.5,-930.7028"/>
<text text-anchor="middle" x="1731" y="-915.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> Doc constructor.</text>
</g>
<!-- block_15&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_15&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1797.5423,-1039.0801C1785.8771,-1015.1898 1764.5511,-971.5141 1749.1814,-940.0368"/>
<polygon fill="#000000" stroke="#000000" points="1752.1528,-938.1453 1744.62,-930.695 1745.8626,-941.2168 1752.1528,-938.1453"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="1844" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="1844" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">90 &#160;</text>
</g>
<!-- block_16&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>block_16&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1907.0064,-1039.2168C1899.5587,-1024.8338 1888.8085,-1003.7168 1880,-985.0014 1871.3742,-966.6741 1862.2243,-945.7604 1855.3076,-929.6147"/>
<polygon fill="#000000" stroke="#000000" points="1858.4544,-928.071 1851.3142,-920.2436 1852.0147,-930.8152 1858.4544,-928.071"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="1943,-920.8013 1889,-920.8013 1889,-884.8013 1943,-884.8013 1943,-920.8013"/>
</g>
<!-- block_16&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_16&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1916,-1038.1783C1916,-1011.7344 1916,-962.4791 1916,-931.2343"/>
<polygon fill="#000000" stroke="#000000" points="1919.5001,-931.0007 1916,-921.0007 1912.5001,-931.0008 1919.5001,-931.0007"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2173,-922.7034 1961,-922.7034 1961,-882.8992 2173,-882.8992 2173,-922.7034"/>
<text text-anchor="middle" x="2067" y="-907.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a block to a document.</text>
</g>
<!-- block_17&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_17&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2032.5501,-1038.4809C2039.1574,-1012.4585 2051.4874,-963.897 2059.4641,-932.4811"/>
<polygon fill="#000000" stroke="#000000" points="2062.9191,-933.0955 2061.9878,-922.5417 2056.1344,-931.3728 2062.9191,-933.0955"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2620.5,-953.3015 2191.5,-953.3015 2191.5,-852.3012 2620.5,-852.3012 2620.5,-953.3015"/>
<text text-anchor="middle" x="2406" y="-938.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> This function looks at document level and places the block</text>
<text text-anchor="middle" x="2406" y="-922.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> accordingly.</text>
<text text-anchor="middle" x="2406" y="-907.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="2406" y="-891.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc : the document</text>
<text text-anchor="middle" x="2406" y="-876.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; block : block to be appended</text>
</g>
<!-- block_18&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_18&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2267.9489,-1041.3939C2286.5262,-1022.7437 2319.3198,-989.8215 2348.284,-960.7437"/>
<polygon fill="#000000" stroke="#000000" points="2350.9768,-962.9998 2355.5543,-953.4449 2346.0173,-958.0598 2350.9768,-962.9998"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2809,-930.7028 2639,-930.7028 2639,-874.8998 2809,-874.8998 2809,-930.7028"/>
<text text-anchor="middle" x="2724" y="-915.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns: the document</text>
</g>
<!-- block_19&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>block_19&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2544.8513,-1043.9297C2566.3459,-1030.1917 2601.3919,-1007.106 2630,-985.0014 2649.1906,-970.1734 2669.5588,-952.6082 2686.4111,-937.5295"/>
<polygon fill="#000000" stroke="#000000" points="2688.8006,-940.0877 2693.8897,-930.7951 2684.1164,-934.8858 2688.8006,-940.0877"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="2854" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="2854" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">45 &#160;</text>
</g>
<!-- block_20&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>block_20&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2854,-1038.1783C2854,-1011.7344 2854,-962.4791 2854,-931.2343"/>
<polygon fill="#000000" stroke="#000000" points="2857.5001,-931.0007 2854,-921.0007 2850.5001,-931.0008 2857.5001,-931.0007"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2953,-922.8013 2899,-922.8013 2899,-882.8013 2953,-882.8013 2953,-922.8013"/>
</g>
<!-- block_20&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>block_20&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2862.9936,-1039.2168C2870.4413,-1024.8338 2881.1915,-1003.7168 2890,-985.0014 2898.1863,-967.608 2906.8446,-947.885 2913.618,-932.119"/>
<polygon fill="#000000" stroke="#000000" points="2916.8593,-933.4408 2917.5708,-922.8699 2910.4225,-930.6899 2916.8593,-933.4408"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3127,-922.7034 2971,-922.7034 2971,-882.8992 3127,-882.8992 3127,-922.7034"/>
<text text-anchor="middle" x="3049" y="-907.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> Creates a Doc Node.</text>
</g>
<!-- block_21&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>block_21&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2994.9975,-1038.7815C3005.3327,-1012.7571 3024.8036,-963.7287 3037.3243,-932.2011"/>
<polygon fill="#000000" stroke="#000000" points="3040.6868,-933.2169 3041.1249,-922.6311 3034.181,-930.6332 3040.6868,-933.2169"/>
</g>
<!-- structure_44 -->
<g id="node45" class="node">
<title>structure_44</title>
<ellipse fill="none" stroke="#000000" cx="3172" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="3172" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">re &#160;</text>
</g>
<!-- block_22&#45;&gt;structure_44 -->
<g id="edge44" class="edge">
<title>block_22&#45;&gt;structure_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3203.7999,-1038.4809C3197.5676,-1011.8897 3185.8192,-961.7633 3178.4792,-930.4461"/>
<polygon fill="#000000" stroke="#000000" points="3181.863,-929.5451 3176.1734,-920.6077 3175.0477,-931.1425 3181.863,-929.5451"/>
</g>
<!-- structure_45 -->
<g id="node46" class="node">
<title>structure_45</title>
<ellipse fill="none" stroke="#000000" cx="3244" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="3244" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">re &#160;</text>
</g>
<!-- block_22&#45;&gt;structure_45 -->
<g id="edge45" class="edge">
<title>block_22&#45;&gt;structure_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3212.2001,-1038.4809C3218.4324,-1011.8897 3230.1808,-961.7633 3237.5208,-930.4461"/>
<polygon fill="#000000" stroke="#000000" points="3240.9523,-931.1425 3239.8266,-920.6077 3234.137,-929.5451 3240.9523,-931.1425"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3343,-920.8013 3289,-920.8013 3289,-884.8013 3343,-884.8013 3343,-920.8013"/>
</g>
<!-- block_22&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>block_22&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3225.5713,-1042.3373C3241.4271,-1028.9317 3264.5662,-1007.5036 3280,-985.0014 3291.4571,-968.2972 3300.5624,-947.3579 3306.7495,-930.7939"/>
<polygon fill="#000000" stroke="#000000" points="3310.1365,-931.7174 3310.2196,-921.1229 3303.5479,-929.3532 3310.1365,-931.7174"/>
</g>
<!-- structure_53 -->
<g id="node54" class="node">
<title>structure_53</title>
<ellipse fill="none" stroke="#000000" cx="3388" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="3388" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">re &#160;</text>
</g>
<!-- block_23&#45;&gt;structure_53 -->
<g id="edge53" class="edge">
<title>block_23&#45;&gt;structure_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3388,-1038.1783C3388,-1011.7344 3388,-962.4791 3388,-931.2343"/>
<polygon fill="#000000" stroke="#000000" points="3391.5001,-931.0007 3388,-921.0007 3384.5001,-931.0008 3391.5001,-931.0007"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3487,-922.8013 3433,-922.8013 3433,-882.8013 3487,-882.8013 3487,-922.8013"/>
</g>
<!-- block_23&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>block_23&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3396.9936,-1039.2168C3404.4413,-1024.8338 3415.1915,-1003.7168 3424,-985.0014 3432.1863,-967.608 3440.8446,-947.885 3447.618,-932.119"/>
<polygon fill="#000000" stroke="#000000" points="3450.8593,-933.4408 3451.5708,-922.8699 3444.4225,-930.6899 3450.8593,-933.4408"/>
</g>
<!-- codeblock_58 -->
<g id="node59" class="node">
<title>codeblock_58</title>
<ellipse fill="none" stroke="#000000" cx="3555" cy="-902.8013" rx="27" ry="18"/>
<text text-anchor="middle" x="3555" y="-898.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">74 &#160;</text>
</g>
<!-- block_24&#45;&gt;codeblock_58 -->
<g id="edge58" class="edge">
<title>block_24&#45;&gt;codeblock_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3555,-1038.1783C3555,-1011.7344 3555,-962.4791 3555,-931.2343"/>
<polygon fill="#000000" stroke="#000000" points="3558.5001,-931.0007 3555,-921.0007 3551.5001,-931.0008 3558.5001,-931.0007"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="3654,-920.8013 3600,-920.8013 3600,-884.8013 3654,-884.8013 3654,-920.8013"/>
</g>
<!-- block_24&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>block_24&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3563.9936,-1039.2168C3571.4413,-1024.8338 3582.1915,-1003.7168 3591,-985.0014 3599.516,-966.9076 3608.5427,-946.2928 3615.427,-930.234"/>
<polygon fill="#000000" stroke="#000000" points="3618.7096,-931.4586 3619.4128,-920.8871 3612.2707,-928.7127 3618.7096,-931.4586"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1310,-506.9017 1042,-506.9017 1042,-421.6996 1310,-421.6996 1310,-506.9017"/>
<text text-anchor="middle" x="1176" y="-491.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1176" y="-460.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1176" y="-445.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">local Block = require &quot;grym/section&quot;</text>
<text text-anchor="middle" x="1176" y="-429.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1225.8646,-884.7941C1218.4905,-822.6109 1193.9117,-615.3445 1182.2471,-516.9805"/>
<polygon fill="#000000" stroke="#000000" points="1185.7119,-516.476 1181.0585,-506.9578 1178.7606,-517.3004 1185.7119,-516.476"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1764,-724.1015 1328,-724.1015 1328,-204.4997 1764,-204.4997 1764,-724.1015"/>
<text text-anchor="middle" x="1546" y="-709.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local D = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="1546" y="-677.601" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__tostring = function (doc)</text>
<text text-anchor="middle" x="1546" y="-662.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1546" y="-646.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(doc) do</text>
<text text-anchor="middle" x="1546" y="-631.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="1546" y="-616.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if repr ~= &quot;&quot; and repr ~= &quot;\n&quot; then</text>
<text text-anchor="middle" x="1546" y="-600.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1546" y="-585.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1546" y="-569.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1546" y="-538.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase </text>
<text text-anchor="middle" x="1546" y="-523.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1546" y="-491.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__index = D</text>
<text text-anchor="middle" x="1546" y="-460.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">D.own = own</text>
<text text-anchor="middle" x="1546" y="-428.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.dotLabel(doc)</text>
<text text-anchor="middle" x="1546" y="-413.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;doc &#45; &quot; .. tostring(doc.linum)</text>
<text text-anchor="middle" x="1546" y="-398.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end </text>
<text text-anchor="middle" x="1546" y="-366.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.toMarkdown(doc)</text>
<text text-anchor="middle" x="1546" y="-351.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="1546" y="-335.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(doc) do</text>
<text text-anchor="middle" x="1546" y="-320.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="1546" y="-305.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="1546" y="-289.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1546" y="-274.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method for &quot; .. node.id)</text>
<text text-anchor="middle" x="1546" y="-258.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1546" y="-243.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1546" y="-228.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="1546" y="-212.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1546,-884.7941C1546,-856.608 1546,-798.6136 1546,-734.4641"/>
<polygon fill="#000000" stroke="#000000" points="1549.5001,-734.1193 1546,-724.1193 1542.5001,-734.1193 1549.5001,-734.1193"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2015.5,-599.9013 1782.5,-599.9013 1782.5,-328.6999 2015.5,-328.6999 2015.5,-599.9013"/>
<text text-anchor="middle" x="1899" y="-584.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local d = {}</text>
<text text-anchor="middle" x="1899" y="-537.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.parentOf(doc, level)</text>
<text text-anchor="middle" x="1899" y="-522.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local i = level &#45; 1</text>
<text text-anchor="middle" x="1899" y="-506.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parent = nil</text>
<text text-anchor="middle" x="1899" y="-491.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while i &gt; 0 do</text>
<text text-anchor="middle" x="1899" y="-475.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;parent = doc.lastOf[i]</text>
<text text-anchor="middle" x="1899" y="-460.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent then</text>
<text text-anchor="middle" x="1899" y="-445.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return parent</text>
<text text-anchor="middle" x="1899" y="-429.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="1899" y="-414.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="1899" y="-398.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1899" y="-383.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1899" y="-352.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="1899" y="-336.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1846.2586,-884.7941C1852.054,-838.5887 1867.8967,-712.2793 1880.7171,-610.0652"/>
<polygon fill="#000000" stroke="#000000" points="1884.2155,-610.296 1881.9873,-599.9381 1877.2699,-609.4248 1884.2155,-610.296"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="3100,-784.4019 2608,-784.4019 2608,-144.1993 3100,-144.1993 3100,-784.4019"/>
<text text-anchor="middle" x="2854" y="-769.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addSection(doc, section, linum)</text>
<text text-anchor="middle" x="2854" y="-754.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not doc.latest then</text>
<text text-anchor="middle" x="2854" y="-738.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = &#160;section</text>
<text text-anchor="middle" x="2854" y="-723.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2854" y="-707.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="2854" y="-692.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="2854" y="-677.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-661.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local atLevel = doc.latest.level </text>
<text text-anchor="middle" x="2854" y="-646.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if atLevel &lt; section.level then</text>
<text text-anchor="middle" x="2854" y="-630.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add the section under the latest section</text>
<text text-anchor="middle" x="2854" y="-615.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum)</text>
<text text-anchor="middle" x="2854" y="-600.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2854" y="-584.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local parentis = doc:parentOf(section.level)</text>
<text text-anchor="middle" x="2854" y="-569.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if parentis.id == &quot;doc&quot; then</text>
<text text-anchor="middle" x="2854" y="-553.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.level == 1 and doc.latest.level == 1 then</text>
<text text-anchor="middle" x="2854" y="-538.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[#doc + 1] = section</text>
<text text-anchor="middle" x="2854" y="-523.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2854" y="-507.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum)</text>
<text text-anchor="middle" x="2854" y="-492.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-476.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2854" y="-461.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parentis:addSection(section, linum)</text>
<text text-anchor="middle" x="2854" y="-446.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-430.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-415.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-399.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = section</text>
<text text-anchor="middle" x="2854" y="-384.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf[section.level] = section</text>
<text text-anchor="middle" x="2854" y="-369.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="2854" y="-353.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2854" y="-322.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addLine(doc, line, linum)</text>
<text text-anchor="middle" x="2854" y="-306.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.latest then</text>
<text text-anchor="middle" x="2854" y="-291.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="2854" y="-276.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2854" y="-260.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; a virtual zero block</text>
<text text-anchor="middle" x="2854" y="-245.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = Block(0, linum)</text>
<text text-anchor="middle" x="2854" y="-229.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest = doc[1]</text>
<text text-anchor="middle" x="2854" y="-214.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="2854" y="-199.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2854" y="-167.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="2854" y="-152.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>codeblock_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2854,-884.7941C2854,-865.8946 2854,-833.5932 2854,-795.0206"/>
<polygon fill="#000000" stroke="#000000" points="2857.5001,-794.5347 2854,-784.5348 2850.5001,-794.5348 2857.5001,-794.5347"/>
</g>
<!-- handleline_46 -->
<g id="node47" class="node">
<title>handleline_46</title>
<ellipse fill="none" stroke="#000000" cx="3172" cy="-464.3006" rx="27" ry="18"/>
<text text-anchor="middle" x="3172" y="-460.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">ne &#160;</text>
</g>
<!-- structure_44&#45;&gt;handleline_46 -->
<g id="edge46" class="edge">
<title>structure_44&#45;&gt;handleline_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172,-884.7941C3172,-816.9302 3172,-576.2644 3172,-492.9428"/>
<polygon fill="#000000" stroke="#000000" points="3175.5001,-492.7013 3172,-482.7013 3168.5001,-492.7013 3175.5001,-492.7013"/>
</g>
<!-- handleline_49 -->
<g id="node50" class="node">
<title>handleline_49</title>
<ellipse fill="none" stroke="#000000" cx="3244" cy="-464.3006" rx="27" ry="18"/>
<text text-anchor="middle" x="3244" y="-460.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">ne &#160;</text>
</g>
<!-- structure_45&#45;&gt;handleline_49 -->
<g id="edge49" class="edge">
<title>structure_45&#45;&gt;handleline_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3244,-884.7941C3244,-816.9302 3244,-576.2644 3244,-492.9428"/>
<polygon fill="#000000" stroke="#000000" points="3247.5001,-492.7013 3244,-482.7013 3240.5001,-492.7013 3247.5001,-492.7013"/>
</g>
<!-- handle_47 -->
<g id="node48" class="node">
<title>handle_47</title>
<ellipse fill="none" stroke="#000000" cx="3172" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="3172" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">le &#160;</text>
</g>
<!-- handleline_46&#45;&gt;handle_47 -->
<g id="edge47" class="edge">
<title>handleline_46&#45;&gt;handle_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172,-446.2473C3172,-386.1033 3172,-192.2017 3172,-118.6518"/>
<polygon fill="#000000" stroke="#000000" points="3175.5001,-118.3106 3172,-108.3106 3168.5001,-118.3107 3175.5001,-118.3106"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3199,-36 3145,-36 3145,0 3199,0 3199,-36"/>
</g>
<!-- handle_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>handle_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172,-71.8314C3172,-64.131 3172,-54.9743 3172,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="3175.5001,-46.4132 3172,-36.4133 3168.5001,-46.4133 3175.5001,-46.4132"/>
</g>
<!-- handle_50 -->
<g id="node51" class="node">
<title>handle_50</title>
<ellipse fill="none" stroke="#000000" cx="3244" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="3244" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">le &#160;</text>
</g>
<!-- handleline_49&#45;&gt;handle_50 -->
<g id="edge50" class="edge">
<title>handleline_49&#45;&gt;handle_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3244,-446.2473C3244,-386.1033 3244,-192.2017 3244,-118.6518"/>
<polygon fill="#000000" stroke="#000000" points="3247.5001,-118.3106 3244,-108.3106 3240.5001,-118.3107 3247.5001,-118.3106"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3271,-36 3217,-36 3217,0 3271,0 3271,-36"/>
</g>
<!-- handle_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>handle_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3244,-71.8314C3244,-64.131 3244,-54.9743 3244,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="3247.5001,-46.4132 3244,-36.4133 3240.5001,-46.4133 3247.5001,-46.4132"/>
</g>
<!-- handleline_54 -->
<g id="node55" class="node">
<title>handleline_54</title>
<ellipse fill="none" stroke="#000000" cx="3376" cy="-464.3006" rx="27" ry="18"/>
<text text-anchor="middle" x="3376" y="-460.1006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">ne &#160;</text>
</g>
<!-- structure_53&#45;&gt;handleline_54 -->
<g id="edge54" class="edge">
<title>structure_53&#45;&gt;handleline_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3387.5072,-884.7941C3385.6501,-816.9302 3379.064,-576.2644 3376.7838,-492.9428"/>
<polygon fill="#000000" stroke="#000000" points="3380.2759,-492.6018 3376.5036,-482.7013 3373.2785,-492.7933 3380.2759,-492.6018"/>
</g>
<!-- handle_55 -->
<g id="node56" class="node">
<title>handle_55</title>
<ellipse fill="none" stroke="#000000" cx="3376" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="3376" y="-85.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">le &#160;</text>
</g>
<!-- handleline_54&#45;&gt;handle_55 -->
<g id="edge55" class="edge">
<title>handleline_54&#45;&gt;handle_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3376,-446.2473C3376,-386.1033 3376,-192.2017 3376,-118.6518"/>
<polygon fill="#000000" stroke="#000000" points="3379.5001,-118.3106 3376,-108.3106 3372.5001,-118.3107 3379.5001,-118.3106"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="3403,-36 3349,-36 3349,0 3403,0 3403,-36"/>
</g>
<!-- handle_55&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>handle_55&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3376,-71.8314C3376,-64.131 3376,-54.9743 3376,-46.4166"/>
<polygon fill="#000000" stroke="#000000" points="3379.5001,-46.4132 3376,-36.4133 3372.5001,-46.4133 3379.5001,-46.4132"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="3710.5,-599.9013 3421.5,-599.9013 3421.5,-328.6999 3710.5,-328.6999 3710.5,-599.9013"/>
<text text-anchor="middle" x="3566" y="-584.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Doc, str)</text>
<text text-anchor="middle" x="3566" y="-569.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc = setmetatable({}, D)</text>
<text text-anchor="middle" x="3566" y="-554.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.str = str</text>
<text text-anchor="middle" x="3566" y="-538.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.id = &quot;doc&quot;</text>
<text text-anchor="middle" x="3566" y="-523.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = nil</text>
<text text-anchor="middle" x="3566" y="-507.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lines = {}</text>
<text text-anchor="middle" x="3566" y="-492.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf = {}</text>
<text text-anchor="middle" x="3566" y="-477.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; for now lets set root to &#39;false&#39;</text>
<text text-anchor="middle" x="3566" y="-461.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.root = false</text>
<text text-anchor="middle" x="3566" y="-446.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc:own(str)</text>
<text text-anchor="middle" x="3566" y="-430.9005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3566" y="-399.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">setmetatable(D, Node)</text>
<text text-anchor="middle" x="3566" y="-368.1005" font-family="Inconsolata" font-size="14.00" fill="#000000">d[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="3566" y="-336.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, d)</text>
</g>
<!-- codeblock_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>codeblock_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3555.4517,-884.7941C3556.6108,-838.5887 3559.7793,-712.2793 3562.3434,-610.0652"/>
<polygon fill="#000000" stroke="#000000" points="3565.8455,-610.0228 3562.5975,-599.9381 3558.8477,-609.8472 3565.8455,-610.0228"/>
</g>
</g>
</svg>