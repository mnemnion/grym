<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4597pt" height="1376pt"
 viewBox="0.00 0.00 4596.50 1375.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1371.6017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1371.6017 4592.5,-1371.6017 4592.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1349.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="775" y="-1345.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 190</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1277.6017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="775" y="-1273.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;10</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M775,-1331.433C775,-1323.7326 775,-1314.576 775,-1306.0183"/>
<polygon fill="#000000" stroke="#000000" points="778.5001,-1306.0149 775,-1296.015 771.5001,-1306.015 778.5001,-1306.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="573" cy="-1205.6017" rx="69.6687" ry="18"/>
<text text-anchor="middle" x="573" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Doc module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M736.0524,-1263.7194C703.9855,-1252.2896 658.2935,-1236.0033 623.433,-1223.5778"/>
<polygon fill="#000000" stroke="#000000" points="624.5028,-1220.2435 613.9081,-1220.1828 622.1525,-1226.8372 624.5028,-1220.2435"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="693" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="693" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M755.5671,-1260.5387C744.3006,-1250.6461 729.9965,-1238.0864 717.9098,-1227.4737"/>
<polygon fill="#000000" stroke="#000000" points="720.1653,-1224.7964 710.3415,-1220.8284 715.5466,-1230.0565 720.1653,-1224.7964"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="775" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="775" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M775,-1259.433C775,-1251.7326 775,-1242.576 775,-1234.0183"/>
<polygon fill="#000000" stroke="#000000" points="778.5001,-1234.0149 775,-1224.015 771.5001,-1234.015 778.5001,-1234.0149"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="895" cy="-1205.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="895" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M801.9303,-1261.4435C820.4231,-1250.3478 845.011,-1235.5951 864.2699,-1224.0397"/>
<polygon fill="#000000" stroke="#000000" points="866.1996,-1226.9637 872.9738,-1218.8174 862.5981,-1220.9612 866.1996,-1226.9637"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1718" cy="-1205.6017" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1718" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 11&#45;75</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M833.9889,-1273.0978C998.8285,-1260.5119 1464.0283,-1224.9929 1644.8417,-1211.1875"/>
<polygon fill="#000000" stroke="#000000" points="1645.3416,-1214.6596 1655.0461,-1210.4083 1644.8086,-1207.6799 1645.3416,-1214.6596"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="626.5,-1151.6017 519.5,-1151.6017 519.5,-1115.6017 626.5,-1115.6017 626.5,-1151.6017"/>
<text text-anchor="middle" x="573" y="-1130.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Doc module</text>
</g>
<!-- header_2&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>header_2&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M573,-1187.433C573,-1179.7326 573,-1170.576 573,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="576.5001,-1162.0149 573,-1152.015 569.5001,-1162.015 576.5001,-1162.0149"/>
</g>
<!-- raw_8 -->
<g id="node9" class="node">
<title>raw_8</title>
<ellipse fill="none" stroke="#000000" cx="682" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="682" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_8 -->
<g id="edge8" class="edge">
<title>prose_3&#45;&gt;raw_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M690.2242,-1187.433C689.0297,-1179.6142 687.6058,-1170.2939 686.2812,-1161.6238"/>
<polygon fill="#000000" stroke="#000000" points="689.707,-1160.8718 684.7368,-1151.5151 682.7873,-1161.929 689.707,-1160.8718"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="765" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="765" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_4&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M772.4766,-1187.433C771.4071,-1179.7326 770.1353,-1170.576 768.9468,-1162.0183"/>
<polygon fill="#000000" stroke="#000000" points="772.3999,-1161.4384 767.5574,-1152.015 765.4664,-1162.4014 772.3999,-1161.4384"/>
</g>
<!-- raw_12 -->
<g id="node13" class="node">
<title>raw_12</title>
<ellipse fill="none" stroke="#000000" cx="932" cy="-1133.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="932" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_12 -->
<g id="edge12" class="edge">
<title>prose_5&#45;&gt;raw_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M903.9567,-1188.1725C908.3197,-1179.6823 913.6578,-1169.2945 918.5015,-1159.8691"/>
<polygon fill="#000000" stroke="#000000" points="921.6681,-1161.3645 923.1258,-1150.8704 915.4421,-1158.1649 921.6681,-1161.3645"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1472" cy="-1133.6017" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1472" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_6&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1673.1659,-1192.4795C1629.3604,-1179.6584 1562.9697,-1160.227 1518.577,-1147.234"/>
<polygon fill="#000000" stroke="#000000" points="1519.482,-1143.8521 1508.9014,-1144.4021 1517.5157,-1150.5702 1519.482,-1143.8521"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1614" cy="-1133.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1614" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1693.6166,-1188.7209C1678.4196,-1178.1999 1658.7893,-1164.6097 1642.8237,-1153.5565"/>
<polygon fill="#000000" stroke="#000000" points="1644.5965,-1150.527 1634.3823,-1147.7125 1640.612,-1156.2823 1644.5965,-1150.527"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="1782" cy="-1133.6017" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1782" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;28</text>
</g>
<!-- section_6&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1733.8202,-1187.8039C1741.5126,-1179.15 1750.8978,-1168.5917 1759.3344,-1159.1005"/>
<polygon fill="#000000" stroke="#000000" points="1762.1122,-1161.2436 1766.14,-1151.4442 1756.8803,-1156.5931 1762.1122,-1161.2436"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2193" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2193" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;75</text>
</g>
<!-- section_6&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1775.2961,-1196.9168C1863.3836,-1183.5646 2031.7031,-1158.0509 2125.5466,-1143.8262"/>
<polygon fill="#000000" stroke="#000000" points="2126.1382,-1147.2766 2135.5007,-1142.3174 2125.0891,-1140.3557 2126.1382,-1147.2766"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="3353" cy="-1133.6017" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3353" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 76&#45;190</text>
</g>
<!-- section_6&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1782.3455,-1202.7681C2039.0443,-1191.464 2989.6737,-1149.6014 3272.8803,-1137.1299"/>
<polygon fill="#000000" stroke="#000000" points="3273.2351,-1140.6178 3283.0714,-1136.6811 3272.9271,-1133.6245 3273.2351,-1140.6178"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="520,-1064.7031 0,-1064.7031 0,-1008.9001 520,-1008.9001 520,-1064.7031"/>
<text text-anchor="middle" x="260" y="-1017.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Represents a Document, which is generally the same as a file, at first.</text>
</g>
<!-- raw_8&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>raw_8&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.8221,-1123.8879C651.3084,-1120.9655 642.8788,-1117.9222 635,-1115.6017 568.6857,-1096.0699 494.4189,-1079.4109 429.5823,-1066.5106"/>
<polygon fill="#000000" stroke="#000000" points="430.1628,-1063.0577 419.6742,-1064.5537 428.8065,-1069.9251 430.1628,-1063.0577"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="841.5,-1056.7037 538.5,-1056.7037 538.5,-1016.8995 841.5,-1016.8995 841.5,-1056.7037"/>
<text text-anchor="middle" x="690" y="-1025.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> A document contains an array of blocks. </text>
</g>
<!-- raw_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>raw_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M752.2773,-1117.1809C741.1435,-1102.8108 724.7352,-1081.6332 711.5557,-1064.6229"/>
<polygon fill="#000000" stroke="#000000" points="714.2739,-1062.4165 705.3824,-1056.6552 708.7404,-1066.7039 714.2739,-1062.4165"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1324,-1072.102 860,-1072.102 860,-1001.5013 1324,-1001.5013 1324,-1072.102"/>
<text text-anchor="middle" x="1092" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> At some point documents can also contain documents, this is not</text>
<text text-anchor="middle" x="1092" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> currently supported.</text>
</g>
<!-- raw_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>raw_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M952.2641,-1121.3419C970.547,-1110.2807 998.5006,-1093.3688 1024.6147,-1077.5698"/>
<polygon fill="#000000" stroke="#000000" points="1026.6393,-1080.4356 1033.3836,-1072.2646 1023.0158,-1074.4464 1026.6393,-1080.4356"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1428,-1054.8016 1342,-1054.8016 1342,-1018.8016 1428,-1018.8016 1428,-1054.8016"/>
<text text-anchor="middle" x="1385" y="-1033.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Fields</text>
</g>
<!-- header_14&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>header_14&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1456.4461,-1116.2958C1443.0894,-1101.4344 1423.6366,-1079.7904 1408.4006,-1062.8382"/>
<polygon fill="#000000" stroke="#000000" points="1410.5927,-1060.0412 1401.305,-1054.9433 1405.3864,-1064.7204 1410.5927,-1060.0412"/>
</g>
<!-- raw_20 -->
<g id="node21" class="node">
<title>raw_20</title>
<ellipse fill="none" stroke="#000000" cx="1473" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1473" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_20 -->
<g id="edge20" class="edge">
<title>prose_15&#45;&gt;raw_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1587.2661,-1123.3551C1564.956,-1114.018 1533.0388,-1098.7738 1509,-1079.6017 1502.3816,-1074.3232 1496.0957,-1067.6757 1490.6834,-1061.2039"/>
<polygon fill="#000000" stroke="#000000" points="1493.2976,-1058.8679 1484.3358,-1053.2167 1487.8174,-1063.2231 1493.2976,-1058.8679"/>
</g>
<!-- interpolated_21 -->
<g id="node22" class="node">
<title>interpolated_21</title>
<ellipse fill="none" stroke="#000000" cx="1574" cy="-1036.8016" rx="56.1474" ry="18"/>
<text text-anchor="middle" x="1574" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">interpolated</text>
</g>
<!-- prose_15&#45;&gt;interpolated_21 -->
<g id="edge21" class="edge">
<title>prose_15&#45;&gt;interpolated_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1606.6634,-1115.8471C1600.7239,-1101.4736 1592.2532,-1080.9745 1585.4264,-1064.4536"/>
<polygon fill="#000000" stroke="#000000" points="1588.4794,-1062.6769 1581.4256,-1054.7715 1582.0099,-1065.3502 1588.4794,-1062.6769"/>
</g>
<!-- raw_22 -->
<g id="node23" class="node">
<title>raw_22</title>
<ellipse fill="none" stroke="#000000" cx="1675" cy="-1036.8016" rx="27" ry="18"/>
<text text-anchor="middle" x="1675" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_22 -->
<g id="edge22" class="edge">
<title>prose_15&#45;&gt;raw_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1624.9056,-1116.2958C1634.3317,-1101.3376 1648.0879,-1079.508 1658.8012,-1062.5073"/>
<polygon fill="#000000" stroke="#000000" points="1662.0228,-1063.9598 1664.3931,-1053.6335 1656.1006,-1060.2278 1662.0228,-1063.9598"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2002,-1079.4027 1720,-1079.4027 1720,-994.2006 2002,-994.2006 2002,-1079.4027"/>
<text text-anchor="middle" x="1861" y="-1064.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1861" y="-1033.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;lib/node/node&quot;</text>
<text text-anchor="middle" x="1861" y="-1017.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">local Section = require &quot;grym/section&quot;</text>
<text text-anchor="middle" x="1861" y="-1002.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_16&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1796.4898,-1115.8471C1803.0921,-1107.7572 1811.278,-1097.7268 1819.5774,-1087.5574"/>
<polygon fill="#000000" stroke="#000000" points="1822.3105,-1089.744 1825.9218,-1079.7836 1816.8873,-1085.3181 1822.3105,-1089.744"/>
</g>
<!-- header_27 -->
<g id="node28" class="node">
<title>header_27</title>
<ellipse fill="none" stroke="#000000" cx="2119" cy="-1036.8016" rx="99.1453" ry="18"/>
<text text-anchor="middle" x="2119" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Metatable for Docs.</text>
</g>
<!-- section_17&#45;&gt;header_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;header_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2179.4273,-1115.8471C2168.1283,-1101.0668 2151.8777,-1079.8093 2139.0741,-1063.0607"/>
<polygon fill="#000000" stroke="#000000" points="2141.5912,-1060.5904 2132.7373,-1054.7715 2136.03,-1064.8417 2141.5912,-1060.5904"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="2268" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2268" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_17&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2206.7562,-1115.8471C2218.4959,-1100.6949 2235.5099,-1078.7356 2248.6272,-1061.8054"/>
<polygon fill="#000000" stroke="#000000" points="2251.725,-1063.5217 2255.083,-1053.4731 2246.1916,-1059.2344 2251.725,-1063.5217"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2456" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2456" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;73</text>
</g>
<!-- section_17&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>section_17&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2232.3738,-1119.1097C2278.4142,-1102.1641 2354.7329,-1074.0741 2405.1989,-1055.4995"/>
<polygon fill="#000000" stroke="#000000" points="2406.4436,-1058.771 2414.6192,-1052.0323 2404.0257,-1052.2018 2406.4436,-1058.771"/>
</g>
<!-- header_34 -->
<g id="node35" class="node">
<title>header_34</title>
<ellipse fill="none" stroke="#000000" cx="2834" cy="-1036.8016" rx="86.074" ry="18"/>
<text text-anchor="middle" x="2834" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Doc Constructor</text>
</g>
<!-- section_18&#45;&gt;header_34 -->
<g id="edge34" class="edge">
<title>section_18&#45;&gt;header_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3284.9639,-1128.6434C3205.0878,-1121.8434 3069.0302,-1107.1951 2955,-1079.6017 2930.6634,-1073.7126 2904.378,-1064.747 2882.5438,-1056.5404"/>
<polygon fill="#000000" stroke="#000000" points="2883.7544,-1053.2562 2873.1637,-1052.9594 2881.2577,-1059.7959 2883.7544,-1053.2562"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="2996" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2996" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_18&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3288.9853,-1125.8246C3213.3705,-1116.0021 3092.5976,-1098.134 3051,-1079.6017 3039.8306,-1074.6256 3028.9084,-1066.9081 3019.779,-1059.3892"/>
<polygon fill="#000000" stroke="#000000" points="3021.7997,-1056.5098 3011.9431,-1052.6242 3017.2253,-1061.8084 3021.7997,-1056.5098"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="3137" cy="-1036.8016" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3137" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 79&#45;97</text>
</g>
<!-- section_18&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>section_18&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3317.1343,-1118.0542C3292.5604,-1107.353 3259.2472,-1092.7506 3230,-1079.6017 3214.0249,-1072.4196 3196.5677,-1064.4247 3181.1368,-1057.3069"/>
<polygon fill="#000000" stroke="#000000" points="3182.368,-1054.0203 3171.8221,-1053.0036 3179.4322,-1060.3749 3182.368,-1054.0203"/>
</g>
<!-- prose_37 -->
<g id="node38" class="node">
<title>prose_37</title>
<ellipse fill="none" stroke="#000000" cx="3271" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3271" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_37 -->
<g id="edge37" class="edge">
<title>section_18&#45;&gt;prose_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3337.9599,-1115.8471C3324.9272,-1100.4621 3305.9495,-1078.0592 3291.5228,-1061.0286"/>
<polygon fill="#000000" stroke="#000000" points="3293.9865,-1058.522 3284.8522,-1053.154 3288.6453,-1063.0466 3293.9865,-1058.522"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3353" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3353" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_18&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3353,-1115.3943C3353,-1101.1977 3353,-1081.2309 3353,-1064.9755"/>
<polygon fill="#000000" stroke="#000000" points="3356.5001,-1064.9273 3353,-1054.9273 3349.5001,-1064.9274 3356.5001,-1064.9273"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3585" cy="-1036.8016" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="3585" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 110&#45;159</text>
</g>
<!-- section_18&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_18&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3390.0176,-1118.1564C3429.8252,-1101.547 3493.2654,-1075.0771 3536.9094,-1056.867"/>
<polygon fill="#000000" stroke="#000000" points="3538.2985,-1060.0799 3546.1796,-1052.9991 3535.603,-1053.6197 3538.2985,-1060.0799"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3820" cy="-1036.8016" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3820" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_18&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_18&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3416.6893,-1125.7212C3483.1472,-1116.8919 3590.1306,-1100.9679 3681,-1079.6017 3716.0261,-1071.366 3755.1273,-1059.0374 3782.914,-1049.7243"/>
<polygon fill="#000000" stroke="#000000" points="3784.2605,-1052.9636 3792.6108,-1046.4427 3782.0166,-1046.333 3784.2605,-1052.9636"/>
</g>
<!-- structure_41 -->
<g id="node42" class="node">
<title>structure_41</title>
<ellipse fill="none" stroke="#000000" cx="4015" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4015" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_18&#45;&gt;structure_41 -->
<g id="edge41" class="edge">
<title>section_18&#45;&gt;structure_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3422.139,-1129.8816C3520.3844,-1123.7755 3705.7078,-1109.2246 3861,-1079.6017 3898.3466,-1072.4776 3939.8292,-1060.7195 3970.323,-1051.3282"/>
<polygon fill="#000000" stroke="#000000" points="3971.7151,-1054.5605 3980.2213,-1048.2442 3969.6328,-1047.8774 3971.7151,-1054.5605"/>
</g>
<!-- structure_42 -->
<g id="node43" class="node">
<title>structure_42</title>
<ellipse fill="none" stroke="#000000" cx="4177" cy="-1036.8016" rx="44.5182" ry="18"/>
<text text-anchor="middle" x="4177" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">structure</text>
</g>
<!-- section_18&#45;&gt;structure_42 -->
<g id="edge42" class="edge">
<title>section_18&#45;&gt;structure_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3423.0653,-1131.007C3578.3797,-1124.8187 3947.4437,-1107.5884 4069,-1079.6017 4093.0936,-1074.0544 4118.877,-1064.0058 4139.2072,-1055.0388"/>
<polygon fill="#000000" stroke="#000000" points="4140.7497,-1058.1827 4148.4276,-1050.882 4137.8727,-1051.8012 4140.7497,-1058.1827"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="4413" cy="-1036.8016" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4413" y="-1032.6016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 170&#45;189</text>
</g>
<!-- section_18&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_18&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3422.9127,-1130.8356C3602.2606,-1123.4936 4075.4723,-1102.5028 4231,-1079.6017 4271.4804,-1073.641 4316.2239,-1063.173 4351.217,-1054.0817"/>
<polygon fill="#000000" stroke="#000000" points="4352.5,-1057.3634 4361.2812,-1051.4354 4350.7199,-1050.5935 4352.5,-1057.3634"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1432,-634.7011 1052,-634.7011 1052,-532.3006 1432,-532.3006 1432,-634.7011"/>
<text text-anchor="middle" x="1242" y="-571.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> In addition to the standard Node fields, a doc has:</text>
<text text-anchor="middle" x="1242" y="-556.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1242" y="-540.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: The current block. &#160;This will be in </text>
</g>
<!-- raw_20&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>raw_20&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1464.2266,-1019.5852C1432.9876,-958.2836 1326.1975,-748.7252 1272.8477,-644.0346"/>
<polygon fill="#000000" stroke="#000000" points="1275.8257,-642.1698 1268.1668,-634.8491 1269.5888,-645.3481 1275.8257,-642.1698"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1529.5,-601.5009 1450.5,-601.5009 1450.5,-565.5009 1529.5,-565.5009 1529.5,-601.5009"/>
<text text-anchor="middle" x="1490" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">doc[#doc]</text>
</g>
<!-- interpolated_21&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>interpolated_21&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1564.2533,-1018.8889C1556.195,-1003.2675 1545.1172,-979.7617 1539,-958.0016 1503.6046,-832.0923 1493.6192,-675.0394 1490.9351,-611.8089"/>
<polygon fill="#000000" stroke="#000000" points="1494.4318,-611.6549 1490.539,-601.8012 1487.4373,-611.9318 1494.4318,-611.6549"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="2012,-626.1019 1548,-626.1019 1548,-540.8998 2012,-540.8998 2012,-626.1019"/>
<text text-anchor="middle" x="1780" y="-611.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> but may</text>
<text text-anchor="middle" x="1780" y="-595.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;be several layers deep.</text>
<text text-anchor="middle" x="1780" y="-580.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lastOf: An array containing references to the last block of a</text>
<text text-anchor="middle" x="1780" y="-564.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;given level.</text>
</g>
<!-- raw_22&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_22&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1679.1809,-1018.752C1693.9865,-954.8341 1744.2914,-737.6603 1767.7586,-636.3489"/>
<polygon fill="#000000" stroke="#000000" points="1771.232,-636.8636 1770.0789,-626.3317 1764.4125,-635.2839 1771.232,-636.8636"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2207.5,-601.5009 2030.5,-601.5009 2030.5,-565.5009 2207.5,-565.5009 2207.5,-601.5009"/>
<text text-anchor="middle" x="2119" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Metatable for Docs.</text>
</g>
<!-- header_27&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>header_27&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2119,-1018.752C2119,-949.0263 2119,-696.9285 2119,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2122.5001,-611.6021 2119,-601.6021 2115.5001,-611.6021 2122.5001,-611.6021"/>
</g>
<!-- raw_31 -->
<g id="node32" class="node">
<title>raw_31</title>
<ellipse fill="none" stroke="#000000" cx="2253" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2253" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_31 -->
<g id="edge31" class="edge">
<title>prose_28&#45;&gt;raw_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2267.4027,-1018.752C2265.0955,-949.0263 2256.7534,-696.9285 2253.9366,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2257.4279,-611.4808 2253.599,-601.6021 2250.4317,-611.7124 2257.4279,-611.4808"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2734,-897.7019 2298,-897.7019 2298,-269.2998 2734,-269.2998 2734,-897.7019"/>
<text text-anchor="middle" x="2516" y="-882.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local D = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="2516" y="-867.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">D.id = &quot;doc&quot;</text>
<text text-anchor="middle" x="2516" y="-835.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__tostring = function (doc)</text>
<text text-anchor="middle" x="2516" y="-820.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2516" y="-804.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(doc) do</text>
<text text-anchor="middle" x="2516" y="-789.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2516" y="-774.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if repr ~= &quot;&quot; and repr ~= &quot;\n&quot; then</text>
<text text-anchor="middle" x="2516" y="-758.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2516" y="-743.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2516" y="-727.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2516" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase </text>
<text text-anchor="middle" x="2516" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2516" y="-633.601" font-family="Inconsolata" font-size="14.00" fill="#000000">D.__index = D</text>
<text text-anchor="middle" x="2516" y="-602.201" font-family="Inconsolata" font-size="14.00" fill="#000000">D.own = own</text>
<text text-anchor="middle" x="2516" y="-570.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.dotLabel(doc)</text>
<text text-anchor="middle" x="2516" y="-555.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;doc &#45; &quot; .. tostring(doc.linum)</text>
<text text-anchor="middle" x="2516" y="-540.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end </text>
<text text-anchor="middle" x="2516" y="-508.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.toMarkdown(doc)</text>
<text text-anchor="middle" x="2516" y="-493.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = [==[</text>
<text text-anchor="middle" x="2516" y="-477.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="2516" y="-462.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">1. TOC</text>
<text text-anchor="middle" x="2516" y="-447.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">{:toc}</text>
<text text-anchor="middle" x="2516" y="-431.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="2516" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">]==]</text>
<text text-anchor="middle" x="2516" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(doc) do</text>
<text text-anchor="middle" x="2516" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="2516" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="2516" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="2516" y="-339.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method for &quot; .. node.id)</text>
<text text-anchor="middle" x="2516" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2516" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2516" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2516" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>codeblock_29&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2458.3891,-1018.752C2461.3305,-996.53 2466.7237,-955.7838 2473.072,-907.8226"/>
<polygon fill="#000000" stroke="#000000" points="2476.5546,-908.1837 2474.3972,-897.8109 2469.6152,-907.2651 2476.5546,-908.1837"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2280,-140.5001 2226,-140.5001 2226,-104.5001 2280,-104.5001 2280,-140.5001"/>
</g>
<!-- raw_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>raw_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2253,-565.4291C2253,-494.7876 2253,-236.9836 2253,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="2256.5001,-150.6966 2253,-140.6966 2249.5001,-150.6967 2256.5001,-150.6966"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="2901.5,-601.5009 2752.5,-601.5009 2752.5,-565.5009 2901.5,-565.5009 2901.5,-601.5009"/>
<text text-anchor="middle" x="2827" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Doc Constructor</text>
</g>
<!-- header_34&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>header_34&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2833.7213,-1018.752C2832.6445,-949.0263 2828.7516,-696.9285 2827.4371,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="2830.9336,-611.5468 2827.2795,-601.6021 2823.9344,-611.655 2830.9336,-611.5468"/>
</g>
<!-- raw_45 -->
<g id="node46" class="node">
<title>raw_45</title>
<ellipse fill="none" stroke="#000000" cx="2947" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2947" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_35&#45;&gt;raw_45 -->
<g id="edge45" class="edge">
<title>prose_35&#45;&gt;raw_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2992.656,-1018.7003C2989.7972,-1002.7618 2985.7252,-978.9002 2983,-958.0016 2966.2285,-829.3854 2953.8149,-674.966 2949.0898,-612.1621"/>
<polygon fill="#000000" stroke="#000000" points="2952.5561,-611.5781 2948.3226,-601.8658 2945.5754,-612.0983 2952.5561,-611.5781"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3225.5,-719.1016 2992.5,-719.1016 2992.5,-447.9001 3225.5,-447.9001 3225.5,-719.1016"/>
<text text-anchor="middle" x="3109" y="-704.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local d = {}</text>
<text text-anchor="middle" x="3109" y="-656.701" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.parentOf(doc, level)</text>
<text text-anchor="middle" x="3109" y="-641.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local i = level &#45; 1</text>
<text text-anchor="middle" x="3109" y="-625.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local parent = nil</text>
<text text-anchor="middle" x="3109" y="-610.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;while i &gt;= 0 do</text>
<text text-anchor="middle" x="3109" y="-595.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;parent = doc.lastOf[i]</text>
<text text-anchor="middle" x="3109" y="-579.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent then</text>
<text text-anchor="middle" x="3109" y="-564.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return parent</text>
<text text-anchor="middle" x="3109" y="-548.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3109" y="-533.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i = i &#45; 1</text>
<text text-anchor="middle" x="3109" y="-518.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3109" y="-502.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3109" y="-471.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3109" y="-455.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_36&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3135.8851,-1018.752C3132.9217,-970.7766 3124.6252,-836.4615 3118.0247,-729.6042"/>
<polygon fill="#000000" stroke="#000000" points="3121.5014,-729.1179 3117.3915,-719.3528 3114.5147,-729.5496 3121.5014,-729.1179"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3271" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3271" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_37&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_37&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3271,-1018.752C3271,-949.0263 3271,-696.9285 3271,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3274.5001,-611.6021 3271,-601.6021 3267.5001,-611.6021 3274.5001,-611.6021"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="3343" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="3343" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_38&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3352.6018,-1018.752C3351.0636,-949.0263 3345.5023,-696.9285 3343.6244,-611.804"/>
<polygon fill="#000000" stroke="#000000" points="3347.1191,-611.5224 3343.3993,-601.6021 3340.1208,-611.6769 3347.1191,-611.5224"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3971.5,-958.0023 3388.5,-958.0023 3388.5,-208.9995 3971.5,-208.9995 3971.5,-958.0023"/>
<text text-anchor="middle" x="3680" y="-942.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addSection(doc, section, linum, finish)</text>
<text text-anchor="middle" x="3680" y="-927.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id == &quot;section&quot;, &quot;type of putative section is &quot; .. section.id)</text>
<text text-anchor="middle" x="3680" y="-912.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.first, &quot;no first in section at line &quot; .. tostring(linum))</text>
<text text-anchor="middle" x="3680" y="-896.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(type(finish) == &quot;number&quot;, &quot;finish is of type &quot; .. type(finish))</text>
<text text-anchor="middle" x="3680" y="-881.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if not doc.latest then</text>
<text text-anchor="middle" x="3680" y="-865.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = &#160;section</text>
<text text-anchor="middle" x="3680" y="-850.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3680" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="3680" y="-819.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="3680" y="-804.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish &#160;&#160;</text>
<text text-anchor="middle" x="3680" y="-788.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-773.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local atLevel = doc.latest.level </text>
<text text-anchor="middle" x="3680" y="-758.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if atLevel &lt; section.level then</text>
<text text-anchor="middle" x="3680" y="-742.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; add the section under the latest section</text>
<text text-anchor="middle" x="3680" y="-727.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3680" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3680" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local parent = doc:parentOf(section.level)</text>
<text text-anchor="middle" x="3680" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if parent.id == &quot;doc&quot; then</text>
<text text-anchor="middle" x="3680" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.level == 1 and doc.latest.level == 1 then</text>
<text text-anchor="middle" x="3680" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[#doc + 1] = section</text>
<text text-anchor="middle" x="3680" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3680" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3680" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3680" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parent:addSection(section, linum, finish)</text>
<text text-anchor="middle" x="3680" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-527.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-511.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = section</text>
<text text-anchor="middle" x="3680" y="-496.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf[section.level] = section</text>
<text text-anchor="middle" x="3680" y="-480.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3680" y="-465.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3680" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function D.addLine(doc, line, linum, finish)</text>
<text text-anchor="middle" x="3680" y="-402.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if doc.latest then</text>
<text text-anchor="middle" x="3680" y="-387.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3680" y="-371.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3680" y="-356.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3680" y="-341.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; a virtual zero block</text>
<text text-anchor="middle" x="3680" y="-325.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc[1] = Section(0, linum, 1, #line, doc.str)</text>
<text text-anchor="middle" x="3680" y="-310.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest = doc[1]</text>
<text text-anchor="middle" x="3680" y="-294.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest:addLine(line)</text>
<text text-anchor="middle" x="3680" y="-279.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;doc.latest.last = finish</text>
<text text-anchor="middle" x="3680" y="-264.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3680" y="-232.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc</text>
<text text-anchor="middle" x="3680" y="-217.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>codeblock_39&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3588.7827,-1018.752C3591.2965,-1006.7571 3594.9414,-989.3652 3599.3447,-968.3547"/>
<polygon fill="#000000" stroke="#000000" points="3602.7941,-968.9583 3601.4198,-958.453 3595.943,-967.5225 3602.7941,-968.9583"/>
</g>
<!-- raw_53 -->
<g id="node54" class="node">
<title>raw_53</title>
<ellipse fill="none" stroke="#000000" cx="4017" cy="-583.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="4017" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_53 -->
<g id="edge53" class="edge">
<title>prose_40&#45;&gt;raw_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3850.7835,-1031.1299C3888.3223,-1022.4501 3950.5242,-1002.0045 3981,-958.0016 4056.212,-849.4055 4035.0562,-678.6636 4022.8543,-611.7424"/>
<polygon fill="#000000" stroke="#000000" points="4026.2245,-610.7298 4020.9178,-601.5598 4019.3478,-612.0377 4026.2245,-610.7298"/>
</g>
<!-- handleline_55 -->
<g id="node56" class="node">
<title>handleline_55</title>
<ellipse fill="none" stroke="#000000" cx="4112" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4112" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_41&#45;&gt;handleline_55 -->
<g id="edge55" class="edge">
<title>structure_41&#45;&gt;handleline_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4025.3105,-1019.2633C4034.0102,-1003.6857 4046.116,-980.0373 4053,-958.0016 4092.1476,-832.6901 4106.1088,-675.3035 4110.3661,-611.8964"/>
<polygon fill="#000000" stroke="#000000" points="4113.8625,-612.0636 4111.0106,-601.8598 4106.8769,-611.615 4113.8625,-612.0636"/>
</g>
<!-- handleline_58 -->
<g id="node59" class="node">
<title>handleline_58</title>
<ellipse fill="none" stroke="#000000" cx="4231" cy="-583.5009" rx="50.3585" ry="18"/>
<text text-anchor="middle" x="4231" y="-579.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handleline</text>
</g>
<!-- structure_42&#45;&gt;handleline_58 -->
<g id="edge58" class="edge">
<title>structure_42&#45;&gt;handleline_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4179.1502,-1018.752C4187.4648,-948.9552 4217.549,-696.4144 4227.6593,-611.5442"/>
<polygon fill="#000000" stroke="#000000" points="4231.1361,-611.9459 4228.8437,-601.6021 4224.1853,-611.1178 4231.1361,-611.9459"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="4588.5,-727.0013 4299.5,-727.0013 4299.5,-440.0004 4588.5,-440.0004 4588.5,-727.0013"/>
<text text-anchor="middle" x="4444" y="-711.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Doc, str)</text>
<text text-anchor="middle" x="4444" y="-696.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local doc = setmetatable({}, D)</text>
<text text-anchor="middle" x="4444" y="-681.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.str = str</text>
<text text-anchor="middle" x="4444" y="-665.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.first = 1</text>
<text text-anchor="middle" x="4444" y="-650.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.last = #str</text>
<text text-anchor="middle" x="4444" y="-634.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.latest = nil</text>
<text text-anchor="middle" x="4444" y="-619.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lines = {}</text>
<text text-anchor="middle" x="4444" y="-604.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.lastOf = {}</text>
<text text-anchor="middle" x="4444" y="-588.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; for now lets set root to &#39;false&#39;</text>
<text text-anchor="middle" x="4444" y="-573.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;doc.root = false</text>
<text text-anchor="middle" x="4444" y="-557.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return doc:own(str)</text>
<text text-anchor="middle" x="4444" y="-542.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4444" y="-511.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">setmetatable(D, Node)</text>
<text text-anchor="middle" x="4444" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">d[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="4444" y="-448.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, d)</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>codeblock_43&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4414.2344,-1018.752C4417.4362,-971.9331 4426.2613,-842.887 4433.4767,-737.3784"/>
<polygon fill="#000000" stroke="#000000" points="4436.9792,-737.4604 4434.1697,-727.2449 4429.9955,-736.9827 4436.9792,-737.4604"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="2974,-142.5001 2920,-142.5001 2920,-102.5001 2974,-102.5001 2974,-142.5001"/>
</g>
<!-- raw_45&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>raw_45&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2947,-565.4291C2947,-495.3549 2947,-241.112 2947,-152.8963"/>
<polygon fill="#000000" stroke="#000000" points="2950.5001,-152.75 2947,-142.75 2943.5001,-152.75 2950.5001,-152.75"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3453.5,-173.0002 3024.5,-173.0002 3024.5,-71.9999 3453.5,-71.9999 3453.5,-173.0002"/>
<text text-anchor="middle" x="3239" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> This function looks at document level and places the block</text>
<text text-anchor="middle" x="3239" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> accordingly.</text>
<text text-anchor="middle" x="3239" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3239" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; doc : the document</text>
<text text-anchor="middle" x="3239" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; block : block to be appended</text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3269.7456,-565.4291C3265.3618,-502.276 3250.5948,-289.5376 3243.2382,-183.5564"/>
<polygon fill="#000000" stroke="#000000" points="3246.7127,-183.0672 3242.5286,-173.3336 3239.7295,-183.552 3246.7127,-183.0672"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3642,-150.4016 3472,-150.4016 3472,-94.5986 3642,-94.5986 3642,-150.4016"/>
<text text-anchor="middle" x="3557" y="-119.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> returns: the document</text>
</g>
<!-- raw_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>raw_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3339.0094,-565.6902C3327.1161,-507.7673 3297.6272,-321.9732 3380,-209.0002 3403.6896,-176.5103 3426.8132,-190.5303 3463,-173.0002 3474.4452,-167.4557 3486.5115,-161.2535 3498.0429,-155.1449"/>
<polygon fill="#000000" stroke="#000000" points="3499.9811,-158.0777 3507.1541,-150.2803 3496.6842,-151.9027 3499.9811,-158.0777"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4071,-142.4022 3915,-142.4022 3915,-102.598 4071,-102.598 4071,-142.4022"/>
<text text-anchor="middle" x="3993" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Creates a Doc Node.</text>
</g>
<!-- raw_53&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>raw_53&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4016.0592,-565.4291C4012.4027,-495.1951 3999.1146,-239.9515 3994.5512,-152.2954"/>
<polygon fill="#000000" stroke="#000000" points="3998.0423,-152.0319 3994.027,-142.2274 3991.0517,-152.3959 3998.0423,-152.0319"/>
</g>
<!-- handle_56 -->
<g id="node57" class="node">
<title>handle_56</title>
<ellipse fill="none" stroke="#000000" cx="4126" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4126" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_55&#45;&gt;handle_56 -->
<g id="edge56" class="edge">
<title>handleline_55&#45;&gt;handle_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4112.5488,-565.4291C4114.6941,-494.7876 4122.5233,-236.9836 4125.141,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4128.6421,-150.7983 4125.4474,-140.6966 4121.6454,-150.5857 4128.6421,-150.7983"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4153,-36 4099,-36 4099,0 4153,0 4153,-36"/>
</g>
<!-- handle_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>handle_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4126,-104.2976C4126,-88.3618 4126,-64.942 4126,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4129.5001,-46.3445 4126,-36.3446 4122.5001,-46.3446 4129.5001,-46.3445"/>
</g>
<!-- handle_59 -->
<g id="node60" class="node">
<title>handle_59</title>
<ellipse fill="none" stroke="#000000" cx="4231" cy="-122.5001" rx="36.827" ry="18"/>
<text text-anchor="middle" x="4231" y="-118.3001" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">handle</text>
</g>
<!-- handleline_58&#45;&gt;handle_59 -->
<g id="edge59" class="edge">
<title>handleline_58&#45;&gt;handle_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4231,-565.4291C4231,-494.7876 4231,-236.9836 4231,-150.7867"/>
<polygon fill="#000000" stroke="#000000" points="4234.5001,-150.6966 4231,-140.6966 4227.5001,-150.6967 4234.5001,-150.6966"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="4258,-36 4204,-36 4204,0 4258,0 4258,-36"/>
</g>
<!-- handle_59&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>handle_59&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4231,-104.2976C4231,-88.3618 4231,-64.942 4231,-46.5196"/>
<polygon fill="#000000" stroke="#000000" points="4234.5001,-46.3445 4231,-36.3446 4227.5001,-46.3446 4234.5001,-46.3445"/>
</g>
</g>
</svg>