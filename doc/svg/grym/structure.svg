<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3334pt" height="1427pt"
 viewBox="0.00 0.00 3334.00 1427.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1423.0017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1423.0017 3330,-1423.0017 3330,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1526.5" cy="-1401.0017" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="1526.5" y="-1396.8017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 54</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1526.5" cy="-1329.0017" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1526.5" y="-1324.8017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;34</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1526.5,-1382.8331C1526.5,-1375.1327 1526.5,-1365.9761 1526.5,-1357.4183"/>
<polygon fill="#000000" stroke="#000000" points="1530.0001,-1357.4149 1526.5,-1347.415 1523.0001,-1357.415 1530.0001,-1357.4149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1079.5" cy="-998.8013" rx="89.9744" ry="18"/>
<text text-anchor="middle" x="1079.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Structure Module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1466.1069,-1326.92C1378.3257,-1322.7085 1221.2819,-1310.3317 1178.5,-1275.0017 1101.5658,-1211.4682 1084.404,-1083.46 1080.5864,-1026.8366"/>
<polygon fill="#000000" stroke="#000000" points="1084.0782,-1026.5939 1080.0021,-1016.8146 1077.0901,-1027.0013 1084.0782,-1026.5939"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="1233.5" cy="-998.8013" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1233.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1468.8737,-1323.1162C1406.6627,-1315.5595 1313.1452,-1300.3102 1288.5,-1275.0017 1222.1445,-1206.8604 1224.8758,-1082.7924 1230.0132,-1027.1405"/>
<polygon fill="#000000" stroke="#000000" points="1233.5188,-1027.263 1231.0529,-1016.9591 1226.555,-1026.5518 1233.5188,-1027.263"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-998.8013" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;9</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1474.8967,-1319.3161C1448.269,-1311.6818 1417.4762,-1298.2736 1398.5,-1275.0017 1338.8082,-1201.7971 1337.8869,-1081.785 1341.0281,-1027.3017"/>
<polygon fill="#000000" stroke="#000000" points="1344.5412,-1027.2225 1341.7173,-1017.0109 1337.5568,-1026.7546 1344.5412,-1027.2225"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1462.5" cy="-998.8013" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="1462.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 10&#45;11</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1522.9679,-1310.7784C1512.3685,-1256.092 1480.7778,-1093.1034 1467.9774,-1027.0613"/>
<polygon fill="#000000" stroke="#000000" points="1471.3601,-1026.1196 1466.0212,-1016.9683 1464.488,-1027.4516 1471.3601,-1026.1196"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1591.5" cy="-998.8013" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1591.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 12&#45;34</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1530.0873,-1310.7784C1540.8523,-1256.092 1572.9366,-1093.1034 1585.937,-1027.0613"/>
<polygon fill="#000000" stroke="#000000" points="1589.4264,-1027.4561 1587.9238,-1016.9683 1582.5582,-1026.104 1589.4264,-1027.4561"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="2005.5" cy="-998.8013" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2005.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 20&#45;34</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1566.8201,-1315.5295C1593.2072,-1305.9326 1627.9548,-1291.7878 1656.5,-1275.0017 1787.9121,-1197.7245 1924.0616,-1075.5078 1979.5922,-1023.5204"/>
<polygon fill="#000000" stroke="#000000" points="1982.3043,-1025.7744 1987.1901,-1016.3734 1977.5081,-1020.6757 1982.3043,-1025.7744"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2687.5" cy="-998.8013" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2687.5" y="-994.6013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 35&#45;54</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1586.5651,-1325.6491C1710.0564,-1318.3476 1988.5639,-1299.6651 2080.5,-1275.0017 2309.1564,-1213.6608 2559.7962,-1074.0988 2651.4217,-1020.407"/>
<polygon fill="#000000" stroke="#000000" points="2653.4496,-1023.2747 2660.292,-1015.1856 2649.8986,-1017.2422 2653.4496,-1023.2747"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="3326,-1275.2023 2771,-1275.2023 2771,-722.4004 3326,-722.4004 3326,-1275.2023"/>
<text text-anchor="middle" x="3048.5" y="-1259.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Structure Module</text>
<text text-anchor="middle" x="3048.5" y="-1228.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Structure is our holding block for anything which is neither</text>
<text text-anchor="middle" x="3048.5" y="-1213.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> prose nor code. &#160;This includes taglines, lists, tables, and some</text>
<text text-anchor="middle" x="3048.5" y="-1197.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> more advanced forms such as drawers.</text>
<text text-anchor="middle" x="3048.5" y="-1166.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> For now we need them as containers for taglines, which are part of the short</text>
<text text-anchor="middle" x="3048.5" y="-1150.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> path for knitting source code.</text>
<text text-anchor="middle" x="3048.5" y="-1119.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> Note that structures do not have a =.lines= field.</text>
<text text-anchor="middle" x="3048.5" y="-1088.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3048.5" y="-1072.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="3048.5" y="-1057.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="3048.5" y="-1025.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">local Hashline = require &quot;grym/hashline&quot;</text>
<text text-anchor="middle" x="3048.5" y="-1010.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local Handleline = require &quot;grym/handleline&quot;</text>
<text text-anchor="middle" x="3048.5" y="-995.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3048.5" y="-963.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Metatable for Structures</text>
<text text-anchor="middle" x="3048.5" y="-932.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3048.5" y="-916.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="3048.5" y="-885.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(structure)</text>
<text text-anchor="middle" x="3048.5" y="-870.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is a shim and will break.</text>
<text text-anchor="middle" x="3048.5" y="-854.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if structure.temp_id then </text>
<text text-anchor="middle" x="3048.5" y="-839.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return structure.temp_id</text>
<text text-anchor="middle" x="3048.5" y="-823.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3048.5" y="-808.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;structure&quot;</text>
<text text-anchor="middle" x="3048.5" y="-793.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3048.5" y="-777.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3048.5" y="-762.201" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3048.5" y="-730.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- section_1&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>section_1&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1587.2527,-1327.543C1819.7368,-1321.8126 2645.3147,-1300.0528 2760.6463,-1274.3254"/>
<polygon fill="#000000" stroke="#000000" points="2761.9451,-1277.5919 2770.5538,-1271.4159 2759.9727,-1270.8755 2761.9451,-1277.5919"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="471,-570.0011 0,-570.0011 0,-499.6003 471,-499.6003 471,-570.0011"/>
<text text-anchor="middle" x="235.5" y="-538.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Structure is our holding block for anything which is neither</text>
<text text-anchor="middle" x="235.5" y="-523.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> prose nor code. &#160;This includes taglines, lists, tables, and some</text>
<text text-anchor="middle" x="235.5" y="-507.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> more advanced forms such as drawers.</text>
</g>
<!-- block_3&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_3&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1236.4872,-980.689C1243.6018,-930.5544 1255.6193,-789.2698 1178.5,-722.6009 1119.667,-671.7404 553.7037,-709.8801 479.5,-686.6009 405.8539,-663.4967 332.1071,-612.8766 285.2788,-576.4368"/>
<polygon fill="#000000" stroke="#000000" points="287.1645,-573.4671 277.1408,-570.0355 282.8367,-578.969 287.1645,-573.4671"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="1044,-554.1013 489,-554.1013 489,-515.5001 1044,-515.5001 1044,-554.1013"/>
<text text-anchor="middle" x="766.5" y="-539.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> For now we need them as containers for taglines, which are part of the short</text>
<text text-anchor="middle" x="766.5" y="-523.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> path for knitting source code.</text>
</g>
<!-- block_4&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_4&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1346.1781,-980.7232C1352.3775,-931.2868 1362.017,-792.8689 1288.5,-722.6009 1211.7987,-649.2893 1153.2271,-719.9436 1052.5,-686.6009 957.6593,-655.2067 856.6653,-594.2436 803.7682,-559.8957"/>
<polygon fill="#000000" stroke="#000000" points="805.3656,-556.7583 795.0811,-554.2126 801.5334,-562.6162 805.3656,-556.7583"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="1435,-552.8007 1062,-552.8007 1062,-516.8007 1435,-516.8007 1435,-552.8007"/>
<text text-anchor="middle" x="1248.5" y="-531.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Note that structures do not have a =.lines= field.</text>
</g>
<!-- block_5&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_5&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1461.0967,-980.765C1456.9862,-935.3047 1442.3583,-813.2026 1398.5,-722.6009 1366.8071,-657.1302 1308.7265,-593.7457 1274.8889,-559.9623"/>
<polygon fill="#000000" stroke="#000000" points="1277.2253,-557.3506 1267.6494,-552.817 1272.308,-562.3327 1277.2253,-557.3506"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="1530.5" cy="-534.8007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1530.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 12&#45;18</text>
</g>
<!-- block_6&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_6&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1589.1087,-980.6119C1579.7508,-909.4305 1545.5714,-649.4425 1534.2043,-562.9779"/>
<polygon fill="#000000" stroke="#000000" points="1537.6484,-562.3228 1532.8747,-552.8643 1530.7081,-563.2352 1537.6484,-562.3228"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1679.5,-552.8007 1625.5,-552.8007 1625.5,-516.8007 1679.5,-516.8007 1679.5,-552.8007"/>
</g>
<!-- block_6&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_6&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1593.8913,-980.6119C1603.2492,-909.4305 1637.4286,-649.4425 1648.7957,-562.9779"/>
<polygon fill="#000000" stroke="#000000" points="1652.2919,-563.2352 1650.1253,-552.8643 1645.3516,-562.3228 1652.2919,-563.2352"/>
</g>
<!-- header_15 -->
<g id="node16" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="1814.5" cy="-534.8007" rx="116.5368" ry="18"/>
<text text-anchor="middle" x="1814.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for Structures</text>
</g>
<!-- section_7&#45;&gt;header_15 -->
<g id="edge15" class="edge">
<title>section_7&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.1296,-980.8962C1968.9154,-909.9255 1861.1313,-648.0832 1825.7983,-562.2478"/>
<polygon fill="#000000" stroke="#000000" points="1828.9945,-560.8176 1821.9515,-552.9027 1822.5215,-563.4822 1828.9945,-560.8176"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="2005.5" cy="-534.8007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2005.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 20&#45;21</text>
</g>
<!-- section_7&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_7&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2005.5,-980.6119C2005.5,-909.4305 2005.5,-649.4425 2005.5,-562.9779"/>
<polygon fill="#000000" stroke="#000000" points="2009.0001,-562.8643 2005.5,-552.8643 2002.0001,-562.8643 2009.0001,-562.8643"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="2135.5" cy="-534.8007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2135.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 22&#45;34</text>
</g>
<!-- section_7&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_7&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2010.5962,-980.6119C2030.5595,-909.358 2103.529,-648.9128 2127.6794,-562.7143"/>
<polygon fill="#000000" stroke="#000000" points="2131.1114,-563.4378 2130.4391,-552.8643 2124.3709,-561.5493 2131.1114,-563.4378"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2484,-663.0012 2209,-663.0012 2209,-406.6002 2484,-406.6002 2484,-663.0012"/>
<text text-anchor="middle" x="2346.5" y="-647.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Metatable for Structures</text>
<text text-anchor="middle" x="2346.5" y="-616.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="2346.5" y="-600.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="2346.5" y="-569.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(structure)</text>
<text text-anchor="middle" x="2346.5" y="-554.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is a shim and will break.</text>
<text text-anchor="middle" x="2346.5" y="-538.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if structure.temp_id then </text>
<text text-anchor="middle" x="2346.5" y="-523.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return structure.temp_id</text>
<text text-anchor="middle" x="2346.5" y="-507.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2346.5" y="-492.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;structure&quot;</text>
<text text-anchor="middle" x="2346.5" y="-477.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2346.5" y="-461.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2346.5" y="-446.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="2346.5" y="-414.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- section_7&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>section_7&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2018.6587,-980.8962C2055.7952,-930.3644 2164.0447,-783.0687 2246.0841,-671.4372"/>
<polygon fill="#000000" stroke="#000000" points="2249.0908,-673.2562 2252.1924,-663.1256 2243.4502,-669.1109 2249.0908,-673.2562"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2601.5" cy="-534.8007" rx="99.6298" ry="18"/>
<text text-anchor="middle" x="2601.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor module</text>
</g>
<!-- section_8&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2684.1287,-980.6119C2670.9222,-909.358 2622.6501,-648.9128 2606.6736,-562.7143"/>
<polygon fill="#000000" stroke="#000000" points="2610.1119,-562.059 2604.848,-552.8643 2603.2291,-563.3347 2610.1119,-562.059"/>
</g>
<!-- block_24 -->
<g id="node25" class="node">
<title>block_24</title>
<ellipse fill="none" stroke="#000000" cx="2774.5" cy="-534.8007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2774.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;37</text>
</g>
<!-- section_8&#45;&gt;block_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;block_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2690.9105,-980.6119C2704.2706,-909.358 2753.104,-648.9128 2769.2662,-562.7143"/>
<polygon fill="#000000" stroke="#000000" points="2772.7102,-563.3381 2771.1131,-552.8643 2765.8301,-562.048 2772.7102,-563.3381"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="2904.5" cy="-534.8007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2904.5" y="-530.6007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 38&#45;54</text>
</g>
<!-- section_8&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2687.3222,-980.6088C2687.8091,-932.6348 2695.4535,-801.0011 2761.5,-722.6009 2786.0991,-693.4006 2812.8804,-713.972 2839.5,-686.6009 2873.4072,-651.7365 2890.9192,-596.4205 2898.8756,-563.0673"/>
<polygon fill="#000000" stroke="#000000" points="2902.3458,-563.5889 2901.1318,-553.0638 2895.5173,-562.0488 2902.3458,-563.5889"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3302.5,-686.4014 2978.5,-686.4014 2978.5,-383.2 3302.5,-383.2 3302.5,-686.4014"/>
<text text-anchor="middle" x="3140.5" y="-671.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Constructor module</text>
<text text-anchor="middle" x="3140.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3140.5" y="-608.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Structure, line, line_id)</text>
<text text-anchor="middle" x="3140.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local structure = setmetatable({}, S)</text>
<text text-anchor="middle" x="3140.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;structure.id = &quot;structure&quot;</text>
<text text-anchor="middle" x="3140.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if line_id == &quot;hashline&quot; then</text>
<text text-anchor="middle" x="3140.5" y="-547.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;structure[1] = Hashline(line)</text>
<text text-anchor="middle" x="3140.5" y="-531.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif line_id == &quot;handleline&quot; then</text>
<text text-anchor="middle" x="3140.5" y="-516.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;structure[1] = Handleline(line)</text>
<text text-anchor="middle" x="3140.5" y="-500.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3140.5" y="-469.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return structure</text>
<text text-anchor="middle" x="3140.5" y="-454.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3140.5" y="-406.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(s, new)</text>
<text text-anchor="middle" x="3140.5" y="-391.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
</g>
<!-- section_8&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>section_8&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2686.2884,-980.657C2684.0592,-931.0514 2685.2621,-792.241 2761.5,-722.6009 2828.4696,-661.427 2881.3518,-722.9286 2969.142,-686.2787"/>
<polygon fill="#000000" stroke="#000000" points="2970.6333,-689.4457 2978.3126,-682.1464 2967.7575,-683.0637 2970.6333,-689.4457"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1692.5,-346.8015 1368.5,-346.8015 1368.5,-261.5994 1692.5,-261.5994 1692.5,-346.8015"/>
<text text-anchor="middle" x="1530.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1530.5" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="1530.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Hashline = require &quot;grym/hashline&quot;</text>
<text text-anchor="middle" x="1530.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Handleline = require &quot;grym/handleline&quot;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1530.5,-516.7059C1530.5,-482.7343 1530.5,-408.2338 1530.5,-357.1254"/>
<polygon fill="#000000" stroke="#000000" points="1534.0001,-356.9162 1530.5,-346.9162 1527.0001,-356.9162 1534.0001,-356.9162"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="2032.5,-322.2004 1978.5,-322.2004 1978.5,-286.2004 2032.5,-286.2004 2032.5,-322.2004"/>
</g>
<!-- block_16&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_16&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2005.5,-516.7059C2005.5,-476.7138 2005.5,-380.5548 2005.5,-332.5127"/>
<polygon fill="#000000" stroke="#000000" points="2009.0001,-332.2111 2005.5,-322.2112 2002.0001,-332.2112 2009.0001,-332.2111"/>
</g>
<!-- codeblock_19 -->
<g id="node20" class="node">
<title>codeblock_19</title>
<ellipse fill="none" stroke="#000000" cx="2131.5" cy="-304.2004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2131.5" y="-300.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 22&#45;33</text>
</g>
<!-- block_17&#45;&gt;codeblock_19 -->
<g id="edge19" class="edge">
<title>block_17&#45;&gt;codeblock_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2135.1861,-516.7059C2134.491,-476.6296 2132.8174,-380.1497 2131.9859,-332.2099"/>
<polygon fill="#000000" stroke="#000000" points="2135.4854,-332.1489 2131.8124,-322.2112 2128.4865,-332.2704 2135.4854,-332.1489"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2280.5,-322.2004 2226.5,-322.2004 2226.5,-286.2004 2280.5,-286.2004 2280.5,-322.2004"/>
</g>
<!-- block_17&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_17&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2141.8539,-516.4922C2152.2487,-487.4003 2174.2754,-429.1864 2199.5,-383.0005 2209.4678,-364.7495 2222.6262,-345.4725 2233.4583,-330.5531"/>
<polygon fill="#000000" stroke="#000000" points="2236.4147,-332.4409 2239.5255,-322.313 2230.7778,-328.2904 2236.4147,-332.4409"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2269,-193.8009 1994,-193.8009 1994,-31.5994 2269,-31.5994 2269,-193.8009"/>
<text text-anchor="middle" x="2131.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="2131.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(structure)</text>
<text text-anchor="middle" x="2131.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is a shim and will break.</text>
<text text-anchor="middle" x="2131.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if structure.temp_id then </text>
<text text-anchor="middle" x="2131.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return structure.temp_id</text>
<text text-anchor="middle" x="2131.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2131.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;structure&quot;</text>
<text text-anchor="middle" x="2131.5" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2131.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>codeblock_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2131.5,-286.1845C2131.5,-267.029 2131.5,-235.2564 2131.5,-204.0995"/>
<polygon fill="#000000" stroke="#000000" points="2135.0001,-204.0219 2131.5,-194.022 2128.0001,-204.022 2135.0001,-204.0219"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2801.5,-322.2004 2747.5,-322.2004 2747.5,-286.2004 2801.5,-286.2004 2801.5,-322.2004"/>
</g>
<!-- block_24&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_24&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2774.5,-516.7059C2774.5,-476.7138 2774.5,-380.5548 2774.5,-332.5127"/>
<polygon fill="#000000" stroke="#000000" points="2778.0001,-332.2111 2774.5,-322.2112 2771.0001,-332.2112 2778.0001,-332.2111"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2900.5" cy="-304.2004" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2900.5" y="-300.0004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;53</text>
</g>
<!-- block_25&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>block_25&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2904.1861,-516.7059C2903.491,-476.6296 2901.8174,-380.1497 2900.9859,-332.2099"/>
<polygon fill="#000000" stroke="#000000" points="2904.4854,-332.1489 2900.8124,-322.2112 2897.4865,-332.2704 2904.4854,-332.1489"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3049.5,-322.2004 2995.5,-322.2004 2995.5,-286.2004 3049.5,-286.2004 3049.5,-322.2004"/>
</g>
<!-- block_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2911.0496,-516.5275C2921.7388,-487.484 2944.2874,-429.3353 2969.5,-383.0005 2979.381,-364.8415 2992.2977,-345.5663 3002.9058,-330.6249"/>
<polygon fill="#000000" stroke="#000000" points="3005.8459,-332.5313 3008.8444,-322.3696 3000.1635,-328.4435 3005.8459,-332.5313"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3062.5,-225.6009 2738.5,-225.6009 2738.5,.2005 3062.5,.2005 3062.5,-225.6009"/>
<text text-anchor="middle" x="2900.5" y="-210.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Structure, line, line_id)</text>
<text text-anchor="middle" x="2900.5" y="-194.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local structure = setmetatable({}, S)</text>
<text text-anchor="middle" x="2900.5" y="-179.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;structure.id = &quot;structure&quot;</text>
<text text-anchor="middle" x="2900.5" y="-164.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if line_id == &quot;hashline&quot; then</text>
<text text-anchor="middle" x="2900.5" y="-148.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;structure[1] = Hashline(line)</text>
<text text-anchor="middle" x="2900.5" y="-133.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif line_id == &quot;handleline&quot; then</text>
<text text-anchor="middle" x="2900.5" y="-117.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;structure[1] = Handleline(line)</text>
<text text-anchor="middle" x="2900.5" y="-102.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2900.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return structure</text>
<text text-anchor="middle" x="2900.5" y="-55.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2900.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(s, new)</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2900.5,-286.1845C2900.5,-273.5997 2900.5,-255.5689 2900.5,-235.8448"/>
<polygon fill="#000000" stroke="#000000" points="2904.0001,-235.7206 2900.5,-225.7207 2897.0001,-235.7207 2904.0001,-235.7206"/>
</g>
</g>
</svg>