<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12592pt" height="2633pt"
 viewBox="0.00 0.00 12591.50 2632.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2628.6043)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2628.6043 12587.5,-2628.6043 12587.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2606.6043" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2602.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 412</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2534.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2530.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;379</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1972.5,-2588.4357C1972.5,-2580.7353 1972.5,-2571.5787 1972.5,-2563.021"/>
<polygon fill="#000000" stroke="#000000" points="1976.0001,-2563.0176 1972.5,-2553.0176 1969.0001,-2563.0176 1976.0001,-2563.0176"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1382.5" cy="-2462.6043" rx="93.3745" ry="18"/>
<text text-anchor="middle" x="1382.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Section metatable</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1909.9396,-2528.9834C1816.9345,-2520.3326 1636.7988,-2502.4457 1484.5,-2480.6043 1476.5276,-2479.461 1468.2227,-2478.1668 1459.9455,-2476.8094"/>
<polygon fill="#000000" stroke="#000000" points="1460.3275,-2473.3248 1449.8873,-2475.1284 1459.1735,-2480.229 1460.3275,-2473.3248"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1525.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1525.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1907.7367,-2531.6055C1826.6502,-2526.58 1684.1046,-2513.5273 1566.5,-2480.6043 1564.0764,-2479.9259 1561.6101,-2479.1311 1559.1506,-2478.2603"/>
<polygon fill="#000000" stroke="#000000" points="1560.3914,-2474.9875 1549.8033,-2474.6103 1557.8452,-2481.508 1560.3914,-2474.9875"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1607.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1607.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2565,-2528.8727C1844.2517,-2521.7259 1737.4497,-2507.0918 1648.5,-2480.6043 1646.0879,-2479.8861 1643.6302,-2479.0616 1641.1769,-2478.1692"/>
<polygon fill="#000000" stroke="#000000" points="1642.4293,-2474.9008 1631.8431,-2474.4724 1639.8516,-2481.4089 1642.4293,-2474.9008"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1689.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1689.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1915.9185,-2525.1958C1866.3352,-2516.194 1792.6793,-2500.9767 1730.5,-2480.6043 1728.2561,-2479.8691 1725.9674,-2479.055 1723.6763,-2478.191"/>
<polygon fill="#000000" stroke="#000000" points="1724.9349,-2474.9247 1714.3515,-2474.4329 1722.3182,-2481.4173 1724.9349,-2474.9247"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1771.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1771.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1929.008,-2521.072C1896.6188,-2510.7179 1851.4559,-2495.6957 1812.5,-2480.6043 1810.2981,-2479.7514 1808.0416,-2478.8474 1805.7743,-2477.9165"/>
<polygon fill="#000000" stroke="#000000" points="1807.0798,-2474.6686 1796.506,-2474.0002 1804.3552,-2481.1165 1807.0798,-2474.6686"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="1887.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1887.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;21</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1951.9239,-2517.1751C1941.0655,-2507.9775 1927.5779,-2496.5527 1915.7539,-2486.5371"/>
<polygon fill="#000000" stroke="#000000" points="1917.7793,-2483.6658 1907.8866,-2479.873 1913.2549,-2489.0072 1917.7793,-2483.6658"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2047.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2047.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 22&#45;29</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1990.6554,-2517.1751C1999.983,-2508.2207 2011.5094,-2497.1553 2021.7394,-2487.3345"/>
<polygon fill="#000000" stroke="#000000" points="2024.4618,-2489.5728 2029.2518,-2480.1226 2019.6141,-2484.5231 2024.4618,-2489.5728"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2600.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2600.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 46&#45;79</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2033.2859,-2527.6353C2150.0531,-2514.2479 2405.1513,-2485.001 2529.5086,-2470.7435"/>
<polygon fill="#000000" stroke="#000000" points="2530.1444,-2474.1936 2539.6806,-2469.5773 2529.347,-2467.2392 2530.1444,-2474.1936"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="4806.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4806.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 125&#45;166</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.0389,-2532.9393C2414.1768,-2523.3832 4296.4947,-2475.5614 4721.2484,-2464.7702"/>
<polygon fill="#000000" stroke="#000000" points="4721.4001,-2468.2676 4731.308,-2464.5147 4721.2223,-2461.2699 4721.4001,-2468.2676"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="9215.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9215.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 204&#45;217</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.1677,-2533.9516C2712.2716,-2527.2505 8364.8564,-2471.0603 9129.9247,-2463.455"/>
<polygon fill="#000000" stroke="#000000" points="9130.0708,-2466.9538 9140.0355,-2463.3545 9130.0011,-2459.9542 9130.0708,-2466.9538"/>
</g>
<!-- section_12 -->
<g id="node13" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="10364.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10364.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 361&#45;379</text>
</g>
<!-- section_1&#45;&gt;section_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;section_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.1959,-2534.3591C2574.2175,-2532.3086 6285.6799,-2517.1783 9299.5,-2480.6043 9663.6352,-2476.1854 10097.7543,-2467.9136 10278.7141,-2464.3315"/>
<polygon fill="#000000" stroke="#000000" points="10279.0356,-2467.8259 10288.9642,-2464.1282 10278.8968,-2460.8273 10279.0356,-2467.8259"/>
</g>
<!-- section_13 -->
<g id="node14" class="node">
<title>section_13</title>
<ellipse fill="none" stroke="#000000" cx="11738.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11738.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 380&#45;412</text>
</g>
<!-- section_1&#45;&gt;section_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;section_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.5316,-2534.3753C2620.9781,-2532.316 6942.6949,-2516.2305 10448.5,-2480.6043 10902.2157,-2475.9937 11445.654,-2467.4085 11652.6978,-2464.0263"/>
<polygon fill="#000000" stroke="#000000" points="11652.9525,-2467.5227 11662.8939,-2463.8595 11652.838,-2460.5236 11652.9525,-2467.5227"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="457,-2408.5046 0,-2408.5046 0,-2321.904 457,-2321.904 457,-2408.5046"/>
<text text-anchor="middle" x="228.5" y="-2345.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Sections consist of a header and body. &#160;The body may contain</text>
<text text-anchor="middle" x="228.5" y="-2330.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> one or more blocks, followed by zero or more child sections.</text>
</g>
<!-- prose_3&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>prose_3&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1501.7378,-2450.3724C1496.2133,-2448.0404 1490.2598,-2445.9196 1484.5,-2444.6043 1266.7284,-2394.876 706.9127,-2431.9923 467.1625,-2408.6901"/>
<polygon fill="#000000" stroke="#000000" points="467.3372,-2405.1897 457.0316,-2407.6482 466.621,-2412.153 467.3372,-2405.1897"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="918,-2392.5047 475,-2392.5047 475,-2337.9039 918,-2337.9039 918,-2392.5047"/>
<text text-anchor="middle" x="696.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> The header and block may both be virtual, but will always be</text>
<text text-anchor="middle" x="696.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> present.</text>
</g>
<!-- prose_4&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1583.2799,-2450.2778C1577.8806,-2448.0128 1572.0945,-2445.9437 1566.5,-2444.6043 1289.8669,-2378.3765 1209.8707,-2442.9378 927.5,-2408.6043 897.7483,-2404.9868 866.054,-2399.8727 835.9806,-2394.4184"/>
<polygon fill="#000000" stroke="#000000" points="836.3169,-2390.9217 825.8491,-2392.5573 835.0521,-2397.8065 836.3169,-2390.9217"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1330.5,-2392.5047 936.5,-2392.5047 936.5,-2337.9039 1330.5,-2337.9039 1330.5,-2392.5047"/>
<text text-anchor="middle" x="1133.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> In the first pass, we fill a lines array with the raw</text>
<text text-anchor="middle" x="1133.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> contents of the section. </text>
</g>
<!-- prose_5&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>prose_5&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1665.2155,-2450.5301C1659.8202,-2448.2494 1654.0521,-2446.1101 1648.5,-2444.6043 1515.0582,-2408.4141 1475.9561,-2430.8794 1339.5,-2408.6043 1314.9798,-2404.6017 1288.9568,-2399.6646 1263.958,-2394.5717"/>
<polygon fill="#000000" stroke="#000000" points="1264.5628,-2391.1229 1254.0628,-2392.5371 1263.1529,-2397.9794 1264.5628,-2391.1229"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1722,-2393.1058 1349,-2393.1058 1349,-2337.3028 1722,-2337.3028 1722,-2393.1058"/>
<text text-anchor="middle" x="1535.5" y="-2361.7043" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is subsequently refined into various blocks. </text>
</g>
<!-- prose_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.957,-2451.2632C1740.8482,-2449.0308 1735.5117,-2446.7244 1730.5,-2444.6043 1692.4889,-2428.5252 1650.0745,-2411.184 1614.5352,-2396.8218"/>
<polygon fill="#000000" stroke="#000000" points="1615.7636,-2393.5433 1605.1805,-2393.046 1613.1435,-2400.0345 1615.7636,-2393.5433"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1783.5" cy="-2365.2043" rx="43.082" ry="18"/>
<text text-anchor="middle" x="1783.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Array</text>
</g>
<!-- section_7&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1868.9069,-2445.1912C1852.1386,-2429.4871 1827.3332,-2406.2558 1808.7699,-2388.8705"/>
<polygon fill="#000000" stroke="#000000" points="1810.9293,-2386.0977 1801.2379,-2381.8166 1806.1443,-2391.2069 1810.9293,-2386.0977"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1876.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1876.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1885.431,-2444.2841C1883.8177,-2429.9996 1881.5488,-2409.9089 1879.7016,-2393.5528"/>
<polygon fill="#000000" stroke="#000000" points="1883.1599,-2392.9864 1878.5597,-2383.4424 1876.2042,-2393.772 1883.1599,-2392.9864"/>
</g>
<!-- header_21 -->
<g id="node22" class="node">
<title>header_21</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2365.2043" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_8&#45;&gt;header_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;header_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2033.7438,-2444.7397C2022.1481,-2429.6807 2005.4069,-2407.9394 1992.3574,-2390.9924"/>
<polygon fill="#000000" stroke="#000000" points="1994.7908,-2388.4159 1985.9166,-2382.628 1989.2446,-2392.6866 1994.7908,-2388.4159"/>
</g>
<!-- prose_22 -->
<g id="node23" class="node">
<title>prose_22</title>
<ellipse fill="none" stroke="#000000" cx="2068.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2068.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;prose_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2051.4499,-2444.2841C2054.5493,-2429.9091 2058.9163,-2409.6544 2062.4548,-2393.2427"/>
<polygon fill="#000000" stroke="#000000" points="2065.9524,-2393.6264 2064.6387,-2383.1133 2059.1096,-2392.151 2065.9524,-2393.6264"/>
</g>
<!-- section_23 -->
<g id="node24" class="node">
<title>section_23</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2365.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;45</text>
</g>
<!-- section_8&#45;&gt;section_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;section_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2071.3636,-2445.6385C2093.7198,-2429.7444 2127.3113,-2405.8626 2152.0872,-2388.2482"/>
<polygon fill="#000000" stroke="#000000" points="2154.3281,-2390.9495 2160.4502,-2382.3025 2150.272,-2385.2443 2154.3281,-2390.9495"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="2377.5" cy="-2365.2043" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="2377.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for sections</text>
</g>
<!-- section_9&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2565.165,-2447.171C2527.4865,-2430.7141 2467.5807,-2404.549 2425.614,-2386.2191"/>
<polygon fill="#000000" stroke="#000000" points="2426.9823,-2382.9975 2416.4173,-2382.2023 2424.1804,-2389.4123 2426.9823,-2382.9975"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2536.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2536.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2588.7614,-2444.7397C2578.8049,-2429.5872 2564.4029,-2407.669 2553.2378,-2390.6772"/>
<polygon fill="#000000" stroke="#000000" points="2556.1515,-2388.7378 2547.7349,-2382.3025 2550.3014,-2392.5818 2556.1515,-2388.7378"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="2664.5" cy="-2365.2043" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2664.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;63</text>
</g>
<!-- section_9&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2612.2386,-2444.7397C2621.921,-2430.0042 2635.8077,-2408.8704 2646.8331,-2392.0911"/>
<polygon fill="#000000" stroke="#000000" points="2650.0527,-2393.5649 2652.6191,-2383.2856 2644.2026,-2389.7208 2650.0527,-2393.5649"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2365.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;79</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2645.9493,-2449.4685C2707.2984,-2431.7374 2816.4982,-2400.1764 2882.4338,-2381.1196"/>
<polygon fill="#000000" stroke="#000000" points="2883.5989,-2384.4262 2892.2338,-2378.2872 2881.6552,-2377.7014 2883.5989,-2384.4262"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2365.2043" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 80&#45;102</text>
</g>
<!-- section_9&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_9&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2662.9734,-2456.7309C2843.1405,-2439.7924 3363.3526,-2390.8844 3559.992,-2372.3972"/>
<polygon fill="#000000" stroke="#000000" points="3560.3235,-2375.8816 3569.9519,-2371.4609 3559.6682,-2368.9123 3560.3235,-2375.8816"/>
</g>
<!-- header_59 -->
<g id="node60" class="node">
<title>header_59</title>
<ellipse fill="none" stroke="#000000" cx="4524.5" cy="-2365.2043" rx="108.8358" ry="18"/>
<text text-anchor="middle" x="4524.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : addLine(section, line) </text>
</g>
<!-- section_10&#45;&gt;header_59 -->
<g id="edge59" class="edge">
<title>section_10&#45;&gt;header_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4761.1122,-2448.1223C4728.1103,-2437.4797 4682.4129,-2422.5107 4642.5,-2408.6043 4621.3319,-2401.229 4598.1581,-2392.7869 4577.9942,-2385.3206"/>
<polygon fill="#000000" stroke="#000000" points="4578.9523,-2381.9429 4568.3593,-2381.7428 4576.5154,-2388.5051 4578.9523,-2381.9429"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="4683.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4683.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>section_10&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4777.6526,-2445.8875C4761.3945,-2435.9174 4741.084,-2422.5188 4724.5,-2408.6043 4717.5371,-2402.7623 4710.5339,-2395.8304 4704.3348,-2389.2408"/>
<polygon fill="#000000" stroke="#000000" points="4706.8109,-2386.7621 4697.4776,-2381.7481 4701.647,-2391.488 4706.8109,-2386.7621"/>
</g>
<!-- prose_61 -->
<g id="node62" class="node">
<title>prose_61</title>
<ellipse fill="none" stroke="#000000" cx="4765.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4765.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_61 -->
<g id="edge61" class="edge">
<title>section_10&#45;&gt;prose_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4798.7882,-2444.2841C4792.6411,-2429.681 4783.9397,-2409.0099 4776.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="4780.0067,-2390.6451 4772.901,-2382.7863 4773.555,-2393.361 4780.0067,-2390.6451"/>
</g>
<!-- prose_62 -->
<g id="node63" class="node">
<title>prose_62</title>
<ellipse fill="none" stroke="#000000" cx="4847.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4847.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_62 -->
<g id="edge62" class="edge">
<title>section_10&#45;&gt;prose_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4814.2118,-2444.2841C4820.3589,-2429.681 4829.0603,-2409.0099 4836.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="4839.445,-2393.361 4840.099,-2382.7863 4832.9933,-2390.6451 4839.445,-2393.361"/>
</g>
<!-- codeblock_63 -->
<g id="node64" class="node">
<title>codeblock_63</title>
<ellipse fill="none" stroke="#000000" cx="5049.5" cy="-2365.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5049.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;143</text>
</g>
<!-- section_10&#45;&gt;codeblock_63 -->
<g id="edge63" class="edge">
<title>section_10&#45;&gt;codeblock_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4845.2728,-2447.0633C4887.1803,-2430.2658 4954.0938,-2403.4453 4999.8266,-2385.1146"/>
<polygon fill="#000000" stroke="#000000" points="5001.2674,-2388.3078 5009.2473,-2381.3385 4998.663,-2381.8103 5001.2674,-2388.3078"/>
</g>
<!-- section_64 -->
<g id="node65" class="node">
<title>section_64</title>
<ellipse fill="none" stroke="#000000" cx="5735.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5735.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 146&#45;166</text>
</g>
<!-- section_10&#45;&gt;section_64 -->
<g id="edge64" class="edge">
<title>section_10&#45;&gt;section_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4875.9461,-2455.3233C5045.0553,-2437.5933 5477.4272,-2392.2617 5656.2467,-2373.5135"/>
<polygon fill="#000000" stroke="#000000" points="5656.7898,-2376.9759 5666.3703,-2372.4521 5656.0598,-2370.014 5656.7898,-2376.9759"/>
</g>
<!-- section_65 -->
<g id="node66" class="node">
<title>section_65</title>
<ellipse fill="none" stroke="#000000" cx="7571.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7571.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 167&#45;241</text>
</g>
<!-- section_10&#45;&gt;section_65 -->
<g id="edge65" class="edge">
<title>section_10&#45;&gt;section_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4881.5314,-2459.9613C5272.3919,-2446.1928 7073.1761,-2382.7583 7486.6944,-2368.1917"/>
<polygon fill="#000000" stroke="#000000" points="7486.9144,-2371.6862 7496.785,-2367.8362 7486.6679,-2364.6905 7486.9144,-2371.6862"/>
</g>
<!-- header_114 -->
<g id="node115" class="node">
<title>header_114</title>
<ellipse fill="none" stroke="#000000" cx="9068.5" cy="-2365.2043" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="9068.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Blocking</text>
</g>
<!-- section_11&#45;&gt;header_114 -->
<g id="edge114" class="edge">
<title>section_11&#45;&gt;header_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9189.6201,-2445.6218C9173.4675,-2435.0074 9152.2522,-2421.039 9133.5,-2408.6043 9122.9865,-2401.6328 9111.5367,-2394.001 9101.2171,-2387.108"/>
<polygon fill="#000000" stroke="#000000" points="9103.1188,-2384.1692 9092.8599,-2381.5223 9099.229,-2389.989 9103.1188,-2384.1692"/>
</g>
<!-- prose_115 -->
<g id="node116" class="node">
<title>prose_115</title>
<ellipse fill="none" stroke="#000000" cx="9174.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9174.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_115 -->
<g id="edge115" class="edge">
<title>section_11&#45;&gt;prose_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9207.7882,-2444.2841C9201.6411,-2429.681 9192.9397,-2409.0099 9185.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="9189.0067,-2390.6451 9181.901,-2382.7863 9182.555,-2393.361 9189.0067,-2390.6451"/>
</g>
<!-- prose_116 -->
<g id="node117" class="node">
<title>prose_116</title>
<ellipse fill="none" stroke="#000000" cx="9256.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9256.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_116 -->
<g id="edge116" class="edge">
<title>section_11&#45;&gt;prose_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9223.2118,-2444.2841C9229.3589,-2429.681 9238.0603,-2409.0099 9245.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="9248.445,-2393.361 9249.099,-2382.7863 9241.9933,-2390.6451 9248.445,-2393.361"/>
</g>
<!-- prose_117 -->
<g id="node118" class="node">
<title>prose_117</title>
<ellipse fill="none" stroke="#000000" cx="9514.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9514.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_117 -->
<g id="edge117" class="edge">
<title>section_11&#45;&gt;prose_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9260.2633,-2448.0226C9319.156,-2428.8381 9421.6261,-2395.4582 9476.7788,-2377.4921"/>
<polygon fill="#000000" stroke="#000000" points="9478.081,-2380.749 9486.5052,-2374.3237 9475.9129,-2374.0932 9478.081,-2380.749"/>
</g>
<!-- section_118 -->
<g id="node119" class="node">
<title>section_118</title>
<ellipse fill="none" stroke="#000000" cx="10001.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10001.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 218&#45;223</text>
</g>
<!-- section_11&#45;&gt;section_118 -->
<g id="edge118" class="edge">
<title>section_11&#45;&gt;section_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9282.5139,-2454.3001C9427.5853,-2436.323 9770.0308,-2393.8876 9924.0628,-2374.8002"/>
<polygon fill="#000000" stroke="#000000" points="9924.8837,-2378.2254 9934.3773,-2373.5221 9924.0228,-2371.2785 9924.8837,-2378.2254"/>
</g>
<!-- header_125 -->
<g id="node126" class="node">
<title>header_125</title>
<ellipse fill="none" stroke="#000000" cx="10298.5" cy="-2365.2043" rx="81.2629" ry="18"/>
<text text-anchor="middle" x="10298.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section:weed()</text>
</g>
<!-- section_12&#45;&gt;header_125 -->
<g id="edge125" class="edge">
<title>section_12&#45;&gt;header_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10352.3946,-2444.7397C10342.3171,-2429.8678 10327.8234,-2408.4785 10316.4039,-2391.6262"/>
<polygon fill="#000000" stroke="#000000" points="10319.2593,-2389.6006 10310.7522,-2383.2856 10313.4644,-2393.5274 10319.2593,-2389.6006"/>
</g>
<!-- prose_126 -->
<g id="node127" class="node">
<title>prose_126</title>
<ellipse fill="none" stroke="#000000" cx="10430.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10430.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_126 -->
<g id="edge126" class="edge">
<title>section_12&#45;&gt;prose_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10376.6054,-2444.7397C10386.873,-2429.5872 10401.7251,-2407.669 10413.2391,-2390.6772"/>
<polygon fill="#000000" stroke="#000000" points="10416.2018,-2392.5443 10418.914,-2382.3025 10410.4069,-2388.6175 10416.2018,-2392.5443"/>
</g>
<!-- codeblock_127 -->
<g id="node128" class="node">
<title>codeblock_127</title>
<ellipse fill="none" stroke="#000000" cx="10728.5" cy="-2365.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10728.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 366&#45;377</text>
</g>
<!-- section_12&#45;&gt;codeblock_127 -->
<g id="edge127" class="edge">
<title>section_12&#45;&gt;codeblock_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10414.7305,-2449.1635C10480.0173,-2431.6939 10594.0623,-2401.1775 10665.1989,-2382.1426"/>
<polygon fill="#000000" stroke="#000000" points="10666.1868,-2385.5014 10674.9422,-2379.5354 10664.3773,-2378.7393 10666.1868,-2385.5014"/>
</g>
<!-- header_130 -->
<g id="node131" class="node">
<title>header_130</title>
<ellipse fill="none" stroke="#000000" cx="11536.5" cy="-2365.2043" rx="110.7653" ry="18"/>
<text text-anchor="middle" x="11536.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section(header, linum)</text>
</g>
<!-- section_13&#45;&gt;header_130 -->
<g id="edge130" class="edge">
<title>section_13&#45;&gt;header_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11704.6897,-2446.3018C11670.8325,-2429.9765 11618.5398,-2404.7621 11581.2572,-2386.7852"/>
<polygon fill="#000000" stroke="#000000" points="11582.65,-2383.5713 11572.1223,-2382.3806 11579.6097,-2389.8766 11582.65,-2383.5713"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="11697.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11697.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_13&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11730.7882,-2444.2841C11724.6411,-2429.681 11715.9397,-2409.0099 11708.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="11712.0067,-2390.6451 11704.901,-2382.7863 11705.555,-2393.361 11712.0067,-2390.6451"/>
</g>
<!-- prose_132 -->
<g id="node133" class="node">
<title>prose_132</title>
<ellipse fill="none" stroke="#000000" cx="11779.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11779.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_132 -->
<g id="edge132" class="edge">
<title>section_13&#45;&gt;prose_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11746.2118,-2444.2841C11752.3589,-2429.681 11761.0603,-2409.0099 11768.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="11771.445,-2393.361 11772.099,-2382.7863 11764.9933,-2390.6451 11771.445,-2393.361"/>
</g>
<!-- prose_133 -->
<g id="node134" class="node">
<title>prose_133</title>
<ellipse fill="none" stroke="#000000" cx="12005.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12005.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_133 -->
<g id="edge133" class="edge">
<title>section_13&#45;&gt;prose_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11779.9258,-2447.4925C11831.5878,-2428.6465 11919.1173,-2396.7162 11968.5825,-2378.6716"/>
<polygon fill="#000000" stroke="#000000" points="11970.0449,-2381.8638 11978.2398,-2375.1487 11967.6459,-2375.2877 11970.0449,-2381.8638"/>
</g>
<!-- codeblock_134 -->
<g id="node135" class="node">
<title>codeblock_134</title>
<ellipse fill="none" stroke="#000000" cx="12357.5" cy="-2365.2043" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="12357.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 391&#45;411</text>
</g>
<!-- section_13&#45;&gt;codeblock_134 -->
<g id="edge134" class="edge">
<title>section_13&#45;&gt;codeblock_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11801.5469,-2452.6839C11914.993,-2434.8331 12153.2791,-2397.3386 12277.8278,-2377.7408"/>
<polygon fill="#000000" stroke="#000000" points="12278.7226,-2381.1431 12288.057,-2376.1312 12277.6345,-2374.2282 12278.7226,-2381.1431"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1373.5,-2178.5043 895.5,-2178.5043 895.5,-2091.9037 1373.5,-2091.9037 1373.5,-2178.5043"/>
<text text-anchor="middle" x="1134.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;The array portion of a section starts at [1] with a header. The</text>
<text text-anchor="middle" x="1134.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> rest consists, optionally, of nodes of types Block and Section.</text>
</g>
<!-- prose_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1865.3129,-2348.2421C1858.0364,-2338.7245 1847.6535,-2327.6237 1835.5,-2321.8043 1653.3377,-2234.5803 1574.685,-2347.9012 1382.5,-2285.8043 1314.0801,-2263.6971 1244.8563,-2219.4212 1196.9971,-2184.5717"/>
<polygon fill="#000000" stroke="#000000" points="1199.0394,-2181.7291 1188.9097,-2178.6242 1194.8922,-2187.3684 1199.0394,-2181.7291"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1877,-2193.8048 1392,-2193.8048 1392,-2076.6032 1877,-2076.6032 1877,-2193.8048"/>
<text text-anchor="middle" x="1634.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : The header for the section.</text>
<text text-anchor="middle" x="1634.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level : The header level, lifted from the header for ease of use</text>
<text text-anchor="middle" x="1634.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines : An array of the lines owned by the section. Note that </text>
<text text-anchor="middle" x="1634.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this doesn&#39;t include the header. </text>
</g>
<!-- prose_22&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_22&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2056.2274,-2348.1201C2048.8639,-2339.0452 2038.7559,-2328.4281 2027.5,-2321.8043 1971.7586,-2289.0018 1946.2135,-2310.6521 1886.5,-2285.8043 1831.1266,-2262.7624 1773.4133,-2229.0824 1727.2116,-2199.4131"/>
<polygon fill="#000000" stroke="#000000" points="1729.0197,-2196.4143 1718.7218,-2193.9233 1725.2186,-2202.2925 1729.0197,-2196.4143"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="1950.5" cy="-2135.204" rx="55.1697" ry="18"/>
<text text-anchor="middle" x="1950.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Includes</text>
</g>
<!-- section_23&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_23&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2158.3268,-2348.6854C2144.1665,-2340.1023 2126.2004,-2329.7722 2109.5,-2321.8043 2069.1233,-2302.5402 2047.7864,-2316.7715 2015.5,-2285.8043 1980.6356,-2252.3644 1963.435,-2197.1119 1955.7976,-2163.6394"/>
<polygon fill="#000000" stroke="#000000" points="1959.1622,-2162.6365 1953.6437,-2153.5923 1952.3177,-2164.1038 1959.1622,-2162.6365"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2056.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2056.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_23&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_23&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2159.8707,-2348.4347C2140.4775,-2333.9937 2114.1846,-2311.4655 2098.5,-2285.8043 2074.9715,-2247.3097 2064.2906,-2195.3171 2059.6926,-2163.581"/>
<polygon fill="#000000" stroke="#000000" points="2063.1579,-2163.0882 2058.3567,-2153.6436 2056.2203,-2164.0208 2063.1579,-2163.0882"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;43</text>
</g>
<!-- section_23&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_23&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.5,-2347.1566C2184.5,-2307.283 2184.5,-2211.4294 2184.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="2188.0001,-2163.4861 2184.5,-2153.4862 2181.0001,-2163.4862 2188.0001,-2163.4861"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1970.5,-1839.4035 1916.5,-1839.4035 1916.5,-1803.4035 1970.5,-1803.4035 1970.5,-1839.4035"/>
</g>
<!-- prose_26&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_26&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2054.3743,-2116.9238C2050.3136,-2087.4015 2039.5228,-2028.1408 2014.5,-1984.6037 2003.3801,-1965.2563 1990.6569,-1967.9298 1979.5,-1948.6037 1961.4687,-1917.3698 1952.0094,-1876.553 1947.3925,-1849.6865"/>
<polygon fill="#000000" stroke="#000000" points="1950.843,-1849.0982 1945.8012,-1839.7799 1943.9316,-1850.2084 1950.843,-1849.0982"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2298.5,-1903.2038 1988.5,-1903.2038 1988.5,-1739.6031 2298.5,-1739.6031 2298.5,-1903.2038"/>
<text text-anchor="middle" x="2143.5" y="-1888.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1825.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1793.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Header = require &quot;grym/header&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1778.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Block = require &quot;grym/block&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1763.1034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2143.5" y="-1747.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_27&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.1184,-2116.9764C2177.042,-2078.1232 2164.8583,-1984.873 2155.5222,-1913.4175"/>
<polygon fill="#000000" stroke="#000000" points="2158.9909,-1912.9496 2154.2248,-1903.4874 2152.0499,-1913.8566 2158.9909,-1912.9496"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2333.5,-2153.204 2279.5,-2153.204 2279.5,-2117.204 2333.5,-2117.204 2333.5,-2153.204"/>
</g>
<!-- prose_31&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_31&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2524.6232,-2348.4698C2517.2476,-2339.275 2506.9976,-2328.4249 2495.5,-2321.8043 2434.9623,-2286.9448 2391.9839,-2335.1129 2342.5,-2285.8043 2310.0243,-2253.4437 2304.8414,-2197.3628 2304.9999,-2163.5274"/>
<polygon fill="#000000" stroke="#000000" points="2308.5021,-2163.4526 2305.2112,-2153.3818 2301.5036,-2163.3067 2308.5021,-2163.4526"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2689.5,-2247.5045 2351.5,-2247.5045 2351.5,-2022.9035 2689.5,-2022.9035 2689.5,-2247.5045"/>
<text text-anchor="middle" x="2520.5" y="-2232.4042" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="2520.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.__tostring(section)</text>
<text text-anchor="middle" x="2520.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(section) do</text>
<text text-anchor="middle" x="2520.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2520.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (repr ~= &quot;&quot; and repr ~= &quot;\n&quot;) then</text>
<text text-anchor="middle" x="2520.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot;repr: &quot; .. repr .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="2520.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2046.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2520.5" y="-2031.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_32&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2653.2006,-2347.1566C2640.464,-2326.8134 2618.6044,-2291.8987 2596.2606,-2256.2106"/>
<polygon fill="#000000" stroke="#000000" points="2599.155,-2254.2381 2590.8818,-2247.6196 2593.2219,-2257.9528 2599.155,-2254.2381"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="2797.5" cy="-2135.204" rx="90.4762" ry="18"/>
<text text-anchor="middle" x="2797.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : dotLabel(section)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2926.5144,-2347.1566C2901.9792,-2306.8487 2842.6228,-2209.3344 2813.7774,-2161.9455"/>
<polygon fill="#000000" stroke="#000000" points="2816.6237,-2159.8901 2808.4345,-2153.1679 2810.6443,-2163.5297 2816.6237,-2159.8901"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2937.5,-2347.1566C2937.5,-2307.283 2937.5,-2211.4294 2937.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="2941.0001,-2163.4861 2937.5,-2153.4862 2934.0001,-2163.4862 2941.0001,-2163.4861"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3019.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3019.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2948.0665,-2347.4193C2957.0954,-2331.6506 2969.9456,-2307.7793 2978.5,-2285.8043 2994.6795,-2244.2416 3007.0024,-2193.8692 3013.7397,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3017.2054,-2163.7278 3015.8869,-2153.2153 3010.3619,-2162.2555 3017.2054,-2163.7278"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3147.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3147.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;77</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2970.317,-2349.5634C2997.0063,-2335.6332 3034.3902,-2313.2361 3060.5,-2285.8043 3095.7793,-2248.7386 3122.4755,-2194.7498 3136.492,-2162.4869"/>
<polygon fill="#000000" stroke="#000000" points="3139.7424,-2163.787 3140.4304,-2153.2145 3133.2995,-2161.0504 3139.7424,-2163.787"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="3399.5" cy="-2135.204" rx="104.4491" ry="18"/>
<text text-anchor="middle" x="3399.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toMarkdown(section)</text>
</g>
<!-- section_34&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_34&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3605.0736,-2348.9771C3578.8722,-2334.5398 3541.4469,-2311.7372 3513.5,-2285.8043 3472.8073,-2248.044 3436.0816,-2194.3671 3415.8711,-2162.337"/>
<polygon fill="#000000" stroke="#000000" points="3418.638,-2160.159 3410.3808,-2153.5206 3412.696,-2163.8594 3418.638,-2160.159"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="3554.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3554.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_34&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3625.7548,-2347.107C3616.7357,-2331.3366 3603.9982,-2307.6347 3595.5,-2285.8043 3579.3205,-2244.2416 3566.9976,-2193.8692 3560.2603,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3563.6381,-2162.2555 3558.1131,-2153.2153 3556.7946,-2163.7278 3563.6381,-2162.2555"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_34&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636.5,-2347.1566C3636.5,-2307.283 3636.5,-2211.4294 3636.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="3640.0001,-2163.4861 3636.5,-2153.4862 3633.0001,-2163.4862 3640.0001,-2163.4861"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3718.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3718.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_34&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3647.2452,-2347.107C3656.2643,-2331.3366 3669.0018,-2307.6347 3677.5,-2285.8043 3693.6795,-2244.2416 3706.0024,-2193.8692 3712.7397,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3716.2054,-2163.7278 3714.8869,-2153.2153 3709.3619,-2162.2555 3716.2054,-2163.7278"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="3851.5" cy="-2135.204" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3851.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;101</text>
</g>
<!-- section_34&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_34&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3669.4097,-2349.2529C3695.9771,-2335.213 3733.1444,-2312.8228 3759.5,-2285.8043 3795.7561,-2248.6362 3824.327,-2194.6806 3839.4992,-2162.4518"/>
<polygon fill="#000000" stroke="#000000" points="3842.761,-2163.7364 3843.7714,-2153.1899 3836.4046,-2160.8044 3842.761,-2163.7364"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="4027.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4027.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 103&#45;124</text>
</g>
<!-- section_34&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_34&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3695.9231,-2355.4712C3773.5654,-2341.8068 3904.1552,-2315.2834 3942.5,-2285.8043 3983.3761,-2254.3791 4007.6617,-2197.3428 4019.2207,-2163.1991"/>
<polygon fill="#000000" stroke="#000000" points="4022.6458,-2163.9835 4022.4037,-2153.3915 4015.9876,-2161.8227 4022.6458,-2163.9835"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2564,-1849.305 2317,-1849.305 2317,-1793.502 2564,-1793.502 2564,-1849.305"/>
<text text-anchor="middle" x="2440.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Produces a label for a dotfile.</text>
</g>
<!-- prose_38&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_38&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2938.5297,-2117.0104C2939.2544,-2084.8212 2935.6173,-2018.0786 2896.5,-1984.6037 2841.4594,-1937.5024 2638.0809,-1979.3794 2572.5,-1948.6037 2528.7844,-1928.0889 2490.5177,-1887.2064 2466.5983,-1857.3076"/>
<polygon fill="#000000" stroke="#000000" points="2469.1622,-1854.9049 2460.2396,-1849.1919 2463.652,-1859.2222 2469.1622,-1854.9049"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2829,-1841.3055 2582,-1841.3055 2582,-1801.5014 2829,-1801.5014 2829,-1841.3055"/>
<text text-anchor="middle" x="2705.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return : string in dot format.</text>
</g>
<!-- prose_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3020.0452,-2117.0392C3019.9525,-2085.495 3014.9993,-2020.53 2978.5,-1984.6037 2932.4061,-1939.2334 2893.996,-1980.0889 2837.5,-1948.6037 2792.2093,-1923.3632 2751.1041,-1878.7323 2727.1999,-1849.6135"/>
<polygon fill="#000000" stroke="#000000" points="2729.6393,-1847.0629 2720.6364,-1841.4773 2724.1911,-1851.458 2729.6393,-1847.0629"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3248,-1856.0047 2847,-1856.0047 2847,-1786.8022 3248,-1786.8022 3248,-1856.0047"/>
<text text-anchor="middle" x="3047.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(section)</text>
<text text-anchor="middle" x="3047.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;section: &quot; .. tostring(section.line_first) </text>
<text text-anchor="middle" x="3047.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(section.line_last)</text>
<text text-anchor="middle" x="3047.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_40&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3141.6913,-2116.9764C3126.2759,-2068.6027 3083.9894,-1935.9074 3061.6915,-1865.9365"/>
<polygon fill="#000000" stroke="#000000" points="3064.9234,-1864.5508 3058.5523,-1856.0856 3058.2539,-1866.6762 3064.9234,-1864.5508"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3541,-1849.305 3266,-1849.305 3266,-1793.502 3541,-1793.502 3541,-1849.305"/>
<text text-anchor="middle" x="3403.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Translates the Section to markdown.</text>
</g>
<!-- prose_45&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>prose_45&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3551.3472,-2116.9378C3545.9192,-2087.9354 3533.339,-2029.9927 3512.5,-1984.6037 3490.9674,-1937.7038 3456.7581,-1889.1714 3432.4104,-1857.3561"/>
<polygon fill="#000000" stroke="#000000" points="3435.0211,-1855.0107 3426.1354,-1849.2405 3429.4834,-1859.2925 3435.0211,-1855.0107"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3736,-1841.3055 3559,-1841.3055 3559,-1801.5014 3736,-1801.5014 3736,-1841.3055"/>
<text text-anchor="middle" x="3647.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the Section.</text>
</g>
<!-- prose_46&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>prose_46&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3637.139,-2116.9764C3638.9595,-2065.0423 3644.1869,-1915.9175 3646.4427,-1851.5647"/>
<polygon fill="#000000" stroke="#000000" points="3649.9506,-1851.3989 3646.8032,-1841.2823 3642.9549,-1851.1536 3649.9506,-1851.3989"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3987,-1841.3055 3754,-1841.3055 3754,-1801.5014 3987,-1801.5014 3987,-1841.3055"/>
<text text-anchor="middle" x="3870.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: A Markdown string. &#160;</text>
</g>
<!-- prose_47&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_47&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3721.6301,-2116.9273C3727.0269,-2087.9106 3739.5652,-2029.9486 3760.5,-1984.6037 3784.1652,-1933.3449 3823.1073,-1880.2662 3847.7465,-1849.0715"/>
<polygon fill="#000000" stroke="#000000" points="3850.4865,-1851.2493 3853.9882,-1841.2499 3845.015,-1846.8831 3850.4865,-1851.2493"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4434,-1918.3042 4005,-1918.3042 4005,-1724.5027 4434,-1724.5027 4434,-1918.3042"/>
<text text-anchor="middle" x="4219.5" y="-1902.9036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.toMarkdown(section)</text>
<text text-anchor="middle" x="4219.5" y="-1887.5036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4219.5" y="-1872.1036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(section) do</text>
<text text-anchor="middle" x="4219.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="4219.5" y="-1841.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="4219.5" y="-1825.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="4219.5" y="-1810.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method in &quot; .. node.id)</text>
<text text-anchor="middle" x="4219.5" y="-1795.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4219.5" y="-1779.7034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4219.5" y="-1748.3034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4219.5" y="-1732.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_48&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3859.055,-2117.0454C3872.4147,-2086.6431 3902.6966,-2024.8243 3943.5,-1984.6037 3952.8537,-1975.3836 3992.8212,-1950.7815 4039.5594,-1923.3918"/>
<polygon fill="#000000" stroke="#000000" points="4041.4922,-1926.3161 4048.3594,-1918.2482 4037.9598,-1920.2728 4041.4922,-1926.3161"/>
</g>
<!-- header_54 -->
<g id="node55" class="node">
<title>header_54</title>
<ellipse fill="none" stroke="#000000" cx="4502.5" cy="-1821.4035" rx="50.8" ry="18"/>
<text text-anchor="middle" x="4502.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : asserts</text>
</g>
<!-- section_49&#45;&gt;header_54 -->
<g id="edge54" class="edge">
<title>section_49&#45;&gt;header_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.7769,-2117.1159C4040.5348,-2084.4749 4063.8325,-2016.1875 4111.5,-1984.6037 4234.8575,-1902.8688 4321.9938,-2034.487 4442.5,-1948.6037 4475.2275,-1925.2792 4490.6737,-1879.3657 4497.5317,-1849.552"/>
<polygon fill="#000000" stroke="#000000" points="4500.9614,-1850.2501 4499.6135,-1839.7413 4494.1139,-1848.797 4500.9614,-1850.2501"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="4603.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4603.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_49&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.6903,-2116.9831C4040.3073,-2084.1261 4063.3845,-2015.5007 4111.5,-1984.6037 4196.1004,-1930.2782 4483.6513,-2010.9846 4562.5,-1948.6037 4592.319,-1925.0125 4600.7623,-1879.501 4602.9776,-1849.8003"/>
<polygon fill="#000000" stroke="#000000" points="4606.4817,-1849.8214 4603.54,-1839.6431 4599.4924,-1849.4343 4606.4817,-1849.8214"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="4784.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4784.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 105&#45;122</text>
</g>
<!-- section_49&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>section_49&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.587,-2117.1842C4040.0917,-2084.3369 4063.0703,-2015.2864 4111.5,-1984.6037 4211.7823,-1921.0698 4535.2721,-1995.1049 4644.5,-1948.6037 4695.8708,-1926.7338 4740.7569,-1877.8096 4765.114,-1847.4118"/>
<polygon fill="#000000" stroke="#000000" points="4768.007,-1849.3946 4771.4279,-1839.3672 4762.5005,-1845.0728 4768.007,-1849.3946"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4596.5,-847.1016 4542.5,-847.1016 4542.5,-811.1016 4596.5,-811.1016 4596.5,-847.1016"/>
</g>
<!-- prose_55&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_55&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4602.8808,-1803.3331C4598.7759,-1683.5304 4575.4961,-1004.1008 4570.4605,-857.1337"/>
<polygon fill="#000000" stroke="#000000" points="4573.9578,-856.9918 4570.1173,-847.1176 4566.9619,-857.2316 4573.9578,-856.9918"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5022.5,-956.5024 4614.5,-956.5024 4614.5,-701.7008 5022.5,-701.7008 5022.5,-956.5024"/>
<text text-anchor="middle" x="4818.5" y="-941.1019" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.check(section)</text>
<text text-anchor="middle" x="4818.5" y="-925.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="4818.5" y="-910.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (i == 1) then</text>
<text text-anchor="middle" x="4818.5" y="-894.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.header then</text>
<text text-anchor="middle" x="4818.5" y="-879.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;header&quot;)</text>
<text text-anchor="middle" x="4818.5" y="-864.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4818.5" y="-848.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4818.5" y="-833.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;section&quot; or v.id == &quot;block&quot;)</text>
<text text-anchor="middle" x="4818.5" y="-817.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4818.5" y="-802.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4818.5" y="-787.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.level)</text>
<text text-anchor="middle" x="4818.5" y="-771.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id)</text>
<text text-anchor="middle" x="4818.5" y="-756.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.lines)</text>
<text text-anchor="middle" x="4818.5" y="-740.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_first)</text>
<text text-anchor="middle" x="4818.5" y="-725.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_last)</text>
<text text-anchor="middle" x="4818.5" y="-710.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_56&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4785.1192,-1803.3331C4788.5569,-1703.0028 4805.4428,-1210.1811 4813.7988,-966.3072"/>
<polygon fill="#000000" stroke="#000000" points="4817.2967,-966.4251 4814.1413,-956.3111 4810.3008,-966.1853 4817.2967,-966.4251"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4304.5,-2163.1055 4120.5,-2163.1055 4120.5,-2107.3025 4304.5,-2107.3025 4304.5,-2163.1055"/>
<text text-anchor="middle" x="4212.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Add a line to a section.</text>
</g>
<!-- prose_60&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>prose_60&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4671.9101,-2347.9344C4664.6301,-2338.5611 4654.3801,-2327.7111 4642.5,-2321.8043 4510.7872,-2256.3162 4439.3219,-2362 4313.5,-2285.8043 4270.6711,-2259.8678 4242.075,-2208.0294 4226.5579,-2172.4846"/>
<polygon fill="#000000" stroke="#000000" points="4229.6378,-2170.7805 4222.5271,-2162.9263 4223.1879,-2173.5005 4229.6378,-2170.7805"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4744.5,-2193.6049 4322.5,-2193.6049 4322.5,-2076.8031 4744.5,-2076.8031 4744.5,-2193.6049"/>
<text text-anchor="middle" x="4533.5" y="-2162.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">These lines are later translated into blocks, and when the</text>
<text text-anchor="middle" x="4533.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">parser is mature, =section.line= will be set to nil before</text>
<text text-anchor="middle" x="4533.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000">the Doc is returned. &#160;</text>
<text text-anchor="middle" x="4533.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4533.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the section</text>
<text text-anchor="middle" x="4533.5" y="-2085.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; line: the line</text>
</g>
<!-- prose_61&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_61&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4750.4646,-2348.9815C4742.775,-2340.7634 4733.2211,-2330.673 4724.5,-2321.8043 4684.2764,-2280.9001 4638.3091,-2235.9383 4601.5503,-2200.4001"/>
<polygon fill="#000000" stroke="#000000" points="4603.9501,-2197.8519 4594.3258,-2193.4221 4599.087,-2202.8868 4603.9501,-2197.8519"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="4932.5,-2155.1061 4762.5,-2155.1061 4762.5,-2115.3019 4932.5,-2115.3019 4932.5,-2155.1061"/>
<text text-anchor="middle" x="4847.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : the section</text>
</g>
<!-- prose_62&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>prose_62&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4847.5,-2347.1566C4847.5,-2307.7753 4847.5,-2213.7876 4847.5,-2165.2919"/>
<polygon fill="#000000" stroke="#000000" points="4851.0001,-2165.1126 4847.5,-2155.1126 4844.0001,-2165.1126 4851.0001,-2165.1126"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="5274.5,-2169.8053 4950.5,-2169.8053 4950.5,-2100.6027 5274.5,-2100.6027 5274.5,-2169.8053"/>
<text text-anchor="middle" x="5112.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addLine(section, line)</text>
<text text-anchor="middle" x="5112.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines[#section.lines + 1] = line</text>
<text text-anchor="middle" x="5112.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5112.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5054.4435,-2347.1566C5064.2334,-2311.4156 5086.3433,-2230.6969 5100.2771,-2179.8273"/>
<polygon fill="#000000" stroke="#000000" points="5103.6825,-2180.643 5102.9488,-2170.0736 5096.9312,-2178.7937 5103.6825,-2180.643"/>
</g>
<!-- header_70 -->
<g id="node71" class="node">
<title>header_70</title>
<ellipse fill="none" stroke="#000000" cx="5468.5" cy="-2135.204" rx="175.5244" ry="18"/>
<text text-anchor="middle" x="5468.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : addSection(section, newsection, linum)</text>
</g>
<!-- section_64&#45;&gt;header_70 -->
<g id="edge70" class="edge">
<title>section_64&#45;&gt;header_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5714.9923,-2347.5385C5667.8356,-2306.9165 5551.5871,-2206.7773 5497.2989,-2160.012"/>
<polygon fill="#000000" stroke="#000000" points="5499.3067,-2157.1221 5489.4458,-2153.2472 5494.738,-2162.4257 5499.3067,-2157.1221"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="5694.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5694.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_64&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5732.2828,-2347.1566C5725.1574,-2307.1846 5708.0035,-2210.9557 5699.48,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="5702.903,-2162.3984 5697.7023,-2153.1679 5696.0116,-2163.627 5702.903,-2162.3984"/>
</g>
<!-- prose_72 -->
<g id="node73" class="node">
<title>prose_72</title>
<ellipse fill="none" stroke="#000000" cx="5776.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5776.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_72 -->
<g id="edge72" class="edge">
<title>section_64&#45;&gt;prose_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.7172,-2347.1566C5745.8426,-2307.1846 5762.9965,-2210.9557 5771.52,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="5774.9884,-2163.627 5773.2977,-2153.1679 5768.097,-2162.3984 5774.9884,-2163.627"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5858.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5858.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_64&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5759.3791,-2347.9188C5777.844,-2333.3414 5802.6821,-2310.8838 5817.5,-2285.8043 5840.3109,-2247.1964 5850.7633,-2195.5705 5855.303,-2163.8908"/>
<polygon fill="#000000" stroke="#000000" points="5858.8264,-2163.9448 5856.6727,-2153.5712 5851.8873,-2163.0238 5858.8264,-2163.9448"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="5996.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5996.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 156&#45;164</text>
</g>
<!-- section_64&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_64&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5781.1648,-2350.7824C5816.4428,-2337.9419 5864.9224,-2316.4221 5899.5,-2285.8043 5939.1696,-2250.6776 5969.0007,-2195.6016 5984.5181,-2162.6884"/>
<polygon fill="#000000" stroke="#000000" points="5987.8687,-2163.7796 5988.8694,-2153.2321 5981.5096,-2160.8535 5987.8687,-2163.7796"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="6984.5" cy="-2135.204" rx="137.8106" ry="18"/>
<text text-anchor="middle" x="6984.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Helper Functions for Blocking</text>
</g>
<!-- section_65&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_65&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7502.069,-2357.8906C7394.8282,-2345.7286 7194.6622,-2319.3333 7131.5,-2285.8043 7074.8257,-2255.7193 7026.7305,-2196.0383 7002.1149,-2161.5254"/>
<polygon fill="#000000" stroke="#000000" points="7004.9757,-2159.5089 6996.3716,-2153.3265 6999.2424,-2163.5251 7004.9757,-2159.5089"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="7172.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7172.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_65&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7501.7508,-2358.1882C7409.8892,-2347.5585 7255.2173,-2324.4139 7214.5,-2285.8043 7180.8202,-2253.8679 7173.3946,-2197.4045 7172.1767,-2163.428"/>
<polygon fill="#000000" stroke="#000000" points="7175.6725,-2163.1747 7171.974,-2153.2464 7168.6739,-2163.3141 7175.6725,-2163.1747"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="7310.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7310.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 171&#45;175</text>
</g>
<!-- section_65&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_65&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7525.8352,-2350.7824C7490.5572,-2337.9419 7442.0776,-2316.4221 7407.5,-2285.8043 7367.8304,-2250.6776 7337.9993,-2195.6016 7322.4819,-2162.6884"/>
<polygon fill="#000000" stroke="#000000" points="7325.4904,-2160.8535 7318.1306,-2153.2321 7319.1313,-2163.7796 7325.4904,-2160.8535"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="7448.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7448.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_65&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7547.6209,-2347.9188C7529.156,-2333.3414 7504.3179,-2310.8838 7489.5,-2285.8043 7466.6891,-2247.1964 7456.2367,-2195.5705 7451.697,-2163.8908"/>
<polygon fill="#000000" stroke="#000000" points="7455.1127,-2163.0238 7450.3273,-2153.5712 7448.1736,-2163.9448 7455.1127,-2163.0238"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="7530.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7530.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_65&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7568.2828,-2347.1566C7561.1574,-2307.1846 7544.0035,-2210.9557 7535.48,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="7538.903,-2162.3984 7533.7023,-2153.1679 7532.0116,-2163.627 7538.903,-2162.3984"/>
</g>
<!-- prose_84 -->
<g id="node85" class="node">
<title>prose_84</title>
<ellipse fill="none" stroke="#000000" cx="7612.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7612.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_84 -->
<g id="edge84" class="edge">
<title>section_65&#45;&gt;prose_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7574.7172,-2347.1566C7581.8426,-2307.1846 7598.9965,-2210.9557 7607.52,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="7610.9884,-2163.627 7609.2977,-2153.1679 7604.097,-2162.3984 7610.9884,-2163.627"/>
</g>
<!-- codeblock_85 -->
<g id="node86" class="node">
<title>codeblock_85</title>
<ellipse fill="none" stroke="#000000" cx="7851.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7851.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 185&#45;202</text>
</g>
<!-- section_65&#45;&gt;codeblock_85 -->
<g id="edge85" class="edge">
<title>section_65&#45;&gt;codeblock_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7592.5455,-2347.9169C7642.0034,-2307.2907 7765.7165,-2205.6691 7822.357,-2159.1429"/>
<polygon fill="#000000" stroke="#000000" points="7824.7046,-2161.744 7830.2103,-2152.692 7820.2614,-2156.3349 7824.7046,-2161.744"/>
</g>
<!-- section_86 -->
<g id="node87" class="node">
<title>section_86</title>
<ellipse fill="none" stroke="#000000" cx="8162.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8162.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 224&#45;229</text>
</g>
<!-- section_65&#45;&gt;section_86 -->
<g id="edge86" class="edge">
<title>section_65&#45;&gt;section_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7642.3292,-2358.8157C7719.8972,-2349.8928 7846.6744,-2329.5754 7947.5,-2285.8043 8022.0422,-2253.4435 8097.0535,-2193.0962 8135.7141,-2159.4511"/>
<polygon fill="#000000" stroke="#000000" points="8138.1984,-2161.9274 8143.3988,-2152.6966 8133.5771,-2156.6696 8138.1984,-2161.9274"/>
</g>
<!-- section_87 -->
<g id="node88" class="node">
<title>section_87</title>
<ellipse fill="none" stroke="#000000" cx="8375.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8375.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 230&#45;234</text>
</g>
<!-- section_65&#45;&gt;section_87 -->
<g id="edge87" class="edge">
<title>section_65&#45;&gt;section_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7646.7753,-2363.189C7800.3793,-2357.9817 8144.0694,-2340.4126 8246.5,-2285.8043 8299.9034,-2257.3336 8340.7922,-2196.9504 8361.1721,-2161.9072"/>
<polygon fill="#000000" stroke="#000000" points="8364.2444,-2163.5847 8366.1386,-2153.1605 8358.1573,-2160.1283 8364.2444,-2163.5847"/>
</g>
<!-- section_88 -->
<g id="node89" class="node">
<title>section_88</title>
<ellipse fill="none" stroke="#000000" cx="8590.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8590.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 235&#45;241</text>
</g>
<!-- section_65&#45;&gt;section_88 -->
<g id="edge88" class="edge">
<title>section_65&#45;&gt;section_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7645.8887,-2361.7367C7846.3994,-2351.9446 8387.8151,-2322.4013 8459.5,-2285.8043 8513.7559,-2258.1052 8555.2695,-2197.4339 8575.9572,-2162.1344"/>
<polygon fill="#000000" stroke="#000000" points="8579.0716,-2163.7388 8580.9985,-2153.3206 8572.9953,-2160.2632 8579.0716,-2163.7388"/>
</g>
<!-- section_89 -->
<g id="node90" class="node">
<title>section_89</title>
<ellipse fill="none" stroke="#000000" cx="8812.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8812.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 242&#45;360</text>
</g>
<!-- section_65&#45;&gt;section_89 -->
<g id="edge89" class="edge">
<title>section_65&#45;&gt;section_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7646.6143,-2363.0037C7880.0011,-2355.7233 8582.4636,-2330.3136 8674.5,-2285.8043 8730.7687,-2258.5925 8774.97,-2197.4655 8797.0488,-2162.0214"/>
<polygon fill="#000000" stroke="#000000" points="8800.2222,-2163.5393 8802.4307,-2153.1771 8794.2423,-2159.9004 8800.2222,-2163.5393"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="5179.5,-1849.305 4911.5,-1849.305 4911.5,-1793.502 5179.5,-1793.502 5179.5,-1849.305"/>
<text text-anchor="middle" x="5045.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Adds a section to the host section</text>
</g>
<!-- prose_71&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>prose_71&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5695.6329,-2117.1343C5696.5572,-2084.8352 5693.2751,-2017.5072 5653.5,-1984.6037 5573.6407,-1918.5411 5283.875,-1989.1671 5188.5,-1948.6037 5141.7665,-1928.7278 5099.8634,-1887.2441 5073.6811,-1857.0389"/>
<polygon fill="#000000" stroke="#000000" points="5076.1903,-1854.5867 5067.0465,-1849.2349 5070.8572,-1859.1208 5076.1903,-1854.5867"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="5543,-1856.6038 5198,-1856.6038 5198,-1786.2031 5543,-1786.2031 5543,-1856.6038"/>
<text text-anchor="middle" x="5370.5" y="-1825.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: &#160;Section to contain the new section.</text>
<text text-anchor="middle" x="5370.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; newsection: &#160;The new section.</text>
<text text-anchor="middle" x="5370.5" y="-1794.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: &#160;The line number.</text>
</g>
<!-- prose_72&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>prose_72&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5777.2461,-2117.0796C5777.4926,-2085.3018 5773.0854,-2019.5913 5735.5,-1984.6037 5674.8271,-1928.1244 5628.7803,-1981.0448 5552.5,-1948.6037 5502.9091,-1927.5133 5453.2077,-1891.5267 5418.304,-1863.2016"/>
<polygon fill="#000000" stroke="#000000" points="5420.1518,-1860.1901 5410.2024,-1856.5485 5415.7093,-1865.5998 5420.1518,-1860.1901"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="5787.5,-1841.3055 5561.5,-1841.3055 5561.5,-1801.5014 5787.5,-1801.5014 5787.5,-1841.3055"/>
<text text-anchor="middle" x="5674.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: the parent section.</text>
</g>
<!-- prose_73&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prose_73&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5856.2596,-2117.0695C5852.0633,-2087.7518 5841.2103,-2028.7724 5817.5,-1984.6037 5788.1386,-1929.908 5737.3242,-1878.0049 5704.8418,-1847.9627"/>
<polygon fill="#000000" stroke="#000000" points="5707.1476,-1845.3286 5697.4035,-1841.1687 5702.4267,-1850.4971 5707.1476,-1845.3286"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="6165,-1879.2039 5806,-1879.2039 5806,-1763.6031 6165,-1763.6031 6165,-1879.2039"/>
<text text-anchor="middle" x="5985.5" y="-1864.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addSection(section, newsection, linum)</text>
<text text-anchor="middle" x="5985.5" y="-1848.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="5985.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="5985.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5985.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[#section + 1] = newsection</text>
<text text-anchor="middle" x="5985.5" y="-1787.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5985.5" y="-1771.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5995.861,-2116.9764C5994.3392,-2073.5632 5990.4367,-1962.2355 5987.8794,-1889.2825"/>
<polygon fill="#000000" stroke="#000000" points="5991.3762,-1889.1255 5987.5279,-1879.2542 5984.3805,-1889.3707 5991.3762,-1889.1255"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6388,-1849.305 6183,-1849.305 6183,-1793.502 6388,-1793.502 6388,-1849.305"/>
<text text-anchor="middle" x="6285.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Boolean match for a tagline</text>
</g>
<!-- prose_80&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>prose_80&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7173.7236,-2117.023C7174.7936,-2084.5453 7171.7371,-2016.9406 7131.5,-1984.6037 7067.7665,-1933.3838 6470.0847,-1984.2511 6396.5,-1948.6037 6356.5277,-1929.2395 6324.9833,-1888.2282 6305.8957,-1857.9836"/>
<polygon fill="#000000" stroke="#000000" points="6308.8249,-1856.0651 6300.6112,-1849.373 6302.8589,-1859.7266 6308.8249,-1856.0651"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6681,-1848.6039 6406,-1848.6039 6406,-1794.203 6681,-1794.203 6681,-1848.6039"/>
<text text-anchor="middle" x="6543.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isTagline(line)</text>
<text text-anchor="middle" x="6543.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(m.tagline_p, line)</text>
<text text-anchor="middle" x="6543.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>codeblock_81&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7304.8953,-2117.1098C7293.6175,-2084.1401 7264.7771,-2014.8957 7213.5,-1984.6037 7113.0066,-1925.2371 6797.3367,-1993.2642 6689.5,-1948.6037 6641.743,-1928.8252 6598.6846,-1886.9182 6571.9089,-1856.5996"/>
<polygon fill="#000000" stroke="#000000" points="6574.3222,-1854.0399 6565.1291,-1848.7733 6569.0314,-1858.6233 6574.3222,-1854.0399"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="7072,-1841.3055 6699,-1841.3055 6699,-1801.5014 7072,-1801.5014 7072,-1841.3055"/>
<text text-anchor="middle" x="6885.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Lookahead, counting blank lines, return the number.</text>
</g>
<!-- prose_82&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>prose_82&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7449.3996,-2116.9963C7449.8957,-2084.7847 7445.7928,-2018.0078 7406.5,-1984.6037 7351.1381,-1937.5388 7149.9315,-1973.0409 7081.5,-1948.6037 7017.0373,-1925.5839 6952.4,-1877.6472 6915.8246,-1847.642"/>
<polygon fill="#000000" stroke="#000000" points="6917.9489,-1844.8566 6908.0198,-1841.1603 6913.4767,-1850.2417 6917.9489,-1844.8566"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="7414.5,-1848.7039 7090.5,-1848.7039 7090.5,-1794.103 7414.5,-1794.103 7414.5,-1848.7039"/>
<text text-anchor="middle" x="7252.5" y="-1817.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines: the full lines array of the section</text>
<text text-anchor="middle" x="7252.5" y="-1802.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: current index into lines</text>
</g>
<!-- prose_83&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>prose_83&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7530.016,-2116.9453C7528.3101,-2086.3955 7520.9122,-2024.365 7489.5,-1984.6037 7468.7869,-1958.3852 7451.6405,-1966.6192 7423.5,-1948.6037 7377.9677,-1919.454 7328.7042,-1882.1407 7294.8023,-1855.4793"/>
<polygon fill="#000000" stroke="#000000" points="7296.5425,-1852.3937 7286.5257,-1848.9419 7292.2036,-1857.8869 7296.5425,-1852.3937"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="7792,-1841.3055 7433,-1841.3055 7433,-1801.5014 7792,-1801.5014 7792,-1841.3055"/>
<text text-anchor="middle" x="7612.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns: number of blank lines forward of index</text>
</g>
<!-- prose_84&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>prose_84&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7612.5,-2116.9764C7612.5,-2065.0423 7612.5,-1915.9175 7612.5,-1851.5647"/>
<polygon fill="#000000" stroke="#000000" points="7616.0001,-1851.2823 7612.5,-1841.2823 7609.0001,-1851.2824 7616.0001,-1851.2823"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="8092.5,-1948.8043 7810.5,-1948.8043 7810.5,-1694.0026 8092.5,-1694.0026 8092.5,-1948.8043"/>
<text text-anchor="middle" x="7951.5" y="-1933.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fwdBlanks(lines, linum)</text>
<text text-anchor="middle" x="7951.5" y="-1918.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local fwd = 0</text>
<text text-anchor="middle" x="7951.5" y="-1902.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local index = linum + 1</text>
<text text-anchor="middle" x="7951.5" y="-1887.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if index &gt; #lines then </text>
<text text-anchor="middle" x="7951.5" y="-1871.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0</text>
<text text-anchor="middle" x="7951.5" y="-1856.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="7951.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = index, #lines do</text>
<text text-anchor="middle" x="7951.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if lines[i] == &quot;&quot; then</text>
<text text-anchor="middle" x="7951.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fwd = fwd + 1</text>
<text text-anchor="middle" x="7951.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7951.5" y="-1779.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="7951.5" y="-1764.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7951.5" y="-1748.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7951.5" y="-1733.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7951.5" y="-1717.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return fwd</text>
<text text-anchor="middle" x="7951.5" y="-1702.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_85&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>codeblock_85&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7857.3087,-2116.9764C7867.2006,-2085.9355 7888.1571,-2020.1739 7907.7966,-1958.545"/>
<polygon fill="#000000" stroke="#000000" points="7911.2338,-1959.286 7910.9354,-1948.6953 7904.5643,-1957.1605 7911.2338,-1959.286"/>
</g>
<!-- header_96 -->
<g id="node97" class="node">
<title>header_96</title>
<ellipse fill="none" stroke="#000000" cx="8162.5" cy="-1821.4035" rx="52.2623" ry="18"/>
<text text-anchor="middle" x="8162.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : List line</text>
</g>
<!-- section_86&#45;&gt;header_96 -->
<g id="edge96" class="edge">
<title>section_86&#45;&gt;header_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8162.5,-2116.9764C8162.5,-2064.5477 8162.5,-1913.0682 8162.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8166.0001,-1849.6813 8162.5,-1839.6814 8159.0001,-1849.6814 8166.0001,-1849.6813"/>
</g>
<!-- prose_97 -->
<g id="node98" class="node">
<title>prose_97</title>
<ellipse fill="none" stroke="#000000" cx="8265.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8265.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_86&#45;&gt;prose_97 -->
<g id="edge97" class="edge">
<title>section_86&#45;&gt;prose_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8168.4829,-2116.9764C8185.768,-2064.3154 8235.8536,-1911.7243 8256.4704,-1848.913"/>
<polygon fill="#000000" stroke="#000000" points="8259.8357,-1849.8832 8259.6289,-1839.2903 8253.1848,-1847.7001 8259.8357,-1849.8832"/>
</g>
<!-- header_99 -->
<g id="node100" class="node">
<title>header_99</title>
<ellipse fill="none" stroke="#000000" cx="8375.5" cy="-1821.4035" rx="59.7106" ry="18"/>
<text text-anchor="middle" x="8375.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Table line</text>
</g>
<!-- section_87&#45;&gt;header_99 -->
<g id="edge99" class="edge">
<title>section_87&#45;&gt;header_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8375.5,-2116.9764C8375.5,-2064.5477 8375.5,-1913.0682 8375.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8379.0001,-1849.6813 8375.5,-1839.6814 8372.0001,-1849.6814 8379.0001,-1849.6813"/>
</g>
<!-- prose_100 -->
<g id="node101" class="node">
<title>prose_100</title>
<ellipse fill="none" stroke="#000000" cx="8485.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8485.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_100 -->
<g id="edge100" class="edge">
<title>section_87&#45;&gt;prose_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8382.5156,-2117.0205C8395.2856,-2083.7533 8422.9921,-2010.7874 8444.5,-1948.6037 8456.2986,-1914.4917 8468.8979,-1874.8661 8476.9679,-1849.0246"/>
<polygon fill="#000000" stroke="#000000" points="8480.4023,-1849.7673 8480.0316,-1839.179 8473.7184,-1847.6874 8480.4023,-1849.7673"/>
</g>
<!-- header_102 -->
<g id="node103" class="node">
<title>header_102</title>
<ellipse fill="none" stroke="#000000" cx="8590.5" cy="-1821.4035" rx="55.3589" ry="18"/>
<text text-anchor="middle" x="8590.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Tag line </text>
</g>
<!-- section_88&#45;&gt;header_102 -->
<g id="edge102" class="edge">
<title>section_88&#45;&gt;header_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8590.5,-2116.9764C8590.5,-2064.5477 8590.5,-1913.0682 8590.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8594.0001,-1849.6813 8590.5,-1839.6814 8587.0001,-1849.6814 8594.0001,-1849.6813"/>
</g>
<!-- prose_103 -->
<g id="node104" class="node">
<title>prose_103</title>
<ellipse fill="none" stroke="#000000" cx="8695.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8695.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_88&#45;&gt;prose_103 -->
<g id="edge103" class="edge">
<title>section_88&#45;&gt;prose_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8596.7897,-2117.2282C8608.3897,-2083.9962 8633.854,-2010.6745 8654.5,-1948.6037 8665.8922,-1914.3538 8678.5791,-1874.7579 8686.7803,-1848.961"/>
<polygon fill="#000000" stroke="#000000" points="8690.21,-1849.7245 8689.8995,-1839.1342 8683.538,-1847.6066 8690.21,-1849.7245"/>
</g>
<!-- header_105 -->
<g id="node106" class="node">
<title>header_105</title>
<ellipse fill="none" stroke="#000000" cx="8812.5" cy="-1821.4035" rx="66.779" ry="18"/>
<text text-anchor="middle" x="8812.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Code block</text>
</g>
<!-- section_89&#45;&gt;header_105 -->
<g id="edge105" class="edge">
<title>section_89&#45;&gt;header_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8812.5,-2116.9764C8812.5,-2064.5477 8812.5,-1913.0682 8812.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8816.0001,-1849.6813 8812.5,-1839.6814 8809.0001,-1849.6814 8816.0001,-1849.6813"/>
</g>
<!-- prose_106 -->
<g id="node107" class="node">
<title>prose_106</title>
<ellipse fill="none" stroke="#000000" cx="8929.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8929.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_106 -->
<g id="edge106" class="edge">
<title>section_89&#45;&gt;prose_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8820.4011,-2117.1048C8834.7455,-2083.9728 8865.6948,-2011.2164 8888.5,-1948.6037 8900.8528,-1914.6885 8913.3328,-1875.0205 8921.2238,-1849.1155"/>
<polygon fill="#000000" stroke="#000000" points="8924.6649,-1849.8281 8924.2118,-1839.2429 8917.965,-1847.8003 8924.6649,-1849.8281"/>
</g>
<!-- prose_107 -->
<g id="node108" class="node">
<title>prose_107</title>
<ellipse fill="none" stroke="#000000" cx="9139.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9139.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_107 -->
<g id="edge107" class="edge">
<title>section_89&#45;&gt;prose_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8818.475,-2117.1564C8829.4716,-2086.366 8855.6029,-2023.2721 8896.5,-1984.6037 8923.0759,-1959.4761 8939.3002,-1967.6892 8970.5,-1948.6037 9023.9867,-1915.8849 9081.3039,-1870.227 9113.549,-1843.4443"/>
<polygon fill="#000000" stroke="#000000" points="9116.1434,-1845.8375 9121.5722,-1836.7392 9111.6545,-1840.4662 9116.1434,-1845.8375"/>
</g>
<!-- prose_108 -->
<g id="node109" class="node">
<title>prose_108</title>
<ellipse fill="none" stroke="#000000" cx="9415.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9415.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_108 -->
<g id="edge108" class="edge">
<title>section_89&#45;&gt;prose_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8816.8315,-2117.1975C8825.6781,-2084.6891 8849.1148,-2016.6094 8896.5,-1984.6037 9001.935,-1913.3892 9059.3754,-1987.5509 9180.5,-1948.6037 9260.0778,-1923.0158 9344.0527,-1870.4334 9386.8126,-1841.5323"/>
<polygon fill="#000000" stroke="#000000" points="9389.0087,-1844.271 9395.2952,-1835.7428 9385.0625,-1838.4893 9389.0087,-1844.271"/>
</g>
<!-- codeblock_109 -->
<g id="node110" class="node">
<title>codeblock_109</title>
<ellipse fill="none" stroke="#000000" cx="9684.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9684.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 251&#45;359</text>
</g>
<!-- section_89&#45;&gt;codeblock_109 -->
<g id="edge109" class="edge">
<title>section_89&#45;&gt;codeblock_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8816.5776,-2117.1692C8825.0667,-2084.2973 8848.0206,-2015.2078 8896.5,-1984.6037 9001.9478,-1918.0366 9336.8831,-1983.8488 9456.5,-1948.6037 9532.5647,-1926.1912 9611.1463,-1875.0067 9653.2812,-1844.8421"/>
<polygon fill="#000000" stroke="#000000" points="9655.4097,-1847.6221 9661.4579,-1838.9232 9651.3051,-1841.9517 9655.4097,-1847.6221"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="8162.5,-872.4019 7838.5,-872.4019 7838.5,-785.8013 8162.5,-785.8013 8162.5,-872.4019"/>
<text text-anchor="middle" x="8000.5" y="-825.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">New block unless previous line is also list,</text>
<text text-anchor="middle" x="8000.5" y="-809.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">in which case append. </text>
</g>
<!-- prose_97&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>prose_97&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8263.2212,-1803.2915C8259.1489,-1776.9941 8248.5691,-1727.7275 8223.5,-1694.2032 8206.6664,-1671.692 8187.006,-1681.6486 8171.5,-1658.2032 8004.4119,-1405.5621 7995.5263,-1022.354 7998.412,-882.5422"/>
<polygon fill="#000000" stroke="#000000" points="8001.9118,-882.5887 7998.6485,-872.509 7994.9138,-882.4237 8001.9118,-882.5887"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="8288,-865.0028 8181,-865.0028 8181,-793.2004 8288,-793.2004 8288,-865.0028"/>
<text text-anchor="middle" x="8234.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">Same as list.</text>
</g>
<!-- prose_100&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>prose_100&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8484.9814,-1803.3299C8483.1762,-1775.7015 8475.5798,-1723.1325 8444.5,-1694.2032 8395.2643,-1648.3743 8340.9987,-1709.5092 8297.5,-1658.2032 8100.3245,-1425.6382 8185.6255,-1012.4476 8221.5059,-874.9949"/>
<polygon fill="#000000" stroke="#000000" points="8224.9229,-875.7638 8224.1016,-865.2008 8218.1565,-873.9705 8224.9229,-875.7638"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="8728.5,-880.3019 8306.5,-880.3019 8306.5,-777.9013 8728.5,-777.9013 8728.5,-880.3019"/>
<text text-anchor="middle" x="8517.5" y="-833.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">A tag needs to cling, so we need to check the</text>
<text text-anchor="middle" x="8517.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">number of blank lines before and after a tag line, if any.</text>
<text text-anchor="middle" x="8517.5" y="-802.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">If even, a tag line clings down.</text>
</g>
<!-- prose_103&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prose_103&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8692.2585,-1803.3331C8672.1105,-1691.0133 8563.7248,-1086.7923 8528.5385,-890.6383"/>
<polygon fill="#000000" stroke="#000000" points="8531.9317,-889.7311 8526.721,-880.5062 8525.0417,-890.9671 8531.9317,-889.7311"/>
</g>
<!-- leaf_110 -->
<g id="node111" class="node">
<title>leaf_110</title>
<polygon fill="none" stroke="#c0c0c0" points="9112.5,-864.402 8746.5,-864.402 8746.5,-793.8013 9112.5,-793.8013 9112.5,-864.402"/>
<text text-anchor="middle" x="8929.5" y="-817.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">A code block is anything between a code header and</text>
<text text-anchor="middle" x="8929.5" y="-801.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">either a code footer or the end of a file. </text>
</g>
<!-- prose_106&#45;&gt;leaf_110 -->
<g id="edge110" class="edge">
<title>prose_106&#45;&gt;leaf_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8929.5,-1803.3331C8929.5,-1687.7597 8929.5,-1051.3747 8929.5,-874.6414"/>
<polygon fill="#000000" stroke="#000000" points="8933.0001,-874.6346 8929.5,-864.6346 8926.0001,-874.6347 8933.0001,-874.6346"/>
</g>
<!-- leaf_111 -->
<g id="node112" class="node">
<title>leaf_111</title>
<polygon fill="none" stroke="#c0c0c0" points="9406,-849.0037 9131,-849.0037 9131,-809.1995 9406,-809.1995 9406,-849.0037"/>
<text text-anchor="middle" x="9268.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section : the Section to be blocked</text>
</g>
<!-- prose_107&#45;&gt;leaf_111 -->
<g id="edge111" class="edge">
<title>prose_107&#45;&gt;leaf_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9141.8492,-1803.3331C9157.3558,-1684.0518 9244.9826,-1010.0039 9264.6024,-859.0826"/>
<polygon fill="#000000" stroke="#000000" points="9268.0772,-859.503 9265.8956,-849.1352 9261.1356,-858.6005 9268.0772,-859.503"/>
</g>
<!-- leaf_112 -->
<g id="node113" class="node">
<title>leaf_112</title>
<polygon fill="none" stroke="#c0c0c0" points="9797,-849.0037 9424,-849.0037 9424,-809.1995 9797,-809.1995 9797,-849.0037"/>
<text text-anchor="middle" x="9610.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns : the same Section, filled in with blocks</text>
</g>
<!-- prose_108&#45;&gt;leaf_112 -->
<g id="edge112" class="edge">
<title>prose_108&#45;&gt;leaf_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9419.0511,-1803.3331C9442.4914,-1684.0518 9574.9504,-1010.0039 9604.6083,-859.0826"/>
<polygon fill="#000000" stroke="#000000" points="9608.0691,-859.6224 9606.5632,-849.1352 9601.2005,-858.2726 9608.0691,-859.6224"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="10398,-1658.3048 9815,-1658.3048 9815,.1016 10398,.1016 10398,-1658.3048"/>
<text text-anchor="middle" x="10106.5" y="-1643.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.block(section)</text>
<text text-anchor="middle" x="10106.5" y="-1627.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; There is always a header at [1], though it may be nil</text>
<text text-anchor="middle" x="10106.5" y="-1612.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If there are other Nodes, they are sections and must be appended</text>
<text text-anchor="middle" x="10106.5" y="-1596.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; after the blocks.</text>
<text text-anchor="middle" x="10106.5" y="-1581.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local sub_sections = {}</text>
<text text-anchor="middle" x="10106.5" y="-1566.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #section do</text>
<text text-anchor="middle" x="10106.5" y="-1550.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;sub_sections[#sub_sections + 1] = section[i]</text>
<text text-anchor="middle" x="10106.5" y="-1535.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = nil</text>
<text text-anchor="middle" x="10106.5" y="-1519.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-1488.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Every section gets at least one block, at [2], which may be empty.</text>
<text text-anchor="middle" x="10106.5" y="-1473.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = Block(nil, section.line_first) &#45;&#45; current block</text>
<text text-anchor="middle" x="10106.5" y="-1457.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[2] = latest</text>
<text text-anchor="middle" x="10106.5" y="-1426.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; State machine for blocking a section</text>
<text text-anchor="middle" x="10106.5" y="-1410.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local back_blanks = 0</text>
<text text-anchor="middle" x="10106.5" y="-1395.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; first set of blank lines in a section belong to the first block</text>
<text text-anchor="middle" x="10106.5" y="-1380.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local lead_blanks = true</text>
<text text-anchor="middle" x="10106.5" y="-1364.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Track code blocks in own logic</text>
<text text-anchor="middle" x="10106.5" y="-1349.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local code_block = false</text>
<text text-anchor="middle" x="10106.5" y="-1333.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Tags also</text>
<text text-anchor="middle" x="10106.5" y="-1318.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local tagging = false</text>
<text text-anchor="middle" x="10106.5" y="-1303.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 1, #section.lines do</text>
<text text-anchor="middle" x="10106.5" y="-1287.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local inset = i + section.line_first</text>
<text text-anchor="middle" x="10106.5" y="-1272.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local l = section.lines[i]</text>
<text text-anchor="middle" x="10106.5" y="-1256.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not code_block then</text>
<text text-anchor="middle" x="10106.5" y="-1241.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if l == &quot;&quot; then </text>
<text text-anchor="middle" x="10106.5" y="-1226.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; increment back blanks for clinging subsequent lines</text>
<text text-anchor="middle" x="10106.5" y="-1210.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = back_blanks + 1</text>
<text text-anchor="middle" x="10106.5" y="-1195.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank lines attach to the preceding block</text>
<text text-anchor="middle" x="10106.5" y="-1179.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10106.5" y="-1164.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-1149.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeHeader, level, l_trim = Codeblock.matchHead(l)</text>
<text text-anchor="middle" x="10106.5" y="-1133.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if isCodeHeader then</text>
<text text-anchor="middle" x="10106.5" y="-1118.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = true</text>
<text text-anchor="middle" x="10106.5" y="-1102.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10106.5" y="-1087.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; create a new block for the codeblock</text>
<text text-anchor="middle" x="10106.5" y="-1072.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10106.5" y="-1056.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(nil, inset)</text>
<text text-anchor="middle" x="10106.5" y="-1041.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10106.5" y="-1025.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10106.5" y="-1010.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-995.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; preserve existing block and add codeblock</text>
<text text-anchor="middle" x="10106.5" y="-979.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10106.5" y="-964.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10106.5" y="-948.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-933.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif isTagline(l) then</text>
<text text-anchor="middle" x="10106.5" y="-918.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = true</text>
<text text-anchor="middle" x="10106.5" y="-902.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; apply cling rule</text>
<text text-anchor="middle" x="10106.5" y="-887.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local fwd_blanks = fwdBlanks(section.lines, i)</text>
<text text-anchor="middle" x="10106.5" y="-871.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if fwd_blanks &gt; back_blanks then</text>
<text text-anchor="middle" x="10106.5" y="-856.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10106.5" y="-841.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10106.5" y="-810.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10106.5" y="-794.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10106.5" y="-779.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10106.5" y="-764.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10106.5" y="-748.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10106.5" y="-733.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-717.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if back_blanks &gt; 0 and lead_blanks == false then</text>
<text text-anchor="middle" x="10106.5" y="-702.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10106.5" y="-687.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10106.5" y="-671.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10106.5" y="-656.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10106.5" y="-640.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10106.5" y="-625.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10106.5" y="-610.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-594.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10106.5" y="-579.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10106.5" y="-563.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="10106.5" y="-548.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-533.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; continuing a block</text>
<text text-anchor="middle" x="10106.5" y="-517.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lead_blanks = false</text>
<text text-anchor="middle" x="10106.5" y="-502.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10106.5" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10106.5" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Collecting a code block</text>
<text text-anchor="middle" x="10106.5" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeFoot, level, l_trim = Codeblock.matchFoot(l)</text>
<text text-anchor="middle" x="10106.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (isCodeFoot and level == latest[1].level) then</text>
<text text-anchor="middle" x="10106.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = false</text>
<text text-anchor="middle" x="10106.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].footer = l_trim</text>
<text text-anchor="middle" x="10106.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = inset</text>
<text text-anchor="middle" x="10106.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10106.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].lines[#latest[1].lines + 1] = l</text>
<text text-anchor="middle" x="10106.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Continue in normal parse mode</text>
<text text-anchor="middle" x="10106.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; This may add more lines to the code block</text>
<text text-anchor="middle" x="10106.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Auto&#45;close a code block with no footer.</text>
<text text-anchor="middle" x="10106.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if latest[1] and latest[1].id == &quot;codeblock&quot; and not latest[1].line_last then</text>
<text text-anchor="middle" x="10106.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = #section.lines</text>
<text text-anchor="middle" x="10106.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Close last block</text>
<text text-anchor="middle" x="10106.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;latest.line_last = section.line_last</text>
<text text-anchor="middle" x="10106.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Append sections, if any, which follow our blocks</text>
<text text-anchor="middle" x="10106.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(sub_sections) do</text>
<text text-anchor="middle" x="10106.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = v</text>
<text text-anchor="middle" x="10106.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10106.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="10106.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_109&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>codeblock_109&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9700.5396,-1803.5029C9725.7103,-1774.6694 9774.7783,-1715.3706 9805.5,-1658.2032 9807.0857,-1655.2525 9808.6663,-1652.2917 9810.2417,-1649.3212"/>
<polygon fill="#000000" stroke="#000000" points="9813.3873,-1650.8594 9814.9526,-1640.3808 9807.1944,-1647.5962 9813.3873,-1650.8594"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="9055,-2163.1055 8906,-2163.1055 8906,-2107.3025 9055,-2107.3025 9055,-2163.1055"/>
<text text-anchor="middle" x="8980.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Blocks a Section.</text>
</g>
<!-- prose_115&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>prose_115&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9161.2169,-2348.67C9153.6923,-2339.9803 9143.7525,-2329.5556 9133.5,-2321.8043 9105.9085,-2300.9439 9089.2974,-2309.9193 9064.5,-2285.8043 9031.3894,-2253.6048 9007.6802,-2205.5224 8994.0657,-2172.3934"/>
<polygon fill="#000000" stroke="#000000" points="8997.2922,-2171.0353 8990.3297,-2163.0494 8990.7925,-2173.6341 8997.2922,-2171.0353"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="9439.5,-2162.5044 9073.5,-2162.5044 9073.5,-2107.9036 9439.5,-2107.9036 9439.5,-2162.5044"/>
<text text-anchor="middle" x="9256.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000">This is a moderately complex state machine, which</text>
<text text-anchor="middle" x="9256.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000">works on a line&#45;by&#45;line basis with some lookahead.</text>
</g>
<!-- prose_116&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>prose_116&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9256.5,-2347.1566C9256.5,-2309.686 9256.5,-2222.7794 9256.5,-2172.6606"/>
<polygon fill="#000000" stroke="#000000" points="9260.0001,-2172.5552 9256.5,-2162.5552 9253.0001,-2172.5552 9260.0001,-2172.5552"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="9921.5,-2193.7042 9457.5,-2193.7042 9457.5,-2076.7038 9921.5,-2076.7038 9921.5,-2193.7042"/>
<text text-anchor="middle" x="9689.5" y="-2162.5041" font-family="Inconsolata" font-size="14.00" fill="#000000">First off, we have a Header at [1], and may have one or </text>
<text text-anchor="middle" x="9689.5" y="-2147.104" font-family="Inconsolata" font-size="14.00" fill="#000000">more Sections The blocks go between the Header and the remaining</text>
<text text-anchor="middle" x="9689.5" y="-2131.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Sections, so we have to lift them and append after blocking.</text>
<text text-anchor="middle" x="9689.5" y="-2116.304" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="9689.5" y="-2100.9039" font-family="Inconsolata" font-size="14.00" fill="#000000">Next, we parse the lines, thus:</text>
</g>
<!-- prose_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>prose_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9527.3682,-2348.2918C9550.4725,-2317.9261 9600.1492,-2252.6366 9638.4648,-2202.2789"/>
<polygon fill="#000000" stroke="#000000" points="9641.4819,-2204.0937 9644.7517,-2194.0161 9635.9111,-2199.855 9641.4819,-2204.0937"/>
</g>
<!-- header_122 -->
<g id="node123" class="node">
<title>header_122</title>
<ellipse fill="none" stroke="#000000" cx="10001.5" cy="-2135.204" rx="61.9429" ry="18"/>
<text text-anchor="middle" x="10001.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Prose line</text>
</g>
<!-- section_118&#45;&gt;header_122 -->
<g id="edge122" class="edge">
<title>section_118&#45;&gt;header_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10001.5,-2347.1566C10001.5,-2307.283 10001.5,-2211.4294 10001.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="10005.0001,-2163.4861 10001.5,-2153.4862 9998.0001,-2163.4862 10005.0001,-2163.4861"/>
</g>
<!-- prose_123 -->
<g id="node124" class="node">
<title>prose_123</title>
<ellipse fill="none" stroke="#000000" cx="10113.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10113.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_118&#45;&gt;prose_123 -->
<g id="edge123" class="edge">
<title>section_118&#45;&gt;prose_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10021.7711,-2347.5734C10037.7454,-2332.6326 10059.4341,-2309.8523 10072.5,-2285.8043 10093.9085,-2246.4014 10104.7717,-2195.0083 10109.777,-2163.5927"/>
<polygon fill="#000000" stroke="#000000" points="10113.2888,-2163.7747 10111.3109,-2153.3662 10106.3662,-2162.7364 10113.2888,-2163.7747"/>
</g>
<!-- leaf_124 -->
<g id="node125" class="node">
<title>leaf_124</title>
<polygon fill="none" stroke="#c0c0c0" points="10307,-1864.7038 9920,-1864.7038 9920,-1778.1032 10307,-1778.1032 10307,-1864.7038"/>
<text text-anchor="middle" x="10113.5" y="-1817.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">If preceded by at least one blank line,</text>
<text text-anchor="middle" x="10113.5" y="-1802.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">make a new block, otherwise append to existing block.</text>
</g>
<!-- prose_123&#45;&gt;leaf_124 -->
<g id="edge124" class="edge">
<title>prose_123&#45;&gt;leaf_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10113.5,-2116.9764C10113.5,-2070.6598 10113.5,-1947.0409 10113.5,-1875.1922"/>
<polygon fill="#000000" stroke="#000000" points="10117.0001,-1874.9826 10113.5,-1864.9826 10110.0001,-1874.9826 10117.0001,-1874.9826"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="10697.5,-2170.5043 10163.5,-2170.5043 10163.5,-2099.9037 10697.5,-2099.9037 10697.5,-2170.5043"/>
<text text-anchor="middle" x="10430.5" y="-2123.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is a kludgy thing we&#39;re going to do to remove &#39;blocks&#39; once they&#39;ve</text>
<text text-anchor="middle" x="10430.5" y="-2108.004" font-family="Inconsolata" font-size="14.00" fill="#000000">become either codeblocks or prose.</text>
</g>
<!-- prose_126&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>prose_126&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10430.5,-2347.1566C10430.5,-2311.6882 10430.5,-2231.9256 10430.5,-2180.9965"/>
<polygon fill="#000000" stroke="#000000" points="10434.0001,-2180.9049 10430.5,-2170.9049 10427.0001,-2180.905 10434.0001,-2180.9049"/>
</g>
<!-- leaf_129 -->
<g id="node130" class="node">
<title>leaf_129</title>
<polygon fill="none" stroke="#c0c0c0" points="11061,-2216.2043 10716,-2216.2043 10716,-2054.2037 11061,-2054.2037 11061,-2216.2043"/>
<text text-anchor="middle" x="10888.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.weed(section)</text>
<text text-anchor="middle" x="10888.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="10888.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.id == &quot;block&quot; then</text>
<text text-anchor="middle" x="10888.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v[1] and v[1].id == &quot;codeblock&quot; </text>
<text text-anchor="middle" x="10888.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or v[1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="10888.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = v[1] &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10888.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10888.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10888.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10888.5" y="-2062.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_127&#45;&gt;leaf_129 -->
<g id="edge129" class="edge">
<title>codeblock_127&#45;&gt;leaf_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10741.0549,-2347.1566C10759.3986,-2320.7874 10794.7736,-2269.9359 10826.2755,-2224.6518"/>
<polygon fill="#000000" stroke="#000000" points="10829.2701,-2226.476 10832.1076,-2216.2682 10823.5237,-2222.4786 10829.2701,-2226.476"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="11515.5,-2163.1055 11079.5,-2163.1055 11079.5,-2107.3025 11515.5,-2107.3025 11515.5,-2163.1055"/>
<text text-anchor="middle" x="11297.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Creates a new section, given a header and the line number.</text>
</g>
<!-- prose_131&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>prose_131&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11685.1854,-2348.1907C11677.8088,-2339.138 11667.7016,-2328.5195 11656.5,-2321.8043 11604.3445,-2290.5379 11579.8744,-2310.9331 11524.5,-2285.8043 11455.3142,-2254.4079 11383.5702,-2203.111 11339.7232,-2169.2532"/>
<polygon fill="#000000" stroke="#000000" points="11341.6431,-2166.3124 11331.6013,-2162.9342 11337.3447,-2171.8373 11341.6431,-2166.3124"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="12025.5,-2177.805 11533.5,-2177.805 11533.5,-2092.6029 12025.5,-2092.6029 12025.5,-2177.805"/>
<text text-anchor="middle" x="11779.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; header : &#160;Header for the section, which may be of type Header or </text>
<text text-anchor="middle" x="11779.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;a number. &#160;A number means the header is virtual.</text>
<text text-anchor="middle" x="11779.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum &#160;: &#160;The line number of the header, which is the first of the</text>
<text text-anchor="middle" x="11779.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Section.</text>
</g>
<!-- prose_132&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>prose_132&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11779.5,-2347.1566C11779.5,-2313.2734 11779.5,-2238.9667 11779.5,-2187.9912"/>
<polygon fill="#000000" stroke="#000000" points="11783.0001,-2187.8086 11779.5,-2177.8087 11776.0001,-2187.8087 11783.0001,-2187.8086"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="12255.5,-2155.1061 12043.5,-2155.1061 12043.5,-2115.3019 12255.5,-2115.3019 12255.5,-2155.1061"/>
<text text-anchor="middle" x="12149.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : &#160;The new Section.</text>
</g>
<!-- prose_133&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>prose_133&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12016.3234,-2347.9169C12040.9639,-2308.5605 12101.4429,-2211.9619 12131.682,-2163.6634"/>
<polygon fill="#000000" stroke="#000000" points="12134.794,-2165.2883 12137.1341,-2154.9551 12128.8609,-2161.5737 12134.794,-2165.2883"/>
</g>
<!-- leaf_138 -->
<g id="node139" class="node">
<title>leaf_138</title>
<polygon fill="none" stroke="#c0c0c0" points="12583.5,-2285.9046 12273.5,-2285.9046 12273.5,-1984.5034 12583.5,-1984.5034 12583.5,-2285.9046"/>
<text text-anchor="middle" x="12428.5" y="-2270.6043" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(section, header, linum)</text>
<text text-anchor="middle" x="12428.5" y="-2255.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local section = setmetatable({}, S)</text>
<text text-anchor="middle" x="12428.5" y="-2239.8042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if type(header) == &quot;number&quot; then</text>
<text text-anchor="middle" x="12428.5" y="-2224.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; We have a virtual header</text>
<text text-anchor="middle" x="12428.5" y="-2209.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = Header(&quot;&quot;, header)</text>
<text text-anchor="middle" x="12428.5" y="-2193.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = nil</text>
<text text-anchor="middle" x="12428.5" y="-2178.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header</text>
<text text-anchor="middle" x="12428.5" y="-2162.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="12428.5" y="-2147.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = header</text>
<text text-anchor="middle" x="12428.5" y="-2132.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = header</text>
<text text-anchor="middle" x="12428.5" y="-2116.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header.level</text>
<text text-anchor="middle" x="12428.5" y="-2101.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12428.5" y="-2085.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.line_first = linum</text>
<text text-anchor="middle" x="12428.5" y="-2070.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines = {}</text>
<text text-anchor="middle" x="12428.5" y="-2055.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.id = &quot;section&quot;</text>
<text text-anchor="middle" x="12428.5" y="-2039.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="12428.5" y="-2024.2038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12428.5" y="-1992.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(s, new)</text>
</g>
<!-- codeblock_134&#45;&gt;leaf_138 -->
<g id="edge138" class="edge">
<title>codeblock_134&#45;&gt;leaf_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12363.0713,-2347.1566C12366.9834,-2334.4834 12372.6412,-2316.1552 12379.0149,-2295.5079"/>
<polygon fill="#000000" stroke="#000000" points="12382.3847,-2296.4576 12381.9901,-2285.8701 12375.6961,-2294.3928 12382.3847,-2296.4576"/>
</g>
</g>
</svg>