<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12593pt" height="2617pt"
 viewBox="0.00 0.00 12592.50 2616.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2612.6043)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2612.6043 12588.5,-2612.6043 12588.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2590.6043" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2586.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 412</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2518.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2514.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;379</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1972.5,-2572.4357C1972.5,-2564.7353 1972.5,-2555.5787 1972.5,-2547.021"/>
<polygon fill="#000000" stroke="#000000" points="1976.0001,-2547.0176 1972.5,-2537.0176 1969.0001,-2547.0176 1976.0001,-2547.0176"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1382.5" cy="-2446.6043" rx="93.3745" ry="18"/>
<text text-anchor="middle" x="1382.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Section metatable</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1909.9396,-2512.9834C1816.9345,-2504.3326 1636.7988,-2486.4457 1484.5,-2464.6043 1476.5276,-2463.461 1468.2227,-2462.1668 1459.9455,-2460.8094"/>
<polygon fill="#000000" stroke="#000000" points="1460.3275,-2457.3248 1449.8873,-2459.1284 1459.1735,-2464.229 1460.3275,-2457.3248"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1525.5" cy="-2446.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1525.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1907.7367,-2515.6055C1826.6502,-2510.58 1684.1046,-2497.5273 1566.5,-2464.6043 1564.0764,-2463.9259 1561.6101,-2463.1311 1559.1506,-2462.2603"/>
<polygon fill="#000000" stroke="#000000" points="1560.3914,-2458.9875 1549.8033,-2458.6103 1557.8452,-2465.508 1560.3914,-2458.9875"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1607.5" cy="-2446.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1607.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2565,-2512.8727C1844.2517,-2505.7259 1737.4497,-2491.0918 1648.5,-2464.6043 1646.0879,-2463.8861 1643.6302,-2463.0616 1641.1769,-2462.1692"/>
<polygon fill="#000000" stroke="#000000" points="1642.4293,-2458.9008 1631.8431,-2458.4724 1639.8516,-2465.4089 1642.4293,-2458.9008"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1689.5" cy="-2446.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1689.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1915.9185,-2509.1958C1866.3352,-2500.194 1792.6793,-2484.9767 1730.5,-2464.6043 1728.2561,-2463.8691 1725.9674,-2463.055 1723.6763,-2462.191"/>
<polygon fill="#000000" stroke="#000000" points="1724.9349,-2458.9247 1714.3515,-2458.4329 1722.3182,-2465.4173 1724.9349,-2458.9247"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1771.5" cy="-2446.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1771.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1929.008,-2505.072C1896.6188,-2494.7179 1851.4559,-2479.6957 1812.5,-2464.6043 1810.2981,-2463.7514 1808.0416,-2462.8474 1805.7743,-2461.9165"/>
<polygon fill="#000000" stroke="#000000" points="1807.0798,-2458.6686 1796.506,-2458.0002 1804.3552,-2465.1165 1807.0798,-2458.6686"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="1887.5" cy="-2446.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1887.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;21</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1951.9239,-2501.1751C1941.0655,-2491.9775 1927.5779,-2480.5527 1915.7539,-2470.5371"/>
<polygon fill="#000000" stroke="#000000" points="1917.7793,-2467.6658 1907.8866,-2463.873 1913.2549,-2473.0072 1917.7793,-2467.6658"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2047.5" cy="-2446.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2047.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 22&#45;29</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1990.6554,-2501.1751C1999.983,-2492.2207 2011.5094,-2481.1553 2021.7394,-2471.3345"/>
<polygon fill="#000000" stroke="#000000" points="2024.4618,-2473.5728 2029.2518,-2464.1226 2019.6141,-2468.5231 2024.4618,-2473.5728"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2600.5" cy="-2446.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2600.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 46&#45;79</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2033.2859,-2511.6353C2150.0531,-2498.2479 2405.1513,-2469.001 2529.5086,-2454.7435"/>
<polygon fill="#000000" stroke="#000000" points="2530.1444,-2458.1936 2539.6806,-2453.5773 2529.347,-2451.2392 2530.1444,-2458.1936"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="4806.5" cy="-2446.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4806.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 125&#45;166</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.0389,-2516.9393C2414.1768,-2507.3832 4296.4947,-2459.5614 4721.2484,-2448.7702"/>
<polygon fill="#000000" stroke="#000000" points="4721.4001,-2452.2676 4731.308,-2448.5147 4721.2223,-2445.2699 4721.4001,-2452.2676"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="9216.5" cy="-2446.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9216.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 204&#45;217</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.1768,-2517.9516C2712.3737,-2511.2505 8365.739,-2455.0603 9130.9129,-2447.455"/>
<polygon fill="#000000" stroke="#000000" points="9131.0604,-2450.9538 9141.0251,-2447.3545 9130.9907,-2443.9542 9131.0604,-2450.9538"/>
</g>
<!-- section_12 -->
<g id="node13" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="10365.5" cy="-2446.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10365.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 361&#45;379</text>
</g>
<!-- section_1&#45;&gt;section_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;section_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.2048,-2518.3591C2574.2996,-2516.3091 6286.2686,-2501.1818 9300.5,-2464.6043 9664.6352,-2460.1856 10098.7543,-2451.9137 10279.7141,-2448.3315"/>
<polygon fill="#000000" stroke="#000000" points="10280.0356,-2451.8259 10289.9642,-2448.1282 10279.8968,-2444.8273 10280.0356,-2451.8259"/>
</g>
<!-- section_13 -->
<g id="node14" class="node">
<title>section_13</title>
<ellipse fill="none" stroke="#000000" cx="11739.5" cy="-2446.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11739.5" y="-2442.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 380&#45;412</text>
</g>
<!-- section_1&#45;&gt;section_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;section_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.5394,-2518.3754C2621.0546,-2516.3164 6943.2813,-2500.2334 10449.5,-2464.6043 10903.2157,-2459.9938 11446.654,-2451.4086 11653.6978,-2448.0263"/>
<polygon fill="#000000" stroke="#000000" points="11653.9525,-2451.5227 11663.8939,-2447.8595 11653.838,-2444.5237 11653.9525,-2451.5227"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="457,-2392.5047 0,-2392.5047 0,-2321.904 457,-2321.904 457,-2392.5047"/>
<text text-anchor="middle" x="228.5" y="-2345.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Sections consist of a header and body. &#160;The body may contain</text>
<text text-anchor="middle" x="228.5" y="-2330.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> one or more blocks, followed by zero or more child sections.</text>
</g>
<!-- prose_3&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>prose_3&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1501.7378,-2434.3724C1496.2133,-2432.0404 1490.2598,-2429.9196 1484.5,-2428.6043 1266.7284,-2378.876 707.2738,-2412.394 467.2069,-2392.6825"/>
<polygon fill="#000000" stroke="#000000" points="467.3277,-2389.1799 457.0619,-2391.7998 466.7209,-2396.1535 467.3277,-2389.1799"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="918,-2376.5049 475,-2376.5049 475,-2337.9037 918,-2337.9037 918,-2376.5049"/>
<text text-anchor="middle" x="696.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> The header and block may both be virtual, but will always be</text>
<text text-anchor="middle" x="696.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> present.</text>
</g>
<!-- prose_4&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1583.2799,-2434.2778C1577.8806,-2432.0128 1572.0945,-2429.9437 1566.5,-2428.6043 1289.8669,-2362.3765 1210.4084,-2422.1823 927.5,-2392.6043 891.9666,-2388.8893 853.5468,-2383.5416 818.4305,-2378.1239"/>
<polygon fill="#000000" stroke="#000000" points="818.5535,-2374.6009 808.1338,-2376.519 817.4754,-2381.5174 818.5535,-2374.6009"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1330.5,-2376.5049 936.5,-2376.5049 936.5,-2337.9037 1330.5,-2337.9037 1330.5,-2376.5049"/>
<text text-anchor="middle" x="1133.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> In the first pass, we fill a lines array with the raw</text>
<text text-anchor="middle" x="1133.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> contents of the section. </text>
</g>
<!-- prose_5&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>prose_5&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1665.2155,-2434.5301C1659.8202,-2432.2494 1654.0521,-2430.1101 1648.5,-2428.6043 1515.0582,-2392.4141 1476.3494,-2412.3198 1339.5,-2392.6043 1310.2155,-2388.3854 1278.6889,-2383.263 1249.3189,-2378.2406"/>
<polygon fill="#000000" stroke="#000000" points="1249.8962,-2374.7886 1239.4476,-2376.5427 1248.7095,-2381.6873 1249.8962,-2374.7886"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1722,-2377.1064 1349,-2377.1064 1349,-2337.3022 1722,-2337.3022 1722,-2377.1064"/>
<text text-anchor="middle" x="1535.5" y="-2361.7043" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is subsequently refined into various blocks. </text>
</g>
<!-- prose_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1746.0156,-2435.1211C1740.902,-2432.9004 1735.5488,-2430.6346 1730.5,-2428.6043 1688.2804,-2411.6266 1640.2894,-2394.0334 1602.4817,-2380.5589"/>
<polygon fill="#000000" stroke="#000000" points="1603.1961,-2377.0984 1592.6014,-2377.0486 1600.8526,-2383.6945 1603.1961,-2377.0984"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1783.5" cy="-2357.2043" rx="43.082" ry="18"/>
<text text-anchor="middle" x="1783.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Array</text>
</g>
<!-- section_7&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1867.4478,-2429.3671C1851.1705,-2415.3749 1828.0744,-2395.5212 1810.2268,-2380.1791"/>
<polygon fill="#000000" stroke="#000000" points="1812.3041,-2377.3493 1802.4392,-2373.4847 1807.7409,-2382.6576 1812.3041,-2377.3493"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1876.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1876.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1885.274,-2428.5129C1883.7532,-2416.153 1881.7073,-2399.5256 1879.9737,-2385.4359"/>
<polygon fill="#000000" stroke="#000000" points="1883.4178,-2384.7665 1878.7227,-2375.2688 1876.4702,-2385.6214 1883.4178,-2384.7665"/>
</g>
<!-- header_21 -->
<g id="node22" class="node">
<title>header_21</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2357.2043" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_8&#45;&gt;header_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;header_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2032.6824,-2428.9418C2021.5163,-2415.6318 2006.0524,-2397.1988 1993.596,-2382.3508"/>
<polygon fill="#000000" stroke="#000000" points="1996.1401,-2379.9376 1987.0316,-2374.526 1990.7773,-2384.4366 1996.1401,-2379.9376"/>
</g>
<!-- prose_22 -->
<g id="node23" class="node">
<title>prose_22</title>
<ellipse fill="none" stroke="#000000" cx="2068.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2068.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;prose_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2051.7497,-2428.5129C2054.6815,-2416.0318 2058.6354,-2399.1991 2061.9656,-2385.0222"/>
<polygon fill="#000000" stroke="#000000" points="2065.3771,-2385.8043 2064.2567,-2375.2688 2058.5626,-2384.2035 2065.3771,-2385.8043"/>
</g>
<!-- section_23 -->
<g id="node24" class="node">
<title>section_23</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2357.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;45</text>
</g>
<!-- section_8&#45;&gt;section_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;section_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2072.9476,-2429.9984C2094.7257,-2415.787 2126.2673,-2395.2043 2150.2586,-2379.5487"/>
<polygon fill="#000000" stroke="#000000" points="2152.2619,-2382.4208 2158.7238,-2374.0247 2148.4364,-2376.5585 2152.2619,-2382.4208"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="2377.5" cy="-2357.2043" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="2377.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for sections</text>
</g>
<!-- section_9&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2563.4258,-2431.7414C2526.543,-2416.9552 2469.6648,-2394.1529 2428.5295,-2377.6619"/>
<polygon fill="#000000" stroke="#000000" points="2429.8046,-2374.4023 2419.2203,-2373.9298 2427.1998,-2380.8996 2429.8046,-2374.4023"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2536.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2536.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2587.5486,-2428.5129C2578.0224,-2415.2059 2564.955,-2396.9523 2554.4261,-2382.2448"/>
<polygon fill="#000000" stroke="#000000" points="2557.2331,-2380.153 2548.5661,-2374.0592 2551.5412,-2384.2277 2557.2331,-2380.153"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="2664.5" cy="-2357.2043" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2664.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;63</text>
</g>
<!-- section_9&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2613.4514,-2428.5129C2622.7944,-2415.4618 2635.5438,-2397.6526 2645.9637,-2383.0972"/>
<polygon fill="#000000" stroke="#000000" points="2648.8112,-2385.1323 2651.7863,-2374.9637 2643.1194,-2381.0576 2648.8112,-2385.1323"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2357.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;79</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2647.7132,-2434.0795C2708.7081,-2417.8987 2814.8092,-2389.752 2880.3085,-2372.3762"/>
<polygon fill="#000000" stroke="#000000" points="2881.2949,-2375.7357 2890.0631,-2369.7885 2879.4999,-2368.9697 2881.2949,-2375.7357"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2357.2043" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 80&#45;102</text>
</g>
<!-- section_9&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_9&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2663.3596,-2441.18C2843.6926,-2425.6184 3362.3982,-2380.8575 3559.3697,-2363.8601"/>
<polygon fill="#000000" stroke="#000000" points="3559.6866,-2367.3459 3569.3487,-2362.999 3559.0847,-2360.3718 3559.6866,-2367.3459"/>
</g>
<!-- header_59 -->
<g id="node60" class="node">
<title>header_59</title>
<ellipse fill="none" stroke="#000000" cx="4524.5" cy="-2357.2043" rx="108.8358" ry="18"/>
<text text-anchor="middle" x="4524.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : addLine(section, line) </text>
</g>
<!-- section_10&#45;&gt;header_59 -->
<g id="edge59" class="edge">
<title>section_10&#45;&gt;header_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4760.8784,-2432.1413C4713.0381,-2416.9749 4637.6206,-2393.066 4584.8747,-2376.3444"/>
<polygon fill="#000000" stroke="#000000" points="4585.8917,-2372.9952 4575.3015,-2373.3095 4583.7762,-2379.6679 4585.8917,-2372.9952"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="4683.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4683.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>section_10&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4778.9315,-2429.711C4762.7256,-2419.4725 4742.0411,-2405.8643 4724.5,-2392.6043 4719.183,-2388.585 4713.6675,-2384.0779 4708.471,-2379.6611"/>
<polygon fill="#000000" stroke="#000000" points="4710.4916,-2376.7808 4700.6418,-2372.8779 4705.9078,-2382.0714 4710.4916,-2376.7808"/>
</g>
<!-- prose_61 -->
<g id="node62" class="node">
<title>prose_61</title>
<ellipse fill="none" stroke="#000000" cx="4765.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4765.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_61 -->
<g id="edge61" class="edge">
<title>section_10&#45;&gt;prose_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4798.203,-2428.5129C4792.3474,-2415.7448 4784.4033,-2398.4227 4777.8111,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="4780.8557,-2382.2911 4773.5056,-2374.6604 4774.4929,-2385.2091 4780.8557,-2382.2911"/>
</g>
<!-- prose_62 -->
<g id="node63" class="node">
<title>prose_62</title>
<ellipse fill="none" stroke="#000000" cx="4847.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4847.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_62 -->
<g id="edge62" class="edge">
<title>section_10&#45;&gt;prose_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4814.797,-2428.5129C4820.6526,-2415.7448 4828.5967,-2398.4227 4835.1889,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="4838.5071,-2385.2091 4839.4944,-2374.6604 4832.1443,-2382.2911 4838.5071,-2385.2091"/>
</g>
<!-- codeblock_63 -->
<g id="node64" class="node">
<title>codeblock_63</title>
<ellipse fill="none" stroke="#000000" cx="5049.5" cy="-2357.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5049.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;143</text>
</g>
<!-- section_10&#45;&gt;codeblock_63 -->
<g id="edge63" class="edge">
<title>section_10&#45;&gt;codeblock_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4847.7216,-2431.4388C4888.8471,-2416.3087 4952.1833,-2393.0073 4996.9085,-2376.5528"/>
<polygon fill="#000000" stroke="#000000" points="4998.2604,-2379.7848 5006.4369,-2373.0473 4995.8434,-2373.2153 4998.2604,-2379.7848"/>
</g>
<!-- section_64 -->
<g id="node65" class="node">
<title>section_64</title>
<ellipse fill="none" stroke="#000000" cx="5735.5" cy="-2357.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5735.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 146&#45;166</text>
</g>
<!-- section_10&#45;&gt;section_64 -->
<g id="edge64" class="edge">
<title>section_10&#45;&gt;section_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4876.7068,-2439.8482C5045.9887,-2423.5577 5475.8663,-2382.1895 5655.1072,-2364.9407"/>
<polygon fill="#000000" stroke="#000000" points="5655.64,-2368.4057 5665.2588,-2363.9638 5654.9694,-2361.4379 5655.64,-2368.4057"/>
</g>
<!-- section_65 -->
<g id="node66" class="node">
<title>section_65</title>
<ellipse fill="none" stroke="#000000" cx="7572.5" cy="-2357.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7572.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 167&#45;241</text>
</g>
<!-- section_10&#45;&gt;section_65 -->
<g id="edge65" class="edge">
<title>section_10&#45;&gt;section_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4881.5585,-2444.1784C5272.4533,-2431.5442 7073.0089,-2373.3484 7487.3234,-2359.9573"/>
<polygon fill="#000000" stroke="#000000" points="7487.5525,-2363.4518 7497.4342,-2359.6305 7487.3263,-2356.4555 7487.5525,-2363.4518"/>
</g>
<!-- header_114 -->
<g id="node115" class="node">
<title>header_114</title>
<ellipse fill="none" stroke="#000000" cx="9069.5" cy="-2357.2043" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="9069.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Blocking</text>
</g>
<!-- section_11&#45;&gt;header_114 -->
<g id="edge114" class="edge">
<title>section_11&#45;&gt;header_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9188.8504,-2429.7889C9165.0434,-2415.3103 9130.5509,-2394.3332 9104.7624,-2378.6496"/>
<polygon fill="#000000" stroke="#000000" points="9106.3982,-2375.548 9096.0355,-2373.3422 9102.7608,-2381.5288 9106.3982,-2375.548"/>
</g>
<!-- prose_115 -->
<g id="node116" class="node">
<title>prose_115</title>
<ellipse fill="none" stroke="#000000" cx="9175.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9175.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_115 -->
<g id="edge115" class="edge">
<title>section_11&#45;&gt;prose_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9208.203,-2428.5129C9202.3474,-2415.7448 9194.4033,-2398.4227 9187.8111,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="9190.8557,-2382.2911 9183.5056,-2374.6604 9184.4929,-2385.2091 9190.8557,-2382.2911"/>
</g>
<!-- prose_116 -->
<g id="node117" class="node">
<title>prose_116</title>
<ellipse fill="none" stroke="#000000" cx="9257.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9257.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_116 -->
<g id="edge116" class="edge">
<title>section_11&#45;&gt;prose_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9224.797,-2428.5129C9230.6526,-2415.7448 9238.5967,-2398.4227 9245.1889,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="9248.5071,-2385.2091 9249.4944,-2374.6604 9242.1443,-2382.2911 9248.5071,-2385.2091"/>
</g>
<!-- prose_117 -->
<g id="node118" class="node">
<title>prose_117</title>
<ellipse fill="none" stroke="#000000" cx="9515.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9515.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_117 -->
<g id="edge117" class="edge">
<title>section_11&#45;&gt;prose_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9263.8774,-2432.4386C9322.9398,-2414.7792 9422.7361,-2384.9404 9477.2098,-2368.6529"/>
<polygon fill="#000000" stroke="#000000" points="9478.2555,-2371.9935 9486.8338,-2365.7754 9476.2502,-2365.2868 9478.2555,-2371.9935"/>
</g>
<!-- section_118 -->
<g id="node119" class="node">
<title>section_118</title>
<ellipse fill="none" stroke="#000000" cx="10002.5" cy="-2357.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10002.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 218&#45;223</text>
</g>
<!-- section_11&#45;&gt;section_118 -->
<g id="edge118" class="edge">
<title>section_11&#45;&gt;section_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9284.8774,-2438.8271C9430.3717,-2422.2785 9769.8846,-2383.6621 9923.9594,-2366.1375"/>
<polygon fill="#000000" stroke="#000000" points="9924.7413,-2369.5713 9934.2817,-2364.9635 9923.9502,-2362.6161 9924.7413,-2369.5713"/>
</g>
<!-- header_125 -->
<g id="node126" class="node">
<title>header_125</title>
<ellipse fill="none" stroke="#000000" cx="10299.5" cy="-2357.2043" rx="81.2629" ry="18"/>
<text text-anchor="middle" x="10299.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section:weed()</text>
</g>
<!-- section_12&#45;&gt;header_125 -->
<g id="edge125" class="edge">
<title>section_12&#45;&gt;header_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10352.1439,-2428.5129C10342.5718,-2415.5471 10329.5328,-2397.8852 10318.8265,-2383.383"/>
<polygon fill="#000000" stroke="#000000" points="10321.5914,-2381.2352 10312.8362,-2375.2688 10315.9598,-2385.3928 10321.5914,-2381.2352"/>
</g>
<!-- prose_126 -->
<g id="node127" class="node">
<title>prose_126</title>
<ellipse fill="none" stroke="#000000" cx="10431.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10431.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_126 -->
<g id="edge126" class="edge">
<title>section_12&#45;&gt;prose_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10378.8561,-2428.5129C10388.6801,-2415.2059 10402.1558,-2396.9523 10413.0137,-2382.2448"/>
<polygon fill="#000000" stroke="#000000" points="10415.9332,-2384.1831 10419.0568,-2374.0592 10410.3016,-2380.0255 10415.9332,-2384.1831"/>
</g>
<!-- codeblock_127 -->
<g id="node128" class="node">
<title>codeblock_127</title>
<ellipse fill="none" stroke="#000000" cx="10729.5" cy="-2357.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10729.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 366&#45;377</text>
</g>
<!-- section_12&#45;&gt;codeblock_127 -->
<g id="edge127" class="edge">
<title>section_12&#45;&gt;codeblock_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10418.4287,-2433.6048C10483.172,-2417.7036 10592.8117,-2390.7756 10663.1349,-2373.5039"/>
<polygon fill="#000000" stroke="#000000" points="10664.3386,-2376.8123 10673.2151,-2371.0281 10662.6689,-2370.0144 10664.3386,-2376.8123"/>
</g>
<!-- header_130 -->
<g id="node131" class="node">
<title>header_130</title>
<ellipse fill="none" stroke="#000000" cx="11537.5" cy="-2357.2043" rx="110.7653" ry="18"/>
<text text-anchor="middle" x="11537.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section(header, linum)</text>
</g>
<!-- section_13&#45;&gt;header_130 -->
<g id="edge130" class="edge">
<title>section_13&#45;&gt;header_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11703.3864,-2430.6214C11670.3639,-2416.0065 11621.2929,-2394.2889 11585.0829,-2378.2633"/>
<polygon fill="#000000" stroke="#000000" points="11586.2652,-2374.9591 11575.7043,-2374.1125 11583.4322,-2381.3603 11586.2652,-2374.9591"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="11698.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11698.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_13&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11731.203,-2428.5129C11725.3474,-2415.7448 11717.4033,-2398.4227 11710.8111,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="11713.8557,-2382.2911 11706.5056,-2374.6604 11707.4929,-2385.2091 11713.8557,-2382.2911"/>
</g>
<!-- prose_132 -->
<g id="node133" class="node">
<title>prose_132</title>
<ellipse fill="none" stroke="#000000" cx="11780.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11780.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_132 -->
<g id="edge132" class="edge">
<title>section_13&#45;&gt;prose_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11747.797,-2428.5129C11753.6526,-2415.7448 11761.5967,-2398.4227 11768.1889,-2384.0486"/>
<polygon fill="#000000" stroke="#000000" points="11771.5071,-2385.2091 11772.4944,-2374.6604 11765.1443,-2382.2911 11771.5071,-2385.2091"/>
</g>
<!-- prose_133 -->
<g id="node134" class="node">
<title>prose_133</title>
<ellipse fill="none" stroke="#000000" cx="12006.5" cy="-2357.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12006.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_133 -->
<g id="edge133" class="edge">
<title>section_13&#45;&gt;prose_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11783.5896,-2431.8417C11835.4147,-2414.4891 11920.5099,-2385.9965 11969.1991,-2369.6938"/>
<polygon fill="#000000" stroke="#000000" points="11970.3498,-2372.9996 11978.721,-2366.5056 11968.1272,-2366.3618 11970.3498,-2372.9996"/>
</g>
<!-- codeblock_134 -->
<g id="node135" class="node">
<title>codeblock_134</title>
<ellipse fill="none" stroke="#000000" cx="12358.5" cy="-2357.2043" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="12358.5" y="-2353.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 391&#45;411</text>
</g>
<!-- section_13&#45;&gt;codeblock_134 -->
<g id="edge134" class="edge">
<title>section_13&#45;&gt;codeblock_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11804.2827,-2437.248C11917.8163,-2420.8507 12152.4648,-2386.9613 12276.8938,-2368.9904"/>
<polygon fill="#000000" stroke="#000000" points="12277.7244,-2372.4069 12287.1213,-2367.5133 12276.7237,-2365.4787 12277.7244,-2372.4069"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1373.5,-2170.5043 895.5,-2170.5043 895.5,-2099.9037 1373.5,-2099.9037 1373.5,-2170.5043"/>
<text text-anchor="middle" x="1134.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;The array portion of a section starts at [1] with a header. The</text>
<text text-anchor="middle" x="1134.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> rest consists, optionally, of nodes of types Block and Section.</text>
</g>
<!-- prose_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1862.1566,-2340.7958C1854.9274,-2333.6725 1845.5656,-2326.0098 1835.5,-2321.8043 1649.1438,-2243.9423 1574.685,-2347.9012 1382.5,-2285.8043 1308.8693,-2262.0134 1234.3076,-2212.5486 1186.4439,-2176.7874"/>
<polygon fill="#000000" stroke="#000000" points="1188.5012,-2173.9552 1178.4104,-2170.7261 1184.2851,-2179.5431 1188.5012,-2173.9552"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1877,-2185.8049 1392,-2185.8049 1392,-2084.6031 1877,-2084.6031 1877,-2185.8049"/>
<text text-anchor="middle" x="1634.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : The header for the section.</text>
<text text-anchor="middle" x="1634.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level : The header level, lifted from the header for ease of use</text>
<text text-anchor="middle" x="1634.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines : An array of the lines owned by the section. Note that </text>
<text text-anchor="middle" x="1634.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this doesn&#39;t include the header. </text>
</g>
<!-- prose_22&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_22&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2053.4224,-2341.1912C2046.1737,-2334.328 2037.0038,-2326.7654 2027.5,-2321.8043 1970.1649,-2291.8744 1946.2135,-2310.6521 1886.5,-2285.8043 1826.1287,-2260.6827 1762.9761,-2222.9161 1714.993,-2191.4883"/>
<polygon fill="#000000" stroke="#000000" points="1716.7932,-2188.4829 1706.518,-2185.9001 1712.9398,-2194.3269 1716.7932,-2188.4829"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="1950.5" cy="-2135.204" rx="55.1697" ry="18"/>
<text text-anchor="middle" x="1950.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Includes</text>
</g>
<!-- section_23&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_23&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2152.2548,-2341.3333C2139.0969,-2335.028 2123.6698,-2327.8516 2109.5,-2321.8043 2068.3537,-2304.2441 2047.7864,-2316.7715 2015.5,-2285.8043 1980.6356,-2252.3644 1963.435,-2197.1119 1955.7976,-2163.6394"/>
<polygon fill="#000000" stroke="#000000" points="1959.1622,-2162.6365 1953.6437,-2153.5923 1952.3177,-2164.1038 1959.1622,-2162.6365"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2056.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2056.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_23&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_23&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2157.0358,-2340.8259C2137.9566,-2328.0949 2113.3788,-2308.7672 2098.5,-2285.8043 2073.8345,-2247.7372 2063.4742,-2195.196 2059.2533,-2163.298"/>
<polygon fill="#000000" stroke="#000000" points="2062.7222,-2162.8293 2058.0455,-2153.3226 2055.773,-2163.6708 2062.7222,-2162.8293"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;43</text>
</g>
<!-- section_23&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_23&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.5,-2339.0371C2184.5,-2300.4018 2184.5,-2209.8394 2184.5,-2163.5425"/>
<polygon fill="#000000" stroke="#000000" points="2188.0001,-2163.3109 2184.5,-2153.3109 2181.0001,-2163.3109 2188.0001,-2163.3109"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1969.5,-1839.4035 1915.5,-1839.4035 1915.5,-1803.4035 1969.5,-1803.4035 1969.5,-1839.4035"/>
</g>
<!-- prose_26&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_26&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2054.4449,-2116.8829C2050.4833,-2087.3031 2039.8287,-2027.9635 2014.5,-1984.6037 2003.0868,-1965.0656 1989.9507,-1968.1199 1978.5,-1948.6037 1960.2492,-1917.4976 1950.8398,-1876.6517 1946.2943,-1849.7436"/>
<polygon fill="#000000" stroke="#000000" points="1949.7447,-1849.1541 1944.7319,-1839.8202 1942.8299,-1850.2429 1949.7447,-1849.1541"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2297.5,-1903.2038 1987.5,-1903.2038 1987.5,-1739.6031 2297.5,-1739.6031 2297.5,-1903.2038"/>
<text text-anchor="middle" x="2142.5" y="-1888.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1825.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1793.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Header = require &quot;grym/header&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1778.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Block = require &quot;grym/block&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1763.1034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1747.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_27&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.0604,-2116.9764C2176.8601,-2078.1232 2164.3793,-1984.873 2154.8154,-1913.4175"/>
<polygon fill="#000000" stroke="#000000" points="2158.2821,-1912.9347 2153.4864,-1903.4874 2151.344,-1913.8633 2158.2821,-1912.9347"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2333.5,-2153.204 2279.5,-2153.204 2279.5,-2117.204 2333.5,-2117.204 2333.5,-2153.204"/>
</g>
<!-- prose_31&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_31&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2521.4653,-2341.1082C2514.2252,-2334.2281 2505.0502,-2326.6754 2495.5,-2321.8043 2433.2703,-2290.0636 2391.9839,-2335.1129 2342.5,-2285.8043 2310.0243,-2253.4437 2304.8414,-2197.3628 2304.9999,-2163.5274"/>
<polygon fill="#000000" stroke="#000000" points="2308.5021,-2163.4526 2305.2112,-2153.3818 2301.5036,-2163.3067 2308.5021,-2163.4526"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2689.5,-2247.5045 2351.5,-2247.5045 2351.5,-2022.9035 2689.5,-2022.9035 2689.5,-2247.5045"/>
<text text-anchor="middle" x="2520.5" y="-2232.4042" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="2520.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.__tostring(section)</text>
<text text-anchor="middle" x="2520.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(section) do</text>
<text text-anchor="middle" x="2520.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2520.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (repr ~= &quot;&quot; and repr ~= &quot;\n&quot;) then</text>
<text text-anchor="middle" x="2520.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot;repr: &quot; .. repr .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="2520.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2046.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2520.5" y="-2031.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_32&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2652.7159,-2339.0371C2640.4762,-2320.1676 2620.2022,-2288.9118 2599.1628,-2256.476"/>
<polygon fill="#000000" stroke="#000000" points="2601.8877,-2254.2452 2593.5093,-2247.7602 2596.0149,-2258.0545 2601.8877,-2254.2452"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="2797.5" cy="-2135.204" rx="90.4762" ry="18"/>
<text text-anchor="middle" x="2797.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : dotLabel(section)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2926.2799,-2339.4124C2901.7044,-2300.4427 2843.0167,-2207.3805 2814.1338,-2161.5805"/>
<polygon fill="#000000" stroke="#000000" points="2817.0683,-2159.6722 2808.7736,-2153.0807 2811.1473,-2163.4062 2817.0683,-2159.6722"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2937.5,-2339.0371C2937.5,-2300.4018 2937.5,-2209.8394 2937.5,-2163.5425"/>
<polygon fill="#000000" stroke="#000000" points="2941.0001,-2163.3109 2937.5,-2153.3109 2934.0001,-2163.3109 2941.0001,-2163.3109"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3019.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3019.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2949.4575,-2339.371C2958.4545,-2325.3105 2970.5524,-2304.9465 2978.5,-2285.8043 2995.6021,-2244.6127 3007.6613,-2194.1342 3014.0926,-2163.3383"/>
<polygon fill="#000000" stroke="#000000" points="3017.5681,-2163.8108 3016.1317,-2153.3138 3010.7085,-2162.4154 3017.5681,-2163.8108"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3147.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3147.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;77</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2974.2167,-2342.1026C3000.5981,-2329.8763 3035.7337,-2310.6225 3060.5,-2285.8043 3096.6456,-2249.5828 3123.0611,-2195.3205 3136.7889,-2162.7762"/>
<polygon fill="#000000" stroke="#000000" points="3140.0712,-2163.9972 3140.6387,-2153.4175 3133.5975,-2161.3341 3140.0712,-2163.9972"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="3399.5" cy="-2135.204" rx="104.4491" ry="18"/>
<text text-anchor="middle" x="3399.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toMarkdown(section)</text>
</g>
<!-- section_34&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_34&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3601.4895,-2341.5606C3575.4699,-2328.876 3540.0349,-2309.2845 3513.5,-2285.8043 3471.7027,-2248.8186 3435.093,-2194.4448 3415.248,-2162.1517"/>
<polygon fill="#000000" stroke="#000000" points="3418.0453,-2160.0139 3409.8723,-2153.2719 3412.0571,-2163.6391 3418.0453,-2160.0139"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="3554.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3554.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_34&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3624.5425,-2339.371C3615.5455,-2325.3105 3603.4476,-2304.9465 3595.5,-2285.8043 3578.3979,-2244.6127 3566.3387,-2194.1342 3559.9074,-2163.3383"/>
<polygon fill="#000000" stroke="#000000" points="3563.2915,-2162.4154 3557.8683,-2153.3138 3556.4319,-2163.8108 3563.2915,-2162.4154"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_34&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636.5,-2339.0371C3636.5,-2300.4018 3636.5,-2209.8394 3636.5,-2163.5425"/>
<polygon fill="#000000" stroke="#000000" points="3640.0001,-2163.3109 3636.5,-2153.3109 3633.0001,-2163.3109 3640.0001,-2163.3109"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3718.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3718.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_34&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3648.4575,-2339.371C3657.4545,-2325.3105 3669.5524,-2304.9465 3677.5,-2285.8043 3694.6021,-2244.6127 3706.6613,-2194.1342 3713.0926,-2163.3383"/>
<polygon fill="#000000" stroke="#000000" points="3716.5681,-2163.8108 3715.1317,-2153.3138 3709.7085,-2162.4154 3716.5681,-2163.8108"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="3851.5" cy="-2135.204" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3851.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;101</text>
</g>
<!-- section_34&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_34&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3673.3147,-2341.7904C3699.5757,-2329.4681 3734.5194,-2310.2305 3759.5,-2285.8043 3796.6245,-2249.5036 3824.914,-2195.2669 3839.7969,-2162.7491"/>
<polygon fill="#000000" stroke="#000000" points="3843.0912,-2163.9559 3843.9802,-2153.3985 3836.7015,-2161.0972 3843.0912,-2163.9559"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="4027.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4027.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 103&#45;124</text>
</g>
<!-- section_34&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_34&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3698.8839,-2348.6806C3776.8048,-2337.022 3904.5202,-2314.265 3942.5,-2285.8043 3983.8691,-2254.8036 4008.042,-2197.3738 4019.4358,-2163.0925"/>
<polygon fill="#000000" stroke="#000000" points="4022.8701,-2163.842 4022.5664,-2153.2515 4016.1995,-2161.7199 4022.8701,-2163.842"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2563,-1841.3055 2316,-1841.3055 2316,-1801.5014 2563,-1801.5014 2563,-1841.3055"/>
<text text-anchor="middle" x="2439.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Produces a label for a dotfile.</text>
</g>
<!-- prose_38&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_38&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2938.5309,-2117.009C2939.2573,-2084.8178 2935.623,-2018.0719 2896.5,-1984.6037 2841.2836,-1937.3681 2637.2861,-1979.4622 2571.5,-1948.6037 2523.8304,-1926.2432 2482.6438,-1879.6574 2459.4707,-1849.4977"/>
<polygon fill="#000000" stroke="#000000" points="2462.2317,-1847.3459 2453.4219,-1841.4605 2456.6387,-1851.5552 2462.2317,-1847.3459"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2828,-1839.4035 2581,-1839.4035 2581,-1803.4035 2828,-1803.4035 2828,-1839.4035"/>
<text text-anchor="middle" x="2704.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return : string in dot format.</text>
</g>
<!-- prose_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3020.0514,-2117.0329C3019.9684,-2085.4788 3015.0296,-2020.4992 2978.5,-1984.6037 2932.0606,-1938.9705 2893.3989,-1980.2506 2836.5,-1948.6037 2790.1754,-1922.8383 2748.2539,-1876.7552 2724.6154,-1847.6993"/>
<polygon fill="#000000" stroke="#000000" points="2727.1412,-1845.2536 2718.1629,-1839.6284 2721.6736,-1849.6247 2727.1412,-1845.2536"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3247,-1856.0047 2846,-1856.0047 2846,-1786.8022 3247,-1786.8022 3247,-1856.0047"/>
<text text-anchor="middle" x="3046.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(section)</text>
<text text-anchor="middle" x="3046.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;section: &quot; .. tostring(section.line_first) </text>
<text text-anchor="middle" x="3046.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(section.line_last)</text>
<text text-anchor="middle" x="3046.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_40&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3141.6333,-2116.9764C3126.0637,-2068.6027 3083.3543,-1935.9074 3060.8334,-1865.9365"/>
<polygon fill="#000000" stroke="#000000" points="3064.0584,-1864.5323 3057.6628,-1856.0856 3057.395,-1866.677 3064.0584,-1864.5323"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3540,-1841.3055 3265,-1841.3055 3265,-1801.5014 3540,-1801.5014 3540,-1841.3055"/>
<text text-anchor="middle" x="3402.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Translates the Section to markdown.</text>
</g>
<!-- prose_45&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>prose_45&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3551.3699,-2116.9273C3545.9731,-2087.9106 3533.4348,-2029.9486 3512.5,-1984.6037 3488.8348,-1933.3449 3449.8927,-1880.2662 3425.2535,-1849.0715"/>
<polygon fill="#000000" stroke="#000000" points="3427.985,-1846.8831 3419.0118,-1841.2499 3422.5135,-1851.2493 3427.985,-1846.8831"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3735,-1839.4035 3558,-1839.4035 3558,-1803.4035 3735,-1803.4035 3735,-1839.4035"/>
<text text-anchor="middle" x="3646.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the Section.</text>
</g>
<!-- prose_46&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>prose_46&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3637.0809,-2116.9764C3638.7516,-2064.5477 3643.5789,-1913.0682 3645.5967,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="3649.0971,-1849.7878 3645.9175,-1839.6814 3642.1007,-1849.5648 3649.0971,-1849.7878"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3986,-1839.4035 3753,-1839.4035 3753,-1803.4035 3986,-1803.4035 3986,-1839.4035"/>
<text text-anchor="middle" x="3869.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: A Markdown string. &#160;</text>
</g>
<!-- prose_47&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_47&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3721.6528,-2116.9378C3727.0808,-2087.9354 3739.661,-2029.9927 3760.5,-1984.6037 3784.28,-1932.8088 3823.521,-1879.0229 3847.8653,-1847.9615"/>
<polygon fill="#000000" stroke="#000000" points="3850.8457,-1849.8357 3854.3115,-1839.8237 3845.3586,-1845.4892 3850.8457,-1849.8357"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4440.5,-1918.3042 4004.5,-1918.3042 4004.5,-1724.5027 4440.5,-1724.5027 4440.5,-1918.3042"/>
<text text-anchor="middle" x="4222.5" y="-1902.9036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.toMarkdown(section)</text>
<text text-anchor="middle" x="4222.5" y="-1887.5036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4222.5" y="-1872.1036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(section) do</text>
<text text-anchor="middle" x="4222.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="4222.5" y="-1841.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="4222.5" y="-1825.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="4222.5" y="-1810.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method in &quot; .. block.id)</text>
<text text-anchor="middle" x="4222.5" y="-1795.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4222.5" y="-1779.7034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4222.5" y="-1748.3034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4222.5" y="-1732.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_48&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3859.0343,-2117.0244C3872.3635,-2086.5911 3902.6018,-2024.7278 3943.5,-1984.6037 3952.9511,-1975.3315 3993.3519,-1950.7157 4040.5984,-1923.3295"/>
<polygon fill="#000000" stroke="#000000" points="4042.5885,-1926.2219 4049.4941,-1918.1867 4039.0849,-1920.1617 4042.5885,-1926.2219"/>
</g>
<!-- header_54 -->
<g id="node55" class="node">
<title>header_54</title>
<ellipse fill="none" stroke="#000000" cx="4509.5" cy="-1821.4035" rx="50.8" ry="18"/>
<text text-anchor="middle" x="4509.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : asserts</text>
</g>
<!-- section_49&#45;&gt;header_54 -->
<g id="edge54" class="edge">
<title>section_49&#45;&gt;header_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.7701,-2117.1057C4040.5169,-2084.4479 4063.7974,-2016.1344 4111.5,-1984.6037 4237.5289,-1901.3005 4326.3773,-2036.1453 4449.5,-1948.6037 4482.2535,-1925.3156 4497.6923,-1879.3917 4504.5416,-1849.5659"/>
<polygon fill="#000000" stroke="#000000" points="4507.9723,-1850.2592 4506.6204,-1839.751 4501.1242,-1848.8088 4507.9723,-1850.2592"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="4610.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4610.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_49&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.6867,-2116.9774C4040.2978,-2084.1113 4063.3658,-2015.4715 4111.5,-1984.6037 4197.4387,-1929.4924 4489.3968,-2011.8982 4569.5,-1948.6037 4599.3333,-1925.0306 4607.7726,-1879.514 4609.9831,-1849.8073"/>
<polygon fill="#000000" stroke="#000000" points="4613.4873,-1849.8257 4610.5438,-1839.648 4606.498,-1849.4399 4613.4873,-1849.8257"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="4787.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4787.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 105&#45;122</text>
</g>
<!-- section_49&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>section_49&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.5845,-2117.1802C4040.085,-2084.3263 4063.0569,-2015.2653 4111.5,-1984.6037 4213.1214,-1920.2835 4541.1664,-1996.4628 4651.5,-1948.6037 4701.9248,-1926.7311 4745.3572,-1877.8078 4768.8444,-1847.4109"/>
<polygon fill="#000000" stroke="#000000" points="4771.6879,-1849.4534 4774.9294,-1839.3666 4766.1052,-1845.2304 4771.6879,-1849.4534"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4601.5,-847.1016 4547.5,-847.1016 4547.5,-811.1016 4601.5,-811.1016 4601.5,-847.1016"/>
</g>
<!-- prose_55&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_55&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4609.8444,-1803.3331C4605.4981,-1683.5304 4580.8488,-1004.1008 4575.517,-857.1337"/>
<polygon fill="#000000" stroke="#000000" points="4579.014,-856.9841 4575.1536,-847.1176 4572.0186,-857.238 4579.014,-856.9841"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5027.5,-956.5024 4619.5,-956.5024 4619.5,-701.7008 5027.5,-701.7008 5027.5,-956.5024"/>
<text text-anchor="middle" x="4823.5" y="-941.1019" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.check(section)</text>
<text text-anchor="middle" x="4823.5" y="-925.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="4823.5" y="-910.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (i == 1) then</text>
<text text-anchor="middle" x="4823.5" y="-894.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.header then</text>
<text text-anchor="middle" x="4823.5" y="-879.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;header&quot;)</text>
<text text-anchor="middle" x="4823.5" y="-864.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-848.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4823.5" y="-833.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;section&quot; or v.id == &quot;block&quot;)</text>
<text text-anchor="middle" x="4823.5" y="-817.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-802.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-787.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.level)</text>
<text text-anchor="middle" x="4823.5" y="-771.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id)</text>
<text text-anchor="middle" x="4823.5" y="-756.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.lines)</text>
<text text-anchor="middle" x="4823.5" y="-740.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_first)</text>
<text text-anchor="middle" x="4823.5" y="-725.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_last)</text>
<text text-anchor="middle" x="4823.5" y="-710.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_56&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4788.1556,-1803.3331C4791.7955,-1703.0028 4809.6747,-1210.1811 4818.5223,-966.3072"/>
<polygon fill="#000000" stroke="#000000" points="4822.02,-966.4315 4818.8849,-956.3111 4815.0246,-966.1776 4822.02,-966.4315"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4304.5,-2155.1061 4120.5,-2155.1061 4120.5,-2115.3019 4304.5,-2115.3019 4304.5,-2155.1061"/>
<text text-anchor="middle" x="4212.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Add a line to a section.</text>
</g>
<!-- prose_60&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>prose_60&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4669.0996,-2340.9294C4661.858,-2333.8354 4652.502,-2326.1587 4642.5,-2321.8043 4507.6319,-2263.0886 4439.3219,-2362 4313.5,-2285.8043 4267.2251,-2257.781 4237.5654,-2199.5199 4223.0658,-2164.2433"/>
<polygon fill="#000000" stroke="#000000" points="4226.3186,-2162.9512 4219.377,-2154.9472 4219.8122,-2165.5331 4226.3186,-2162.9512"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4744.5,-2185.605 4322.5,-2185.605 4322.5,-2084.803 4744.5,-2084.803 4744.5,-2185.605"/>
<text text-anchor="middle" x="4533.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">These lines are later translated into blocks, and when the</text>
<text text-anchor="middle" x="4533.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">parser is mature, =section.line= will be set to nil before</text>
<text text-anchor="middle" x="4533.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000">the Doc is returned. &#160;</text>
<text text-anchor="middle" x="4533.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4533.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the section</text>
<text text-anchor="middle" x="4533.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; line: the line</text>
</g>
<!-- prose_61&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_61&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4749.1862,-2341.5937C4717.4333,-2311.2094 4645.885,-2242.7449 4593.8784,-2192.9799"/>
<polygon fill="#000000" stroke="#000000" points="4595.999,-2190.1649 4586.3541,-2185.78 4591.1594,-2195.2225 4595.999,-2190.1649"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="4932.5,-2153.204 4762.5,-2153.204 4762.5,-2117.204 4932.5,-2117.204 4932.5,-2153.204"/>
<text text-anchor="middle" x="4847.5" y="-2131.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : the section</text>
</g>
<!-- prose_62&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>prose_62&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4847.5,-2339.0371C4847.5,-2300.4018 4847.5,-2209.8394 4847.5,-2163.5425"/>
<polygon fill="#000000" stroke="#000000" points="4851.0001,-2163.3109 4847.5,-2153.3109 4844.0001,-2163.3109 4851.0001,-2163.3109"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="5274.5,-2169.8053 4950.5,-2169.8053 4950.5,-2100.6027 5274.5,-2100.6027 5274.5,-2169.8053"/>
<text text-anchor="middle" x="5112.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addLine(section, line)</text>
<text text-anchor="middle" x="5112.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines[#section.lines + 1] = line</text>
<text text-anchor="middle" x="5112.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5112.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5054.6556,-2339.0371C5064.4431,-2304.5476 5085.9738,-2228.6774 5099.8283,-2179.8567"/>
<polygon fill="#000000" stroke="#000000" points="5103.213,-2180.7496 5102.5761,-2170.174 5096.4789,-2178.8386 5103.213,-2180.7496"/>
</g>
<!-- header_70 -->
<g id="node71" class="node">
<title>header_70</title>
<ellipse fill="none" stroke="#000000" cx="5468.5" cy="-2135.204" rx="175.5244" ry="18"/>
<text text-anchor="middle" x="5468.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : addSection(section, newsection, linum)</text>
</g>
<!-- section_64&#45;&gt;header_70 -->
<g id="edge70" class="edge">
<title>section_64&#45;&gt;header_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5714.549,-2339.7843C5667.3083,-2300.5055 5552.3794,-2204.9465 5497.9776,-2159.7135"/>
<polygon fill="#000000" stroke="#000000" points="5500.0224,-2156.8618 5490.0954,-2153.1597 5495.547,-2162.2444 5500.0224,-2156.8618"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="5694.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5694.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_64&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5732.1448,-2339.0371C5724.9944,-2300.3203 5708.2134,-2209.457 5699.6797,-2163.2501"/>
<polygon fill="#000000" stroke="#000000" points="5703.1021,-2162.5089 5697.8441,-2153.3109 5696.2185,-2163.7803 5703.1021,-2162.5089"/>
</g>
<!-- prose_72 -->
<g id="node73" class="node">
<title>prose_72</title>
<ellipse fill="none" stroke="#000000" cx="5776.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5776.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_72 -->
<g id="edge72" class="edge">
<title>section_64&#45;&gt;prose_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.8552,-2339.0371C5746.0056,-2300.3203 5762.7866,-2209.457 5771.3203,-2163.2501"/>
<polygon fill="#000000" stroke="#000000" points="5774.7815,-2163.7803 5773.1559,-2153.3109 5767.8979,-2162.5089 5774.7815,-2163.7803"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5858.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5858.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_64&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5762.1032,-2340.3009C5780.2524,-2327.4483 5803.4601,-2308.1935 5817.5,-2285.8043 5841.5571,-2247.4408 5851.6771,-2194.9902 5855.8046,-2163.1908"/>
<polygon fill="#000000" stroke="#000000" points="5859.2815,-2163.5917 5856.9861,-2153.2486 5852.3304,-2162.7657 5859.2815,-2163.5917"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="5996.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5996.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 156&#45;164</text>
</g>
<!-- section_64&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_64&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5785.974,-2343.7355C5820.7631,-2332.5444 5866.496,-2313.8638 5899.5,-2285.8043 5939.8687,-2251.4833 5969.4683,-2196.1406 5984.7527,-2162.9588"/>
<polygon fill="#000000" stroke="#000000" points="5988.1321,-2163.9768 5989.0327,-2153.4203 5981.7456,-2161.1111 5988.1321,-2163.9768"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="6985.5" cy="-2135.204" rx="137.8106" ry="18"/>
<text text-anchor="middle" x="6985.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Helper Functions for Blocking</text>
</g>
<!-- section_65&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_65&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7501.3392,-2351.1036C7393.717,-2340.9703 7195.4208,-2318.4962 7132.5,-2285.8043 7075.4128,-2256.1433 7027.3132,-2196.0389 7002.8443,-2161.4013"/>
<polygon fill="#000000" stroke="#000000" points="7005.7162,-2159.4007 6997.1415,-2153.1778 6999.9641,-2163.3898 7005.7162,-2159.4007"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="7173.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7173.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_65&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7500.4654,-2351.6196C7408.4134,-2343.033 7256.0957,-2323.48 7215.5,-2285.8043 7181.4796,-2254.231 7174.1684,-2197.6456 7173.0641,-2163.5481"/>
<polygon fill="#000000" stroke="#000000" points="7176.5601,-2163.2695 7172.8976,-2153.3278 7169.561,-2163.3835 7176.5601,-2163.2695"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="7311.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7311.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 171&#45;175</text>
</g>
<!-- section_65&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_65&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7522.026,-2343.7355C7487.2369,-2332.5444 7441.504,-2313.8638 7408.5,-2285.8043 7368.1313,-2251.4833 7338.5317,-2196.1406 7323.2473,-2162.9588"/>
<polygon fill="#000000" stroke="#000000" points="7326.2544,-2161.1111 7318.9673,-2153.4203 7319.8679,-2163.9768 7326.2544,-2161.1111"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="7449.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7449.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_65&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7545.8968,-2340.3009C7527.7476,-2327.4483 7504.5399,-2308.1935 7490.5,-2285.8043 7466.4429,-2247.4408 7456.3229,-2194.9902 7452.1954,-2163.1908"/>
<polygon fill="#000000" stroke="#000000" points="7455.6696,-2162.7657 7451.0139,-2153.2486 7448.7185,-2163.5917 7455.6696,-2162.7657"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="7531.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7531.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_65&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7569.1448,-2339.0371C7561.9944,-2300.3203 7545.2134,-2209.457 7536.6797,-2163.2501"/>
<polygon fill="#000000" stroke="#000000" points="7540.1021,-2162.5089 7534.8441,-2153.3109 7533.2185,-2163.7803 7540.1021,-2162.5089"/>
</g>
<!-- prose_84 -->
<g id="node85" class="node">
<title>prose_84</title>
<ellipse fill="none" stroke="#000000" cx="7613.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7613.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_84 -->
<g id="edge84" class="edge">
<title>section_65&#45;&gt;prose_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7575.8552,-2339.0371C7583.0056,-2300.3203 7599.7866,-2209.457 7608.3203,-2163.2501"/>
<polygon fill="#000000" stroke="#000000" points="7611.7815,-2163.7803 7610.1559,-2153.3109 7604.8979,-2162.5089 7611.7815,-2163.7803"/>
</g>
<!-- codeblock_85 -->
<g id="node86" class="node">
<title>codeblock_85</title>
<ellipse fill="none" stroke="#000000" cx="7852.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7852.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 185&#45;202</text>
</g>
<!-- section_65&#45;&gt;codeblock_85 -->
<g id="edge85" class="edge">
<title>section_65&#45;&gt;codeblock_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7594.4711,-2339.7843C7644.2365,-2300.3274 7765.6309,-2204.0788 7822.3592,-2159.1014"/>
<polygon fill="#000000" stroke="#000000" points="7824.582,-2161.8056 7830.2435,-2152.8503 7820.2331,-2156.3205 7824.582,-2161.8056"/>
</g>
<!-- section_86 -->
<g id="node87" class="node">
<title>section_86</title>
<ellipse fill="none" stroke="#000000" cx="8163.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8163.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 224&#45;229</text>
</g>
<!-- section_65&#45;&gt;section_86 -->
<g id="edge86" class="edge">
<title>section_65&#45;&gt;section_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7645.4492,-2352.487C7723.1836,-2345.4001 7848.5647,-2327.9796 7948.5,-2285.8043 8023.3692,-2254.2075 8098.252,-2193.5599 8136.8044,-2159.6622"/>
<polygon fill="#000000" stroke="#000000" points="8139.3154,-2162.1132 8144.4666,-2152.8549 8134.6662,-2156.8801 8139.3154,-2162.1132"/>
</g>
<!-- section_87 -->
<g id="node88" class="node">
<title>section_87</title>
<ellipse fill="none" stroke="#000000" cx="8376.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8376.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 230&#45;234</text>
</g>
<!-- section_65&#45;&gt;section_87 -->
<g id="edge87" class="edge">
<title>section_65&#45;&gt;section_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7648.0387,-2356.1623C7801.7308,-2352.9289 8144.951,-2339.7074 8247.5,-2285.8043 8301.0691,-2257.6466 8341.8961,-2197.1466 8362.2209,-2161.9994"/>
<polygon fill="#000000" stroke="#000000" points="8365.3057,-2163.6545 8367.173,-2153.2255 8359.2096,-2160.2138 8365.3057,-2163.6545"/>
</g>
<!-- section_88 -->
<g id="node89" class="node">
<title>section_88</title>
<ellipse fill="none" stroke="#000000" cx="8591.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8591.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 235&#45;241</text>
</g>
<!-- section_65&#45;&gt;section_88 -->
<g id="edge88" class="edge">
<title>section_65&#45;&gt;section_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7647.2391,-2354.424C7848.0092,-2346.5032 8388.7498,-2322.0311 8460.5,-2285.8043 8515.0212,-2258.2765 8556.5632,-2197.2686 8577.1548,-2161.9294"/>
<polygon fill="#000000" stroke="#000000" points="8580.2676,-2163.5357 8582.1675,-2153.1126 8574.1824,-2160.076 8580.2676,-2163.5357"/>
</g>
<!-- section_89 -->
<g id="node90" class="node">
<title>section_89</title>
<ellipse fill="none" stroke="#000000" cx="8813.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8813.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 242&#45;360</text>
</g>
<!-- section_65&#45;&gt;section_89 -->
<g id="edge89" class="edge">
<title>section_65&#45;&gt;section_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7648.0159,-2355.5653C7881.7868,-2350.0425 8583.4031,-2329.9333 8675.5,-2285.8043 8731.8665,-2258.7957 8776.031,-2197.5922 8798.0773,-2162.0806"/>
<polygon fill="#000000" stroke="#000000" points="8801.2587,-2163.5843 8803.4507,-2153.2187 8795.273,-2159.9549 8801.2587,-2163.5843"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="5180.5,-1841.3055 4912.5,-1841.3055 4912.5,-1801.5014 5180.5,-1801.5014 5180.5,-1841.3055"/>
<text text-anchor="middle" x="5046.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Adds a section to the host section</text>
</g>
<!-- prose_71&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>prose_71&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5695.6324,-2117.1349C5696.5558,-2084.8369 5693.2724,-2017.5105 5653.5,-1984.6037 5573.8169,-1918.6757 5284.6678,-1989.0882 5189.5,-1948.6037 5138.6351,-1926.9657 5093.4904,-1879.7344 5068.1114,-1849.3105"/>
<polygon fill="#000000" stroke="#000000" points="5070.5283,-1846.737 5061.4891,-1841.2104 5065.1089,-1851.1676 5070.5283,-1846.737"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="5544,-1848.6039 5199,-1848.6039 5199,-1794.203 5544,-1794.203 5544,-1848.6039"/>
<text text-anchor="middle" x="5371.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: &#160;Section to contain the new section.</text>
<text text-anchor="middle" x="5371.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; newsection: &#160;The new section.</text>
<text text-anchor="middle" x="5371.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: &#160;The line number.</text>
</g>
<!-- prose_72&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>prose_72&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5777.2424,-2117.0836C5777.4832,-2085.312 5773.0672,-2019.6109 5735.5,-1984.6037 5675.1755,-1928.3901 5629.3622,-1980.9137 5553.5,-1948.6037 5499.3232,-1925.5297 5445.0003,-1884.703 5409.995,-1855.5248"/>
<polygon fill="#000000" stroke="#000000" points="5411.8593,-1852.5186 5401.9585,-1848.7471 5407.3464,-1857.8696 5411.8593,-1852.5186"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="5788.5,-1839.4035 5562.5,-1839.4035 5562.5,-1803.4035 5788.5,-1803.4035 5788.5,-1839.4035"/>
<text text-anchor="middle" x="5675.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: the parent section.</text>
</g>
<!-- prose_73&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prose_73&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5856.2419,-2117.079C5852.0207,-2087.7747 5841.1335,-2028.8136 5817.5,-1984.6037 5787.8743,-1929.1846 5736.3145,-1876.4919 5704.1484,-1846.6359"/>
<polygon fill="#000000" stroke="#000000" points="5706.1514,-1843.7242 5696.4136,-1839.5497 5701.4227,-1848.8856 5706.1514,-1843.7242"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="6166,-1879.2039 5807,-1879.2039 5807,-1763.6031 6166,-1763.6031 6166,-1879.2039"/>
<text text-anchor="middle" x="5986.5" y="-1864.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addSection(section, newsection, linum)</text>
<text text-anchor="middle" x="5986.5" y="-1848.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="5986.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="5986.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5986.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[#section + 1] = newsection</text>
<text text-anchor="middle" x="5986.5" y="-1787.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5986.5" y="-1771.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5995.9191,-2116.9764C5994.5357,-2073.5632 5990.9879,-1962.2355 5988.6631,-1889.2825"/>
<polygon fill="#000000" stroke="#000000" points="5992.1604,-1889.1377 5988.3436,-1879.2542 5985.1639,-1889.3607 5992.1604,-1889.1377"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6389,-1841.3055 6184,-1841.3055 6184,-1801.5014 6389,-1801.5014 6389,-1841.3055"/>
<text text-anchor="middle" x="6286.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Boolean match for a tagline</text>
</g>
<!-- prose_80&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>prose_80&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7174.7236,-2117.023C7175.7936,-2084.5453 7172.7371,-2016.9406 7132.5,-1984.6037 7068.7665,-1933.3838 6471.0847,-1984.2511 6397.5,-1948.6037 6353.9941,-1927.5277 6320.472,-1880.8081 6302.1284,-1850.2374"/>
<polygon fill="#000000" stroke="#000000" points="6304.9877,-1848.1924 6296.9286,-1841.3146 6298.9397,-1851.7169 6304.9877,-1848.1924"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6682,-1848.6039 6407,-1848.6039 6407,-1794.203 6682,-1794.203 6682,-1848.6039"/>
<text text-anchor="middle" x="6544.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isTagline(line)</text>
<text text-anchor="middle" x="6544.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(m.tagline_p, line)</text>
<text text-anchor="middle" x="6544.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>codeblock_81&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7305.8953,-2117.1098C7294.6175,-2084.1401 7265.7771,-2014.8957 7214.5,-1984.6037 7114.0066,-1925.2371 6798.3367,-1993.2642 6690.5,-1948.6037 6642.743,-1928.8252 6599.6846,-1886.9182 6572.9089,-1856.5996"/>
<polygon fill="#000000" stroke="#000000" points="6575.3222,-1854.0399 6566.1291,-1848.7733 6570.0314,-1858.6233 6575.3222,-1854.0399"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="7073,-1839.4035 6700,-1839.4035 6700,-1803.4035 7073,-1803.4035 7073,-1839.4035"/>
<text text-anchor="middle" x="6886.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Lookahead, counting blank lines, return the number.</text>
</g>
<!-- prose_82&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>prose_82&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7450.3996,-2116.9963C7450.8957,-2084.7847 7446.7928,-2018.0078 7407.5,-1984.6037 7352.1381,-1937.5388 7150.9315,-1973.0409 7082.5,-1948.6037 7016.7942,-1925.14 6950.9071,-1875.7892 6914.7402,-1845.9264"/>
<polygon fill="#000000" stroke="#000000" points="6916.9747,-1843.2325 6907.0572,-1839.5049 6912.4855,-1848.6035 6916.9747,-1843.2325"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="7415.5,-1840.704 7091.5,-1840.704 7091.5,-1802.1029 7415.5,-1802.1029 7415.5,-1840.704"/>
<text text-anchor="middle" x="7253.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines: the full lines array of the section</text>
<text text-anchor="middle" x="7253.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: current index into lines</text>
</g>
<!-- prose_83&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>prose_83&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7531.016,-2116.9453C7529.3101,-2086.3955 7521.9122,-2024.365 7490.5,-1984.6037 7469.7869,-1958.3852 7452.6405,-1966.6192 7424.5,-1948.6037 7374.0841,-1916.3276 7319.0937,-1874.0427 7285.4475,-1847.2914"/>
<polygon fill="#000000" stroke="#000000" points="7287.3673,-1844.3454 7277.369,-1840.8404 7282.9993,-1849.8154 7287.3673,-1844.3454"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="7793,-1839.4035 7434,-1839.4035 7434,-1803.4035 7793,-1803.4035 7793,-1839.4035"/>
<text text-anchor="middle" x="7613.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns: number of blank lines forward of index</text>
</g>
<!-- prose_84&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>prose_84&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7613.5,-2116.9764C7613.5,-2064.5477 7613.5,-1913.0682 7613.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="7617.0001,-1849.6813 7613.5,-1839.6814 7610.0001,-1849.6814 7617.0001,-1849.6813"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="8093.5,-1948.8043 7811.5,-1948.8043 7811.5,-1694.0026 8093.5,-1694.0026 8093.5,-1948.8043"/>
<text text-anchor="middle" x="7952.5" y="-1933.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fwdBlanks(lines, linum)</text>
<text text-anchor="middle" x="7952.5" y="-1918.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local fwd = 0</text>
<text text-anchor="middle" x="7952.5" y="-1902.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local index = linum + 1</text>
<text text-anchor="middle" x="7952.5" y="-1887.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if index &gt; #lines then </text>
<text text-anchor="middle" x="7952.5" y="-1871.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0</text>
<text text-anchor="middle" x="7952.5" y="-1856.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="7952.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = index, #lines do</text>
<text text-anchor="middle" x="7952.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if lines[i] == &quot;&quot; then</text>
<text text-anchor="middle" x="7952.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fwd = fwd + 1</text>
<text text-anchor="middle" x="7952.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7952.5" y="-1779.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="7952.5" y="-1764.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1748.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1733.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1717.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return fwd</text>
<text text-anchor="middle" x="7952.5" y="-1702.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_85&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>codeblock_85&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7858.3087,-2116.9764C7868.2006,-2085.9355 7889.1571,-2020.1739 7908.7966,-1958.545"/>
<polygon fill="#000000" stroke="#000000" points="7912.2338,-1959.286 7911.9354,-1948.6953 7905.5643,-1957.1605 7912.2338,-1959.286"/>
</g>
<!-- header_96 -->
<g id="node97" class="node">
<title>header_96</title>
<ellipse fill="none" stroke="#000000" cx="8163.5" cy="-1821.4035" rx="52.2623" ry="18"/>
<text text-anchor="middle" x="8163.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : List line</text>
</g>
<!-- section_86&#45;&gt;header_96 -->
<g id="edge96" class="edge">
<title>section_86&#45;&gt;header_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8163.5,-2116.9764C8163.5,-2064.5477 8163.5,-1913.0682 8163.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8167.0001,-1849.6813 8163.5,-1839.6814 8160.0001,-1849.6814 8167.0001,-1849.6813"/>
</g>
<!-- prose_97 -->
<g id="node98" class="node">
<title>prose_97</title>
<ellipse fill="none" stroke="#000000" cx="8266.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8266.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_86&#45;&gt;prose_97 -->
<g id="edge97" class="edge">
<title>section_86&#45;&gt;prose_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8169.4829,-2116.9764C8186.768,-2064.3154 8236.8536,-1911.7243 8257.4704,-1848.913"/>
<polygon fill="#000000" stroke="#000000" points="8260.8357,-1849.8832 8260.6289,-1839.2903 8254.1848,-1847.7001 8260.8357,-1849.8832"/>
</g>
<!-- header_99 -->
<g id="node100" class="node">
<title>header_99</title>
<ellipse fill="none" stroke="#000000" cx="8376.5" cy="-1821.4035" rx="59.7106" ry="18"/>
<text text-anchor="middle" x="8376.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Table line</text>
</g>
<!-- section_87&#45;&gt;header_99 -->
<g id="edge99" class="edge">
<title>section_87&#45;&gt;header_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8376.5,-2116.9764C8376.5,-2064.5477 8376.5,-1913.0682 8376.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8380.0001,-1849.6813 8376.5,-1839.6814 8373.0001,-1849.6814 8380.0001,-1849.6813"/>
</g>
<!-- prose_100 -->
<g id="node101" class="node">
<title>prose_100</title>
<ellipse fill="none" stroke="#000000" cx="8486.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8486.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_100 -->
<g id="edge100" class="edge">
<title>section_87&#45;&gt;prose_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8383.5156,-2117.0205C8396.2856,-2083.7533 8423.9921,-2010.7874 8445.5,-1948.6037 8457.2986,-1914.4917 8469.8979,-1874.8661 8477.9679,-1849.0246"/>
<polygon fill="#000000" stroke="#000000" points="8481.4023,-1849.7673 8481.0316,-1839.179 8474.7184,-1847.6874 8481.4023,-1849.7673"/>
</g>
<!-- header_102 -->
<g id="node103" class="node">
<title>header_102</title>
<ellipse fill="none" stroke="#000000" cx="8591.5" cy="-1821.4035" rx="55.3589" ry="18"/>
<text text-anchor="middle" x="8591.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Tag line </text>
</g>
<!-- section_88&#45;&gt;header_102 -->
<g id="edge102" class="edge">
<title>section_88&#45;&gt;header_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8591.5,-2116.9764C8591.5,-2064.5477 8591.5,-1913.0682 8591.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8595.0001,-1849.6813 8591.5,-1839.6814 8588.0001,-1849.6814 8595.0001,-1849.6813"/>
</g>
<!-- prose_103 -->
<g id="node104" class="node">
<title>prose_103</title>
<ellipse fill="none" stroke="#000000" cx="8696.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8696.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_88&#45;&gt;prose_103 -->
<g id="edge103" class="edge">
<title>section_88&#45;&gt;prose_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8597.7897,-2117.2282C8609.3897,-2083.9962 8634.854,-2010.6745 8655.5,-1948.6037 8666.8922,-1914.3538 8679.5791,-1874.7579 8687.7803,-1848.961"/>
<polygon fill="#000000" stroke="#000000" points="8691.21,-1849.7245 8690.8995,-1839.1342 8684.538,-1847.6066 8691.21,-1849.7245"/>
</g>
<!-- header_105 -->
<g id="node106" class="node">
<title>header_105</title>
<ellipse fill="none" stroke="#000000" cx="8813.5" cy="-1821.4035" rx="66.779" ry="18"/>
<text text-anchor="middle" x="8813.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Code block</text>
</g>
<!-- section_89&#45;&gt;header_105 -->
<g id="edge105" class="edge">
<title>section_89&#45;&gt;header_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8813.5,-2116.9764C8813.5,-2064.5477 8813.5,-1913.0682 8813.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8817.0001,-1849.6813 8813.5,-1839.6814 8810.0001,-1849.6814 8817.0001,-1849.6813"/>
</g>
<!-- prose_106 -->
<g id="node107" class="node">
<title>prose_106</title>
<ellipse fill="none" stroke="#000000" cx="8930.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8930.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_106 -->
<g id="edge106" class="edge">
<title>section_89&#45;&gt;prose_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8821.4011,-2117.1048C8835.7455,-2083.9728 8866.6948,-2011.2164 8889.5,-1948.6037 8901.8528,-1914.6885 8914.3328,-1875.0205 8922.2238,-1849.1155"/>
<polygon fill="#000000" stroke="#000000" points="8925.6649,-1849.8281 8925.2118,-1839.2429 8918.965,-1847.8003 8925.6649,-1849.8281"/>
</g>
<!-- prose_107 -->
<g id="node108" class="node">
<title>prose_107</title>
<ellipse fill="none" stroke="#000000" cx="9140.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9140.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_107 -->
<g id="edge107" class="edge">
<title>section_89&#45;&gt;prose_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8819.475,-2117.1564C8830.4716,-2086.366 8856.6029,-2023.2721 8897.5,-1984.6037 8924.0759,-1959.4761 8940.3002,-1967.6892 8971.5,-1948.6037 9024.9867,-1915.8849 9082.3039,-1870.227 9114.549,-1843.4443"/>
<polygon fill="#000000" stroke="#000000" points="9117.1434,-1845.8375 9122.5722,-1836.7392 9112.6545,-1840.4662 9117.1434,-1845.8375"/>
</g>
<!-- prose_108 -->
<g id="node109" class="node">
<title>prose_108</title>
<ellipse fill="none" stroke="#000000" cx="9416.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9416.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_108 -->
<g id="edge108" class="edge">
<title>section_89&#45;&gt;prose_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8817.8315,-2117.1975C8826.6781,-2084.6891 8850.1148,-2016.6094 8897.5,-1984.6037 9002.935,-1913.3892 9060.3754,-1987.5509 9181.5,-1948.6037 9261.0778,-1923.0158 9345.0527,-1870.4334 9387.8126,-1841.5323"/>
<polygon fill="#000000" stroke="#000000" points="9390.0087,-1844.271 9396.2952,-1835.7428 9386.0625,-1838.4893 9390.0087,-1844.271"/>
</g>
<!-- codeblock_109 -->
<g id="node110" class="node">
<title>codeblock_109</title>
<ellipse fill="none" stroke="#000000" cx="9685.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9685.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 251&#45;359</text>
</g>
<!-- section_89&#45;&gt;codeblock_109 -->
<g id="edge109" class="edge">
<title>section_89&#45;&gt;codeblock_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8817.5776,-2117.1692C8826.0667,-2084.2973 8849.0206,-2015.2078 8897.5,-1984.6037 9002.9478,-1918.0366 9337.8831,-1983.8488 9457.5,-1948.6037 9533.5647,-1926.1912 9612.1463,-1875.0067 9654.2812,-1844.8421"/>
<polygon fill="#000000" stroke="#000000" points="9656.4097,-1847.6221 9662.4579,-1838.9232 9652.3051,-1841.9517 9656.4097,-1847.6221"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="8163.5,-864.402 7839.5,-864.402 7839.5,-793.8013 8163.5,-793.8013 8163.5,-864.402"/>
<text text-anchor="middle" x="8001.5" y="-833.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">New block unless previous line is also list,</text>
<text text-anchor="middle" x="8001.5" y="-817.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">in which case append. </text>
</g>
<!-- prose_97&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>prose_97&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8264.2212,-1803.2915C8260.1489,-1776.9941 8249.5691,-1727.7275 8224.5,-1694.2032 8207.6664,-1671.692 8188.006,-1681.6486 8172.5,-1658.2032 8002.1943,-1400.697 7996.2427,-1007.5466 7999.5908,-874.7386"/>
<polygon fill="#000000" stroke="#000000" points="8003.0954,-874.6246 7999.8802,-864.5294 7996.0982,-874.4262 8003.0954,-874.6246"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="8289,-857.0031 8182,-857.0031 8182,-801.2001 8289,-801.2001 8289,-857.0031"/>
<text text-anchor="middle" x="8235.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">Same as list.</text>
</g>
<!-- prose_100&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>prose_100&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8485.9814,-1803.3299C8484.1762,-1775.7015 8476.5798,-1723.1325 8445.5,-1694.2032 8396.2643,-1648.3743 8341.9987,-1709.5092 8298.5,-1658.2032 8097.1747,-1420.7436 8190.3412,-994.9752 8224.7026,-866.6869"/>
<polygon fill="#000000" stroke="#000000" points="8228.1095,-867.4966 8227.3578,-856.9284 8221.355,-865.6587 8228.1095,-867.4966"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="8729.5,-872.3019 8307.5,-872.3019 8307.5,-785.9013 8729.5,-785.9013 8729.5,-872.3019"/>
<text text-anchor="middle" x="8518.5" y="-841.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">A tag needs to cling, so we need to check the</text>
<text text-anchor="middle" x="8518.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">number of blank lines before and after a tag line, if any.</text>
<text text-anchor="middle" x="8518.5" y="-810.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">If even, a tag line clings down.</text>
</g>
<!-- prose_103&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prose_103&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8693.2585,-1803.3331C8672.8082,-1689.3281 8561.4526,-1068.5506 8528.0047,-882.0878"/>
<polygon fill="#000000" stroke="#000000" points="8531.4494,-881.4676 8526.2387,-872.2427 8524.5594,-882.7036 8531.4494,-881.4676"/>
</g>
<!-- leaf_110 -->
<g id="node111" class="node">
<title>leaf_110</title>
<polygon fill="none" stroke="#c0c0c0" points="9113.5,-856.402 8747.5,-856.402 8747.5,-801.8012 9113.5,-801.8012 9113.5,-856.402"/>
<text text-anchor="middle" x="8930.5" y="-825.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">A code block is anything between a code header and</text>
<text text-anchor="middle" x="8930.5" y="-809.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">either a code footer or the end of a file. </text>
</g>
<!-- prose_106&#45;&gt;leaf_110 -->
<g id="edge110" class="edge">
<title>prose_106&#45;&gt;leaf_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8930.5,-1803.3331C8930.5,-1685.998 8930.5,-1031.8519 8930.5,-866.8831"/>
<polygon fill="#000000" stroke="#000000" points="8934.0001,-866.7352 8930.5,-856.7352 8927.0001,-866.7352 8934.0001,-866.7352"/>
</g>
<!-- leaf_111 -->
<g id="node112" class="node">
<title>leaf_111</title>
<polygon fill="none" stroke="#c0c0c0" points="9407,-847.1016 9132,-847.1016 9132,-811.1016 9407,-811.1016 9407,-847.1016"/>
<text text-anchor="middle" x="9269.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section : the Section to be blocked</text>
</g>
<!-- prose_107&#45;&gt;leaf_111 -->
<g id="edge111" class="edge">
<title>prose_107&#45;&gt;leaf_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9142.8492,-1803.3331C9158.4236,-1683.5304 9246.75,-1004.1008 9265.8558,-857.1337"/>
<polygon fill="#000000" stroke="#000000" points="9269.3395,-857.4854 9267.1579,-847.1176 9262.3979,-856.5829 9269.3395,-857.4854"/>
</g>
<!-- leaf_112 -->
<g id="node113" class="node">
<title>leaf_112</title>
<polygon fill="none" stroke="#c0c0c0" points="9798,-847.1016 9425,-847.1016 9425,-811.1016 9798,-811.1016 9798,-847.1016"/>
<text text-anchor="middle" x="9611.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns : the same Section, filled in with blocks</text>
</g>
<!-- prose_108&#45;&gt;leaf_112 -->
<g id="edge112" class="edge">
<title>prose_108&#45;&gt;leaf_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9420.0511,-1803.3331C9443.5938,-1683.5304 9577.1104,-1004.1008 9605.9913,-857.1337"/>
<polygon fill="#000000" stroke="#000000" points="9609.4656,-857.6048 9607.9596,-847.1176 9602.597,-856.255 9609.4656,-857.6048"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="10399,-1658.3048 9816,-1658.3048 9816,.1016 10399,.1016 10399,-1658.3048"/>
<text text-anchor="middle" x="10107.5" y="-1643.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.block(section)</text>
<text text-anchor="middle" x="10107.5" y="-1627.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; There is always a header at [1], though it may be nil</text>
<text text-anchor="middle" x="10107.5" y="-1612.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If there are other Nodes, they are sections and must be appended</text>
<text text-anchor="middle" x="10107.5" y="-1596.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; after the blocks.</text>
<text text-anchor="middle" x="10107.5" y="-1581.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local sub_sections = {}</text>
<text text-anchor="middle" x="10107.5" y="-1566.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #section do</text>
<text text-anchor="middle" x="10107.5" y="-1550.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;sub_sections[#sub_sections + 1] = section[i]</text>
<text text-anchor="middle" x="10107.5" y="-1535.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = nil</text>
<text text-anchor="middle" x="10107.5" y="-1519.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-1488.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Every section gets at least one block, at [2], which may be empty.</text>
<text text-anchor="middle" x="10107.5" y="-1473.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = Block(nil, section.line_first) &#45;&#45; current block</text>
<text text-anchor="middle" x="10107.5" y="-1457.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[2] = latest</text>
<text text-anchor="middle" x="10107.5" y="-1426.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; State machine for blocking a section</text>
<text text-anchor="middle" x="10107.5" y="-1410.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-1395.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; first set of blank lines in a section belong to the first block</text>
<text text-anchor="middle" x="10107.5" y="-1380.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local lead_blanks = true</text>
<text text-anchor="middle" x="10107.5" y="-1364.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Track code blocks in own logic</text>
<text text-anchor="middle" x="10107.5" y="-1349.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local code_block = false</text>
<text text-anchor="middle" x="10107.5" y="-1333.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Tags also</text>
<text text-anchor="middle" x="10107.5" y="-1318.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-1303.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 1, #section.lines do</text>
<text text-anchor="middle" x="10107.5" y="-1287.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local inset = i + section.line_first</text>
<text text-anchor="middle" x="10107.5" y="-1272.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local l = section.lines[i]</text>
<text text-anchor="middle" x="10107.5" y="-1256.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not code_block then</text>
<text text-anchor="middle" x="10107.5" y="-1241.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if l == &quot;&quot; then </text>
<text text-anchor="middle" x="10107.5" y="-1226.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; increment back blanks for clinging subsequent lines</text>
<text text-anchor="middle" x="10107.5" y="-1210.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = back_blanks + 1</text>
<text text-anchor="middle" x="10107.5" y="-1195.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank lines attach to the preceding block</text>
<text text-anchor="middle" x="10107.5" y="-1179.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-1164.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-1149.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeHeader, level, l_trim = Codeblock.matchHead(l)</text>
<text text-anchor="middle" x="10107.5" y="-1133.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if isCodeHeader then</text>
<text text-anchor="middle" x="10107.5" y="-1118.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = true</text>
<text text-anchor="middle" x="10107.5" y="-1102.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10107.5" y="-1087.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; create a new block for the codeblock</text>
<text text-anchor="middle" x="10107.5" y="-1072.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-1056.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(nil, inset)</text>
<text text-anchor="middle" x="10107.5" y="-1041.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10107.5" y="-1025.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-1010.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-995.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; preserve existing block and add codeblock</text>
<text text-anchor="middle" x="10107.5" y="-979.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-964.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10107.5" y="-948.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-933.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif isTagline(l) then</text>
<text text-anchor="middle" x="10107.5" y="-918.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = true</text>
<text text-anchor="middle" x="10107.5" y="-902.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; apply cling rule</text>
<text text-anchor="middle" x="10107.5" y="-887.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local fwd_blanks = fwdBlanks(section.lines, i)</text>
<text text-anchor="middle" x="10107.5" y="-871.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if fwd_blanks &gt; back_blanks then</text>
<text text-anchor="middle" x="10107.5" y="-856.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-841.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10107.5" y="-810.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-794.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10107.5" y="-779.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-764.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-748.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10107.5" y="-733.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-717.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if back_blanks &gt; 0 and lead_blanks == false then</text>
<text text-anchor="middle" x="10107.5" y="-702.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10107.5" y="-687.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10107.5" y="-671.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-656.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10107.5" y="-640.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-625.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-610.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-594.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-579.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-563.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="10107.5" y="-548.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-533.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; continuing a block</text>
<text text-anchor="middle" x="10107.5" y="-517.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lead_blanks = false</text>
<text text-anchor="middle" x="10107.5" y="-502.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Collecting a code block</text>
<text text-anchor="middle" x="10107.5" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeFoot, level, l_trim = Codeblock.matchFoot(l)</text>
<text text-anchor="middle" x="10107.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (isCodeFoot and level == latest[1].level) then</text>
<text text-anchor="middle" x="10107.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = false</text>
<text text-anchor="middle" x="10107.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].footer = l_trim</text>
<text text-anchor="middle" x="10107.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = inset</text>
<text text-anchor="middle" x="10107.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].lines[#latest[1].lines + 1] = l</text>
<text text-anchor="middle" x="10107.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Continue in normal parse mode</text>
<text text-anchor="middle" x="10107.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; This may add more lines to the code block</text>
<text text-anchor="middle" x="10107.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Auto&#45;close a code block with no footer.</text>
<text text-anchor="middle" x="10107.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if latest[1] and latest[1].id == &quot;codeblock&quot; and not latest[1].line_last then</text>
<text text-anchor="middle" x="10107.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = #section.lines</text>
<text text-anchor="middle" x="10107.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Close last block</text>
<text text-anchor="middle" x="10107.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;latest.line_last = section.line_last</text>
<text text-anchor="middle" x="10107.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Append sections, if any, which follow our blocks</text>
<text text-anchor="middle" x="10107.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(sub_sections) do</text>
<text text-anchor="middle" x="10107.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = v</text>
<text text-anchor="middle" x="10107.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="10107.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_109&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>codeblock_109&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9701.5396,-1803.5029C9726.7103,-1774.6694 9775.7783,-1715.3706 9806.5,-1658.2032 9808.0857,-1655.2525 9809.6663,-1652.2917 9811.2417,-1649.3212"/>
<polygon fill="#000000" stroke="#000000" points="9814.3873,-1650.8594 9815.9526,-1640.3808 9808.1944,-1647.5962 9814.3873,-1650.8594"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="9056,-2155.1061 8907,-2155.1061 8907,-2115.3019 9056,-2115.3019 9056,-2155.1061"/>
<text text-anchor="middle" x="8981.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Blocks a Section.</text>
</g>
<!-- prose_115&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>prose_115&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9159.0547,-2341.4661C9151.8311,-2334.9691 9143.0578,-2327.6158 9134.5,-2321.8043 9105.8849,-2302.3718 9090.2974,-2309.9193 9065.5,-2285.8043 9029.7112,-2251.0003 9004.9062,-2197.6401 8991.9605,-2164.6641"/>
<polygon fill="#000000" stroke="#000000" points="8995.1576,-2163.2247 8988.3246,-2155.1277 8988.6168,-2165.7185 8995.1576,-2163.2247"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="9440.5,-2154.5046 9074.5,-2154.5046 9074.5,-2115.9034 9440.5,-2115.9034 9440.5,-2154.5046"/>
<text text-anchor="middle" x="9257.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000">This is a moderately complex state machine, which</text>
<text text-anchor="middle" x="9257.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000">works on a line&#45;by&#45;line basis with some lookahead.</text>
</g>
<!-- prose_116&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>prose_116&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9257.5,-2339.0371C9257.5,-2300.7045 9257.5,-2211.2556 9257.5,-2164.6391"/>
<polygon fill="#000000" stroke="#000000" points="9261.0001,-2164.5696 9257.5,-2154.5696 9254.0001,-2164.5696 9261.0001,-2164.5696"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="9922.5,-2185.7042 9458.5,-2185.7042 9458.5,-2084.7038 9922.5,-2084.7038 9922.5,-2185.7042"/>
<text text-anchor="middle" x="9690.5" y="-2170.5041" font-family="Inconsolata" font-size="14.00" fill="#000000">First off, we have a Header at [1], and may have one or </text>
<text text-anchor="middle" x="9690.5" y="-2155.104" font-family="Inconsolata" font-size="14.00" fill="#000000">more Sections The blocks go between the Header and the remaining</text>
<text text-anchor="middle" x="9690.5" y="-2139.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Sections, so we have to lift them and append after blocking.</text>
<text text-anchor="middle" x="9690.5" y="-2124.304" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="9690.5" y="-2108.9039" font-family="Inconsolata" font-size="14.00" fill="#000000">Next, we parse the lines, thus:</text>
</g>
<!-- prose_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>prose_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9528.6534,-2340.5182C9552.8238,-2309.8564 9605.3694,-2243.1984 9644.0616,-2194.1145"/>
<polygon fill="#000000" stroke="#000000" points="9646.9454,-2196.1098 9650.3875,-2186.0897 9641.4481,-2191.7763 9646.9454,-2196.1098"/>
</g>
<!-- header_122 -->
<g id="node123" class="node">
<title>header_122</title>
<ellipse fill="none" stroke="#000000" cx="10002.5" cy="-2135.204" rx="61.9429" ry="18"/>
<text text-anchor="middle" x="10002.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Prose line</text>
</g>
<!-- section_118&#45;&gt;header_122 -->
<g id="edge122" class="edge">
<title>section_118&#45;&gt;header_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10002.5,-2339.0371C10002.5,-2300.4018 10002.5,-2209.8394 10002.5,-2163.5425"/>
<polygon fill="#000000" stroke="#000000" points="10006.0001,-2163.3109 10002.5,-2153.3109 9999.0001,-2163.3109 10006.0001,-2163.3109"/>
</g>
<!-- prose_123 -->
<g id="node124" class="node">
<title>prose_123</title>
<ellipse fill="none" stroke="#000000" cx="10114.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10114.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_118&#45;&gt;prose_123 -->
<g id="edge123" class="edge">
<title>section_118&#45;&gt;prose_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10025.1416,-2339.8427C10040.8774,-2326.636 10061.1629,-2307.1433 10073.5,-2285.8043 10095.9448,-2246.9823 10106.5044,-2195.4191 10111.1656,-2163.8106"/>
<polygon fill="#000000" stroke="#000000" points="10114.6862,-2163.899 10112.5782,-2153.516 10107.7512,-2162.9474 10114.6862,-2163.899"/>
</g>
<!-- leaf_124 -->
<g id="node125" class="node">
<title>leaf_124</title>
<polygon fill="none" stroke="#c0c0c0" points="10308,-1856.7038 9921,-1856.7038 9921,-1786.1031 10308,-1786.1031 10308,-1856.7038"/>
<text text-anchor="middle" x="10114.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">If preceded by at least one blank line,</text>
<text text-anchor="middle" x="10114.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">make a new block, otherwise append to existing block.</text>
</g>
<!-- prose_123&#45;&gt;leaf_124 -->
<g id="edge124" class="edge">
<title>prose_123&#45;&gt;leaf_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10114.5,-2116.9764C10114.5,-2068.8884 10114.5,-1937.4722 10114.5,-1867.1831"/>
<polygon fill="#000000" stroke="#000000" points="10118.0001,-1866.861 10114.5,-1856.8611 10111.0001,-1866.8611 10118.0001,-1866.861"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="10698.5,-2162.5044 10164.5,-2162.5044 10164.5,-2107.9036 10698.5,-2107.9036 10698.5,-2162.5044"/>
<text text-anchor="middle" x="10431.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is a kludgy thing we&#39;re going to do to remove &#39;blocks&#39; once they&#39;ve</text>
<text text-anchor="middle" x="10431.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000">become either codeblocks or prose.</text>
</g>
<!-- prose_126&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>prose_126&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10431.5,-2339.0371C10431.5,-2302.8586 10431.5,-2221.1471 10431.5,-2172.8868"/>
<polygon fill="#000000" stroke="#000000" points="10435.0001,-2172.8349 10431.5,-2162.8349 10428.0001,-2172.835 10435.0001,-2172.8349"/>
</g>
<!-- leaf_129 -->
<g id="node130" class="node">
<title>leaf_129</title>
<polygon fill="none" stroke="#c0c0c0" points="11062,-2216.2043 10717,-2216.2043 10717,-2054.2037 11062,-2054.2037 11062,-2216.2043"/>
<text text-anchor="middle" x="10889.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.weed(section)</text>
<text text-anchor="middle" x="10889.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="10889.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.id == &quot;block&quot; then</text>
<text text-anchor="middle" x="10889.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v[1] and v[1].id == &quot;codeblock&quot; </text>
<text text-anchor="middle" x="10889.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or v[1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="10889.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = v[1] &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10889.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2062.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_127&#45;&gt;leaf_129 -->
<g id="edge129" class="edge">
<title>codeblock_127&#45;&gt;leaf_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10742.5935,-2339.0371C10760.6482,-2313.9862 10794.4368,-2267.1044 10825.061,-2224.6132"/>
<polygon fill="#000000" stroke="#000000" points="10827.9301,-2226.6184 10830.9376,-2216.4594 10822.2513,-2222.5256 10827.9301,-2226.6184"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="11516.5,-2155.1061 11080.5,-2155.1061 11080.5,-2115.3019 11516.5,-2115.3019 11516.5,-2155.1061"/>
<text text-anchor="middle" x="11298.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Creates a new section, given a header and the line number.</text>
</g>
<!-- prose_131&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>prose_131&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11683.3849,-2341.2625C11676.1285,-2334.4136 11666.9631,-2326.8426 11657.5,-2321.8043 11603.8242,-2293.2265 11580.8744,-2310.9331 11525.5,-2285.8043 11450.6036,-2251.8165 11372.7093,-2194.5073 11330.4531,-2161.2468"/>
<polygon fill="#000000" stroke="#000000" points="11332.4982,-2158.4016 11322.4885,-2154.9294 11328.1482,-2163.8859 11332.4982,-2158.4016"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="12026.5,-2169.8053 11534.5,-2169.8053 11534.5,-2100.6027 12026.5,-2100.6027 12026.5,-2169.8053"/>
<text text-anchor="middle" x="11780.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; header : &#160;Header for the section, which may be of type Header or </text>
<text text-anchor="middle" x="11780.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;a number. &#160;A number means the header is virtual.</text>
<text text-anchor="middle" x="11780.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum &#160;: &#160;The line number of the header, which is the first of the</text>
<text text-anchor="middle" x="11780.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Section.</text>
</g>
<!-- prose_132&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>prose_132&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11780.5,-2339.0371C11780.5,-2304.6916 11780.5,-2229.3103 11780.5,-2180.4697"/>
<polygon fill="#000000" stroke="#000000" points="11784.0001,-2180.1739 11780.5,-2170.174 11777.0001,-2180.174 11784.0001,-2180.1739"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="12256.5,-2153.204 12044.5,-2153.204 12044.5,-2117.204 12256.5,-2117.204 12256.5,-2153.204"/>
<text text-anchor="middle" x="12150.5" y="-2131.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : &#160;The new Section.</text>
</g>
<!-- prose_133&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>prose_133&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12017.5603,-2340.1529C12042.5041,-2301.6979 12103.2916,-2207.9837 12133.2424,-2161.8094"/>
<polygon fill="#000000" stroke="#000000" points="12136.2961,-2163.5332 12138.8017,-2153.2389 12130.4234,-2159.7239 12136.2961,-2163.5332"/>
</g>
<!-- leaf_138 -->
<g id="node139" class="node">
<title>leaf_138</title>
<polygon fill="none" stroke="#c0c0c0" points="12584.5,-2285.9046 12274.5,-2285.9046 12274.5,-1984.5034 12584.5,-1984.5034 12584.5,-2285.9046"/>
<text text-anchor="middle" x="12429.5" y="-2270.6043" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(section, header, linum)</text>
<text text-anchor="middle" x="12429.5" y="-2255.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local section = setmetatable({}, S)</text>
<text text-anchor="middle" x="12429.5" y="-2239.8042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if type(header) == &quot;number&quot; then</text>
<text text-anchor="middle" x="12429.5" y="-2224.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; We have a virtual header</text>
<text text-anchor="middle" x="12429.5" y="-2209.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = Header(&quot;&quot;, header)</text>
<text text-anchor="middle" x="12429.5" y="-2193.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = nil</text>
<text text-anchor="middle" x="12429.5" y="-2178.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header</text>
<text text-anchor="middle" x="12429.5" y="-2162.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="12429.5" y="-2147.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = header</text>
<text text-anchor="middle" x="12429.5" y="-2132.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = header</text>
<text text-anchor="middle" x="12429.5" y="-2116.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header.level</text>
<text text-anchor="middle" x="12429.5" y="-2101.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12429.5" y="-2085.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.line_first = linum</text>
<text text-anchor="middle" x="12429.5" y="-2070.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines = {}</text>
<text text-anchor="middle" x="12429.5" y="-2055.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.id = &quot;section&quot;</text>
<text text-anchor="middle" x="12429.5" y="-2039.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="12429.5" y="-2024.2038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12429.5" y="-1992.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(s, new)</text>
</g>
<!-- codeblock_134&#45;&gt;leaf_138 -->
<g id="edge138" class="edge">
<title>codeblock_134&#45;&gt;leaf_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12364.3102,-2339.0371C12367.8312,-2328.0279 12372.7006,-2312.8024 12378.2067,-2295.5861"/>
<polygon fill="#000000" stroke="#000000" points="12381.614,-2296.4218 12381.3266,-2285.8309 12374.9467,-2294.2894 12381.614,-2296.4218"/>
</g>
</g>
</svg>