<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="12593pt" height="2633pt"
 viewBox="0.00 0.00 12592.50 2632.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2628.6043)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2628.6043 12588.5,-2628.6043 12588.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2606.6043" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2602.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 412</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2534.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2530.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;379</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1972.5,-2588.4357C1972.5,-2580.7353 1972.5,-2571.5787 1972.5,-2563.021"/>
<polygon fill="#000000" stroke="#000000" points="1976.0001,-2563.0176 1972.5,-2553.0176 1969.0001,-2563.0176 1976.0001,-2563.0176"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1382.5" cy="-2462.6043" rx="93.3745" ry="18"/>
<text text-anchor="middle" x="1382.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Section metatable</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1909.9396,-2528.9834C1816.9345,-2520.3326 1636.7988,-2502.4457 1484.5,-2480.6043 1476.5276,-2479.461 1468.2227,-2478.1668 1459.9455,-2476.8094"/>
<polygon fill="#000000" stroke="#000000" points="1460.3275,-2473.3248 1449.8873,-2475.1284 1459.1735,-2480.229 1460.3275,-2473.3248"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1525.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1525.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1907.7367,-2531.6055C1826.6502,-2526.58 1684.1046,-2513.5273 1566.5,-2480.6043 1564.0764,-2479.9259 1561.6101,-2479.1311 1559.1506,-2478.2603"/>
<polygon fill="#000000" stroke="#000000" points="1560.3914,-2474.9875 1549.8033,-2474.6103 1557.8452,-2481.508 1560.3914,-2474.9875"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1607.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1607.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2565,-2528.8727C1844.2517,-2521.7259 1737.4497,-2507.0918 1648.5,-2480.6043 1646.0879,-2479.8861 1643.6302,-2479.0616 1641.1769,-2478.1692"/>
<polygon fill="#000000" stroke="#000000" points="1642.4293,-2474.9008 1631.8431,-2474.4724 1639.8516,-2481.4089 1642.4293,-2474.9008"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="1689.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1689.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1915.9185,-2525.1958C1866.3352,-2516.194 1792.6793,-2500.9767 1730.5,-2480.6043 1728.2561,-2479.8691 1725.9674,-2479.055 1723.6763,-2478.191"/>
<polygon fill="#000000" stroke="#000000" points="1724.9349,-2474.9247 1714.3515,-2474.4329 1722.3182,-2481.4173 1724.9349,-2474.9247"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1771.5" cy="-2462.6043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1771.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1929.008,-2521.072C1896.6188,-2510.7179 1851.4559,-2495.6957 1812.5,-2480.6043 1810.2981,-2479.7514 1808.0416,-2478.8474 1805.7743,-2477.9165"/>
<polygon fill="#000000" stroke="#000000" points="1807.0798,-2474.6686 1796.506,-2474.0002 1804.3552,-2481.1165 1807.0798,-2474.6686"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="1887.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1887.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 16&#45;21</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1951.9239,-2517.1751C1941.0655,-2507.9775 1927.5779,-2496.5527 1915.7539,-2486.5371"/>
<polygon fill="#000000" stroke="#000000" points="1917.7793,-2483.6658 1907.8866,-2479.873 1913.2549,-2489.0072 1917.7793,-2483.6658"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2047.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2047.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 22&#45;29</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1990.6554,-2517.1751C1999.983,-2508.2207 2011.5094,-2497.1553 2021.7394,-2487.3345"/>
<polygon fill="#000000" stroke="#000000" points="2024.4618,-2489.5728 2029.2518,-2480.1226 2019.6141,-2484.5231 2024.4618,-2489.5728"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2600.5" cy="-2462.6043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2600.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 46&#45;79</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2033.2859,-2527.6353C2150.0531,-2514.2479 2405.1513,-2485.001 2529.5086,-2470.7435"/>
<polygon fill="#000000" stroke="#000000" points="2530.1444,-2474.1936 2539.6806,-2469.5773 2529.347,-2467.2392 2530.1444,-2474.1936"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="4806.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4806.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 125&#45;166</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.0389,-2532.9393C2414.1768,-2523.3832 4296.4947,-2475.5614 4721.2484,-2464.7702"/>
<polygon fill="#000000" stroke="#000000" points="4721.4001,-2468.2676 4731.308,-2464.5147 4721.2223,-2461.2699 4721.4001,-2468.2676"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="9216.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9216.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 204&#45;217</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.1768,-2533.9516C2712.3737,-2527.2505 8365.739,-2471.0603 9130.9129,-2463.455"/>
<polygon fill="#000000" stroke="#000000" points="9131.0604,-2466.9538 9141.0251,-2463.3545 9130.9907,-2459.9542 9131.0604,-2466.9538"/>
</g>
<!-- section_12 -->
<g id="node13" class="node">
<title>section_12</title>
<ellipse fill="none" stroke="#000000" cx="10365.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10365.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 361&#45;379</text>
</g>
<!-- section_1&#45;&gt;section_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;section_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.2048,-2534.3591C2574.2996,-2532.3091 6286.2686,-2517.1818 9300.5,-2480.6043 9664.6352,-2476.1856 10098.7543,-2467.9137 10279.7141,-2464.3315"/>
<polygon fill="#000000" stroke="#000000" points="10280.0356,-2467.8259 10289.9642,-2464.1282 10279.8968,-2460.8273 10280.0356,-2467.8259"/>
</g>
<!-- section_13 -->
<g id="node14" class="node">
<title>section_13</title>
<ellipse fill="none" stroke="#000000" cx="11739.5" cy="-2462.6043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="11739.5" y="-2458.4043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 380&#45;412</text>
</g>
<!-- section_1&#45;&gt;section_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;section_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2038.5394,-2534.3754C2621.0546,-2532.3164 6943.2813,-2516.2334 10449.5,-2480.6043 10903.2157,-2475.9938 11446.654,-2467.4086 11653.6978,-2464.0263"/>
<polygon fill="#000000" stroke="#000000" points="11653.9525,-2467.5227 11663.8939,-2463.8595 11653.838,-2460.5237 11653.9525,-2467.5227"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="457,-2408.5046 0,-2408.5046 0,-2321.904 457,-2321.904 457,-2408.5046"/>
<text text-anchor="middle" x="228.5" y="-2345.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Sections consist of a header and body. &#160;The body may contain</text>
<text text-anchor="middle" x="228.5" y="-2330.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> one or more blocks, followed by zero or more child sections.</text>
</g>
<!-- prose_3&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>prose_3&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1501.7378,-2450.3724C1496.2133,-2448.0404 1490.2598,-2445.9196 1484.5,-2444.6043 1266.7284,-2394.876 706.9127,-2431.9923 467.1625,-2408.6901"/>
<polygon fill="#000000" stroke="#000000" points="467.3372,-2405.1897 457.0316,-2407.6482 466.621,-2412.153 467.3372,-2405.1897"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="918,-2392.5047 475,-2392.5047 475,-2337.9039 918,-2337.9039 918,-2392.5047"/>
<text text-anchor="middle" x="696.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> The header and block may both be virtual, but will always be</text>
<text text-anchor="middle" x="696.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> present.</text>
</g>
<!-- prose_4&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1583.2799,-2450.2778C1577.8806,-2448.0128 1572.0945,-2445.9437 1566.5,-2444.6043 1289.8669,-2378.3765 1209.8707,-2442.9378 927.5,-2408.6043 897.7483,-2404.9868 866.054,-2399.8727 835.9806,-2394.4184"/>
<polygon fill="#000000" stroke="#000000" points="836.3169,-2390.9217 825.8491,-2392.5573 835.0521,-2397.8065 836.3169,-2390.9217"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1330.5,-2392.5047 936.5,-2392.5047 936.5,-2337.9039 1330.5,-2337.9039 1330.5,-2392.5047"/>
<text text-anchor="middle" x="1133.5" y="-2361.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> In the first pass, we fill a lines array with the raw</text>
<text text-anchor="middle" x="1133.5" y="-2346.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> contents of the section. </text>
</g>
<!-- prose_5&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>prose_5&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1665.2155,-2450.5301C1659.8202,-2448.2494 1654.0521,-2446.1101 1648.5,-2444.6043 1515.0582,-2408.4141 1475.9561,-2430.8794 1339.5,-2408.6043 1314.9798,-2404.6017 1288.9568,-2399.6646 1263.958,-2394.5717"/>
<polygon fill="#000000" stroke="#000000" points="1264.5628,-2391.1229 1254.0628,-2392.5371 1263.1529,-2397.9794 1264.5628,-2391.1229"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1722,-2393.1058 1349,-2393.1058 1349,-2337.3028 1722,-2337.3028 1722,-2393.1058"/>
<text text-anchor="middle" x="1535.5" y="-2361.7043" font-family="Inconsolata" font-size="14.00" fill="#000000"> This is subsequently refined into various blocks. </text>
</g>
<!-- prose_6&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_6&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1745.957,-2451.2632C1740.8482,-2449.0308 1735.5117,-2446.7244 1730.5,-2444.6043 1692.4889,-2428.5252 1650.0745,-2411.184 1614.5352,-2396.8218"/>
<polygon fill="#000000" stroke="#000000" points="1615.7636,-2393.5433 1605.1805,-2393.046 1613.1435,-2400.0345 1615.7636,-2393.5433"/>
</g>
<!-- header_18 -->
<g id="node19" class="node">
<title>header_18</title>
<ellipse fill="none" stroke="#000000" cx="1783.5" cy="-2365.2043" rx="43.082" ry="18"/>
<text text-anchor="middle" x="1783.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Array</text>
</g>
<!-- section_7&#45;&gt;header_18 -->
<g id="edge18" class="edge">
<title>section_7&#45;&gt;header_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1868.9069,-2445.1912C1852.1386,-2429.4871 1827.3332,-2406.2558 1808.7699,-2388.8705"/>
<polygon fill="#000000" stroke="#000000" points="1810.9293,-2386.0977 1801.2379,-2381.8166 1806.1443,-2391.2069 1810.9293,-2386.0977"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="1876.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1876.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_7&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1885.431,-2444.2841C1883.8177,-2429.9996 1881.5488,-2409.9089 1879.7016,-2393.5528"/>
<polygon fill="#000000" stroke="#000000" points="1883.1599,-2392.9864 1878.5597,-2383.4424 1876.2042,-2393.772 1883.1599,-2392.9864"/>
</g>
<!-- header_21 -->
<g id="node22" class="node">
<title>header_21</title>
<ellipse fill="none" stroke="#000000" cx="1972.5" cy="-2365.2043" rx="45.9718" ry="18"/>
<text text-anchor="middle" x="1972.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Fields</text>
</g>
<!-- section_8&#45;&gt;header_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;header_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2033.7438,-2444.7397C2022.1481,-2429.6807 2005.4069,-2407.9394 1992.3574,-2390.9924"/>
<polygon fill="#000000" stroke="#000000" points="1994.7908,-2388.4159 1985.9166,-2382.628 1989.2446,-2392.6866 1994.7908,-2388.4159"/>
</g>
<!-- prose_22 -->
<g id="node23" class="node">
<title>prose_22</title>
<ellipse fill="none" stroke="#000000" cx="2068.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2068.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;prose_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2051.4499,-2444.2841C2054.5493,-2429.9091 2058.9163,-2409.6544 2062.4548,-2393.2427"/>
<polygon fill="#000000" stroke="#000000" points="2065.9524,-2393.6264 2064.6387,-2383.1133 2059.1096,-2392.151 2065.9524,-2393.6264"/>
</g>
<!-- section_23 -->
<g id="node24" class="node">
<title>section_23</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2365.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;45</text>
</g>
<!-- section_8&#45;&gt;section_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;section_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2071.3636,-2445.6385C2093.7198,-2429.7444 2127.3113,-2405.8626 2152.0872,-2388.2482"/>
<polygon fill="#000000" stroke="#000000" points="2154.3281,-2390.9495 2160.4502,-2382.3025 2150.272,-2385.2443 2154.3281,-2390.9495"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="2377.5" cy="-2365.2043" rx="108.8185" ry="18"/>
<text text-anchor="middle" x="2377.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for sections</text>
</g>
<!-- section_9&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2565.165,-2447.171C2527.4865,-2430.7141 2467.5807,-2404.549 2425.614,-2386.2191"/>
<polygon fill="#000000" stroke="#000000" points="2426.9823,-2382.9975 2416.4173,-2382.2023 2424.1804,-2389.4123 2426.9823,-2382.9975"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="2536.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2536.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2588.7614,-2444.7397C2578.8049,-2429.5872 2564.4029,-2407.669 2553.2378,-2390.6772"/>
<polygon fill="#000000" stroke="#000000" points="2556.1515,-2388.7378 2547.7349,-2382.3025 2550.3014,-2392.5818 2556.1515,-2388.7378"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="2664.5" cy="-2365.2043" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2664.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;63</text>
</g>
<!-- section_9&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2612.2386,-2444.7397C2621.921,-2430.0042 2635.8077,-2408.8704 2646.8331,-2392.0911"/>
<polygon fill="#000000" stroke="#000000" points="2650.0527,-2393.5649 2652.6191,-2383.2856 2644.2026,-2389.7208 2650.0527,-2393.5649"/>
</g>
<!-- section_33 -->
<g id="node34" class="node">
<title>section_33</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2365.2043" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;79</text>
</g>
<!-- section_9&#45;&gt;section_33 -->
<g id="edge33" class="edge">
<title>section_9&#45;&gt;section_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2645.9493,-2449.4685C2707.2984,-2431.7374 2816.4982,-2400.1764 2882.4338,-2381.1196"/>
<polygon fill="#000000" stroke="#000000" points="2883.5989,-2384.4262 2892.2338,-2378.2872 2881.6552,-2377.7014 2883.5989,-2384.4262"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2365.2043" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 80&#45;102</text>
</g>
<!-- section_9&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_9&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2662.9734,-2456.7309C2843.1405,-2439.7924 3363.3526,-2390.8844 3559.992,-2372.3972"/>
<polygon fill="#000000" stroke="#000000" points="3560.3235,-2375.8816 3569.9519,-2371.4609 3559.6682,-2368.9123 3560.3235,-2375.8816"/>
</g>
<!-- header_59 -->
<g id="node60" class="node">
<title>header_59</title>
<ellipse fill="none" stroke="#000000" cx="4524.5" cy="-2365.2043" rx="108.8358" ry="18"/>
<text text-anchor="middle" x="4524.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : addLine(section, line) </text>
</g>
<!-- section_10&#45;&gt;header_59 -->
<g id="edge59" class="edge">
<title>section_10&#45;&gt;header_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4761.1122,-2448.1223C4728.1103,-2437.4797 4682.4129,-2422.5107 4642.5,-2408.6043 4621.3319,-2401.229 4598.1581,-2392.7869 4577.9942,-2385.3206"/>
<polygon fill="#000000" stroke="#000000" points="4578.9523,-2381.9429 4568.3593,-2381.7428 4576.5154,-2388.5051 4578.9523,-2381.9429"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="4683.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4683.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>section_10&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4777.6526,-2445.8875C4761.3945,-2435.9174 4741.084,-2422.5188 4724.5,-2408.6043 4717.5371,-2402.7623 4710.5339,-2395.8304 4704.3348,-2389.2408"/>
<polygon fill="#000000" stroke="#000000" points="4706.8109,-2386.7621 4697.4776,-2381.7481 4701.647,-2391.488 4706.8109,-2386.7621"/>
</g>
<!-- prose_61 -->
<g id="node62" class="node">
<title>prose_61</title>
<ellipse fill="none" stroke="#000000" cx="4765.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4765.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_61 -->
<g id="edge61" class="edge">
<title>section_10&#45;&gt;prose_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4798.7882,-2444.2841C4792.6411,-2429.681 4783.9397,-2409.0099 4776.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="4780.0067,-2390.6451 4772.901,-2382.7863 4773.555,-2393.361 4780.0067,-2390.6451"/>
</g>
<!-- prose_62 -->
<g id="node63" class="node">
<title>prose_62</title>
<ellipse fill="none" stroke="#000000" cx="4847.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4847.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_62 -->
<g id="edge62" class="edge">
<title>section_10&#45;&gt;prose_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4814.2118,-2444.2841C4820.3589,-2429.681 4829.0603,-2409.0099 4836.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="4839.445,-2393.361 4840.099,-2382.7863 4832.9933,-2390.6451 4839.445,-2393.361"/>
</g>
<!-- codeblock_63 -->
<g id="node64" class="node">
<title>codeblock_63</title>
<ellipse fill="none" stroke="#000000" cx="5049.5" cy="-2365.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5049.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;143</text>
</g>
<!-- section_10&#45;&gt;codeblock_63 -->
<g id="edge63" class="edge">
<title>section_10&#45;&gt;codeblock_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4845.2728,-2447.0633C4887.1803,-2430.2658 4954.0938,-2403.4453 4999.8266,-2385.1146"/>
<polygon fill="#000000" stroke="#000000" points="5001.2674,-2388.3078 5009.2473,-2381.3385 4998.663,-2381.8103 5001.2674,-2388.3078"/>
</g>
<!-- section_64 -->
<g id="node65" class="node">
<title>section_64</title>
<ellipse fill="none" stroke="#000000" cx="5735.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5735.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 146&#45;166</text>
</g>
<!-- section_10&#45;&gt;section_64 -->
<g id="edge64" class="edge">
<title>section_10&#45;&gt;section_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4875.9461,-2455.3233C5045.0553,-2437.5933 5477.4272,-2392.2617 5656.2467,-2373.5135"/>
<polygon fill="#000000" stroke="#000000" points="5656.7898,-2376.9759 5666.3703,-2372.4521 5656.0598,-2370.014 5656.7898,-2376.9759"/>
</g>
<!-- section_65 -->
<g id="node66" class="node">
<title>section_65</title>
<ellipse fill="none" stroke="#000000" cx="7572.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7572.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 167&#45;241</text>
</g>
<!-- section_10&#45;&gt;section_65 -->
<g id="edge65" class="edge">
<title>section_10&#45;&gt;section_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4881.1995,-2459.9739C5271.4424,-2446.2322 7073.7407,-2382.7673 7487.6195,-2368.1932"/>
<polygon fill="#000000" stroke="#000000" points="7487.8483,-2371.6874 7497.7189,-2367.8376 7487.6019,-2364.6918 7487.8483,-2371.6874"/>
</g>
<!-- header_114 -->
<g id="node115" class="node">
<title>header_114</title>
<ellipse fill="none" stroke="#000000" cx="9069.5" cy="-2365.2043" rx="55.6456" ry="18"/>
<text text-anchor="middle" x="9069.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Blocking</text>
</g>
<!-- section_11&#45;&gt;header_114 -->
<g id="edge114" class="edge">
<title>section_11&#45;&gt;header_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9190.6201,-2445.6218C9174.4675,-2435.0074 9153.2522,-2421.039 9134.5,-2408.6043 9123.9865,-2401.6328 9112.5367,-2394.001 9102.2171,-2387.108"/>
<polygon fill="#000000" stroke="#000000" points="9104.1188,-2384.1692 9093.8599,-2381.5223 9100.229,-2389.989 9104.1188,-2384.1692"/>
</g>
<!-- prose_115 -->
<g id="node116" class="node">
<title>prose_115</title>
<ellipse fill="none" stroke="#000000" cx="9175.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9175.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_115 -->
<g id="edge115" class="edge">
<title>section_11&#45;&gt;prose_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9208.7882,-2444.2841C9202.6411,-2429.681 9193.9397,-2409.0099 9186.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="9190.0067,-2390.6451 9182.901,-2382.7863 9183.555,-2393.361 9190.0067,-2390.6451"/>
</g>
<!-- prose_116 -->
<g id="node117" class="node">
<title>prose_116</title>
<ellipse fill="none" stroke="#000000" cx="9257.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9257.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_116 -->
<g id="edge116" class="edge">
<title>section_11&#45;&gt;prose_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9224.2118,-2444.2841C9230.3589,-2429.681 9239.0603,-2409.0099 9246.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="9249.445,-2393.361 9250.099,-2382.7863 9242.9933,-2390.6451 9249.445,-2393.361"/>
</g>
<!-- prose_117 -->
<g id="node118" class="node">
<title>prose_117</title>
<ellipse fill="none" stroke="#000000" cx="9515.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9515.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_117 -->
<g id="edge117" class="edge">
<title>section_11&#45;&gt;prose_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9261.2633,-2448.0226C9320.156,-2428.8381 9422.6261,-2395.4582 9477.7788,-2377.4921"/>
<polygon fill="#000000" stroke="#000000" points="9479.081,-2380.749 9487.5052,-2374.3237 9476.9129,-2374.0932 9479.081,-2380.749"/>
</g>
<!-- section_118 -->
<g id="node119" class="node">
<title>section_118</title>
<ellipse fill="none" stroke="#000000" cx="10002.5" cy="-2365.2043" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="10002.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 218&#45;223</text>
</g>
<!-- section_11&#45;&gt;section_118 -->
<g id="edge118" class="edge">
<title>section_11&#45;&gt;section_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9283.5139,-2454.3001C9428.5853,-2436.323 9771.0308,-2393.8876 9925.0628,-2374.8002"/>
<polygon fill="#000000" stroke="#000000" points="9925.8837,-2378.2254 9935.3773,-2373.5221 9925.0228,-2371.2785 9925.8837,-2378.2254"/>
</g>
<!-- header_125 -->
<g id="node126" class="node">
<title>header_125</title>
<ellipse fill="none" stroke="#000000" cx="10299.5" cy="-2365.2043" rx="81.2629" ry="18"/>
<text text-anchor="middle" x="10299.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section:weed()</text>
</g>
<!-- section_12&#45;&gt;header_125 -->
<g id="edge125" class="edge">
<title>section_12&#45;&gt;header_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10353.3946,-2444.7397C10343.3171,-2429.8678 10328.8234,-2408.4785 10317.4039,-2391.6262"/>
<polygon fill="#000000" stroke="#000000" points="10320.2593,-2389.6006 10311.7522,-2383.2856 10314.4644,-2393.5274 10320.2593,-2389.6006"/>
</g>
<!-- prose_126 -->
<g id="node127" class="node">
<title>prose_126</title>
<ellipse fill="none" stroke="#000000" cx="10431.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10431.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_12&#45;&gt;prose_126 -->
<g id="edge126" class="edge">
<title>section_12&#45;&gt;prose_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10377.6054,-2444.7397C10387.873,-2429.5872 10402.7251,-2407.669 10414.2391,-2390.6772"/>
<polygon fill="#000000" stroke="#000000" points="10417.2018,-2392.5443 10419.914,-2382.3025 10411.4069,-2388.6175 10417.2018,-2392.5443"/>
</g>
<!-- codeblock_127 -->
<g id="node128" class="node">
<title>codeblock_127</title>
<ellipse fill="none" stroke="#000000" cx="10729.5" cy="-2365.2043" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="10729.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 366&#45;377</text>
</g>
<!-- section_12&#45;&gt;codeblock_127 -->
<g id="edge127" class="edge">
<title>section_12&#45;&gt;codeblock_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10415.7305,-2449.1635C10481.0173,-2431.6939 10595.0623,-2401.1775 10666.1989,-2382.1426"/>
<polygon fill="#000000" stroke="#000000" points="10667.1868,-2385.5014 10675.9422,-2379.5354 10665.3773,-2378.7393 10667.1868,-2385.5014"/>
</g>
<!-- header_130 -->
<g id="node131" class="node">
<title>header_130</title>
<ellipse fill="none" stroke="#000000" cx="11537.5" cy="-2365.2043" rx="110.7653" ry="18"/>
<text text-anchor="middle" x="11537.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Section(header, linum)</text>
</g>
<!-- section_13&#45;&gt;header_130 -->
<g id="edge130" class="edge">
<title>section_13&#45;&gt;header_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11705.6897,-2446.3018C11671.8325,-2429.9765 11619.5398,-2404.7621 11582.2572,-2386.7852"/>
<polygon fill="#000000" stroke="#000000" points="11583.65,-2383.5713 11573.1223,-2382.3806 11580.6097,-2389.8766 11583.65,-2383.5713"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="11698.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11698.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_13&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11731.7882,-2444.2841C11725.6411,-2429.681 11716.9397,-2409.0099 11709.9749,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="11713.0067,-2390.6451 11705.901,-2382.7863 11706.555,-2393.361 11713.0067,-2390.6451"/>
</g>
<!-- prose_132 -->
<g id="node133" class="node">
<title>prose_132</title>
<ellipse fill="none" stroke="#000000" cx="11780.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11780.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_132 -->
<g id="edge132" class="edge">
<title>section_13&#45;&gt;prose_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11747.2118,-2444.2841C11753.3589,-2429.681 11762.0603,-2409.0099 11769.0251,-2392.4641"/>
<polygon fill="#000000" stroke="#000000" points="11772.445,-2393.361 11773.099,-2382.7863 11765.9933,-2390.6451 11772.445,-2393.361"/>
</g>
<!-- prose_133 -->
<g id="node134" class="node">
<title>prose_133</title>
<ellipse fill="none" stroke="#000000" cx="12006.5" cy="-2365.2043" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12006.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_13&#45;&gt;prose_133 -->
<g id="edge133" class="edge">
<title>section_13&#45;&gt;prose_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11780.9258,-2447.4925C11832.5878,-2428.6465 11920.1173,-2396.7162 11969.5825,-2378.6716"/>
<polygon fill="#000000" stroke="#000000" points="11971.0449,-2381.8638 11979.2398,-2375.1487 11968.6459,-2375.2877 11971.0449,-2381.8638"/>
</g>
<!-- codeblock_134 -->
<g id="node135" class="node">
<title>codeblock_134</title>
<ellipse fill="none" stroke="#000000" cx="12358.5" cy="-2365.2043" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="12358.5" y="-2361.0043" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 391&#45;411</text>
</g>
<!-- section_13&#45;&gt;codeblock_134 -->
<g id="edge134" class="edge">
<title>section_13&#45;&gt;codeblock_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11802.5469,-2452.6839C11915.993,-2434.8331 12154.2791,-2397.3386 12278.8278,-2377.7408"/>
<polygon fill="#000000" stroke="#000000" points="12279.7226,-2381.1431 12289.057,-2376.1312 12278.6345,-2374.2282 12279.7226,-2381.1431"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1373.5,-2178.5043 895.5,-2178.5043 895.5,-2091.9037 1373.5,-2091.9037 1373.5,-2178.5043"/>
<text text-anchor="middle" x="1134.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;The array portion of a section starts at [1] with a header. The</text>
<text text-anchor="middle" x="1134.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> rest consists, optionally, of nodes of types Block and Section.</text>
</g>
<!-- prose_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1865.3129,-2348.2421C1858.0364,-2338.7245 1847.6535,-2327.6237 1835.5,-2321.8043 1653.3377,-2234.5803 1574.685,-2347.9012 1382.5,-2285.8043 1314.0801,-2263.6971 1244.8563,-2219.4212 1196.9971,-2184.5717"/>
<polygon fill="#000000" stroke="#000000" points="1199.0394,-2181.7291 1188.9097,-2178.6242 1194.8922,-2187.3684 1199.0394,-2181.7291"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1877,-2193.8048 1392,-2193.8048 1392,-2076.6032 1877,-2076.6032 1877,-2193.8048"/>
<text text-anchor="middle" x="1634.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; header : The header for the section.</text>
<text text-anchor="middle" x="1634.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; level : The header level, lifted from the header for ease of use</text>
<text text-anchor="middle" x="1634.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; lines : An array of the lines owned by the section. Note that </text>
<text text-anchor="middle" x="1634.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;this doesn&#39;t include the header. </text>
</g>
<!-- prose_22&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>prose_22&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2056.2274,-2348.1201C2048.8639,-2339.0452 2038.7559,-2328.4281 2027.5,-2321.8043 1971.7586,-2289.0018 1946.2135,-2310.6521 1886.5,-2285.8043 1831.1266,-2262.7624 1773.4133,-2229.0824 1727.2116,-2199.4131"/>
<polygon fill="#000000" stroke="#000000" points="1729.0197,-2196.4143 1718.7218,-2193.9233 1725.2186,-2202.2925 1729.0197,-2196.4143"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="1950.5" cy="-2135.204" rx="55.1697" ry="18"/>
<text text-anchor="middle" x="1950.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Includes</text>
</g>
<!-- section_23&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_23&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2158.3268,-2348.6854C2144.1665,-2340.1023 2126.2004,-2329.7722 2109.5,-2321.8043 2069.1233,-2302.5402 2047.7864,-2316.7715 2015.5,-2285.8043 1980.6356,-2252.3644 1963.435,-2197.1119 1955.7976,-2163.6394"/>
<polygon fill="#000000" stroke="#000000" points="1959.1622,-2162.6365 1953.6437,-2153.5923 1952.3177,-2164.1038 1959.1622,-2162.6365"/>
</g>
<!-- prose_26 -->
<g id="node27" class="node">
<title>prose_26</title>
<ellipse fill="none" stroke="#000000" cx="2056.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2056.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_23&#45;&gt;prose_26 -->
<g id="edge26" class="edge">
<title>section_23&#45;&gt;prose_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2159.8707,-2348.4347C2140.4775,-2333.9937 2114.1846,-2311.4655 2098.5,-2285.8043 2074.9715,-2247.3097 2064.2906,-2195.3171 2059.6926,-2163.581"/>
<polygon fill="#000000" stroke="#000000" points="2063.1579,-2163.0882 2058.3567,-2153.6436 2056.2203,-2164.0208 2063.1579,-2163.0882"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2184.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2184.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 32&#45;43</text>
</g>
<!-- section_23&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_23&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2184.5,-2347.1566C2184.5,-2307.283 2184.5,-2211.4294 2184.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="2188.0001,-2163.4861 2184.5,-2153.4862 2181.0001,-2163.4862 2188.0001,-2163.4861"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1969.5,-1839.4035 1915.5,-1839.4035 1915.5,-1803.4035 1969.5,-1803.4035 1969.5,-1839.4035"/>
</g>
<!-- prose_26&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_26&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2054.4449,-2116.8829C2050.4833,-2087.3031 2039.8287,-2027.9635 2014.5,-1984.6037 2003.0868,-1965.0656 1989.9507,-1968.1199 1978.5,-1948.6037 1960.2492,-1917.4976 1950.8398,-1876.6517 1946.2943,-1849.7436"/>
<polygon fill="#000000" stroke="#000000" points="1949.7447,-1849.1541 1944.7319,-1839.8202 1942.8299,-1850.2429 1949.7447,-1849.1541"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="2297.5,-1903.2038 1987.5,-1903.2038 1987.5,-1739.6031 2297.5,-1739.6031 2297.5,-1903.2038"/>
<text text-anchor="middle" x="2142.5" y="-1888.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1825.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1793.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">local Header = require &quot;grym/header&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1778.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Block = require &quot;grym/block&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1763.1034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2142.5" y="-1747.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_27&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.0604,-2116.9764C2176.8601,-2078.1232 2164.3793,-1984.873 2154.8154,-1913.4175"/>
<polygon fill="#000000" stroke="#000000" points="2158.2821,-1912.9347 2153.4864,-1903.4874 2151.344,-1913.8633 2158.2821,-1912.9347"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2333.5,-2153.204 2279.5,-2153.204 2279.5,-2117.204 2333.5,-2117.204 2333.5,-2153.204"/>
</g>
<!-- prose_31&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>prose_31&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2524.6232,-2348.4698C2517.2476,-2339.275 2506.9976,-2328.4249 2495.5,-2321.8043 2434.9623,-2286.9448 2391.9839,-2335.1129 2342.5,-2285.8043 2310.0243,-2253.4437 2304.8414,-2197.3628 2304.9999,-2163.5274"/>
<polygon fill="#000000" stroke="#000000" points="2308.5021,-2163.4526 2305.2112,-2153.3818 2301.5036,-2163.3067 2308.5021,-2163.4526"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="2689.5,-2247.5045 2351.5,-2247.5045 2351.5,-2022.9035 2689.5,-2022.9035 2689.5,-2247.5045"/>
<text text-anchor="middle" x="2520.5" y="-2232.4042" font-family="Inconsolata" font-size="14.00" fill="#000000">local S, s = u.inherit(Node)</text>
<text text-anchor="middle" x="2520.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.__tostring(section)</text>
<text text-anchor="middle" x="2520.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(section) do</text>
<text text-anchor="middle" x="2520.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local repr = tostring(v)</text>
<text text-anchor="middle" x="2520.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (repr ~= &quot;&quot; and repr ~= &quot;\n&quot;) then</text>
<text text-anchor="middle" x="2520.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot;repr: &quot; .. repr .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="2520.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. repr .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2520.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2520.5" y="-2046.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2520.5" y="-2031.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_32&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2653.2006,-2347.1566C2640.464,-2326.8134 2618.6044,-2291.8987 2596.2606,-2256.2106"/>
<polygon fill="#000000" stroke="#000000" points="2599.155,-2254.2381 2590.8818,-2247.6196 2593.2219,-2257.9528 2599.155,-2254.2381"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="2797.5" cy="-2135.204" rx="90.4762" ry="18"/>
<text text-anchor="middle" x="2797.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : dotLabel(section)</text>
</g>
<!-- section_33&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_33&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2926.5144,-2347.1566C2901.9792,-2306.8487 2842.6228,-2209.3344 2813.7774,-2161.9455"/>
<polygon fill="#000000" stroke="#000000" points="2816.6237,-2159.8901 2808.4345,-2153.1679 2810.6443,-2163.5297 2816.6237,-2159.8901"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="2937.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2937.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_33&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2937.5,-2347.1566C2937.5,-2307.283 2937.5,-2211.4294 2937.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="2941.0001,-2163.4861 2937.5,-2153.4862 2934.0001,-2163.4862 2941.0001,-2163.4861"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3019.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3019.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_33&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_33&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2948.0665,-2347.4193C2957.0954,-2331.6506 2969.9456,-2307.7793 2978.5,-2285.8043 2994.6795,-2244.2416 3007.0024,-2193.8692 3013.7397,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3017.2054,-2163.7278 3015.8869,-2153.2153 3010.3619,-2162.2555 3017.2054,-2163.7278"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="3147.5" cy="-2135.204" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3147.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 72&#45;77</text>
</g>
<!-- section_33&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>section_33&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2970.317,-2349.5634C2997.0063,-2335.6332 3034.3902,-2313.2361 3060.5,-2285.8043 3095.7793,-2248.7386 3122.4755,-2194.7498 3136.492,-2162.4869"/>
<polygon fill="#000000" stroke="#000000" points="3139.7424,-2163.787 3140.4304,-2153.2145 3133.2995,-2161.0504 3139.7424,-2163.787"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="3399.5" cy="-2135.204" rx="104.4491" ry="18"/>
<text text-anchor="middle" x="3399.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toMarkdown(section)</text>
</g>
<!-- section_34&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_34&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3605.0736,-2348.9771C3578.8722,-2334.5398 3541.4469,-2311.7372 3513.5,-2285.8043 3472.8073,-2248.044 3436.0816,-2194.3671 3415.8711,-2162.337"/>
<polygon fill="#000000" stroke="#000000" points="3418.638,-2160.159 3410.3808,-2153.5206 3412.696,-2163.8594 3418.638,-2160.159"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="3554.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3554.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>section_34&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3625.7548,-2347.107C3616.7357,-2331.3366 3603.9982,-2307.6347 3595.5,-2285.8043 3579.3205,-2244.2416 3566.9976,-2193.8692 3560.2603,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3563.6381,-2162.2555 3558.1131,-2153.2153 3556.7946,-2163.7278 3563.6381,-2162.2555"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="3636.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3636.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_34&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3636.5,-2347.1566C3636.5,-2307.283 3636.5,-2211.4294 3636.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="3640.0001,-2163.4861 3636.5,-2153.4862 3633.0001,-2163.4862 3640.0001,-2163.4861"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3718.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3718.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_34&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_34&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3647.2452,-2347.107C3656.2643,-2331.3366 3669.0018,-2307.6347 3677.5,-2285.8043 3693.6795,-2244.2416 3706.0024,-2193.8692 3712.7397,-2163.1964"/>
<polygon fill="#000000" stroke="#000000" points="3716.2054,-2163.7278 3714.8869,-2153.2153 3709.3619,-2162.2555 3716.2054,-2163.7278"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="3851.5" cy="-2135.204" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3851.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;101</text>
</g>
<!-- section_34&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_34&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3669.4097,-2349.2529C3695.9771,-2335.213 3733.1444,-2312.8228 3759.5,-2285.8043 3795.7561,-2248.6362 3824.327,-2194.6806 3839.4992,-2162.4518"/>
<polygon fill="#000000" stroke="#000000" points="3842.761,-2163.7364 3843.7714,-2153.1899 3836.4046,-2160.8044 3842.761,-2163.7364"/>
</g>
<!-- section_49 -->
<g id="node50" class="node">
<title>section_49</title>
<ellipse fill="none" stroke="#000000" cx="4027.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4027.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 103&#45;124</text>
</g>
<!-- section_34&#45;&gt;section_49 -->
<g id="edge49" class="edge">
<title>section_34&#45;&gt;section_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3695.9231,-2355.4712C3773.5654,-2341.8068 3904.1552,-2315.2834 3942.5,-2285.8043 3983.3761,-2254.3791 4007.6617,-2197.3428 4019.2207,-2163.1991"/>
<polygon fill="#000000" stroke="#000000" points="4022.6458,-2163.9835 4022.4037,-2153.3915 4015.9876,-2161.8227 4022.6458,-2163.9835"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="2563,-1849.305 2316,-1849.305 2316,-1793.502 2563,-1793.502 2563,-1849.305"/>
<text text-anchor="middle" x="2439.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Produces a label for a dotfile.</text>
</g>
<!-- prose_38&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_38&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2938.5309,-2117.009C2939.2573,-2084.8178 2935.623,-2018.0719 2896.5,-1984.6037 2841.2836,-1937.3681 2637.2861,-1979.4622 2571.5,-1948.6037 2527.7809,-1928.0963 2489.5148,-1887.2124 2465.5965,-1857.3112"/>
<polygon fill="#000000" stroke="#000000" points="2468.1604,-1854.9085 2459.2382,-1849.1949 2462.65,-1859.2254 2468.1604,-1854.9085"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="2828,-1841.3055 2581,-1841.3055 2581,-1801.5014 2828,-1801.5014 2828,-1841.3055"/>
<text text-anchor="middle" x="2704.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return : string in dot format.</text>
</g>
<!-- prose_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3020.0514,-2117.0329C3019.9684,-2085.4788 3015.0296,-2020.4992 2978.5,-1984.6037 2932.0606,-1938.9705 2893.3989,-1980.2506 2836.5,-1948.6037 2791.188,-1923.4014 2750.0886,-1878.7601 2726.1915,-1849.6286"/>
<polygon fill="#000000" stroke="#000000" points="2728.6308,-1847.0777 2719.63,-1841.4887 2723.1809,-1851.4708 2728.6308,-1847.0777"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3247,-1856.0047 2846,-1856.0047 2846,-1786.8022 3247,-1786.8022 3247,-1856.0047"/>
<text text-anchor="middle" x="3046.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.dotLabel(section)</text>
<text text-anchor="middle" x="3046.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;section: &quot; .. tostring(section.line_first) </text>
<text text-anchor="middle" x="3046.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(section.line_last)</text>
<text text-anchor="middle" x="3046.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_40&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3141.6333,-2116.9764C3126.0637,-2068.6027 3083.3543,-1935.9074 3060.8334,-1865.9365"/>
<polygon fill="#000000" stroke="#000000" points="3064.0584,-1864.5323 3057.6628,-1856.0856 3057.395,-1866.677 3064.0584,-1864.5323"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="3540,-1849.305 3265,-1849.305 3265,-1793.502 3540,-1793.502 3540,-1849.305"/>
<text text-anchor="middle" x="3402.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Translates the Section to markdown.</text>
</g>
<!-- prose_45&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>prose_45&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3551.3699,-2116.9273C3545.9731,-2087.9106 3533.4348,-2029.9486 3512.5,-1984.6037 3490.8069,-1937.6164 3456.277,-1889.1 3431.6942,-1857.3124"/>
<polygon fill="#000000" stroke="#000000" points="3434.2736,-1854.929 3425.3584,-1849.2044 3428.7578,-1859.2391 3434.2736,-1854.929"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3735,-1841.3055 3558,-1841.3055 3558,-1801.5014 3735,-1801.5014 3735,-1841.3055"/>
<text text-anchor="middle" x="3646.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the Section.</text>
</g>
<!-- prose_46&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>prose_46&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3637.0809,-2116.9764C3638.7359,-2065.0423 3643.4881,-1915.9175 3645.5388,-1851.5647"/>
<polygon fill="#000000" stroke="#000000" points="3649.0461,-1851.3888 3645.8665,-1841.2823 3642.0497,-1851.1658 3649.0461,-1851.3888"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="3986,-1841.3055 3753,-1841.3055 3753,-1801.5014 3986,-1801.5014 3986,-1841.3055"/>
<text text-anchor="middle" x="3869.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: A Markdown string. &#160;</text>
</g>
<!-- prose_47&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>prose_47&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3721.6528,-2116.9378C3727.0808,-2087.9354 3739.661,-2029.9927 3760.5,-1984.6037 3783.8902,-1933.6579 3822.2385,-1880.7858 3846.6562,-1849.5073"/>
<polygon fill="#000000" stroke="#000000" points="3849.7032,-1851.2959 3853.1498,-1841.2773 3844.2078,-1846.9599 3849.7032,-1851.2959"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4440.5,-1918.3042 4004.5,-1918.3042 4004.5,-1724.5027 4440.5,-1724.5027 4440.5,-1918.3042"/>
<text text-anchor="middle" x="4222.5" y="-1902.9036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.toMarkdown(section)</text>
<text text-anchor="middle" x="4222.5" y="-1887.5036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4222.5" y="-1872.1036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, node in ipairs(section) do</text>
<text text-anchor="middle" x="4222.5" y="-1856.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="4222.5" y="-1841.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="4222.5" y="-1825.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else </text>
<text text-anchor="middle" x="4222.5" y="-1810.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;no toMarkdown method in &quot; .. block.id)</text>
<text text-anchor="middle" x="4222.5" y="-1795.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4222.5" y="-1779.7034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4222.5" y="-1748.3034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4222.5" y="-1732.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_48&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3859.0343,-2117.0244C3872.3635,-2086.5911 3902.6018,-2024.7278 3943.5,-1984.6037 3952.9511,-1975.3315 3993.3519,-1950.7157 4040.5984,-1923.3295"/>
<polygon fill="#000000" stroke="#000000" points="4042.5885,-1926.2219 4049.4941,-1918.1867 4039.0849,-1920.1617 4042.5885,-1926.2219"/>
</g>
<!-- header_54 -->
<g id="node55" class="node">
<title>header_54</title>
<ellipse fill="none" stroke="#000000" cx="4509.5" cy="-1821.4035" rx="50.8" ry="18"/>
<text text-anchor="middle" x="4509.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : asserts</text>
</g>
<!-- section_49&#45;&gt;header_54 -->
<g id="edge54" class="edge">
<title>section_49&#45;&gt;header_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.7701,-2117.1057C4040.5169,-2084.4479 4063.7974,-2016.1344 4111.5,-1984.6037 4237.5289,-1901.3005 4326.3773,-2036.1453 4449.5,-1948.6037 4482.2535,-1925.3156 4497.6923,-1879.3917 4504.5416,-1849.5659"/>
<polygon fill="#000000" stroke="#000000" points="4507.9723,-1850.2592 4506.6204,-1839.751 4501.1242,-1848.8088 4507.9723,-1850.2592"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="4610.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4610.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_49&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_49&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.6867,-2116.9774C4040.2978,-2084.1113 4063.3658,-2015.4715 4111.5,-1984.6037 4197.4387,-1929.4924 4489.3968,-2011.8982 4569.5,-1948.6037 4599.3333,-1925.0306 4607.7726,-1879.514 4609.9831,-1849.8073"/>
<polygon fill="#000000" stroke="#000000" points="4613.4873,-1849.8257 4610.5438,-1839.648 4606.498,-1849.4399 4613.4873,-1849.8257"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="4787.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4787.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 105&#45;122</text>
</g>
<!-- section_49&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>section_49&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4031.5845,-2117.1802C4040.085,-2084.3263 4063.0569,-2015.2653 4111.5,-1984.6037 4213.1214,-1920.2835 4541.1664,-1996.4628 4651.5,-1948.6037 4701.9248,-1926.7311 4745.3572,-1877.8078 4768.8444,-1847.4109"/>
<polygon fill="#000000" stroke="#000000" points="4771.6879,-1849.4534 4774.9294,-1839.3666 4766.1052,-1845.2304 4771.6879,-1849.4534"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4601.5,-847.1016 4547.5,-847.1016 4547.5,-811.1016 4601.5,-811.1016 4601.5,-847.1016"/>
</g>
<!-- prose_55&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_55&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4609.8444,-1803.3331C4605.4981,-1683.5304 4580.8488,-1004.1008 4575.517,-857.1337"/>
<polygon fill="#000000" stroke="#000000" points="4579.014,-856.9841 4575.1536,-847.1176 4572.0186,-857.238 4579.014,-856.9841"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5027.5,-956.5024 4619.5,-956.5024 4619.5,-701.7008 5027.5,-701.7008 5027.5,-956.5024"/>
<text text-anchor="middle" x="4823.5" y="-941.1019" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.check(section)</text>
<text text-anchor="middle" x="4823.5" y="-925.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="4823.5" y="-910.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if (i == 1) then</text>
<text text-anchor="middle" x="4823.5" y="-894.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if section.header then</text>
<text text-anchor="middle" x="4823.5" y="-879.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;header&quot;)</text>
<text text-anchor="middle" x="4823.5" y="-864.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-848.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4823.5" y="-833.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;assert(v.id == &quot;section&quot; or v.id == &quot;block&quot;)</text>
<text text-anchor="middle" x="4823.5" y="-817.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-802.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4823.5" y="-787.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.level)</text>
<text text-anchor="middle" x="4823.5" y="-771.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.id)</text>
<text text-anchor="middle" x="4823.5" y="-756.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.lines)</text>
<text text-anchor="middle" x="4823.5" y="-740.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_first)</text>
<text text-anchor="middle" x="4823.5" y="-725.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(section.line_last)</text>
<text text-anchor="middle" x="4823.5" y="-710.1014" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>codeblock_56&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4788.1556,-1803.3331C4791.7955,-1703.0028 4809.6747,-1210.1811 4818.5223,-966.3072"/>
<polygon fill="#000000" stroke="#000000" points="4822.02,-966.4315 4818.8849,-956.3111 4815.0246,-966.1776 4822.02,-966.4315"/>
</g>
<!-- leaf_66 -->
<g id="node67" class="node">
<title>leaf_66</title>
<polygon fill="none" stroke="#c0c0c0" points="4304.5,-2163.1055 4120.5,-2163.1055 4120.5,-2107.3025 4304.5,-2107.3025 4304.5,-2163.1055"/>
<text text-anchor="middle" x="4212.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Add a line to a section.</text>
</g>
<!-- prose_60&#45;&gt;leaf_66 -->
<g id="edge66" class="edge">
<title>prose_60&#45;&gt;leaf_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4671.9101,-2347.9344C4664.6301,-2338.5611 4654.3801,-2327.7111 4642.5,-2321.8043 4510.7872,-2256.3162 4439.3219,-2362 4313.5,-2285.8043 4270.6711,-2259.8678 4242.075,-2208.0294 4226.5579,-2172.4846"/>
<polygon fill="#000000" stroke="#000000" points="4229.6378,-2170.7805 4222.5271,-2162.9263 4223.1879,-2173.5005 4229.6378,-2170.7805"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="4744.5,-2193.6049 4322.5,-2193.6049 4322.5,-2076.8031 4744.5,-2076.8031 4744.5,-2193.6049"/>
<text text-anchor="middle" x="4533.5" y="-2162.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">These lines are later translated into blocks, and when the</text>
<text text-anchor="middle" x="4533.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">parser is mature, =section.line= will be set to nil before</text>
<text text-anchor="middle" x="4533.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000">the Doc is returned. &#160;</text>
<text text-anchor="middle" x="4533.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4533.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: the section</text>
<text text-anchor="middle" x="4533.5" y="-2085.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; line: the line</text>
</g>
<!-- prose_61&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>prose_61&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4750.4646,-2348.9815C4742.775,-2340.7634 4733.2211,-2330.673 4724.5,-2321.8043 4684.2764,-2280.9001 4638.3091,-2235.9383 4601.5503,-2200.4001"/>
<polygon fill="#000000" stroke="#000000" points="4603.9501,-2197.8519 4594.3258,-2193.4221 4599.087,-2202.8868 4603.9501,-2197.8519"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="4932.5,-2155.1061 4762.5,-2155.1061 4762.5,-2115.3019 4932.5,-2115.3019 4932.5,-2155.1061"/>
<text text-anchor="middle" x="4847.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : the section</text>
</g>
<!-- prose_62&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>prose_62&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4847.5,-2347.1566C4847.5,-2307.7753 4847.5,-2213.7876 4847.5,-2165.2919"/>
<polygon fill="#000000" stroke="#000000" points="4851.0001,-2165.1126 4847.5,-2155.1126 4844.0001,-2165.1126 4851.0001,-2165.1126"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="5274.5,-2169.8053 4950.5,-2169.8053 4950.5,-2100.6027 5274.5,-2100.6027 5274.5,-2169.8053"/>
<text text-anchor="middle" x="5112.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addLine(section, line)</text>
<text text-anchor="middle" x="5112.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines[#section.lines + 1] = line</text>
<text text-anchor="middle" x="5112.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5112.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_63&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>codeblock_63&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5054.4435,-2347.1566C5064.2334,-2311.4156 5086.3433,-2230.6969 5100.2771,-2179.8273"/>
<polygon fill="#000000" stroke="#000000" points="5103.6825,-2180.643 5102.9488,-2170.0736 5096.9312,-2178.7937 5103.6825,-2180.643"/>
</g>
<!-- header_70 -->
<g id="node71" class="node">
<title>header_70</title>
<ellipse fill="none" stroke="#000000" cx="5468.5" cy="-2135.204" rx="175.5244" ry="18"/>
<text text-anchor="middle" x="5468.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : addSection(section, newsection, linum)</text>
</g>
<!-- section_64&#45;&gt;header_70 -->
<g id="edge70" class="edge">
<title>section_64&#45;&gt;header_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5714.9923,-2347.5385C5667.8356,-2306.9165 5551.5871,-2206.7773 5497.2989,-2160.012"/>
<polygon fill="#000000" stroke="#000000" points="5499.3067,-2157.1221 5489.4458,-2153.2472 5494.738,-2162.4257 5499.3067,-2157.1221"/>
</g>
<!-- prose_71 -->
<g id="node72" class="node">
<title>prose_71</title>
<ellipse fill="none" stroke="#000000" cx="5694.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5694.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_71 -->
<g id="edge71" class="edge">
<title>section_64&#45;&gt;prose_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5732.2828,-2347.1566C5725.1574,-2307.1846 5708.0035,-2210.9557 5699.48,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="5702.903,-2162.3984 5697.7023,-2153.1679 5696.0116,-2163.627 5702.903,-2162.3984"/>
</g>
<!-- prose_72 -->
<g id="node73" class="node">
<title>prose_72</title>
<ellipse fill="none" stroke="#000000" cx="5776.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5776.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_72 -->
<g id="edge72" class="edge">
<title>section_64&#45;&gt;prose_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5738.7172,-2347.1566C5745.8426,-2307.1846 5762.9965,-2210.9557 5771.52,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="5774.9884,-2163.627 5773.2977,-2153.1679 5768.097,-2162.3984 5774.9884,-2163.627"/>
</g>
<!-- prose_73 -->
<g id="node74" class="node">
<title>prose_73</title>
<ellipse fill="none" stroke="#000000" cx="5858.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5858.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_64&#45;&gt;prose_73 -->
<g id="edge73" class="edge">
<title>section_64&#45;&gt;prose_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5759.3791,-2347.9188C5777.844,-2333.3414 5802.6821,-2310.8838 5817.5,-2285.8043 5840.3109,-2247.1964 5850.7633,-2195.5705 5855.303,-2163.8908"/>
<polygon fill="#000000" stroke="#000000" points="5858.8264,-2163.9448 5856.6727,-2153.5712 5851.8873,-2163.0238 5858.8264,-2163.9448"/>
</g>
<!-- codeblock_74 -->
<g id="node75" class="node">
<title>codeblock_74</title>
<ellipse fill="none" stroke="#000000" cx="5996.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5996.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 156&#45;164</text>
</g>
<!-- section_64&#45;&gt;codeblock_74 -->
<g id="edge74" class="edge">
<title>section_64&#45;&gt;codeblock_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5781.1648,-2350.7824C5816.4428,-2337.9419 5864.9224,-2316.4221 5899.5,-2285.8043 5939.1696,-2250.6776 5969.0007,-2195.6016 5984.5181,-2162.6884"/>
<polygon fill="#000000" stroke="#000000" points="5987.8687,-2163.7796 5988.8694,-2153.2321 5981.5096,-2160.8535 5987.8687,-2163.7796"/>
</g>
<!-- header_79 -->
<g id="node80" class="node">
<title>header_79</title>
<ellipse fill="none" stroke="#000000" cx="6985.5" cy="-2135.204" rx="137.8106" ry="18"/>
<text text-anchor="middle" x="6985.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Helper Functions for Blocking</text>
</g>
<!-- section_65&#45;&gt;header_79 -->
<g id="edge79" class="edge">
<title>section_65&#45;&gt;header_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7503.069,-2357.8906C7395.8282,-2345.7286 7195.6622,-2319.3333 7132.5,-2285.8043 7075.8257,-2255.7193 7027.7305,-2196.0383 7003.1149,-2161.5254"/>
<polygon fill="#000000" stroke="#000000" points="7005.9757,-2159.5089 6997.3716,-2153.3265 7000.2424,-2163.5251 7005.9757,-2159.5089"/>
</g>
<!-- prose_80 -->
<g id="node81" class="node">
<title>prose_80</title>
<ellipse fill="none" stroke="#000000" cx="7173.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7173.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_80 -->
<g id="edge80" class="edge">
<title>section_65&#45;&gt;prose_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7502.7508,-2358.1882C7410.8892,-2347.5585 7256.2173,-2324.4139 7215.5,-2285.8043 7181.8202,-2253.8679 7174.3946,-2197.4045 7173.1767,-2163.428"/>
<polygon fill="#000000" stroke="#000000" points="7176.6725,-2163.1747 7172.974,-2153.2464 7169.6739,-2163.3141 7176.6725,-2163.1747"/>
</g>
<!-- codeblock_81 -->
<g id="node82" class="node">
<title>codeblock_81</title>
<ellipse fill="none" stroke="#000000" cx="7311.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7311.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 171&#45;175</text>
</g>
<!-- section_65&#45;&gt;codeblock_81 -->
<g id="edge81" class="edge">
<title>section_65&#45;&gt;codeblock_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7526.8352,-2350.7824C7491.5572,-2337.9419 7443.0776,-2316.4221 7408.5,-2285.8043 7368.8304,-2250.6776 7338.9993,-2195.6016 7323.4819,-2162.6884"/>
<polygon fill="#000000" stroke="#000000" points="7326.4904,-2160.8535 7319.1306,-2153.2321 7320.1313,-2163.7796 7326.4904,-2160.8535"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="7449.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7449.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_65&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7548.6209,-2347.9188C7530.156,-2333.3414 7505.3179,-2310.8838 7490.5,-2285.8043 7467.6891,-2247.1964 7457.2367,-2195.5705 7452.697,-2163.8908"/>
<polygon fill="#000000" stroke="#000000" points="7456.1127,-2163.0238 7451.3273,-2153.5712 7449.1736,-2163.9448 7456.1127,-2163.0238"/>
</g>
<!-- prose_83 -->
<g id="node84" class="node">
<title>prose_83</title>
<ellipse fill="none" stroke="#000000" cx="7531.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7531.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_83 -->
<g id="edge83" class="edge">
<title>section_65&#45;&gt;prose_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7569.2828,-2347.1566C7562.1574,-2307.1846 7545.0035,-2210.9557 7536.48,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="7539.903,-2162.3984 7534.7023,-2153.1679 7533.0116,-2163.627 7539.903,-2162.3984"/>
</g>
<!-- prose_84 -->
<g id="node85" class="node">
<title>prose_84</title>
<ellipse fill="none" stroke="#000000" cx="7613.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7613.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_65&#45;&gt;prose_84 -->
<g id="edge84" class="edge">
<title>section_65&#45;&gt;prose_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7575.7172,-2347.1566C7582.8426,-2307.1846 7599.9965,-2210.9557 7608.52,-2163.1406"/>
<polygon fill="#000000" stroke="#000000" points="7611.9884,-2163.627 7610.2977,-2153.1679 7605.097,-2162.3984 7611.9884,-2163.627"/>
</g>
<!-- codeblock_85 -->
<g id="node86" class="node">
<title>codeblock_85</title>
<ellipse fill="none" stroke="#000000" cx="7852.5" cy="-2135.204" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7852.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 185&#45;202</text>
</g>
<!-- section_65&#45;&gt;codeblock_85 -->
<g id="edge85" class="edge">
<title>section_65&#45;&gt;codeblock_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7593.5455,-2347.9169C7643.0034,-2307.2907 7766.7165,-2205.6691 7823.357,-2159.1429"/>
<polygon fill="#000000" stroke="#000000" points="7825.7046,-2161.744 7831.2103,-2152.692 7821.2614,-2156.3349 7825.7046,-2161.744"/>
</g>
<!-- section_86 -->
<g id="node87" class="node">
<title>section_86</title>
<ellipse fill="none" stroke="#000000" cx="8163.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8163.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 224&#45;229</text>
</g>
<!-- section_65&#45;&gt;section_86 -->
<g id="edge86" class="edge">
<title>section_65&#45;&gt;section_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7643.3292,-2358.8157C7720.8972,-2349.8928 7847.6744,-2329.5754 7948.5,-2285.8043 8023.0422,-2253.4435 8098.0535,-2193.0962 8136.7141,-2159.4511"/>
<polygon fill="#000000" stroke="#000000" points="8139.1984,-2161.9274 8144.3988,-2152.6966 8134.5771,-2156.6696 8139.1984,-2161.9274"/>
</g>
<!-- section_87 -->
<g id="node88" class="node">
<title>section_87</title>
<ellipse fill="none" stroke="#000000" cx="8376.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8376.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 230&#45;234</text>
</g>
<!-- section_65&#45;&gt;section_87 -->
<g id="edge87" class="edge">
<title>section_65&#45;&gt;section_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7647.7753,-2363.189C7801.3793,-2357.9817 8145.0694,-2340.4126 8247.5,-2285.8043 8300.9034,-2257.3336 8341.7922,-2196.9504 8362.1721,-2161.9072"/>
<polygon fill="#000000" stroke="#000000" points="8365.2444,-2163.5847 8367.1386,-2153.1605 8359.1573,-2160.1283 8365.2444,-2163.5847"/>
</g>
<!-- section_88 -->
<g id="node89" class="node">
<title>section_88</title>
<ellipse fill="none" stroke="#000000" cx="8591.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8591.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 235&#45;241</text>
</g>
<!-- section_65&#45;&gt;section_88 -->
<g id="edge88" class="edge">
<title>section_65&#45;&gt;section_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7646.8887,-2361.7367C7847.3994,-2351.9446 8388.8151,-2322.4013 8460.5,-2285.8043 8514.7559,-2258.1052 8556.2695,-2197.4339 8576.9572,-2162.1344"/>
<polygon fill="#000000" stroke="#000000" points="8580.0716,-2163.7388 8581.9985,-2153.3206 8573.9953,-2160.2632 8580.0716,-2163.7388"/>
</g>
<!-- section_89 -->
<g id="node90" class="node">
<title>section_89</title>
<ellipse fill="none" stroke="#000000" cx="8813.5" cy="-2135.204" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8813.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 242&#45;360</text>
</g>
<!-- section_65&#45;&gt;section_89 -->
<g id="edge89" class="edge">
<title>section_65&#45;&gt;section_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7647.6143,-2363.0037C7881.0011,-2355.7233 8583.4636,-2330.3136 8675.5,-2285.8043 8731.7687,-2258.5925 8775.97,-2197.4655 8798.0488,-2162.0214"/>
<polygon fill="#000000" stroke="#000000" points="8801.2222,-2163.5393 8803.4307,-2153.1771 8795.2423,-2159.9004 8801.2222,-2163.5393"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="5180.5,-1849.305 4912.5,-1849.305 4912.5,-1793.502 5180.5,-1793.502 5180.5,-1849.305"/>
<text text-anchor="middle" x="5046.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Adds a section to the host section</text>
</g>
<!-- prose_71&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>prose_71&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5695.6324,-2117.1349C5696.5558,-2084.8369 5693.2724,-2017.5105 5653.5,-1984.6037 5573.8169,-1918.6757 5284.6678,-1989.0882 5189.5,-1948.6037 5142.7682,-1928.7239 5100.8647,-1887.241 5074.6819,-1857.037"/>
<polygon fill="#000000" stroke="#000000" points="5077.1911,-1854.5848 5068.0471,-1849.2334 5071.8581,-1859.1191 5077.1911,-1854.5848"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="5544,-1856.6038 5199,-1856.6038 5199,-1786.2031 5544,-1786.2031 5544,-1856.6038"/>
<text text-anchor="middle" x="5371.5" y="-1825.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section: &#160;Section to contain the new section.</text>
<text text-anchor="middle" x="5371.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; newsection: &#160;The new section.</text>
<text text-anchor="middle" x="5371.5" y="-1794.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: &#160;The line number.</text>
</g>
<!-- prose_72&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>prose_72&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5777.2424,-2117.0836C5777.4832,-2085.312 5773.0672,-2019.6109 5735.5,-1984.6037 5675.1755,-1928.3901 5629.3622,-1980.9137 5553.5,-1948.6037 5503.92,-1927.4875 5454.2177,-1891.5033 5419.3108,-1863.1856"/>
<polygon fill="#000000" stroke="#000000" points="5421.1584,-1860.1741 5411.2084,-1856.5345 5416.717,-1865.5847 5421.1584,-1860.1741"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="5788.5,-1841.3055 5562.5,-1841.3055 5562.5,-1801.5014 5788.5,-1801.5014 5788.5,-1841.3055"/>
<text text-anchor="middle" x="5675.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; #return: the parent section.</text>
</g>
<!-- prose_73&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prose_73&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5856.2419,-2117.079C5852.0207,-2087.7747 5841.1335,-2028.8136 5817.5,-1984.6037 5788.3225,-1930.023 5737.8695,-1878.0868 5705.6214,-1848.0065"/>
<polygon fill="#000000" stroke="#000000" points="5707.9631,-1845.4049 5698.2369,-1841.2033 5703.2201,-1850.5531 5707.9631,-1845.4049"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="6166,-1879.2039 5807,-1879.2039 5807,-1763.6031 6166,-1763.6031 6166,-1879.2039"/>
<text text-anchor="middle" x="5986.5" y="-1864.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.addSection(section, newsection, linum)</text>
<text text-anchor="middle" x="5986.5" y="-1848.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if linum &gt; 0 then</text>
<text text-anchor="middle" x="5986.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.line_last = linum &#45; 1</text>
<text text-anchor="middle" x="5986.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5986.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[#section + 1] = newsection</text>
<text text-anchor="middle" x="5986.5" y="-1787.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="5986.5" y="-1771.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_74&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>codeblock_74&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5995.9191,-2116.9764C5994.5357,-2073.5632 5990.9879,-1962.2355 5988.6631,-1889.2825"/>
<polygon fill="#000000" stroke="#000000" points="5992.1604,-1889.1377 5988.3436,-1879.2542 5985.1639,-1889.3607 5992.1604,-1889.1377"/>
</g>
<!-- leaf_90 -->
<g id="node91" class="node">
<title>leaf_90</title>
<polygon fill="none" stroke="#c0c0c0" points="6389,-1849.305 6184,-1849.305 6184,-1793.502 6389,-1793.502 6389,-1849.305"/>
<text text-anchor="middle" x="6286.5" y="-1801.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Boolean match for a tagline</text>
</g>
<!-- prose_80&#45;&gt;leaf_90 -->
<g id="edge90" class="edge">
<title>prose_80&#45;&gt;leaf_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7174.7236,-2117.023C7175.7936,-2084.5453 7172.7371,-2016.9406 7132.5,-1984.6037 7068.7665,-1933.3838 6471.0847,-1984.2511 6397.5,-1948.6037 6357.5277,-1929.2395 6325.9833,-1888.2282 6306.8957,-1857.9836"/>
<polygon fill="#000000" stroke="#000000" points="6309.8249,-1856.0651 6301.6112,-1849.373 6303.8589,-1859.7266 6309.8249,-1856.0651"/>
</g>
<!-- leaf_91 -->
<g id="node92" class="node">
<title>leaf_91</title>
<polygon fill="none" stroke="#c0c0c0" points="6682,-1848.6039 6407,-1848.6039 6407,-1794.203 6682,-1794.203 6682,-1848.6039"/>
<text text-anchor="middle" x="6544.5" y="-1833.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isTagline(line)</text>
<text text-anchor="middle" x="6544.5" y="-1817.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return L.match(m.tagline_p, line)</text>
<text text-anchor="middle" x="6544.5" y="-1802.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_81&#45;&gt;leaf_91 -->
<g id="edge91" class="edge">
<title>codeblock_81&#45;&gt;leaf_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7305.8953,-2117.1098C7294.6175,-2084.1401 7265.7771,-2014.8957 7214.5,-1984.6037 7114.0066,-1925.2371 6798.3367,-1993.2642 6690.5,-1948.6037 6642.743,-1928.8252 6599.6846,-1886.9182 6572.9089,-1856.5996"/>
<polygon fill="#000000" stroke="#000000" points="6575.3222,-1854.0399 6566.1291,-1848.7733 6570.0314,-1858.6233 6575.3222,-1854.0399"/>
</g>
<!-- leaf_92 -->
<g id="node93" class="node">
<title>leaf_92</title>
<polygon fill="none" stroke="#c0c0c0" points="7073,-1841.3055 6700,-1841.3055 6700,-1801.5014 7073,-1801.5014 7073,-1841.3055"/>
<text text-anchor="middle" x="6886.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">Lookahead, counting blank lines, return the number.</text>
</g>
<!-- prose_82&#45;&gt;leaf_92 -->
<g id="edge92" class="edge">
<title>prose_82&#45;&gt;leaf_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7450.3996,-2116.9963C7450.8957,-2084.7847 7446.7928,-2018.0078 7407.5,-1984.6037 7352.1381,-1937.5388 7150.9315,-1973.0409 7082.5,-1948.6037 7018.0373,-1925.5839 6953.4,-1877.6472 6916.8246,-1847.642"/>
<polygon fill="#000000" stroke="#000000" points="6918.9489,-1844.8566 6909.0198,-1841.1603 6914.4767,-1850.2417 6918.9489,-1844.8566"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="7415.5,-1848.7039 7091.5,-1848.7039 7091.5,-1794.103 7415.5,-1794.103 7415.5,-1848.7039"/>
<text text-anchor="middle" x="7253.5" y="-1817.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; lines: the full lines array of the section</text>
<text text-anchor="middle" x="7253.5" y="-1802.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum: current index into lines</text>
</g>
<!-- prose_83&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>prose_83&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7531.016,-2116.9453C7529.3101,-2086.3955 7521.9122,-2024.365 7490.5,-1984.6037 7469.7869,-1958.3852 7452.6405,-1966.6192 7424.5,-1948.6037 7378.9677,-1919.454 7329.7042,-1882.1407 7295.8023,-1855.4793"/>
<polygon fill="#000000" stroke="#000000" points="7297.5425,-1852.3937 7287.5257,-1848.9419 7293.2036,-1857.8869 7297.5425,-1852.3937"/>
</g>
<!-- leaf_94 -->
<g id="node95" class="node">
<title>leaf_94</title>
<polygon fill="none" stroke="#c0c0c0" points="7793,-1841.3055 7434,-1841.3055 7434,-1801.5014 7793,-1801.5014 7793,-1841.3055"/>
<text text-anchor="middle" x="7613.5" y="-1809.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns: number of blank lines forward of index</text>
</g>
<!-- prose_84&#45;&gt;leaf_94 -->
<g id="edge94" class="edge">
<title>prose_84&#45;&gt;leaf_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7613.5,-2116.9764C7613.5,-2065.0423 7613.5,-1915.9175 7613.5,-1851.5647"/>
<polygon fill="#000000" stroke="#000000" points="7617.0001,-1851.2823 7613.5,-1841.2823 7610.0001,-1851.2824 7617.0001,-1851.2823"/>
</g>
<!-- leaf_95 -->
<g id="node96" class="node">
<title>leaf_95</title>
<polygon fill="none" stroke="#c0c0c0" points="8093.5,-1948.8043 7811.5,-1948.8043 7811.5,-1694.0026 8093.5,-1694.0026 8093.5,-1948.8043"/>
<text text-anchor="middle" x="7952.5" y="-1933.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">local function fwdBlanks(lines, linum)</text>
<text text-anchor="middle" x="7952.5" y="-1918.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local fwd = 0</text>
<text text-anchor="middle" x="7952.5" y="-1902.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local index = linum + 1</text>
<text text-anchor="middle" x="7952.5" y="-1887.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if index &gt; #lines then </text>
<text text-anchor="middle" x="7952.5" y="-1871.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return 0</text>
<text text-anchor="middle" x="7952.5" y="-1856.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="7952.5" y="-1841.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for i = index, #lines do</text>
<text text-anchor="middle" x="7952.5" y="-1825.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if lines[i] == &quot;&quot; then</text>
<text text-anchor="middle" x="7952.5" y="-1810.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fwd = fwd + 1</text>
<text text-anchor="middle" x="7952.5" y="-1794.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="7952.5" y="-1779.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;break</text>
<text text-anchor="middle" x="7952.5" y="-1764.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1748.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1733.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="7952.5" y="-1717.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return fwd</text>
<text text-anchor="middle" x="7952.5" y="-1702.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_85&#45;&gt;leaf_95 -->
<g id="edge95" class="edge">
<title>codeblock_85&#45;&gt;leaf_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7858.3087,-2116.9764C7868.2006,-2085.9355 7889.1571,-2020.1739 7908.7966,-1958.545"/>
<polygon fill="#000000" stroke="#000000" points="7912.2338,-1959.286 7911.9354,-1948.6953 7905.5643,-1957.1605 7912.2338,-1959.286"/>
</g>
<!-- header_96 -->
<g id="node97" class="node">
<title>header_96</title>
<ellipse fill="none" stroke="#000000" cx="8163.5" cy="-1821.4035" rx="52.2623" ry="18"/>
<text text-anchor="middle" x="8163.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : List line</text>
</g>
<!-- section_86&#45;&gt;header_96 -->
<g id="edge96" class="edge">
<title>section_86&#45;&gt;header_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8163.5,-2116.9764C8163.5,-2064.5477 8163.5,-1913.0682 8163.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8167.0001,-1849.6813 8163.5,-1839.6814 8160.0001,-1849.6814 8167.0001,-1849.6813"/>
</g>
<!-- prose_97 -->
<g id="node98" class="node">
<title>prose_97</title>
<ellipse fill="none" stroke="#000000" cx="8266.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8266.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_86&#45;&gt;prose_97 -->
<g id="edge97" class="edge">
<title>section_86&#45;&gt;prose_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8169.4829,-2116.9764C8186.768,-2064.3154 8236.8536,-1911.7243 8257.4704,-1848.913"/>
<polygon fill="#000000" stroke="#000000" points="8260.8357,-1849.8832 8260.6289,-1839.2903 8254.1848,-1847.7001 8260.8357,-1849.8832"/>
</g>
<!-- header_99 -->
<g id="node100" class="node">
<title>header_99</title>
<ellipse fill="none" stroke="#000000" cx="8376.5" cy="-1821.4035" rx="59.7106" ry="18"/>
<text text-anchor="middle" x="8376.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Table line</text>
</g>
<!-- section_87&#45;&gt;header_99 -->
<g id="edge99" class="edge">
<title>section_87&#45;&gt;header_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8376.5,-2116.9764C8376.5,-2064.5477 8376.5,-1913.0682 8376.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8380.0001,-1849.6813 8376.5,-1839.6814 8373.0001,-1849.6814 8380.0001,-1849.6813"/>
</g>
<!-- prose_100 -->
<g id="node101" class="node">
<title>prose_100</title>
<ellipse fill="none" stroke="#000000" cx="8486.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8486.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_87&#45;&gt;prose_100 -->
<g id="edge100" class="edge">
<title>section_87&#45;&gt;prose_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8383.5156,-2117.0205C8396.2856,-2083.7533 8423.9921,-2010.7874 8445.5,-1948.6037 8457.2986,-1914.4917 8469.8979,-1874.8661 8477.9679,-1849.0246"/>
<polygon fill="#000000" stroke="#000000" points="8481.4023,-1849.7673 8481.0316,-1839.179 8474.7184,-1847.6874 8481.4023,-1849.7673"/>
</g>
<!-- header_102 -->
<g id="node103" class="node">
<title>header_102</title>
<ellipse fill="none" stroke="#000000" cx="8591.5" cy="-1821.4035" rx="55.3589" ry="18"/>
<text text-anchor="middle" x="8591.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Tag line </text>
</g>
<!-- section_88&#45;&gt;header_102 -->
<g id="edge102" class="edge">
<title>section_88&#45;&gt;header_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8591.5,-2116.9764C8591.5,-2064.5477 8591.5,-1913.0682 8591.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8595.0001,-1849.6813 8591.5,-1839.6814 8588.0001,-1849.6814 8595.0001,-1849.6813"/>
</g>
<!-- prose_103 -->
<g id="node104" class="node">
<title>prose_103</title>
<ellipse fill="none" stroke="#000000" cx="8696.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8696.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_88&#45;&gt;prose_103 -->
<g id="edge103" class="edge">
<title>section_88&#45;&gt;prose_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8597.7897,-2117.2282C8609.3897,-2083.9962 8634.854,-2010.6745 8655.5,-1948.6037 8666.8922,-1914.3538 8679.5791,-1874.7579 8687.7803,-1848.961"/>
<polygon fill="#000000" stroke="#000000" points="8691.21,-1849.7245 8690.8995,-1839.1342 8684.538,-1847.6066 8691.21,-1849.7245"/>
</g>
<!-- header_105 -->
<g id="node106" class="node">
<title>header_105</title>
<ellipse fill="none" stroke="#000000" cx="8813.5" cy="-1821.4035" rx="66.779" ry="18"/>
<text text-anchor="middle" x="8813.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Code block</text>
</g>
<!-- section_89&#45;&gt;header_105 -->
<g id="edge105" class="edge">
<title>section_89&#45;&gt;header_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8813.5,-2116.9764C8813.5,-2064.5477 8813.5,-1913.0682 8813.5,-1849.7492"/>
<polygon fill="#000000" stroke="#000000" points="8817.0001,-1849.6813 8813.5,-1839.6814 8810.0001,-1849.6814 8817.0001,-1849.6813"/>
</g>
<!-- prose_106 -->
<g id="node107" class="node">
<title>prose_106</title>
<ellipse fill="none" stroke="#000000" cx="8930.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8930.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_106 -->
<g id="edge106" class="edge">
<title>section_89&#45;&gt;prose_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8821.4011,-2117.1048C8835.7455,-2083.9728 8866.6948,-2011.2164 8889.5,-1948.6037 8901.8528,-1914.6885 8914.3328,-1875.0205 8922.2238,-1849.1155"/>
<polygon fill="#000000" stroke="#000000" points="8925.6649,-1849.8281 8925.2118,-1839.2429 8918.965,-1847.8003 8925.6649,-1849.8281"/>
</g>
<!-- prose_107 -->
<g id="node108" class="node">
<title>prose_107</title>
<ellipse fill="none" stroke="#000000" cx="9140.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9140.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_107 -->
<g id="edge107" class="edge">
<title>section_89&#45;&gt;prose_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8819.475,-2117.1564C8830.4716,-2086.366 8856.6029,-2023.2721 8897.5,-1984.6037 8924.0759,-1959.4761 8940.3002,-1967.6892 8971.5,-1948.6037 9024.9867,-1915.8849 9082.3039,-1870.227 9114.549,-1843.4443"/>
<polygon fill="#000000" stroke="#000000" points="9117.1434,-1845.8375 9122.5722,-1836.7392 9112.6545,-1840.4662 9117.1434,-1845.8375"/>
</g>
<!-- prose_108 -->
<g id="node109" class="node">
<title>prose_108</title>
<ellipse fill="none" stroke="#000000" cx="9416.5" cy="-1821.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9416.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_89&#45;&gt;prose_108 -->
<g id="edge108" class="edge">
<title>section_89&#45;&gt;prose_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8817.8315,-2117.1975C8826.6781,-2084.6891 8850.1148,-2016.6094 8897.5,-1984.6037 9002.935,-1913.3892 9060.3754,-1987.5509 9181.5,-1948.6037 9261.0778,-1923.0158 9345.0527,-1870.4334 9387.8126,-1841.5323"/>
<polygon fill="#000000" stroke="#000000" points="9390.0087,-1844.271 9396.2952,-1835.7428 9386.0625,-1838.4893 9390.0087,-1844.271"/>
</g>
<!-- codeblock_109 -->
<g id="node110" class="node">
<title>codeblock_109</title>
<ellipse fill="none" stroke="#000000" cx="9685.5" cy="-1821.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="9685.5" y="-1817.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 251&#45;359</text>
</g>
<!-- section_89&#45;&gt;codeblock_109 -->
<g id="edge109" class="edge">
<title>section_89&#45;&gt;codeblock_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8817.5776,-2117.1692C8826.0667,-2084.2973 8849.0206,-2015.2078 8897.5,-1984.6037 9002.9478,-1918.0366 9337.8831,-1983.8488 9457.5,-1948.6037 9533.5647,-1926.1912 9612.1463,-1875.0067 9654.2812,-1844.8421"/>
<polygon fill="#000000" stroke="#000000" points="9656.4097,-1847.6221 9662.4579,-1838.9232 9652.3051,-1841.9517 9656.4097,-1847.6221"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="8163.5,-872.4019 7839.5,-872.4019 7839.5,-785.8013 8163.5,-785.8013 8163.5,-872.4019"/>
<text text-anchor="middle" x="8001.5" y="-825.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">New block unless previous line is also list,</text>
<text text-anchor="middle" x="8001.5" y="-809.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">in which case append. </text>
</g>
<!-- prose_97&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>prose_97&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8264.2212,-1803.2915C8260.1489,-1776.9941 8249.5691,-1727.7275 8224.5,-1694.2032 8207.6664,-1671.692 8188.006,-1681.6486 8172.5,-1658.2032 8005.4119,-1405.5621 7996.5263,-1022.354 7999.412,-882.5422"/>
<polygon fill="#000000" stroke="#000000" points="8002.9118,-882.5887 7999.6485,-872.509 7995.9138,-882.4237 8002.9118,-882.5887"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="8289,-865.0028 8182,-865.0028 8182,-793.2004 8289,-793.2004 8289,-865.0028"/>
<text text-anchor="middle" x="8235.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">Same as list.</text>
</g>
<!-- prose_100&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>prose_100&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8485.9814,-1803.3299C8484.1762,-1775.7015 8476.5798,-1723.1325 8445.5,-1694.2032 8396.2643,-1648.3743 8341.9987,-1709.5092 8298.5,-1658.2032 8101.3245,-1425.6382 8186.6255,-1012.4476 8222.5059,-874.9949"/>
<polygon fill="#000000" stroke="#000000" points="8225.9229,-875.7638 8225.1016,-865.2008 8219.1565,-873.9705 8225.9229,-875.7638"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="8729.5,-880.3019 8307.5,-880.3019 8307.5,-777.9013 8729.5,-777.9013 8729.5,-880.3019"/>
<text text-anchor="middle" x="8518.5" y="-833.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">A tag needs to cling, so we need to check the</text>
<text text-anchor="middle" x="8518.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">number of blank lines before and after a tag line, if any.</text>
<text text-anchor="middle" x="8518.5" y="-802.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">If even, a tag line clings down.</text>
</g>
<!-- prose_103&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>prose_103&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8693.2585,-1803.3331C8673.1105,-1691.0133 8564.7248,-1086.7923 8529.5385,-890.6383"/>
<polygon fill="#000000" stroke="#000000" points="8532.9317,-889.7311 8527.721,-880.5062 8526.0417,-890.9671 8532.9317,-889.7311"/>
</g>
<!-- leaf_110 -->
<g id="node111" class="node">
<title>leaf_110</title>
<polygon fill="none" stroke="#c0c0c0" points="9113.5,-864.402 8747.5,-864.402 8747.5,-793.8013 9113.5,-793.8013 9113.5,-864.402"/>
<text text-anchor="middle" x="8930.5" y="-817.3016" font-family="Inconsolata" font-size="14.00" fill="#000000">A code block is anything between a code header and</text>
<text text-anchor="middle" x="8930.5" y="-801.9016" font-family="Inconsolata" font-size="14.00" fill="#000000">either a code footer or the end of a file. </text>
</g>
<!-- prose_106&#45;&gt;leaf_110 -->
<g id="edge110" class="edge">
<title>prose_106&#45;&gt;leaf_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8930.5,-1803.3331C8930.5,-1687.7597 8930.5,-1051.3747 8930.5,-874.6414"/>
<polygon fill="#000000" stroke="#000000" points="8934.0001,-874.6346 8930.5,-864.6346 8927.0001,-874.6347 8934.0001,-874.6346"/>
</g>
<!-- leaf_111 -->
<g id="node112" class="node">
<title>leaf_111</title>
<polygon fill="none" stroke="#c0c0c0" points="9407,-849.0037 9132,-849.0037 9132,-809.1995 9407,-809.1995 9407,-849.0037"/>
<text text-anchor="middle" x="9269.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; section : the Section to be blocked</text>
</g>
<!-- prose_107&#45;&gt;leaf_111 -->
<g id="edge111" class="edge">
<title>prose_107&#45;&gt;leaf_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9142.8492,-1803.3331C9158.3558,-1684.0518 9245.9826,-1010.0039 9265.6024,-859.0826"/>
<polygon fill="#000000" stroke="#000000" points="9269.0772,-859.503 9266.8956,-849.1352 9262.1356,-858.6005 9269.0772,-859.503"/>
</g>
<!-- leaf_112 -->
<g id="node113" class="node">
<title>leaf_112</title>
<polygon fill="none" stroke="#c0c0c0" points="9798,-849.0037 9425,-849.0037 9425,-809.1995 9798,-809.1995 9798,-849.0037"/>
<text text-anchor="middle" x="9611.5" y="-817.6016" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; returns : the same Section, filled in with blocks</text>
</g>
<!-- prose_108&#45;&gt;leaf_112 -->
<g id="edge112" class="edge">
<title>prose_108&#45;&gt;leaf_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9420.0511,-1803.3331C9443.4914,-1684.0518 9575.9504,-1010.0039 9605.6083,-859.0826"/>
<polygon fill="#000000" stroke="#000000" points="9609.0691,-859.6224 9607.5632,-849.1352 9602.2005,-858.2726 9609.0691,-859.6224"/>
</g>
<!-- leaf_113 -->
<g id="node114" class="node">
<title>leaf_113</title>
<polygon fill="none" stroke="#c0c0c0" points="10399,-1658.3048 9816,-1658.3048 9816,.1016 10399,.1016 10399,-1658.3048"/>
<text text-anchor="middle" x="10107.5" y="-1643.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.block(section)</text>
<text text-anchor="middle" x="10107.5" y="-1627.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; There is always a header at [1], though it may be nil</text>
<text text-anchor="middle" x="10107.5" y="-1612.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If there are other Nodes, they are sections and must be appended</text>
<text text-anchor="middle" x="10107.5" y="-1596.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; after the blocks.</text>
<text text-anchor="middle" x="10107.5" y="-1581.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local sub_sections = {}</text>
<text text-anchor="middle" x="10107.5" y="-1566.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #section do</text>
<text text-anchor="middle" x="10107.5" y="-1550.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;sub_sections[#sub_sections + 1] = section[i]</text>
<text text-anchor="middle" x="10107.5" y="-1535.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = nil</text>
<text text-anchor="middle" x="10107.5" y="-1519.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-1488.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Every section gets at least one block, at [2], which may be empty.</text>
<text text-anchor="middle" x="10107.5" y="-1473.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = Block(nil, section.line_first) &#45;&#45; current block</text>
<text text-anchor="middle" x="10107.5" y="-1457.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section[2] = latest</text>
<text text-anchor="middle" x="10107.5" y="-1426.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; State machine for blocking a section</text>
<text text-anchor="middle" x="10107.5" y="-1410.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-1395.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; first set of blank lines in a section belong to the first block</text>
<text text-anchor="middle" x="10107.5" y="-1380.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local lead_blanks = true</text>
<text text-anchor="middle" x="10107.5" y="-1364.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Track code blocks in own logic</text>
<text text-anchor="middle" x="10107.5" y="-1349.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local code_block = false</text>
<text text-anchor="middle" x="10107.5" y="-1333.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Tags also</text>
<text text-anchor="middle" x="10107.5" y="-1318.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-1303.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 1, #section.lines do</text>
<text text-anchor="middle" x="10107.5" y="-1287.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local inset = i + section.line_first</text>
<text text-anchor="middle" x="10107.5" y="-1272.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local l = section.lines[i]</text>
<text text-anchor="middle" x="10107.5" y="-1256.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not code_block then</text>
<text text-anchor="middle" x="10107.5" y="-1241.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if l == &quot;&quot; then </text>
<text text-anchor="middle" x="10107.5" y="-1226.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; increment back blanks for clinging subsequent lines</text>
<text text-anchor="middle" x="10107.5" y="-1210.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = back_blanks + 1</text>
<text text-anchor="middle" x="10107.5" y="-1195.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank lines attach to the preceding block</text>
<text text-anchor="middle" x="10107.5" y="-1179.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-1164.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-1149.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeHeader, level, l_trim = Codeblock.matchHead(l)</text>
<text text-anchor="middle" x="10107.5" y="-1133.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if isCodeHeader then</text>
<text text-anchor="middle" x="10107.5" y="-1118.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = true</text>
<text text-anchor="middle" x="10107.5" y="-1102.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10107.5" y="-1087.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; create a new block for the codeblock</text>
<text text-anchor="middle" x="10107.5" y="-1072.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-1056.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(nil, inset)</text>
<text text-anchor="middle" x="10107.5" y="-1041.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10107.5" y="-1025.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-1010.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-995.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; preserve existing block and add codeblock</text>
<text text-anchor="middle" x="10107.5" y="-979.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-964.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1] = Codeblock(level, l_trim, inset)</text>
<text text-anchor="middle" x="10107.5" y="-948.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-933.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif isTagline(l) then</text>
<text text-anchor="middle" x="10107.5" y="-918.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = true</text>
<text text-anchor="middle" x="10107.5" y="-902.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; apply cling rule</text>
<text text-anchor="middle" x="10107.5" y="-887.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local fwd_blanks = fwdBlanks(section.lines, i)</text>
<text text-anchor="middle" x="10107.5" y="-871.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if fwd_blanks &gt; back_blanks then</text>
<text text-anchor="middle" x="10107.5" y="-856.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-841.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-825.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10107.5" y="-810.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-794.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10107.5" y="-779.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-764.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-748.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10107.5" y="-733.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-717.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if back_blanks &gt; 0 and lead_blanks == false then</text>
<text text-anchor="middle" x="10107.5" y="-702.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if not tagging then</text>
<text text-anchor="middle" x="10107.5" y="-687.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new block</text>
<text text-anchor="middle" x="10107.5" y="-671.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest.line_last = inset &#45; 1</text>
<text text-anchor="middle" x="10107.5" y="-656.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = Block(l, inset)</text>
<text text-anchor="middle" x="10107.5" y="-640.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = latest</text>
<text text-anchor="middle" x="10107.5" y="-625.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-610.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-594.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-579.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tagging = false</text>
<text text-anchor="middle" x="10107.5" y="-563.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="10107.5" y="-548.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-533.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; continuing a block</text>
<text text-anchor="middle" x="10107.5" y="-517.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lead_blanks = false</text>
<text text-anchor="middle" x="10107.5" y="-502.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;back_blanks = 0</text>
<text text-anchor="middle" x="10107.5" y="-486.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest:addLine(l)</text>
<text text-anchor="middle" x="10107.5" y="-471.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-456.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-440.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-425.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-409.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Collecting a code block</text>
<text text-anchor="middle" x="10107.5" y="-394.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local isCodeFoot, level, l_trim = Codeblock.matchFoot(l)</text>
<text text-anchor="middle" x="10107.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (isCodeFoot and level == latest[1].level) then</text>
<text text-anchor="middle" x="10107.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;code_block = false</text>
<text text-anchor="middle" x="10107.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].footer = l_trim</text>
<text text-anchor="middle" x="10107.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = inset</text>
<text text-anchor="middle" x="10107.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="10107.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].lines[#latest[1].lines + 1] = l</text>
<text text-anchor="middle" x="10107.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Continue in normal parse mode</text>
<text text-anchor="middle" x="10107.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; This may add more lines to the code block</text>
<text text-anchor="middle" x="10107.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Auto&#45;close a code block with no footer.</text>
<text text-anchor="middle" x="10107.5" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if latest[1] and latest[1].id == &quot;codeblock&quot; and not latest[1].line_last then</text>
<text text-anchor="middle" x="10107.5" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;latest[1].line_last = #section.lines</text>
<text text-anchor="middle" x="10107.5" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Close last block</text>
<text text-anchor="middle" x="10107.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;latest.line_last = section.line_last</text>
<text text-anchor="middle" x="10107.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Append sections, if any, which follow our blocks</text>
<text text-anchor="middle" x="10107.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(sub_sections) do</text>
<text text-anchor="middle" x="10107.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[#section + 1] = v</text>
<text text-anchor="middle" x="10107.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10107.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="10107.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_109&#45;&gt;leaf_113 -->
<g id="edge113" class="edge">
<title>codeblock_109&#45;&gt;leaf_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9701.5396,-1803.5029C9726.7103,-1774.6694 9775.7783,-1715.3706 9806.5,-1658.2032 9808.0857,-1655.2525 9809.6663,-1652.2917 9811.2417,-1649.3212"/>
<polygon fill="#000000" stroke="#000000" points="9814.3873,-1650.8594 9815.9526,-1640.3808 9808.1944,-1647.5962 9814.3873,-1650.8594"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="9056,-2163.1055 8907,-2163.1055 8907,-2107.3025 9056,-2107.3025 9056,-2163.1055"/>
<text text-anchor="middle" x="8981.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Blocks a Section.</text>
</g>
<!-- prose_115&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>prose_115&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9162.2169,-2348.67C9154.6923,-2339.9803 9144.7525,-2329.5556 9134.5,-2321.8043 9106.9085,-2300.9439 9090.2974,-2309.9193 9065.5,-2285.8043 9032.3894,-2253.6048 9008.6802,-2205.5224 8995.0657,-2172.3934"/>
<polygon fill="#000000" stroke="#000000" points="8998.2922,-2171.0353 8991.3297,-2163.0494 8991.7925,-2173.6341 8998.2922,-2171.0353"/>
</g>
<!-- leaf_120 -->
<g id="node121" class="node">
<title>leaf_120</title>
<polygon fill="none" stroke="#c0c0c0" points="9440.5,-2162.5044 9074.5,-2162.5044 9074.5,-2107.9036 9440.5,-2107.9036 9440.5,-2162.5044"/>
<text text-anchor="middle" x="9257.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000">This is a moderately complex state machine, which</text>
<text text-anchor="middle" x="9257.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000">works on a line&#45;by&#45;line basis with some lookahead.</text>
</g>
<!-- prose_116&#45;&gt;leaf_120 -->
<g id="edge120" class="edge">
<title>prose_116&#45;&gt;leaf_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9257.5,-2347.1566C9257.5,-2309.686 9257.5,-2222.7794 9257.5,-2172.6606"/>
<polygon fill="#000000" stroke="#000000" points="9261.0001,-2172.5552 9257.5,-2162.5552 9254.0001,-2172.5552 9261.0001,-2172.5552"/>
</g>
<!-- leaf_121 -->
<g id="node122" class="node">
<title>leaf_121</title>
<polygon fill="none" stroke="#c0c0c0" points="9922.5,-2193.7042 9458.5,-2193.7042 9458.5,-2076.7038 9922.5,-2076.7038 9922.5,-2193.7042"/>
<text text-anchor="middle" x="9690.5" y="-2162.5041" font-family="Inconsolata" font-size="14.00" fill="#000000">First off, we have a Header at [1], and may have one or </text>
<text text-anchor="middle" x="9690.5" y="-2147.104" font-family="Inconsolata" font-size="14.00" fill="#000000">more Sections The blocks go between the Header and the remaining</text>
<text text-anchor="middle" x="9690.5" y="-2131.704" font-family="Inconsolata" font-size="14.00" fill="#000000">Sections, so we have to lift them and append after blocking.</text>
<text text-anchor="middle" x="9690.5" y="-2116.304" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="9690.5" y="-2100.9039" font-family="Inconsolata" font-size="14.00" fill="#000000">Next, we parse the lines, thus:</text>
</g>
<!-- prose_117&#45;&gt;leaf_121 -->
<g id="edge121" class="edge">
<title>prose_117&#45;&gt;leaf_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9528.3682,-2348.2918C9551.4725,-2317.9261 9601.1492,-2252.6366 9639.4648,-2202.2789"/>
<polygon fill="#000000" stroke="#000000" points="9642.4819,-2204.0937 9645.7517,-2194.0161 9636.9111,-2199.855 9642.4819,-2204.0937"/>
</g>
<!-- header_122 -->
<g id="node123" class="node">
<title>header_122</title>
<ellipse fill="none" stroke="#000000" cx="10002.5" cy="-2135.204" rx="61.9429" ry="18"/>
<text text-anchor="middle" x="10002.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Prose line</text>
</g>
<!-- section_118&#45;&gt;header_122 -->
<g id="edge122" class="edge">
<title>section_118&#45;&gt;header_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10002.5,-2347.1566C10002.5,-2307.283 10002.5,-2211.4294 10002.5,-2163.4948"/>
<polygon fill="#000000" stroke="#000000" points="10006.0001,-2163.4861 10002.5,-2153.4862 9999.0001,-2163.4862 10006.0001,-2163.4861"/>
</g>
<!-- prose_123 -->
<g id="node124" class="node">
<title>prose_123</title>
<ellipse fill="none" stroke="#000000" cx="10114.5" cy="-2135.204" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="10114.5" y="-2131.004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_118&#45;&gt;prose_123 -->
<g id="edge123" class="edge">
<title>section_118&#45;&gt;prose_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10022.7711,-2347.5734C10038.7454,-2332.6326 10060.4341,-2309.8523 10073.5,-2285.8043 10094.9085,-2246.4014 10105.7717,-2195.0083 10110.777,-2163.5927"/>
<polygon fill="#000000" stroke="#000000" points="10114.2888,-2163.7747 10112.3109,-2153.3662 10107.3662,-2162.7364 10114.2888,-2163.7747"/>
</g>
<!-- leaf_124 -->
<g id="node125" class="node">
<title>leaf_124</title>
<polygon fill="none" stroke="#c0c0c0" points="10308,-1864.7038 9921,-1864.7038 9921,-1778.1032 10308,-1778.1032 10308,-1864.7038"/>
<text text-anchor="middle" x="10114.5" y="-1817.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">If preceded by at least one blank line,</text>
<text text-anchor="middle" x="10114.5" y="-1802.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">make a new block, otherwise append to existing block.</text>
</g>
<!-- prose_123&#45;&gt;leaf_124 -->
<g id="edge124" class="edge">
<title>prose_123&#45;&gt;leaf_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10114.5,-2116.9764C10114.5,-2070.6598 10114.5,-1947.0409 10114.5,-1875.1922"/>
<polygon fill="#000000" stroke="#000000" points="10118.0001,-1874.9826 10114.5,-1864.9826 10111.0001,-1874.9826 10118.0001,-1874.9826"/>
</g>
<!-- leaf_128 -->
<g id="node129" class="node">
<title>leaf_128</title>
<polygon fill="none" stroke="#c0c0c0" points="10698.5,-2170.5043 10164.5,-2170.5043 10164.5,-2099.9037 10698.5,-2099.9037 10698.5,-2170.5043"/>
<text text-anchor="middle" x="10431.5" y="-2123.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is a kludgy thing we&#39;re going to do to remove &#39;blocks&#39; once they&#39;ve</text>
<text text-anchor="middle" x="10431.5" y="-2108.004" font-family="Inconsolata" font-size="14.00" fill="#000000">become either codeblocks or prose.</text>
</g>
<!-- prose_126&#45;&gt;leaf_128 -->
<g id="edge128" class="edge">
<title>prose_126&#45;&gt;leaf_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10431.5,-2347.1566C10431.5,-2311.6882 10431.5,-2231.9256 10431.5,-2180.9965"/>
<polygon fill="#000000" stroke="#000000" points="10435.0001,-2180.9049 10431.5,-2170.9049 10428.0001,-2180.905 10435.0001,-2180.9049"/>
</g>
<!-- leaf_129 -->
<g id="node130" class="node">
<title>leaf_129</title>
<polygon fill="none" stroke="#c0c0c0" points="11062,-2216.2043 10717,-2216.2043 10717,-2054.2037 11062,-2054.2037 11062,-2216.2043"/>
<text text-anchor="middle" x="10889.5" y="-2201.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">function S.weed(section)</text>
<text text-anchor="middle" x="10889.5" y="-2185.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i, v in ipairs(section) do</text>
<text text-anchor="middle" x="10889.5" y="-2170.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if v.id == &quot;block&quot; then</text>
<text text-anchor="middle" x="10889.5" y="-2154.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if v[1] and v[1].id == &quot;codeblock&quot; </text>
<text text-anchor="middle" x="10889.5" y="-2139.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or v[1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="10889.5" y="-2124.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;section[i] = v[1] &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</text>
<text text-anchor="middle" x="10889.5" y="-2108.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2093.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2077.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="10889.5" y="-2062.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_127&#45;&gt;leaf_129 -->
<g id="edge129" class="edge">
<title>codeblock_127&#45;&gt;leaf_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10742.0549,-2347.1566C10760.3986,-2320.7874 10795.7736,-2269.9359 10827.2755,-2224.6518"/>
<polygon fill="#000000" stroke="#000000" points="10830.2701,-2226.476 10833.1076,-2216.2682 10824.5237,-2222.4786 10830.2701,-2226.476"/>
</g>
<!-- leaf_135 -->
<g id="node136" class="node">
<title>leaf_135</title>
<polygon fill="none" stroke="#c0c0c0" points="11516.5,-2163.1055 11080.5,-2163.1055 11080.5,-2107.3025 11516.5,-2107.3025 11516.5,-2163.1055"/>
<text text-anchor="middle" x="11298.5" y="-2115.704" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Creates a new section, given a header and the line number.</text>
</g>
<!-- prose_131&#45;&gt;leaf_135 -->
<g id="edge135" class="edge">
<title>prose_131&#45;&gt;leaf_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11686.1854,-2348.1907C11678.8088,-2339.138 11668.7016,-2328.5195 11657.5,-2321.8043 11605.3445,-2290.5379 11580.8744,-2310.9331 11525.5,-2285.8043 11456.3142,-2254.4079 11384.5702,-2203.111 11340.7232,-2169.2532"/>
<polygon fill="#000000" stroke="#000000" points="11342.6431,-2166.3124 11332.6013,-2162.9342 11338.3447,-2171.8373 11342.6431,-2166.3124"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="12026.5,-2177.805 11534.5,-2177.805 11534.5,-2092.6029 12026.5,-2092.6029 12026.5,-2177.805"/>
<text text-anchor="middle" x="11780.5" y="-2146.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; header : &#160;Header for the section, which may be of type Header or </text>
<text text-anchor="middle" x="11780.5" y="-2131.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;a number. &#160;A number means the header is virtual.</text>
<text text-anchor="middle" x="11780.5" y="-2116.004" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; linum &#160;: &#160;The line number of the header, which is the first of the</text>
<text text-anchor="middle" x="11780.5" y="-2100.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Section.</text>
</g>
<!-- prose_132&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>prose_132&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11780.5,-2347.1566C11780.5,-2313.2734 11780.5,-2238.9667 11780.5,-2187.9912"/>
<polygon fill="#000000" stroke="#000000" points="11784.0001,-2187.8086 11780.5,-2177.8087 11777.0001,-2187.8087 11784.0001,-2187.8086"/>
</g>
<!-- leaf_137 -->
<g id="node138" class="node">
<title>leaf_137</title>
<polygon fill="none" stroke="#c0c0c0" points="12256.5,-2155.1061 12044.5,-2155.1061 12044.5,-2115.3019 12256.5,-2115.3019 12256.5,-2155.1061"/>
<text text-anchor="middle" x="12150.5" y="-2123.704" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; return : &#160;The new Section.</text>
</g>
<!-- prose_133&#45;&gt;leaf_137 -->
<g id="edge137" class="edge">
<title>prose_133&#45;&gt;leaf_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12017.3234,-2347.9169C12041.9639,-2308.5605 12102.4429,-2211.9619 12132.682,-2163.6634"/>
<polygon fill="#000000" stroke="#000000" points="12135.794,-2165.2883 12138.1341,-2154.9551 12129.8609,-2161.5737 12135.794,-2165.2883"/>
</g>
<!-- leaf_138 -->
<g id="node139" class="node">
<title>leaf_138</title>
<polygon fill="none" stroke="#c0c0c0" points="12584.5,-2285.9046 12274.5,-2285.9046 12274.5,-1984.5034 12584.5,-1984.5034 12584.5,-2285.9046"/>
<text text-anchor="middle" x="12429.5" y="-2270.6043" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(section, header, linum)</text>
<text text-anchor="middle" x="12429.5" y="-2255.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local section = setmetatable({}, S)</text>
<text text-anchor="middle" x="12429.5" y="-2239.8042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if type(header) == &quot;number&quot; then</text>
<text text-anchor="middle" x="12429.5" y="-2224.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; We have a virtual header</text>
<text text-anchor="middle" x="12429.5" y="-2209.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = Header(&quot;&quot;, header)</text>
<text text-anchor="middle" x="12429.5" y="-2193.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = nil</text>
<text text-anchor="middle" x="12429.5" y="-2178.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header</text>
<text text-anchor="middle" x="12429.5" y="-2162.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="12429.5" y="-2147.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section[1] = header</text>
<text text-anchor="middle" x="12429.5" y="-2132.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.header = header</text>
<text text-anchor="middle" x="12429.5" y="-2116.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;section.level = header.level</text>
<text text-anchor="middle" x="12429.5" y="-2101.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12429.5" y="-2085.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.line_first = linum</text>
<text text-anchor="middle" x="12429.5" y="-2070.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.lines = {}</text>
<text text-anchor="middle" x="12429.5" y="-2055.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;section.id = &quot;section&quot;</text>
<text text-anchor="middle" x="12429.5" y="-2039.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return section</text>
<text text-anchor="middle" x="12429.5" y="-2024.2038" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="12429.5" y="-1992.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(s, new)</text>
</g>
<!-- codeblock_134&#45;&gt;leaf_138 -->
<g id="edge138" class="edge">
<title>codeblock_134&#45;&gt;leaf_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12364.0713,-2347.1566C12367.9834,-2334.4834 12373.6412,-2316.1552 12380.0149,-2295.5079"/>
<polygon fill="#000000" stroke="#000000" points="12383.3847,-2296.4576 12382.9901,-2285.8701 12376.6961,-2294.3928 12383.3847,-2296.4576"/>
</g>
</g>
</svg>