<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="6915pt" height="879pt"
 viewBox="0.00 0.00 6914.50 878.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 874.6009)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-874.6009 6910.5,-874.6009 6910.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1134.5" cy="-852.6009" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1134.5" y="-848.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 128</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1134.5" cy="-780.6009" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1134.5" y="-776.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;20</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1134.5,-834.4323C1134.5,-826.7319 1134.5,-817.5753 1134.5,-809.0175"/>
<polygon fill="#000000" stroke="#000000" points="1138.0001,-809.0141 1134.5,-799.0142 1131.0001,-809.0142 1138.0001,-809.0141"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="946.5" cy="-708.6009" rx="76.9193" ry="18"/>
<text text-anchor="middle" x="946.5" y="-704.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Prose module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1096.9072,-766.2037C1067.9688,-755.1209 1027.7121,-739.7034 996.1284,-727.6075"/>
<polygon fill="#000000" stroke="#000000" points="997.2175,-724.2768 986.6271,-723.9687 994.7139,-730.8138 997.2175,-724.2768"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="1073.5" cy="-708.6009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1073.5" y="-704.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1119.4213,-762.8031C1111.8139,-753.8239 1102.4694,-742.7943 1094.2003,-733.034"/>
<polygon fill="#000000" stroke="#000000" points="1096.7035,-730.5741 1087.5688,-725.2067 1091.3626,-735.0991 1096.7035,-730.5741"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="1196.5" cy="-708.6009" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1196.5" y="-704.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 5&#45;18</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1149.8258,-762.8031C1157.2779,-754.1492 1166.3698,-743.5909 1174.5427,-734.0998"/>
<polygon fill="#000000" stroke="#000000" points="1177.2625,-736.305 1181.1356,-726.4435 1171.9581,-731.7373 1177.2625,-736.305"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1774.5" cy="-708.6009" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1774.5" y="-704.4009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 21&#45;85</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1191.2957,-774.2114C1308.204,-761.0592 1575.4949,-730.989 1703.5516,-716.5826"/>
<polygon fill="#000000" stroke="#000000" points="1704.0973,-720.0434 1713.6433,-715.4473 1703.3147,-713.0873 1704.0973,-720.0434"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="1051.5,-576.6029 657.5,-576.6029 657.5,-536.7987 1051.5,-536.7987 1051.5,-576.6029"/>
<text text-anchor="middle" x="854.5" y="-545.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Here we need a proper recursive parser. &#160;Eventually.</text>
</g>
<!-- prose_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1052.897,-694.3105C1015.9086,-668.6551 937.784,-614.4672 891.3696,-582.2739"/>
<polygon fill="#000000" stroke="#000000" points="893.3009,-579.3539 883.0892,-576.5305 889.3113,-585.1057 893.3009,-579.3539"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="1323.5,-654.5011 1069.5,-654.5011 1069.5,-458.9005 1323.5,-458.9005 1323.5,-654.5011"/>
<text text-anchor="middle" x="1196.5" y="-639.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1196.5" y="-608.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;util&quot;</text>
<text text-anchor="middle" x="1196.5" y="-592.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = require &quot;peg/epnf&quot;</text>
<text text-anchor="middle" x="1196.5" y="-577.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="1196.5" y="-545.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1196.5" y="-514.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="1196.5" y="-467.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local Pr, pr = u.inherit(Node)</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>codeblock_4&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1196.5,-690.5795C1196.5,-683.3887 1196.5,-674.4923 1196.5,-664.7296"/>
<polygon fill="#000000" stroke="#000000" points="1200.0001,-664.7091 1196.5,-654.7092 1193.0001,-664.7092 1200.0001,-664.7091"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="1430.5" cy="-556.7008" rx="88.5398" ry="18"/>
<text text-anchor="middle" x="1430.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Bookend parsing</text>
</g>
<!-- section_5&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_5&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1710.4083,-704.4577C1658.6251,-698.8501 1585.2761,-685.6537 1528.5,-654.6009 1496.1331,-636.8983 1467.3672,-605.2581 1449.5088,-582.7404"/>
<polygon fill="#000000" stroke="#000000" points="1452.1016,-580.3719 1443.2137,-574.6051 1446.5654,-584.6558 1452.1016,-580.3719"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1569.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1569.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_5&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1714.4258,-701.2976C1680.3165,-694.3565 1638.8952,-680.8498 1610.5,-654.6009 1590.6156,-636.2195 1580.0497,-606.6815 1574.6563,-584.8525"/>
<polygon fill="#000000" stroke="#000000" points="1578.0133,-583.8276 1572.4059,-574.8383 1571.1837,-585.3624 1578.0133,-583.8276"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="1651.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1651.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1741.5331,-692.8595C1725.0233,-683.6204 1705.7777,-670.6061 1692.5,-654.6009 1675.4906,-634.0974 1664.6167,-605.5286 1658.3733,-584.5434"/>
<polygon fill="#000000" stroke="#000000" points="1661.6648,-583.3178 1655.5981,-574.6319 1654.9241,-585.2053 1661.6648,-583.3178"/>
</g>
<!-- prose_11 -->
<g id="node12" class="node">
<title>prose_11</title>
<ellipse fill="none" stroke="#000000" cx="1733.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1733.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;prose_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1769.6358,-690.5795C1762.5464,-664.3141 1749.3147,-615.2922 1740.9806,-584.4154"/>
<polygon fill="#000000" stroke="#000000" points="1744.3429,-583.4412 1738.3579,-574.6988 1737.5848,-585.2654 1744.3429,-583.4412"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1815.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1815.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1779.3642,-690.5795C1786.4536,-664.3141 1799.6853,-615.2922 1808.0194,-584.4154"/>
<polygon fill="#000000" stroke="#000000" points="1811.4152,-585.2654 1810.6421,-574.6988 1804.6571,-583.4412 1811.4152,-585.2654"/>
</g>
<!-- prose_13 -->
<g id="node14" class="node">
<title>prose_13</title>
<ellipse fill="none" stroke="#000000" cx="2019.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2019.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;prose_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1801.1857,-692.0558C1847.0913,-663.5943 1940.7229,-605.5427 1989.0824,-575.5597"/>
<polygon fill="#000000" stroke="#000000" points="1991.1888,-578.3719 1997.8435,-570.1278 1987.5002,-572.4226 1991.1888,-578.3719"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="2467.5" cy="-556.7008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2467.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1830.0252,-698.9563C1887.7689,-688.73 1980.7095,-671.7191 2060.5,-654.6009 2195.9548,-625.5406 2355.3527,-585.4757 2427.9303,-566.908"/>
<polygon fill="#000000" stroke="#000000" points="2429.1774,-570.2016 2437.9953,-564.3284 2427.4394,-563.4207 2429.1774,-570.2016"/>
</g>
<!-- section_15 -->
<g id="node16" class="node">
<title>section_15</title>
<ellipse fill="none" stroke="#000000" cx="3373.5" cy="-556.7008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3373.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 46&#45;85</text>
</g>
<!-- section_5&#45;&gt;section_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;section_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1838.8801,-704.7172C1966.6713,-696.8198 2261.3713,-677.6674 2508.5,-654.6009 2804.6072,-626.9628 3156.579,-583.97 3303.5814,-565.5574"/>
<polygon fill="#000000" stroke="#000000" points="3304.3211,-568.9921 3313.8078,-564.2747 3303.4499,-562.0466 3304.3211,-568.9921"/>
</g>
<!-- section_16 -->
<g id="node17" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="5547.5" cy="-556.7008" rx="70.655" ry="18"/>
<text text-anchor="middle" x="5547.5" y="-552.5008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 86&#45;128</text>
</g>
<!-- section_5&#45;&gt;section_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;section_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1839.922,-706.8285C2064.1536,-700.6816 2822.3643,-679.3005 3448.5,-654.6009 4236.2194,-623.5272 5189.7101,-575.1551 5467.8196,-560.8302"/>
<polygon fill="#000000" stroke="#000000" points="5468.4045,-564.3048 5478.211,-560.2946 5468.0441,-557.3141 5468.4045,-564.3048"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="527,-415.3011 0,-415.3011 0,-360.7002 527,-360.7002 527,-415.3011"/>
<text text-anchor="middle" x="263.5" y="-384.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We need to generate parsers to match sequences of single characters, so</text>
<text text-anchor="middle" x="263.5" y="-368.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">that *bold*, **bold**, ***bold*** etc all work correctly.</text>
</g>
<!-- prose_9&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_9&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1567.6909,-538.6169C1564.3326,-515.7145 1554.8674,-477.0429 1528.5,-458.8007 1483.1485,-427.4243 591.4642,-427.292 536.5,-422.8007 515.2325,-421.0629 493.077,-418.8723 470.9904,-416.4398"/>
<polygon fill="#000000" stroke="#000000" points="471.1778,-412.939 460.8508,-415.3059 470.3998,-419.8956 471.1778,-412.939"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1079.5,-415.2011 545.5,-415.2011 545.5,-360.8002 1079.5,-360.8002 1079.5,-415.2011"/>
<text text-anchor="middle" x="812.5" y="-399.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">Bookends are a fun construct borrowed from the [[LPEG manual][httk://]]]]</text>
<text text-anchor="middle" x="812.5" y="-384.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">model for Lua long strings. &#160;The GGG/Pegylator form of a bookend construct</text>
<text text-anchor="middle" x="812.5" y="-369.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">is </text>
</g>
<!-- prose_10&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>prose_10&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1649.5382,-538.3544C1646.0294,-515.5461 1636.4169,-477.3627 1610.5,-458.8007 1563.2345,-424.9485 1146.3637,-428.4394 1088.5,-422.8007 1068.6718,-420.8685 1048.0675,-418.6554 1027.4521,-416.3022"/>
<polygon fill="#000000" stroke="#000000" points="1027.6693,-412.8041 1017.3343,-415.1363 1026.8679,-419.7581 1027.6693,-412.8041"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1401,-415.2011 1098,-415.2011 1098,-360.8002 1401,-360.8002 1401,-415.2011"/>
<text text-anchor="middle" x="1249.5" y="-399.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">~#!peg</text>
<text text-anchor="middle" x="1249.5" y="-384.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;bookend = &quot;`&quot;:a !&quot;`&quot;:a pattern &#160;&quot;`&quot;:a</text>
<text text-anchor="middle" x="1249.5" y="-369.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">~#/peg</text>
</g>
<!-- prose_11&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>prose_11&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1731.3646,-538.5894C1727.6726,-516.0293 1717.8667,-478.1079 1692.5,-458.8007 1642.2295,-420.5386 1472.7654,-433.4841 1410.5,-422.8007 1400.4613,-421.0783 1390.0995,-419.1615 1379.6987,-417.1378"/>
<polygon fill="#000000" stroke="#000000" points="1380.213,-413.6718 1369.7243,-415.1676 1378.8565,-420.5391 1380.213,-413.6718"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1967.5,-415.2011 1419.5,-415.2011 1419.5,-360.8002 1967.5,-360.8002 1967.5,-415.2011"/>
<text text-anchor="middle" x="1693.5" y="-399.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">The =lpeg= engine doesn&#39;t model this directly but it&#39;s possible to provide</text>
<text text-anchor="middle" x="1693.5" y="-384.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">it. &#160;We only need the subset of this where =a= is unique, that is, =pattern=</text>
<text text-anchor="middle" x="1693.5" y="-369.1006" font-family="Inconsolata" font-size="14.00" fill="#000000">does not contain =bookend= at any level of expansion. </text>
</g>
<!-- prose_12&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>prose_12&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1810.7134,-538.8516C1804.602,-518.2281 1792.6015,-483.914 1774.5,-458.8007 1764.7324,-445.2496 1751.9032,-432.5254 1739.3438,-421.7045"/>
<polygon fill="#000000" stroke="#000000" points="1741.5059,-418.95 1731.5884,-415.2224 1737.0167,-424.3211 1741.5059,-418.95"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2541,-422.6019 1986,-422.6019 1986,-353.3994 2541,-353.3994 2541,-422.6019"/>
<text text-anchor="middle" x="2263.5" y="-407.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">GGG being a specification format needn&#39;t respect this limitation. &#160;Orb</text>
<text text-anchor="middle" x="2263.5" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">does so by design. &#160;It is a simple consquence of the sort of markup we are</text>
<text text-anchor="middle" x="2263.5" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">using; there is no need to parse ***bold **inside bold** still bold*** twice,</text>
<text text-anchor="middle" x="2263.5" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">and this generalizes to all text styles. </text>
</g>
<!-- prose_13&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prose_13&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2039.8836,-542.6077C2075.7614,-517.802 2151.4388,-465.4791 2204.7878,-428.5939"/>
<polygon fill="#000000" stroke="#000000" points="2206.9138,-431.3791 2213.1488,-422.8131 2202.9329,-425.6213 2206.9138,-431.3791"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="3107.5,-407.3012 2559.5,-407.3012 2559.5,-368.7 3107.5,-368.7 3107.5,-407.3012"/>
<text text-anchor="middle" x="2833.5" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">We do have to wire them up so that we don&#39;t cross the streams. &#160;Sans macros.</text>
<text text-anchor="middle" x="2833.5" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">By hand. </text>
</g>
<!-- prose_14&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>prose_14&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2492.3689,-545.238C2551.6609,-517.9086 2702.3271,-448.4621 2782.1148,-411.6856"/>
<polygon fill="#000000" stroke="#000000" points="2783.8661,-414.7323 2791.4827,-407.3676 2780.9359,-408.3751 2783.8661,-414.7323"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="3192.5" cy="-388.0006" rx="67.2722" ry="18"/>
<text text-anchor="middle" x="3192.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Lpeg locals</text>
</g>
<!-- section_15&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_15&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3354.8116,-539.2823C3322.3466,-509.0235 3255.4716,-446.693 3218.4993,-412.2331"/>
<polygon fill="#000000" stroke="#000000" points="3220.7884,-409.5822 3211.0868,-405.3243 3216.0157,-414.7029 3220.7884,-409.5822"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="3309.5" cy="-388.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3309.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_15&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_15&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3366.6509,-538.6469C3355.41,-509.0168 3332.9838,-449.9024 3319.8136,-415.1867"/>
<polygon fill="#000000" stroke="#000000" points="3323.0232,-413.7795 3316.2037,-405.6712 3316.4784,-416.2624 3323.0232,-413.7795"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="3437.5" cy="-388.0006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3437.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;54</text>
</g>
<!-- section_15&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_15&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3380.3491,-538.6469C3391.5313,-509.1715 3413.7823,-450.519 3426.9793,-415.7326"/>
<polygon fill="#000000" stroke="#000000" points="3430.3287,-416.771 3430.6034,-406.1797 3423.7839,-414.288 3430.3287,-416.771"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="3610.5" cy="-388.0006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3610.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 56&#45;77</text>
</g>
<!-- section_15&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>section_15&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3397.5291,-539.5965C3440.3808,-509.0941 3530.003,-445.2996 3578.1941,-410.9964"/>
<polygon fill="#000000" stroke="#000000" points="3580.2901,-413.8006 3586.4073,-405.1502 3576.2308,-408.0978 3580.2901,-413.8006"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="3896.5" cy="-388.0006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3896.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 79&#45;83</text>
</g>
<!-- section_15&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>section_15&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3416.2993,-542.8954C3510.5976,-512.4783 3736.2017,-439.7068 3841.1103,-405.8673"/>
<polygon fill="#000000" stroke="#000000" points="3842.4348,-409.1177 3850.8775,-402.7167 3840.2858,-402.4557 3842.4348,-409.1177"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="5305.5" cy="-388.0006" rx="69.1756" ry="18"/>
<text text-anchor="middle" x="5305.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Link or Raw</text>
</g>
<!-- section_16&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_16&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5522.964,-539.5965C5479.0949,-509.015 5387.2207,-444.9688 5338.1059,-410.7304"/>
<polygon fill="#000000" stroke="#000000" points="5339.9462,-407.7469 5329.7412,-404.8993 5335.9431,-413.4893 5339.9462,-407.7469"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="5424.5" cy="-388.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5424.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>section_16&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5534.5693,-538.9658C5512.6211,-508.8628 5468.0139,-447.6819 5442.8458,-413.1627"/>
<polygon fill="#000000" stroke="#000000" points="5445.6111,-411.0145 5436.8915,-404.9962 5439.9549,-415.1385 5445.6111,-411.0145"/>
</g>
<!-- prose_34 -->
<g id="node35" class="node">
<title>prose_34</title>
<ellipse fill="none" stroke="#000000" cx="5506.5" cy="-388.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5506.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_34 -->
<g id="edge34" class="edge">
<title>section_16&#45;&gt;prose_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5543.1123,-538.6469C5535.9608,-509.221 5521.742,-450.7158 5513.2824,-415.9079"/>
<polygon fill="#000000" stroke="#000000" points="5516.6188,-414.8152 5510.8562,-405.9247 5509.8168,-416.4684 5516.6188,-414.8152"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="5588.5" cy="-388.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5588.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>section_16&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5551.8877,-538.6469C5559.0392,-509.221 5573.258,-450.7158 5581.7176,-415.9079"/>
<polygon fill="#000000" stroke="#000000" points="5585.1832,-416.4684 5584.1438,-405.9247 5578.3812,-414.8152 5585.1832,-416.4684"/>
</g>
<!-- prose_36 -->
<g id="node37" class="node">
<title>prose_36</title>
<ellipse fill="none" stroke="#000000" cx="5905.5" cy="-388.0006" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5905.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_16&#45;&gt;prose_36 -->
<g id="edge36" class="edge">
<title>section_16&#45;&gt;prose_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5581.1798,-540.8299C5649.3389,-508.7113 5802.946,-436.3271 5871.4299,-404.0555"/>
<polygon fill="#000000" stroke="#000000" points="5872.9566,-407.2052 5880.5106,-399.7764 5869.9727,-400.8731 5872.9566,-407.2052"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="6299.5" cy="-388.0006" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="6299.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 101&#45;112</text>
</g>
<!-- section_16&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>section_16&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5600.6788,-544.7709C5733.9355,-514.8767 6082.065,-436.779 6230.6612,-403.4436"/>
<polygon fill="#000000" stroke="#000000" points="6231.5917,-406.8219 6240.583,-401.2178 6230.0594,-399.9917 6231.5917,-406.8219"/>
</g>
<!-- codeblock_38 -->
<g id="node39" class="node">
<title>codeblock_38</title>
<ellipse fill="none" stroke="#000000" cx="6781.5" cy="-388.0006" rx="85.9862" ry="18"/>
<text text-anchor="middle" x="6781.5" y="-383.8006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 114&#45;116</text>
</g>
<!-- section_16&#45;&gt;codeblock_38 -->
<g id="edge38" class="edge">
<title>section_16&#45;&gt;codeblock_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5609.9647,-548.1612C5815.0194,-520.1282 6467.6602,-430.9057 6699.1212,-399.2626"/>
<polygon fill="#000000" stroke="#000000" points="6699.7282,-402.7123 6709.1619,-397.89 6698.78,-395.7768 6699.7282,-402.7123"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3168.5,-176.6003 3114.5,-176.6003 3114.5,-140.6003 3168.5,-140.6003 3168.5,-176.6003"/>
</g>
<!-- prose_24&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_24&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3293.2983,-372.1089C3286.1158,-365.651 3277.3074,-358.483 3268.5,-353.2006 3231.2001,-330.8293 3205.8063,-350.2234 3177.5,-317.2006 3145.9959,-280.4471 3140.5426,-221.7882 3140.3771,-187.0486"/>
<polygon fill="#000000" stroke="#000000" points="3143.8807,-186.7032 3140.4828,-176.668 3136.881,-186.6318 3143.8807,-186.7032"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3322,-201.1004 3187,-201.1004 3187,-116.1001 3322,-116.1001 3322,-201.1004"/>
<text text-anchor="middle" x="3254.5" y="-185.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cg = L.Cg</text>
<text text-anchor="middle" x="3254.5" y="-170.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local C = L.C</text>
<text text-anchor="middle" x="3254.5" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">local P = L.P</text>
<text text-anchor="middle" x="3254.5" y="-139.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cmt = L.Cmt</text>
<text text-anchor="middle" x="3254.5" y="-124.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cb = L.Cb</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3403.6225,-371.783C3380.6332,-359.4146 3350.8356,-340.5481 3330.5,-317.2006 3303.4869,-286.1866 3283.8595,-243.8991 3271.3243,-210.7888"/>
<polygon fill="#000000" stroke="#000000" points="3274.5596,-209.4458 3267.8192,-201.2716 3267.9909,-211.865 3274.5596,-209.4458"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3881,-317.3009 3340,-317.3009 3340,.1003 3881,.1003 3881,-317.3009"/>
<text text-anchor="middle" x="3610.5" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function equal_strings(s, i, a, b)</text>
<text text-anchor="middle" x="3610.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns true if a and b are equal.</text>
<text text-anchor="middle" x="3610.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; s and i are not used, provided because expected by Cb.</text>
<text text-anchor="middle" x="3610.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return a == b</text>
<text text-anchor="middle" x="3610.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3610.5" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function bookends(sigil)</text>
<text text-anchor="middle" x="3610.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns a pair of patterns, _open and _close,</text>
<text text-anchor="middle" x="3610.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; which will match a brace of sigil.</text>
<text text-anchor="middle" x="3610.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; sigil must be a string. </text>
<text text-anchor="middle" x="3610.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _open = Cg(C(P(sigil)^1), sigil .. &quot;_init&quot;)</text>
<text text-anchor="middle" x="3610.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _close = &#160;Cmt(C(P(sigil)^1) * Cb(sigil .. &quot;_init&quot;), equal_strings)</text>
<text text-anchor="middle" x="3610.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return _open, _close</text>
<text text-anchor="middle" x="3610.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3610.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local bold_open, bold_close &#160;&#160;&#160;&#160;= &#160;bookends(&quot;*&quot;)</text>
<text text-anchor="middle" x="3610.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">local italic_open, italic_close = &#160;bookends(&quot;/&quot;)</text>
<text text-anchor="middle" x="3610.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local under_open, under_close &#160;&#160;= &#160;bookends(&quot;_&quot;)</text>
<text text-anchor="middle" x="3610.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local strike_open, strike_close = &#160;bookends(&quot;&#45;&quot;)</text>
<text text-anchor="middle" x="3610.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">local lit_open, lit_close &#160;&#160;&#160;&#160;&#160;&#160;= &#160;bookends(&quot;=&quot;)</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_26&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3610.5,-370C3610.5,-359.2281 3610.5,-344.36 3610.5,-327.4549"/>
<polygon fill="#000000" stroke="#000000" points="3614.0001,-327.2815 3610.5,-317.2816 3607.0001,-327.2816 3614.0001,-327.2815"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="4118,-185.8007 3899,-185.8007 3899,-131.3998 4118,-131.3998 4118,-185.8007"/>
<text text-anchor="middle" x="4008.5" y="-170.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">function Pr.toMarkdown(prose)</text>
<text text-anchor="middle" x="4008.5" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;return prose.val</text>
<text text-anchor="middle" x="4008.5" y="-139.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_27&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3905.2885,-370C3923.6495,-332.3926 3966.3868,-244.8573 3990.7177,-195.0223"/>
<polygon fill="#000000" stroke="#000000" points="3993.939,-196.4019 3995.1812,-185.8802 3987.6486,-193.3308 3993.939,-196.4019"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="4691,-185.9007 4136,-185.9007 4136,-131.2999 4691,-131.2999 4691,-185.9007"/>
<text text-anchor="middle" x="4413.5" y="-154.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The prose parser will be a proper recursive grammar. &#160;This calls for some</text>
<text text-anchor="middle" x="4413.5" y="-139.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">enhancements to epnf to allow assignment of Node metatables to matched spans.</text>
</g>
<!-- prose_33&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>prose_33&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5410.1559,-371.7491C5402.9266,-364.72 5393.5648,-357.1998 5383.5,-353.2006 5242.2537,-297.0758 4846.6216,-359.0214 4700.5,-317.2006 4608.0263,-290.7341 4512.6,-230.1165 4458.4005,-191.9564"/>
<polygon fill="#000000" stroke="#000000" points="4460.2419,-188.9713 4450.0626,-186.0335 4456.1881,-194.6781 4460.2419,-188.9713"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="5285.5,-177.9009 4709.5,-177.9009 4709.5,-139.2997 5285.5,-139.2997 5285.5,-177.9009"/>
<text text-anchor="middle" x="4997.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ve been sloppy with the node constructor interface and will need to go through</text>
<text text-anchor="middle" x="4997.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">the whole =grym= directory and fix it into a consistent state. &#160;At some point.</text>
</g>
<!-- prose_34&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>prose_34&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5491.0894,-371.7228C5483.9114,-365.0381 5474.89,-357.8019 5465.5,-353.2006 5395.7576,-319.0246 5367.4842,-343.7583 5294.5,-317.2006 5196.4169,-281.5097 5090.6677,-218.4478 5035.6644,-183.5611"/>
<polygon fill="#000000" stroke="#000000" points="5037.2728,-180.4356 5026.9602,-178.0062 5033.507,-186.3363 5037.2728,-180.4356"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="5873,-193.2015 5304,-193.2015 5304,-123.999 5873,-123.999 5873,-193.2015"/>
<text text-anchor="middle" x="5588.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">Links give me a chance to design that interface to fit grammatically. For now,</text>
<text text-anchor="middle" x="5588.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">we&#39;re going to handroll another Link class, and write a simple either&#45;or parser</text>
<text text-anchor="middle" x="5588.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">over prose strings that finds links and puts the rest in a =raw= class, which</text>
<text text-anchor="middle" x="5588.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">shouldn&#39;t need an intermediate Node class. </text>
</g>
<!-- prose_35&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_35&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5588.5,-370C5588.5,-334.4265 5588.5,-254.1793 5588.5,-203.4247"/>
<polygon fill="#000000" stroke="#000000" points="5592.0001,-203.3789 5588.5,-193.3789 5585.0001,-203.379 5592.0001,-203.3789"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="6390,-176.6003 5891,-176.6003 5891,-140.6003 6390,-140.6003 6390,-176.6003"/>
<text text-anchor="middle" x="6140.5" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">This Link class needs to fit the constructor semantics of =epeg.Csp=.</text>
</g>
<!-- prose_36&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>prose_36&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5921.6525,-372.233C5961.7142,-333.1259 6065.9199,-231.4033 6114.66,-183.8246"/>
<polygon fill="#000000" stroke="#000000" points="6117.2769,-186.1611 6121.9879,-176.6712 6112.3872,-181.152 6117.2769,-186.1611"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="6704.5,-239.7011 6408.5,-239.7011 6408.5,-77.4995 6704.5,-77.4995 6704.5,-239.7011"/>
<text text-anchor="middle" x="6556.5" y="-208.7004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Prose, block)</text>
<text text-anchor="middle" x="6556.5" y="-193.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prose = setmetatable({},Pr)</text>
<text text-anchor="middle" x="6556.5" y="-177.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;prose.id = &quot;prose&quot;</text>
<text text-anchor="middle" x="6556.5" y="-162.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;prose.val = &quot;&quot;</text>
<text text-anchor="middle" x="6556.5" y="-147.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,l in ipairs(block.lines) do</text>
<text text-anchor="middle" x="6556.5" y="-131.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;prose.val = prose.val .. l .. &quot;\n&quot;</text>
<text text-anchor="middle" x="6556.5" y="-116.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6556.5" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return prose</text>
<text text-anchor="middle" x="6556.5" y="-85.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6326.0249,-370.7976C6346.4871,-357.1135 6375.1462,-337.0338 6398.5,-317.2006 6423.8709,-295.6543 6449.9492,-270.7746 6473.4222,-247.203"/>
<polygon fill="#000000" stroke="#000000" points="6476.0702,-249.5031 6480.6196,-239.9348 6471.0962,-244.5776 6476.0702,-249.5031"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="6906.5,-176.6003 6722.5,-176.6003 6722.5,-140.6003 6906.5,-140.6003 6906.5,-176.6003"/>
<text text-anchor="middle" x="6814.5" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(pr, new)</text>
</g>
<!-- codeblock_38&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_38&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6784.0895,-370C6789.8104,-330.2304 6803.5633,-234.6268 6810.4409,-186.8173"/>
<polygon fill="#000000" stroke="#000000" points="6813.9173,-187.2312 6811.8769,-176.8347 6806.9886,-186.2345 6813.9173,-187.2312"/>
</g>
</g>
</svg>