<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="6074pt" height="1218pt"
 viewBox="0.00 0.00 6074.00 1217.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1213.6014)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1213.6014 6070,-1213.6014 6070,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="696" cy="-1191.6014" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="696" y="-1187.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 150</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="696" cy="-1119.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="696" y="-1115.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;120</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M696,-1173.4327C696,-1165.7323 696,-1156.5757 696,-1148.018"/>
<polygon fill="#000000" stroke="#000000" points="699.5001,-1148.0146 696,-1138.0146 692.5001,-1148.0147 699.5001,-1148.0146"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="375" cy="-1047.6014" rx="76.9193" ry="18"/>
<text text-anchor="middle" x="375" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Prose module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M645.1366,-1108.1928C589.7907,-1095.7787 501.1272,-1075.8916 440.5848,-1062.312"/>
<polygon fill="#000000" stroke="#000000" points="441.2692,-1058.8786 430.7456,-1060.1051 439.7371,-1065.7089 441.2692,-1058.8786"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="516" cy="-1047.6014" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="516" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;4</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M658.7039,-1104.6829C629.3416,-1092.938 588.4236,-1076.5708 557.9279,-1064.3725"/>
<polygon fill="#000000" stroke="#000000" points="559.0055,-1061.034 548.4208,-1060.5697 556.4057,-1067.5333 559.0055,-1061.034"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="631" cy="-1047.6014" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="631" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 5&#45;25</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M679.9326,-1101.8036C671.9232,-1092.9317 662.1069,-1082.0582 653.3742,-1072.3851"/>
<polygon fill="#000000" stroke="#000000" points="655.9573,-1070.0233 646.6583,-1064.946 650.7614,-1074.714 655.9573,-1070.0233"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="761" cy="-1047.6014" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="761" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 26&#45;120</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M712.0674,-1101.8036C719.9388,-1093.0846 729.5553,-1082.4325 738.1733,-1072.8863"/>
<polygon fill="#000000" stroke="#000000" points="741.0143,-1074.9625 745.1174,-1065.1944 735.8184,-1070.2717 741.0143,-1074.9625"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="2264" cy="-1047.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2264" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 30&#45;94</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M760.8839,-1116.622C1012.2364,-1105.0803 1921.1198,-1063.3459 2189.1239,-1051.0396"/>
<polygon fill="#000000" stroke="#000000" points="2189.3128,-1054.5347 2199.1417,-1050.5796 2188.9916,-1047.542 2189.3128,-1054.5347"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="5433" cy="-1047.6014" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5433" y="-1043.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 121&#45;150</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M761.6095,-1118.6041C1283.3563,-1110.6739 4755.9775,-1057.8918 5347.4283,-1048.902"/>
<polygon fill="#000000" stroke="#000000" points="5347.6391,-1052.3993 5357.5847,-1048.7476 5347.5326,-1045.4001 5347.6391,-1052.3993"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="422,-993.8034 28,-993.8034 28,-953.9993 422,-953.9993 422,-993.8034"/>
<text text-anchor="middle" x="225" y="-962.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Here we need a proper recursive parser. &#160;Eventually.</text>
</g>
<!-- block_3&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>block_3&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M481.2214,-1035.728C474.5406,-1033.5868 467.577,-1031.4502 461,-1029.6014 417.1962,-1017.288 368.3119,-1005.4432 326.4456,-995.8663"/>
<polygon fill="#000000" stroke="#000000" points="327.0453,-992.4134 316.518,-993.6076 325.4923,-999.2389 327.0453,-992.4134"/>
</g>
<!-- codeblock_9 -->
<g id="node10" class="node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="513" cy="-973.9014" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="513" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 5&#45;24</text>
</g>
<!-- block_4&#45;&gt;codeblock_9 -->
<g id="edge9" class="edge">
<title>block_4&#45;&gt;codeblock_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M605.686,-1031.7909C589.0419,-1021.3953 567.019,-1007.6403 548.6168,-996.1468"/>
<polygon fill="#000000" stroke="#000000" points="550.249,-993.0396 539.9133,-990.7108 546.5408,-998.9768 550.249,-993.0396"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="658,-991.9014 604,-991.9014 604,-955.9014 658,-955.9014 658,-991.9014"/>
</g>
<!-- block_4&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_4&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M631,-1029.3834C631,-1021.1725 631,-1011.2868 631,-1002.1486"/>
<polygon fill="#000000" stroke="#000000" points="634.5001,-1001.9097 631,-991.9098 627.5001,-1001.9098 634.5001,-1001.9097"/>
</g>
<!-- codeblock_12 -->
<g id="node13" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="753" cy="-973.9014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="753" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 26&#45;28</text>
</g>
<!-- block_5&#45;&gt;codeblock_12 -->
<g id="edge12" class="edge">
<title>block_5&#45;&gt;codeblock_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M759.0225,-1029.3834C758.1312,-1021.1725 757.0581,-1011.2868 756.0662,-1002.1486"/>
<polygon fill="#000000" stroke="#000000" points="759.5136,-1001.4737 754.9548,-991.9098 752.5544,-1002.2291 759.5136,-1001.4737"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="902,-991.9014 848,-991.9014 848,-955.9014 902,-955.9014 902,-991.9014"/>
</g>
<!-- block_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M786.5838,-1031.0617C802.1246,-1021.0147 822.1964,-1008.0384 839.2868,-996.9896"/>
<polygon fill="#000000" stroke="#000000" points="841.4148,-999.7817 847.9125,-991.4132 837.6143,-993.9032 841.4148,-999.7817"/>
</g>
<!-- header_15 -->
<g id="node16" class="node">
<title>header_15</title>
<ellipse fill="none" stroke="#000000" cx="1711" cy="-973.9014" rx="88.5398" ry="18"/>
<text text-anchor="middle" x="1711" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Bookend parsing</text>
</g>
<!-- section_6&#45;&gt;header_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;header_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2201.5922,-1041.7957C2113.7155,-1033.2571 1948.6287,-1015.8843 1809,-993.6014 1800.3463,-992.2204 1791.2935,-990.6177 1782.3358,-988.9345"/>
<polygon fill="#000000" stroke="#000000" points="1782.7693,-985.4539 1772.289,-987.0074 1781.4507,-992.3286 1782.7693,-985.4539"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="1874" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1874" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 30&#45;34</text>
</g>
<!-- section_6&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2204.2375,-1040.0392C2138.6909,-1031.1968 2030.6231,-1015.0025 1939,-993.6014 1933.7611,-992.3777 1928.3249,-990.9644 1922.9283,-989.4681"/>
<polygon fill="#000000" stroke="#000000" points="1923.8855,-986.1016 1913.3081,-986.7078 1921.9549,-992.8301 1923.8855,-986.1016"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="2004" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2004" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;38</text>
</g>
<!-- section_6&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2217.0228,-1034.9336C2177.4694,-1024.1859 2119.4392,-1008.2265 2069,-993.6014 2064.1691,-992.2006 2059.1435,-990.7197 2054.1221,-989.2243"/>
<polygon fill="#000000" stroke="#000000" points="2055.1071,-985.8658 2044.5232,-986.3478 2053.0976,-992.5711 2055.1071,-985.8658"/>
</g>
<!-- block_18 -->
<g id="node19" class="node">
<title>block_18</title>
<ellipse fill="none" stroke="#000000" cx="2134" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2134" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 39&#45;42</text>
</g>
<!-- section_6&#45;&gt;block_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;block_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2235.1488,-1031.245C2216.122,-1020.4582 2191.0359,-1006.2363 2170.607,-994.6547"/>
<polygon fill="#000000" stroke="#000000" points="2172.3037,-991.5933 2161.8783,-989.7062 2168.8514,-997.6828 2172.3037,-991.5933"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="2264" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2264" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 43&#45;46</text>
</g>
<!-- section_6&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2264,-1029.3834C2264,-1021.1725 2264,-1011.2868 2264,-1002.1486"/>
<polygon fill="#000000" stroke="#000000" points="2267.5001,-1001.9097 2264,-991.9098 2260.5001,-1001.9098 2267.5001,-1001.9097"/>
</g>
<!-- block_20 -->
<g id="node21" class="node">
<title>block_20</title>
<ellipse fill="none" stroke="#000000" cx="2614" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2614" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;51</text>
</g>
<!-- section_6&#45;&gt;block_20 -->
<g id="edge20" class="edge">
<title>section_6&#45;&gt;block_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2316.3985,-1036.5677C2381.0634,-1022.9512 2490.611,-999.8836 2557.2266,-985.8562"/>
<polygon fill="#000000" stroke="#000000" points="2558.0702,-989.2554 2567.1344,-983.7699 2556.6278,-982.4056 2558.0702,-989.2554"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="3019" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3019" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 52&#45;55</text>
</g>
<!-- section_6&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_6&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2326.1056,-1041.5389C2467.3702,-1027.7492 2811.5657,-994.1502 2954.8063,-980.1677"/>
<polygon fill="#000000" stroke="#000000" points="2955.5636,-983.6105 2965.1763,-979.1554 2954.8835,-976.6436 2955.5636,-983.6105"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="3663" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3663" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 56&#45;79</text>
</g>
<!-- section_6&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_6&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2328.6709,-1044.1945C2562.4506,-1031.8788 3362.2694,-989.744 3597.4546,-977.3543"/>
<polygon fill="#000000" stroke="#000000" points="3597.7635,-980.843 3607.5655,-976.8217 3597.3952,-973.8527 3597.7635,-980.843"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="3907" cy="-973.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3907" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 80&#45;94</text>
</g>
<!-- section_6&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_6&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2329.7564,-1046.8796C2536.0771,-1044.2497 3188.9775,-1033.151 3728,-993.6014 3766.8535,-990.7506 3810.2933,-986.0075 3844.649,-981.8898"/>
<polygon fill="#000000" stroke="#000000" points="3845.4981,-985.3126 3855.0043,-980.6347 3844.6558,-978.3634 3845.4981,-985.3126"/>
</g>
<!-- section_24 -->
<g id="node25" class="node">
<title>section_24</title>
<ellipse fill="none" stroke="#000000" cx="4545" cy="-973.9014" rx="70.655" ry="18"/>
<text text-anchor="middle" x="4545" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 95&#45;120</text>
</g>
<!-- section_6&#45;&gt;section_24 -->
<g id="edge24" class="edge">
<title>section_6&#45;&gt;section_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2329.5513,-1045.5941C2556.8011,-1038.6215 3331.8992,-1014.7235 3972,-993.6014 4147.8204,-987.7996 4353.9729,-980.6195 4464.7814,-976.7292"/>
<polygon fill="#000000" stroke="#000000" points="4465.0057,-980.2236 4474.8766,-976.3746 4464.7599,-973.2279 4465.0057,-980.2236"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="5281" cy="-973.9014" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="5281" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor</text>
</g>
<!-- section_7&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_7&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5399.643,-1031.4276C5377.1154,-1020.5047 5347.1973,-1005.9983 5323.041,-994.2857"/>
<polygon fill="#000000" stroke="#000000" points="5324.2817,-990.9976 5313.7566,-989.784 5321.2277,-997.2963 5324.2817,-990.9976"/>
</g>
<!-- block_47 -->
<g id="node48" class="node">
<title>block_47</title>
<ellipse fill="none" stroke="#000000" cx="5433" cy="-973.9014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5433" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 121&#45;124</text>
</g>
<!-- section_7&#45;&gt;block_47 -->
<g id="edge47" class="edge">
<title>section_7&#45;&gt;block_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5433,-1029.3834C5433,-1021.1725 5433,-1011.2868 5433,-1002.1486"/>
<polygon fill="#000000" stroke="#000000" points="5436.5001,-1001.9097 5433,-991.9098 5429.5001,-1001.9098 5436.5001,-1001.9097"/>
</g>
<!-- block_48 -->
<g id="node49" class="node">
<title>block_48</title>
<ellipse fill="none" stroke="#000000" cx="5643" cy="-973.9014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5643" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 125&#45;135</text>
</g>
<!-- section_7&#45;&gt;block_48 -->
<g id="edge48" class="edge">
<title>section_7&#45;&gt;block_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5475.4966,-1032.6871C5509.3474,-1020.8071 5556.825,-1004.1447 5592.5934,-991.5917"/>
<polygon fill="#000000" stroke="#000000" points="5594.0737,-994.7815 5602.3504,-988.1674 5591.7556,-988.1765 5594.0737,-994.7815"/>
</g>
<!-- block_49 -->
<g id="node50" class="node">
<title>block_49</title>
<ellipse fill="none" stroke="#000000" cx="5907" cy="-973.9014" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5907" y="-969.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 136&#45;150</text>
</g>
<!-- section_7&#45;&gt;block_49 -->
<g id="edge49" class="edge">
<title>section_7&#45;&gt;block_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5496.4339,-1037.7383C5585.9138,-1023.8255 5748.4625,-998.5516 5839.8936,-984.3354"/>
<polygon fill="#000000" stroke="#000000" points="5840.5252,-987.7793 5849.8687,-982.7844 5839.4497,-980.8625 5840.5252,-987.7793"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="282,-918.3016 0,-918.3016 0,-629.9007 282,-629.9007 282,-918.3016"/>
<text text-anchor="middle" x="141" y="-903.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="141" y="-871.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;util&quot;</text>
<text text-anchor="middle" x="141" y="-856.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require (&quot;status&quot;)()</text>
<text text-anchor="middle" x="141" y="-840.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = require &quot;peg/epnf&quot;</text>
<text text-anchor="middle" x="141" y="-825.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="141" y="-810.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Csp = epeg.Csp</text>
<text text-anchor="middle" x="141" y="-794.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="141" y="-763.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="141" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="141" y="-716.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(type(Link) == &#39;function&#39;)</text>
<text text-anchor="middle" x="141" y="-701.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local Grammar = require &quot;node/grammar&quot;</text>
<text text-anchor="middle" x="141" y="-653.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local Pr, pr = u.inherit(Node)</text>
<text text-anchor="middle" x="141" y="-638.201" font-family="Inconsolata" font-size="14.00" fill="#000000">Pr.id = &quot;prose&quot;</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>codeblock_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M461.2549,-961.2658C396.8547,-945.4899 294.797,-920.3033 291,-918.2013 290.9062,-918.1494 290.8124,-918.0974 290.7187,-918.0454"/>
<polygon fill="#000000" stroke="#000000" points="292.4508,-915.0039 282.0473,-912.9993 288.9301,-921.0541 292.4508,-915.0039"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="442,-792.1011 300,-792.1011 300,-756.1011 442,-756.1011 442,-792.1011"/>
<text text-anchor="middle" x="371" y="-770.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = false &#160;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M698.512,-960.9009C688.0756,-958.5581 677.218,-956.2213 667,-954.2013 571.5235,-935.3272 530.5159,-974.3193 451,-918.2013 411.1298,-890.0632 388.8773,-835.4636 378.4637,-802.1467"/>
<polygon fill="#000000" stroke="#000000" points="381.6934,-800.7277 375.4913,-792.1379 374.9831,-802.7205 381.6934,-800.7277"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="987.5,-801.4016 460.5,-801.4016 460.5,-746.8007 987.5,-746.8007 987.5,-801.4016"/>
<text text-anchor="middle" x="724" y="-770.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We need to generate parsers to match sequences of single characters, so</text>
<text text-anchor="middle" x="724" y="-754.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">that *bold*, **bold**, ***bold*** etc all work correctly.</text>
</g>
<!-- block_16&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_16&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1835.8863,-960.6186C1827.1509,-958.0609 1817.8335,-955.7112 1809,-954.2013 1630.9604,-923.7694 1171.3172,-965.5058 997,-918.2013 911.7486,-895.0667 823.1062,-841.9876 770.7792,-807.1133"/>
<polygon fill="#000000" stroke="#000000" points="772.6355,-804.1438 762.3845,-801.4665 768.7285,-809.9521 772.6355,-804.1438"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1540,-801.3016 1006,-801.3016 1006,-746.9007 1540,-746.9007 1540,-801.3016"/>
<text text-anchor="middle" x="1273" y="-786.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">Bookends are a fun construct borrowed from the [[LPEG manual][httk://]]]]</text>
<text text-anchor="middle" x="1273" y="-770.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">model for Lua long strings. &#160;The GGG/Pegylator form of a bookend construct</text>
<text text-anchor="middle" x="1273" y="-755.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">is </text>
</g>
<!-- block_17&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_17&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1965.4841,-960.8292C1956.852,-958.2928 1947.6792,-955.899 1939,-954.2013 1768.1671,-920.7863 1715.9695,-967.4113 1549,-918.2013 1464.0308,-893.1588 1374.7461,-841.1279 1321.4901,-806.9236"/>
<polygon fill="#000000" stroke="#000000" points="1323.2338,-803.8829 1312.9377,-801.3845 1319.4285,-809.7583 1323.2338,-803.8829"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1861.5,-801.3016 1558.5,-801.3016 1558.5,-746.9007 1861.5,-746.9007 1861.5,-801.3016"/>
<text text-anchor="middle" x="1710" y="-786.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">~#!peg</text>
<text text-anchor="middle" x="1710" y="-770.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;bookend = &quot;`&quot;:a !&quot;`&quot;:a pattern &#160;&quot;`&quot;:a</text>
<text text-anchor="middle" x="1710" y="-755.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">~#/peg</text>
</g>
<!-- block_18&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_18&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2094.3224,-961.0898C2086.0046,-958.6258 2077.2525,-956.1952 2069,-954.2013 1982.0589,-933.1956 1951.3445,-957.5047 1871,-918.2013 1817.344,-891.9536 1768.1469,-842.6068 1738.621,-809.0518"/>
<polygon fill="#000000" stroke="#000000" points="1741.1016,-806.57 1731.9069,-801.3061 1735.8122,-811.1549 1741.1016,-806.57"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2428,-801.3016 1880,-801.3016 1880,-746.9007 2428,-746.9007 2428,-801.3016"/>
<text text-anchor="middle" x="2154" y="-786.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">The =lpeg= engine doesn&#39;t model this directly but it&#39;s possible to provide</text>
<text text-anchor="middle" x="2154" y="-770.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">it. &#160;We only need the subset of this where =a= is unique, that is, =pattern=</text>
<text text-anchor="middle" x="2154" y="-755.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">does not contain =bookend= at any level of expansion. </text>
</g>
<!-- block_19&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_19&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2254.2382,-956.1704C2236.2604,-923.5161 2197.5921,-853.2803 2173.8847,-810.219"/>
<polygon fill="#000000" stroke="#000000" points="2176.8108,-808.2767 2168.9218,-801.2046 2170.6787,-811.6528 2176.8108,-808.2767"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3001.5,-808.7024 2446.5,-808.7024 2446.5,-739.4999 3001.5,-739.4999 3001.5,-808.7024"/>
<text text-anchor="middle" x="2724" y="-793.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">GGG being a specification format needn&#39;t respect this limitation. &#160;Orb</text>
<text text-anchor="middle" x="2724" y="-778.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">does so by design. &#160;It is a simple consquence of the sort of markup we are</text>
<text text-anchor="middle" x="2724" y="-762.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">using; there is no need to parse ***bold **inside bold** still bold*** twice,</text>
<text text-anchor="middle" x="2724" y="-747.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">and this generalizes to all text styles. </text>
</g>
<!-- block_20&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_20&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2623.7618,-956.1704C2640.6974,-925.4092 2675.9939,-861.2978 2699.8481,-817.9698"/>
<polygon fill="#000000" stroke="#000000" points="2702.997,-819.5072 2704.7539,-809.059 2696.865,-816.1311 2702.997,-819.5072"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3568,-801.4016 3020,-801.4016 3020,-746.8007 3568,-746.8007 3568,-801.4016"/>
<text text-anchor="middle" x="3294" y="-786.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">We do have to wire them up so that we don&#39;t cross the streams. &#160;Sans macros.</text>
<text text-anchor="middle" x="3294" y="-770.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">By hand. </text>
</g>
<!-- block_21&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_21&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3041.9733,-957.2102C3087.2207,-924.3358 3188.6338,-850.6546 3248.1046,-807.4463"/>
<polygon fill="#000000" stroke="#000000" points="3250.1747,-810.2686 3256.2076,-801.5591 3246.0601,-804.6054 3250.1747,-810.2686"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="3663" cy="-774.1011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3663" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 56&#45;78</text>
</g>
<!-- block_22&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_22&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3663,-955.818C3663,-920.9129 3663,-844.025 3663,-802.3262"/>
<polygon fill="#000000" stroke="#000000" points="3666.5001,-802.2875 3663,-792.2876 3659.5001,-802.2876 3666.5001,-802.2875"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3812,-792.1011 3758,-792.1011 3758,-756.1011 3812,-756.1011 3812,-792.1011"/>
</g>
<!-- block_22&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_22&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3696.9266,-959.5066C3714.932,-950.2158 3735.969,-936.4376 3749,-918.2013 3773.8098,-883.4813 3781.5874,-833.433 3783.9857,-802.3829"/>
<polygon fill="#000000" stroke="#000000" points="3787.4884,-802.4503 3784.6288,-792.2487 3780.5024,-802.0069 3787.4884,-802.4503"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="3907" cy="-774.1011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3907" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 80&#45;92</text>
</g>
<!-- block_23&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>block_23&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3907,-955.818C3907,-920.9129 3907,-844.025 3907,-802.3262"/>
<polygon fill="#000000" stroke="#000000" points="3910.5001,-802.2875 3907,-792.2876 3903.5001,-802.2876 3910.5001,-802.2875"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4056,-792.1011 4002,-792.1011 4002,-756.1011 4056,-756.1011 4056,-792.1011"/>
</g>
<!-- block_23&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_23&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3940.9266,-959.5066C3958.932,-950.2158 3979.969,-936.4376 3993,-918.2013 4017.8098,-883.4813 4025.5874,-833.433 4027.9857,-802.3829"/>
<polygon fill="#000000" stroke="#000000" points="4031.4884,-802.4503 4028.6288,-792.2487 4024.5024,-802.0069 4031.4884,-802.4503"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="4389" cy="-774.1011" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="4389" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : prose grammar</text>
</g>
<!-- section_24&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_24&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4521.8296,-956.8448C4508.6895,-946.5177 4492.4395,-932.5927 4480,-918.2013 4447.8747,-881.0354 4419.1425,-831.4653 4402.9149,-801.2138"/>
<polygon fill="#000000" stroke="#000000" points="4405.8685,-799.3122 4398.0972,-792.1109 4399.6816,-802.5867 4405.8685,-799.3122"/>
</g>
<!-- block_38 -->
<g id="node39" class="node">
<title>block_38</title>
<ellipse fill="none" stroke="#000000" cx="4545" cy="-774.1011" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="4545" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 95&#45;99</text>
</g>
<!-- section_24&#45;&gt;block_38 -->
<g id="edge38" class="edge">
<title>section_24&#45;&gt;block_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545,-955.818C4545,-920.9129 4545,-844.025 4545,-802.3262"/>
<polygon fill="#000000" stroke="#000000" points="4548.5001,-802.2875 4545,-792.2876 4541.5001,-802.2876 4548.5001,-802.2875"/>
</g>
<!-- block_39 -->
<g id="node40" class="node">
<title>block_39</title>
<ellipse fill="none" stroke="#000000" cx="4800" cy="-774.1011" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4800" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 100&#45;101</text>
</g>
<!-- section_24&#45;&gt;block_39 -->
<g id="edge39" class="edge">
<title>section_24&#45;&gt;block_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4567.1835,-956.5199C4612.9814,-920.6358 4718.0344,-838.3236 4769.901,-797.6846"/>
<polygon fill="#000000" stroke="#000000" points="4772.3365,-800.2228 4778.0494,-791.3001 4768.0192,-794.7127 4772.3365,-800.2228"/>
</g>
<!-- block_40 -->
<g id="node41" class="node">
<title>block_40</title>
<ellipse fill="none" stroke="#000000" cx="5123" cy="-774.1011" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5123" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 102&#45;120</text>
</g>
<!-- section_24&#45;&gt;block_40 -->
<g id="edge40" class="edge">
<title>section_24&#45;&gt;block_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4613.4887,-969.5231C4681.5251,-963.5262 4787.9808,-949.6497 4875,-918.2013 4958.8127,-887.9118 5046.6435,-829.5476 5091.9135,-797.1649"/>
<polygon fill="#000000" stroke="#000000" points="5094.0614,-799.9312 5100.1235,-791.242 5089.9659,-794.2542 5094.0614,-799.9312"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3667.5,-593.8015 3126.5,-593.8015 3126.5,-261.5998 3667.5,-261.5998 3667.5,-593.8015"/>
<text text-anchor="middle" x="3397" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function equal_strings(s, i, a, b)</text>
<text text-anchor="middle" x="3397" y="-563.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns true if a and b are equal.</text>
<text text-anchor="middle" x="3397" y="-548.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; s and i are not used, provided because expected by Cb.</text>
<text text-anchor="middle" x="3397" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return a == b</text>
<text text-anchor="middle" x="3397" y="-517.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3397" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function bookends(sigil)</text>
<text text-anchor="middle" x="3397" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local Cg, C, P, Cmt, Cb = L.Cg, L.C, L.P, L.Cmt, L.Cb</text>
<text text-anchor="middle" x="3397" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns a pair of patterns, _open and _close,</text>
<text text-anchor="middle" x="3397" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; which will match a brace of sigil.</text>
<text text-anchor="middle" x="3397" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; sigil must be a string. </text>
<text text-anchor="middle" x="3397" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _open = Cg(C(P(sigil)^1), sigil .. &quot;_init&quot;)</text>
<text text-anchor="middle" x="3397" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _close = &#160;Cmt(C(P(sigil)^1) * Cb(sigil .. &quot;_init&quot;), equal_strings)</text>
<text text-anchor="middle" x="3397" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return _open, _close</text>
<text text-anchor="middle" x="3397" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3397" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local bold_open, bold_close &#160;&#160;&#160;&#160;= &#160;bookends(&quot;*&quot;)</text>
<text text-anchor="middle" x="3397" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local italic_open, italic_close = &#160;bookends(&quot;/&quot;)</text>
<text text-anchor="middle" x="3397" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local under_open, under_close &#160;&#160;= &#160;bookends(&quot;_&quot;)</text>
<text text-anchor="middle" x="3397" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local strike_open, strike_close = &#160;bookends(&quot;&#45;&quot;)</text>
<text text-anchor="middle" x="3397" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local lit_open, lit_close &#160;&#160;&#160;&#160;&#160;&#160;= &#160;bookends(&quot;=&quot;)</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3653.6988,-756.1207C3638.9237,-728.1589 3608.5223,-672.9993 3577,-630.0009 3570.1597,-620.6704 3562.9712,-611.2643 3555.5646,-601.8834"/>
<polygon fill="#000000" stroke="#000000" points="3558.2626,-599.653 3549.2946,-594.0116 3552.7872,-604.0142 3558.2626,-599.653"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="4010,-516.6014 3686,-516.6014 3686,-338.7998 4010,-338.7998 4010,-516.6014"/>
<text text-anchor="middle" x="3848" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">function Pr.toMarkdown(prose)</text>
<text text-anchor="middle" x="3848" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="3848" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _, node in ipairs(prose) do</text>
<text text-anchor="middle" x="3848" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="3848" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="3848" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif node.id == &quot;raw&quot; then</text>
<text text-anchor="middle" x="3848" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase &#160;.. node:toValue()</text>
<text text-anchor="middle" x="3848" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3848" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="3848" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="3848" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3903.911,-755.9649C3896.7486,-713.9129 3878.5752,-607.2134 3864.877,-526.7888"/>
<polygon fill="#000000" stroke="#000000" points="3868.2746,-525.8912 3863.1452,-516.6209 3861.374,-527.0666 3868.2746,-525.8912"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="4576,-455.0011 4028,-455.0011 4028,-400.4002 4576,-400.4002 4576,-455.0011"/>
<text text-anchor="middle" x="4302" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Prose module is the first one to use our shiny&#45;new Node module. &#160;Which</text>
<text text-anchor="middle" x="4302" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">finally works the way I intend it to and I&#39;m pretty happy about this. </text>
</g>
<!-- block_38&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>block_38&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4538.797,-755.9287C4528.7362,-727.7099 4507.2151,-672.2121 4480,-630.0009 4438.5294,-565.6793 4377.3716,-500.9523 4338.6236,-462.605"/>
<polygon fill="#000000" stroke="#000000" points="4340.771,-459.8081 4331.1853,-455.2953 4335.8646,-464.8008 4340.771,-459.8081"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="5121.5,-445.7006 4594.5,-445.7006 4594.5,-409.7006 5121.5,-409.7006 5121.5,-445.7006"/>
<text text-anchor="middle" x="4858" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s pure link&#45;or&#45;raw, but it has everything it needs to be so much more.</text>
</g>
<!-- block_39&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>block_39&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4803.0367,-755.9649C4812.5282,-699.2773 4841.6898,-525.1122 4853.2285,-456.1978"/>
<polygon fill="#000000" stroke="#000000" points="4856.7239,-456.516 4854.9234,-446.0753 4849.82,-455.36 4856.7239,-456.516"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="5226" cy="-427.7006" rx="86.7905" ry="18"/>
<text text-anchor="middle" x="5226" y="-423.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 102&#45;118</text>
</g>
<!-- block_40&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>block_40&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5128.3927,-755.9649C5145.2831,-699.1607 5197.2485,-524.395 5217.6526,-455.7738"/>
<polygon fill="#000000" stroke="#000000" points="5221.0411,-456.6581 5220.5364,-446.0753 5214.3314,-454.663 5221.0411,-456.6581"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="5385,-445.7006 5331,-445.7006 5331,-409.7006 5385,-409.7006 5385,-445.7006"/>
</g>
<!-- block_40&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_40&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5127.3849,-756.1164C5135.7692,-725.5739 5156.9971,-663.6174 5198,-630.0009 5242.3785,-593.6171 5282.853,-635.9622 5322,-594.0009 5357.2143,-556.255 5361.1276,-492.5508 5360.0644,-455.9158"/>
<polygon fill="#000000" stroke="#000000" points="5363.5605,-455.7476 5359.6295,-445.9091 5356.5671,-456.0517 5363.5605,-455.7476"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="5419.5,-225.6009 5032.5,-225.6009 5032.5,.2005 5419.5,.2005 5419.5,-225.6009"/>
<text text-anchor="middle" x="5226" y="-210.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function prose_gm(_ENV)</text>
<text text-anchor="middle" x="5226" y="-194.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;START &quot;prose&quot;</text>
<text text-anchor="middle" x="5226" y="-179.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;prose = (V&quot;link&quot; + V&quot;raw&quot;)^1</text>
<text text-anchor="middle" x="5226" y="-164.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;link = m.link</text>
<text text-anchor="middle" x="5226" y="-148.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;raw = (P(1) &#45; m.link)^1</text>
<text text-anchor="middle" x="5226" y="-133.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5226" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function proseBuild(prose, str)</text>
<text text-anchor="middle" x="5226" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return setmetatable(prose, {__index = Pr })</text>
<text text-anchor="middle" x="5226" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5226" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local parse = Grammar(prose_gm, { prose = proseBuild,</text>
<text text-anchor="middle" x="5226" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;link &#160;= Link }) &#160;</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5226,-409.4033C5226,-375.7442 5226,-301.4156 5226,-235.5783"/>
<polygon fill="#000000" stroke="#000000" points="5229.5001,-235.5128 5226,-225.5129 5222.5001,-235.5129 5229.5001,-235.5128"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="5537.5,-794.0032 5206.5,-794.0032 5206.5,-754.1991 5537.5,-754.1991 5537.5,-794.0032"/>
<text text-anchor="middle" x="5372" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo smuggle in that offset in =parse=</text>
</g>
<!-- block_47&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>block_47&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5427.4791,-955.818C5416.9397,-921.2971 5393.8634,-845.7127 5381.0416,-803.716"/>
<polygon fill="#000000" stroke="#000000" points="5384.3594,-802.5968 5378.0919,-794.0547 5377.6645,-804.6409 5384.3594,-802.5968"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="5643" cy="-774.1011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5643" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 125&#45;134</text>
</g>
<!-- block_48&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>block_48&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5643,-955.818C5643,-920.9129 5643,-844.025 5643,-802.3262"/>
<polygon fill="#000000" stroke="#000000" points="5646.5001,-802.2875 5643,-792.2876 5639.5001,-802.2876 5646.5001,-802.2875"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="5802,-792.1011 5748,-792.1011 5748,-756.1011 5802,-756.1011 5802,-792.1011"/>
</g>
<!-- block_48&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>block_48&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5682.7568,-959.5361C5702.4031,-950.5182 5724.8682,-936.9875 5739,-918.2013 5764.6529,-884.0995 5772.1835,-833.8701 5774.3019,-802.6147"/>
<polygon fill="#000000" stroke="#000000" points="5777.8086,-802.5804 5774.8463,-792.4082 5770.8185,-802.2075 5777.8086,-802.5804"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="5907" cy="-774.1011" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5907" y="-769.9011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 136&#45;138</text>
</g>
<!-- block_49&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>block_49&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5907,-955.818C5907,-920.9129 5907,-844.025 5907,-802.3262"/>
<polygon fill="#000000" stroke="#000000" points="5910.5001,-802.2875 5907,-792.2876 5903.5001,-802.2876 5910.5001,-802.2875"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="6066,-866.1011 6012,-866.1011 6012,-682.1011 6066,-682.1011 6066,-866.1011"/>
</g>
<!-- block_49&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>block_49&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5946.7568,-959.5361C5966.4031,-950.5182 5988.8682,-936.9875 6003,-918.2013 6012.3462,-905.7769 6019.2869,-891.2117 6024.4367,-876.2033"/>
<polygon fill="#000000" stroke="#000000" points="6027.892,-876.8846 6027.5696,-866.2947 6021.2177,-874.7743 6027.892,-876.8846"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="5780.5,-493.401 5505.5,-493.401 5505.5,-362.0002 5780.5,-362.0002 5780.5,-493.401"/>
<text text-anchor="middle" x="5643" y="-478.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Prose, block)</text>
<text text-anchor="middle" x="5643" y="-462.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;\n&quot;</text>
<text text-anchor="middle" x="5643" y="-447.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,l in ipairs(block.lines) do</text>
<text text-anchor="middle" x="5643" y="-431.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;phrase = phrase .. l .. &quot;\n&quot;</text>
<text text-anchor="middle" x="5643" y="-416.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5643" y="-401.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prose = parse(phrase, 0) </text>
<text text-anchor="middle" x="5643" y="-385.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return prose</text>
<text text-anchor="middle" x="5643" y="-370.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>codeblock_51&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5643,-755.9649C5643,-709.7077 5643,-585.2271 5643,-503.5406"/>
<polygon fill="#000000" stroke="#000000" points="5646.5001,-503.3037 5643,-493.3038 5639.5001,-503.3038 5646.5001,-503.3037"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="5999,-445.7006 5815,-445.7006 5815,-409.7006 5999,-409.7006 5999,-445.7006"/>
<text text-anchor="middle" x="5907" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(pr, new)</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>codeblock_54&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5907,-755.9649C5907,-699.2773 5907,-525.1122 5907,-456.1978"/>
<polygon fill="#000000" stroke="#000000" points="5910.5001,-456.0753 5907,-446.0753 5903.5001,-456.0753 5910.5001,-456.0753"/>
</g>
</g>
</svg>