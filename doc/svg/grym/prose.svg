<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="6802pt" height="1005pt"
 viewBox="0.00 0.00 6802.00 1005.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1001.0008)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1001.0008 6798,-1001.0008 6798,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="645" cy="-979.0008" rx="46.1547" ry="18"/>
<text text-anchor="middle" x="645" y="-974.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 114</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="645" cy="-907.0008" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="645" y="-902.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;16</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M645,-960.8321C645,-953.1317 645,-943.9751 645,-935.4174"/>
<polygon fill="#000000" stroke="#000000" points="648.5001,-935.414 645,-925.414 641.5001,-935.4141 648.5001,-935.414"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="447" cy="-835.0008" rx="76.9193" ry="18"/>
<text text-anchor="middle" x="447" y="-830.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Prose module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M606.3536,-892.9475C575.6243,-881.7732 532.3498,-866.0371 498.6503,-853.7827"/>
<polygon fill="#000000" stroke="#000000" points="499.5659,-850.3915 488.9718,-850.2632 497.1736,-856.97 499.5659,-850.3915"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="588" cy="-835.0008" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="588" y="-830.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;4</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M630.9101,-889.203C624.0256,-880.5068 615.6187,-869.8875 608.0765,-860.3605"/>
<polygon fill="#000000" stroke="#000000" points="610.6824,-858.0134 601.7311,-852.3454 605.194,-862.3583 610.6824,-858.0134"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="703" cy="-835.0008" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="703" y="-830.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 5&#45;16</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M659.3371,-889.203C666.3424,-880.5068 674.8968,-869.8875 682.5713,-860.3605"/>
<polygon fill="#000000" stroke="#000000" points="685.4803,-862.3286 689.028,-852.3454 680.029,-857.9373 685.4803,-862.3286"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1901" cy="-835.0008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1901" y="-830.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 17&#45;75</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M704.7345,-903.5765C911.6726,-891.7138 1597.7161,-852.3865 1826.2205,-839.2875"/>
<polygon fill="#000000" stroke="#000000" points="1826.6455,-842.769 1836.4288,-838.7023 1826.2448,-835.7805 1826.6455,-842.769"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="553,-781.2028 159,-781.2028 159,-741.3987 553,-741.3987 553,-781.2028"/>
<text text-anchor="middle" x="356" y="-749.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Here we need a proper recursive parser. &#160;Eventually.</text>
</g>
<!-- block_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>block_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M552.5158,-823.322C546.0277,-821.2053 539.3137,-819.0273 533,-817.0008 498.9476,-806.071 461.1432,-794.146 429.2447,-784.1443"/>
<polygon fill="#000000" stroke="#000000" points="430.1345,-780.7554 419.5454,-781.1053 428.0415,-787.4352 430.1345,-780.7554"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="644" cy="-761.3008" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="644" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 5&#45;14</text>
</g>
<!-- block_4&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>block_4&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M689.0178,-817.5349C681.7766,-808.4895 672.7915,-797.2657 664.7574,-787.23"/>
<polygon fill="#000000" stroke="#000000" points="667.2736,-784.7725 658.2917,-779.1532 661.8089,-789.1472 667.2736,-784.7725"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="789,-779.3008 735,-779.3008 735,-743.3008 789,-743.3008 789,-779.3008"/>
</g>
<!-- block_4&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>block_4&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M716.9822,-817.5349C724.1702,-808.556 733.0765,-797.4307 741.0652,-787.4515"/>
<polygon fill="#000000" stroke="#000000" points="743.9848,-789.4049 747.502,-779.4109 738.5202,-785.0302 743.9848,-789.4049"/>
</g>
<!-- header_10 -->
<g id="node11" class="node">
<title>header_10</title>
<ellipse fill="none" stroke="#000000" cx="1413" cy="-761.3008" rx="88.5398" ry="18"/>
<text text-anchor="middle" x="1413" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Bookend parsing</text>
</g>
<!-- section_5&#45;&gt;header_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;header_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1840.6959,-827.8056C1763.9132,-818.3794 1627.2515,-800.7147 1511,-781.0008 1502.4223,-779.5462 1493.4459,-777.9058 1484.5558,-776.2082"/>
<polygon fill="#000000" stroke="#000000" points="1485.0647,-772.7417 1474.5813,-774.274 1483.7321,-779.6137 1485.0647,-772.7417"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="1576" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1576" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 17&#45;21</text>
</g>
<!-- section_5&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1846.1441,-825.0861C1793.2984,-815.1873 1711.2504,-798.9034 1641,-781.0008 1635.9867,-779.7232 1630.7825,-778.3048 1625.6002,-776.8316"/>
<polygon fill="#000000" stroke="#000000" points="1626.2969,-773.3891 1615.7171,-773.9531 1624.3394,-780.1099 1626.2969,-773.3891"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="1706" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1706" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 22&#45;25</text>
</g>
<!-- section_5&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_5&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1862.0075,-820.2636C1830.2436,-808.2585 1785.333,-791.2846 1751.8488,-778.6293"/>
<polygon fill="#000000" stroke="#000000" points="1752.8821,-775.2782 1742.2905,-775.0167 1750.4073,-781.8262 1752.8821,-775.2782"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="1836" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1836" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 26&#45;29</text>
</g>
<!-- section_5&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_5&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1885.2653,-817.1601C1877.1421,-807.9496 1867.0946,-796.5573 1858.1965,-786.4682"/>
<polygon fill="#000000" stroke="#000000" points="1860.605,-783.9077 1851.3655,-778.7229 1855.3551,-788.5379 1860.605,-783.9077"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="1966" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1966" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 30&#45;33</text>
</g>
<!-- section_5&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1916.7347,-817.1601C1924.8579,-807.9496 1934.9054,-796.5573 1943.8035,-786.4682"/>
<polygon fill="#000000" stroke="#000000" points="1946.6449,-788.5379 1950.6345,-778.7229 1941.395,-783.9077 1946.6449,-788.5379"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="2316" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2316" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 34&#45;38</text>
</g>
<!-- section_5&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1956.1088,-825.214C2034.2364,-811.3393 2176.6015,-786.0566 2256.8681,-771.802"/>
<polygon fill="#000000" stroke="#000000" points="2257.5825,-775.23 2266.8164,-770.0353 2256.3585,-768.3378 2257.5825,-775.23"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="2776" cy="-761.3008" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2776" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 39&#45;75</text>
</g>
<!-- section_5&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1963.9278,-829.7005C2124.6834,-816.1602 2549.1849,-780.4051 2711.57,-766.7276"/>
<polygon fill="#000000" stroke="#000000" points="2712.2105,-770.1861 2721.8814,-765.8591 2711.6229,-763.2108 2712.2105,-770.1861"/>
</g>
<!-- section_17 -->
<g id="node18" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="3606" cy="-761.3008" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3606" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 42&#45;75</text>
</g>
<!-- section_5&#45;&gt;section_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;section_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1966.0147,-832.1905C2233.0511,-820.6476 3244.8689,-776.9109 3530.5028,-764.5642"/>
<polygon fill="#000000" stroke="#000000" points="3530.9173,-768.0496 3540.7568,-764.121 3530.6149,-761.0562 3530.9173,-768.0496"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="5419" cy="-761.3008" rx="69.851" ry="18"/>
<text text-anchor="middle" x="5419" y="-757.1008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 76&#45;114</text>
</g>
<!-- section_5&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1966.5915,-833.6267C2401.1256,-824.5234 4862.1453,-772.9665 5338.9857,-762.977"/>
<polygon fill="#000000" stroke="#000000" points="5339.2903,-766.4715 5349.2148,-762.7627 5339.1437,-759.473 5339.2903,-766.4715"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="254,-705.8014 0,-705.8014 0,-572.9999 254,-572.9999 254,-705.8014"/>
<text text-anchor="middle" x="127" y="-690.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="127" y="-675.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;util&quot;</text>
<text text-anchor="middle" x="127" y="-659.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="127" y="-628.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local epnf = require &quot;peg/epnf&quot;</text>
<text text-anchor="middle" x="127" y="-612.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="127" y="-581.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local P, p = u.inherit(Node)</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>codeblock_7&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M593.453,-748.1866C583.0949,-745.7733 572.2314,-743.4393 562,-741.6007 433.4777,-718.5056 393.3491,-742.1997 264.1442,-705.73"/>
<polygon fill="#000000" stroke="#000000" points="264.8527,-702.2915 254.274,-702.8773 262.909,-709.0163 264.8527,-702.2915"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="799.5,-666.7011 272.5,-666.7011 272.5,-612.1002 799.5,-612.1002 799.5,-666.7011"/>
<text text-anchor="middle" x="536" y="-635.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We need to generate parsers to match sequences of single characters, so</text>
<text text-anchor="middle" x="536" y="-620.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">that *bold*, **bold**, ***bold*** etc all work correctly.</text>
</g>
<!-- block_11&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>block_11&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1537.8785,-748.0634C1529.1435,-745.5033 1519.8282,-743.1412 1511,-741.6007 1203.2404,-687.8977 1118.151,-750.6081 809,-705.6007 752.4445,-697.3672 690.4607,-682.7996 639.8693,-669.4223"/>
<polygon fill="#000000" stroke="#000000" points="640.4722,-665.9608 629.9079,-666.7649 638.6679,-672.7243 640.4722,-665.9608"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1352,-666.6011 818,-666.6011 818,-612.2002 1352,-612.2002 1352,-666.6011"/>
<text text-anchor="middle" x="1085" y="-651.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">Bookends are a fun construct borrowed from the [[LPEG manual][httk://]]]]</text>
<text text-anchor="middle" x="1085" y="-635.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">model for Lua long strings. &#160;The GGG/Pegylator form of a bookend construct</text>
<text text-anchor="middle" x="1085" y="-620.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">is </text>
</g>
<!-- block_12&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_12&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1667.091,-748.3593C1658.5629,-745.8462 1649.5321,-743.4289 1641,-741.6007 1518.3158,-715.3138 1484.4047,-728.2657 1361,-705.6007 1306.4768,-695.5868 1246.5735,-681.5897 1196.5482,-669.0441"/>
<polygon fill="#000000" stroke="#000000" points="1197.2316,-665.607 1186.6794,-666.556 1195.5203,-672.3946 1197.2316,-665.607"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1673.5,-666.6011 1370.5,-666.6011 1370.5,-612.2002 1673.5,-612.2002 1673.5,-666.6011"/>
<text text-anchor="middle" x="1522" y="-651.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">~#!peg</text>
<text text-anchor="middle" x="1522" y="-635.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;bookend = &quot;`&quot;:a !&quot;`&quot;:a pattern &#160;&quot;`&quot;:a</text>
<text text-anchor="middle" x="1522" y="-620.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">~#/peg</text>
</g>
<!-- block_13&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_13&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1798.1132,-747.9949C1767.0526,-736.9698 1722.0111,-720.7148 1683,-705.6007 1654.3881,-694.5157 1623.1473,-681.8106 1595.8632,-670.5141"/>
<polygon fill="#000000" stroke="#000000" points="1596.9661,-667.1824 1586.3883,-666.5821 1594.283,-673.6478 1596.9661,-667.1824"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2240,-666.6011 1692,-666.6011 1692,-612.2002 2240,-612.2002 2240,-666.6011"/>
<text text-anchor="middle" x="1966" y="-651.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">The =lpeg= engine doesn&#39;t model this directly but it&#39;s possible to provide</text>
<text text-anchor="middle" x="1966" y="-635.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">it. &#160;We only need the subset of this where =a= is unique, that is, =pattern=</text>
<text text-anchor="middle" x="1966" y="-620.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">does not contain =bookend= at any level of expansion. </text>
</g>
<!-- block_14&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>block_14&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1966,-743.0511C1966,-725.6205 1966,-698.8266 1966,-676.8477"/>
<polygon fill="#000000" stroke="#000000" points="1969.5001,-676.8238 1966,-666.8239 1962.5001,-676.8239 1969.5001,-676.8238"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="2813.5,-674.0019 2258.5,-674.0019 2258.5,-604.7994 2813.5,-604.7994 2813.5,-674.0019"/>
<text text-anchor="middle" x="2536" y="-659.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">GGG being a specification format needn&#39;t respect this limitation. &#160;Orb</text>
<text text-anchor="middle" x="2536" y="-643.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">does so by design. &#160;It is a simple consquence of the sort of markup we are</text>
<text text-anchor="middle" x="2536" y="-628.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">using; there is no need to parse ***bold **inside bold** still bold*** twice,</text>
<text text-anchor="middle" x="2536" y="-612.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">and this generalizes to all text styles. </text>
</g>
<!-- block_15&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_15&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2344.3108,-745.614C2374.4758,-728.8998 2423.4171,-701.7819 2464.2959,-679.1313"/>
<polygon fill="#000000" stroke="#000000" points="2466.1029,-682.1315 2473.1535,-674.2233 2462.7102,-676.0086 2466.1029,-682.1315"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="3380,-658.7012 2832,-658.7012 2832,-620.1001 3380,-620.1001 3380,-658.7012"/>
<text text-anchor="middle" x="3106" y="-643.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">We do have to wire them up so that we don&#39;t cross the streams. &#160;Sans macros.</text>
<text text-anchor="middle" x="3106" y="-628.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">By hand. </text>
</g>
<!-- block_16&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_16&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2812.8946,-747.6721C2868.8408,-727.0059 2975.8102,-687.492 3043.8898,-662.3438"/>
<polygon fill="#000000" stroke="#000000" points="3045.4738,-665.4899 3053.6415,-658.7416 3043.0482,-658.9236 3045.4738,-665.4899"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="3465" cy="-639.4007" rx="67.2722" ry="18"/>
<text text-anchor="middle" x="3465" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Lpeg locals</text>
</g>
<!-- section_17&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_17&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3585.7615,-744.0308C3572.9166,-733.052 3555.9565,-718.5226 3541,-705.6007 3524.9124,-691.7016 3506.9761,-676.084 3492.5698,-663.5099"/>
<polygon fill="#000000" stroke="#000000" points="3494.798,-660.809 3484.9636,-656.8676 3490.1937,-666.0816 3494.798,-660.809"/>
</g>
<!-- block_26 -->
<g id="node27" class="node">
<title>block_26</title>
<ellipse fill="none" stroke="#000000" cx="3606" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3606" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 42&#45;43</text>
</g>
<!-- section_17&#45;&gt;block_26 -->
<g id="edge26" class="edge">
<title>section_17&#45;&gt;block_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3606,-743.0511C3606,-723.2123 3606,-691.2443 3606,-668.0512"/>
<polygon fill="#000000" stroke="#000000" points="3609.5001,-667.7751 3606,-657.7751 3602.5001,-667.7751 3609.5001,-667.7751"/>
</g>
<!-- block_27 -->
<g id="node28" class="node">
<title>block_27</title>
<ellipse fill="none" stroke="#000000" cx="3736" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3736" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 44&#45;51</text>
</g>
<!-- section_17&#45;&gt;block_27 -->
<g id="edge27" class="edge">
<title>section_17&#45;&gt;block_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3626.8886,-744.1829C3639.8334,-733.3846 3656.6669,-718.9942 3671,-705.6007 3685.229,-692.3046 3700.5163,-676.8013 3712.6884,-664.1414"/>
<polygon fill="#000000" stroke="#000000" points="3715.4485,-666.3191 3719.8274,-656.6715 3710.3879,-661.4827 3715.4485,-666.3191"/>
</g>
<!-- block_28 -->
<g id="node29" class="node">
<title>block_28</title>
<ellipse fill="none" stroke="#000000" cx="3866" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3866" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 52&#45;75</text>
</g>
<!-- section_17&#45;&gt;block_28 -->
<g id="edge28" class="edge">
<title>section_17&#45;&gt;block_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3664.1664,-752.788C3704.6721,-744.985 3758.7824,-730.7004 3801,-705.6007 3818.5917,-695.1419 3834.7334,-678.7568 3846.5307,-664.9049"/>
<polygon fill="#000000" stroke="#000000" points="3849.298,-667.0502 3852.9529,-657.1058 3843.8943,-662.6005 3849.298,-667.0502"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="5081" cy="-639.4007" rx="69.1756" ry="18"/>
<text text-anchor="middle" x="5081" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Link or Raw</text>
</g>
<!-- section_18&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_18&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5351.9502,-756.0347C5297.6199,-749.6746 5220.2983,-735.7723 5159,-705.6007 5138.2376,-695.3813 5118.4052,-678.4168 5103.9341,-664.22"/>
<polygon fill="#000000" stroke="#000000" points="5106.4033,-661.7393 5096.8788,-657.0986 5101.4305,-666.6659 5106.4033,-661.7393"/>
</g>
<!-- block_37 -->
<g id="node38" class="node">
<title>block_37</title>
<ellipse fill="none" stroke="#000000" cx="5224" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="5224" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 76&#45;80</text>
</g>
<!-- section_18&#45;&gt;block_37 -->
<g id="edge37" class="edge">
<title>section_18&#45;&gt;block_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5374.9756,-747.305C5348.7173,-737.8058 5315.452,-723.6848 5289,-705.6007 5272.483,-694.3088 5256.691,-678.3886 5244.8093,-664.9903"/>
<polygon fill="#000000" stroke="#000000" points="5247.1287,-662.3209 5237.945,-657.0378 5241.8297,-666.8948 5247.1287,-662.3209"/>
</g>
<!-- block_38 -->
<g id="node39" class="node">
<title>block_38</title>
<ellipse fill="none" stroke="#000000" cx="5354" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="5354" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 81&#45;83</text>
</g>
<!-- section_18&#45;&gt;block_38 -->
<g id="edge38" class="edge">
<title>section_18&#45;&gt;block_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5409.409,-743.314C5398.6079,-723.0576 5380.938,-689.9198 5368.4605,-666.5196"/>
<polygon fill="#000000" stroke="#000000" points="5371.4239,-664.6384 5363.6303,-657.4612 5365.2471,-667.932 5371.4239,-664.6384"/>
</g>
<!-- block_39 -->
<g id="node40" class="node">
<title>block_39</title>
<ellipse fill="none" stroke="#000000" cx="5484" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="5484" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 84&#45;88</text>
</g>
<!-- section_18&#45;&gt;block_39 -->
<g id="edge39" class="edge">
<title>section_18&#45;&gt;block_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5428.591,-743.314C5439.3921,-723.0576 5457.062,-689.9198 5469.5395,-666.5196"/>
<polygon fill="#000000" stroke="#000000" points="5472.7529,-667.932 5474.3697,-657.4612 5466.5761,-664.6384 5472.7529,-667.932"/>
</g>
<!-- block_40 -->
<g id="node41" class="node">
<title>block_40</title>
<ellipse fill="none" stroke="#000000" cx="5825" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="5825" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 89&#45;90</text>
</g>
<!-- section_18&#45;&gt;block_40 -->
<g id="edge40" class="edge">
<title>section_18&#45;&gt;block_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5464.7842,-747.5542C5541.2518,-724.5951 5694.4059,-678.6111 5774.131,-654.6739"/>
<polygon fill="#000000" stroke="#000000" points="5775.3747,-657.9549 5783.9458,-651.727 5773.3617,-651.2506 5775.3747,-657.9549"/>
</g>
<!-- block_41 -->
<g id="node42" class="node">
<title>block_41</title>
<ellipse fill="none" stroke="#000000" cx="6381" cy="-639.4007" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="6381" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 91&#45;99</text>
</g>
<!-- section_18&#45;&gt;block_41 -->
<g id="edge41" class="edge">
<title>section_18&#45;&gt;block_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5483.0338,-754.0633C5573.6833,-743.7413 5744.5931,-723.9997 5890,-705.6007 6044.8367,-686.0086 6226.8468,-660.9325 6319.7248,-647.9889"/>
<polygon fill="#000000" stroke="#000000" points="6320.3676,-651.4332 6329.7882,-646.5853 6319.4006,-644.5003 6320.3676,-651.4332"/>
</g>
<!-- block_42 -->
<g id="node43" class="node">
<title>block_42</title>
<ellipse fill="none" stroke="#000000" cx="6635" cy="-639.4007" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="6635" y="-635.2007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 100&#45;114</text>
</g>
<!-- section_18&#45;&gt;block_42 -->
<g id="edge42" class="edge">
<title>section_18&#45;&gt;block_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5489.1046,-760.0735C5689.5065,-756.157 6262.194,-742.0087 6446,-705.6007 6497.1867,-695.4618 6553.3179,-674.4567 6591.0017,-658.8118"/>
<polygon fill="#000000" stroke="#000000" points="6592.7834,-661.8595 6600.6456,-654.7576 6590.0706,-655.4066 6592.7834,-661.8595"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3521,-463.2006 3467,-463.2006 3467,-427.2006 3521,-427.2006 3521,-463.2006"/>
</g>
<!-- block_26&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_26&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3590.7233,-621.9358C3574.1481,-602.3414 3547.6895,-569.1089 3530,-537.2006 3518.633,-516.6967 3509.1413,-491.8603 3502.763,-473.1633"/>
<polygon fill="#000000" stroke="#000000" points="3506.0192,-471.8629 3499.5476,-463.4743 3499.3755,-474.0677 3506.0192,-471.8629"/>
</g>
<!-- codeblock_30 -->
<g id="node31" class="node">
<title>codeblock_30</title>
<ellipse fill="none" stroke="#000000" cx="3616" cy="-445.2006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3616" y="-441.0006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 44&#45;50</text>
</g>
<!-- block_27&#45;&gt;codeblock_30 -->
<g id="edge30" class="edge">
<title>block_27&#45;&gt;codeblock_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3724.9258,-621.4789C3703.7173,-587.1565 3657.2736,-511.995 3632.4361,-471.7997"/>
<polygon fill="#000000" stroke="#000000" points="3635.2815,-469.7462 3627.0475,-463.079 3629.3267,-473.4258 3635.2815,-469.7462"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3765,-463.2006 3711,-463.2006 3711,-427.2006 3765,-427.2006 3765,-463.2006"/>
</g>
<!-- block_27&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>block_27&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3736.1882,-621.1308C3736.5382,-587.1399 3737.2917,-513.9735 3737.7083,-473.5253"/>
<polygon fill="#000000" stroke="#000000" points="3741.2105,-473.316 3737.8138,-463.2804 3734.2109,-473.2438 3741.2105,-473.316"/>
</g>
<!-- codeblock_33 -->
<g id="node34" class="node">
<title>codeblock_33</title>
<ellipse fill="none" stroke="#000000" cx="3864" cy="-445.2006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3864" y="-441.0006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 52&#45;73</text>
</g>
<!-- block_28&#45;&gt;codeblock_33 -->
<g id="edge33" class="edge">
<title>block_28&#45;&gt;codeblock_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3865.8118,-621.1308C3865.4618,-587.1399 3864.7083,-513.9735 3864.2917,-473.5253"/>
<polygon fill="#000000" stroke="#000000" points="3867.7891,-473.2438 3864.1862,-463.2804 3860.7895,-473.316 3867.7891,-473.2438"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="4013,-463.2006 3959,-463.2006 3959,-427.2006 4013,-427.2006 4013,-463.2006"/>
</g>
<!-- block_28&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_28&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3883.0282,-622.2312C3901.4738,-602.8955 3930.8269,-569.8882 3950,-537.2006 3961.9345,-516.8537 3971.4361,-491.816 3977.6743,-473"/>
<polygon fill="#000000" stroke="#000000" points="3981.0781,-473.8472 3980.799,-463.2561 3974.4124,-471.7097 3981.0781,-473.8472"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="3629.5,-201.1004 3494.5,-201.1004 3494.5,-116.1001 3629.5,-116.1001 3629.5,-201.1004"/>
<text text-anchor="middle" x="3562" y="-185.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cg = L.Cg</text>
<text text-anchor="middle" x="3562" y="-170.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local C = L.C</text>
<text text-anchor="middle" x="3562" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">local P = L.P</text>
<text text-anchor="middle" x="3562" y="-139.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cmt = L.Cmt</text>
<text text-anchor="middle" x="3562" y="-124.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">local Cb = L.Cb</text>
</g>
<!-- codeblock_30&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_30&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3612.5399,-426.8364C3604.4859,-384.0906 3584.2378,-276.6256 3571.9541,-211.431"/>
<polygon fill="#000000" stroke="#000000" points="3575.3453,-210.526 3570.0541,-201.347 3568.4663,-211.8221 3575.3453,-210.526"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="4188.5,-317.3009 3647.5,-317.3009 3647.5,.1003 4188.5,.1003 4188.5,-317.3009"/>
<text text-anchor="middle" x="3918" y="-302.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function equal_strings(s, i, a, b)</text>
<text text-anchor="middle" x="3918" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns true if a and b are equal.</text>
<text text-anchor="middle" x="3918" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; s and i are not used, provided because expected by Cb.</text>
<text text-anchor="middle" x="3918" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return a == b</text>
<text text-anchor="middle" x="3918" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3918" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local function bookends(sigil)</text>
<text text-anchor="middle" x="3918" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns a pair of patterns, _open and _close,</text>
<text text-anchor="middle" x="3918" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; which will match a brace of sigil.</text>
<text text-anchor="middle" x="3918" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; sigil must be a string. </text>
<text text-anchor="middle" x="3918" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _open = Cg(C(P(sigil)^1), sigil .. &quot;_init&quot;)</text>
<text text-anchor="middle" x="3918" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _close = &#160;Cmt(C(P(sigil)^1) * Cb(sigil .. &quot;_init&quot;), equal_strings)</text>
<text text-anchor="middle" x="3918" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return _open, _close</text>
<text text-anchor="middle" x="3918" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3918" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local bold_open, bold_close &#160;&#160;&#160;&#160;= &#160;bookends(&quot;*&quot;)</text>
<text text-anchor="middle" x="3918" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">local italic_open, italic_close = &#160;bookends(&quot;/&quot;)</text>
<text text-anchor="middle" x="3918" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local under_open, under_close &#160;&#160;= &#160;bookends(&quot;_&quot;)</text>
<text text-anchor="middle" x="3918" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local strike_open, strike_close = &#160;bookends(&quot;&#45;&quot;)</text>
<text text-anchor="middle" x="3918" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">local lit_open, lit_close &#160;&#160;&#160;&#160;&#160;&#160;= &#160;bookends(&quot;=&quot;)</text>
</g>
<!-- codeblock_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>codeblock_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3867.4601,-426.8364C3871.4923,-405.436 3878.5808,-367.8141 3886.1962,-327.3962"/>
<polygon fill="#000000" stroke="#000000" points="3889.6771,-327.8241 3888.0892,-317.349 3882.7981,-326.528 3889.6771,-327.8241"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="4586.5,-472.501 4031.5,-472.501 4031.5,-417.9001 4586.5,-417.9001 4586.5,-472.501"/>
<text text-anchor="middle" x="4309" y="-441.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The prose parser will be a proper recursive grammar. &#160;This calls for some</text>
<text text-anchor="middle" x="4309" y="-426.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">enhancements to epnf to allow assignment of Node metatables to matched spans.</text>
</g>
<!-- block_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>block_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5212.4529,-621.7749C5200.9869,-605.9522 5181.8479,-583.657 5159,-573.2006 5045.0043,-521.03 4719.1803,-560.5117 4596,-537.2006 4523.8294,-523.5427 4444.51,-497.1998 4387.5833,-476.1904"/>
<polygon fill="#000000" stroke="#000000" points="4388.5268,-472.8072 4377.934,-472.6012 4386.0864,-479.368 4388.5268,-472.8072"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="5181,-464.5011 4605,-464.5011 4605,-425.9 5181,-425.9 5181,-464.5011"/>
<text text-anchor="middle" x="4893" y="-449.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">I&#39;ve been sloppy with the node constructor interface and will need to go through</text>
<text text-anchor="middle" x="4893" y="-434.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">the whole =grym= directory and fix it into a consistent state. &#160;At some point.</text>
</g>
<!-- block_38&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>block_38&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5340.8448,-621.8738C5328.8362,-606.9968 5309.826,-586.0721 5289,-573.2006 5274.8307,-564.4432 5075.5382,-501.8672 4965.2187,-467.5646"/>
<polygon fill="#000000" stroke="#000000" points="4966.0689,-464.1637 4955.4807,-464.5382 4963.9914,-470.8484 4966.0689,-464.1637"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="5768.5,-479.8018 5199.5,-479.8018 5199.5,-410.5993 5768.5,-410.5993 5768.5,-479.8018"/>
<text text-anchor="middle" x="5484" y="-464.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">Links give me a chance to design that interface to fit grammatically. For now,</text>
<text text-anchor="middle" x="5484" y="-449.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">we&#39;re going to handroll another Link class, and write a simple either&#45;or parser</text>
<text text-anchor="middle" x="5484" y="-434.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">over prose strings that finds links and puts the rest in a =raw= class, which</text>
<text text-anchor="middle" x="5484" y="-418.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">shouldn&#39;t need an intermediate Node class. </text>
</g>
<!-- block_39&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_39&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5484,-621.1308C5484,-591.3617 5484,-531.5443 5484,-489.9733"/>
<polygon fill="#000000" stroke="#000000" points="5487.5001,-489.8269 5484,-479.8269 5480.5001,-489.827 5487.5001,-489.8269"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="6285.5,-463.2006 5786.5,-463.2006 5786.5,-427.2006 6285.5,-427.2006 6285.5,-463.2006"/>
<text text-anchor="middle" x="6036" y="-441.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">This Link class needs to fit the constructor semantics of =epeg.Csp=.</text>
</g>
<!-- block_40&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>block_40&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5843.7248,-622.1667C5881.2123,-587.664 5965.6003,-509.995 6009.0387,-470.0152"/>
<polygon fill="#000000" stroke="#000000" points="6011.4134,-472.5864 6016.4011,-463.239 6006.6729,-467.4358 6011.4134,-472.5864"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="6381" cy="-445.2006" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="6381" y="-441.0006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 91&#45;98</text>
</g>
<!-- block_41&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>block_41&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6381,-621.1308C6381,-587.1399 6381,-513.9735 6381,-473.5253"/>
<polygon fill="#000000" stroke="#000000" points="6384.5001,-473.2804 6381,-463.2804 6377.5001,-473.2804 6384.5001,-473.2804"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="6530,-463.2006 6476,-463.2006 6476,-427.2006 6530,-427.2006 6530,-463.2006"/>
</g>
<!-- block_41&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>block_41&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6398.8093,-621.9565C6417.7398,-602.6407 6447.5694,-569.8924 6467,-537.2006 6479.052,-516.9231 6488.5448,-491.8802 6494.7498,-473.0446"/>
<polygon fill="#000000" stroke="#000000" points="6498.1571,-473.8791 6497.8541,-463.2886 6491.4866,-471.7566 6498.1571,-473.8791"/>
</g>
<!-- codeblock_50 -->
<g id="node51" class="node">
<title>codeblock_50</title>
<ellipse fill="none" stroke="#000000" cx="6635" cy="-445.2006" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6635" y="-441.0006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 100&#45;102</text>
</g>
<!-- block_42&#45;&gt;codeblock_50 -->
<g id="edge50" class="edge">
<title>block_42&#45;&gt;codeblock_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6635,-621.1308C6635,-587.1399 6635,-513.9735 6635,-473.5253"/>
<polygon fill="#000000" stroke="#000000" points="6638.5001,-473.2804 6635,-463.2804 6631.5001,-473.2804 6638.5001,-473.2804"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="6794,-537.2006 6740,-537.2006 6740,-353.2006 6794,-353.2006 6794,-537.2006"/>
</g>
<!-- block_42&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>block_42&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6655.411,-622.0178C6676.6799,-603.005 6709.8033,-570.744 6731,-537.2006 6732.3629,-535.0438 6733.6889,-532.8271 6734.9778,-530.5646"/>
<polygon fill="#000000" stroke="#000000" points="6738.1215,-532.1082 6739.7643,-521.6415 6731.953,-528.7993 6738.1215,-532.1082"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="6515,-209.2012 6247,-209.2012 6247,-107.9994 6515,-107.9994 6515,-209.2012"/>
<text text-anchor="middle" x="6381" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Prose, block)</text>
<text text-anchor="middle" x="6381" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prose = setmetatable({},P)</text>
<text text-anchor="middle" x="6381" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return prose</text>
<text text-anchor="middle" x="6381" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>codeblock_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6381,-426.8364C6381,-385.8497 6381,-285.3608 6381,-219.687"/>
<polygon fill="#000000" stroke="#000000" points="6384.5001,-219.4601 6381,-209.4601 6377.5001,-219.4601 6384.5001,-219.4601"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="6723.5,-176.6003 6546.5,-176.6003 6546.5,-140.6003 6723.5,-140.6003 6723.5,-176.6003"/>
<text text-anchor="middle" x="6635" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(p, new)</text>
</g>
<!-- codeblock_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>codeblock_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6635,-426.8364C6635,-378.1037 6635,-245.2531 6635,-186.8193"/>
<polygon fill="#000000" stroke="#000000" points="6638.5001,-186.8114 6635,-176.8115 6631.5001,-186.8115 6638.5001,-186.8114"/>
</g>
</g>
</svg>