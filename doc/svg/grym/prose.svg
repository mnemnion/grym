<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5074pt" height="1327pt"
 viewBox="0.00 0.00 5073.50 1326.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1322.6015)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1322.6015 5069.5,-1322.6015 5069.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1070.5" cy="-1300.6015" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1070.5" y="-1296.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 155</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1070.5" cy="-1228.6015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1070.5" y="-1224.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;125</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1070.5,-1282.4329C1070.5,-1274.7325 1070.5,-1265.5759 1070.5,-1257.0182"/>
<polygon fill="#000000" stroke="#000000" points="1074.0001,-1257.0148 1070.5,-1247.0148 1067.0001,-1257.0148 1074.0001,-1257.0148"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="659.5" cy="-1156.6015" rx="76.9193" ry="18"/>
<text text-anchor="middle" x="659.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Prose module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1015.0707,-1218.8913C941.737,-1206.0445 812.3415,-1183.3767 731.513,-1169.217"/>
<polygon fill="#000000" stroke="#000000" points="731.8707,-1165.7264 721.4167,-1167.4482 730.6627,-1172.6214 731.8707,-1165.7264"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="812.5" cy="-1156.6015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="812.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1021.2057,-1216.4792C979.737,-1206.0603 918.9804,-1190.2773 866.5,-1174.6015 861.1147,-1172.9929 855.4568,-1171.2107 849.9135,-1169.4112"/>
<polygon fill="#000000" stroke="#000000" points="850.7356,-1165.997 840.1425,-1166.1876 848.5424,-1172.6445 850.7356,-1165.997"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="948.5" cy="-1156.6015" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="948.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 5&#45;23</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1042.8163,-1212.2636C1025.8997,-1202.28 1004.0518,-1189.3862 985.6442,-1178.5227"/>
<polygon fill="#000000" stroke="#000000" points="987.3118,-1175.4428 976.9208,-1173.3744 983.754,-1181.4713 987.3118,-1175.4428"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="1135.5" cy="-1156.6015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1135.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 25&#45;27</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1086.5674,-1210.8038C1094.38,-1202.1498 1103.9118,-1191.5915 1112.4802,-1182.1004"/>
<polygon fill="#000000" stroke="#000000" points="1115.289,-1184.2122 1119.3921,-1174.4441 1110.0931,-1179.5214 1115.289,-1184.2122"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="1886.5" cy="-1156.6015" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1886.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 29&#45;93</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1133.1752,-1223.0714C1281.8942,-1209.9491 1655.463,-1176.9871 1813.7792,-1163.0181"/>
<polygon fill="#000000" stroke="#000000" points="1814.2376,-1166.4913 1823.8913,-1162.1258 1813.6223,-1159.5184 1814.2376,-1166.4913"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="4550.5" cy="-1156.6015" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4550.5" y="-1152.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 126&#45;155</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1136.1445,-1227.2434C1566.1321,-1218.3471 3977.9332,-1168.4477 4464.8192,-1158.3742"/>
<polygon fill="#000000" stroke="#000000" points="4465.014,-1161.8711 4474.9394,-1158.1649 4464.8691,-1154.8725 4465.014,-1161.8711"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="684.5,-984.2013 570.5,-984.2013 570.5,-948.2013 684.5,-948.2013 684.5,-984.2013"/>
<text text-anchor="middle" x="627.5" y="-962.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">* Prose module</text>
</g>
<!-- header_2&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>header_2&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M656.4317,-1138.3452C650.8289,-1105.0084 638.9071,-1034.0736 632.2487,-994.4564"/>
<polygon fill="#000000" stroke="#000000" points="635.6681,-993.684 630.559,-984.4024 628.7649,-994.8443 635.6681,-993.684"/>
</g>
<!-- raw_9 -->
<g id="node10" class="node">
<title>raw_9</title>
<ellipse fill="none" stroke="#000000" cx="729.5" cy="-966.2013" rx="27" ry="18"/>
<text text-anchor="middle" x="729.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_9 -->
<g id="edge9" class="edge">
<title>prose_3&#45;&gt;raw_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M795.5064,-1141.071C785.4352,-1131.003 773.1793,-1117.0991 765.5,-1102.6015 747.1005,-1067.8658 737.6219,-1023.0721 733.1104,-994.4848"/>
<polygon fill="#000000" stroke="#000000" points="736.541,-993.7574 731.6162,-984.3767 729.6162,-994.7811 736.541,-993.7574"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="1084.5,-1102.5018 774.5,-1102.5018 774.5,-829.9009 1084.5,-829.9009 1084.5,-1102.5018"/>
<text text-anchor="middle" x="929.5" y="-1087.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="929.5" y="-1056.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;util&quot;</text>
<text text-anchor="middle" x="929.5" y="-1040.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require (&quot;status&quot;)()</text>
<text text-anchor="middle" x="929.5" y="-1025.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
<text text-anchor="middle" x="929.5" y="-1009.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">local Csp = epeg.Csp</text>
<text text-anchor="middle" x="929.5" y="-994.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;node/node&quot;</text>
<text text-anchor="middle" x="929.5" y="-963.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="929.5" y="-931.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="929.5" y="-916.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">assert(type(Link) == &#39;function&#39;)</text>
<text text-anchor="middle" x="929.5" y="-900.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Grammar = require &quot;lib/node/grammar&quot;</text>
<text text-anchor="middle" x="929.5" y="-853.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Pr, pr = u.inherit(Node)</text>
<text text-anchor="middle" x="929.5" y="-838.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">Pr.id = &quot;prose&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>codeblock_4&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M946.6782,-1138.3452C945.9746,-1131.2945 945.1032,-1122.5621 944.129,-1112.7999"/>
<polygon fill="#000000" stroke="#000000" points="947.5988,-1112.3216 943.123,-1102.7186 940.6334,-1113.0167 947.5988,-1112.3216"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1244.5,-984.2013 1102.5,-984.2013 1102.5,-948.2013 1244.5,-948.2013 1244.5,-984.2013"/>
<text text-anchor="middle" x="1173.5" y="-962.7014" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = false &#160;</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_5&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1139.1436,-1138.3452C1145.7969,-1105.0084 1159.9541,-1034.0736 1167.8609,-994.4564"/>
<polygon fill="#000000" stroke="#000000" points="1171.3425,-994.8941 1169.8674,-984.4024 1164.4778,-993.524 1171.3425,-994.8941"/>
</g>
<!-- header_13 -->
<g id="node14" class="node">
<title>header_13</title>
<ellipse fill="none" stroke="#000000" cx="1351.5" cy="-966.2013" rx="88.5398" ry="18"/>
<text text-anchor="middle" x="1351.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Bookend parsing</text>
</g>
<!-- section_6&#45;&gt;header_13 -->
<g id="edge13" class="edge">
<title>section_6&#45;&gt;header_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1820.9192,-1154.8635C1714.7212,-1151.007 1510.8111,-1138.9678 1449.5,-1102.6015 1406.9987,-1077.3922 1377.8218,-1025.7851 1362.9533,-993.7776"/>
<polygon fill="#000000" stroke="#000000" points="1366.0879,-992.214 1358.7994,-984.5244 1359.7019,-995.0808 1366.0879,-992.214"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1490.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1490.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>section_6&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1820.9061,-1154.8111C1730.4087,-1151.0047 1573.6349,-1139.1767 1531.5,-1102.6015 1500.4308,-1075.632 1492.4284,-1026.102 1490.6332,-994.7295"/>
<polygon fill="#000000" stroke="#000000" points="1494.1195,-994.3114 1490.2294,-984.4566 1487.1249,-994.5864 1494.1195,-994.3114"/>
</g>
<!-- prose_15 -->
<g id="node16" class="node">
<title>prose_15</title>
<ellipse fill="none" stroke="#000000" cx="1572.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1572.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_15 -->
<g id="edge15" class="edge">
<title>section_6&#45;&gt;prose_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1847.8314,-1142.0213C1823.0946,-1132.1172 1790.6677,-1118.0458 1763.5,-1102.6015 1701.1908,-1067.18 1634.3341,-1016.039 1598.596,-987.5031"/>
<polygon fill="#000000" stroke="#000000" points="1600.6073,-984.6294 1590.6191,-981.0957 1596.2236,-990.0869 1600.6073,-984.6294"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="1804.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1804.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>section_6&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1870.3191,-1138.7122C1861.9457,-1128.6863 1852.1194,-1115.6103 1845.5,-1102.6015 1827.502,-1067.2311 1815.9561,-1022.5985 1809.8464,-994.2198"/>
<polygon fill="#000000" stroke="#000000" points="1813.2249,-993.2743 1807.7688,-984.1924 1806.3705,-994.6946 1813.2249,-993.2743"/>
</g>
<!-- prose_17 -->
<g id="node18" class="node">
<title>prose_17</title>
<ellipse fill="none" stroke="#000000" cx="1886.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1886.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_17 -->
<g id="edge17" class="edge">
<title>section_6&#45;&gt;prose_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1886.5,-1138.3452C1886.5,-1105.0084 1886.5,-1034.0736 1886.5,-994.4564"/>
<polygon fill="#000000" stroke="#000000" points="1890.0001,-994.4024 1886.5,-984.4024 1883.0001,-994.4025 1890.0001,-994.4024"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="1968.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1968.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>section_6&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1902.6809,-1138.7122C1911.0543,-1128.6863 1920.8806,-1115.6103 1927.5,-1102.6015 1945.498,-1067.2311 1957.0439,-1022.5985 1963.1536,-994.2198"/>
<polygon fill="#000000" stroke="#000000" points="1966.6295,-994.6946 1965.2312,-984.1924 1959.7751,-993.2743 1966.6295,-994.6946"/>
</g>
<!-- prose_19 -->
<g id="node20" class="node">
<title>prose_19</title>
<ellipse fill="none" stroke="#000000" cx="2050.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2050.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_19 -->
<g id="edge19" class="edge">
<title>section_6&#45;&gt;prose_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1937.128,-1145.1171C1962.0592,-1137.0603 1990.7192,-1123.8191 2009.5,-1102.6015 2036.3578,-1072.2589 2045.631,-1024.8698 2048.8271,-994.6919"/>
<polygon fill="#000000" stroke="#000000" points="2052.3414,-994.6892 2049.751,-984.416 2045.3695,-994.0624 2052.3414,-994.6892"/>
</g>
<!-- codeblock_20 -->
<g id="node21" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="2270.5" cy="-966.2013" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2270.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 55&#45;77</text>
</g>
<!-- section_6&#45;&gt;codeblock_20 -->
<g id="edge20" class="edge">
<title>section_6&#45;&gt;codeblock_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1943.8676,-1147.7434C1986.1942,-1139.7436 2044.3748,-1125.6192 2091.5,-1102.6015 2151.9521,-1073.0745 2212.0665,-1021.5563 2244.9465,-990.9904"/>
<polygon fill="#000000" stroke="#000000" points="2247.4252,-993.464 2252.3154,-984.0652 2242.6314,-988.3631 2247.4252,-993.464"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="2673.5" cy="-966.2013" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2673.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 79&#45;91</text>
</g>
<!-- section_6&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>section_6&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1949.9445,-1151.6187C2059.8967,-1142.5989 2281.3009,-1122.6355 2356.5,-1102.6015 2460.9125,-1074.7847 2575.5409,-1018.4639 2634.1693,-987.607"/>
<polygon fill="#000000" stroke="#000000" points="2635.8901,-990.6562 2643.0878,-982.8816 2632.6128,-984.4708 2635.8901,-990.6562"/>
</g>
<!-- section_22 -->
<g id="node23" class="node">
<title>section_22</title>
<ellipse fill="none" stroke="#000000" cx="3861.5" cy="-966.2013" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3861.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 94&#45;125</text>
</g>
<!-- section_6&#45;&gt;section_22 -->
<g id="edge22" class="edge">
<title>section_6&#45;&gt;section_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1951.4935,-1153.9473C2096.6265,-1147.7211 2458.038,-1130.5553 2759.5,-1102.6015 3149.5586,-1066.4325 3614.7103,-1001.7431 3789.9863,-976.5983"/>
<polygon fill="#000000" stroke="#000000" points="3790.7124,-980.03 3800.113,-975.1433 3789.7168,-973.1012 3790.7124,-980.03"/>
</g>
<!-- header_55 -->
<g id="node56" class="node">
<title>header_55</title>
<ellipse fill="none" stroke="#000000" cx="4432.5" cy="-966.2013" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="4432.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor</text>
</g>
<!-- section_7&#45;&gt;header_55 -->
<g id="edge55" class="edge">
<title>section_7&#45;&gt;header_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4535.8235,-1138.5559C4527.7081,-1128.2691 4517.6486,-1114.994 4509.5,-1102.6015 4485.4438,-1066.0165 4461.1875,-1021.4932 4446.4995,-993.4904"/>
<polygon fill="#000000" stroke="#000000" points="4449.4436,-991.5661 4441.7192,-984.3146 4443.2355,-994.8004 4449.4436,-991.5661"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="4550.5" cy="-966.2013" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4550.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>section_7&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4550.5,-1138.3452C4550.5,-1105.0084 4550.5,-1034.0736 4550.5,-994.4564"/>
<polygon fill="#000000" stroke="#000000" points="4554.0001,-994.4024 4550.5,-984.4024 4547.0001,-994.4025 4554.0001,-994.4024"/>
</g>
<!-- codeblock_57 -->
<g id="node58" class="node">
<title>codeblock_57</title>
<ellipse fill="none" stroke="#000000" cx="4710.5" cy="-966.2013" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4710.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 130&#45;139</text>
</g>
<!-- section_7&#45;&gt;codeblock_57 -->
<g id="edge57" class="edge">
<title>section_7&#45;&gt;codeblock_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4565.5524,-1138.6891C4594.0221,-1104.8102 4655.8483,-1031.237 4688.8001,-992.0242"/>
<polygon fill="#000000" stroke="#000000" points="4691.6171,-994.1124 4695.371,-984.2048 4686.258,-989.6089 4691.6171,-994.1124"/>
</g>
<!-- codeblock_58 -->
<g id="node59" class="node">
<title>codeblock_58</title>
<ellipse fill="none" stroke="#000000" cx="4942.5" cy="-966.2013" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4942.5" y="-962.0013" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 141&#45;143</text>
</g>
<!-- section_7&#45;&gt;codeblock_58 -->
<g id="edge58" class="edge">
<title>section_7&#45;&gt;codeblock_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4615.3219,-1147.2534C4679.9488,-1137.1698 4774.1158,-1120.183 4806.5,-1102.6015 4856.7338,-1075.3294 4900.5169,-1023.6669 4924.0684,-992.3429"/>
<polygon fill="#000000" stroke="#000000" points="4927.0413,-994.2089 4930.1632,-984.0844 4921.409,-990.0522 4927.0413,-994.2089"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="926.5,-655.4023 532.5,-655.4023 532.5,-599.5994 926.5,-599.5994 926.5,-655.4023"/>
<text text-anchor="middle" x="729.5" y="-608.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;Here we need a proper recursive parser. &#160;Eventually.</text>
</g>
<!-- raw_9&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>raw_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M729.5,-947.9913C729.5,-894.6888 729.5,-738.1795 729.5,-665.453"/>
<polygon fill="#000000" stroke="#000000" points="733.0001,-665.353 729.5,-655.3531 726.0001,-665.3531 733.0001,-665.353"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1198.5,-645.5009 1056.5,-645.5009 1056.5,-609.5009 1198.5,-609.5009 1198.5,-645.5009"/>
<text text-anchor="middle" x="1127.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">** Bookend parsing</text>
</g>
<!-- header_13&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>header_13&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1340.8799,-948.1963C1324.2773,-920.8771 1290.248,-868.0886 1253.5,-829.8012 1235.5232,-811.0712 1223.7749,-814.0274 1207.5,-793.8012 1172.7673,-750.6357 1148.4542,-689.903 1136.3325,-655.0334"/>
<polygon fill="#000000" stroke="#000000" points="1139.6274,-653.851 1133.1009,-645.505 1132.9983,-656.0994 1139.6274,-653.851"/>
</g>
<!-- raw_24 -->
<g id="node25" class="node">
<title>raw_24</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_14&#45;&gt;raw_24 -->
<g id="edge24" class="edge">
<title>prose_14&#45;&gt;raw_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1490.5722,-948.1681C1489.6542,-918.8351 1483.3479,-860.9403 1449.5,-829.8012 1392.6625,-777.5121 1334.2335,-848.2886 1279.5,-793.8012 1242.8205,-757.2866 1239.4853,-692.8583 1241.0335,-655.8276"/>
<polygon fill="#000000" stroke="#000000" points="1244.5351,-655.8979 1241.6074,-645.7156 1237.5463,-655.5012 1244.5351,-655.8979"/>
</g>
<!-- raw_26 -->
<g id="node27" class="node">
<title>raw_26</title>
<ellipse fill="none" stroke="#000000" cx="1315.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1315.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_26 -->
<g id="edge26" class="edge">
<title>prose_15&#45;&gt;raw_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1572.6115,-948.1251C1571.75,-918.7304 1565.5231,-860.7488 1531.5,-829.8012 1471.1481,-774.9045 1409.6425,-851.0327 1351.5,-793.8012 1314.5193,-757.3998 1311.3389,-692.6541 1312.9848,-655.6011"/>
<polygon fill="#000000" stroke="#000000" points="1316.4861,-655.6818 1313.5855,-645.4918 1309.4985,-655.2666 1316.4861,-655.6818"/>
</g>
<!-- link_27 -->
<g id="node28" class="node">
<title>link_27</title>
<ellipse fill="none" stroke="#000000" cx="1387.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1387.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">link</text>
</g>
<!-- prose_15&#45;&gt;link_27 -->
<g id="edge27" class="edge">
<title>prose_15&#45;&gt;link_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1570.85,-948.211C1567.5312,-920.4446 1557.9418,-866.5227 1531.5,-829.8012 1515.2876,-807.2859 1499.0645,-814.42 1480.5,-793.8012 1442.0223,-751.0655 1412.9174,-689.6849 1398.199,-654.688"/>
<polygon fill="#000000" stroke="#000000" points="1401.3105,-653.0521 1394.2657,-645.1387 1394.838,-655.7181 1401.3105,-653.0521"/>
</g>
<!-- raw_28 -->
<g id="node29" class="node">
<title>raw_28</title>
<ellipse fill="none" stroke="#000000" cx="1516.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1516.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_15&#45;&gt;raw_28 -->
<g id="edge28" class="edge">
<title>prose_15&#45;&gt;raw_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1569.4892,-947.9913C1560.2595,-892.1682 1532.3139,-723.147 1521.1653,-655.7177"/>
<polygon fill="#000000" stroke="#000000" points="1524.6101,-655.096 1519.5257,-645.8009 1517.7039,-656.2379 1524.6101,-655.096"/>
</g>
<!-- raw_35 -->
<g id="node36" class="node">
<title>raw_35</title>
<ellipse fill="none" stroke="#000000" cx="1804.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1804.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_16&#45;&gt;raw_35 -->
<g id="edge35" class="edge">
<title>prose_16&#45;&gt;raw_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1804.5,-947.9913C1804.5,-892.2831 1804.5,-723.8421 1804.5,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="1808.0001,-655.8009 1804.5,-645.8009 1801.0001,-655.8009 1808.0001,-655.8009"/>
</g>
<!-- raw_37 -->
<g id="node38" class="node">
<title>raw_37</title>
<ellipse fill="none" stroke="#000000" cx="1891.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1891.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_17&#45;&gt;raw_37 -->
<g id="edge37" class="edge">
<title>prose_17&#45;&gt;raw_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1886.7688,-947.9913C1887.5912,-892.2831 1890.0778,-723.8421 1891.0773,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="1894.5818,-655.8515 1891.2298,-645.8009 1887.5825,-655.7481 1894.5818,-655.8515"/>
</g>
<!-- raw_39 -->
<g id="node40" class="node">
<title>raw_39</title>
<ellipse fill="none" stroke="#000000" cx="1970.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="1970.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_18&#45;&gt;raw_39 -->
<g id="edge39" class="edge">
<title>prose_18&#45;&gt;raw_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1968.6075,-947.9913C1968.9365,-892.2831 1969.9311,-723.8421 1970.3309,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="1973.8327,-655.8214 1970.3919,-645.8009 1966.8329,-655.78 1973.8327,-655.8214"/>
</g>
<!-- raw_41 -->
<g id="node42" class="node">
<title>raw_41</title>
<ellipse fill="none" stroke="#000000" cx="2045.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="2045.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_19&#45;&gt;raw_41 -->
<g id="edge41" class="edge">
<title>prose_19&#45;&gt;raw_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2050.2312,-947.9913C2049.4088,-892.2831 2046.9222,-723.8421 2045.9227,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="2049.4175,-655.7481 2045.7702,-645.8009 2042.4182,-655.8515 2049.4175,-655.7481"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="2632,-793.6017 2091,-793.6017 2091,-461.4 2632,-461.4 2632,-793.6017"/>
<text text-anchor="middle" x="2361.5" y="-778.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function equal_strings(s, i, a, b)</text>
<text text-anchor="middle" x="2361.5" y="-763.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns true if a and b are equal.</text>
<text text-anchor="middle" x="2361.5" y="-747.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; s and i are not used, provided because expected by Cb.</text>
<text text-anchor="middle" x="2361.5" y="-732.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return a == b</text>
<text text-anchor="middle" x="2361.5" y="-717.001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2361.5" y="-685.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local function bookends(sigil)</text>
<text text-anchor="middle" x="2361.5" y="-670.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;local Cg, C, P, Cmt, Cb = L.Cg, L.C, L.P, L.Cmt, L.Cb</text>
<text text-anchor="middle" x="2361.5" y="-654.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Returns a pair of patterns, _open and _close,</text>
<text text-anchor="middle" x="2361.5" y="-639.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; which will match a brace of sigil.</text>
<text text-anchor="middle" x="2361.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; sigil must be a string. </text>
<text text-anchor="middle" x="2361.5" y="-608.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _open = Cg(C(P(sigil)^1), sigil .. &quot;_init&quot;)</text>
<text text-anchor="middle" x="2361.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local _close = &#160;Cmt(C(P(sigil)^1) * Cb(sigil .. &quot;_init&quot;), equal_strings)</text>
<text text-anchor="middle" x="2361.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return _open, _close</text>
<text text-anchor="middle" x="2361.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2361.5" y="-531.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local bold_open, bold_close &#160;&#160;&#160;&#160;= &#160;bookends(&quot;*&quot;)</text>
<text text-anchor="middle" x="2361.5" y="-515.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local italic_open, italic_close = &#160;bookends(&quot;/&quot;)</text>
<text text-anchor="middle" x="2361.5" y="-500.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local under_open, under_close &#160;&#160;= &#160;bookends(&quot;_&quot;)</text>
<text text-anchor="middle" x="2361.5" y="-484.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local strike_open, strike_close = &#160;bookends(&quot;&#45;&quot;)</text>
<text text-anchor="middle" x="2361.5" y="-469.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local lit_open, lit_close &#160;&#160;&#160;&#160;&#160;&#160;= &#160;bookends(&quot;=&quot;)</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_20&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2275.3926,-947.9913C2282.9986,-919.6817 2298.4265,-862.2594 2314.1495,-803.7386"/>
<polygon fill="#000000" stroke="#000000" points="2317.5622,-804.5253 2316.7769,-793.9596 2310.8019,-802.709 2317.5622,-804.5253"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="2974.5,-716.4017 2650.5,-716.4017 2650.5,-538.6001 2974.5,-538.6001 2974.5,-716.4017"/>
<text text-anchor="middle" x="2812.5" y="-701.001" font-family="Inconsolata" font-size="14.00" fill="#000000">function Pr.toMarkdown(prose)</text>
<text text-anchor="middle" x="2812.5" y="-685.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2812.5" y="-670.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;for _, node in ipairs(prose) do</text>
<text text-anchor="middle" x="2812.5" y="-654.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if node.toMarkdown then</text>
<text text-anchor="middle" x="2812.5" y="-639.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. node:toMarkdown()</text>
<text text-anchor="middle" x="2812.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif node.id == &quot;raw&quot; then</text>
<text text-anchor="middle" x="2812.5" y="-608.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase &#160;.. node:toValue()</text>
<text text-anchor="middle" x="2812.5" y="-593.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2812.5" y="-577.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="2812.5" y="-562.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return phrase</text>
<text text-anchor="middle" x="2812.5" y="-547.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_21&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2680.9732,-947.9913C2697.8797,-906.7955 2740.086,-803.9517 2772.1653,-725.7842"/>
<polygon fill="#000000" stroke="#000000" points="2775.466,-726.9599 2776.0248,-716.3798 2768.9902,-724.3022 2775.466,-726.9599"/>
</g>
<!-- header_45 -->
<g id="node46" class="node">
<title>header_45</title>
<ellipse fill="none" stroke="#000000" cx="3728.5" cy="-627.5009" rx="82.2061" ry="18"/>
<text text-anchor="middle" x="3728.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : prose grammar</text>
</g>
<!-- section_22&#45;&gt;header_45 -->
<g id="edge45" class="edge">
<title>section_22&#45;&gt;header_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3854.3493,-947.9913C3832.3838,-892.0534 3765.7847,-722.451 3739.4172,-655.3028"/>
<polygon fill="#000000" stroke="#000000" points="3742.599,-653.8297 3735.686,-645.8009 3736.0833,-656.3883 3742.599,-653.8297"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="3861.5" cy="-627.5009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3861.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_22&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_22&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3861.5,-947.9913C3861.5,-892.2831 3861.5,-723.8421 3861.5,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="3865.0001,-655.8009 3861.5,-645.8009 3858.0001,-655.8009 3865.0001,-655.8009"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3943.5" cy="-627.5009" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3943.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_22&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>section_22&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3865.9087,-947.9913C3879.4551,-892.0378 3920.5353,-722.3566 3936.7827,-655.2468"/>
<polygon fill="#000000" stroke="#000000" points="3940.2177,-655.9327 3939.169,-645.3898 3933.4142,-654.2855 3940.2177,-655.9327"/>
</g>
<!-- codeblock_48 -->
<g id="node49" class="node">
<title>codeblock_48</title>
<ellipse fill="none" stroke="#000000" cx="4157.5" cy="-627.5009" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4157.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 101&#45;123</text>
</g>
<!-- section_22&#45;&gt;codeblock_48 -->
<g id="edge48" class="edge">
<title>section_22&#45;&gt;codeblock_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3876.9975,-948.4682C3925.9355,-892.4705 4077.3345,-719.231 4134.9378,-653.3178"/>
<polygon fill="#000000" stroke="#000000" points="4137.8537,-655.3 4141.7988,-645.4671 4132.5829,-650.6937 4137.8537,-655.3"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="527,-301.3007 0,-301.3007 0,-230.7 527,-230.7 527,-301.3007"/>
<text text-anchor="middle" x="263.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;We need to generate parsers to match sequences of single characters, so</text>
<text text-anchor="middle" x="263.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">that *bold*, **bold**, ***bold*** etc all work correctly.</text>
</g>
<!-- raw_24&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_24&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1245.8646,-609.5019C1249.3052,-574.704 1251.1256,-498.3629 1207.5,-461.2006 1150.5789,-412.7125 607.1187,-446.6918 535.5,-425.2006 452.9215,-400.4206 368.9511,-345.832 316.5872,-307.5176"/>
<polygon fill="#000000" stroke="#000000" points="318.5829,-304.6405 308.4595,-301.5152 314.4244,-310.2714 318.5829,-304.6405"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="890,-285.9024 545,-285.9024 545,-246.0982 890,-246.0982 890,-285.9024"/>
<text text-anchor="middle" x="717.5" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">Bookends are a fun construct borrowed from the </text>
</g>
<!-- raw_26&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>raw_26&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1317.7539,-609.3899C1320.9394,-574.7418 1322.2455,-499.1499 1279.5,-461.2006 1216.0685,-404.8862 977.4082,-458.7442 899.5,-425.2006 831.2122,-395.799 770.3024,-330.8833 739.2456,-293.6641"/>
<polygon fill="#000000" stroke="#000000" points="741.7733,-291.2272 732.721,-285.722 736.3644,-295.6707 741.7733,-291.2272"/>
</g>
<!-- anchortext_30 -->
<g id="node31" class="node">
<title>anchortext_30</title>
<ellipse fill="none" stroke="#000000" cx="959.5" cy="-266.0003" rx="51.3018" ry="18"/>
<text text-anchor="middle" x="959.5" y="-261.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">anchortext</text>
</g>
<!-- link_27&#45;&gt;anchortext_30 -->
<g id="edge30" class="edge">
<title>link_27&#45;&gt;anchortext_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1389.7077,-609.4415C1392.8134,-574.8828 1393.9872,-499.4388 1351.5,-461.2006 1241.1795,-361.913 1136.8244,-516.1051 1019.5,-425.2006 978.5925,-393.5049 965.575,-330.6251 961.4328,-294.0918"/>
<polygon fill="#000000" stroke="#000000" points="964.9119,-293.7067 960.4474,-284.0985 957.9457,-294.3937 964.9119,-293.7067"/>
</g>
<!-- url_31 -->
<g id="node32" class="node">
<title>url_31</title>
<ellipse fill="none" stroke="#000000" cx="1055.5" cy="-266.0003" rx="27" ry="18"/>
<text text-anchor="middle" x="1055.5" y="-261.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">url</text>
</g>
<!-- link_27&#45;&gt;url_31 -->
<g id="edge31" class="edge">
<title>link_27&#45;&gt;url_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1389.6058,-609.5531C1392.535,-575.1875 1393.4172,-500.0628 1351.5,-461.2006 1265.9519,-381.8872 1177.4122,-504.1194 1091.5,-425.2006 1055.1889,-391.8452 1051.6071,-330.2857 1053.038,-294.2715"/>
<polygon fill="#000000" stroke="#000000" points="1056.5499,-294.1537 1053.6124,-283.9742 1049.5608,-293.7638 1056.5499,-294.1537"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="1634.5,-293.2008 1100.5,-293.2008 1100.5,-238.7998 1634.5,-238.7998 1634.5,-293.2008"/>
<text text-anchor="middle" x="1367.5" y="-277.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">]]</text>
<text text-anchor="middle" x="1367.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">model for Lua long strings. &#160;The GGG/Pegylator form of a bookend construct</text>
<text text-anchor="middle" x="1367.5" y="-247.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">is </text>
</g>
<!-- raw_28&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>raw_28&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1509.3134,-610.0649C1486.3177,-554.2733 1414.2017,-379.3069 1382.595,-302.6235"/>
<polygon fill="#000000" stroke="#000000" points="1385.8156,-301.2524 1378.7689,-293.3407 1379.3438,-303.9199 1385.8156,-301.2524"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-53.4 912,-53.4 912,-17.4 1005,-17.4 1005,-53.4"/>
<text text-anchor="middle" x="958.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">LPEG manual</text>
</g>
<!-- anchortext_30&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>anchortext_30&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M959.4215,-247.9055C959.2481,-207.9134 958.8311,-111.7544 958.6228,-63.7123"/>
<polygon fill="#000000" stroke="#000000" points="962.1215,-63.3955 958.5781,-53.4108 955.1216,-63.4259 962.1215,-63.3955"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="1088,-53.4 1023,-53.4 1023,-17.4 1088,-17.4 1088,-53.4"/>
<text text-anchor="middle" x="1055.5" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000">httk://</text>
</g>
<!-- url_31&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>url_31&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1055.5,-247.9055C1055.5,-207.9134 1055.5,-111.7544 1055.5,-63.7123"/>
<polygon fill="#000000" stroke="#000000" points="1059.0001,-63.4108 1055.5,-53.4108 1052.0001,-63.4108 1059.0001,-63.4108"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="1956,-301.2007 1653,-301.2007 1653,-230.7999 1956,-230.7999 1956,-301.2007"/>
<text text-anchor="middle" x="1804.5" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">~#!peg</text>
<text text-anchor="middle" x="1804.5" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;bookend = &quot;`&quot;:a !&quot;`&quot;:a pattern &#160;&quot;`&quot;:a</text>
<text text-anchor="middle" x="1804.5" y="-239.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">~#/peg</text>
</g>
<!-- raw_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>raw_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1804.5,-609.077C1804.5,-554.342 1804.5,-391.545 1804.5,-311.4848"/>
<polygon fill="#000000" stroke="#000000" points="1808.0001,-311.2188 1804.5,-301.2188 1801.0001,-311.2189 1808.0001,-311.2188"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2522.5,-301.2007 1974.5,-301.2007 1974.5,-230.7999 2522.5,-230.7999 2522.5,-301.2007"/>
<text text-anchor="middle" x="2248.5" y="-269.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">The =lpeg= engine doesn&#39;t model this directly but it&#39;s possible to provide</text>
<text text-anchor="middle" x="2248.5" y="-254.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">it. &#160;We only need the subset of this where =a= is unique, that is, =pattern=</text>
<text text-anchor="middle" x="2248.5" y="-239.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">does not contain =bookend= at any level of expansion. </text>
</g>
<!-- raw_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>raw_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1891.897,-609.4016C1893.4728,-576.7127 1900.8562,-506.9759 1934.5,-461.2006 1987.7069,-388.8077 2076.5958,-337.2248 2146.2441,-305.3365"/>
<polygon fill="#000000" stroke="#000000" points="2147.8271,-308.4622 2155.504,-301.1604 2144.9492,-302.0811 2147.8271,-308.4622"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="3096,-308.6014 2541,-308.6014 2541,-223.3993 3096,-223.3993 3096,-308.6014"/>
<text text-anchor="middle" x="2818.5" y="-277.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">GGG being a specification format needn&#39;t respect this limitation. &#160;Orb</text>
<text text-anchor="middle" x="2818.5" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">does so by design. &#160;It is a simple consquence of the sort of markup we are</text>
<text text-anchor="middle" x="2818.5" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">using; there is no need to parse ***bold **inside bold** still bold*** twice,</text>
<text text-anchor="middle" x="2818.5" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">and this generalizes to all text styles. </text>
</g>
<!-- raw_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>raw_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1968.5423,-609.5202C1965.8735,-574.7544 1965.6711,-498.4669 2009.5,-461.2006 2098.0832,-385.8811 2420.0019,-458.1881 2531.5,-425.2006 2612.313,-401.2914 2695.5479,-351.8673 2751.43,-314.3925"/>
<polygon fill="#000000" stroke="#000000" points="2753.4933,-317.2224 2759.8158,-308.7208 2749.5716,-311.4241 2753.4933,-317.2224"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="3662.5,-301.3007 3114.5,-301.3007 3114.5,-230.7 3662.5,-230.7 3662.5,-301.3007"/>
<text text-anchor="middle" x="3388.5" y="-270.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">We do have to wire them up so that we don&#39;t cross the streams. &#160;Sans macros.</text>
<text text-anchor="middle" x="3388.5" y="-254.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">By hand. </text>
</g>
<!-- raw_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>raw_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2043.0757,-609.4312C2039.5306,-574.5094 2037.5354,-497.9612 2081.5,-461.2006 2168.7546,-388.2434 2994.9765,-455.8717 3104.5,-425.2006 3190.7007,-401.0608 3278.9369,-345.8613 3333.7006,-307.2697"/>
<polygon fill="#000000" stroke="#000000" points="3335.7436,-310.1117 3341.8651,-301.4642 3331.6871,-304.4069 3335.7436,-310.1117"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="3816,-284.0003 3681,-284.0003 3681,-248.0003 3816,-248.0003 3816,-284.0003"/>
<text text-anchor="middle" x="3748.5" y="-262.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">*** prose grammar</text>
</g>
<!-- header_45&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>header_45&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3729.5193,-609.077C3732.7826,-550.0925 3742.9888,-365.6151 3746.9275,-294.423"/>
<polygon fill="#000000" stroke="#000000" points="3750.4249,-294.5652 3747.4828,-284.3871 3743.4356,-294.1784 3750.4249,-294.5652"/>
</g>
<!-- raw_50 -->
<g id="node51" class="node">
<title>raw_50</title>
<ellipse fill="none" stroke="#000000" cx="3861.5" cy="-266.0003" rx="27" ry="18"/>
<text text-anchor="middle" x="3861.5" y="-261.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_46&#45;&gt;raw_50 -->
<g id="edge50" class="edge">
<title>prose_46&#45;&gt;raw_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3861.5,-609.077C3861.5,-550.0925 3861.5,-365.6151 3861.5,-294.423"/>
<polygon fill="#000000" stroke="#000000" points="3865.0001,-294.387 3861.5,-284.3871 3858.0001,-294.3871 3865.0001,-294.387"/>
</g>
<!-- raw_52 -->
<g id="node53" class="node">
<title>raw_52</title>
<ellipse fill="none" stroke="#000000" cx="3938.5" cy="-266.0003" rx="27" ry="18"/>
<text text-anchor="middle" x="3938.5" y="-261.8003" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_47&#45;&gt;raw_52 -->
<g id="edge52" class="edge">
<title>prose_47&#45;&gt;raw_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3943.2452,-609.077C3942.4293,-550.0925 3939.8778,-365.6151 3938.8931,-294.423"/>
<polygon fill="#000000" stroke="#000000" points="3942.3924,-294.3377 3938.7543,-284.3871 3935.393,-294.4346 3942.3924,-294.3377"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="4475.5,-425.4011 3983.5,-425.4011 3983.5,-106.5996 4475.5,-106.5996 4475.5,-425.4011"/>
<text text-anchor="middle" x="4229.5" y="-410.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local function prose_gm(_ENV)</text>
<text text-anchor="middle" x="4229.5" y="-394.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;START &quot;prose&quot;</text>
<text text-anchor="middle" x="4229.5" y="-379.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;SUPPRESS (&quot;anchorboxed&quot;, &quot;urlboxed&quot;)</text>
<text text-anchor="middle" x="4229.5" y="-363.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;prose = (V&quot;link&quot; + V&quot;raw&quot;)^1</text>
<text text-anchor="middle" x="4229.5" y="-348.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;link = m.sel * m.WS * V&quot;anchorboxed&quot; * m.WS * V&quot;urlboxed&quot; * m.ser</text>
<text text-anchor="middle" x="4229.5" y="-333.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;anchorboxed = m.sel * m.WS * V&quot;anchortext&quot; * m.WS * m.ser</text>
<text text-anchor="middle" x="4229.5" y="-317.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;urlboxed = m.sel * m.WS * V&quot;url&quot; * m.WS * m.ser</text>
<text text-anchor="middle" x="4229.5" y="-302.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;anchortext = m.anchor_text</text>
<text text-anchor="middle" x="4229.5" y="-286.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;url = m.url</text>
<text text-anchor="middle" x="4229.5" y="-255.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;raw = (P(1) &#45; m.link)^1</text>
<text text-anchor="middle" x="4229.5" y="-240.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4229.5" y="-208.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local function proseBuild(prose, str)</text>
<text text-anchor="middle" x="4229.5" y="-193.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return setmetatable(prose, {__index = Pr })</text>
<text text-anchor="middle" x="4229.5" y="-177.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4229.5" y="-146.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">local parse = Grammar(prose_gm, { prose = proseBuild,</text>
<text text-anchor="middle" x="4229.5" y="-131.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;link &#160;= Link }) &#160;</text>
</g>
<!-- codeblock_48&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>codeblock_48&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4161.1695,-609.077C4167.6974,-576.3015 4181.9426,-504.7786 4195.7458,-435.4749"/>
<polygon fill="#000000" stroke="#000000" points="4199.2573,-435.7618 4197.7781,-425.2708 4192.3921,-434.3944 4199.2573,-435.7618"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="3893.5,-70.7004 3345.5,-70.7004 3345.5,-.0997 3893.5,-.0997 3893.5,-70.7004"/>
<text text-anchor="middle" x="3619.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;The Prose module is the first one to use our shiny&#45;new Node module. &#160;Which</text>
<text text-anchor="middle" x="3619.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">finally works the way I intend it to and I&#39;m pretty happy about this. </text>
</g>
<!-- raw_50&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>raw_50&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3862.5683,-247.9644C3863.4762,-215.5319 3860.6285,-147.0086 3824.5,-106.8001 3814.3446,-95.4978 3790.2482,-84.2318 3762.0006,-74.1004"/>
<polygon fill="#000000" stroke="#000000" points="3762.8709,-70.6973 3752.276,-70.7097 3760.5661,-77.307 3762.8709,-70.6973"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4439,-55.3021 3912,-55.3021 3912,-15.4979 4439,-15.4979 4439,-55.3021"/>
<text text-anchor="middle" x="4175.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">It&#39;s pure link&#45;or&#45;raw, but it has everything it needs to be so much more.</text>
</g>
<!-- raw_52&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>raw_52&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3937.3265,-247.9964C3936.2279,-215.6154 3938.6652,-147.1718 3974.5,-106.8001 3994.3226,-84.4678 4021.5993,-69.1202 4049.6679,-58.5728"/>
<polygon fill="#000000" stroke="#000000" points="4050.9605,-61.8279 4059.2075,-55.1768 4048.6128,-55.2333 4050.9605,-61.8279"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4489.5,-645.5009 4375.5,-645.5009 4375.5,-609.5009 4489.5,-609.5009 4489.5,-645.5009"/>
<text text-anchor="middle" x="4432.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">** Constructor</text>
</g>
<!-- header_55&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>header_55&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4432.5,-947.9913C4432.5,-892.2831 4432.5,-723.8421 4432.5,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="4436.0001,-655.8009 4432.5,-645.8009 4429.0001,-655.8009 4436.0001,-655.8009"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="4542.5" cy="-627.5009" rx="27" ry="18"/>
<text text-anchor="middle" x="4542.5" y="-623.3009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_56&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_56&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4550.0699,-947.9913C4548.7541,-892.2831 4544.7755,-723.8421 4543.1763,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="4546.6675,-655.7154 4542.9322,-645.8009 4539.6694,-655.8808 4546.6675,-655.7154"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4863,-693.2013 4588,-693.2013 4588,-561.8005 4863,-561.8005 4863,-693.2013"/>
<text text-anchor="middle" x="4725.5" y="-677.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Prose, block)</text>
<text text-anchor="middle" x="4725.5" y="-662.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;\n&quot;</text>
<text text-anchor="middle" x="4725.5" y="-647.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,l in ipairs(block.lines) do</text>
<text text-anchor="middle" x="4725.5" y="-631.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;phrase = phrase .. l .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4725.5" y="-616.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4725.5" y="-600.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local prose = parse(phrase, 0) </text>
<text text-anchor="middle" x="4725.5" y="-585.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return prose</text>
<text text-anchor="middle" x="4725.5" y="-570.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_57&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_57&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4711.3065,-947.9913C4713.3098,-902.7549 4718.6053,-783.1843 4722.1308,-703.5774"/>
<polygon fill="#000000" stroke="#000000" points="4725.6486,-703.2519 4722.5945,-693.1068 4718.6554,-702.9422 4725.6486,-703.2519"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="5065.5,-645.5009 4881.5,-645.5009 4881.5,-609.5009 5065.5,-609.5009 5065.5,-645.5009"/>
<text text-anchor="middle" x="4973.5" y="-624.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(pr, new)</text>
</g>
<!-- codeblock_58&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>codeblock_58&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4944.1667,-947.9913C4949.2655,-892.2831 4964.6822,-723.8421 4970.8792,-656.1352"/>
<polygon fill="#000000" stroke="#000000" points="4974.399,-656.0783 4971.8251,-645.8009 4967.4281,-655.4402 4974.399,-656.0783"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="4825,-293.9018 4494,-293.9018 4494,-238.0988 4825,-238.0988 4825,-293.9018"/>
<text text-anchor="middle" x="4659.5" y="-246.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45; [ ] #todo smuggle in that offset in =parse=</text>
</g>
<!-- raw_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4545.3408,-609.2595C4550.3982,-578.355 4562.0034,-513.9202 4578.5,-461.2006 4596.1769,-404.7091 4623.7423,-341.8969 4641.7129,-303.1653"/>
<polygon fill="#000000" stroke="#000000" points="4645.0006,-304.3971 4646.0631,-293.8556 4638.6587,-301.4336 4645.0006,-304.3971"/>
</g>
</g>
</svg>