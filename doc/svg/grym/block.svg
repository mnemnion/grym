<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="6246pt" height="1182pt"
 viewBox="0.00 0.00 6245.50 1181.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1177.6014)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1177.6014 6241.5,-1177.6014 6241.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="2360.5" cy="-1155.6014" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="2360.5" y="-1151.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 180</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="2360.5" cy="-1083.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2360.5" y="-1079.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;126</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2360.5,-1137.4327C2360.5,-1129.7323 2360.5,-1120.5757 2360.5,-1112.018"/>
<polygon fill="#000000" stroke="#000000" points="2364.0001,-1112.0146 2360.5,-1102.0146 2357.0001,-1112.0147 2364.0001,-1112.0146"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1947.5" cy="-1011.6014" rx="75.4657" ry="18"/>
<text text-anchor="middle" x="1947.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Block module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2302.8875,-1074.9289C2237.2758,-1064.8638 2126.9328,-1047.364 2032.5,-1029.6014 2026.2738,-1028.4302 2019.8027,-1027.1589 2013.3346,-1025.8517"/>
<polygon fill="#000000" stroke="#000000" points="2013.7076,-1022.3555 2003.2086,-1023.7774 2012.3027,-1029.2131 2013.7076,-1022.3555"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="2073.5" cy="-1011.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2073.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2303.4736,-1074.3856C2253.0628,-1065.4628 2177.9023,-1050.2531 2114.5,-1029.6014 2112.2548,-1028.8701 2109.9652,-1028.0589 2107.6733,-1027.1971"/>
<polygon fill="#000000" stroke="#000000" points="2108.9305,-1023.9303 2098.3468,-1023.4442 2106.3174,-1030.4243 2108.9305,-1023.9303"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="2155.5" cy="-1011.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2155.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2316.2453,-1070.2902C2283.0098,-1059.99 2236.5282,-1044.9378 2196.5,-1029.6014 2194.295,-1028.7565 2192.0361,-1027.8588 2189.767,-1026.9326"/>
<polygon fill="#000000" stroke="#000000" points="2191.069,-1023.6832 2180.4945,-1023.0272 2188.3519,-1030.1344 2191.069,-1023.6832"/>
</g>
<!-- prose_5 -->
<g id="node6" class="node">
<title>prose_5</title>
<ellipse fill="none" stroke="#000000" cx="2237.5" cy="-1011.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2237.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;prose_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2332.5894,-1067.2635C2313.6209,-1056.1599 2288.5028,-1041.4567 2268.8461,-1029.9503"/>
<polygon fill="#000000" stroke="#000000" points="2270.3623,-1026.7823 2259.964,-1024.751 2266.826,-1032.8234 2270.3623,-1026.7823"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="2319.5" cy="-1011.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2319.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2350.3652,-1065.8036C2345.5632,-1057.3709 2339.7315,-1047.1299 2334.4358,-1037.8302"/>
<polygon fill="#000000" stroke="#000000" points="2337.3667,-1035.9039 2329.3768,-1028.946 2331.2838,-1039.3678 2337.3667,-1035.9039"/>
</g>
<!-- prose_7 -->
<g id="node8" class="node">
<title>prose_7</title>
<ellipse fill="none" stroke="#000000" cx="2401.5" cy="-1011.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2401.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;prose_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2370.6348,-1065.8036C2375.4368,-1057.3709 2381.2685,-1047.1299 2386.5642,-1037.8302"/>
<polygon fill="#000000" stroke="#000000" points="2389.7162,-1039.3678 2391.6232,-1028.946 2383.6333,-1035.9039 2389.7162,-1039.3678"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2767.5" cy="-1011.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2767.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 33&#45;50</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2415.8134,-1073.8162C2490.432,-1060.6159 2623.1077,-1037.145 2702.4311,-1023.1123"/>
<polygon fill="#000000" stroke="#000000" points="2703.0701,-1026.5537 2712.3075,-1021.3652 2701.8507,-1019.6607 2703.0701,-1026.5537"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3344.5" cy="-1011.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3344.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 51&#45;75</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2424.3048,-1078.9327C2599.0185,-1066.1488 3084.5294,-1030.6236 3270.6112,-1017.0079"/>
<polygon fill="#000000" stroke="#000000" points="3271.122,-1020.4799 3280.8399,-1016.2594 3270.6111,-1013.4986 3271.122,-1020.4799"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="4280.5" cy="-1011.6014" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4280.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 76&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2425.7584,-1081.1542C2716.5711,-1070.2487 3893.7664,-1026.1039 4204.8156,-1014.4395"/>
<polygon fill="#000000" stroke="#000000" points="4205.2148,-1017.9271 4215.0766,-1014.0548 4204.9524,-1010.932 4205.2148,-1017.9271"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="5440.5" cy="-1011.6014" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5440.5" y="-1007.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 127&#45;180</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2426.2551,-1082.0642C2823.9404,-1072.7677 4905.6002,-1024.1055 5354.9462,-1013.6013"/>
<polygon fill="#000000" stroke="#000000" points="5355.34,-1017.0932 5365.2555,-1013.3603 5355.1764,-1010.0951 5355.34,-1017.0932"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="2008,-957.6014 1887,-957.6014 1887,-921.6014 2008,-921.6014 2008,-957.6014"/>
<text text-anchor="middle" x="1947.5" y="-936.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Block module</text>
</g>
<!-- header_2&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>header_2&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1947.5,-993.4327C1947.5,-985.7323 1947.5,-976.5757 1947.5,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="1951.0001,-968.0146 1947.5,-958.0146 1944.0001,-968.0147 1951.0001,-968.0146"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="2063.5" cy="-939.6014" rx="27" ry="18"/>
<text text-anchor="middle" x="2063.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2070.9766,-993.4327C2069.9071,-985.7323 2068.6353,-976.5757 2067.4468,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="2070.8999,-967.438 2066.0574,-958.0146 2063.9664,-968.4011 2070.8999,-967.438"/>
</g>
<!-- raw_15 -->
<g id="node16" class="node">
<title>raw_15</title>
<ellipse fill="none" stroke="#000000" cx="2145.5" cy="-939.6014" rx="27" ry="18"/>
<text text-anchor="middle" x="2145.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_15 -->
<g id="edge15" class="edge">
<title>prose_4&#45;&gt;raw_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2152.9766,-993.4327C2151.9071,-985.7323 2150.6353,-976.5757 2149.4468,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="2152.8999,-967.438 2148.0574,-958.0146 2145.9664,-968.4011 2152.8999,-967.438"/>
</g>
<!-- raw_17 -->
<g id="node18" class="node">
<title>raw_17</title>
<ellipse fill="none" stroke="#000000" cx="2227.5" cy="-939.6014" rx="27" ry="18"/>
<text text-anchor="middle" x="2227.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_5&#45;&gt;raw_17 -->
<g id="edge17" class="edge">
<title>prose_5&#45;&gt;raw_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2234.9766,-993.4327C2233.9071,-985.7323 2232.6353,-976.5757 2231.4468,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="2234.8999,-967.438 2230.0574,-958.0146 2227.9664,-968.4011 2234.8999,-967.438"/>
</g>
<!-- raw_19 -->
<g id="node20" class="node">
<title>raw_19</title>
<ellipse fill="none" stroke="#000000" cx="2309.5" cy="-939.6014" rx="27" ry="18"/>
<text text-anchor="middle" x="2309.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_19 -->
<g id="edge19" class="edge">
<title>prose_6&#45;&gt;raw_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2316.9766,-993.4327C2315.9071,-985.7323 2314.6353,-976.5757 2313.4468,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="2316.8999,-967.438 2312.0574,-958.0146 2309.9664,-968.4011 2316.8999,-967.438"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="2401.5" cy="-939.6014" rx="27" ry="18"/>
<text text-anchor="middle" x="2401.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_7&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_7&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.5,-993.4327C2401.5,-985.7323 2401.5,-976.5757 2401.5,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="2405.0001,-968.0146 2401.5,-958.0146 2398.0001,-968.0147 2405.0001,-968.0146"/>
</g>
<!-- header_23 -->
<g id="node24" class="node">
<title>header_23</title>
<ellipse fill="none" stroke="#000000" cx="2714.5" cy="-939.6014" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="2714.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_8&#45;&gt;header_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;header_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2754.3989,-993.8036C2748.1091,-985.259 2740.4526,-974.8578 2733.5351,-965.4604"/>
<polygon fill="#000000" stroke="#000000" points="2736.1973,-963.1729 2727.4504,-957.1944 2730.56,-967.3227 2736.1973,-963.1729"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2819.5" cy="-939.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2819.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2780.3539,-993.8036C2786.6172,-985.1314 2794.2616,-974.5469 2801.1274,-965.0403"/>
<polygon fill="#000000" stroke="#000000" points="2804.1344,-966.8546 2807.152,-956.6986 2798.4597,-962.7562 2804.1344,-966.8546"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2978.5" cy="-939.6014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2978.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;48</text>
</g>
<!-- section_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2808.6838,-997.5481C2841.9001,-986.2137 2888.8712,-970.1856 2924.9965,-957.8585"/>
<polygon fill="#000000" stroke="#000000" points="2926.5438,-961.0287 2934.8777,-954.4867 2924.2831,-954.4038 2926.5438,-961.0287"/>
</g>
<!-- header_30 -->
<g id="node31" class="node">
<title>header_30</title>
<ellipse fill="none" stroke="#000000" cx="3267.5" cy="-939.6014" rx="102.5283" ry="18"/>
<text text-anchor="middle" x="3267.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for Blocks</text>
</g>
<!-- section_9&#45;&gt;header_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;header_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3325.8604,-994.1722C3316.2619,-985.1969 3304.3954,-974.1009 3293.8743,-964.2631"/>
<polygon fill="#000000" stroke="#000000" points="3296.1976,-961.6437 3286.5028,-957.3703 3291.4166,-966.7567 3296.1976,-961.6437"/>
</g>
<!-- prose_31 -->
<g id="node32" class="node">
<title>prose_31</title>
<ellipse fill="none" stroke="#000000" cx="3420.5" cy="-939.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3420.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;prose_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3362.8975,-994.1722C3373.0077,-984.5941 3385.6672,-972.6009 3396.5415,-962.2989"/>
<polygon fill="#000000" stroke="#000000" points="3399.2298,-964.5734 3404.0822,-955.155 3394.4156,-959.4917 3399.2298,-964.5734"/>
</g>
<!-- codeblock_32 -->
<g id="node33" class="node">
<title>codeblock_32</title>
<ellipse fill="none" stroke="#000000" cx="3620.5" cy="-939.6014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3620.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;73</text>
</g>
<!-- section_9&#45;&gt;codeblock_32 -->
<g id="edge32" class="edge">
<title>section_9&#45;&gt;codeblock_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3392.2604,-999.1421C3438.4018,-987.1052 3508.5111,-968.8159 3558.8461,-955.685"/>
<polygon fill="#000000" stroke="#000000" points="3559.8438,-959.0419 3568.6365,-953.131 3558.0768,-952.2686 3559.8438,-959.0419"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="4089.5" cy="-939.6014" rx="140.2419" ry="18"/>
<text text-anchor="middle" x="4089.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parse the prose within a block</text>
</g>
<!-- section_10&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_10&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4241.8483,-997.0311C4213.793,-986.4553 4175.4464,-972 4144.2444,-960.238"/>
<polygon fill="#000000" stroke="#000000" points="4145.4016,-956.9338 4134.8097,-956.6815 4142.9324,-963.4839 4145.4016,-956.9338"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="4280.5" cy="-939.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4280.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_10&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_10&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4280.5,-993.4327C4280.5,-985.7323 4280.5,-976.5757 4280.5,-968.018"/>
<polygon fill="#000000" stroke="#000000" points="4284.0001,-968.0146 4280.5,-958.0146 4277.0001,-968.0147 4284.0001,-968.0146"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="4433.5" cy="-939.6014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4433.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;90</text>
</g>
<!-- section_10&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>section_10&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4313.6987,-995.9784C4335.9666,-985.4994 4365.5331,-971.5858 4389.7215,-960.203"/>
<polygon fill="#000000" stroke="#000000" points="4391.4823,-963.2427 4399.0401,-955.8178 4388.5016,-956.9089 4391.4823,-963.2427"/>
</g>
<!-- section_40 -->
<g id="node41" class="node">
<title>section_40</title>
<ellipse fill="none" stroke="#000000" cx="4734.5" cy="-939.6014" rx="70.655" ry="18"/>
<text text-anchor="middle" x="4734.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 92&#45;126</text>
</g>
<!-- section_10&#45;&gt;section_40 -->
<g id="edge40" class="edge">
<title>section_10&#45;&gt;section_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4337.5397,-1002.5554C4420.5523,-989.3904 4574.5192,-964.9728 4664.3552,-950.7257"/>
<polygon fill="#000000" stroke="#000000" points="4665.1201,-954.1482 4674.4484,-949.125 4664.0236,-947.2346 4665.1201,-954.1482"/>
</g>
<!-- header_52 -->
<g id="node53" class="node">
<title>header_52</title>
<ellipse fill="none" stroke="#000000" cx="5123.5" cy="-939.6014" rx="99.6298" ry="18"/>
<text text-anchor="middle" x="5123.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor/module</text>
</g>
<!-- section_11&#45;&gt;header_52 -->
<g id="edge52" class="edge">
<title>section_11&#45;&gt;header_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5385.6447,-999.1421C5332.9612,-987.1762 5253.0727,-969.0311 5195.3366,-955.9176"/>
<polygon fill="#000000" stroke="#000000" points="5196.0752,-952.4963 5185.5483,-953.6944 5194.5247,-959.3224 5196.0752,-952.4963"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="5352.5" cy="-939.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5352.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_11&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5419.1977,-994.1722C5407.0969,-984.2716 5391.8421,-971.7904 5378.9766,-961.264"/>
<polygon fill="#000000" stroke="#000000" points="5380.8802,-958.2993 5370.9242,-954.6757 5376.4475,-963.717 5380.8802,-958.2993"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="5529.5" cy="-939.6014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5529.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 129&#45;151</text>
</g>
<!-- section_11&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>section_11&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5462.0444,-994.1722C5473.4387,-984.9544 5487.598,-973.4997 5499.9978,-963.4683"/>
<polygon fill="#000000" stroke="#000000" points="5502.2723,-966.1302 5507.8455,-957.1196 5497.8697,-960.688 5502.2723,-966.1302"/>
</g>
<!-- prose_55 -->
<g id="node56" class="node">
<title>prose_55</title>
<ellipse fill="none" stroke="#000000" cx="5777.5" cy="-939.6014" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5777.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_11&#45;&gt;prose_55 -->
<g id="edge55" class="edge">
<title>section_11&#45;&gt;prose_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5496.9062,-999.5502C5564.9231,-985.0184 5677.5371,-960.9584 5737.3216,-948.1855"/>
<polygon fill="#000000" stroke="#000000" points="5738.1002,-951.5982 5747.1482,-946.086 5736.6376,-944.7527 5738.1002,-951.5982"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="6005.5" cy="-939.6014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6005.5" y="-935.4014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;179</text>
</g>
<!-- section_11&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>section_11&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5507.2526,-1003.0948C5610.288,-989.9647 5807.9466,-964.7763 5920.8712,-950.3859"/>
<polygon fill="#000000" stroke="#000000" points="5921.382,-953.8492 5930.8593,-949.1131 5920.497,-946.9054 5921.382,-953.8492"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-762.5014 0,-762.5014 0,-676.1008 499,-676.1008 499,-762.5014"/>
<text text-anchor="middle" x="249.5" y="-715.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A Block is the container for the next level of granularity below</text>
<text text-anchor="middle" x="249.5" y="-699.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> a Section. Any Section has a Header and one or more Blocks. Both the</text>
<text text-anchor="middle" x="249.5" y="-684.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Header and the Block may be virtual, that is, without contents.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2041.015,-929.1995C2033.3963,-926.1622 2024.7295,-923.2251 2016.5,-921.6014 1851.9577,-889.1369 667.8125,-934.8762 507.5,-885.6014 431.0202,-862.094 355.5052,-808.9578 306.1301,-769.0327"/>
<polygon fill="#000000" stroke="#000000" points="308.0891,-766.1135 298.1314,-762.495 303.6592,-771.5335 308.0891,-766.1135"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="1016,-754.6014 517,-754.6014 517,-684.0007 1016,-684.0007 1016,-754.6014"/>
<text text-anchor="middle" x="766.5" y="-723.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> The most general premise is that Blocks are delineated by blank line</text>
<text text-anchor="middle" x="766.5" y="-708.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> whitespace. </text>
</g>
<!-- raw_15&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>raw_15&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2123.0365,-929.0544C2115.6945,-926.0875 2107.3953,-923.2284 2099.5,-921.6014 1865.3964,-873.358 1252.6333,-956.9253 1024.5,-885.6014 943.3162,-860.2199 863.0716,-801.8406 814.1547,-761.4782"/>
<polygon fill="#000000" stroke="#000000" points="816.2035,-758.6294 806.2816,-754.9135 811.7207,-764.0057 816.2035,-758.6294"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1575,-754.5015 1034,-754.5015 1034,-684.1007 1575,-684.1007 1575,-754.5015"/>
<text text-anchor="middle" x="1304.5" y="-723.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> A paragraph of prose is the simplest block, and the default. &#160;A list with</text>
<text text-anchor="middle" x="1304.5" y="-707.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> a tag line is a block also, as is a table. &#160;Most importantly for our short</text>
<text text-anchor="middle" x="1304.5" y="-692.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> path, code blocks are enclosed in blocks as well.</text>
</g>
<!-- raw_17&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>raw_17&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2205.0096,-929.1806C2197.6662,-926.2204 2189.3729,-923.3335 2181.5,-921.6014 1921.4601,-864.3905 1837.9594,-963.9866 1583.5,-885.6014 1497.3059,-859.0496 1409.909,-800.7607 1356.4581,-760.7565"/>
<polygon fill="#000000" stroke="#000000" points="1358.2654,-757.7354 1348.1764,-754.5008 1354.0462,-763.321 1358.2654,-757.7354"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2134,-823.6015 1593,-823.6015 1593,-615.0006 2134,-615.0006 2134,-823.6015"/>
<text text-anchor="middle" x="1863.5" y="-792.5013" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking needs to identify when it has structure, and when prose, on a </text>
<text text-anchor="middle" x="1863.5" y="-777.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> line&#45;by&#45;line basis. &#160;It must also apply the cling rule to make sure that</text>
<text text-anchor="middle" x="1863.5" y="-761.7012" font-family="Inconsolata" font-size="14.00" fill="#000000"> e.g. tags are part of the block indicated by whitespacing. </text>
<text text-anchor="middle" x="1863.5" y="-746.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-730.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking need not, and mostly should not, parse within structure or prose.</text>
<text text-anchor="middle" x="1863.5" y="-715.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> These categories are determined by the beginning of a line, making this</text>
<text text-anchor="middle" x="1863.5" y="-700.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> tractable. </text>
<text text-anchor="middle" x="1863.5" y="-684.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-669.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> The cling rule requires lookahead. LPEG is quite capable of this, as is </text>
<text text-anchor="middle" x="1863.5" y="-653.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> packrat PEG parsing generally. &#160;In the bootstrap implementation, we will</text>
<text text-anchor="middle" x="1863.5" y="-638.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse once for ownership, again (in the `lines` array of each Section) for</text>
<text text-anchor="middle" x="1863.5" y="-623.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> blocking, and a final time to parse within blocks. </text>
</g>
<!-- raw_19&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>raw_19&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2286.239,-930.0623C2279.0006,-927.2121 2270.9612,-924.1661 2263.5,-921.6014 2210.4397,-903.3626 2193.8822,-908.1385 2142.5,-885.6014 2105.7244,-869.471 2067.8189,-849.4457 2032.258,-828.9408"/>
<polygon fill="#000000" stroke="#000000" points="2033.6747,-825.7161 2023.2697,-823.7194 2030.1586,-831.7689 2033.6747,-825.7161"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2651,-762.5014 2152,-762.5014 2152,-676.1008 2651,-676.1008 2651,-762.5014"/>
<text text-anchor="middle" x="2401.5" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> Grimoire is intended to work, in linear time, as a single&#45;pass PEG</text>
<text text-anchor="middle" x="2401.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> grammar. &#160;Presently (Feb 2018) I&#39;m intending to prototype that with </text>
<text text-anchor="middle" x="2401.5" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> PEGylator and port it to `hammer` with a `quipu` back&#45;end. </text>
</g>
<!-- raw_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.5,-921.5733C2401.5,-889.5013 2401.5,-821.3702 2401.5,-773.0582"/>
<polygon fill="#000000" stroke="#000000" points="2405.0001,-772.7657 2401.5,-762.7657 2398.0001,-772.7658 2405.0001,-772.7657"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2769.5,-737.3011 2669.5,-737.3011 2669.5,-701.3011 2769.5,-701.3011 2769.5,-737.3011"/>
<text text-anchor="middle" x="2719.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">*** includes</text>
</g>
<!-- header_23&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>header_23&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2714.9092,-921.5733C2715.7772,-883.3289 2717.8089,-793.8106 2718.854,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="2722.3573,-747.6552 2719.0852,-737.5783 2715.3591,-747.4963 2722.3573,-747.6552"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="2814.5" cy="-719.3011" rx="27" ry="18"/>
<text text-anchor="middle" x="2814.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_24&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2819.0908,-921.5733C2818.2228,-883.3289 2816.1911,-793.8106 2815.146,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="2818.6409,-747.4963 2814.9148,-737.5783 2811.6427,-747.6552 2818.6409,-747.4963"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3169.5,-816.4018 2859.5,-816.4018 2859.5,-622.2004 3169.5,-622.2004 3169.5,-816.4018"/>
<text text-anchor="middle" x="3014.5" y="-801.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="3014.5" y="-770.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="3014.5" y="-754.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="3014.5" y="-739.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Structure = require &quot;grym/structure&quot;</text>
<text text-anchor="middle" x="3014.5" y="-723.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Prose = require &quot;grym/prose&quot;</text>
<text text-anchor="middle" x="3014.5" y="-692.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="3014.5" y="-661.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="3014.5" y="-645.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="3014.5" y="-630.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_25&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2981.446,-921.5733C2984.9074,-900.3919 2990.9388,-863.4824 2996.9101,-826.9415"/>
<polygon fill="#000000" stroke="#000000" points="3000.4319,-827.0918 2998.5905,-816.6582 2993.5235,-825.9628 3000.4319,-827.0918"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2841.5,-329.9004 2787.5,-329.9004 2787.5,-293.9004 2841.5,-293.9004 2841.5,-329.9004"/>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2814.5,-701.2699C2814.5,-636.9981 2814.5,-418.7723 2814.5,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="2818.0001,-340.1856 2814.5,-330.1856 2811.0001,-340.1856 2818.0001,-340.1856"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3365,-737.3011 3188,-737.3011 3188,-701.3011 3365,-701.3011 3365,-737.3011"/>
<text text-anchor="middle" x="3276.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">** Metatable for Blocks</text>
</g>
<!-- header_30&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>header_30&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3268.2365,-921.5733C3269.7989,-883.3289 3273.456,-793.8106 3275.3371,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="3278.8421,-747.7128 3275.7533,-737.5783 3271.8479,-747.427 3278.8421,-747.7128"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="3410.5" cy="-719.3011" rx="27" ry="18"/>
<text text-anchor="middle" x="3410.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_31&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_31&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3419.6817,-921.5733C3417.9456,-883.3289 3413.8822,-793.8106 3411.7921,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="3415.2796,-747.4092 3411.3296,-737.5783 3408.2868,-747.7267 3415.2796,-747.4092"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3947.5,-870.7018 3455.5,-870.7018 3455.5,-567.9003 3947.5,-567.9003 3947.5,-870.7018"/>
<text text-anchor="middle" x="3701.5" y="-855.3013" font-family="Inconsolata" font-size="14.00" fill="#000000">local B = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="3701.5" y="-839.9013" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__index = B</text>
<text text-anchor="middle" x="3701.5" y="-808.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__tostring = function(block) </text>
<text text-anchor="middle" x="3701.5" y="-793.1012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;Block&quot;</text>
<text text-anchor="middle" x="3701.5" y="-777.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3701.5" y="-746.3012" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.addLine(block, line)</text>
<text text-anchor="middle" x="3701.5" y="-730.9011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_hash_p, line) then</text>
<text text-anchor="middle" x="3701.5" y="-715.5011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;hashline&quot;, block.str)</text>
<text text-anchor="middle" x="3701.5" y="-700.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tagline_handle_p, line) then</text>
<text text-anchor="middle" x="3701.5" y="-684.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;handleline&quot;, block.str)</text>
<text text-anchor="middle" x="3701.5" y="-669.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Eventually Blocks won&#39;t have lines, meantime:</text>
<text text-anchor="middle" x="3701.5" y="-653.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3701.5" y="-638.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines[#block.lines + 1] = line</text>
<text text-anchor="middle" x="3701.5" y="-623.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3701.5" y="-591.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="3701.5" y="-576.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_32&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_32&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3627.1286,-921.5733C3630.9819,-911.0932 3636.2509,-896.7627 3642.2187,-880.5317"/>
<polygon fill="#000000" stroke="#000000" points="3645.6419,-881.3637 3645.8079,-870.7702 3639.0719,-878.948 3645.6419,-881.3637"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3437.5,-329.9004 3383.5,-329.9004 3383.5,-293.9004 3437.5,-293.9004 3437.5,-329.9004"/>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3410.5,-701.2699C3410.5,-636.9981 3410.5,-418.7723 3410.5,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="3414.0001,-340.1856 3410.5,-330.1856 3407.0001,-340.1856 3414.0001,-340.1856"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="4213,-737.3011 3966,-737.3011 3966,-701.3011 4213,-701.3011 4213,-737.3011"/>
<text text-anchor="middle" x="4089.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">** Parse the prose within a block</text>
</g>
<!-- header_37&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>header_37&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4089.5,-921.5733C4089.5,-883.3289 4089.5,-793.8106 4089.5,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="4093.0001,-747.5782 4089.5,-737.5783 4086.0001,-747.5783 4093.0001,-747.5782"/>
</g>
<!-- raw_42 -->
<g id="node43" class="node">
<title>raw_42</title>
<ellipse fill="none" stroke="#000000" cx="4258.5" cy="-719.3011" rx="27" ry="18"/>
<text text-anchor="middle" x="4258.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_42 -->
<g id="edge42" class="edge">
<title>prose_38&#45;&gt;raw_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4278.6996,-921.5733C4274.8709,-883.2338 4265.8963,-793.3649 4261.3083,-747.4226"/>
<polygon fill="#000000" stroke="#000000" points="4264.7708,-746.872 4260.2944,-737.2693 4257.8055,-747.5676 4264.7708,-746.872"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="4613.5,-808.2019 4303.5,-808.2019 4303.5,-630.4003 4613.5,-630.4003 4613.5,-808.2019"/>
<text text-anchor="middle" x="4458.5" y="-792.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.parseProse(block)</text>
<text text-anchor="middle" x="4458.5" y="-777.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] then</text>
<text text-anchor="middle" x="4458.5" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="4458.5" y="-746.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="4458.5" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4458.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4458.5" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[1] = Prose(block)</text>
<text text-anchor="middle" x="4458.5" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines = nil</text>
<text text-anchor="middle" x="4458.5" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]</text>
<text text-anchor="middle" x="4458.5" y="-654.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4458.5" y="-638.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_39&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4435.5459,-921.5733C4438.1311,-898.792 4442.781,-857.8172 4447.2229,-818.6749"/>
<polygon fill="#000000" stroke="#000000" points="4450.7571,-818.5706 4448.4071,-808.2396 4443.8018,-817.7812 4450.7571,-818.5706"/>
</g>
<!-- header_45 -->
<g id="node46" class="node">
<title>header_45</title>
<ellipse fill="none" stroke="#000000" cx="4683.5" cy="-719.3011" rx="51.9763" ry="18"/>
<text text-anchor="middle" x="4683.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toValue</text>
</g>
<!-- section_40&#45;&gt;header_45 -->
<g id="edge45" class="edge">
<title>section_40&#45;&gt;header_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4730.3265,-921.5733C4721.4321,-883.1529 4700.5581,-792.9855 4689.943,-747.1324"/>
<polygon fill="#000000" stroke="#000000" points="4693.325,-746.2223 4687.6597,-737.2693 4686.5053,-747.8011 4693.325,-746.2223"/>
</g>
<!-- prose_46 -->
<g id="node47" class="node">
<title>prose_46</title>
<ellipse fill="none" stroke="#000000" cx="4785.5" cy="-719.3011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4785.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_40&#45;&gt;prose_46 -->
<g id="edge46" class="edge">
<title>section_40&#45;&gt;prose_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4738.6735,-921.5733C4747.5679,-883.1529 4768.4419,-792.9855 4779.057,-747.1324"/>
<polygon fill="#000000" stroke="#000000" points="4782.4947,-747.8011 4781.3403,-737.2693 4775.675,-746.2223 4782.4947,-747.8011"/>
</g>
<!-- codeblock_47 -->
<g id="node48" class="node">
<title>codeblock_47</title>
<ellipse fill="none" stroke="#000000" cx="4920.5" cy="-719.3011" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="4920.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 97&#45;124</text>
</g>
<!-- section_40&#45;&gt;codeblock_47 -->
<g id="edge47" class="edge">
<title>section_40&#45;&gt;codeblock_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4770.7071,-923.9433C4789.0168,-914.7271 4810.6538,-901.708 4826.5,-885.6014 4866.9334,-844.5034 4895.799,-782.5363 4910.1624,-746.9943"/>
<polygon fill="#000000" stroke="#000000" points="4913.5778,-747.8738 4913.9892,-737.2869 4907.0656,-745.3065 4913.5778,-747.8738"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="4285.5,-329.9004 4231.5,-329.9004 4231.5,-293.9004 4285.5,-293.9004 4285.5,-329.9004"/>
</g>
<!-- raw_42&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>raw_42&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4258.5,-701.2699C4258.5,-636.9981 4258.5,-418.7723 4258.5,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="4262.0001,-340.1856 4258.5,-330.1856 4255.0001,-340.1856 4262.0001,-340.1856"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4730,-329.9004 4637,-329.9004 4637,-293.9004 4730,-293.9004 4730,-329.9004"/>
<text text-anchor="middle" x="4683.5" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">*** toValue</text>
</g>
<!-- header_45&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>header_45&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4683.5,-701.2699C4683.5,-636.9981 4683.5,-418.7723 4683.5,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="4687.0001,-340.1856 4683.5,-330.1856 4680.0001,-340.1856 4687.0001,-340.1856"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="4775.5" cy="-311.9004" rx="27" ry="18"/>
<text text-anchor="middle" x="4775.5" y="-307.7004" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_46&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_46&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4785.0574,-701.2699C4783.4798,-636.9981 4778.1233,-418.7723 4776.1971,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="4779.6933,-340.0967 4775.9488,-330.1856 4772.6954,-340.2685 4779.6933,-340.0967"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="5186.5,-517.1012 4820.5,-517.1012 4820.5,-106.6997 5186.5,-106.6997 5186.5,-517.1012"/>
<text text-anchor="middle" x="5003.5" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toString(block)</text>
<text text-anchor="middle" x="5003.5" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="5003.5" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="5003.5" y="-455.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="5003.5" y="-440.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5003.5" y="-424.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="5003.5" y="-409.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5003.5" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toValue(block)</text>
<text text-anchor="middle" x="5003.5" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.val = block:toString()</text>
<text text-anchor="middle" x="5003.5" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block.val</text>
<text text-anchor="middle" x="5003.5" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5003.5" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toMarkdown(block)</text>
<text text-anchor="middle" x="5003.5" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] and (block[1].id == &quot;codeblock&quot;</text>
<text text-anchor="middle" x="5003.5" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;or block[1].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="5003.5" y="-254.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]:toMarkdown()</text>
<text text-anchor="middle" x="5003.5" y="-238.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="5003.5" y="-223.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block:toString()</text>
<text text-anchor="middle" x="5003.5" y="-208.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5003.5" y="-192.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5003.5" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.dotLabel(block)</text>
<text text-anchor="middle" x="5003.5" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;block &quot; .. tostring(block.line_first) </text>
<text text-anchor="middle" x="5003.5" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(block.line_last)</text>
<text text-anchor="middle" x="5003.5" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_47&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>codeblock_47&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4924.1735,-701.2699C4930.6831,-669.3178 4944.9446,-599.3164 4959.6058,-527.3525"/>
<polygon fill="#000000" stroke="#000000" points="4963.1096,-527.6863 4961.6765,-517.1888 4956.2505,-526.2888 4963.1096,-527.6863"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4962,-70.7004 4589,-70.7004 4589,-.0997 4962,-.0997 4962,-70.7004"/>
<text text-anchor="middle" x="4775.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="4775.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- raw_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4775.5,-293.7585C4775.5,-251.0546 4775.5,-143.1306 4775.5,-81.1202"/>
<polygon fill="#000000" stroke="#000000" points="4779.0001,-80.8406 4775.5,-70.8406 4772.0001,-80.8406 4779.0001,-80.8406"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="5185,-737.3011 5022,-737.3011 5022,-701.3011 5185,-701.3011 5185,-737.3011"/>
<text text-anchor="middle" x="5103.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">** Constructor/module</text>
</g>
<!-- header_52&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>header_52&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5121.8633,-921.5733C5118.3913,-883.3289 5110.2644,-793.8106 5106.0841,-747.7654"/>
<polygon fill="#000000" stroke="#000000" points="5109.5492,-747.2208 5105.1593,-737.5783 5102.5779,-747.8538 5109.5492,-747.2208"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="5230.5" cy="-719.3011" rx="27" ry="18"/>
<text text-anchor="middle" x="5230.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_53&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5325.4857,-929.3902C5306.1143,-920.6721 5280.9764,-906.2415 5266.5,-885.6014 5237.2157,-843.8487 5231.0565,-782.7793 5230.1503,-747.4351"/>
<polygon fill="#000000" stroke="#000000" points="5233.6489,-747.2953 5230.018,-737.342 5226.6495,-747.3871 5233.6489,-747.2953"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5823.5,-885.4019 5275.5,-885.4019 5275.5,-553.2002 5823.5,-553.2002 5823.5,-885.4019"/>
<text text-anchor="middle" x="5549.5" y="-870.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">local b = {}</text>
<text text-anchor="middle" x="5549.5" y="-839.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Block, lines, linum, str)</text>
<text text-anchor="middle" x="5549.5" y="-823.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = setmetatable({}, B)</text>
<text text-anchor="middle" x="5549.5" y="-808.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.lines = {}</text>
<text text-anchor="middle" x="5549.5" y="-792.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.line_first = linum</text>
<text text-anchor="middle" x="5549.5" y="-777.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (lines) then </text>
<text text-anchor="middle" x="5549.5" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(lines) == &quot;string&quot; then</text>
<text text-anchor="middle" x="5549.5" y="-746.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(lines)</text>
<text text-anchor="middle" x="5549.5" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(lines) == &quot;table&quot; then</text>
<text text-anchor="middle" x="5549.5" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, l in ipairs(lines) do</text>
<text text-anchor="middle" x="5549.5" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(l)</text>
<text text-anchor="middle" x="5549.5" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5549.5" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="5549.5" y="-654.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;Error: in block.new type of `lines` is &quot; .. type(lines))</text>
<text text-anchor="middle" x="5549.5" y="-638.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5549.5" y="-623.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5549.5" y="-592.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.id = &quot;block&quot;</text>
<text text-anchor="middle" x="5549.5" y="-576.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="5549.5" y="-561.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_54&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5531.1367,-921.5733C5531.7734,-914.5598 5532.5667,-905.8219 5533.4634,-895.944"/>
<polygon fill="#000000" stroke="#000000" points="5536.9742,-895.9832 5534.3928,-885.7077 5530.0029,-895.3502 5536.9742,-895.9832"/>
</g>
<!-- raw_61 -->
<g id="node62" class="node">
<title>raw_61</title>
<ellipse fill="none" stroke="#000000" cx="5868.5" cy="-719.3011" rx="27" ry="18"/>
<text text-anchor="middle" x="5868.5" y="-715.1011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_55&#45;&gt;raw_61 -->
<g id="edge61" class="edge">
<title>prose_55&#45;&gt;raw_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5797.169,-925.1973C5809.1788,-915.3633 5823.8423,-901.3041 5832.5,-885.6014 5856.8243,-841.4837 5864.7165,-782.3428 5867.2751,-747.7746"/>
<polygon fill="#000000" stroke="#000000" points="5870.7889,-747.6672 5867.9324,-737.4648 5863.8031,-747.2218 5870.7889,-747.6672"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="6237.5,-839.5016 5913.5,-839.5016 5913.5,-599.1006 6237.5,-599.1006 6237.5,-839.5016"/>
<text text-anchor="middle" x="6075.5" y="-824.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function structureOrProse(line)</text>
<text text-anchor="middle" x="6075.5" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_p, line) then</text>
<text text-anchor="middle" x="6075.5" y="-793.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tagline&quot;</text>
<text text-anchor="middle" x="6075.5" y="-778.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.listline_p, line) then</text>
<text text-anchor="middle" x="6075.5" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;listline&quot;</text>
<text text-anchor="middle" x="6075.5" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tableline_p, line) then</text>
<text text-anchor="middle" x="6075.5" y="-731.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tableline&quot;</text>
<text text-anchor="middle" x="6075.5" y="-716.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6075.5" y="-701.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false, &quot;&quot;</text>
<text text-anchor="middle" x="6075.5" y="-685.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6075.5" y="-654.201" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="6075.5" y="-638.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__index&quot;] = b</text>
<text text-anchor="middle" x="6075.5" y="-607.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, b)</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>codeblock_56&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6011.2284,-921.5733C6016.5822,-904.7239 6025.0985,-877.9221 6034.2025,-849.2703"/>
<polygon fill="#000000" stroke="#000000" points="6037.6161,-850.0847 6037.3088,-839.4944 6030.9448,-847.9649 6037.6161,-850.0847"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="5258.5,-329.9004 5204.5,-329.9004 5204.5,-293.9004 5258.5,-293.9004 5258.5,-329.9004"/>
</g>
<!-- raw_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>raw_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5230.5443,-701.2699C5230.702,-636.9981 5231.2377,-418.7723 5231.4303,-340.3003"/>
<polygon fill="#000000" stroke="#000000" points="5234.9305,-340.1942 5231.4551,-330.1856 5227.9305,-340.1769 5234.9305,-340.1942"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6041,-355.1007 5696,-355.1007 5696,-268.7001 6041,-268.7001 6041,-355.1007"/>
<text text-anchor="middle" x="5868.5" y="-323.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; returns: </text>
<text text-anchor="middle" x="5868.5" y="-308.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;1. true for structure, false for prose</text>
<text text-anchor="middle" x="5868.5" y="-293.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;2. id of structure line or &quot;&quot; for prose</text>
</g>
<!-- raw_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>raw_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5868.5,-701.2699C5868.5,-642.9224 5868.5,-457.6948 5868.5,-365.3323"/>
<polygon fill="#000000" stroke="#000000" points="5872.0001,-365.0799 5868.5,-355.0799 5865.0001,-365.0799 5872.0001,-365.0799"/>
</g>
</g>
</svg>