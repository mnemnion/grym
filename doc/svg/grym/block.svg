<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5553pt" height="1304pt"
 viewBox="0.00 0.00 5552.50 1303.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1299.6017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1299.6017 5548.5,-1299.6017 5548.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="2245.5" cy="-1277.6017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="2245.5" y="-1273.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 180</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="2245.5" cy="-1205.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2245.5" y="-1201.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;126</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2245.5,-1259.433C2245.5,-1251.7326 2245.5,-1242.576 2245.5,-1234.0183"/>
<polygon fill="#000000" stroke="#000000" points="2249.0001,-1234.0149 2245.5,-1224.015 2242.0001,-1234.015 2249.0001,-1234.0149"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1671.5" cy="-1133.6017" rx="75.4657" ry="18"/>
<text text-anchor="middle" x="1671.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Block module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.1827,-1200.6884C2088.5438,-1192.956 1907.7851,-1176.2441 1755.5,-1151.6017 1749.2198,-1150.5854 1742.7002,-1149.4081 1736.1955,-1148.1516"/>
<polygon fill="#000000" stroke="#000000" points="1736.5139,-1144.6462 1726.0226,-1146.1236 1735.1453,-1151.5112 1736.5139,-1144.6462"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="1810.5" cy="-1133.6017" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1810.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2182.678,-1200.0767C2106.8132,-1192.6259 1975.6671,-1177.2482 1865.5,-1151.6017 1861.8611,-1150.7546 1858.1188,-1149.7737 1854.3799,-1148.7159"/>
<polygon fill="#000000" stroke="#000000" points="1855.1482,-1145.2924 1844.5644,-1145.7749 1853.1391,-1151.9979 1855.1482,-1145.2924"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="1925.5" cy="-1133.6017" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="1925.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2190.6553,-1195.6428C2137.8178,-1185.7117 2055.7756,-1169.4052 1985.5,-1151.6017 1981.6372,-1150.6231 1977.6511,-1149.5559 1973.656,-1148.4455"/>
<polygon fill="#000000" stroke="#000000" points="1974.3488,-1145.0035 1963.772,-1145.6222 1972.4261,-1151.7343 1974.3488,-1145.0035"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="2049.5" cy="-1133.6017" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="2049.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;14</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2205.8365,-1191.0314C2174.072,-1179.3628 2129.4516,-1162.9717 2096.0069,-1150.6858"/>
<polygon fill="#000000" stroke="#000000" points="2097.046,-1147.3389 2086.4525,-1147.1761 2094.6323,-1153.9096 2097.046,-1147.3389"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="2178.5" cy="-1133.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2178.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 15&#45;27</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2228.9382,-1187.8039C2220.6824,-1178.932 2210.564,-1168.0586 2201.5626,-1158.3854"/>
<polygon fill="#000000" stroke="#000000" points="2204.0147,-1155.8827 2194.6401,-1150.9463 2198.8902,-1160.6513 2204.0147,-1155.8827"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="2313.5" cy="-1133.6017" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2313.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 28&#45;126</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2261.9609,-1188.1725C2270.335,-1179.3058 2280.6638,-1168.3695 2289.8706,-1158.621"/>
<polygon fill="#000000" stroke="#000000" points="2292.6333,-1160.7933 2296.955,-1151.1199 2287.5442,-1155.9869 2292.6333,-1160.7933"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2502.5" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2502.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 33&#45;50</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2291.4464,-1192.7295C2334.8931,-1180.5577 2400.1741,-1162.2688 2446.6161,-1149.2579"/>
<polygon fill="#000000" stroke="#000000" points="2447.8338,-1152.5516 2456.5188,-1146.4836 2445.9453,-1145.8111 2447.8338,-1152.5516"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="2941.5" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2941.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 51&#45;75</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2306.96,-1199.2437C2435.6245,-1185.9336 2732.734,-1155.1982 2869.8186,-1141.017"/>
<polygon fill="#000000" stroke="#000000" points="2870.2177,-1144.4945 2879.8045,-1139.984 2869.4974,-1137.5316 2870.2177,-1144.4945"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="3587.5" cy="-1133.6017" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3587.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 76&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2310.2274,-1202.129C2534.0007,-1190.1233 3274.2116,-1150.41 3512.729,-1137.6132"/>
<polygon fill="#000000" stroke="#000000" points="3513.2325,-1141.0914 3523.0306,-1137.0606 3512.8574,-1134.1014 3513.2325,-1141.0914"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="4489.5" cy="-1133.6017" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4489.5" y="-1129.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 127&#45;180</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2310.8397,-1203.5052C2631.9672,-1193.2017 4042.0089,-1147.9597 4404.368,-1136.3332"/>
<polygon fill="#000000" stroke="#000000" points="4404.6432,-1139.8263 4414.5257,-1136.0073 4404.4186,-1132.8299 4404.6432,-1139.8263"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="577.5" cy="-1061.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="577.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_3&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>block_3&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1777.1323,-1121.0909C1770.0792,-1118.8979 1762.6156,-1116.9042 1755.5,-1115.6017 1642.2296,-1094.8674 818.1946,-1068.8694 620.193,-1062.8744"/>
<polygon fill="#000000" stroke="#000000" points="620.0092,-1059.3674 609.9081,-1062.564 619.7979,-1066.3642 620.0092,-1059.3674"/>
</g>
<!-- prose_14 -->
<g id="node15" class="node">
<title>prose_14</title>
<ellipse fill="none" stroke="#000000" cx="1343.5" cy="-1061.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1343.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_4&#45;&gt;prose_14 -->
<g id="edge14" class="edge">
<title>block_4&#45;&gt;prose_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1888.3272,-1121.2661C1880.8338,-1119.1156 1872.9651,-1117.0937 1865.5,-1115.6017 1689.54,-1080.4328 1475.3611,-1067.4158 1385.9191,-1063.2819"/>
<polygon fill="#000000" stroke="#000000" points="1386.0387,-1059.7839 1375.8918,-1062.8319 1385.7248,-1066.7768 1386.0387,-1059.7839"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="1767.5" cy="-1061.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1767.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_5&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>block_5&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.8953,-1121.6964C2000.4491,-1119.6238 1992.7532,-1117.5195 1985.5,-1115.6017 1923.3817,-1099.1771 1850.9051,-1081.5224 1807.145,-1071.0269"/>
<polygon fill="#000000" stroke="#000000" points="1807.7342,-1067.5691 1797.1942,-1068.645 1806.1047,-1074.3768 1807.7342,-1067.5691"/>
</g>
<!-- prose_18 -->
<g id="node19" class="node">
<title>prose_18</title>
<ellipse fill="none" stroke="#000000" cx="2020.5" cy="-1061.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2020.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_6&#45;&gt;prose_18 -->
<g id="edge18" class="edge">
<title>block_6&#45;&gt;prose_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2146.1451,-1118.8577C2119.4939,-1106.7128 2081.8082,-1089.5396 2054.6712,-1077.1734"/>
<polygon fill="#000000" stroke="#000000" points="2056.0989,-1073.9778 2045.5478,-1073.0159 2053.1962,-1080.3476 2056.0989,-1073.9778"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="2313.5" cy="-1061.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2313.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_7&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>block_7&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2313.5,-1115.433C2313.5,-1107.7326 2313.5,-1098.576 2313.5,-1090.0183"/>
<polygon fill="#000000" stroke="#000000" points="2317.0001,-1090.0149 2313.5,-1080.015 2310.0001,-1090.015 2317.0001,-1090.0149"/>
</g>
<!-- header_22 -->
<g id="node23" class="node">
<title>header_22</title>
<ellipse fill="none" stroke="#000000" cx="2418.5" cy="-1061.6017" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="2418.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_8&#45;&gt;header_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;header_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2482.1659,-1116.1725C2471.3564,-1106.9072 2457.9103,-1095.3819 2446.1641,-1085.3137"/>
<polygon fill="#000000" stroke="#000000" points="2448.2273,-1082.4725 2438.3569,-1078.6219 2443.6718,-1087.7873 2448.2273,-1082.4725"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2547.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2547.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 33&#45;34</text>
</g>
<!-- section_8&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2513.6236,-1115.8039C2518.8701,-1107.4096 2525.2364,-1097.2234 2531.0276,-1087.9575"/>
<polygon fill="#000000" stroke="#000000" points="2534.0164,-1089.7792 2536.3484,-1079.4442 2528.0804,-1086.0692 2534.0164,-1089.7792"/>
</g>
<!-- block_24 -->
<g id="node25" class="node">
<title>block_24</title>
<ellipse fill="none" stroke="#000000" cx="2677.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2677.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;50</text>
</g>
<!-- section_8&#45;&gt;block_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;block_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2539.1857,-1118.5081C2566.65,-1107.2086 2604.3353,-1091.7037 2633.4341,-1079.7317"/>
<polygon fill="#000000" stroke="#000000" points="2635.0299,-1082.8598 2642.946,-1075.8182 2632.3664,-1076.3863 2635.0299,-1082.8598"/>
</g>
<!-- header_29 -->
<g id="node30" class="node">
<title>header_29</title>
<ellipse fill="none" stroke="#000000" cx="2853.5" cy="-1061.6017" rx="102.5283" ry="18"/>
<text text-anchor="middle" x="2853.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for Blocks</text>
</g>
<!-- section_9&#45;&gt;header_29 -->
<g id="edge29" class="edge">
<title>section_9&#45;&gt;header_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2920.1977,-1116.1725C2909.1214,-1107.1101 2895.4026,-1095.8856 2883.2923,-1085.9772"/>
<polygon fill="#000000" stroke="#000000" points="2885.1735,-1082.9941 2875.2175,-1079.3706 2880.7408,-1088.4118 2885.1735,-1082.9941"/>
</g>
<!-- block_30 -->
<g id="node31" class="node">
<title>block_30</title>
<ellipse fill="none" stroke="#000000" cx="3029.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3029.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 51&#45;52</text>
</g>
<!-- section_9&#45;&gt;block_30 -->
<g id="edge30" class="edge">
<title>section_9&#45;&gt;block_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2962.8023,-1116.1725C2974.3189,-1106.7498 2988.6923,-1094.9898 3001.1441,-1084.802"/>
<polygon fill="#000000" stroke="#000000" points="3003.4765,-1087.4159 3008.9998,-1078.3746 2999.0438,-1081.9982 3003.4765,-1087.4159"/>
</g>
<!-- block_31 -->
<g id="node32" class="node">
<title>block_31</title>
<ellipse fill="none" stroke="#000000" cx="3159.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3159.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 53&#45;75</text>
</g>
<!-- section_9&#45;&gt;block_31 -->
<g id="edge31" class="edge">
<title>section_9&#45;&gt;block_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2983.5326,-1119.7194C3019.7638,-1107.7531 3072.1122,-1090.4637 3110.29,-1077.8545"/>
<polygon fill="#000000" stroke="#000000" points="3111.766,-1081.0531 3120.1639,-1074.5934 3109.5707,-1074.4062 3111.766,-1081.0531"/>
</g>
<!-- header_36 -->
<g id="node37" class="node">
<title>header_36</title>
<ellipse fill="none" stroke="#000000" cx="3373.5" cy="-1061.6017" rx="140.2419" ry="18"/>
<text text-anchor="middle" x="3373.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parse the prose within a block</text>
</g>
<!-- section_10&#45;&gt;header_36 -->
<g id="edge36" class="edge">
<title>section_10&#45;&gt;header_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3545.9849,-1119.634C3513.9875,-1108.8685 3469.2954,-1093.8319 3433.4218,-1081.7623"/>
<polygon fill="#000000" stroke="#000000" points="3434.1493,-1078.3143 3423.5553,-1078.4427 3431.9171,-1084.9489 3434.1493,-1078.3143"/>
</g>
<!-- block_37 -->
<g id="node38" class="node">
<title>block_37</title>
<ellipse fill="none" stroke="#000000" cx="3587.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3587.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 76&#45;77</text>
</g>
<!-- section_10&#45;&gt;block_37 -->
<g id="edge37" class="edge">
<title>section_10&#45;&gt;block_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3587.5,-1115.433C3587.5,-1107.7326 3587.5,-1098.576 3587.5,-1090.0183"/>
<polygon fill="#000000" stroke="#000000" points="3591.0001,-1090.0149 3587.5,-1080.015 3584.0001,-1090.015 3591.0001,-1090.0149"/>
</g>
<!-- block_38 -->
<g id="node39" class="node">
<title>block_38</title>
<ellipse fill="none" stroke="#000000" cx="3717.5" cy="-1061.6017" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3717.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;91</text>
</g>
<!-- section_10&#45;&gt;block_38 -->
<g id="edge38" class="edge">
<title>section_10&#45;&gt;block_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3616.6745,-1117.4435C3635.5007,-1107.0167 3660.1577,-1093.3605 3680.3756,-1082.1629"/>
<polygon fill="#000000" stroke="#000000" points="3682.2636,-1085.1183 3689.3157,-1077.2114 3678.872,-1078.9947 3682.2636,-1085.1183"/>
</g>
<!-- section_39 -->
<g id="node40" class="node">
<title>section_39</title>
<ellipse fill="none" stroke="#000000" cx="3926.5" cy="-1061.6017" rx="70.655" ry="18"/>
<text text-anchor="middle" x="3926.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 92&#45;126</text>
</g>
<!-- section_10&#45;&gt;section_39 -->
<g id="edge39" class="edge">
<title>section_10&#45;&gt;section_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3639.7258,-1122.5095C3699.5782,-1109.7975 3797.6956,-1088.9584 3862.1979,-1075.2588"/>
<polygon fill="#000000" stroke="#000000" points="3863.1958,-1078.625 3872.2504,-1073.1237 3861.7415,-1071.7777 3863.1958,-1078.625"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="4232.5" cy="-1061.6017" rx="99.6298" ry="18"/>
<text text-anchor="middle" x="4232.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor/module</text>
</g>
<!-- section_11&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_11&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4440.5553,-1119.8896C4399.6654,-1108.434 4341.0568,-1092.0145 4296.4583,-1079.52"/>
<polygon fill="#000000" stroke="#000000" points="4297.167,-1076.0838 4286.5935,-1076.7563 4295.2785,-1082.8243 4297.167,-1076.0838"/>
</g>
<!-- block_52 -->
<g id="node53" class="node">
<title>block_52</title>
<ellipse fill="none" stroke="#000000" cx="4415.5" cy="-1061.6017" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4415.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 127&#45;128</text>
</g>
<!-- section_11&#45;&gt;block_52 -->
<g id="edge52" class="edge">
<title>section_11&#45;&gt;block_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4471.2079,-1115.8039C4461.9992,-1106.8442 4450.6925,-1095.843 4440.6772,-1086.0985"/>
<polygon fill="#000000" stroke="#000000" points="4442.9344,-1083.4113 4433.3264,-1078.9463 4438.0529,-1088.4284 4442.9344,-1083.4113"/>
</g>
<!-- block_53 -->
<g id="node54" class="node">
<title>block_53</title>
<ellipse fill="none" stroke="#000000" cx="4564.5" cy="-1061.6017" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4564.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 129&#45;157</text>
</g>
<!-- section_11&#45;&gt;block_53 -->
<g id="edge53" class="edge">
<title>section_11&#45;&gt;block_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4508.0393,-1115.8039C4517.3724,-1106.8442 4528.8319,-1095.843 4538.9825,-1086.0985"/>
<polygon fill="#000000" stroke="#000000" points="4541.6427,-1088.3965 4546.4327,-1078.9463 4536.795,-1083.3468 4541.6427,-1088.3965"/>
</g>
<!-- block_54 -->
<g id="node55" class="node">
<title>block_54</title>
<ellipse fill="none" stroke="#000000" cx="4792.5" cy="-1061.6017" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4792.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 158&#45;162</text>
</g>
<!-- section_11&#45;&gt;block_54 -->
<g id="edge54" class="edge">
<title>section_11&#45;&gt;block_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4543.3212,-1120.8125C4596.4725,-1108.1825 4677.5863,-1088.9079 4732.7172,-1075.8075"/>
<polygon fill="#000000" stroke="#000000" points="4733.7765,-1079.1533 4742.6964,-1073.4362 4732.1581,-1072.343 4733.7765,-1079.1533"/>
</g>
<!-- block_55 -->
<g id="node56" class="node">
<title>block_55</title>
<ellipse fill="none" stroke="#000000" cx="5148.5" cy="-1061.6017" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5148.5" y="-1057.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 163&#45;180</text>
</g>
<!-- section_11&#45;&gt;block_55 -->
<g id="edge55" class="edge">
<title>section_11&#45;&gt;block_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4558.1596,-1126.1002C4683.8188,-1112.3711 4949.5772,-1083.3353 5077.1828,-1069.3935"/>
<polygon fill="#000000" stroke="#000000" points="5077.6798,-1072.8602 5087.2405,-1068.2947 5076.9195,-1065.9016 5077.6798,-1072.8602"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-946.4019 0,-946.4019 0,-876.0011 499,-876.0011 499,-946.4019"/>
<text text-anchor="middle" x="249.5" y="-915.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A Block is the container for the next level of granularity below</text>
<text text-anchor="middle" x="249.5" y="-899.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> a Section. Any Section has a Header and one or more Blocks. Both the</text>
<text text-anchor="middle" x="249.5" y="-884.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> Header and the Block may be virtual, that is, without contents.</text>
</g>
<!-- prose_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>prose_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M552.5775,-1050.1738C506.9149,-1029.2358 407.8741,-983.8219 335.3915,-950.5859"/>
<polygon fill="#000000" stroke="#000000" points="336.7921,-947.3778 326.2433,-946.3911 333.8744,-953.7408 336.7921,-947.3778"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1016,-938.5019 517,-938.5019 517,-883.9011 1016,-883.9011 1016,-938.5019"/>
<text text-anchor="middle" x="766.5" y="-923.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> The most general premise is that Blocks are delineated by blank line</text>
<text text-anchor="middle" x="766.5" y="-908.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> whitespace. </text>
</g>
<!-- prose_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prose_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1311.8312,-1058.2614C1254.0228,-1051.72 1127.8343,-1035.3826 1024.5,-1007.6017 960.3804,-990.3634 889.9129,-963.4637 838.8486,-942.4551"/>
<polygon fill="#000000" stroke="#000000" points="840.1238,-939.1951 829.5454,-938.6046 837.4467,-945.6629 840.1238,-939.1951"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1575,-938.402 1034,-938.402 1034,-884.001 1575,-884.001 1575,-938.402"/>
<text text-anchor="middle" x="1304.5" y="-923.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> A paragraph of prose is the simplest block, and the default. &#160;A list with</text>
<text text-anchor="middle" x="1304.5" y="-907.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> a tag line is a block also, as is a table. &#160;Most importantly for our short</text>
<text text-anchor="middle" x="1304.5" y="-892.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> path, code blocks are enclosed in blocks as well.</text>
</g>
<!-- prose_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1738.3705,-1053.5119C1701.9842,-1043.3015 1637.8899,-1024.9686 1583.5,-1007.6017 1518.1034,-986.7204 1444.7536,-961.2967 1389.6803,-941.802"/>
<polygon fill="#000000" stroke="#000000" points="1390.5583,-938.3999 1379.9636,-938.3569 1388.2191,-944.9975 1390.5583,-938.3999"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2134,-1007.502 1593,-1007.502 1593,-814.901 2134,-814.901 2134,-1007.502"/>
<text text-anchor="middle" x="1863.5" y="-992.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking needs to identify when it has structure, and when prose, on a </text>
<text text-anchor="middle" x="1863.5" y="-977.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> line&#45;by&#45;line basis. &#160;It must also apply the cling rule to make sure that</text>
<text text-anchor="middle" x="1863.5" y="-961.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> e.g. tags are part of the block indicated by whitespacing. </text>
<text text-anchor="middle" x="1863.5" y="-946.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-930.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking need not, and mostly should not, parse within structure or prose.</text>
<text text-anchor="middle" x="1863.5" y="-915.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> These categories are determined by the beginning of a line, making this</text>
<text text-anchor="middle" x="1863.5" y="-900.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> tractable. </text>
<text text-anchor="middle" x="1863.5" y="-884.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-869.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> The cling rule requires lookahead. LPEG is quite capable of this, as is </text>
<text text-anchor="middle" x="1863.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> packrat PEG parsing generally. &#160;In the bootstrap implementation, we will</text>
<text text-anchor="middle" x="1863.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse once for ownership, again (in the `lines` array of each Section) for</text>
<text text-anchor="middle" x="1863.5" y="-823.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> blocking, and a final time to parse within blocks. </text>
</g>
<!-- prose_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>prose_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2003.995,-1045.7905C1995.4394,-1037.5945 1984.1863,-1026.8145 1971.7663,-1014.9166"/>
<polygon fill="#000000" stroke="#000000" points="1973.9728,-1012.1835 1964.3303,-1007.7932 1969.1304,-1017.2384 1973.9728,-1012.1835"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2651,-946.4019 2152,-946.4019 2152,-876.0011 2651,-876.0011 2651,-946.4019"/>
<text text-anchor="middle" x="2401.5" y="-931.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> Grimoire is intended to work, in linear time, as a single&#45;pass PEG</text>
<text text-anchor="middle" x="2401.5" y="-915.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> grammar. &#160;Presently (Feb 2018) I&#39;m intending to prototype that with </text>
<text text-anchor="middle" x="2401.5" y="-900.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> PEGylator and port it to `hammer` with a `quipu` back&#45;end. </text>
</g>
<!-- prose_20&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>prose_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2323.5947,-1044.3489C2336.1961,-1022.8119 2358.2117,-985.1852 2375.6317,-955.4128"/>
<polygon fill="#000000" stroke="#000000" points="2378.8456,-956.8505 2380.8749,-946.4518 2372.8038,-953.3154 2378.8456,-956.8505"/>
</g>
<!-- prose_25 -->
<g id="node26" class="node">
<title>prose_25</title>
<ellipse fill="none" stroke="#000000" cx="2701.5" cy="-911.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2701.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_23&#45;&gt;prose_25 -->
<g id="edge25" class="edge">
<title>block_23&#45;&gt;prose_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2589.1304,-1049.5335C2612.3406,-1041.0108 2640.3406,-1027.5108 2659.5,-1007.6017 2677.8847,-988.4976 2688.9271,-960.0431 2695.041,-938.9962"/>
<polygon fill="#000000" stroke="#000000" points="2698.4224,-939.8998 2697.6571,-929.3326 2691.6656,-938.0706 2698.4224,-939.8998"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="2829.5" cy="-911.2015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2829.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;48</text>
</g>
<!-- block_24&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>block_24&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2699.2387,-1044.8326C2712.1938,-1034.5275 2728.7406,-1020.8087 2742.5,-1007.6017 2766.2292,-984.8252 2791.1691,-956.6989 2808.2323,-936.7186"/>
<polygon fill="#000000" stroke="#000000" points="2811.0141,-938.8497 2814.8128,-928.9592 2805.6755,-934.3221 2811.0141,-938.8497"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2656.5,-630.501 2602.5,-630.501 2602.5,-594.501 2656.5,-594.501 2656.5,-630.501"/>
</g>
<!-- prose_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>prose_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2696.3098,-893.2898C2689.0296,-867.9129 2675.5514,-819.9935 2665.5,-778.8013 2653.6837,-730.3763 2641.804,-673.538 2635.0781,-640.416"/>
<polygon fill="#000000" stroke="#000000" points="2638.4932,-639.645 2633.0821,-630.5362 2631.6318,-641.0313 2638.4932,-639.645"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2984.5,-709.6017 2674.5,-709.6017 2674.5,-515.4003 2984.5,-515.4003 2984.5,-709.6017"/>
<text text-anchor="middle" x="2829.5" y="-694.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2829.5" y="-663.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2829.5" y="-647.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2829.5" y="-632.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Structure = require &quot;grym/structure&quot;</text>
<text text-anchor="middle" x="2829.5" y="-617.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local Prose = require &quot;grym/prose&quot;</text>
<text text-anchor="middle" x="2829.5" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="2829.5" y="-554.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="2829.5" y="-538.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="2829.5" y="-523.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2829.5,-892.9661C2829.5,-859.0605 2829.5,-783.9473 2829.5,-719.9816"/>
<polygon fill="#000000" stroke="#000000" points="2833.0001,-719.8192 2829.5,-709.8192 2826.0001,-719.8192 2833.0001,-719.8192"/>
</g>
<!-- prose_32 -->
<g id="node33" class="node">
<title>prose_32</title>
<ellipse fill="none" stroke="#000000" cx="3029.5" cy="-911.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3029.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_30&#45;&gt;prose_32 -->
<g id="edge32" class="edge">
<title>block_30&#45;&gt;prose_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3029.5,-1043.4599C3029.5,-1017.6012 3029.5,-969.9061 3029.5,-939.4123"/>
<polygon fill="#000000" stroke="#000000" points="3033.0001,-939.4076 3029.5,-929.4076 3026.0001,-939.4077 3033.0001,-939.4076"/>
</g>
<!-- codeblock_34 -->
<g id="node35" class="node">
<title>codeblock_34</title>
<ellipse fill="none" stroke="#000000" cx="3221.5" cy="-911.2015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3221.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;73</text>
</g>
<!-- block_31&#45;&gt;codeblock_34 -->
<g id="edge34" class="edge">
<title>block_31&#45;&gt;codeblock_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3166.8557,-1043.7582C3177.565,-1017.7795 3197.5431,-969.3165 3210.1481,-938.7389"/>
<polygon fill="#000000" stroke="#000000" points="3213.3851,-940.07 3213.9605,-929.4908 3206.9134,-937.4021 3213.3851,-940.07"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3056.5,-630.501 3002.5,-630.501 3002.5,-594.501 3056.5,-594.501 3056.5,-630.501"/>
</g>
<!-- prose_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>prose_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3029.5,-892.9661C3029.5,-842.6607 3029.5,-701.643 3029.5,-640.9113"/>
<polygon fill="#000000" stroke="#000000" points="3033.0001,-640.8773 3029.5,-630.8773 3026.0001,-640.8773 3033.0001,-640.8773"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3490,-763.9018 3075,-763.9018 3075,-461.1002 3490,-461.1002 3490,-763.9018"/>
<text text-anchor="middle" x="3282.5" y="-748.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local B = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="3282.5" y="-733.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__index = B</text>
<text text-anchor="middle" x="3282.5" y="-701.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__tostring = function(block) </text>
<text text-anchor="middle" x="3282.5" y="-686.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;Block&quot;</text>
<text text-anchor="middle" x="3282.5" y="-670.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3282.5" y="-639.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.addLine(block, line)</text>
<text text-anchor="middle" x="3282.5" y="-624.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_hash_p, line) then</text>
<text text-anchor="middle" x="3282.5" y="-608.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;hashline&quot;)</text>
<text text-anchor="middle" x="3282.5" y="-593.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tagline_handle_p, line) then</text>
<text text-anchor="middle" x="3282.5" y="-577.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;handleline&quot;)</text>
<text text-anchor="middle" x="3282.5" y="-562.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Eventually Blocks won&#39;t have lines, meantime:</text>
<text text-anchor="middle" x="3282.5" y="-547.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3282.5" y="-531.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines[#block.lines + 1] = line</text>
<text text-anchor="middle" x="3282.5" y="-516.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3282.5" y="-484.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="3282.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>codeblock_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3225.224,-892.9661C3230.2576,-868.3179 3239.7385,-821.8924 3249.5591,-773.8036"/>
<polygon fill="#000000" stroke="#000000" points="3253.0206,-774.3456 3251.5923,-763.8475 3246.1621,-772.945 3253.0206,-774.3456"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3574.5" cy="-911.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3574.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_37&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>block_37&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3585.9319,-1043.4599C3583.6968,-1017.6012 3579.5742,-969.9061 3576.9384,-939.4123"/>
<polygon fill="#000000" stroke="#000000" points="3580.4219,-939.069 3576.0737,-929.4076 3573.4479,-939.6719 3580.4219,-939.069"/>
</g>
<!-- codeblock_42 -->
<g id="node43" class="node">
<title>codeblock_42</title>
<ellipse fill="none" stroke="#000000" cx="3710.5" cy="-911.2015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3710.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;90</text>
</g>
<!-- block_38&#45;&gt;codeblock_42 -->
<g id="edge42" class="edge">
<title>block_38&#45;&gt;codeblock_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3716.6556,-1043.4599C3715.4521,-1017.6012 3713.2323,-969.9061 3711.813,-939.4123"/>
<polygon fill="#000000" stroke="#000000" points="3715.3086,-939.234 3711.3474,-929.4076 3708.3162,-939.5596 3715.3086,-939.234"/>
</g>
<!-- header_44 -->
<g id="node45" class="node">
<title>header_44</title>
<ellipse fill="none" stroke="#000000" cx="3857.5" cy="-911.2015" rx="51.9763" ry="18"/>
<text text-anchor="middle" x="3857.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toValue</text>
</g>
<!-- section_39&#45;&gt;header_44 -->
<g id="edge44" class="edge">
<title>section_39&#45;&gt;header_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3918.177,-1043.4599C3906.21,-1017.3753 3884.0493,-969.0713 3870.0777,-938.6173"/>
<polygon fill="#000000" stroke="#000000" points="3873.2037,-937.0373 3865.8525,-929.4076 3866.8413,-939.9562 3873.2037,-937.0373"/>
</g>
<!-- block_45 -->
<g id="node46" class="node">
<title>block_45</title>
<ellipse fill="none" stroke="#000000" cx="3983.5" cy="-911.2015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3983.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 92&#45;96</text>
</g>
<!-- section_39&#45;&gt;block_45 -->
<g id="edge45" class="edge">
<title>section_39&#45;&gt;block_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3933.3755,-1043.4599C3943.2185,-1017.4882 3961.4096,-969.4891 3972.9595,-939.0138"/>
<polygon fill="#000000" stroke="#000000" points="3976.3289,-939.999 3976.6001,-929.4076 3969.7833,-937.5182 3976.3289,-939.999"/>
</g>
<!-- block_46 -->
<g id="node47" class="node">
<title>block_46</title>
<ellipse fill="none" stroke="#000000" cx="4118.5" cy="-911.2015" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="4118.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 97&#45;126</text>
</g>
<!-- section_39&#45;&gt;block_46 -->
<g id="edge46" class="edge">
<title>section_39&#45;&gt;block_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3972.2477,-1047.8431C3996.6036,-1038.9957 4026.0717,-1025.7282 4048.5,-1007.6017 4072.3214,-988.3492 4092.0065,-959.1132 4104.3696,-937.886"/>
<polygon fill="#000000" stroke="#000000" points="4107.4922,-939.4745 4109.3668,-929.0468 4101.3986,-936.0294 4107.4922,-939.4745"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="3586.5,-630.501 3532.5,-630.501 3532.5,-594.501 3586.5,-594.501 3586.5,-630.501"/>
</g>
<!-- prose_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>prose_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3573.5843,-892.9661C3571.0581,-842.6607 3563.9765,-701.643 3560.9267,-640.9113"/>
<polygon fill="#000000" stroke="#000000" points="3564.42,-640.6891 3560.4228,-630.8773 3557.4289,-641.0403 3564.42,-640.6891"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3914.5,-701.4018 3604.5,-701.4018 3604.5,-523.6002 3914.5,-523.6002 3914.5,-701.4018"/>
<text text-anchor="middle" x="3759.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.parseProse(block)</text>
<text text-anchor="middle" x="3759.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] then</text>
<text text-anchor="middle" x="3759.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="3759.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="3759.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3759.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3759.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[1] = Prose(block)</text>
<text text-anchor="middle" x="3759.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines = nil</text>
<text text-anchor="middle" x="3759.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]</text>
<text text-anchor="middle" x="3759.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3759.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_42&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>codeblock_42&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3713.4914,-892.9661C3719.302,-857.545 3732.4903,-777.1501 3743.2638,-711.4756"/>
<polygon fill="#000000" stroke="#000000" points="3746.7375,-711.9206 3744.9026,-701.4859 3739.8299,-710.7874 3746.7375,-711.9206"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="3976.5" cy="-612.501" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3976.5" y="-608.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_45&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>block_45&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3983.0727,-892.9661C3981.8938,-842.6607 3978.589,-701.643 3977.1658,-640.9113"/>
<polygon fill="#000000" stroke="#000000" points="3980.6641,-640.7925 3976.9306,-630.8773 3973.666,-640.9566 3980.6641,-640.7925"/>
</g>
<!-- codeblock_49 -->
<g id="node50" class="node">
<title>codeblock_49</title>
<ellipse fill="none" stroke="#000000" cx="4118.5" cy="-612.501" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="4118.5" y="-608.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 97&#45;124</text>
</g>
<!-- block_46&#45;&gt;codeblock_49 -->
<g id="edge49" class="edge">
<title>block_46&#45;&gt;codeblock_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4118.5,-892.9661C4118.5,-842.6607 4118.5,-701.643 4118.5,-640.9113"/>
<polygon fill="#000000" stroke="#000000" points="4122.0001,-640.8773 4118.5,-630.8773 4115.0001,-640.8773 4122.0001,-640.8773"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4040,-232.4008 3667,-232.4008 3667,-177.7999 4040,-177.7999 4040,-232.4008"/>
<text text-anchor="middle" x="3853.5" y="-201.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="3853.5" y="-185.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- prose_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>prose_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3971.1358,-594.7336C3952.5187,-533.0702 3890.4348,-327.4359 3864.7611,-242.3993"/>
<polygon fill="#000000" stroke="#000000" points="3868.057,-241.2062 3861.816,-232.6446 3861.3557,-243.2294 3868.057,-241.2062"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4424.5,-410.3011 4058.5,-410.3011 4058.5,.1004 4424.5,.1004 4424.5,-410.3011"/>
<text text-anchor="middle" x="4241.5" y="-395.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toString(block)</text>
<text text-anchor="middle" x="4241.5" y="-379.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4241.5" y="-364.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="4241.5" y="-348.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4241.5" y="-333.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4241.5" y="-318.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4241.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4241.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toValue(block)</text>
<text text-anchor="middle" x="4241.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.val = block:toString()</text>
<text text-anchor="middle" x="4241.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block.val</text>
<text text-anchor="middle" x="4241.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4241.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toMarkdown(block)</text>
<text text-anchor="middle" x="4241.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] and (block[1].id == &quot;codeblock&quot;</text>
<text text-anchor="middle" x="4241.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;or block[1].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="4241.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]:toMarkdown()</text>
<text text-anchor="middle" x="4241.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4241.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block:toString()</text>
<text text-anchor="middle" x="4241.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4241.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4241.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.dotLabel(block)</text>
<text text-anchor="middle" x="4241.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;block &quot; .. tostring(block.line_first) </text>
<text text-anchor="middle" x="4241.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(block.line_last)</text>
<text text-anchor="middle" x="4241.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4123.9439,-594.4698C4133.6104,-562.4524 4154.8116,-492.2299 4176.5853,-420.1109"/>
<polygon fill="#000000" stroke="#000000" points="4179.9808,-420.9736 4179.5205,-410.3888 4173.2796,-418.9504 4179.9808,-420.9736"/>
</g>
<!-- prose_56 -->
<g id="node57" class="node">
<title>prose_56</title>
<ellipse fill="none" stroke="#000000" cx="4330.5" cy="-911.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4330.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_52&#45;&gt;prose_56 -->
<g id="edge56" class="edge">
<title>block_52&#45;&gt;prose_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4405.4156,-1043.7582C4390.5105,-1017.385 4362.5094,-967.8393 4345.2828,-937.3583"/>
<polygon fill="#000000" stroke="#000000" points="4348.2762,-935.5413 4340.3089,-928.5576 4342.1821,-938.9855 4348.2762,-935.5413"/>
</g>
<!-- codeblock_58 -->
<g id="node59" class="node">
<title>codeblock_58</title>
<ellipse fill="none" stroke="#000000" cx="4564.5" cy="-911.2015" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4564.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 129&#45;151</text>
</g>
<!-- block_53&#45;&gt;codeblock_58 -->
<g id="edge58" class="edge">
<title>block_53&#45;&gt;codeblock_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4564.5,-1043.4599C4564.5,-1017.6012 4564.5,-969.9061 4564.5,-939.4123"/>
<polygon fill="#000000" stroke="#000000" points="4568.0001,-939.4076 4564.5,-929.4076 4561.0001,-939.4077 4568.0001,-939.4076"/>
</g>
<!-- prose_60 -->
<g id="node61" class="node">
<title>prose_60</title>
<ellipse fill="none" stroke="#000000" cx="4950.5" cy="-911.2015" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4950.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_54&#45;&gt;prose_60 -->
<g id="edge60" class="edge">
<title>block_54&#45;&gt;prose_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4810.9338,-1044.0545C4839.6006,-1016.7666 4894.8585,-964.1667 4926.5669,-933.9834"/>
<polygon fill="#000000" stroke="#000000" points="4929.2605,-936.2516 4934.0904,-926.8218 4924.4341,-931.1814 4929.2605,-936.2516"/>
</g>
<!-- codeblock_62 -->
<g id="node63" class="node">
<title>codeblock_62</title>
<ellipse fill="none" stroke="#000000" cx="5275.5" cy="-911.2015" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5275.5" y="-907.0015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;179</text>
</g>
<!-- block_55&#45;&gt;codeblock_62 -->
<g id="edge62" class="edge">
<title>block_55&#45;&gt;codeblock_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5163.3171,-1044.0545C5185.6611,-1017.5935 5228.1031,-967.3314 5253.8945,-936.7879"/>
<polygon fill="#000000" stroke="#000000" points="5256.6061,-939.0016 5260.3836,-929.1031 5251.2578,-934.4854 5256.6061,-939.0016"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4272.5,-630.501 4218.5,-630.501 4218.5,-594.501 4272.5,-594.501 4272.5,-630.501"/>
</g>
<!-- prose_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>prose_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4323.0278,-893.4819C4312.6342,-868.3333 4293.7169,-820.6833 4281.5,-778.8013 4267.5418,-730.9497 4256.3438,-673.9289 4250.3315,-640.6159"/>
<polygon fill="#000000" stroke="#000000" points="4253.7606,-639.908 4248.5648,-630.6747 4246.8686,-641.1328 4253.7606,-639.908"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4838.5,-778.6018 4290.5,-778.6018 4290.5,-446.4002 4838.5,-446.4002 4838.5,-778.6018"/>
<text text-anchor="middle" x="4564.5" y="-763.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local b = {}</text>
<text text-anchor="middle" x="4564.5" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Block, lines, linum)</text>
<text text-anchor="middle" x="4564.5" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = setmetatable({}, B)</text>
<text text-anchor="middle" x="4564.5" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.lines = {}</text>
<text text-anchor="middle" x="4564.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.line_first = linum</text>
<text text-anchor="middle" x="4564.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (lines) then </text>
<text text-anchor="middle" x="4564.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(lines) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4564.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(lines)</text>
<text text-anchor="middle" x="4564.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(lines) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4564.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, l in ipairs(lines) do</text>
<text text-anchor="middle" x="4564.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(l)</text>
<text text-anchor="middle" x="4564.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4564.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4564.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;Error: in block.new type of `lines` is &quot; .. type(lines))</text>
<text text-anchor="middle" x="4564.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4564.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4564.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.id = &quot;block&quot;</text>
<text text-anchor="middle" x="4564.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="4564.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>codeblock_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4564.5,-892.9661C4564.5,-870.874 4564.5,-831.287 4564.5,-788.6882"/>
<polygon fill="#000000" stroke="#000000" points="4568.0001,-788.6855 4564.5,-778.6856 4561.0001,-788.6856 4568.0001,-788.6855"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="5202,-647.7014 4857,-647.7014 4857,-577.3006 5202,-577.3006 5202,-647.7014"/>
<text text-anchor="middle" x="5029.5" y="-632.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; returns: </text>
<text text-anchor="middle" x="5029.5" y="-617.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;1. true for structure, false for prose</text>
<text text-anchor="middle" x="5029.5" y="-601.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;2. id of structure line or &quot;&quot; for prose</text>
</g>
<!-- prose_60&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>prose_60&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4955.3229,-892.9661C4967.5269,-846.8223 4999.9172,-724.3542 5017.5894,-657.5353"/>
<polygon fill="#000000" stroke="#000000" points="5021.0166,-658.2653 5020.1899,-647.7028 5014.2493,-656.4754 5021.0166,-658.2653"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="5544.5,-732.7015 5220.5,-732.7015 5220.5,-492.3005 5544.5,-492.3005 5544.5,-732.7015"/>
<text text-anchor="middle" x="5382.5" y="-717.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function structureOrProse(line)</text>
<text text-anchor="middle" x="5382.5" y="-702.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_p, line) then</text>
<text text-anchor="middle" x="5382.5" y="-686.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tagline&quot;</text>
<text text-anchor="middle" x="5382.5" y="-671.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.listline_p, line) then</text>
<text text-anchor="middle" x="5382.5" y="-655.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;listline&quot;</text>
<text text-anchor="middle" x="5382.5" y="-640.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tableline_p, line) then</text>
<text text-anchor="middle" x="5382.5" y="-625.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tableline&quot;</text>
<text text-anchor="middle" x="5382.5" y="-609.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5382.5" y="-594.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false, &quot;&quot;</text>
<text text-anchor="middle" x="5382.5" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5382.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="5382.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__index&quot;] = b</text>
<text text-anchor="middle" x="5382.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, b)</text>
</g>
<!-- codeblock_62&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>codeblock_62&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5282.0323,-892.9661C5292.7775,-862.9698 5315.0763,-800.7205 5335.9422,-742.4715"/>
<polygon fill="#000000" stroke="#000000" points="5339.334,-743.3813 5339.4114,-732.7868 5332.7441,-741.0206 5339.334,-743.3813"/>
</g>
</g>
</svg>