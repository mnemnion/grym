<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5826pt" height="786pt"
 viewBox="0.00 0.00 5825.50 786.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 782.0009)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-782.0009 5821.5,-782.0009 5821.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="3366.5" cy="-760.0009" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="3366.5" y="-755.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 171</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="3366.5" cy="-688.0009" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3366.5" y="-683.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;171</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3366.5,-741.8323C3366.5,-734.1319 3366.5,-724.9753 3366.5,-716.4176"/>
<polygon fill="#000000" stroke="#000000" points="3370.0001,-716.4142 3366.5,-706.4142 3363.0001,-716.4142 3370.0001,-716.4142"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="2143.5" cy="-616.0009" rx="75.4657" ry="18"/>
<text text-anchor="middle" x="2143.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Block module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3300.8129,-686.302C3090.819,-680.6477 2437.3109,-661.2676 2227.5,-634.0009 2220.8422,-633.1357 2213.9285,-632.0182 2207.0548,-630.7639"/>
<polygon fill="#000000" stroke="#000000" points="2207.5278,-627.2908 2197.0471,-628.8417 2206.2074,-634.1652 2207.5278,-627.2908"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="2282.5" cy="-616.0009" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="2282.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3300.8902,-686.8168C3104.5086,-682.9156 2523.4721,-668.6802 2337.5,-634.0009 2333.611,-633.2757 2329.6173,-632.3478 2325.6429,-631.2966"/>
<polygon fill="#000000" stroke="#000000" points="2326.4529,-627.8876 2315.8744,-628.4752 2324.5105,-634.6127 2326.4529,-627.8876"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="2397.5" cy="-616.0009" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="2397.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3300.9899,-686.0839C3120.692,-680.4933 2619.781,-662.76 2457.5,-634.0009 2453.1045,-633.222 2448.576,-632.2301 2444.0702,-631.1135"/>
<polygon fill="#000000" stroke="#000000" points="2444.8674,-627.7038 2434.3029,-628.5043 2443.0608,-634.4666 2444.8674,-627.7038"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="2521.5" cy="-616.0009" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="2521.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;14</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3301.6135,-685.2315C3139.9889,-678.0572 2722.5984,-657.7607 2585.5,-634.0009 2580.8408,-633.1935 2576.0337,-632.1835 2571.2454,-631.0564"/>
<polygon fill="#000000" stroke="#000000" points="2572.0483,-627.6494 2561.4967,-628.606 2570.3418,-634.4382 2572.0483,-627.6494"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="2650.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2650.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 15&#45;27</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3300.8341,-686.613C3182.8052,-683.22 2927.352,-671.7765 2715.5,-634.0009 2710.7773,-633.1588 2705.9015,-632.1252 2701.0425,-630.9831"/>
<polygon fill="#000000" stroke="#000000" points="2701.6969,-627.5391 2691.1468,-628.5126 2700.0013,-634.3306 2701.6969,-627.5391"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="2780.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2780.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 28&#45;33</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3301.8338,-684.7746C3202.8488,-679.0559 3008.1268,-664.7238 2845.5,-634.0009 2840.7862,-633.1104 2835.9164,-632.0439 2831.0613,-630.8806"/>
<polygon fill="#000000" stroke="#000000" points="2831.7235,-627.438 2821.1708,-628.3821 2830.0089,-634.2248 2831.7235,-627.438"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="2910.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2910.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 34&#45;46</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3309.209,-678.955C3222.694,-665.2947 3059.449,-639.5192 2971.0508,-625.5616"/>
<polygon fill="#000000" stroke="#000000" points="2971.3356,-622.0633 2960.9121,-623.9607 2970.2438,-628.9776 2971.3356,-622.0633"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="3123.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3123.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;48</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3321.6469,-674.7111C3280.0441,-662.3844 3218.1772,-644.0535 3174.6657,-631.1611"/>
<polygon fill="#000000" stroke="#000000" points="3175.4325,-627.738 3164.8501,-628.2528 3173.4438,-634.4496 3175.4325,-627.738"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="3294.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3294.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 49&#45;70</text>
</g>
<!-- section_1&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3349.0708,-670.5717C3340.05,-661.551 3328.887,-650.3879 3319.0121,-640.5131"/>
<polygon fill="#000000" stroke="#000000" points="3321.3147,-637.8658 3311.7687,-633.2696 3316.3649,-642.8156 3321.3147,-637.8658"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="3438.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3438.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 71&#45;72</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3383.9292,-670.5717C3392.95,-661.551 3404.113,-650.3879 3413.9879,-640.5131"/>
<polygon fill="#000000" stroke="#000000" points="3416.6351,-642.8156 3421.2313,-633.2696 3411.6853,-637.8658 3416.6351,-642.8156"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="3660.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3660.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 73&#45;89</text>
</g>
<!-- section_1&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3415.709,-675.9498C3468.3387,-663.0609 3551.5751,-642.6764 3606.1142,-629.3199"/>
<polygon fill="#000000" stroke="#000000" points="3607.0696,-632.6894 3615.9501,-626.9111 3605.4045,-625.8903 3607.0696,-632.6894"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="3902.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3902.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 90&#45;92</text>
</g>
<!-- section_1&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3425.6518,-680.0552C3527.8839,-666.3225 3736.6424,-638.2803 3840.6896,-624.3038"/>
<polygon fill="#000000" stroke="#000000" points="3841.2827,-627.7557 3850.7276,-622.9554 3840.3507,-620.818 3841.2827,-627.7557"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="4300.5" cy="-616.0009" rx="60.1864" ry="18"/>
<text text-anchor="middle" x="4300.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 93&#45;117</text>
</g>
<!-- section_1&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3429.9633,-683.1087C3598.7382,-670.0982 4057.6363,-634.7228 4232.0159,-621.2802"/>
<polygon fill="#000000" stroke="#000000" points="4232.3924,-624.7617 4242.0938,-620.5033 4231.8543,-617.7824 4232.3924,-624.7617"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="4495.5" cy="-616.0009" rx="64.2191" ry="18"/>
<text text-anchor="middle" x="4495.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 118&#45;119</text>
</g>
<!-- section_1&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3432.0728,-686.47C3592.4147,-682.2916 4016.9764,-668.603 4369.5,-634.0009 4389.1634,-632.0709 4410.462,-629.2932 4429.8547,-626.4954"/>
<polygon fill="#000000" stroke="#000000" points="4430.4178,-629.9504 4439.8034,-625.035 4429.4011,-623.0246 4430.4178,-629.9504"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="4727.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4727.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 120&#45;144</text>
</g>
<!-- section_1&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3432.0699,-686.6179C3613.1913,-682.46 4135.6156,-668.1879 4568.5,-634.0009 4597.8516,-631.6829 4630.1521,-628.1991 4657.9291,-624.912"/>
<polygon fill="#000000" stroke="#000000" points="4658.4315,-628.3769 4667.9442,-623.7124 4657.5989,-621.4266 4658.4315,-628.3769"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="4961.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4961.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 145&#45;148</text>
</g>
<!-- section_1&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3432.44,-687.2832C3636.4075,-684.6851 4275.0917,-673.7143 4802.5,-634.0009 4831.8599,-631.7902 4864.1618,-628.3248 4891.9376,-625.0225"/>
<polygon fill="#000000" stroke="#000000" points="4892.4427,-628.4871 4901.9522,-623.8159 4891.6053,-621.5373 4892.4427,-628.4871"/>
</g>
<!-- block_18 -->
<g id="node19" class="node">
<title>block_18</title>
<ellipse fill="none" stroke="#000000" cx="5244.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5244.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 149&#45;153</text>
</g>
<!-- section_1&#45;&gt;block_18 -->
<g id="edge18" class="edge">
<title>section_1&#45;&gt;block_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3432.2017,-687.1514C3656.5331,-683.9785 4412.8347,-671.0426 5036.5,-634.0009 5081.7675,-631.3123 5132.4676,-626.9526 5172.479,-623.1972"/>
<polygon fill="#000000" stroke="#000000" points="5173.0487,-626.659 5182.6742,-622.2317 5172.3887,-619.6902 5173.0487,-626.659"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 154&#45;171</text>
</g>
<!-- section_1&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_1&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3432.2733,-686.7998C3679.8106,-682.1484 4578.9755,-664.069 5319.5,-634.0009 5409.4405,-630.349 5512.841,-624.572 5580.9125,-620.5512"/>
<polygon fill="#000000" stroke="#000000" points="5581.3347,-624.0324 5591.1099,-619.9464 5580.9201,-617.0447 5581.3347,-624.0324"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-500.8011 0,-500.8011 0,-430.4004 499,-430.4004 499,-500.8011"/>
<text text-anchor="middle" x="249.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A Block is the container for the next level of granularity below</text>
<text text-anchor="middle" x="249.5" y="-454.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> a Section. Any Section has a Header and one or more Blocks. Both the</text>
<text text-anchor="middle" x="249.5" y="-438.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Header and the Block may be virtual, that is, without contents.</text>
</g>
<!-- block_3&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_3&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2249.4503,-603.4439C2242.3093,-601.2242 2234.7303,-599.2317 2227.5,-598.0009 1850.6153,-533.8466 882.9798,-633.9228 507.5,-562.0009 447.0569,-550.4233 382.1773,-526.1208 332.5999,-504.8147"/>
<polygon fill="#000000" stroke="#000000" points="333.7768,-501.5101 323.2102,-500.7368 330.9883,-507.9307 333.7768,-501.5101"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1016,-492.9012 517,-492.9012 517,-438.3003 1016,-438.3003 1016,-492.9012"/>
<text text-anchor="middle" x="766.5" y="-477.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> The most general premise is that Blocks are delineated by blank line</text>
<text text-anchor="middle" x="766.5" y="-462.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> whitespace. </text>
</g>
<!-- block_4&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_4&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2361.05,-603.3981C2353.3593,-601.2118 2345.2309,-599.2441 2337.5,-598.0009 2049.3145,-551.6611 1310.9962,-617.8418 1024.5,-562.0009 956.7894,-548.8035 883.4566,-519.8647 832.343,-497.1184"/>
<polygon fill="#000000" stroke="#000000" points="833.6198,-493.8551 823.0639,-492.9484 830.7505,-500.24 833.6198,-493.8551"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="1575,-492.8012 1034,-492.8012 1034,-438.4003 1575,-438.4003 1575,-492.8012"/>
<text text-anchor="middle" x="1304.5" y="-477.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> A paragraph of prose is the simplest block, and the default. &#160;A list with</text>
<text text-anchor="middle" x="1304.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> a tag line is a block also, as is a table. &#160;Most importantly for our short</text>
<text text-anchor="middle" x="1304.5" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> path, code blocks are enclosed in blocks as well.</text>
</g>
<!-- block_5&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>block_5&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2481.8753,-603.3115C2473.8801,-601.1902 2465.4793,-599.2695 2457.5,-598.0009 2073.5484,-536.9578 1965.5017,-634.2491 1583.5,-562.0009 1510.6707,-548.2267 1431.0795,-519.2463 1375.6136,-496.6385"/>
<polygon fill="#000000" stroke="#000000" points="1376.8152,-493.3483 1366.2354,-492.7829 1374.1535,-499.8225 1376.8152,-493.3483"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="2134,-561.9012 1593,-561.9012 1593,-369.3003 2134,-369.3003 2134,-561.9012"/>
<text text-anchor="middle" x="1863.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking needs to identify when it has structure, and when prose, on a </text>
<text text-anchor="middle" x="1863.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> line&#45;by&#45;line basis. &#160;It must also apply the cling rule to make sure that</text>
<text text-anchor="middle" x="1863.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> e.g. tags are part of the block indicated by whitespacing. </text>
<text text-anchor="middle" x="1863.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking need not, and mostly should not, parse within structure or prose.</text>
<text text-anchor="middle" x="1863.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> These categories are determined by the beginning of a line, making this</text>
<text text-anchor="middle" x="1863.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> tractable. </text>
<text text-anchor="middle" x="1863.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> The cling rule requires lookahead. LPEG is quite capable of this, as is </text>
<text text-anchor="middle" x="1863.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> packrat PEG parsing generally. &#160;In the bootstrap implementation, we will</text>
<text text-anchor="middle" x="1863.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse once for ownership, again (in the `lines` array of each Section) for</text>
<text text-anchor="middle" x="1863.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> blocking, and a final time to parse within blocks. </text>
</g>
<!-- block_6&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_6&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2609.8551,-603.4787C2601.8442,-601.3709 2593.4552,-599.4126 2585.5,-598.0009 2394.2295,-564.0604 2337.696,-601.2995 2144.1178,-562.2499"/>
<polygon fill="#000000" stroke="#000000" points="2144.696,-558.7956 2134.1955,-560.2063 2143.2838,-565.6517 2144.696,-558.7956"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2651,-508.8011 2152,-508.8011 2152,-422.4004 2651,-422.4004 2651,-508.8011"/>
<text text-anchor="middle" x="2401.5" y="-493.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Grimoire is intended to work, in linear time, as a single&#45;pass PEG</text>
<text text-anchor="middle" x="2401.5" y="-478.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> grammar. &#160;Presently (Feb 2018) I&#39;m intending to prototype that with </text>
<text text-anchor="middle" x="2401.5" y="-462.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> PEGylator and port it to `hammer` with a `quipu` back&#45;end. </text>
</g>
<!-- block_7&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_7&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2745.1849,-601.9867C2694.2402,-581.7701 2597.7018,-543.4603 2519.8808,-512.5783"/>
<polygon fill="#000000" stroke="#000000" points="2521.0734,-509.2861 2510.4875,-508.8507 2518.4914,-515.7925 2521.0734,-509.2861"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2746.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2746.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 34&#45;45</text>
</g>
<!-- block_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>block_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2884.0719,-599.9402C2868.4047,-589.8862 2848.5412,-576.1827 2832.5,-562.0009 2807.837,-540.1968 2783.1843,-511.7059 2766.6375,-491.3636"/>
<polygon fill="#000000" stroke="#000000" points="2769.275,-489.0582 2760.281,-483.4582 2763.8198,-493.4446 2769.275,-489.0582"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="2895.5,-483.6007 2841.5,-483.6007 2841.5,-447.6007 2895.5,-447.6007 2895.5,-483.6007"/>
</g>
<!-- block_8&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_8&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2905.4338,-597.8592C2898.2126,-572.0004 2884.8935,-524.3053 2876.378,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="2879.6449,-492.497 2873.5841,-483.8069 2872.9028,-494.3798 2879.6449,-492.497"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3077,-483.6007 2914,-483.6007 2914,-447.6007 3077,-447.6007 3077,-483.6007"/>
<text text-anchor="middle" x="2995.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Metatable for Blocks</text>
</g>
<!-- block_9&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_9&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3108.5663,-598.4538C3086.1674,-572.1351 3043.7295,-522.2704 3017.6964,-491.6815"/>
<polygon fill="#000000" stroke="#000000" points="3020.2829,-489.3204 3011.1363,-483.9734 3014.9521,-493.8572 3020.2829,-489.3204"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="3172.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3172.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 49&#45;69</text>
</g>
<!-- block_10&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>block_10&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3280.2663,-598.4538C3258.8933,-572.1054 3218.3775,-522.158 3193.5721,-491.5781"/>
<polygon fill="#000000" stroke="#000000" points="3196.0391,-489.0637 3187.0212,-483.5023 3190.6028,-493.4735 3196.0391,-489.0637"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="3321.5,-483.6007 3267.5,-483.6007 3267.5,-447.6007 3321.5,-447.6007 3321.5,-483.6007"/>
</g>
<!-- block_10&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>block_10&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3294.5,-597.8592C3294.5,-572.0004 3294.5,-524.3053 3294.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3298.0001,-493.8068 3294.5,-483.8069 3291.0001,-493.8069 3298.0001,-493.8068"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3565.5,-483.6007 3339.5,-483.6007 3339.5,-447.6007 3565.5,-447.6007 3565.5,-483.6007"/>
<text text-anchor="middle" x="3452.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">Parse the prose within a block</text>
</g>
<!-- block_11&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>block_11&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3440.1887,-597.8592C3442.5958,-572.0004 3447.0355,-524.3053 3449.874,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3453.3633,-494.0882 3450.8053,-483.8069 3446.3934,-493.4394 3453.3633,-494.0882"/>
</g>
<!-- codeblock_33 -->
<g id="node34" class="node">
<title>codeblock_33</title>
<ellipse fill="none" stroke="#000000" cx="3660.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3660.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 73&#45;87</text>
</g>
<!-- block_12&#45;&gt;codeblock_33 -->
<g id="edge33" class="edge">
<title>block_12&#45;&gt;codeblock_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3660.5,-597.8592C3660.5,-572.0004 3660.5,-524.3053 3660.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3664.0001,-493.8068 3660.5,-483.8069 3657.0001,-493.8069 3664.0001,-493.8068"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3809.5,-483.6007 3755.5,-483.6007 3755.5,-447.6007 3809.5,-447.6007 3809.5,-483.6007"/>
</g>
<!-- block_12&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_12&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3694.0754,-601.4721C3711.7485,-592.3594 3732.5788,-579.0844 3746.5,-562.0009 3762.7195,-542.0972 3772.0738,-514.1588 3777.1594,-493.4802"/>
<polygon fill="#000000" stroke="#000000" points="3780.58,-494.2218 3779.3839,-483.6947 3773.7542,-492.6701 3780.58,-494.2218"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4201,-484.9013 3828,-484.9013 3828,-446.3002 4201,-446.3002 4201,-484.9013"/>
<text text-anchor="middle" x="4014.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="4014.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- block_13&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>block_13&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3915.567,-598.4538C3934.8717,-572.5304 3971.1877,-523.7631 3994.0422,-493.0727"/>
<polygon fill="#000000" stroke="#000000" points="3996.9405,-495.0408 4000.106,-484.9299 3991.3261,-490.8599 3996.9405,-495.0408"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="4300.5" cy="-465.6007" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="4300.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 93&#45;115</text>
</g>
<!-- block_14&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>block_14&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4300.5,-597.8592C4300.5,-572.0004 4300.5,-524.3053 4300.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="4304.0001,-493.8068 4300.5,-483.8069 4297.0001,-493.8069 4304.0001,-493.8068"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="4454.5,-483.6007 4400.5,-483.6007 4400.5,-447.6007 4454.5,-447.6007 4454.5,-483.6007"/>
</g>
<!-- block_14&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>block_14&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4336.929,-601.4572C4355.4333,-592.4799 4377.0069,-579.3368 4391.5,-562.0009 4407.9683,-542.3026 4417.2921,-514.339 4422.3029,-493.5988"/>
<polygon fill="#000000" stroke="#000000" points="4425.7321,-494.3012 4424.487,-483.7798 4418.8991,-492.7813 4425.7321,-494.3012"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="4622,-483.6007 4473,-483.6007 4473,-447.6007 4622,-447.6007 4622,-483.6007"/>
<text text-anchor="middle" x="4547.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor/module</text>
</g>
<!-- block_15&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>block_15&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4501.7724,-597.8592C4510.752,-571.8875 4527.3474,-523.8884 4537.8841,-493.413"/>
<polygon fill="#000000" stroke="#000000" points="4541.2455,-494.4016 4541.2053,-483.8069 4534.6298,-492.1142 4541.2455,-494.4016"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="4727.5" cy="-465.6007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4727.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 120&#45;142</text>
</g>
<!-- block_16&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>block_16&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4727.5,-597.8592C4727.5,-572.0004 4727.5,-524.3053 4727.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="4731.0001,-493.8068 4727.5,-483.8069 4724.0001,-493.8069 4731.0001,-493.8068"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="4886.5,-483.6007 4832.5,-483.6007 4832.5,-447.6007 4886.5,-447.6007 4886.5,-483.6007"/>
</g>
<!-- block_16&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>block_16&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4766.8815,-601.4537C4786.185,-592.6047 4808.4545,-579.5796 4823.5,-562.0009 4840.1953,-542.4946 4849.4913,-514.5075 4854.434,-493.7096"/>
<polygon fill="#000000" stroke="#000000" points="4857.871,-494.3755 4856.5811,-483.8594 4851.0316,-492.8846 4857.871,-494.3755"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="5186.5,-492.8012 4904.5,-492.8012 4904.5,-438.4003 5186.5,-438.4003 5186.5,-492.8012"/>
<text text-anchor="middle" x="5045.5" y="-477.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Sorts lines into structure and prose.</text>
<text text-anchor="middle" x="5045.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5045.5" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line : taken from block.lines</text>
</g>
<!-- block_17&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>block_17&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4971.4658,-598.1574C4984.6595,-574.5344 5008.2368,-532.3196 5025.2449,-501.8671"/>
<polygon fill="#000000" stroke="#000000" points="5028.4731,-503.2648 5030.2936,-492.8276 5022.3617,-499.8515 5028.4731,-503.2648"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="5550,-500.8011 5205,-500.8011 5205,-430.4004 5550,-430.4004 5550,-500.8011"/>
<text text-anchor="middle" x="5377.5" y="-485.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; returns: </text>
<text text-anchor="middle" x="5377.5" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;1. true for structure, false for prose</text>
<text text-anchor="middle" x="5377.5" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;2. id of structure line or &quot;&quot; for prose</text>
</g>
<!-- block_18&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_18&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5260.0171,-598.4538C5279.3281,-576.6164 5312.9739,-538.5687 5339.3235,-508.7718"/>
<polygon fill="#000000" stroke="#000000" points="5342.1947,-510.8085 5346.1972,-500.9988 5336.9509,-506.1714 5342.1947,-510.8085"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="5655.5" cy="-465.6007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5655.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 154&#45;170</text>
</g>
<!-- block_19&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>block_19&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5655.5,-597.8592C5655.5,-572.0004 5655.5,-524.3053 5655.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="5659.0001,-493.8068 5655.5,-483.8069 5652.0001,-493.8069 5659.0001,-493.8068"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="5814.5,-483.6007 5760.5,-483.6007 5760.5,-447.6007 5814.5,-447.6007 5814.5,-483.6007"/>
</g>
<!-- block_19&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>block_19&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5694.8815,-601.4537C5714.185,-592.6047 5736.4545,-579.5796 5751.5,-562.0009 5768.1953,-542.4946 5777.4913,-514.5075 5782.434,-493.7096"/>
<polygon fill="#000000" stroke="#000000" points="5785.871,-494.3755 5784.5811,-483.8594 5779.0316,-492.8846 5785.871,-494.3755"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="2901.5,-248.3007 2591.5,-248.3007 2591.5,-84.8999 2901.5,-84.8999 2901.5,-248.3007"/>
<text text-anchor="middle" x="2746.5" y="-233.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2746.5" y="-201.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2746.5" y="-186.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2746.5" y="-170.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Structure = require &quot;grym/structure&quot;</text>
<text text-anchor="middle" x="2746.5" y="-155.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Prose = require &quot;grym/prose&quot;</text>
<text text-anchor="middle" x="2746.5" y="-124.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="2746.5" y="-108.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="2746.5" y="-93.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>codeblock_25&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2746.5,-447.347C2746.5,-410.6241 2746.5,-325.609 2746.5,-258.6897"/>
<polygon fill="#000000" stroke="#000000" points="2750.0001,-258.5359 2746.5,-248.5359 2743.0001,-258.5359 2750.0001,-258.5359"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3380,-318.001 2965,-318.001 2965,-15.1995 3380,-15.1995 3380,-318.001"/>
<text text-anchor="middle" x="3172.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local B = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="3172.5" y="-287.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__index = B</text>
<text text-anchor="middle" x="3172.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__tostring = function(block) </text>
<text text-anchor="middle" x="3172.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;Block&quot;</text>
<text text-anchor="middle" x="3172.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3172.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.addLine(block, line)</text>
<text text-anchor="middle" x="3172.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_hash_p, line) then</text>
<text text-anchor="middle" x="3172.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;hashline&quot;)</text>
<text text-anchor="middle" x="3172.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tagline_handle_p, line) then</text>
<text text-anchor="middle" x="3172.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;handleline&quot;)</text>
<text text-anchor="middle" x="3172.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Eventually Blocks won&#39;t have lines, meantime:</text>
<text text-anchor="middle" x="3172.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3172.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines[#block.lines + 1] = line</text>
<text text-anchor="middle" x="3172.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3172.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="3172.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.5,-447.347C3172.5,-422.7256 3172.5,-376.3959 3172.5,-328.3664"/>
<polygon fill="#000000" stroke="#000000" points="3176.0001,-328.0988 3172.5,-318.0988 3169.0001,-328.0988 3176.0001,-328.0988"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="3815.5,-270.8008 3505.5,-270.8008 3505.5,-62.3998 3815.5,-62.3998 3815.5,-270.8008"/>
<text text-anchor="middle" x="3660.5" y="-255.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.parseProse(block)</text>
<text text-anchor="middle" x="3660.5" y="-240.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] then</text>
<text text-anchor="middle" x="3660.5" y="-224.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="3660.5" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="3660.5" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3660.5" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3660.5" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot; &quot;</text>
<text text-anchor="middle" x="3660.5" y="-147.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="3660.5" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. &quot; &quot; .. v</text>
<text text-anchor="middle" x="3660.5" y="-116.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3660.5" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Parse here</text>
<text text-anchor="middle" x="3660.5" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="3660.5" y="-70.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>codeblock_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3660.5,-447.347C3660.5,-414.6183 3660.5,-343.5311 3660.5,-281.082"/>
<polygon fill="#000000" stroke="#000000" points="3664.0001,-280.7408 3660.5,-270.7408 3657.0001,-280.7409 3664.0001,-280.7408"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4461,-333.3009 4088,-333.3009 4088,.1003 4461,.1003 4461,-333.3009"/>
<text text-anchor="middle" x="4274.5" y="-318.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toValue(block)</text>
<text text-anchor="middle" x="4274.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.val = &quot;&quot;</text>
<text text-anchor="middle" x="4274.5" y="-287.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="4274.5" y="-271.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.val = block.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4274.5" y="-256.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4274.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block.val</text>
<text text-anchor="middle" x="4274.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4274.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toMarkdown(block)</text>
<text text-anchor="middle" x="4274.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] and block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="4274.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]:toMarkdown()</text>
<text text-anchor="middle" x="4274.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4274.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;</text>
<text text-anchor="middle" x="4274.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block:toValue()</text>
<text text-anchor="middle" x="4274.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4274.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.dotLabel(block)</text>
<text text-anchor="middle" x="4274.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;block &quot; .. tostring(block.line_first) </text>
<text text-anchor="middle" x="4274.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(block.line_last)</text>
<text text-anchor="middle" x="4274.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4298.9127,-447.347C4296.9949,-425.2916 4293.5623,-385.8167 4289.8656,-343.3046"/>
<polygon fill="#000000" stroke="#000000" points="4293.3507,-342.9809 4288.9975,-333.3217 4286.377,-343.5873 4293.3507,-342.9809"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="5027.5,-332.7011 4479.5,-332.7011 4479.5,-.4994 5027.5,-.4994 5027.5,-332.7011"/>
<text text-anchor="middle" x="4753.5" y="-317.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">local b = {}</text>
<text text-anchor="middle" x="4753.5" y="-286.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Block, lines, linum)</text>
<text text-anchor="middle" x="4753.5" y="-270.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = setmetatable({}, B)</text>
<text text-anchor="middle" x="4753.5" y="-255.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.lines = {}</text>
<text text-anchor="middle" x="4753.5" y="-240.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.line_first = linum</text>
<text text-anchor="middle" x="4753.5" y="-224.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (lines) then </text>
<text text-anchor="middle" x="4753.5" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(lines) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4753.5" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(lines)</text>
<text text-anchor="middle" x="4753.5" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(lines) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4753.5" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, l in ipairs(lines) do</text>
<text text-anchor="middle" x="4753.5" y="-147.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(l)</text>
<text text-anchor="middle" x="4753.5" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4753.5" y="-116.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4753.5" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;Error: in block.new type of `lines` is &quot; .. type(lines))</text>
<text text-anchor="middle" x="4753.5" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4753.5" y="-70.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4753.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.id = &quot;block&quot;</text>
<text text-anchor="middle" x="4753.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="4753.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>codeblock_41&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4729.0873,-447.347C4731.0103,-425.2327 4734.4561,-385.606 4738.164,-342.9644"/>
<polygon fill="#000000" stroke="#000000" points="4741.6551,-343.2174 4739.0347,-332.9517 4734.6815,-342.6109 4741.6551,-343.2174"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="5817.5,-286.8008 5493.5,-286.8008 5493.5,-46.3998 5817.5,-46.3998 5817.5,-286.8008"/>
<text text-anchor="middle" x="5655.5" y="-271.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function structureOrProse(line)</text>
<text text-anchor="middle" x="5655.5" y="-256.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_p, line) then</text>
<text text-anchor="middle" x="5655.5" y="-240.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tagline&quot;</text>
<text text-anchor="middle" x="5655.5" y="-225.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.listline_p, line) then</text>
<text text-anchor="middle" x="5655.5" y="-209.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;listline&quot;</text>
<text text-anchor="middle" x="5655.5" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tableline_p, line) then</text>
<text text-anchor="middle" x="5655.5" y="-179.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tableline&quot;</text>
<text text-anchor="middle" x="5655.5" y="-163.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5655.5" y="-148.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false, &quot;&quot;</text>
<text text-anchor="middle" x="5655.5" y="-132.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5655.5" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="5655.5" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__index&quot;] = b</text>
<text text-anchor="middle" x="5655.5" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, b)</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5655.5,-447.347C5655.5,-417.3826 5655.5,-355.2656 5655.5,-297.062"/>
<polygon fill="#000000" stroke="#000000" points="5659.0001,-297.0068 5655.5,-287.0068 5652.0001,-297.0069 5659.0001,-297.0068"/>
</g>
</g>
</svg>