<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5770pt" height="1354pt"
 viewBox="0.00 0.00 5769.50 1353.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1349.8018)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1349.8018 5765.5,-1349.8018 5765.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="2333.5" cy="-1327.8018" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="2333.5" y="-1323.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 180</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="2333.5" cy="-1255.8018" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2333.5" y="-1251.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;126</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2333.5,-1309.6331C2333.5,-1301.9327 2333.5,-1292.7761 2333.5,-1284.2184"/>
<polygon fill="#000000" stroke="#000000" points="2337.0001,-1284.215 2333.5,-1274.215 2330.0001,-1284.2151 2337.0001,-1284.215"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1759.5" cy="-1183.8018" rx="75.4657" ry="18"/>
<text text-anchor="middle" x="1759.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Block module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2270.1827,-1250.8885C2176.5438,-1243.1561 1995.7851,-1226.4442 1843.5,-1201.8018 1837.2198,-1200.7855 1830.7002,-1199.6082 1824.1955,-1198.3517"/>
<polygon fill="#000000" stroke="#000000" points="1824.5139,-1194.8463 1814.0226,-1196.3237 1823.1453,-1201.7112 1824.5139,-1194.8463"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="1898.5" cy="-1183.8018" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1898.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2270.678,-1250.2768C2194.8132,-1242.826 2063.6671,-1227.4483 1953.5,-1201.8018 1949.8611,-1200.9547 1946.1188,-1199.9738 1942.3799,-1198.916"/>
<polygon fill="#000000" stroke="#000000" points="1943.1482,-1195.4925 1932.5644,-1195.975 1941.1391,-1202.198 1943.1482,-1195.4925"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="2013.5" cy="-1183.8018" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="2013.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2278.6553,-1245.8429C2225.8178,-1235.9118 2143.7756,-1219.6053 2073.5,-1201.8018 2069.6372,-1200.8232 2065.6511,-1199.756 2061.656,-1198.6456"/>
<polygon fill="#000000" stroke="#000000" points="2062.3488,-1195.2036 2051.772,-1195.8223 2060.4261,-1201.9344 2062.3488,-1195.2036"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="2137.5" cy="-1183.8018" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="2137.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;14</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2293.8365,-1241.2315C2262.072,-1229.5629 2217.4516,-1213.1718 2184.0069,-1200.8859"/>
<polygon fill="#000000" stroke="#000000" points="2185.046,-1197.539 2174.4525,-1197.3761 2182.6323,-1204.1097 2185.046,-1197.539"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="2266.5" cy="-1183.8018" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2266.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 15&#45;27</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2316.9382,-1238.004C2308.6824,-1229.1321 2298.564,-1218.2587 2289.5626,-1208.5855"/>
<polygon fill="#000000" stroke="#000000" points="2292.0147,-1206.0828 2282.6401,-1201.1464 2286.8902,-1210.8514 2292.0147,-1206.0828"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="2401.5" cy="-1183.8018" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2401.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 28&#45;126</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2349.9609,-1238.3726C2358.335,-1229.5059 2368.6638,-1218.5696 2377.8706,-1208.8211"/>
<polygon fill="#000000" stroke="#000000" points="2380.6333,-1210.9934 2384.955,-1201.32 2375.5442,-1206.187 2380.6333,-1210.9934"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2787.5" cy="-1183.8018" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="2787.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 33&#45;50</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2390.5397,-1246.7558C2474.4696,-1233.4454 2630.9305,-1208.6322 2720.3095,-1194.4575"/>
<polygon fill="#000000" stroke="#000000" points="2721.0082,-1197.8906 2730.3365,-1192.8674 2719.9117,-1190.977 2721.0082,-1197.8906"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3246.5" cy="-1183.8018" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3246.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 51&#45;75</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2396.6144,-1250.8245C2560.4555,-1237.9039 2998.6912,-1203.3442 3173.2614,-1189.5774"/>
<polygon fill="#000000" stroke="#000000" points="3173.6819,-1193.0552 3183.3757,-1188.7798 3173.1315,-1186.0769 3173.6819,-1193.0552"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="3892.5" cy="-1183.8018" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3892.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 76&#45;91</text>
</g>
<!-- section_1&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.5035,-1252.7997C2648.8636,-1241.2372 3550.0241,-1199.6185 3817.2824,-1187.2756"/>
<polygon fill="#000000" stroke="#000000" points="3817.8236,-1190.7544 3827.6514,-1186.7967 3817.5006,-1183.7619 3817.8236,-1190.7544"/>
</g>
<!-- section_11 -->
<g id="node12" class="node">
<title>section_11</title>
<ellipse fill="none" stroke="#000000" cx="4763.5" cy="-1183.8018" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4763.5" y="-1179.6018" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 127&#45;180</text>
</g>
<!-- section_1&#45;&gt;section_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;section_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2398.8106,-1253.8666C2737.7308,-1243.8246 4295.1196,-1197.6797 4678.1962,-1186.3293"/>
<polygon fill="#000000" stroke="#000000" points="4678.4856,-1189.8224 4688.3775,-1186.0276 4678.2782,-1182.8254 4678.4856,-1189.8224"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-1068.602 0,-1068.602 0,-998.2012 499,-998.2012 499,-1068.602"/>
<text text-anchor="middle" x="249.5" y="-1037.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A Block is the container for the next level of granularity below</text>
<text text-anchor="middle" x="249.5" y="-1021.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> a Section. Any Section has a Header and one or more Blocks. Both the</text>
<text text-anchor="middle" x="249.5" y="-1006.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Header and the Block may be virtual, that is, without contents.</text>
</g>
<!-- block_3&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>block_3&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1865.4446,-1171.2781C1858.304,-1169.0561 1850.7266,-1167.0543 1843.5,-1165.8018 1550.866,-1115.0831 799.0244,-1186.5514 507.5,-1129.8018 447.2022,-1118.0639 382.449,-1093.8296 332.8975,-1072.5973"/>
<polygon fill="#000000" stroke="#000000" points="334.079,-1069.2949 323.5116,-1068.5336 331.2978,-1075.7187 334.079,-1069.2949"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1016,-1060.702 517,-1060.702 517,-1006.1012 1016,-1006.1012 1016,-1060.702"/>
<text text-anchor="middle" x="766.5" y="-1045.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> The most general premise is that Blocks are delineated by blank line</text>
<text text-anchor="middle" x="766.5" y="-1030.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> whitespace. </text>
</g>
<!-- block_4&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>block_4&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1976.7183,-1171.1756C1969.1234,-1169.0204 1961.1165,-1167.0708 1953.5,-1165.8018 1545.9195,-1097.8944 1429.6129,-1211.1451 1024.5,-1129.8018 957.0859,-1116.2656 884.0012,-1087.5196 832.8875,-1064.922"/>
<polygon fill="#000000" stroke="#000000" points="834.1637,-1061.6589 823.6054,-1060.7792 831.3106,-1068.0511 834.1637,-1061.6589"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1575,-1060.6021 1034,-1060.6021 1034,-1006.2011 1575,-1006.2011 1575,-1060.6021"/>
<text text-anchor="middle" x="1304.5" y="-1045.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> A paragraph of prose is the simplest block, and the default. &#160;A list with</text>
<text text-anchor="middle" x="1304.5" y="-1029.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> a tag line is a block also, as is a table. &#160;Most importantly for our short</text>
<text text-anchor="middle" x="1304.5" y="-1014.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> path, code blocks are enclosed in blocks as well.</text>
</g>
<!-- block_5&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2097.4986,-1171.2238C2089.6093,-1169.1209 2081.3442,-1167.1786 2073.5,-1165.8018 1858.4232,-1128.051 1797.3805,-1173.8277 1583.5,-1129.8018 1511.4948,-1114.98 1432.5809,-1086.4996 1377.1107,-1064.322"/>
<polygon fill="#000000" stroke="#000000" points="1378.3083,-1061.0312 1367.7249,-1060.5401 1375.6921,-1067.5239 1378.3083,-1061.0312"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="2134,-1129.7021 1593,-1129.7021 1593,-937.1011 2134,-937.1011 2134,-1129.7021"/>
<text text-anchor="middle" x="1863.5" y="-1114.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking needs to identify when it has structure, and when prose, on a </text>
<text text-anchor="middle" x="1863.5" y="-1099.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> line&#45;by&#45;line basis. &#160;It must also apply the cling rule to make sure that</text>
<text text-anchor="middle" x="1863.5" y="-1083.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> e.g. tags are part of the block indicated by whitespacing. </text>
<text text-anchor="middle" x="1863.5" y="-1068.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-1053.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking need not, and mostly should not, parse within structure or prose.</text>
<text text-anchor="middle" x="1863.5" y="-1037.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> These categories are determined by the beginning of a line, making this</text>
<text text-anchor="middle" x="1863.5" y="-1022.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> tractable. </text>
<text text-anchor="middle" x="1863.5" y="-1006.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-991.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> The cling rule requires lookahead. LPEG is quite capable of this, as is </text>
<text text-anchor="middle" x="1863.5" y="-976.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> packrat PEG parsing generally. &#160;In the bootstrap implementation, we will</text>
<text text-anchor="middle" x="1863.5" y="-960.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse once for ownership, again (in the `lines` array of each Section) for</text>
<text text-anchor="middle" x="1863.5" y="-945.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> blocking, and a final time to parse within blocks. </text>
</g>
<!-- block_6&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>block_6&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2229.6681,-1170.0561C2204.9338,-1160.8252 2169.8644,-1147.7372 2131.128,-1133.2808"/>
<polygon fill="#000000" stroke="#000000" points="2132.337,-1129.9962 2121.7444,-1129.7788 2129.8894,-1136.5544 2132.337,-1129.9962"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="2651,-1068.602 2152,-1068.602 2152,-998.2012 2651,-998.2012 2651,-1068.602"/>
<text text-anchor="middle" x="2401.5" y="-1053.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> Grimoire is intended to work, in linear time, as a single&#45;pass PEG</text>
<text text-anchor="middle" x="2401.5" y="-1037.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> grammar. &#160;Presently (Feb 2018) I&#39;m intending to prototype that with </text>
<text text-anchor="middle" x="2401.5" y="-1022.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> PEGylator and port it to `hammer` with a `quipu` back&#45;end. </text>
</g>
<!-- block_7&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>block_7&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2401.5,-1165.66C2401.5,-1144.3675 2401.5,-1108.2697 2401.5,-1079.1607"/>
<polygon fill="#000000" stroke="#000000" points="2405.0001,-1078.7929 2401.5,-1068.7929 2398.0001,-1078.793 2405.0001,-1078.7929"/>
</g>
<!-- header_17 -->
<g id="node18" class="node">
<title>header_17</title>
<ellipse fill="none" stroke="#000000" cx="2723.5" cy="-1033.4016" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="2723.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_8&#45;&gt;header_17 -->
<g id="edge17" class="edge">
<title>section_8&#45;&gt;header_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2779.7801,-1165.66C2768.6803,-1139.5754 2748.1254,-1091.2714 2735.1663,-1060.8174"/>
<polygon fill="#000000" stroke="#000000" points="2738.3834,-1059.4388 2731.2473,-1051.6077 2731.9423,-1062.1797 2738.3834,-1059.4388"/>
</g>
<!-- block_18 -->
<g id="node19" class="node">
<title>block_18</title>
<ellipse fill="none" stroke="#000000" cx="2852.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2852.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 33&#45;34</text>
</g>
<!-- section_8&#45;&gt;block_18 -->
<g id="edge18" class="edge">
<title>section_8&#45;&gt;block_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2795.3405,-1165.66C2806.6138,-1139.5754 2827.4898,-1091.2714 2840.6514,-1060.8174"/>
<polygon fill="#000000" stroke="#000000" points="2843.8773,-1062.1757 2844.6317,-1051.6077 2837.4517,-1059.3986 2843.8773,-1062.1757"/>
</g>
<!-- block_19 -->
<g id="node20" class="node">
<title>block_19</title>
<ellipse fill="none" stroke="#000000" cx="2982.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2982.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 35&#45;50</text>
</g>
<!-- section_8&#45;&gt;block_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;block_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2835.2724,-1171.354C2861.5475,-1162.7909 2893.5706,-1149.3761 2917.5,-1129.8018 2940.533,-1110.9607 2958.5936,-1081.8511 2969.7704,-1060.5476"/>
<polygon fill="#000000" stroke="#000000" points="2973.0205,-1061.8765 2974.4144,-1051.3738 2966.7752,-1058.7149 2973.0205,-1061.8765"/>
</g>
<!-- header_24 -->
<g id="node25" class="node">
<title>header_24</title>
<ellipse fill="none" stroke="#000000" cx="3158.5" cy="-1033.4016" rx="102.5283" ry="18"/>
<text text-anchor="middle" x="3158.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Metatable for Blocks</text>
</g>
<!-- section_9&#45;&gt;header_24 -->
<g id="edge24" class="edge">
<title>section_9&#45;&gt;header_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3236.0597,-1165.9583C3220.7936,-1139.8672 3192.2576,-1091.0965 3174.3805,-1060.5429"/>
<polygon fill="#000000" stroke="#000000" points="3177.2722,-1058.5545 3169.2012,-1051.6909 3171.2304,-1062.0896 3177.2722,-1058.5545"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="3334.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3334.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 51&#45;52</text>
</g>
<!-- section_9&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_9&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3256.9403,-1165.9583C3272.2889,-1139.7261 3301.0512,-1090.5686 3318.9084,-1060.0491"/>
<polygon fill="#000000" stroke="#000000" points="3322.044,-1061.6206 3324.0733,-1051.2219 3316.0022,-1058.0854 3322.044,-1061.6206"/>
</g>
<!-- block_26 -->
<g id="node27" class="node">
<title>block_26</title>
<ellipse fill="none" stroke="#000000" cx="3464.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3464.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 53&#45;75</text>
</g>
<!-- section_9&#45;&gt;block_26 -->
<g id="edge26" class="edge">
<title>section_9&#45;&gt;block_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3300.8831,-1173.5338C3332.1333,-1165.5734 3370.7587,-1152.0353 3399.5,-1129.8018 3423.2821,-1111.4046 3441.395,-1081.7789 3452.3844,-1060.2204"/>
<polygon fill="#000000" stroke="#000000" points="3455.5269,-1061.7613 3456.7904,-1051.242 3449.2428,-1058.6774 3455.5269,-1061.7613"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="3678.5" cy="-1033.4016" rx="140.2419" ry="18"/>
<text text-anchor="middle" x="3678.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Parse the prose within a block</text>
</g>
<!-- section_10&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_10&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3868.3675,-1166.8413C3830.1433,-1139.9772 3755.5653,-1087.5634 3712.1219,-1057.0312"/>
<polygon fill="#000000" stroke="#000000" points="3714.0624,-1054.1171 3703.8683,-1051.2306 3710.0373,-1059.8442 3714.0624,-1054.1171"/>
</g>
<!-- block_32 -->
<g id="node33" class="node">
<title>block_32</title>
<ellipse fill="none" stroke="#000000" cx="3892.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3892.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 76&#45;77</text>
</g>
<!-- section_10&#45;&gt;block_32 -->
<g id="edge32" class="edge">
<title>section_10&#45;&gt;block_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3892.5,-1165.66C3892.5,-1139.8013 3892.5,-1092.1062 3892.5,-1061.6124"/>
<polygon fill="#000000" stroke="#000000" points="3896.0001,-1061.6077 3892.5,-1051.6077 3889.0001,-1061.6077 3896.0001,-1061.6077"/>
</g>
<!-- block_33 -->
<g id="node34" class="node">
<title>block_33</title>
<ellipse fill="none" stroke="#000000" cx="4022.5" cy="-1033.4016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="4022.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;91</text>
</g>
<!-- section_10&#45;&gt;block_33 -->
<g id="edge33" class="edge">
<title>section_10&#45;&gt;block_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3916.1675,-1166.7737C3929.1584,-1156.8053 3945.0983,-1143.5097 3957.5,-1129.8018 3977.1117,-1108.1244 3995.336,-1080.1229 4007.4664,-1059.8896"/>
<polygon fill="#000000" stroke="#000000" points="4010.5312,-1061.5826 4012.5941,-1051.1905 4004.5009,-1058.028 4010.5312,-1061.5826"/>
</g>
<!-- section_34 -->
<g id="node35" class="node">
<title>section_34</title>
<ellipse fill="none" stroke="#000000" cx="4206.5" cy="-1033.4016" rx="70.655" ry="18"/>
<text text-anchor="middle" x="4206.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 92&#45;126</text>
</g>
<!-- section_10&#45;&gt;section_34 -->
<g id="edge34" class="edge">
<title>section_10&#45;&gt;section_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3948.9672,-1174.5419C3989.1689,-1166.4551 4043.6202,-1152.3961 4087.5,-1129.8018 4124.0287,-1110.9927 4159.8182,-1079.7652 4182.4507,-1057.9654"/>
<polygon fill="#000000" stroke="#000000" points="4184.9046,-1060.4611 4189.6037,-1050.9654 4180.0086,-1055.4581 4184.9046,-1060.4611"/>
</g>
<!-- header_46 -->
<g id="node47" class="node">
<title>header_46</title>
<ellipse fill="none" stroke="#000000" cx="4506.5" cy="-1033.4016" rx="99.6298" ry="18"/>
<text text-anchor="middle" x="4506.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Constructor/module</text>
</g>
<!-- section_11&#45;&gt;header_46 -->
<g id="edge46" class="edge">
<title>section_11&#45;&gt;header_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4712.3743,-1170.5511C4682.5722,-1161.5652 4644.976,-1147.9956 4614.5,-1129.8018 4581.8267,-1110.2963 4550.024,-1080.1432 4529.491,-1058.76"/>
<polygon fill="#000000" stroke="#000000" points="4531.8675,-1056.1791 4522.4553,-1051.3148 4526.7798,-1060.9869 4531.8675,-1056.1791"/>
</g>
<!-- block_47 -->
<g id="node48" class="node">
<title>block_47</title>
<ellipse fill="none" stroke="#000000" cx="4689.5" cy="-1033.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4689.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 127&#45;128</text>
</g>
<!-- section_11&#45;&gt;block_47 -->
<g id="edge47" class="edge">
<title>section_11&#45;&gt;block_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4754.5739,-1165.66C4741.7397,-1139.5754 4717.9731,-1091.2714 4702.9891,-1060.8174"/>
<polygon fill="#000000" stroke="#000000" points="4706.0131,-1059.0353 4698.4578,-1051.6077 4699.7321,-1062.1256 4706.0131,-1059.0353"/>
</g>
<!-- block_48 -->
<g id="node49" class="node">
<title>block_48</title>
<ellipse fill="none" stroke="#000000" cx="4838.5" cy="-1033.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4838.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 129&#45;157</text>
</g>
<!-- section_11&#45;&gt;block_48 -->
<g id="edge48" class="edge">
<title>section_11&#45;&gt;block_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4772.5468,-1165.66C4785.5543,-1139.5754 4809.6421,-1091.2714 4824.8286,-1060.8174"/>
<polygon fill="#000000" stroke="#000000" points="4828.0907,-1062.1187 4829.4212,-1051.6077 4821.8263,-1058.9948 4828.0907,-1062.1187"/>
</g>
<!-- block_49 -->
<g id="node50" class="node">
<title>block_49</title>
<ellipse fill="none" stroke="#000000" cx="5154.5" cy="-1033.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5154.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 158&#45;162</text>
</g>
<!-- section_11&#45;&gt;block_49 -->
<g id="edge49" class="edge">
<title>section_11&#45;&gt;block_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4806.3192,-1168.8346C4836.4038,-1158.2095 4877.5353,-1143.4636 4913.5,-1129.8018 4981.8237,-1103.8478 5060.3075,-1072.0868 5108.6539,-1052.2942"/>
<polygon fill="#000000" stroke="#000000" points="5109.984,-1055.5317 5117.9095,-1048.5005 5107.3291,-1049.0547 5109.984,-1055.5317"/>
</g>
<!-- block_50 -->
<g id="node51" class="node">
<title>block_50</title>
<ellipse fill="none" stroke="#000000" cx="5599.5" cy="-1033.4016" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5599.5" y="-1029.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 163&#45;180</text>
</g>
<!-- section_11&#45;&gt;block_50 -->
<g id="edge50" class="edge">
<title>section_11&#45;&gt;block_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4835.8158,-1178.568C4927.8327,-1171.1894 5091.4092,-1155.6612 5229.5,-1129.8018 5343.6929,-1108.4175 5474.6835,-1071.2154 5546.1303,-1049.8186"/>
<polygon fill="#000000" stroke="#000000" points="5547.2406,-1053.1396 5555.8087,-1046.9076 5545.2243,-1046.4363 5547.2406,-1053.1396"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="2879.5,-875.9014 2825.5,-875.9014 2825.5,-839.9014 2879.5,-839.9014 2879.5,-875.9014"/>
</g>
<!-- block_18&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_18&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2852.5,-1015.281C2852.5,-984.7244 2852.5,-922.7292 2852.5,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="2856.0001,-885.9233 2852.5,-875.9234 2849.0001,-885.9234 2856.0001,-885.9233"/>
</g>
<!-- codeblock_21 -->
<g id="node22" class="node">
<title>codeblock_21</title>
<ellipse fill="none" stroke="#000000" cx="2978.5" cy="-857.9014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2978.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 35&#45;48</text>
</g>
<!-- block_19&#45;&gt;codeblock_21 -->
<g id="edge21" class="edge">
<title>block_19&#45;&gt;codeblock_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2982.087,-1015.281C2981.3906,-984.7244 2979.9776,-922.7292 2979.148,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="2982.6378,-885.841 2978.9108,-875.9234 2975.6396,-886.0006 2982.6378,-885.841"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="3127.5,-875.9014 3073.5,-875.9014 3073.5,-839.9014 3127.5,-839.9014 3127.5,-875.9014"/>
</g>
<!-- block_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>block_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2994.2272,-1015.5884C3007.01,-996.2068 3028.1008,-964.3304 3046.5,-937.0014 3058.2991,-919.4758 3071.6885,-899.861 3082.1828,-884.5484"/>
<polygon fill="#000000" stroke="#000000" points="3085.2227,-886.3042 3087.9933,-876.078 3079.4503,-882.3445 3085.2227,-886.3042"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="3133.5,-709.6017 2823.5,-709.6017 2823.5,-515.4003 3133.5,-515.4003 3133.5,-709.6017"/>
<text text-anchor="middle" x="2978.5" y="-694.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2978.5" y="-663.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2978.5" y="-647.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2978.5" y="-632.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local Structure = require &quot;grym/structure&quot;</text>
<text text-anchor="middle" x="2978.5" y="-617.001" font-family="Inconsolata" font-size="14.00" fill="#000000">local Prose = require &quot;grym/prose&quot;</text>
<text text-anchor="middle" x="2978.5" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;status&quot;</text>
<text text-anchor="middle" x="2978.5" y="-554.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="2978.5" y="-538.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="2978.5" y="-523.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
</g>
<!-- codeblock_21&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>codeblock_21&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2978.5,-839.8565C2978.5,-814.2824 2978.5,-765.4912 2978.5,-719.6449"/>
<polygon fill="#000000" stroke="#000000" points="2982.0001,-719.6108 2978.5,-709.6109 2975.0001,-719.6109 2982.0001,-719.6108"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="3361.5,-875.9014 3307.5,-875.9014 3307.5,-839.9014 3361.5,-839.9014 3361.5,-875.9014"/>
</g>
<!-- block_25&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>block_25&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3334.5,-1015.281C3334.5,-984.7244 3334.5,-922.7292 3334.5,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="3338.0001,-885.9233 3334.5,-875.9234 3331.0001,-885.9234 3338.0001,-885.9233"/>
</g>
<!-- codeblock_28 -->
<g id="node29" class="node">
<title>codeblock_28</title>
<ellipse fill="none" stroke="#000000" cx="3460.5" cy="-857.9014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3460.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 53&#45;73</text>
</g>
<!-- block_26&#45;&gt;codeblock_28 -->
<g id="edge28" class="edge">
<title>block_26&#45;&gt;codeblock_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3464.087,-1015.281C3463.3906,-984.7244 3461.9776,-922.7292 3461.148,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="3464.6378,-885.841 3460.9108,-875.9234 3457.6396,-886.0006 3464.6378,-885.841"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3609.5,-875.9014 3555.5,-875.9014 3555.5,-839.9014 3609.5,-839.9014 3609.5,-875.9014"/>
</g>
<!-- block_26&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_26&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3476.4638,-1015.6079C3497.2594,-984.6789 3540.1779,-920.8467 3564.5547,-884.5912"/>
<polygon fill="#000000" stroke="#000000" points="3567.6528,-886.2562 3570.328,-876.0047 3561.8437,-882.3504 3567.6528,-886.2562"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3668,-763.9018 3253,-763.9018 3253,-461.1002 3668,-461.1002 3668,-763.9018"/>
<text text-anchor="middle" x="3460.5" y="-748.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">local B = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="3460.5" y="-733.1012" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__index = B</text>
<text text-anchor="middle" x="3460.5" y="-701.7012" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__tostring = function(block) </text>
<text text-anchor="middle" x="3460.5" y="-686.3012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;Block&quot;</text>
<text text-anchor="middle" x="3460.5" y="-670.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3460.5" y="-639.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.addLine(block, line)</text>
<text text-anchor="middle" x="3460.5" y="-624.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_hash_p, line) then</text>
<text text-anchor="middle" x="3460.5" y="-608.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;hashline&quot;)</text>
<text text-anchor="middle" x="3460.5" y="-593.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tagline_handle_p, line) then</text>
<text text-anchor="middle" x="3460.5" y="-577.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;handleline&quot;)</text>
<text text-anchor="middle" x="3460.5" y="-562.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Eventually Blocks won&#39;t have lines, meantime:</text>
<text text-anchor="middle" x="3460.5" y="-547.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3460.5" y="-531.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines[#block.lines + 1] = line</text>
<text text-anchor="middle" x="3460.5" y="-516.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3460.5" y="-484.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="3460.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_28&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>codeblock_28&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3460.5,-839.8565C3460.5,-824.4471 3460.5,-800.6087 3460.5,-774.0642"/>
<polygon fill="#000000" stroke="#000000" points="3464.0001,-773.7702 3460.5,-763.7702 3457.0001,-773.7702 3464.0001,-773.7702"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="3805.5,-875.9014 3751.5,-875.9014 3751.5,-839.9014 3805.5,-839.9014 3805.5,-875.9014"/>
</g>
<!-- block_32&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_32&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3880.9417,-1015.6079C3860.8511,-984.6789 3819.3875,-920.8467 3795.837,-884.5912"/>
<polygon fill="#000000" stroke="#000000" points="3798.6419,-882.4842 3790.2594,-876.0047 3792.7717,-886.2973 3798.6419,-882.4842"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="3900.5" cy="-857.9014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3900.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;90</text>
</g>
<!-- block_33&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>block_33&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4010.6848,-1015.5212C3997.7837,-996.0821 3976.4325,-964.1569 3957.5,-937.0014 3945.1187,-919.2424 3930.8814,-899.4847 3919.7332,-884.1581"/>
<polygon fill="#000000" stroke="#000000" points="3922.2826,-881.7137 3913.5636,-875.6946 3916.626,-885.8372 3922.2826,-881.7137"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4049.5,-875.9014 3995.5,-875.9014 3995.5,-839.9014 4049.5,-839.9014 4049.5,-875.9014"/>
</g>
<!-- block_33&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_33&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4022.5,-1015.281C4022.5,-984.7244 4022.5,-922.7292 4022.5,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="4026.0001,-885.9233 4022.5,-875.9234 4019.0001,-885.9234 4026.0001,-885.9233"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="4119.5" cy="-857.9014" rx="51.9763" ry="18"/>
<text text-anchor="middle" x="4119.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : toValue</text>
</g>
<!-- section_34&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_34&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4197.5172,-1015.281C4182.1337,-984.2489 4150.6766,-920.7921 4132.7616,-884.6532"/>
<polygon fill="#000000" stroke="#000000" points="4135.8818,-883.067 4128.3044,-875.662 4129.6101,-886.1761 4135.8818,-883.067"/>
</g>
<!-- block_40 -->
<g id="node41" class="node">
<title>block_40</title>
<ellipse fill="none" stroke="#000000" cx="4245.5" cy="-857.9014" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="4245.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 92&#45;96</text>
</g>
<!-- section_34&#45;&gt;block_40 -->
<g id="edge40" class="edge">
<title>section_34&#45;&gt;block_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4210.5268,-1015.281C4217.3464,-984.5927 4231.2127,-922.1942 4239.286,-885.8644"/>
<polygon fill="#000000" stroke="#000000" points="4242.7424,-886.4445 4241.4951,-875.9234 4235.9091,-884.926 4242.7424,-886.4445"/>
</g>
<!-- block_41 -->
<g id="node42" class="node">
<title>block_41</title>
<ellipse fill="none" stroke="#000000" cx="4501.5" cy="-857.9014" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="4501.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 97&#45;126</text>
</g>
<!-- section_34&#45;&gt;block_41 -->
<g id="edge41" class="edge">
<title>section_34&#45;&gt;block_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4234.5188,-1016.7327C4288.2811,-984.7487 4405.8526,-914.8035 4465.4016,-879.3769"/>
<polygon fill="#000000" stroke="#000000" points="4467.2925,-882.3245 4474.0972,-874.2037 4463.7135,-876.3086 4467.2925,-882.3245"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4009.5,-701.4018 3699.5,-701.4018 3699.5,-523.6002 4009.5,-523.6002 4009.5,-701.4018"/>
<text text-anchor="middle" x="3854.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.parseProse(block)</text>
<text text-anchor="middle" x="3854.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] then</text>
<text text-anchor="middle" x="3854.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="3854.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="3854.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3854.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3854.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[1] = Prose(block)</text>
<text text-anchor="middle" x="3854.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines = nil</text>
<text text-anchor="middle" x="3854.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]</text>
<text text-anchor="middle" x="3854.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3854.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3897.1175,-839.8565C3892.0318,-812.7254 3882.0481,-759.4643 3873.0216,-711.31"/>
<polygon fill="#000000" stroke="#000000" points="3876.4542,-710.6244 3871.1716,-701.4404 3869.574,-711.9141 3876.4542,-710.6244"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="4401,-639.8014 4028,-639.8014 4028,-585.2006 4401,-585.2006 4401,-639.8014"/>
<text text-anchor="middle" x="4214.5" y="-608.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="4214.5" y="-593.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- block_40&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>block_40&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4243.2205,-839.8565C4238.1868,-800.0089 4226.0327,-703.7959 4219.2599,-650.1814"/>
<polygon fill="#000000" stroke="#000000" points="4222.7066,-649.5383 4217.9808,-640.0558 4215.7618,-650.4156 4222.7066,-649.5383"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="4501.5" cy="-612.501" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="4501.5" y="-608.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 97&#45;124</text>
</g>
<!-- block_41&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>block_41&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4501.5,-839.8565C4501.5,-797.5767 4501.5,-691.8411 4501.5,-640.8628"/>
<polygon fill="#000000" stroke="#000000" points="4505.0001,-640.5723 4501.5,-630.5723 4498.0001,-640.5724 4505.0001,-640.5723"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="4655.5,-630.501 4601.5,-630.501 4601.5,-594.501 4655.5,-594.501 4655.5,-630.501"/>
</g>
<!-- block_41&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_41&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4528.4224,-841.4964C4549.1529,-827.4354 4576.8324,-805.2851 4592.5,-778.8013 4618.2191,-735.327 4625.6417,-675.7345 4627.7354,-640.9521"/>
<polygon fill="#000000" stroke="#000000" points="4631.2498,-640.7424 4628.2443,-630.5828 4624.2582,-640.3992 4631.2498,-640.7424"/>
</g>
<!-- leaf_44 -->
<g id="node45" class="node">
<title>leaf_44</title>
<polygon fill="none" stroke="#c0c0c0" points="4684.5,-410.3011 4318.5,-410.3011 4318.5,.1004 4684.5,.1004 4684.5,-410.3011"/>
<text text-anchor="middle" x="4501.5" y="-395.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toString(block)</text>
<text text-anchor="middle" x="4501.5" y="-379.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="4501.5" y="-364.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="4501.5" y="-348.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="4501.5" y="-333.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4501.5" y="-318.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="4501.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4501.5" y="-271.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toValue(block)</text>
<text text-anchor="middle" x="4501.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.val = block:toString()</text>
<text text-anchor="middle" x="4501.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block.val</text>
<text text-anchor="middle" x="4501.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4501.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toMarkdown(block)</text>
<text text-anchor="middle" x="4501.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] and (block[1].id == &quot;codeblock&quot;</text>
<text text-anchor="middle" x="4501.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;or block[1].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="4501.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]:toMarkdown()</text>
<text text-anchor="middle" x="4501.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4501.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block:toString()</text>
<text text-anchor="middle" x="4501.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4501.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4501.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.dotLabel(block)</text>
<text text-anchor="middle" x="4501.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;block &quot; .. tostring(block.line_first) </text>
<text text-anchor="middle" x="4501.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(block.line_last)</text>
<text text-anchor="middle" x="4501.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_44 -->
<g id="edge44" class="edge">
<title>codeblock_43&#45;&gt;leaf_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4501.5,-594.4698C4501.5,-562.5178 4501.5,-492.5163 4501.5,-420.5525"/>
<polygon fill="#000000" stroke="#000000" points="4505.0001,-420.3887 4501.5,-410.3888 4498.0001,-420.3888 4505.0001,-420.3887"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="4638.5,-875.9014 4584.5,-875.9014 4584.5,-839.9014 4638.5,-839.9014 4638.5,-875.9014"/>
</g>
<!-- block_47&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>block_47&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4681.4464,-1015.281C4667.7487,-984.461 4639.8363,-921.658 4623.7207,-885.398"/>
<polygon fill="#000000" stroke="#000000" points="4626.7696,-883.64 4619.5098,-875.9234 4620.3729,-886.483 4626.7696,-883.64"/>
</g>
<!-- codeblock_52 -->
<g id="node53" class="node">
<title>codeblock_52</title>
<ellipse fill="none" stroke="#000000" cx="4743.5" cy="-857.9014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4743.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 129&#45;151</text>
</g>
<!-- block_48&#45;&gt;codeblock_52 -->
<g id="edge52" class="edge">
<title>block_48&#45;&gt;codeblock_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4828.6911,-1015.281C4811.9367,-984.3293 4777.7212,-921.1206 4758.1334,-884.9346"/>
<polygon fill="#000000" stroke="#000000" points="4761.0939,-883.0515 4753.2555,-875.9234 4754.938,-886.3838 4761.0939,-883.0515"/>
</g>
<!-- leaf_54 -->
<g id="node55" class="node">
<title>leaf_54</title>
<polygon fill="none" stroke="#c0c0c0" points="5130.5,-901.1017 4848.5,-901.1017 4848.5,-814.701 5130.5,-814.701 5130.5,-901.1017"/>
<text text-anchor="middle" x="4989.5" y="-853.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> Sorts lines into structure and prose.</text>
<text text-anchor="middle" x="4989.5" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4989.5" y="-823.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line : taken from block.lines</text>
</g>
<!-- block_48&#45;&gt;leaf_54 -->
<g id="edge54" class="edge">
<title>block_48&#45;&gt;leaf_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4853.8097,-1015.6079C4875.0699,-990.8981 4914.3997,-945.1869 4945.2638,-909.3151"/>
<polygon fill="#000000" stroke="#000000" points="4948.2407,-911.2214 4952.1098,-901.3583 4942.9345,-906.6559 4948.2407,-911.2214"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="5494,-893.1017 5149,-893.1017 5149,-822.701 5494,-822.701 5494,-893.1017"/>
<text text-anchor="middle" x="5321.5" y="-877.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; returns: </text>
<text text-anchor="middle" x="5321.5" y="-862.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;1. true for structure, false for prose</text>
<text text-anchor="middle" x="5321.5" y="-847.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;2. id of structure line or &quot;&quot; for prose</text>
</g>
<!-- block_49&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>block_49&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5171.1231,-1015.9323C5196.4636,-989.302 5245.5191,-937.7496 5280.7163,-900.761"/>
<polygon fill="#000000" stroke="#000000" points="5283.6451,-902.7603 5288.0031,-893.1032 5278.5741,-897.9349 5283.6451,-902.7603"/>
</g>
<!-- codeblock_56 -->
<g id="node57" class="node">
<title>codeblock_56</title>
<ellipse fill="none" stroke="#000000" cx="5599.5" cy="-857.9014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5599.5" y="-853.7014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 163&#45;179</text>
</g>
<!-- block_50&#45;&gt;codeblock_56 -->
<g id="edge56" class="edge">
<title>block_50&#45;&gt;codeblock_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5599.5,-1015.281C5599.5,-984.7244 5599.5,-922.7292 5599.5,-886.3336"/>
<polygon fill="#000000" stroke="#000000" points="5603.0001,-885.9233 5599.5,-875.9234 5596.0001,-885.9234 5603.0001,-885.9233"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5758.5,-875.9014 5704.5,-875.9014 5704.5,-839.9014 5758.5,-839.9014 5758.5,-875.9014"/>
</g>
<!-- block_50&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>block_50&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5612.8833,-1015.6079C5636.2446,-984.5478 5684.5639,-920.3051 5711.7711,-884.1318"/>
<polygon fill="#000000" stroke="#000000" points="5714.67,-886.1003 5717.8839,-876.0047 5709.0758,-881.8926 5714.67,-886.1003"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="5221.5,-778.6018 4673.5,-778.6018 4673.5,-446.4002 5221.5,-446.4002 5221.5,-778.6018"/>
<text text-anchor="middle" x="4947.5" y="-763.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local b = {}</text>
<text text-anchor="middle" x="4947.5" y="-732.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Block, lines, linum)</text>
<text text-anchor="middle" x="4947.5" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = setmetatable({}, B)</text>
<text text-anchor="middle" x="4947.5" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.lines = {}</text>
<text text-anchor="middle" x="4947.5" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.line_first = linum</text>
<text text-anchor="middle" x="4947.5" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (lines) then </text>
<text text-anchor="middle" x="4947.5" y="-655.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(lines) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4947.5" y="-639.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(lines)</text>
<text text-anchor="middle" x="4947.5" y="-624.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(lines) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4947.5" y="-609.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, l in ipairs(lines) do</text>
<text text-anchor="middle" x="4947.5" y="-593.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(l)</text>
<text text-anchor="middle" x="4947.5" y="-578.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4947.5" y="-562.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4947.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;Error: in block.new type of `lines` is &quot; .. type(lines))</text>
<text text-anchor="middle" x="4947.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4947.5" y="-516.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4947.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.id = &quot;block&quot;</text>
<text text-anchor="middle" x="4947.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="4947.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_52&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>codeblock_52&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4758.5006,-839.8565C4769.2832,-826.8857 4785.0305,-807.9426 4802.9051,-786.4405"/>
<polygon fill="#000000" stroke="#000000" points="4805.6104,-788.6612 4809.3116,-778.7338 4800.2275,-784.1863 4805.6104,-788.6612"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="5761.5,-732.7015 5437.5,-732.7015 5437.5,-492.3005 5761.5,-492.3005 5761.5,-732.7015"/>
<text text-anchor="middle" x="5599.5" y="-717.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local function structureOrProse(line)</text>
<text text-anchor="middle" x="5599.5" y="-702.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_p, line) then</text>
<text text-anchor="middle" x="5599.5" y="-686.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tagline&quot;</text>
<text text-anchor="middle" x="5599.5" y="-671.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.listline_p, line) then</text>
<text text-anchor="middle" x="5599.5" y="-655.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;listline&quot;</text>
<text text-anchor="middle" x="5599.5" y="-640.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tableline_p, line) then</text>
<text text-anchor="middle" x="5599.5" y="-625.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tableline&quot;</text>
<text text-anchor="middle" x="5599.5" y="-609.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5599.5" y="-594.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false, &quot;&quot;</text>
<text text-anchor="middle" x="5599.5" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5599.5" y="-547.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="5599.5" y="-532.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__index&quot;] = b</text>
<text text-anchor="middle" x="5599.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, b)</text>
</g>
<!-- codeblock_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>codeblock_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5599.5,-839.8565C5599.5,-818.6204 5599.5,-781.3757 5599.5,-743.1015"/>
<polygon fill="#000000" stroke="#000000" points="5603.0001,-742.8268 5599.5,-732.8268 5596.0001,-742.8269 5603.0001,-742.8268"/>
</g>
</g>
</svg>