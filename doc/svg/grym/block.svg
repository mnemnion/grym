<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5329pt" height="786pt"
 viewBox="0.00 0.00 5328.50 786.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 782.0009)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-782.0009 5324.5,-782.0009 5324.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="3107.5" cy="-760.0009" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="3107.5" y="-755.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 152</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="3107.5" cy="-688.0009" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3107.5" y="-683.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;152</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3107.5,-741.8323C3107.5,-734.1319 3107.5,-724.9753 3107.5,-716.4176"/>
<polygon fill="#000000" stroke="#000000" points="3111.0001,-716.4142 3107.5,-706.4142 3104.0001,-716.4142 3111.0001,-716.4142"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="2112.5" cy="-616.0009" rx="75.4657" ry="18"/>
<text text-anchor="middle" x="2112.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Block module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3042.276,-685.4253C2862.1334,-678.1058 2360.2629,-656.2692 2196.5,-634.0009 2189.8474,-633.0963 2182.9371,-631.9533 2176.0654,-630.6836"/>
<polygon fill="#000000" stroke="#000000" points="2176.5429,-627.2111 2166.0598,-628.7459 2175.2119,-634.0834 2176.5429,-627.2111"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="2251.5" cy="-616.0009" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="2251.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;6</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3042.098,-685.6905C2877.0672,-679.5237 2446.9139,-661.2675 2306.5,-634.0009 2302.6165,-633.2468 2298.6266,-632.2989 2294.6547,-631.2345"/>
<polygon fill="#000000" stroke="#000000" points="2295.4697,-627.8266 2284.89,-628.3932 2293.5139,-634.5478 2295.4697,-627.8266"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="2366.5" cy="-616.0009" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="2366.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 7&#45;10</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3042.9287,-684.6352C2896.6555,-676.7261 2543.653,-655.9605 2426.5,-634.0009 2422.2911,-633.212 2417.9576,-632.24 2413.6372,-631.1597"/>
<polygon fill="#000000" stroke="#000000" points="2414.2108,-627.6899 2403.6453,-628.4783 2412.3964,-634.4507 2414.2108,-627.6899"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="2490.5" cy="-616.0009" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="2490.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 11&#45;14</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3042.2714,-685.3682C2938.303,-680.3366 2728.9396,-666.7817 2554.5,-634.0009 2549.8527,-633.1276 2545.0537,-632.0728 2540.2706,-630.917"/>
<polygon fill="#000000" stroke="#000000" points="2541.084,-627.5124 2530.5288,-628.4284 2539.3514,-634.2946 2541.084,-627.5124"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="2619.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2619.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 15&#45;27</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3044.3327,-682.7829C2961.2493,-675.2718 2810.9686,-659.4482 2684.5,-634.0009 2679.8652,-633.0684 2675.0756,-631.9822 2670.2952,-630.8141"/>
<polygon fill="#000000" stroke="#000000" points="2671.1036,-627.4083 2660.5485,-628.3244 2669.3711,-634.1905 2671.1036,-627.4083"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="2749.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2749.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 28&#45;33</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3050.4784,-679.0174C2991.2107,-669.324 2895.9074,-652.7363 2814.5,-634.0009 2810.08,-632.9837 2805.5094,-631.8622 2800.9351,-630.6913"/>
<polygon fill="#000000" stroke="#000000" points="2801.5334,-627.2297 2790.972,-628.0703 2799.7525,-633.9993 2801.5334,-627.2297"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="2879.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2879.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 34&#45;45</text>
</g>
<!-- section_1&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3064.3469,-674.3736C3025.8237,-662.2084 2969.418,-644.3961 2929.0588,-631.6511"/>
<polygon fill="#000000" stroke="#000000" points="2930.0117,-628.2817 2919.4219,-628.6079 2927.9038,-634.9568 2930.0117,-628.2817"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="3031.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3031.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 46&#45;47</text>
</g>
<!-- section_1&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3089.1025,-670.5717C3079.4872,-661.4625 3067.5661,-650.1688 3057.0677,-640.223"/>
<polygon fill="#000000" stroke="#000000" points="3059.3947,-637.6063 3049.7281,-633.2696 3054.5805,-642.6879 3059.3947,-637.6063"/>
</g>
<!-- block_10 -->
<g id="node11" class="node">
<title>block_10</title>
<ellipse fill="none" stroke="#000000" cx="3172.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3172.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 48&#45;70</text>
</g>
<!-- section_1&#45;&gt;block_10 -->
<g id="edge10" class="edge">
<title>section_1&#45;&gt;block_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3123.5674,-670.2032C3131.5768,-661.3312 3141.3931,-650.4578 3150.1258,-640.7847"/>
<polygon fill="#000000" stroke="#000000" points="3152.7386,-643.1136 3156.8417,-633.3455 3147.5427,-638.4229 3152.7386,-643.1136"/>
</g>
<!-- block_11 -->
<g id="node12" class="node">
<title>block_11</title>
<ellipse fill="none" stroke="#000000" cx="3414.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3414.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 71&#45;73</text>
</g>
<!-- section_1&#45;&gt;block_11 -->
<g id="edge11" class="edge">
<title>section_1&#45;&gt;block_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3157.5081,-676.2726C3212.8057,-663.3038 3301.6439,-642.4688 3359.0378,-629.0084"/>
<polygon fill="#000000" stroke="#000000" points="3360.0851,-632.3578 3369.0217,-626.6669 3358.4867,-625.5427 3360.0851,-632.3578"/>
</g>
<!-- block_12 -->
<g id="node13" class="node">
<title>block_12</title>
<ellipse fill="none" stroke="#000000" cx="3808.5" cy="-616.0009" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="3808.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 74&#45;98</text>
</g>
<!-- section_1&#45;&gt;block_12 -->
<g id="edge12" class="edge">
<title>section_1&#45;&gt;block_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3169.0947,-681.6745C3301.2934,-668.0963 3611.0565,-636.2804 3744.9693,-622.5262"/>
<polygon fill="#000000" stroke="#000000" points="3745.4811,-625.9921 3755.0711,-621.4886 3744.7658,-619.0288 3745.4811,-625.9921"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="3997.5" cy="-616.0009" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="3997.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 99&#45;100</text>
</g>
<!-- section_1&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_1&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.4592,-685.0417C3304.6875,-678.6609 3614.5306,-661.8868 3873.5,-634.0009 3893.2072,-631.8789 3914.5945,-628.9871 3933.9694,-626.1424"/>
<polygon fill="#000000" stroke="#000000" points="3934.5231,-629.5986 3943.8982,-624.6634 3933.4917,-622.675 3934.5231,-629.5986"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="4230.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4230.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 101&#45;125</text>
</g>
<!-- section_1&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_1&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.7689,-685.542C3328.0201,-679.4284 3731.4644,-661.9857 4067.5,-634.0009 4098.0829,-631.454 4131.8098,-627.8607 4160.6109,-624.5537"/>
<polygon fill="#000000" stroke="#000000" points="4161.0492,-628.0264 4170.5796,-623.3981 4160.243,-621.073 4161.0492,-628.0264"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="4464.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4464.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 126&#45;129</text>
</g>
<!-- section_1&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_1&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3173.1777,-686.6017C3353.9964,-682.4123 3874.3152,-668.0862 4305.5,-634.0009 4334.8514,-631.6807 4367.1519,-628.1965 4394.9289,-624.9097"/>
<polygon fill="#000000" stroke="#000000" points="4395.4312,-628.3747 4404.9441,-623.7103 4394.5988,-621.4243 4395.4312,-628.3747"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="4747.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4747.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 130&#45;134</text>
</g>
<!-- section_1&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_1&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3173.214,-686.6602C3376.4916,-682.2687 4013.0835,-666.6846 4539.5,-634.0009 4584.7601,-631.1909 4635.4601,-626.8284 4675.4732,-623.1019"/>
<polygon fill="#000000" stroke="#000000" points="4676.0399,-626.5642 4685.6689,-622.1447 4675.3855,-619.5949 4676.0399,-626.5642"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="5158.5" cy="-616.0009" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5158.5" y="-611.8009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 135&#45;152</text>
</g>
<!-- section_1&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_1&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.9413,-686.4601C3400.6728,-680.9871 4179.6373,-661.338 4822.5,-634.0009 4912.4334,-630.1766 5015.8353,-624.4347 5083.9091,-620.4692"/>
<polygon fill="#000000" stroke="#000000" points="5084.3281,-623.9508 5094.1068,-619.8731 5083.9196,-616.9627 5084.3281,-623.9508"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="499,-500.8011 0,-500.8011 0,-430.4004 499,-430.4004 499,-500.8011"/>
<text text-anchor="middle" x="249.5" y="-469.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A Block is the container for the next level of granularity below</text>
<text text-anchor="middle" x="249.5" y="-454.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> a Section. Any Section has a Header and one or more Blocks. Both the</text>
<text text-anchor="middle" x="249.5" y="-438.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Header and the Block may be virtual, that is, without contents.</text>
</g>
<!-- block_3&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_3&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2218.4499,-603.446C2211.309,-601.2262 2203.73,-599.2331 2196.5,-598.0009 1826.4171,-534.9313 876.2018,-632.6979 507.5,-562.0009 447.0592,-550.4117 382.1795,-526.1092 332.6015,-504.8061"/>
<polygon fill="#000000" stroke="#000000" points="333.7783,-501.5014 323.2117,-500.7288 330.9902,-507.9222 333.7783,-501.5014"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1016,-492.9012 517,-492.9012 517,-438.3003 1016,-438.3003 1016,-492.9012"/>
<text text-anchor="middle" x="766.5" y="-477.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> The most general premise is that Blocks are delineated by blank line</text>
<text text-anchor="middle" x="766.5" y="-462.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> whitespace. </text>
</g>
<!-- block_4&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>block_4&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2330.0494,-603.4021C2322.3587,-601.2154 2314.2305,-599.2466 2306.5,-598.0009 2025.1284,-552.6611 1304.2191,-616.6171 1024.5,-562.0009 956.7938,-548.7811 883.4604,-519.8452 832.3455,-497.1056"/>
<polygon fill="#000000" stroke="#000000" points="833.6222,-493.8422 823.0661,-492.9369 830.7536,-500.2275 833.6222,-493.8422"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1575,-492.8012 1034,-492.8012 1034,-438.4003 1575,-438.4003 1575,-492.8012"/>
<text text-anchor="middle" x="1304.5" y="-477.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> A paragraph of prose is the simplest block, and the default. &#160;A list with</text>
<text text-anchor="middle" x="1304.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> a tag line is a block also, as is a table. &#160;Most importantly for our short</text>
<text text-anchor="middle" x="1304.5" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> path, code blocks are enclosed in blocks as well.</text>
</g>
<!-- block_5&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_5&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2450.8738,-603.321C2442.8787,-601.199 2434.4784,-599.2756 2426.5,-598.0009 2056.188,-538.8392 1951.923,-631.9695 1583.5,-562.0009 1510.6811,-548.1716 1431.0885,-519.1984 1375.6195,-496.6072"/>
<polygon fill="#000000" stroke="#000000" points="1376.8207,-493.3169 1366.2408,-492.7547 1374.1609,-499.7919 1376.8207,-493.3169"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2134,-561.9012 1593,-561.9012 1593,-369.3003 2134,-369.3003 2134,-561.9012"/>
<text text-anchor="middle" x="1863.5" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking needs to identify when it has structure, and when prose, on a </text>
<text text-anchor="middle" x="1863.5" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> line&#45;by&#45;line basis. &#160;It must also apply the cling rule to make sure that</text>
<text text-anchor="middle" x="1863.5" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> e.g. tags are part of the block indicated by whitespacing. </text>
<text text-anchor="middle" x="1863.5" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Blocking need not, and mostly should not, parse within structure or prose.</text>
<text text-anchor="middle" x="1863.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> These categories are determined by the beginning of a line, making this</text>
<text text-anchor="middle" x="1863.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> tractable. </text>
<text text-anchor="middle" x="1863.5" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1863.5" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> The cling rule requires lookahead. LPEG is quite capable of this, as is </text>
<text text-anchor="middle" x="1863.5" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> packrat PEG parsing generally. &#160;In the bootstrap implementation, we will</text>
<text text-anchor="middle" x="1863.5" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> parse once for ownership, again (in the `lines` array of each Section) for</text>
<text text-anchor="middle" x="1863.5" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> blocking, and a final time to parse within blocks. </text>
</g>
<!-- block_6&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_6&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2578.8481,-603.5173C2570.8378,-601.4062 2562.4509,-599.4367 2554.5,-598.0009 2376.7964,-565.9111 2324.1189,-599.0946 2143.9932,-562.2292"/>
<polygon fill="#000000" stroke="#000000" points="2144.7051,-558.8024 2134.2005,-560.1822 2143.2729,-565.6543 2144.7051,-558.8024"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="2651,-508.8011 2152,-508.8011 2152,-422.4004 2651,-422.4004 2651,-508.8011"/>
<text text-anchor="middle" x="2401.5" y="-493.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Grimoire is intended to work, in linear time, as a single&#45;pass PEG</text>
<text text-anchor="middle" x="2401.5" y="-478.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> grammar. &#160;Presently (Feb 2018) I&#39;m intending to prototype that with </text>
<text text-anchor="middle" x="2401.5" y="-462.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> PEGylator and port it to `hammer` with a `quipu` back&#45;end. </text>
</g>
<!-- block_7&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>block_7&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2715.8161,-601.4433C2668.8828,-581.1595 2581.6205,-543.446 2510.9284,-512.894"/>
<polygon fill="#000000" stroke="#000000" points="2512.0799,-509.5788 2501.5119,-508.8243 2509.3028,-516.0044 2512.0799,-509.5788"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="2746.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="2746.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 34&#45;44</text>
</g>
<!-- block_8&#45;&gt;codeblock_23 -->
<g id="edge23" class="edge">
<title>block_8&#45;&gt;codeblock_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2863.9829,-598.4538C2840.5833,-571.9928 2796.1361,-521.7307 2769.1263,-491.1872"/>
<polygon fill="#000000" stroke="#000000" points="2771.5769,-488.6749 2762.3305,-483.5023 2766.3331,-493.312 2771.5769,-488.6749"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="2895.5,-483.6007 2841.5,-483.6007 2841.5,-447.6007 2895.5,-447.6007 2895.5,-483.6007"/>
</g>
<!-- block_8&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_8&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2878.1731,-597.8592C2876.2819,-572.0004 2872.7935,-524.3053 2870.5633,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="2874.0518,-493.5249 2869.8316,-483.8069 2867.0704,-494.0356 2874.0518,-493.5249"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="3077,-483.6007 2914,-483.6007 2914,-447.6007 3077,-447.6007 3077,-483.6007"/>
<text text-anchor="middle" x="2995.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Metatable for Blocks</text>
</g>
<!-- block_9&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>block_9&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3027.1576,-597.8592C3020.968,-572.0004 3009.5516,-524.3053 3002.2526,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3005.5896,-492.7174 2999.8578,-483.8069 2998.7819,-494.3469 3005.5896,-492.7174"/>
</g>
<!-- codeblock_27 -->
<g id="node28" class="node">
<title>codeblock_27</title>
<ellipse fill="none" stroke="#000000" cx="3172.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3172.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;68</text>
</g>
<!-- block_10&#45;&gt;codeblock_27 -->
<g id="edge27" class="edge">
<title>block_10&#45;&gt;codeblock_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.5,-597.8592C3172.5,-572.0004 3172.5,-524.3053 3172.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3176.0001,-493.8068 3172.5,-483.8069 3169.0001,-493.8069 3176.0001,-493.8068"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="3321.5,-483.6007 3267.5,-483.6007 3267.5,-447.6007 3321.5,-447.6007 3321.5,-483.6007"/>
</g>
<!-- block_10&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>block_10&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3206.0754,-601.4721C3223.7485,-592.3594 3244.5788,-579.0844 3258.5,-562.0009 3274.7195,-542.0972 3284.0738,-514.1588 3289.1594,-493.4802"/>
<polygon fill="#000000" stroke="#000000" points="3292.58,-494.2218 3291.3839,-483.6947 3285.7542,-492.6701 3292.58,-494.2218"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="3713,-484.9013 3340,-484.9013 3340,-446.3002 3713,-446.3002 3713,-484.9013"/>
<text text-anchor="middle" x="3526.5" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Adds a .val field which is the union of all lines.</text>
<text text-anchor="middle" x="3526.5" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Useful in visualization. </text>
</g>
<!-- block_11&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>block_11&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3427.567,-598.4538C3446.8717,-572.5304 3483.1877,-523.7631 3506.0422,-493.0727"/>
<polygon fill="#000000" stroke="#000000" points="3508.9405,-495.0408 3512.106,-484.9299 3503.3261,-490.8599 3508.9405,-495.0408"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="3808.5" cy="-465.6007" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="3808.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 74&#45;96</text>
</g>
<!-- block_12&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_12&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3808.5,-597.8592C3808.5,-572.0004 3808.5,-524.3053 3808.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="3812.0001,-493.8068 3808.5,-483.8069 3805.0001,-493.8069 3812.0001,-493.8068"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="3957.5,-483.6007 3903.5,-483.6007 3903.5,-447.6007 3957.5,-447.6007 3957.5,-483.6007"/>
</g>
<!-- block_12&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>block_12&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3842.0754,-601.4721C3859.7485,-592.3594 3880.5788,-579.0844 3894.5,-562.0009 3910.7195,-542.0972 3920.0738,-514.1588 3925.1594,-493.4802"/>
<polygon fill="#000000" stroke="#000000" points="3928.58,-494.2218 3927.3839,-483.6947 3921.7542,-492.6701 3928.58,-494.2218"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="4125,-483.6007 3976,-483.6007 3976,-447.6007 4125,-447.6007 4125,-483.6007"/>
<text text-anchor="middle" x="4050.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Constructor/module</text>
</g>
<!-- block_13&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>block_13&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4003.893,-597.8592C4013.0453,-571.8875 4029.9598,-523.8884 4040.6991,-493.413"/>
<polygon fill="#000000" stroke="#000000" points="4044.0617,-494.4017 4044.0843,-483.8069 4037.4596,-492.0751 4044.0617,-494.4017"/>
</g>
<!-- codeblock_35 -->
<g id="node36" class="node">
<title>codeblock_35</title>
<ellipse fill="none" stroke="#000000" cx="4230.5" cy="-465.6007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4230.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 101&#45;123</text>
</g>
<!-- block_14&#45;&gt;codeblock_35 -->
<g id="edge35" class="edge">
<title>block_14&#45;&gt;codeblock_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4230.5,-597.8592C4230.5,-572.0004 4230.5,-524.3053 4230.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="4234.0001,-493.8068 4230.5,-483.8069 4227.0001,-493.8069 4234.0001,-493.8068"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="4389.5,-483.6007 4335.5,-483.6007 4335.5,-447.6007 4389.5,-447.6007 4389.5,-483.6007"/>
</g>
<!-- block_14&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_14&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4269.8815,-601.4537C4289.185,-592.6047 4311.4545,-579.5796 4326.5,-562.0009 4343.1953,-542.4946 4352.4913,-514.5075 4357.434,-493.7096"/>
<polygon fill="#000000" stroke="#000000" points="4360.871,-494.3755 4359.5811,-483.8594 4354.0316,-492.8846 4360.871,-494.3755"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="4689.5,-492.8012 4407.5,-492.8012 4407.5,-438.4003 4689.5,-438.4003 4689.5,-492.8012"/>
<text text-anchor="middle" x="4548.5" y="-477.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> Sorts lines into structure and prose.</text>
<text text-anchor="middle" x="4548.5" y="-462.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4548.5" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line : taken from block.lines</text>
</g>
<!-- block_15&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_15&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4474.4658,-598.1574C4487.6595,-574.5344 4511.2368,-532.3196 4528.2449,-501.8671"/>
<polygon fill="#000000" stroke="#000000" points="4531.4731,-503.2648 4533.2936,-492.8276 4525.3617,-499.8515 4531.4731,-503.2648"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="5053,-500.8011 4708,-500.8011 4708,-430.4004 5053,-430.4004 5053,-500.8011"/>
<text text-anchor="middle" x="4880.5" y="-485.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; returns: </text>
<text text-anchor="middle" x="4880.5" y="-470.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;1. true for structure, false for prose</text>
<text text-anchor="middle" x="4880.5" y="-454.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;2. id of structure line or &quot;&quot; for prose</text>
</g>
<!-- block_16&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>block_16&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4763.0171,-598.4538C4782.3281,-576.6164 4815.9739,-538.5687 4842.3235,-508.7718"/>
<polygon fill="#000000" stroke="#000000" points="4845.1947,-510.8085 4849.1972,-500.9988 4839.9509,-506.1714 4845.1947,-510.8085"/>
</g>
<!-- codeblock_40 -->
<g id="node41" class="node">
<title>codeblock_40</title>
<ellipse fill="none" stroke="#000000" cx="5158.5" cy="-465.6007" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5158.5" y="-461.4007" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 135&#45;151</text>
</g>
<!-- block_17&#45;&gt;codeblock_40 -->
<g id="edge40" class="edge">
<title>block_17&#45;&gt;codeblock_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5158.5,-597.8592C5158.5,-572.0004 5158.5,-524.3053 5158.5,-493.8115"/>
<polygon fill="#000000" stroke="#000000" points="5162.0001,-493.8068 5158.5,-483.8069 5155.0001,-493.8069 5162.0001,-493.8068"/>
</g>
<!-- leaf_42 -->
<g id="node43" class="node">
<title>leaf_42</title>
<polygon fill="none" stroke="#c0c0c0" points="5317.5,-483.6007 5263.5,-483.6007 5263.5,-447.6007 5317.5,-447.6007 5317.5,-483.6007"/>
</g>
<!-- block_17&#45;&gt;leaf_42 -->
<g id="edge42" class="edge">
<title>block_17&#45;&gt;leaf_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5197.8815,-601.4537C5217.185,-592.6047 5239.4545,-579.5796 5254.5,-562.0009 5271.1953,-542.4946 5280.4913,-514.5075 5285.434,-493.7096"/>
<polygon fill="#000000" stroke="#000000" points="5288.871,-494.3755 5287.5811,-483.8594 5282.0316,-492.8846 5288.871,-494.3755"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="2901.5,-240.4006 2591.5,-240.4006 2591.5,-92.7999 2901.5,-92.7999 2901.5,-240.4006"/>
<text text-anchor="middle" x="2746.5" y="-225.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="2746.5" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">local Node = require &quot;peg/node&quot;</text>
<text text-anchor="middle" x="2746.5" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Codeblock = require &quot;grym/codeblock&quot;</text>
<text text-anchor="middle" x="2746.5" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">local Structure = require &quot;grym/structure&quot;</text>
<text text-anchor="middle" x="2746.5" y="-131.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="2746.5" y="-116.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">local util = require &quot;../lib/util&quot;</text>
<text text-anchor="middle" x="2746.5" y="-100.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">local freeze = util.freeze</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>codeblock_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2746.5,-447.347C2746.5,-409.1769 2746.5,-318.8333 2746.5,-250.8664"/>
<polygon fill="#000000" stroke="#000000" points="2750.0001,-250.5862 2746.5,-240.5863 2743.0001,-250.5863 2750.0001,-250.5862"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="3380,-318.001 2965,-318.001 2965,-15.1995 3380,-15.1995 3380,-318.001"/>
<text text-anchor="middle" x="3172.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local B = setmetatable({}, { __index = Node })</text>
<text text-anchor="middle" x="3172.5" y="-287.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__index = B</text>
<text text-anchor="middle" x="3172.5" y="-255.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">B.__tostring = function(block) </text>
<text text-anchor="middle" x="3172.5" y="-240.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;Block&quot;</text>
<text text-anchor="middle" x="3172.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3172.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.addLine(block, line)</text>
<text text-anchor="middle" x="3172.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_hash_p, line) then</text>
<text text-anchor="middle" x="3172.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;hashline&quot;)</text>
<text text-anchor="middle" x="3172.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tagline_handle_p, line) then</text>
<text text-anchor="middle" x="3172.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = Structure(line, &quot;handleline&quot;)</text>
<text text-anchor="middle" x="3172.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Eventually Blocks won&#39;t have lines, meantime:</text>
<text text-anchor="middle" x="3172.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3172.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.lines[#block.lines + 1] = line</text>
<text text-anchor="middle" x="3172.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3172.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="3172.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>codeblock_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3172.5,-447.347C3172.5,-422.7256 3172.5,-376.3959 3172.5,-328.3664"/>
<polygon fill="#000000" stroke="#000000" points="3176.0001,-328.0988 3172.5,-318.0988 3169.0001,-328.0988 3176.0001,-328.0988"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="3966,-333.3009 3593,-333.3009 3593,.1003 3966,.1003 3966,-333.3009"/>
<text text-anchor="middle" x="3779.5" y="-318.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toValue(block)</text>
<text text-anchor="middle" x="3779.5" y="-302.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.val = &quot;&quot;</text>
<text text-anchor="middle" x="3779.5" y="-287.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _,v in ipairs(block.lines) do</text>
<text text-anchor="middle" x="3779.5" y="-271.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;block.val = block.val .. v .. &quot;\n&quot;</text>
<text text-anchor="middle" x="3779.5" y="-256.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3779.5" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block.val</text>
<text text-anchor="middle" x="3779.5" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3779.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.toMarkdown(block)</text>
<text text-anchor="middle" x="3779.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if block[1] and block[1].id == &quot;codeblock&quot; then</text>
<text text-anchor="middle" x="3779.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return block[1]:toMarkdown()</text>
<text text-anchor="middle" x="3779.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3779.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;</text>
<text text-anchor="middle" x="3779.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block:toValue()</text>
<text text-anchor="middle" x="3779.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3779.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">function B.dotLabel(block)</text>
<text text-anchor="middle" x="3779.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;block &quot; .. tostring(block.line_first) </text>
<text text-anchor="middle" x="3779.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;&#45;&quot; .. tostring(block.line_last)</text>
<text text-anchor="middle" x="3779.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3806.7296,-447.347C3804.5904,-425.2916 3800.7618,-385.8167 3796.6385,-343.3046"/>
<polygon fill="#000000" stroke="#000000" points="3800.1194,-342.9371 3795.6703,-333.3217 3793.1521,-343.6129 3800.1194,-342.9371"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="4532.5,-332.7011 3984.5,-332.7011 3984.5,-.4994 4532.5,-.4994 4532.5,-332.7011"/>
<text text-anchor="middle" x="4258.5" y="-317.7006" font-family="Inconsolata" font-size="14.00" fill="#000000">local b = {}</text>
<text text-anchor="middle" x="4258.5" y="-286.3005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Block, lines, linum)</text>
<text text-anchor="middle" x="4258.5" y="-270.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = setmetatable({}, B)</text>
<text text-anchor="middle" x="4258.5" y="-255.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.lines = {}</text>
<text text-anchor="middle" x="4258.5" y="-240.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.line_first = linum</text>
<text text-anchor="middle" x="4258.5" y="-224.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if (lines) then </text>
<text text-anchor="middle" x="4258.5" y="-209.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(lines) == &quot;string&quot; then</text>
<text text-anchor="middle" x="4258.5" y="-193.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(lines)</text>
<text text-anchor="middle" x="4258.5" y="-178.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(lines) == &quot;table&quot; then</text>
<text text-anchor="middle" x="4258.5" y="-163.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, l in ipairs(lines) do</text>
<text text-anchor="middle" x="4258.5" y="-147.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block:addLine(l)</text>
<text text-anchor="middle" x="4258.5" y="-132.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4258.5" y="-116.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4258.5" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;freeze(&quot;Error: in block.new type of `lines` is &quot; .. type(lines))</text>
<text text-anchor="middle" x="4258.5" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4258.5" y="-70.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4258.5" y="-39.3001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;block.id = &quot;block&quot;</text>
<text text-anchor="middle" x="4258.5" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="4258.5" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4232.2094,-447.347C4234.2803,-425.2327 4237.9911,-385.606 4241.9843,-342.9644"/>
<polygon fill="#000000" stroke="#000000" points="4245.4743,-343.2345 4242.922,-332.9517 4238.5047,-342.5818 4245.4743,-343.2345"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="5320.5,-286.8008 4996.5,-286.8008 4996.5,-46.3998 5320.5,-46.3998 5320.5,-286.8008"/>
<text text-anchor="middle" x="5158.5" y="-271.5005" font-family="Inconsolata" font-size="14.00" fill="#000000">local function structureOrProse(line)</text>
<text text-anchor="middle" x="5158.5" y="-256.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if L.match(m.tagline_p, line) then</text>
<text text-anchor="middle" x="5158.5" y="-240.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tagline&quot;</text>
<text text-anchor="middle" x="5158.5" y="-225.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.listline_p, line) then</text>
<text text-anchor="middle" x="5158.5" y="-209.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;listline&quot;</text>
<text text-anchor="middle" x="5158.5" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif L.match(m.tableline_p, line) then</text>
<text text-anchor="middle" x="5158.5" y="-179.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return true, &quot;tableline&quot;</text>
<text text-anchor="middle" x="5158.5" y="-163.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5158.5" y="-148.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false, &quot;&quot;</text>
<text text-anchor="middle" x="5158.5" y="-132.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5158.5" y="-101.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__call&quot;] = new</text>
<text text-anchor="middle" x="5158.5" y="-86.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">b[&quot;__index&quot;] = b</text>
<text text-anchor="middle" x="5158.5" y="-54.7001" font-family="Inconsolata" font-size="14.00" fill="#000000">return setmetatable({}, b)</text>
</g>
<!-- codeblock_40&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>codeblock_40&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5158.5,-447.347C5158.5,-417.3826 5158.5,-355.2656 5158.5,-297.062"/>
<polygon fill="#000000" stroke="#000000" points="5162.0001,-297.0068 5158.5,-287.0068 5155.0001,-297.0069 5162.0001,-297.0068"/>
</g>
</g>
</svg>