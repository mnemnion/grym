<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3274pt" height="1150pt"
 viewBox="0.00 0.00 3273.74 1150.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1146.4017)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1146.4017 3269.7408,-1146.4017 3269.7408,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="60.7408" cy="-1124.4017" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="60.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 167</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="60.7408" cy="-571.2009" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="60.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;60</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M60.7408,-1106.3103C60.7408,-1025.6324 60.7408,-698.3206 60.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="64.2409,-599.4336 60.7408,-589.4336 57.2409,-599.4337 64.2409,-599.4336"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="60.7408" cy="-18" rx="58.5101" ry="18"/>
<text text-anchor="middle" x="60.7408" y="-13.8" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grimoire </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M60.7408,-553.1094C60.7408,-472.4315 60.7408,-145.1198 60.7408,-46.3518"/>
<polygon fill="#000000" stroke="#000000" points="64.2409,-46.2327 60.7408,-36.2328 57.2409,-46.2328 64.2409,-46.2327"/>
</g>
<!-- section_3 -->
<g id="node4" class="node">
<title>section_3</title>
<ellipse fill="none" stroke="#000000" cx="197.7408" cy="-1124.4017" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="197.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_3</text>
</g>
<!-- header_5 -->
<g id="node5" class="node">
<title>header_5</title>
<ellipse fill="none" stroke="#000000" cx="197.7408" cy="-571.2009" rx="57.5753" ry="18"/>
<text text-anchor="middle" x="197.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Requires</text>
</g>
<!-- section_3&#45;&gt;header_5 -->
<g id="edge3" class="edge">
<title>section_3&#45;&gt;header_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M197.7408,-1106.3103C197.7408,-1025.6324 197.7408,-698.3206 197.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="201.2409,-599.4336 197.7408,-589.4336 194.2409,-599.4337 201.2409,-599.4336"/>
</g>
<!-- section_6 -->
<g id="node6" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="318.7408" cy="-1124.4017" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="318.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_6</text>
</g>
<!-- header_8 -->
<g id="node7" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="318.7408" cy="-571.2009" rx="45.0114" ry="18"/>
<text text-anchor="middle" x="318.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : locals</text>
</g>
<!-- section_6&#45;&gt;header_8 -->
<g id="edge4" class="edge">
<title>section_6&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M318.7408,-1106.3103C318.7408,-1025.6324 318.7408,-698.3206 318.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="322.2409,-599.4336 318.7408,-589.4336 315.2409,-599.4337 322.2409,-599.4336"/>
</g>
<!-- codeblock_9 -->
<g id="node8" class="node">
<title>codeblock_9</title>
<ellipse fill="none" stroke="#000000" cx="543.7408" cy="-1124.4017" rx="59.5308" ry="18"/>
<text text-anchor="middle" x="543.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_9</text>
</g>
<!-- leaf_10 -->
<g id="node9" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="705.7408,-770.0015 381.7408,-770.0015 381.7408,-372.4003 705.7408,-372.4003 705.7408,-770.0015"/>
<text text-anchor="middle" x="543.7408" y="-754.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="543.7408" y="-723.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="543.7408" y="-676.1011" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="543.7408" y="-660.701" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="543.7408" y="-645.301" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="543.7408" y="-629.901" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="543.7408" y="-614.501" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="543.7408" y="-599.1009" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="543.7408" y="-583.7009" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="543.7408" y="-568.3009" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="543.7408" y="-536.9008" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="543.7408" y="-505.5008" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="543.7408" y="-474.1008" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="543.7408" y="-458.7007" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="543.7408" y="-443.3007" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
<text text-anchor="middle" x="543.7408" y="-411.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="543.7408" y="-396.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
</g>
<!-- codeblock_9&#45;&gt;leaf_10 -->
<g id="edge5" class="edge">
<title>codeblock_9&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M543.7408,-1106.3103C543.7408,-1055.6817 543.7408,-907.927 543.7408,-780.4767"/>
<polygon fill="#000000" stroke="#000000" points="547.2409,-780.1691 543.7408,-770.1692 540.2409,-780.1692 547.2409,-780.1691"/>
</g>
<!-- section_7 -->
<g id="node10" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="773.7408" cy="-1124.4017" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="773.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_7</text>
</g>
<!-- header_11 -->
<g id="node11" class="node">
<title>header_11</title>
<ellipse fill="none" stroke="#000000" cx="773.7408" cy="-571.2009" rx="50.3413" ry="18"/>
<text text-anchor="middle" x="773.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : globals</text>
</g>
<!-- section_7&#45;&gt;header_11 -->
<g id="edge6" class="edge">
<title>section_7&#45;&gt;header_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M773.7408,-1106.3103C773.7408,-1025.6324 773.7408,-698.3206 773.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="777.2409,-599.4336 773.7408,-589.4336 770.2409,-599.4337 777.2409,-599.4336"/>
</g>
<!-- codeblock_12 -->
<g id="node12" class="node">
<title>codeblock_12</title>
<ellipse fill="none" stroke="#000000" cx="947.7408" cy="-1124.4017" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="947.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_12</text>
</g>
<!-- leaf_13 -->
<g id="node13" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1053.7408,-652.9012 841.7408,-652.9012 841.7408,-489.5005 1053.7408,-489.5005 1053.7408,-652.9012"/>
<text text-anchor="middle" x="947.7408" y="-637.601" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="947.7408" y="-622.201" font-family="Inconsolata" font-size="14.00" fill="#000000">u = require &quot;util&quot;</text>
<text text-anchor="middle" x="947.7408" y="-606.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">s = require &quot;status&quot;</text>
<text text-anchor="middle" x="947.7408" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="947.7408" y="-576.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="947.7408" y="-544.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="947.7408" y="-513.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">spec = require &quot;node/spec&quot;</text>
<text text-anchor="middle" x="947.7408" y="-497.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">pnf = require &quot;node/define&quot;</text>
</g>
<!-- codeblock_12&#45;&gt;leaf_13 -->
<g id="edge7" class="edge">
<title>codeblock_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M947.7408,-1106.3103C947.7408,-1038.6622 947.7408,-797.6115 947.7408,-663.2886"/>
<polygon fill="#000000" stroke="#000000" points="951.2409,-663.0126 947.7408,-653.0127 944.2409,-663.0127 951.2409,-663.0126"/>
</g>
<!-- section_4 -->
<g id="node14" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="1163.7408" cy="-1124.4017" rx="47.9272" ry="18"/>
<text text-anchor="middle" x="1163.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_4</text>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1163.7408" cy="-571.2009" rx="91.9296" ry="18"/>
<text text-anchor="middle" x="1163.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Argument parsing</text>
</g>
<!-- section_4&#45;&gt;header_14 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1163.7408,-1106.3103C1163.7408,-1025.6324 1163.7408,-698.3206 1163.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="1167.2409,-599.4336 1163.7408,-589.4336 1160.2409,-599.4337 1167.2409,-599.4336"/>
</g>
<!-- codeblock_15 -->
<g id="node16" class="node">
<title>codeblock_15</title>
<ellipse fill="none" stroke="#000000" cx="1526.7408" cy="-1124.4017" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="1526.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_15</text>
</g>
<!-- leaf_18 -->
<g id="node17" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1779.7408,-1070.6027 1273.7408,-1070.6027 1273.7408,-71.799 1779.7408,-71.799 1779.7408,-1070.6027"/>
<text text-anchor="middle" x="1526.7408" y="-1055.2017" font-family="Inconsolata" font-size="14.00" fill="#000000">local pwd, verb = &quot;&quot;, &quot;&quot;</text>
<text text-anchor="middle" x="1526.7408" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">if (arg) then</text>
<text text-anchor="middle" x="1526.7408" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd = table.remove(arg, 1)</text>
<text text-anchor="middle" x="1526.7408" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verb = table.remove(arg, 1)</text>
<text text-anchor="middle" x="1526.7408" y="-977.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(arg) do</text>
<text text-anchor="middle" x="1526.7408" y="-962.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(ansi.yellow(v)..&quot;\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-946.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1526.7408" y="-931.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1526.7408" y="-884.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local grym = {}</text>
<text text-anchor="middle" x="1526.7408" y="-852.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.invert = invert</text>
<text text-anchor="middle" x="1526.7408" y="-837.2014" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.knit &#160;&#160;= knit</text>
<text text-anchor="middle" x="1526.7408" y="-821.8014" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.weave &#160;= weave</text>
<text text-anchor="middle" x="1526.7408" y="-790.4014" font-family="Inconsolata" font-size="14.00" fill="#000000">samples = getfiles(&quot;samples&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-759.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
<text text-anchor="middle" x="1526.7408" y="-727.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">if verb == &quot;invert&quot; then</text>
<text text-anchor="middle" x="1526.7408" y="-712.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If we allow inversion in its present no&#45;guards state,</text>
<text text-anchor="middle" x="1526.7408" y="-696.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; we will lose all commentary</text>
<text text-anchor="middle" x="1526.7408" y="-681.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;u.freeze(&quot;no&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-666.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;invert:invert_all(pwd)</text>
<text text-anchor="middle" x="1526.7408" y="-650.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;knit&quot; then</text>
<text text-anchor="middle" x="1526.7408" y="-635.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; knitter goes here</text>
<text text-anchor="middle" x="1526.7408" y="-619.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="1526.7408" y="-604.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;weave&quot; then</text>
<text text-anchor="middle" x="1526.7408" y="-589.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; local weaved = weave:weaveMd(Doc(read(&quot;../orb/grym/block.gm&quot;)))</text>
<text text-anchor="middle" x="1526.7408" y="-573.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; io.write(weaved)</text>
<text text-anchor="middle" x="1526.7408" y="-558.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd) </text>
<text text-anchor="middle" x="1526.7408" y="-542.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;spec&quot; then</text>
<text text-anchor="middle" x="1526.7408" y="-527.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is just a shim to get us inside whatever</text>
<text text-anchor="middle" x="1526.7408" y="-512.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; I&#39;m working on</text>
<text text-anchor="middle" x="1526.7408" y="-496.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abstr = &quot;(form (inner form 23))&quot;</text>
<text text-anchor="middle" x="1526.7408" y="-481.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abNode = spec.clu(abstr)</text>
<text text-anchor="middle" x="1526.7408" y="-465.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(abNode.isNode)</text>
<text text-anchor="middle" x="1526.7408" y="-450.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode))</text>
<text text-anchor="middle" x="1526.7408" y="-435.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode:dot()))</text>
<text text-anchor="middle" x="1526.7408" y="-419.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;nodewalker:\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-404.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walkDeep() do</text>
<text text-anchor="middle" x="1526.7408" y="-388.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; &#45;&#45; &quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-373.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1526.7408" y="-358.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-342.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walkBroad() do</text>
<text text-anchor="middle" x="1526.7408" y="-327.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; ~~ &quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-311.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1526.7408" y="-296.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-281.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:select(&quot;bmatch&quot;) do</text>
<text text-anchor="middle" x="1526.7408" y="-265.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; %% &quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-250.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1526.7408" y="-234.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-219.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for tok in abNode:tokens() do</text>
<text text-anchor="middle" x="1526.7408" y="-204.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(tok .. &quot; || &quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-188.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1526.7408" y="-173.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="1526.7408" y="-141.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif not verb then</text>
<text text-anchor="middle" x="1526.7408" y="-126.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; do the things</text>
<text text-anchor="middle" x="1526.7408" y="-111.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd)</text>
<text text-anchor="middle" x="1526.7408" y="-95.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="1526.7408" y="-80.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_15&#45;&gt;leaf_18 -->
<g id="edge9" class="edge">
<title>codeblock_15&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1526.7408,-1106.3103C1526.7408,-1099.4663 1526.7408,-1090.8474 1526.7408,-1080.7437"/>
<polygon fill="#000000" stroke="#000000" points="1530.2409,-1080.6112 1526.7408,-1070.6112 1523.2409,-1080.6112 1530.2409,-1080.6112"/>
</g>
<!-- section_16 -->
<g id="node18" class="node">
<title>section_16</title>
<ellipse fill="none" stroke="#000000" cx="1918.7408" cy="-1124.4017" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="1918.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_16</text>
</g>
<!-- header_19 -->
<g id="node19" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1918.7408" cy="-571.2009" rx="120.9043" ry="18"/>
<text text-anchor="middle" x="1918.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Sample Doc for REPLing</text>
</g>
<!-- section_16&#45;&gt;header_19 -->
<g id="edge10" class="edge">
<title>section_16&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1918.7408,-1106.3103C1918.7408,-1025.6324 1918.7408,-698.3206 1918.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="1922.2409,-599.4336 1918.7408,-589.4336 1915.2409,-599.4337 1922.2409,-599.4336"/>
</g>
<!-- codeblock_20 -->
<g id="node20" class="node">
<title>codeblock_20</title>
<ellipse fill="none" stroke="#000000" cx="2264.7408" cy="-1124.4017" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="2264.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_20</text>
</g>
<!-- leaf_21 -->
<g id="node21" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="2472.2408,-606.5012 2057.2408,-606.5012 2057.2408,-535.9005 2472.2408,-535.9005 2472.2408,-606.5012"/>
<text text-anchor="middle" x="2264.7408" y="-591.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">sample_doc = Doc(read(&quot;../orb/grym.orb&quot;)) or &quot;&quot;</text>
<text text-anchor="middle" x="2264.7408" y="-560.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
</g>
<!-- codeblock_20&#45;&gt;leaf_21 -->
<g id="edge11" class="edge">
<title>codeblock_20&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2264.7408,-1106.3103C2264.7408,-1029.8369 2264.7408,-731.7663 2264.7408,-616.7894"/>
<polygon fill="#000000" stroke="#000000" points="2268.2409,-616.5687 2264.7408,-606.5688 2261.2409,-616.5688 2268.2409,-616.5687"/>
</g>
<!-- section_17 -->
<g id="node22" class="node">
<title>section_17</title>
<ellipse fill="none" stroke="#000000" cx="2650.7408" cy="-1124.4017" rx="52.7641" ry="18"/>
<text text-anchor="middle" x="2650.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section_17</text>
</g>
<!-- header_22 -->
<g id="node23" class="node">
<title>header_22</title>
<ellipse fill="none" stroke="#000000" cx="2650.7408" cy="-571.2009" rx="160.5556" ry="18"/>
<text text-anchor="middle" x="2650.7408" y="-567.0009" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Run the samples and make dotfiles</text>
</g>
<!-- section_17&#45;&gt;header_22 -->
<g id="edge12" class="edge">
<title>section_17&#45;&gt;header_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2650.7408,-1106.3103C2650.7408,-1025.6324 2650.7408,-698.3206 2650.7408,-599.5527"/>
<polygon fill="#000000" stroke="#000000" points="2654.2409,-599.4336 2650.7408,-589.4336 2647.2409,-599.4337 2654.2409,-599.4336"/>
</g>
<!-- codeblock_23 -->
<g id="node24" class="node">
<title>codeblock_23</title>
<ellipse fill="none" stroke="#000000" cx="3047.7408" cy="-1124.4017" rx="64.8671" ry="18"/>
<text text-anchor="middle" x="3047.7408" y="-1120.2017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">codeblock_23</text>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="3265.7408,-706.0015 2829.7408,-706.0015 2829.7408,-436.4003 3265.7408,-436.4003 3265.7408,-706.0015"/>
<text text-anchor="middle" x="3047.7408" y="-690.9011" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="3047.7408" y="-675.5011" font-family="Inconsolata" font-size="14.00" fill="#000000">for _,v in ipairs(samples) do</text>
<text text-anchor="middle" x="3047.7408" y="-660.1011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if v:match(&quot;~&quot;) == nil then</text>
<text text-anchor="middle" x="3047.7408" y="-644.701" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if verbose then io.write(v) end</text>
<text text-anchor="middle" x="3047.7408" y="-629.301" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local sample = read(v)</text>
<text text-anchor="middle" x="3047.7408" y="-613.901" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45;io.write(v..&quot;\n&quot;)</text>
<text text-anchor="middle" x="3047.7408" y="-598.501" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(sample)</text>
<text text-anchor="middle" x="3047.7408" y="-583.1009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot = doc:dot()</text>
<text text-anchor="middle" x="3047.7408" y="-567.7009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local old_dot = read(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;)</text>
<text text-anchor="middle" x="3047.7408" y="-552.3009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if old_dot and old_dot ~= doc_dot then</text>
<text text-anchor="middle" x="3047.7408" y="-536.9008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot; &#160;&#160;&#45;&#45; changed dotfile: &quot; .. v)</text>
<text text-anchor="middle" x="3047.7408" y="-521.5008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;&#45;old.dot&quot;, old_dot)</text>
<text text-anchor="middle" x="3047.7408" y="-506.1008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3047.7408" y="-490.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;, doc:dot())</text>
<text text-anchor="middle" x="3047.7408" y="-475.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3047.7408" y="-459.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3047.7408" y="-444.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_23&#45;&gt;leaf_24 -->
<g id="edge13" class="edge">
<title>codeblock_23&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3047.7408,-1106.3103C3047.7408,-1046.8602 3047.7408,-853.4888 3047.7408,-716.3264"/>
<polygon fill="#000000" stroke="#000000" points="3051.2409,-716.1375 3047.7408,-706.1375 3044.2409,-716.1376 3051.2409,-716.1375"/>
</g>
</g>
</svg>