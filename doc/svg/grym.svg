<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="3193pt" height="1309pt"
 viewBox="0.00 0.00 3193.00 1309.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1305.4016)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-1305.4016 3189,-1305.4016 3189,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="373" cy="-1283.4016" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="373" y="-1279.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 123</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="373" cy="-1211.4016" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="373" y="-1207.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;41</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M373,-1265.233C373,-1257.5325 373,-1248.3759 373,-1239.8182"/>
<polygon fill="#000000" stroke="#000000" points="376.5001,-1239.8148 373,-1229.8149 369.5001,-1239.8149 376.5001,-1239.8148"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="180" cy="-1139.4016" rx="58.5101" ry="18"/>
<text text-anchor="middle" x="180" y="-1135.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grimoire </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M334.8694,-1197.1767C303.8738,-1185.6136 260.0091,-1169.2496 226.8716,-1156.8874"/>
<polygon fill="#000000" stroke="#000000" points="227.9873,-1153.568 217.3947,-1153.3519 225.5406,-1160.1265 227.9873,-1153.568"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="308" cy="-1139.4016" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="308" y="-1135.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;41</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M357.2653,-1193.9724C349.2014,-1185.0401 339.2412,-1174.0072 330.3915,-1164.2045"/>
<polygon fill="#000000" stroke="#000000" points="332.8888,-1161.7476 323.5898,-1156.6703 327.6929,-1166.4384 332.8888,-1161.7476"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="438" cy="-1139.4016" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="438" y="-1135.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 5&#45;41</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M388.7347,-1193.9724C396.7393,-1185.1057 406.6124,-1174.1694 415.4131,-1164.4209"/>
<polygon fill="#000000" stroke="#000000" points="418.0818,-1166.6879 422.1849,-1156.9198 412.8859,-1161.9972 418.0818,-1166.6879"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1495" cy="-1139.4016" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1495" y="-1135.2016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 42&#45;101</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M432.5314,-1207.5814C620.8585,-1195.4962 1203.7381,-1158.0922 1416.3555,-1144.4483"/>
<polygon fill="#000000" stroke="#000000" points="1416.7451,-1147.9306 1426.5004,-1143.7973 1416.2968,-1140.945 1416.7451,-1147.9306"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="240,-1085.6037 0,-1085.6037 0,-1045.7995 240,-1045.7995 240,-1085.6037"/>
<text text-anchor="middle" x="120" y="-1054.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">A metalanguage for magic spells.</text>
</g>
<!-- block_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>block_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M273.5179,-1125.8839C247.3879,-1115.6404 210.8344,-1101.3106 179.9507,-1089.2035"/>
<polygon fill="#000000" stroke="#000000" points="181.1536,-1085.9158 170.566,-1085.5245 178.5987,-1092.4329 181.1536,-1085.9158"/>
</g>
<!-- header_7 -->
<g id="node8" class="node">
<title>header_7</title>
<ellipse fill="none" stroke="#000000" cx="316" cy="-1065.7016" rx="57.5753" ry="18"/>
<text text-anchor="middle" x="316" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Requires</text>
</g>
<!-- section_4&#45;&gt;header_7 -->
<g id="edge7" class="edge">
<title>section_4&#45;&gt;header_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M411.2266,-1123.2278C393.6664,-1112.6197 370.5113,-1098.6318 351.4312,-1087.1055"/>
<polygon fill="#000000" stroke="#000000" points="353.0802,-1084.0126 342.711,-1081.8376 349.4606,-1090.0042 353.0802,-1084.0126"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="438" cy="-1065.7016" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="438" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 5&#45;8</text>
</g>
<!-- section_4&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M438,-1121.1836C438,-1112.9727 438,-1103.087 438,-1093.9488"/>
<polygon fill="#000000" stroke="#000000" points="441.5001,-1093.71 438,-1083.71 434.5001,-1093.71 441.5001,-1093.71"/>
</g>
<!-- block_9 -->
<g id="node10" class="node">
<title>block_9</title>
<ellipse fill="none" stroke="#000000" cx="553" cy="-1065.7016" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="553" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 9&#45;41</text>
</g>
<!-- section_4&#45;&gt;block_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;block_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M463.5222,-1123.0452C480.1272,-1112.4035 501.949,-1098.4186 519.8853,-1086.9238"/>
<polygon fill="#000000" stroke="#000000" points="521.8076,-1089.849 528.3384,-1081.5064 518.0305,-1083.9554 521.8076,-1089.849"/>
</g>
<!-- header_14 -->
<g id="node15" class="node">
<title>header_14</title>
<ellipse fill="none" stroke="#000000" cx="1199" cy="-1065.7016" rx="91.9296" ry="18"/>
<text text-anchor="middle" x="1199" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Argument parsing</text>
</g>
<!-- section_5&#45;&gt;header_14 -->
<g id="edge14" class="edge">
<title>section_5&#45;&gt;header_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1444.4521,-1126.8158C1395.1762,-1114.5468 1319.9553,-1095.8178 1265.7746,-1082.3275"/>
<polygon fill="#000000" stroke="#000000" points="1266.4631,-1078.8922 1255.9137,-1079.8723 1264.7717,-1085.6848 1266.4631,-1078.8922"/>
</g>
<!-- block_15 -->
<g id="node16" class="node">
<title>block_15</title>
<ellipse fill="none" stroke="#000000" cx="1365" cy="-1065.7016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1365" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 42&#45;46</text>
</g>
<!-- section_5&#45;&gt;block_15 -->
<g id="edge15" class="edge">
<title>section_5&#45;&gt;block_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1465.8255,-1122.8619C1446.8695,-1112.1153 1422.0019,-1098.0173 1401.7067,-1086.5114"/>
<polygon fill="#000000" stroke="#000000" points="1403.1667,-1083.3159 1392.7413,-1081.4287 1399.7144,-1089.4053 1403.1667,-1083.3159"/>
</g>
<!-- block_16 -->
<g id="node17" class="node">
<title>block_16</title>
<ellipse fill="none" stroke="#000000" cx="1495" cy="-1065.7016" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1495" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 47&#45;49</text>
</g>
<!-- section_5&#45;&gt;block_16 -->
<g id="edge16" class="edge">
<title>section_5&#45;&gt;block_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1495,-1121.1836C1495,-1112.9727 1495,-1103.087 1495,-1093.9488"/>
<polygon fill="#000000" stroke="#000000" points="1498.5001,-1093.71 1495,-1083.71 1491.5001,-1093.71 1498.5001,-1093.71"/>
</g>
<!-- block_17 -->
<g id="node18" class="node">
<title>block_17</title>
<ellipse fill="none" stroke="#000000" cx="1726" cy="-1065.7016" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="1726" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 50&#45;101</text>
</g>
<!-- section_5&#45;&gt;block_17 -->
<g id="edge17" class="edge">
<title>section_5&#45;&gt;block_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1539.2658,-1125.2787C1577.9943,-1112.9225 1634.2535,-1094.9731 1674.8879,-1082.0088"/>
<polygon fill="#000000" stroke="#000000" points="1676.1388,-1085.2836 1684.6019,-1078.9096 1674.0111,-1078.6147 1676.1388,-1085.2836"/>
</g>
<!-- section_18 -->
<g id="node19" class="node">
<title>section_18</title>
<ellipse fill="none" stroke="#000000" cx="2111" cy="-1065.7016" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2111" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 92&#45;101</text>
</g>
<!-- section_5&#45;&gt;section_18 -->
<g id="edge18" class="edge">
<title>section_5&#45;&gt;section_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1559.1795,-1131.723C1674.2737,-1117.9528 1915.1034,-1089.1392 2036.9741,-1074.5582"/>
<polygon fill="#000000" stroke="#000000" points="2037.4515,-1078.0262 2046.9649,-1073.3629 2036.6199,-1071.0758 2037.4515,-1078.0262"/>
</g>
<!-- section_19 -->
<g id="node20" class="node">
<title>section_19</title>
<ellipse fill="none" stroke="#000000" cx="2705" cy="-1065.7016" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="2705" y="-1061.5016" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 102&#45;123</text>
</g>
<!-- section_5&#45;&gt;section_19 -->
<g id="edge19" class="edge">
<title>section_5&#45;&gt;section_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1563.9607,-1135.2013C1772.3281,-1122.5098 2394.9656,-1084.5855 2621.4517,-1070.7904"/>
<polygon fill="#000000" stroke="#000000" points="2621.8422,-1074.2732 2631.6109,-1070.1716 2621.4166,-1067.2862 2621.8422,-1074.2732"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="403.5,-1002.5036 44.5,-1002.5036 44.5,-962.6994 403.5,-962.6994 403.5,-1002.5036"/>
<text text-anchor="middle" x="224" y="-971.1015" font-family="Inconsolata" font-size="14.00" fill="#000000">Like any main entry =grym.lua= is mostly imports.</text>
</g>
<!-- block_8&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>block_8&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M405.0315,-1052.8993C373.0386,-1040.4759 323.7264,-1021.3271 284.6432,-1006.1504"/>
<polygon fill="#000000" stroke="#000000" points="285.5328,-1002.7413 274.944,-1002.384 282.9989,-1009.2666 285.5328,-1002.7413"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="494" cy="-982.6015" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="494" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 9&#45;40</text>
</g>
<!-- block_9&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>block_9&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M540.4876,-1048.0782C532.4074,-1036.6974 521.7479,-1021.6837 512.6746,-1008.9043"/>
<polygon fill="#000000" stroke="#000000" points="515.3408,-1006.6137 506.6977,-1000.486 509.6331,-1010.6661 515.3408,-1006.6137"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="639,-1000.6015 585,-1000.6015 585,-964.6015 639,-964.6015 639,-1000.6015"/>
</g>
<!-- block_9&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>block_9&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M565.5124,-1048.0782C573.5376,-1036.7749 584.1072,-1021.8878 593.14,-1009.1654"/>
<polygon fill="#000000" stroke="#000000" points="596.1625,-1010.9541 599.0978,-1000.774 590.4547,-1006.9017 596.1625,-1010.9541"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="656,-850.4018 332,-850.4018 332,-374.6002 656,-374.6002 656,-850.4018"/>
<text text-anchor="middle" x="494" y="-835.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="494" y="-803.6013" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="494" y="-756.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="494" y="-740.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="494" y="-725.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="494" y="-710.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="494" y="-694.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="494" y="-679.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="494" y="-663.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="494" y="-648.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="494" y="-617.001" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="494" y="-585.601" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="494" y="-570.201" font-family="Inconsolata" font-size="14.00" fill="#000000">u &#160;&#160;&#160;= require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="494" y="-522.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="494" y="-507.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="494" y="-476.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="494" y="-460.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="494" y="-445.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="494" y="-413.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="494" y="-398.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="494" y="-383.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>codeblock_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M494,-964.5003C494,-942.9801 494,-904.3998 494,-860.4463"/>
<polygon fill="#000000" stroke="#000000" points="497.5001,-860.3865 494,-850.3865 490.5001,-860.3865 497.5001,-860.3865"/>
</g>
<!-- leaf_20 -->
<g id="node21" class="node">
<title>leaf_20</title>
<polygon fill="none" stroke="#c0c0c0" points="1149,-1009.902 657,-1009.902 657,-955.3011 1149,-955.3011 1149,-1009.902"/>
<text text-anchor="middle" x="903" y="-978.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">This is done crudely, we can use =pl.lapp= in future to parse within</text>
<text text-anchor="middle" x="903" y="-963.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">commands to each verb.</text>
</g>
<!-- block_15&#45;&gt;leaf_20 -->
<g id="edge20" class="edge">
<title>block_15&#45;&gt;leaf_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1325.7013,-1052.8547C1317.2782,-1050.3649 1308.3884,-1047.9331 1300,-1046.0016 1241.5697,-1032.5472 1177.6497,-1020.9833 1118.5038,-1011.5562"/>
<polygon fill="#000000" stroke="#000000" points="1118.7125,-1008.0458 1108.2887,-1009.9416 1117.6196,-1014.96 1118.7125,-1008.0458"/>
</g>
<!-- leaf_21 -->
<g id="node22" class="node">
<title>leaf_21</title>
<polygon fill="none" stroke="#c0c0c0" points="1631,-1001.9021 1167,-1001.9021 1167,-963.301 1631,-963.301 1631,-1001.9021"/>
<text text-anchor="middle" x="1399" y="-986.8016" font-family="Inconsolata" font-size="14.00" fill="#000000">Note here that we pass in the pwd from a shell script. This may </text>
<text text-anchor="middle" x="1399" y="-971.4015" font-family="Inconsolata" font-size="14.00" fill="#000000">change, now that we&#39;ve added [[sh][../lib/sh.lua]]]]</text>
</g>
<!-- block_16&#45;&gt;leaf_21 -->
<g id="edge21" class="edge">
<title>block_16&#45;&gt;leaf_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1475.1087,-1048.4832C1461.9486,-1037.0914 1444.4359,-1021.932 1429.5274,-1009.0268"/>
<polygon fill="#000000" stroke="#000000" points="1431.4085,-1006.026 1421.557,-1002.1275 1426.8271,-1011.3186 1431.4085,-1006.026"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="1726" cy="-982.6015" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1726" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 50&#45;90</text>
</g>
<!-- block_17&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>block_17&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1726,-1047.6701C1726,-1036.9633 1726,-1023.1498 1726,-1011.0063"/>
<polygon fill="#000000" stroke="#000000" points="1729.5001,-1010.8847 1726,-1000.8848 1722.5001,-1010.8848 1729.5001,-1010.8847"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1875,-1000.6015 1821,-1000.6015 1821,-964.6015 1875,-964.6015 1875,-1000.6015"/>
</g>
<!-- block_17&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_17&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1752.3086,-1049.3891C1769.5117,-1038.5455 1792.3531,-1023.811 1812,-1010.0016 1813.4137,-1009.0079 1814.8503,-1007.9827 1816.2954,-1006.9387"/>
<polygon fill="#000000" stroke="#000000" points="1818.5925,-1009.5935 1824.5649,-1000.8424 1814.4388,-1003.959 1818.5925,-1009.5935"/>
</g>
<!-- header_25 -->
<g id="node26" class="node">
<title>header_25</title>
<ellipse fill="none" stroke="#000000" cx="2014" cy="-982.6015" rx="120.9043" ry="18"/>
<text text-anchor="middle" x="2014" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Sample Doc for REPLing</text>
</g>
<!-- section_18&#45;&gt;header_25 -->
<g id="edge25" class="edge">
<title>section_18&#45;&gt;header_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2090.4288,-1048.0782C2076.5057,-1036.1503 2057.9245,-1020.2317 2042.5697,-1007.0772"/>
<polygon fill="#000000" stroke="#000000" points="2044.7473,-1004.334 2034.876,-1000.486 2040.1931,-1009.65 2044.7473,-1004.334"/>
</g>
<!-- block_26 -->
<g id="node27" class="node">
<title>block_26</title>
<ellipse fill="none" stroke="#000000" cx="2209" cy="-982.6015" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2209" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 92&#45;93</text>
</g>
<!-- section_18&#45;&gt;block_26 -->
<g id="edge26" class="edge">
<title>section_18&#45;&gt;block_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2131.7833,-1048.0782C2146.1369,-1035.9069 2165.3909,-1019.5803 2181.0814,-1006.2754"/>
<polygon fill="#000000" stroke="#000000" points="2183.5535,-1008.7681 2188.9169,-999.6312 2179.0262,-1003.4291 2183.5535,-1008.7681"/>
</g>
<!-- block_27 -->
<g id="node28" class="node">
<title>block_27</title>
<ellipse fill="none" stroke="#000000" cx="2344" cy="-982.6015" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="2344" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 94&#45;101</text>
</g>
<!-- section_18&#45;&gt;block_27 -->
<g id="edge27" class="edge">
<title>section_18&#45;&gt;block_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2154.4236,-1051.4386C2187.368,-1040.4785 2233.7052,-1024.7645 2274,-1010.0016 2281.9269,-1007.0974 2290.3172,-1003.9114 2298.4307,-1000.7714"/>
<polygon fill="#000000" stroke="#000000" points="2299.7373,-1004.0187 2307.7837,-997.1262 2297.1953,-997.4965 2299.7373,-1004.0187"/>
</g>
<!-- header_32 -->
<g id="node33" class="node">
<title>header_32</title>
<ellipse fill="none" stroke="#000000" cx="2583" cy="-982.6015" rx="160.5556" ry="18"/>
<text text-anchor="middle" x="2583" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Run the samples and make dotfiles</text>
</g>
<!-- section_19&#45;&gt;header_32 -->
<g id="edge32" class="edge">
<title>section_19&#45;&gt;header_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2680.0171,-1048.6845C2662.0422,-1036.441 2637.5668,-1019.7696 2617.6968,-1006.2352"/>
<polygon fill="#000000" stroke="#000000" points="2619.4494,-1003.1942 2609.2142,-1000.4573 2615.5087,-1008.9796 2619.4494,-1003.1942"/>
</g>
<!-- block_33 -->
<g id="node34" class="node">
<title>block_33</title>
<ellipse fill="none" stroke="#000000" cx="2827" cy="-982.6015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2827" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 102&#45;103</text>
</g>
<!-- section_19&#45;&gt;block_33 -->
<g id="edge33" class="edge">
<title>section_19&#45;&gt;block_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2729.9829,-1048.6845C2748.5264,-1036.0537 2773.9882,-1018.7104 2794.1746,-1004.9605"/>
<polygon fill="#000000" stroke="#000000" points="2796.1729,-1007.8342 2802.4674,-999.3119 2792.2322,-1002.0488 2796.1729,-1007.8342"/>
</g>
<!-- block_34 -->
<g id="node35" class="node">
<title>block_34</title>
<ellipse fill="none" stroke="#000000" cx="2976" cy="-982.6015" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="2976" y="-978.4015" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 104&#45;123</text>
</g>
<!-- section_19&#45;&gt;block_34 -->
<g id="edge34" class="edge">
<title>section_19&#45;&gt;block_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2756.3563,-1052.3749C2796.3079,-1041.7207 2853.0009,-1025.9724 2902,-1010.0016 2910.5173,-1007.2254 2919.5115,-1004.0798 2928.1834,-1000.9346"/>
<polygon fill="#000000" stroke="#000000" points="2929.6151,-1004.1373 2937.7946,-997.4034 2927.2011,-997.5668 2929.6151,-1004.1373"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1979,-919.4021 1473,-919.4021 1473,-305.5999 1979,-305.5999 1979,-919.4021"/>
<text text-anchor="middle" x="1726" y="-904.0015" font-family="Inconsolata" font-size="14.00" fill="#000000">local pwd, verb = &quot;&quot;, &quot;&quot;</text>
<text text-anchor="middle" x="1726" y="-872.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">if (arg) then</text>
<text text-anchor="middle" x="1726" y="-857.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd = table.remove(arg, 1)</text>
<text text-anchor="middle" x="1726" y="-841.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verb = table.remove(arg, 1)</text>
<text text-anchor="middle" x="1726" y="-826.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(arg) do</text>
<text text-anchor="middle" x="1726" y="-811.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(ansi.yellow(v)..&quot;\n&quot;)</text>
<text text-anchor="middle" x="1726" y="-795.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1726" y="-780.2013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1726" y="-732.8012" font-family="Inconsolata" font-size="14.00" fill="#000000">local grym = {}</text>
<text text-anchor="middle" x="1726" y="-701.4012" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.invert = invert</text>
<text text-anchor="middle" x="1726" y="-686.0012" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.knit &#160;&#160;= knit</text>
<text text-anchor="middle" x="1726" y="-670.6012" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.weave &#160;= weave</text>
<text text-anchor="middle" x="1726" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000">samples = getfiles(&quot;samples&quot;)</text>
<text text-anchor="middle" x="1726" y="-607.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
<text text-anchor="middle" x="1726" y="-576.4011" font-family="Inconsolata" font-size="14.00" fill="#000000">if verb == &quot;invert&quot; then</text>
<text text-anchor="middle" x="1726" y="-561.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If we allow inversion in its present no&#45;guards state,</text>
<text text-anchor="middle" x="1726" y="-545.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; we will lose all commentary</text>
<text text-anchor="middle" x="1726" y="-530.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;u.freeze(&quot;no&quot;)</text>
<text text-anchor="middle" x="1726" y="-514.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;invert:invert_all(pwd)</text>
<text text-anchor="middle" x="1726" y="-499.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;knit&quot; then</text>
<text text-anchor="middle" x="1726" y="-484.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; knitter goes here</text>
<text text-anchor="middle" x="1726" y="-468.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="1726" y="-453.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;weave&quot; then</text>
<text text-anchor="middle" x="1726" y="-437.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; local weaved = weave:weaveMd(Doc(read(&quot;../orb/grym/block.gm&quot;)))</text>
<text text-anchor="middle" x="1726" y="-422.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; io.write(weaved)</text>
<text text-anchor="middle" x="1726" y="-407.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd) &#160;&#160;&#160;</text>
<text text-anchor="middle" x="1726" y="-375.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif not verb then</text>
<text text-anchor="middle" x="1726" y="-360.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; do the things</text>
<text text-anchor="middle" x="1726" y="-344.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd)</text>
<text text-anchor="middle" x="1726" y="-329.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="1726" y="-314.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>codeblock_22&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1726,-964.5003C1726,-955.5387 1726,-943.6187 1726,-929.5842"/>
<polygon fill="#000000" stroke="#000000" points="1729.5001,-929.5405 1726,-919.5405 1722.5001,-929.5406 1729.5001,-929.5405"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="2236,-630.501 2182,-630.501 2182,-594.501 2236,-594.501 2236,-630.501"/>
</g>
<!-- block_26&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_26&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2209,-964.5003C2209,-904.7287 2209,-713.3492 2209,-640.7716"/>
<polygon fill="#000000" stroke="#000000" points="2212.5001,-640.5674 2209,-630.5674 2205.5001,-640.5675 2212.5001,-640.5674"/>
</g>
<!-- codeblock_29 -->
<g id="node30" class="node">
<title>codeblock_29</title>
<ellipse fill="none" stroke="#000000" cx="2340" cy="-612.501" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="2340" y="-608.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 94&#45;100</text>
</g>
<!-- block_27&#45;&gt;codeblock_29 -->
<g id="edge29" class="edge">
<title>block_27&#45;&gt;codeblock_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2343.8044,-964.5003C2343.1584,-904.7287 2341.09,-713.3492 2340.3055,-640.7716"/>
<polygon fill="#000000" stroke="#000000" points="2343.8032,-640.529 2340.1953,-630.5674 2336.8036,-640.6047 2343.8032,-640.529"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2494,-630.501 2440,-630.501 2440,-594.501 2494,-594.501 2494,-630.501"/>
</g>
<!-- block_27&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>block_27&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.6993,-967.3781C2395.8095,-956.6905 2418.5511,-940.5 2431,-919.2015 2483.8649,-828.7566 2477.0005,-697.6913 2470.7893,-640.7136"/>
<polygon fill="#000000" stroke="#000000" points="2474.2505,-640.1768 2469.6127,-630.651 2467.2978,-640.9899 2474.2505,-640.1768"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2547.5,-170.2006 2132.5,-170.2006 2132.5,-99.5999 2547.5,-99.5999 2547.5,-170.2006"/>
<text text-anchor="middle" x="2340" y="-155.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">sample_doc = Doc(read(&quot;../orb/grym.orb&quot;)) or &quot;&quot;</text>
<text text-anchor="middle" x="2340" y="-123.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
</g>
<!-- codeblock_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>codeblock_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2340,-594.3617C2340,-525.9978 2340,-282.6312 2340,-180.5192"/>
<polygon fill="#000000" stroke="#000000" points="2343.5001,-180.5112 2340,-170.5112 2336.5001,-180.5113 2343.5001,-180.5112"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2854,-630.501 2800,-630.501 2800,-594.501 2854,-594.501 2854,-630.501"/>
</g>
<!-- block_33&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>block_33&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2827,-964.5003C2827,-904.7287 2827,-713.3492 2827,-640.7716"/>
<polygon fill="#000000" stroke="#000000" points="2830.5001,-640.5674 2827,-630.5674 2823.5001,-640.5675 2830.5001,-640.5674"/>
</g>
<!-- codeblock_36 -->
<g id="node37" class="node">
<title>codeblock_36</title>
<ellipse fill="none" stroke="#000000" cx="2967" cy="-612.501" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2967" y="-608.301" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 104&#45;122</text>
</g>
<!-- block_34&#45;&gt;codeblock_36 -->
<g id="edge36" class="edge">
<title>block_34&#45;&gt;codeblock_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2975.5598,-964.5003C2974.1063,-904.7287 2969.4524,-713.3492 2967.6875,-640.7716"/>
<polygon fill="#000000" stroke="#000000" points="2971.1815,-640.4794 2967.4393,-630.5674 2964.1836,-640.6496 2971.1815,-640.4794"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3126,-630.501 3072,-630.501 3072,-594.501 3126,-594.501 3126,-630.501"/>
</g>
<!-- block_34&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_34&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3009.5704,-966.8885C3028.4963,-956.1987 3050.7397,-940.1773 3063,-919.2015 3115.8649,-828.7566 3109.0005,-697.6913 3102.7893,-640.7136"/>
<polygon fill="#000000" stroke="#000000" points="3106.2505,-640.1768 3101.6127,-630.651 3099.2978,-640.9899 3106.2505,-640.1768"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="3185,-269.7009 2749,-269.7009 2749,-.0997 3185,-.0997 3185,-269.7009"/>
<text text-anchor="middle" x="2967" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="2967" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">for _,v in ipairs(samples) do</text>
<text text-anchor="middle" x="2967" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if v:match(&quot;~&quot;) == nil then</text>
<text text-anchor="middle" x="2967" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if verbose then io.write(v) end</text>
<text text-anchor="middle" x="2967" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local sample = read(v)</text>
<text text-anchor="middle" x="2967" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45;io.write(v..&quot;\n&quot;)</text>
<text text-anchor="middle" x="2967" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(sample)</text>
<text text-anchor="middle" x="2967" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot = doc:dot()</text>
<text text-anchor="middle" x="2967" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local old_dot = read(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;)</text>
<text text-anchor="middle" x="2967" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if old_dot and old_dot ~= doc_dot then</text>
<text text-anchor="middle" x="2967" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot; &#160;&#160;&#45;&#45; changed dotfile: &quot; .. v)</text>
<text text-anchor="middle" x="2967" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;&#45;old.dot&quot;, old_dot)</text>
<text text-anchor="middle" x="2967" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2967" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;, doc:dot())</text>
<text text-anchor="middle" x="2967" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2967" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="2967" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>codeblock_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2967,-594.3617C2967,-543.2951 2967,-394.5802 2967,-280.0337"/>
<polygon fill="#000000" stroke="#000000" points="2970.5001,-279.7593 2967,-269.7593 2963.5001,-279.7593 2970.5001,-279.7593"/>
</g>
</g>
</svg>