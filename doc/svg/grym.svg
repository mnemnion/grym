<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5282pt" height="4519pt"
 viewBox="0.00 0.00 5281.50 4519.41" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 4515.4063)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-4515.4063 5277.5,-4515.4063 5277.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1082.5" cy="-4493.4063" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1082.5" y="-4489.2063" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 167</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1082.5" cy="-4421.4063" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1082.5" y="-4417.2063" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;60</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1082.5,-4475.2376C1082.5,-4467.5372 1082.5,-4458.3806 1082.5,-4449.8229"/>
<polygon fill="#000000" stroke="#000000" points="1086.0001,-4449.8195 1082.5,-4439.8195 1079.0001,-4449.8196 1086.0001,-4449.8195"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="824.5" cy="-3886.8057" rx="58.5101" ry="18"/>
<text text-anchor="middle" x="824.5" y="-3882.6057" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grimoire </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1028.5858,-4412.7867C978.9404,-4403.7074 910.3631,-4387.8876 892.5,-4367.4063 776.1447,-4233.9966 804.9591,-3995.9206 819.0446,-3914.7839"/>
<polygon fill="#000000" stroke="#000000" points="822.5096,-3915.2902 820.8382,-3904.8281 815.6205,-3914.049 822.5096,-3915.2902"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="952.5" cy="-3886.8057" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="952.5" y="-3882.6057" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;60</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1052.3165,-4405.6476C1037.8533,-4396.4786 1021.7112,-4383.5329 1012.5,-4367.4063 925.6683,-4215.3856 940.3903,-3992.741 948.9136,-3914.9079"/>
<polygon fill="#000000" stroke="#000000" points="952.398,-3915.2433 950.064,-3904.9088 945.4439,-3914.4432 952.398,-3915.2433"/>
</g>
<!-- section_4 -->
<g id="node5" class="node">
<title>section_4</title>
<ellipse fill="none" stroke="#000000" cx="1082.5" cy="-3886.8057" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="1082.5" y="-3882.6057" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 5&#45;41</text>
</g>
<!-- section_1&#45;&gt;section_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;section_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1082.5,-4403.3128C1082.5,-4324.5458 1082.5,-4011.1896 1082.5,-3915.02"/>
<polygon fill="#000000" stroke="#000000" points="1086.0001,-3914.8946 1082.5,-3904.8946 1079.0001,-3914.8947 1086.0001,-3914.8946"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="2803.5" cy="-3886.8057" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2803.5" y="-3882.6057" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 61&#45;145</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1124.6144,-4408.3241C1357.4506,-4335.9973 2486.1352,-3985.3899 2748.7986,-3903.7978"/>
<polygon fill="#000000" stroke="#000000" points="2749.9861,-3907.0939 2758.4977,-3900.7849 2747.9095,-3900.409 2749.9861,-3907.0939"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="3251,-4367.5069 2892,-4367.5069 2892,-3406.1045 3251,-3406.1045 3251,-4367.5069"/>
<text text-anchor="middle" x="3071.5" y="-4352.2063" font-family="Inconsolata" font-size="14.00" fill="#000000">* Grimoire </text>
<text text-anchor="middle" x="3071.5" y="-4320.8062" font-family="Inconsolata" font-size="14.00" fill="#000000">A metalanguage for magic spells.</text>
<text text-anchor="middle" x="3071.5" y="-4289.4062" font-family="Inconsolata" font-size="14.00" fill="#000000">** Requires</text>
<text text-anchor="middle" x="3071.5" y="-4258.0062" font-family="Inconsolata" font-size="14.00" fill="#000000">Like any main entry =grym.lua= is mostly imports.</text>
<text text-anchor="middle" x="3071.5" y="-4210.6061" font-family="Inconsolata" font-size="14.00" fill="#000000">*** locals</text>
<text text-anchor="middle" x="3071.5" y="-4179.2061" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3071.5" y="-4163.8061" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="3071.5" y="-4132.4061" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="3071.5" y="-4085.006" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="3071.5" y="-4069.606" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="3071.5" y="-4054.206" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="3071.5" y="-4038.8059" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="3071.5" y="-4023.4059" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="3071.5" y="-4008.0059" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="3071.5" y="-3992.6058" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="3071.5" y="-3977.2058" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="3071.5" y="-3945.8058" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3914.4057" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="3071.5" y="-3883.0057" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3867.6057" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3852.2056" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3820.8056" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3805.4056" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3758.0056" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3071.5" y="-3710.6055" font-family="Inconsolata" font-size="14.00" fill="#000000">*** globals</text>
<text text-anchor="middle" x="3071.5" y="-3679.2055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;For interactive and introspective development.</text>
<text text-anchor="middle" x="3071.5" y="-3647.8055" font-family="Inconsolata" font-size="14.00" fill="#000000">Can&#39;t wait to build a reasonable REPL.</text>
<text text-anchor="middle" x="3071.5" y="-3616.4054" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3071.5" y="-3601.0054" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3585.6054" font-family="Inconsolata" font-size="14.00" fill="#000000">u = require &quot;util&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3570.2053" font-family="Inconsolata" font-size="14.00" fill="#000000">s = require &quot;status&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3554.8053" font-family="Inconsolata" font-size="14.00" fill="#000000">m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3539.4053" font-family="Inconsolata" font-size="14.00" fill="#000000">Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3508.0052" font-family="Inconsolata" font-size="14.00" fill="#000000">Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3476.6052" font-family="Inconsolata" font-size="14.00" fill="#000000">spec = require &quot;node/spec&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3461.2052" font-family="Inconsolata" font-size="14.00" fill="#000000">pnf = require &quot;node/define&quot;</text>
<text text-anchor="middle" x="3071.5" y="-3445.8051" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3071.5" y="-3414.4051" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_1&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>section_1&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1143.3984,-4420.4963C1453.8534,-4415.7449 2847.1543,-4393.0231 2883.5,-4367.4063 2883.5887,-4367.3438 2883.6773,-4367.2812 2883.7659,-4367.2186"/>
<polygon fill="#000000" stroke="#000000" points="2885.8947,-4369.9978 2891.8854,-4361.2593 2881.7528,-4364.3546 2885.8947,-4369.9978"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="567.5,-2718.8061 327.5,-2718.8061 327.5,-2679.0019 567.5,-2679.0019 567.5,-2718.8061"/>
<text text-anchor="middle" x="447.5" y="-2687.404" font-family="Inconsolata" font-size="14.00" fill="#000000">A metalanguage for magic spells.</text>
</g>
<!-- block_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>block_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M957.076,-3868.6848C973.7982,-3797.7315 1024.0083,-3536.3051 892.5,-3406.2051 792.0118,-3306.793 680.1966,-3466.2658 576.5,-3370.2051 387.5354,-3195.1553 426.2642,-2834.3843 442.4257,-2728.6444"/>
<polygon fill="#000000" stroke="#000000" points="445.8981,-2729.0938 444.0009,-2718.6702 438.9838,-2728.0018 445.8981,-2729.0938"/>
</g>
<!-- header_7 -->
<g id="node8" class="node">
<title>header_7</title>
<ellipse fill="none" stroke="#000000" cx="643.5" cy="-2698.904" rx="57.5753" ry="18"/>
<text text-anchor="middle" x="643.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Requires</text>
</g>
<!-- section_4&#45;&gt;header_7 -->
<g id="edge7" class="edge">
<title>section_4&#45;&gt;header_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1086.6186,-3868.6464C1101.564,-3797.5494 1145.3613,-3535.6576 1012.5,-3406.2051 915.6847,-3311.8737 805.1609,-3466.6982 710.5,-3370.2051 531.6645,-3187.9083 608.8549,-2829.1827 635.6837,-2726.7906"/>
<polygon fill="#000000" stroke="#000000" points="639.1257,-2727.467 638.3292,-2716.9021 632.3636,-2725.6578 639.1257,-2727.467"/>
</g>
<!-- block_8 -->
<g id="node9" class="node">
<title>block_8</title>
<ellipse fill="none" stroke="#000000" cx="770.5" cy="-2698.904" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="770.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 5&#45;41</text>
</g>
<!-- section_4&#45;&gt;block_8 -->
<g id="edge8" class="edge">
<title>section_4&#45;&gt;block_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1086.4133,-3868.4626C1100.3235,-3797.7807 1140.0142,-3540.3468 1012.5,-3406.2051 955.6898,-3346.4422 885.6304,-3431.5211 830.5,-3370.2051 660.1141,-3180.7019 736.2137,-2827.7657 762.7245,-2726.6367"/>
<polygon fill="#000000" stroke="#000000" points="766.1355,-2727.4294 765.3397,-2716.8645 759.3734,-2725.6198 766.1355,-2727.4294"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="905.5" cy="-2698.904" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="905.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 10&#45;41</text>
</g>
<!-- section_4&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_4&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1079.866,-3868.4669C1070.6922,-3804.649 1039.2461,-3586.3573 1012.5,-3406.2051 973.2503,-3141.833 924.3752,-2822.1063 909.7952,-2726.9217"/>
<polygon fill="#000000" stroke="#000000" points="913.239,-2726.2877 908.2648,-2716.9331 906.3197,-2727.3479 913.239,-2726.2877"/>
</g>
<!-- section_10 -->
<g id="node11" class="node">
<title>section_10</title>
<ellipse fill="none" stroke="#000000" cx="1259.5" cy="-2698.904" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1259.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 42&#45;60</text>
</g>
<!-- section_4&#45;&gt;section_10 -->
<g id="edge10" class="edge">
<title>section_4&#45;&gt;section_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.2094,-3868.6219C1105.2561,-3734.0823 1230.4527,-2893.8491 1255.2388,-2727.502"/>
<polygon fill="#000000" stroke="#000000" points="1258.7738,-2727.5263 1256.7858,-2717.1196 1251.8502,-2726.4946 1258.7738,-2727.5263"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1702,-3000.1048 1343,-3000.1048 1343,-2397.7033 1702,-2397.7033 1702,-3000.1048"/>
<text text-anchor="middle" x="1522.5" y="-2984.8044" font-family="Inconsolata" font-size="14.00" fill="#000000">** Requires</text>
<text text-anchor="middle" x="1522.5" y="-2953.4043" font-family="Inconsolata" font-size="14.00" fill="#000000">Like any main entry =grym.lua= is mostly imports.</text>
<text text-anchor="middle" x="1522.5" y="-2906.0043" font-family="Inconsolata" font-size="14.00" fill="#000000">*** locals</text>
<text text-anchor="middle" x="1522.5" y="-2874.6043" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="1522.5" y="-2859.2042" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2827.8042" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="1522.5" y="-2780.4042" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2765.0042" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2749.6041" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2734.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="1522.5" y="-2718.8041" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="1522.5" y="-2703.404" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="1522.5" y="-2688.004" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="1522.5" y="-2672.604" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="1522.5" y="-2641.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2609.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="1522.5" y="-2578.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2563.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2547.6038" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2516.2038" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2500.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="1522.5" y="-2453.4037" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="1522.5" y="-2406.0037" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_4&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>section_4&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1092.649,-3869.0324C1129.3894,-3804.1237 1257.3412,-3573.0689 1334.5,-3370.2051 1378.398,-3254.7896 1417.1667,-3124.7438 1447.9219,-3010.0612"/>
<polygon fill="#000000" stroke="#000000" points="1451.3905,-3010.6382 1450.5906,-3000.0736 1444.6277,-3008.8311 1451.3905,-3010.6382"/>
</g>
<!-- header_31 -->
<g id="node32" class="node">
<title>header_31</title>
<ellipse fill="none" stroke="#000000" cx="2507.5" cy="-2698.904" rx="91.9296" ry="18"/>
<text text-anchor="middle" x="2507.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Argument parsing</text>
</g>
<!-- section_5&#45;&gt;header_31 -->
<g id="edge31" class="edge">
<title>section_5&#45;&gt;header_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2794.9573,-3868.5051C2764.6078,-3802.7246 2661.0003,-3571.4968 2608.5,-3370.2051 2544.7684,-3125.8515 2516.967,-2820.2671 2509.5962,-2727.1271"/>
<polygon fill="#000000" stroke="#000000" points="2513.0798,-2726.7788 2508.8158,-2717.0799 2506.1008,-2727.3209 2513.0798,-2726.7788"/>
</g>
<!-- block_32 -->
<g id="node33" class="node">
<title>block_32</title>
<ellipse fill="none" stroke="#000000" cx="2673.5" cy="-2698.904" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2673.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 61&#45;65</text>
</g>
<!-- section_5&#45;&gt;block_32 -->
<g id="edge32" class="edge">
<title>section_5&#45;&gt;block_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2801.0075,-3868.5261C2791.9609,-3801.8793 2760.2486,-3565.6071 2738.5,-3370.2051 2710.8067,-3121.3922 2684.0315,-2819.9306 2675.9581,-2727.321"/>
<polygon fill="#000000" stroke="#000000" points="2679.4208,-2726.7392 2675.0674,-2717.0801 2672.4471,-2727.3458 2679.4208,-2726.7392"/>
</g>
<!-- block_33 -->
<g id="node34" class="node">
<title>block_33</title>
<ellipse fill="none" stroke="#000000" cx="2803.5" cy="-2698.904" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2803.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 66&#45;68</text>
</g>
<!-- section_5&#45;&gt;block_33 -->
<g id="edge33" class="edge">
<title>section_5&#45;&gt;block_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2803.5,-3868.6219C2803.5,-3734.0823 2803.5,-2893.8491 2803.5,-2727.502"/>
<polygon fill="#000000" stroke="#000000" points="2807.0001,-2727.1196 2803.5,-2717.1196 2800.0001,-2727.1196 2807.0001,-2727.1196"/>
</g>
<!-- block_34 -->
<g id="node35" class="node">
<title>block_34</title>
<ellipse fill="none" stroke="#000000" cx="3037.5" cy="-2698.904" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="3037.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 69&#45;145</text>
</g>
<!-- section_5&#45;&gt;block_34 -->
<g id="edge34" class="edge">
<title>section_5&#45;&gt;block_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2806.1658,-3868.4103C2815.5172,-3804.4077 2848.1269,-3585.5853 2882.5,-3406.2051 2933.4139,-3140.5052 3008.2634,-2821.6831 3030.8252,-2726.8205"/>
<polygon fill="#000000" stroke="#000000" points="3034.2838,-2727.4053 3033.1965,-2716.8664 3027.4743,-2725.7832 3034.2838,-2727.4053"/>
</g>
<!-- section_35 -->
<g id="node36" class="node">
<title>section_35</title>
<ellipse fill="none" stroke="#000000" cx="3534.5" cy="-2698.904" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3534.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 136&#45;145</text>
</g>
<!-- section_5&#45;&gt;section_35 -->
<g id="edge35" class="edge">
<title>section_5&#45;&gt;section_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2799.927,-3868.7536C2787.082,-3798.0576 2750.6794,-3537.4646 2882.5,-3406.2051 2954.2626,-3334.7479 3022.8711,-3425.8284 3107.5,-3370.2051 3359.9783,-3204.2609 3492.7414,-2831.7965 3526.0411,-2726.8838"/>
<polygon fill="#000000" stroke="#000000" points="3529.4751,-2727.6294 3529.1209,-2717.0405 3522.7944,-2725.5391 3529.4751,-2727.6294"/>
</g>
<!-- section_36 -->
<g id="node37" class="node">
<title>section_36</title>
<ellipse fill="none" stroke="#000000" cx="4482.5" cy="-2698.904" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4482.5" y="-2694.704" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 146&#45;167</text>
</g>
<!-- section_5&#45;&gt;section_36 -->
<g id="edge36" class="edge">
<title>section_5&#45;&gt;section_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2799.6093,-3868.8031C2785.3017,-3797.1775 2743.3612,-3530.3163 2882.5,-3406.2051 2943.6002,-3351.704 3541.7213,-3398.6417 3618.5,-3370.2051 4012.6265,-3224.2319 4370.8789,-2829.1256 4460.8575,-2724.5738"/>
<polygon fill="#000000" stroke="#000000" points="4463.7283,-2726.6023 4467.5728,-2716.7296 4458.4107,-2722.05 4463.7283,-2726.6023"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5081.5,-3370.0062 4575.5,-3370.0062 4575.5,-2027.8018 5081.5,-2027.8018 5081.5,-3370.0062"/>
<text text-anchor="middle" x="4828.5" y="-3355.0051" font-family="Inconsolata" font-size="14.00" fill="#000000">** Argument parsing</text>
<text text-anchor="middle" x="4828.5" y="-3323.6051" font-family="Inconsolata" font-size="14.00" fill="#000000">This is done crudely, we can use =pl.lapp= in future to parse within</text>
<text text-anchor="middle" x="4828.5" y="-3308.205" font-family="Inconsolata" font-size="14.00" fill="#000000">commands to each verb.</text>
<text text-anchor="middle" x="4828.5" y="-3276.805" font-family="Inconsolata" font-size="14.00" fill="#000000">Note here that we pass in the pwd from a shell script. This may </text>
<text text-anchor="middle" x="4828.5" y="-3261.405" font-family="Inconsolata" font-size="14.00" fill="#000000">change, now that we&#39;ve added [[sh][../lib/sh.lua]]]]</text>
<text text-anchor="middle" x="4828.5" y="-3230.0049" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="4828.5" y="-3214.6049" font-family="Inconsolata" font-size="14.00" fill="#000000">local pwd, verb = &quot;&quot;, &quot;&quot;</text>
<text text-anchor="middle" x="4828.5" y="-3183.2049" font-family="Inconsolata" font-size="14.00" fill="#000000">if (arg) then</text>
<text text-anchor="middle" x="4828.5" y="-3167.8048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd = table.remove(arg, 1)</text>
<text text-anchor="middle" x="4828.5" y="-3152.4048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verb = table.remove(arg, 1)</text>
<text text-anchor="middle" x="4828.5" y="-3137.0048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(arg) do</text>
<text text-anchor="middle" x="4828.5" y="-3121.6047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(ansi.yellow(v)..&quot;\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-3106.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4828.5" y="-3090.8047" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4828.5" y="-3043.4047" font-family="Inconsolata" font-size="14.00" fill="#000000">local grym = {}</text>
<text text-anchor="middle" x="4828.5" y="-3012.0046" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.invert = invert</text>
<text text-anchor="middle" x="4828.5" y="-2996.6046" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.knit &#160;&#160;= knit</text>
<text text-anchor="middle" x="4828.5" y="-2981.2046" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.weave &#160;= weave</text>
<text text-anchor="middle" x="4828.5" y="-2949.8045" font-family="Inconsolata" font-size="14.00" fill="#000000">samples = getfiles(&quot;samples&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2918.4045" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
<text text-anchor="middle" x="4828.5" y="-2887.0045" font-family="Inconsolata" font-size="14.00" fill="#000000">if verb == &quot;invert&quot; then</text>
<text text-anchor="middle" x="4828.5" y="-2871.6044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If we allow inversion in its present no&#45;guards state,</text>
<text text-anchor="middle" x="4828.5" y="-2856.2044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; we will lose all commentary</text>
<text text-anchor="middle" x="4828.5" y="-2840.8044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;u.freeze(&quot;no&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2825.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;invert:invert_all(pwd)</text>
<text text-anchor="middle" x="4828.5" y="-2810.0043" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;knit&quot; then</text>
<text text-anchor="middle" x="4828.5" y="-2794.6043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; knitter goes here</text>
<text text-anchor="middle" x="4828.5" y="-2779.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="4828.5" y="-2763.8042" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;weave&quot; then</text>
<text text-anchor="middle" x="4828.5" y="-2748.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; local weaved = weave:weaveMd(Doc(read(&quot;../orb/grym/block.gm&quot;)))</text>
<text text-anchor="middle" x="4828.5" y="-2733.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; io.write(weaved)</text>
<text text-anchor="middle" x="4828.5" y="-2717.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd) </text>
<text text-anchor="middle" x="4828.5" y="-2702.2041" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;spec&quot; then</text>
<text text-anchor="middle" x="4828.5" y="-2686.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is just a shim to get us inside whatever</text>
<text text-anchor="middle" x="4828.5" y="-2671.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; I&#39;m working on</text>
<text text-anchor="middle" x="4828.5" y="-2656.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abstr = &quot;(form (inner form 23))&quot;</text>
<text text-anchor="middle" x="4828.5" y="-2640.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abNode = spec.clu(abstr)</text>
<text text-anchor="middle" x="4828.5" y="-2625.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(abNode.isNode)</text>
<text text-anchor="middle" x="4828.5" y="-2609.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode))</text>
<text text-anchor="middle" x="4828.5" y="-2594.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode:dot()))</text>
<text text-anchor="middle" x="4828.5" y="-2579.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;nodewalker:\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2563.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walkDeep() do</text>
<text text-anchor="middle" x="4828.5" y="-2548.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; &#45;&#45; &quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2532.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4828.5" y="-2517.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2502.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walk() do</text>
<text text-anchor="middle" x="4828.5" y="-2486.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; ~~ &quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2471.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4828.5" y="-2455.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2440.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:select(&quot;bmatch&quot;) do</text>
<text text-anchor="middle" x="4828.5" y="-2425.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; %% &quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2409.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4828.5" y="-2394.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2378.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for tok in abNode:tokens() do</text>
<text text-anchor="middle" x="4828.5" y="-2363.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(tok .. &quot; || &quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2348.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4828.5" y="-2332.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="4828.5" y="-2301.2033" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif not verb then</text>
<text text-anchor="middle" x="4828.5" y="-2285.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; do the things</text>
<text text-anchor="middle" x="4828.5" y="-2270.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd)</text>
<text text-anchor="middle" x="4828.5" y="-2255.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="4828.5" y="-2239.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4828.5" y="-2224.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="4828.5" y="-2192.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">**** Sample Doc for REPLing</text>
<text text-anchor="middle" x="4828.5" y="-2161.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="4828.5" y="-2146.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">sample_doc = Doc(read(&quot;../orb/grym.orb&quot;)) or &quot;&quot;</text>
<text text-anchor="middle" x="4828.5" y="-2114.603" font-family="Inconsolata" font-size="14.00" fill="#000000">dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="4828.5" y="-2067.203" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="4828.5" y="-2035.803" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_5&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>section_5&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2799.5116,-3868.6921C2784.8321,-3796.6436 2741.6679,-3528.3914 2882.5,-3406.2051 2953.1823,-3344.8809 4489.8016,-3423.8148 4566.5,-3370.2051 4566.6843,-3370.0763 4566.8684,-3369.9474 4567.0524,-3369.8183"/>
<polygon fill="#000000" stroke="#000000" points="4569.182,-3372.5977 4575.2451,-3363.9092 4565.0871,-3366.9204 4569.182,-3372.5977"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="359,-1757.8041 0,-1757.8041 0,-1702.0011 359,-1702.0011 359,-1757.8041"/>
<text text-anchor="middle" x="179.5" y="-1726.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">Like any main entry =grym.lua= is mostly imports.</text>
</g>
<!-- block_8&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>block_8&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M775.9469,-2680.8848C800.9513,-2594.1177 895.8069,-2215.8488 710.5,-2027.6029 656.8898,-1973.1424 434.6241,-2029.9123 368.5,-1991.6029 278.6951,-1939.574 219.9148,-1825.8707 194.2683,-1766.9507"/>
<polygon fill="#000000" stroke="#000000" points="197.4387,-1765.4627 190.2935,-1757.6399 191.0008,-1768.2111 197.4387,-1765.4627"/>
</g>
<!-- header_12 -->
<g id="node13" class="node">
<title>header_12</title>
<ellipse fill="none" stroke="#000000" cx="422.5" cy="-1729.9026" rx="45.0114" ry="18"/>
<text text-anchor="middle" x="422.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : locals</text>
</g>
<!-- section_9&#45;&gt;header_12 -->
<g id="edge12" class="edge">
<title>section_9&#45;&gt;header_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M910.486,-2680.802C933.2815,-2593.6502 1018.6238,-2213.8706 830.5,-2027.6029 774.3109,-1971.9682 535.194,-2044.5884 476.5,-1991.6029 409.8131,-1931.4019 413.1185,-1812.5222 418.6832,-1758.1925"/>
<polygon fill="#000000" stroke="#000000" points="422.1986,-1758.2528 419.8433,-1747.9231 415.2428,-1757.4669 422.1986,-1758.2528"/>
</g>
<!-- block_13 -->
<g id="node14" class="node">
<title>block_13</title>
<ellipse fill="none" stroke="#000000" cx="540.5" cy="-1729.9026" rx="55.3502" ry="18"/>
<text text-anchor="middle" x="540.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 10&#45;11</text>
</g>
<!-- section_9&#45;&gt;block_13 -->
<g id="edge13" class="edge">
<title>section_9&#45;&gt;block_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M910.3345,-2680.7347C932.1974,-2594.0589 1013.0736,-2218.9088 830.5,-2027.6029 760.2785,-1954.0229 679.3038,-2060.5194 604.5,-1991.6029 538.0435,-1930.3768 535.442,-1812.5218 538.1659,-1758.376"/>
<polygon fill="#000000" stroke="#000000" points="541.6753,-1758.3247 538.7856,-1748.1316 534.6881,-1757.902 541.6753,-1758.3247"/>
</g>
<!-- block_14 -->
<g id="node15" class="node">
<title>block_14</title>
<ellipse fill="none" stroke="#000000" cx="669.5" cy="-1729.9026" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="669.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 12&#45;41</text>
</g>
<!-- section_9&#45;&gt;block_14 -->
<g id="edge14" class="edge">
<title>section_9&#45;&gt;block_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M909.5988,-2680.9148C927.6988,-2596.5856 992.6185,-2235.7829 830.5,-2027.6029 802.5023,-1991.6505 764.811,-2025.6277 734.5,-1991.6029 674.7565,-1924.5395 668.0531,-1811.0126 668.4449,-1758.3299"/>
<polygon fill="#000000" stroke="#000000" points="671.9491,-1758.1081 668.6196,-1748.0501 664.9501,-1757.9891 671.9491,-1758.1081"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="1067.5,-1991.8034 743.5,-1991.8034 743.5,-1468.0018 1067.5,-1468.0018 1067.5,-1991.8034"/>
<text text-anchor="middle" x="905.5" y="-1976.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">*** locals</text>
<text text-anchor="middle" x="905.5" y="-1945.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="905.5" y="-1929.6029" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="905.5" y="-1898.2028" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="905.5" y="-1850.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="905.5" y="-1835.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="905.5" y="-1820.0027" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="905.5" y="-1804.6027" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="905.5" y="-1789.2027" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="905.5" y="-1773.8027" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="905.5" y="-1758.4026" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="905.5" y="-1743.0026" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="905.5" y="-1711.6026" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="905.5" y="-1680.2025" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="905.5" y="-1648.8025" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="905.5" y="-1633.4025" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="905.5" y="-1618.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
<text text-anchor="middle" x="905.5" y="-1586.6024" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="905.5" y="-1571.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="905.5" y="-1523.8023" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="905.5" y="-1476.4023" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_9&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>section_9&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M905.5,-2680.8374C905.5,-2598.5759 905.5,-2252.6442 905.5,-2001.6985"/>
<polygon fill="#000000" stroke="#000000" points="909.0001,-2001.6924 905.5,-1991.6925 902.0001,-2001.6925 909.0001,-2001.6924"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="1135.5" cy="-1729.9026" rx="50.3413" ry="18"/>
<text text-anchor="middle" x="1135.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : globals</text>
</g>
<!-- section_10&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_10&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1257.1881,-2680.8374C1242.1143,-2563.0432 1157.8554,-1904.5996 1139.1703,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="1142.5869,-1757.7088 1137.8458,-1748.234 1135.6435,-1758.5974 1142.5869,-1757.7088"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="1259.5" cy="-1729.9026" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1259.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 42&#45;45</text>
</g>
<!-- section_10&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_10&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1259.5,-2680.8374C1259.5,-2563.0432 1259.5,-1904.5996 1259.5,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="1263.0001,-1758.234 1259.5,-1748.234 1256.0001,-1758.234 1263.0001,-1758.234"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="1389.5" cy="-1729.9026" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1389.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 46&#45;47</text>
</g>
<!-- section_10&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_10&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1260.9954,-2680.6822C1267.5409,-2602.2406 1295.0653,-2285.6403 1333.5,-2027.6029 1348.3595,-1927.8416 1372.3846,-1810.4711 1383.5023,-1757.8672"/>
<polygon fill="#000000" stroke="#000000" points="1386.9558,-1758.453 1385.6091,-1747.9442 1380.1085,-1756.9992 1386.9558,-1758.453"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="1519.5" cy="-1729.9026" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1519.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 48&#45;60</text>
</g>
<!-- section_10&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_10&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1255.0543,-2680.6652C1235.3863,-2595.2114 1164.414,-2230.1085 1333.5,-2027.6029 1369.4607,-1984.5346 1415.7435,-2032.1736 1454.5,-1991.6029 1516.8214,-1926.3642 1522.1471,-1811.0353 1520.9723,-1758.0078"/>
<polygon fill="#000000" stroke="#000000" points="1524.4693,-1757.8556 1520.6534,-1747.9719 1517.4728,-1758.078 1524.4693,-1757.8556"/>
</g>
<!-- leaf_29 -->
<g id="node30" class="node">
<title>leaf_29</title>
<polygon fill="none" stroke="#c0c0c0" points="1945.5,-1889.5033 1593.5,-1889.5033 1593.5,-1570.3019 1945.5,-1570.3019 1945.5,-1889.5033"/>
<text text-anchor="middle" x="1769.5" y="-1874.5028" font-family="Inconsolata" font-size="14.00" fill="#000000">*** globals</text>
<text text-anchor="middle" x="1769.5" y="-1843.1028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;For interactive and introspective development.</text>
<text text-anchor="middle" x="1769.5" y="-1811.7028" font-family="Inconsolata" font-size="14.00" fill="#000000">Can&#39;t wait to build a reasonable REPL.</text>
<text text-anchor="middle" x="1769.5" y="-1780.3027" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="1769.5" y="-1764.9027" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1749.5027" font-family="Inconsolata" font-size="14.00" fill="#000000">u = require &quot;util&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1734.1026" font-family="Inconsolata" font-size="14.00" fill="#000000">s = require &quot;status&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1718.7026" font-family="Inconsolata" font-size="14.00" fill="#000000">m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1703.3026" font-family="Inconsolata" font-size="14.00" fill="#000000">Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1671.9025" font-family="Inconsolata" font-size="14.00" fill="#000000">Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1640.5025" font-family="Inconsolata" font-size="14.00" fill="#000000">spec = require &quot;node/spec&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1625.1025" font-family="Inconsolata" font-size="14.00" fill="#000000">pnf = require &quot;node/define&quot;</text>
<text text-anchor="middle" x="1769.5" y="-1609.7024" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="1769.5" y="-1578.3024" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_10&#45;&gt;leaf_29 -->
<g id="edge29" class="edge">
<title>section_10&#45;&gt;leaf_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1254.5706,-2680.6786C1232.2668,-2593.745 1149.6181,-2217.5915 1333.5,-2027.6029 1411.8768,-1946.6232 1488.3611,-2050.4073 1584.5,-1991.6029 1622.4498,-1968.3905 1654.7402,-1934.1506 1681.2044,-1898.0356"/>
<polygon fill="#000000" stroke="#000000" points="1684.1189,-1899.9774 1687.1089,-1889.8132 1678.433,-1895.8944 1684.1189,-1899.9774"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="567.5,-951.0014 513.5,-951.0014 513.5,-915.0014 567.5,-915.0014 567.5,-951.0014"/>
</g>
<!-- block_13&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>block_13&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M540.5,-1711.7609C540.5,-1607.8696 540.5,-1088.5793 540.5,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="544.0001,-961.1147 540.5,-951.1148 537.0001,-961.1148 544.0001,-961.1147"/>
</g>
<!-- codeblock_16 -->
<g id="node17" class="node">
<title>codeblock_16</title>
<ellipse fill="none" stroke="#000000" cx="666.5" cy="-933.0014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="666.5" y="-928.8014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 12&#45;39</text>
</g>
<!-- block_14&#45;&gt;codeblock_16 -->
<g id="edge16" class="edge">
<title>block_14&#45;&gt;codeblock_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M669.4317,-1711.7609C669.0406,-1607.8696 667.0857,-1088.5793 666.6063,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="670.1059,-961.1015 666.5682,-951.1148 663.106,-961.1279 670.1059,-961.1015"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="815.5,-951.0014 761.5,-951.0014 761.5,-915.0014 815.5,-915.0014 815.5,-951.0014"/>
</g>
<!-- block_14&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>block_14&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M672.5859,-1711.7245C680.217,-1668.5693 701.7587,-1556.9188 734.5,-1468.2023 740.6935,-1451.4201 747.7662,-1449.4531 752.5,-1432.2023 800.1679,-1258.4929 794.2414,-1038.7667 790.262,-961.4609"/>
<polygon fill="#000000" stroke="#000000" points="793.7369,-960.9048 789.6957,-951.111 786.7474,-961.2873 793.7369,-960.9048"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="828.5,-397.7008 504.5,-397.7008 504.5,-.0997 828.5,-.0997 828.5,-397.7008"/>
<text text-anchor="middle" x="666.5" y="-382.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">require &quot;pl.strict&quot;</text>
<text text-anchor="middle" x="666.5" y="-351.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local verbose = false</text>
<text text-anchor="middle" x="666.5" y="-303.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file &#160;= require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="666.5" y="-288.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir &#160;&#160;= require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="666.5" y="-273.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path &#160;= require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="666.5" y="-257.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="666.5" y="-242.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="666.5" y="-226.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="666.5" y="-211.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="666.5" y="-196.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="666.5" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local ansi = require &quot;ansi&quot;</text>
<text text-anchor="middle" x="666.5" y="-133.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">local P_grym = require &quot;grym/grymmyr&quot; </text>
<text text-anchor="middle" x="666.5" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local invert = require &quot;invert&quot;</text>
<text text-anchor="middle" x="666.5" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">local knit &#160;&#160;= require &quot;knit&quot;</text>
<text text-anchor="middle" x="666.5" y="-71.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local weave &#160;= require &quot;weave&quot;</text>
<text text-anchor="middle" x="666.5" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">local ast &#160;= require &quot;peg/ast&quot;</text>
<text text-anchor="middle" x="666.5" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
</g>
<!-- codeblock_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>codeblock_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M666.5,-914.855C666.5,-845.749 666.5,-593.5803 666.5,-407.9904"/>
<polygon fill="#000000" stroke="#000000" points="670.0001,-407.8157 666.5,-397.8157 663.0001,-407.8157 670.0001,-407.8157"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1207.5,-952.9035 855.5,-952.9035 855.5,-913.0993 1207.5,-913.0993 1207.5,-952.9035"/>
<text text-anchor="middle" x="1031.5" y="-921.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;For interactive and introspective development.</text>
</g>
<!-- block_21&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>block_21&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1255.3319,-1711.7329C1245.4656,-1669.0507 1219.6194,-1559.1276 1194.5,-1468.2023 1140.9087,-1274.217 1067.2907,-1043.6469 1041.1698,-962.7869"/>
<polygon fill="#000000" stroke="#000000" points="1044.3529,-961.255 1037.9449,-952.8178 1037.6928,-963.4096 1044.3529,-961.255"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1507.5,-951.0014 1225.5,-951.0014 1225.5,-915.0014 1507.5,-915.0014 1507.5,-951.0014"/>
<text text-anchor="middle" x="1366.5" y="-929.5014" font-family="Inconsolata" font-size="14.00" fill="#000000">Can&#39;t wait to build a reasonable REPL.</text>
</g>
<!-- block_22&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>block_22&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1388.9764,-1711.7609C1385.9779,-1607.8696 1370.9903,-1088.5793 1367.3148,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="1370.8099,-961.0096 1367.0228,-951.1148 1363.8128,-961.2116 1370.8099,-961.0096"/>
</g>
<!-- codeblock_26 -->
<g id="node27" class="node">
<title>codeblock_26</title>
<ellipse fill="none" stroke="#000000" cx="1602.5" cy="-933.0014" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1602.5" y="-928.8014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 48&#45;59</text>
</g>
<!-- block_23&#45;&gt;codeblock_26 -->
<g id="edge26" class="edge">
<title>block_23&#45;&gt;codeblock_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1521.3895,-1711.7609C1532.2102,-1607.8696 1586.296,-1088.5793 1599.5598,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="1603.0586,-961.4236 1600.6134,-951.1148 1596.0962,-960.6983 1603.0586,-961.4236"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1751.5,-951.0014 1697.5,-951.0014 1697.5,-915.0014 1751.5,-915.0014 1751.5,-951.0014"/>
</g>
<!-- block_23&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>block_23&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1518.5132,-1711.6591C1517.0082,-1664.8535 1519.5953,-1539.2133 1584.5,-1468.2023 1617.4996,-1432.098 1658.713,-1470.9995 1688.5,-1432.2023 1799.7716,-1287.2722 1752.5326,-1043.6145 1732.1117,-961.2103"/>
<polygon fill="#000000" stroke="#000000" points="1735.4545,-960.1537 1729.5966,-951.3256 1728.6707,-961.8799 1735.4545,-960.1537"/>
</g>
<!-- leaf_27 -->
<g id="node28" class="node">
<title>leaf_27</title>
<polygon fill="none" stroke="#c0c0c0" points="1708.5,-280.6006 1496.5,-280.6006 1496.5,-117.1999 1708.5,-117.1999 1708.5,-280.6006"/>
<text text-anchor="middle" x="1602.5" y="-265.3004" font-family="Inconsolata" font-size="14.00" fill="#000000">L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1602.5" y="-249.9004" font-family="Inconsolata" font-size="14.00" fill="#000000">u = require &quot;util&quot;</text>
<text text-anchor="middle" x="1602.5" y="-234.5003" font-family="Inconsolata" font-size="14.00" fill="#000000">s = require &quot;status&quot;</text>
<text text-anchor="middle" x="1602.5" y="-219.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1602.5" y="-203.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">Doc = require &quot;grym/doc&quot;</text>
<text text-anchor="middle" x="1602.5" y="-172.3002" font-family="Inconsolata" font-size="14.00" fill="#000000">Link = require &quot;grym/link&quot;</text>
<text text-anchor="middle" x="1602.5" y="-140.9002" font-family="Inconsolata" font-size="14.00" fill="#000000">spec = require &quot;node/spec&quot;</text>
<text text-anchor="middle" x="1602.5" y="-125.5002" font-family="Inconsolata" font-size="14.00" fill="#000000">pnf = require &quot;node/define&quot;</text>
</g>
<!-- codeblock_26&#45;&gt;leaf_27 -->
<g id="edge27" class="edge">
<title>codeblock_26&#45;&gt;leaf_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1602.5,-914.855C1602.5,-829.3997 1602.5,-464.0158 1602.5,-290.7531"/>
<polygon fill="#000000" stroke="#000000" points="1606.0001,-290.6312 1602.5,-280.6312 1599.0001,-290.6313 1606.0001,-290.6312"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="2455.5,-1757.203 1963.5,-1757.203 1963.5,-1702.6022 2455.5,-1702.6022 2455.5,-1757.203"/>
<text text-anchor="middle" x="2209.5" y="-1726.1026" font-family="Inconsolata" font-size="14.00" fill="#000000">This is done crudely, we can use =pl.lapp= in future to parse within</text>
<text text-anchor="middle" x="2209.5" y="-1710.7026" font-family="Inconsolata" font-size="14.00" fill="#000000">commands to each verb.</text>
</g>
<!-- block_32&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>block_32&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2678.3633,-2680.8228C2700.1796,-2595.3221 2780.6529,-2227.4163 2608.5,-2027.6029 2565.4401,-1977.6245 2521.6949,-2024.4776 2464.5,-1991.6029 2362.7512,-1933.1194 2274.8902,-1822.4916 2233.9826,-1765.6284"/>
<polygon fill="#000000" stroke="#000000" points="2236.7105,-1763.4253 2228.0583,-1757.3106 2231.0089,-1767.4863 2236.7105,-1763.4253"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="2937.5,-1749.2032 2473.5,-1749.2032 2473.5,-1710.602 2937.5,-1710.602 2937.5,-1749.2032"/>
<text text-anchor="middle" x="2705.5" y="-1734.1026" font-family="Inconsolata" font-size="14.00" fill="#000000">Note here that we pass in the pwd from a shell script. This may </text>
<text text-anchor="middle" x="2705.5" y="-1718.7026" font-family="Inconsolata" font-size="14.00" fill="#000000">change, now that we&#39;ve added [[sh][../lib/sh.lua]]]]</text>
</g>
<!-- block_33&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>block_33&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2801.8344,-2680.7385C2794.6433,-2602.5274 2765.4066,-2286.7359 2738.5,-2027.6029 2728.3005,-1929.3735 2715.0725,-1813.0479 2708.9227,-1759.5369"/>
<polygon fill="#000000" stroke="#000000" points="2712.3763,-1758.9323 2707.7558,-1749.3981 2705.4223,-1759.7327 2712.3763,-1758.9323"/>
</g>
<!-- codeblock_39 -->
<g id="node40" class="node">
<title>codeblock_39</title>
<ellipse fill="none" stroke="#000000" cx="3037.5" cy="-1729.9026" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="3037.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 69&#45;134</text>
</g>
<!-- block_34&#45;&gt;codeblock_39 -->
<g id="edge39" class="edge">
<title>block_34&#45;&gt;codeblock_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3037.5,-2680.8374C3037.5,-2563.0432 3037.5,-1904.5996 3037.5,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="3041.0001,-1758.234 3037.5,-1748.234 3034.0001,-1758.234 3041.0001,-1758.234"/>
</g>
<!-- leaf_41 -->
<g id="node42" class="node">
<title>leaf_41</title>
<polygon fill="none" stroke="#c0c0c0" points="3191.5,-1747.9026 3137.5,-1747.9026 3137.5,-1711.9026 3191.5,-1711.9026 3191.5,-1747.9026"/>
</g>
<!-- block_34&#45;&gt;leaf_41 -->
<g id="edge41" class="edge">
<title>block_34&#45;&gt;leaf_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3039.8679,-2680.8374C3055.3063,-2563.0432 3141.6037,-1904.5996 3160.7409,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="3164.2682,-1758.6041 3162.0974,-1748.234 3157.3275,-1757.6944 3164.2682,-1758.6041"/>
</g>
<!-- header_42 -->
<g id="node43" class="node">
<title>header_42</title>
<ellipse fill="none" stroke="#000000" cx="3330.5" cy="-1729.9026" rx="120.9043" ry="18"/>
<text text-anchor="middle" x="3330.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Sample Doc for REPLing</text>
</g>
<!-- section_35&#45;&gt;header_42 -->
<g id="edge42" class="edge">
<title>section_35&#45;&gt;header_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3530.6965,-2680.8374C3505.8729,-2562.9251 3367.0004,-1903.2796 3336.4461,-1758.1467"/>
<polygon fill="#000000" stroke="#000000" points="3339.8443,-1757.2984 3334.3592,-1748.234 3332.9945,-1758.7406 3339.8443,-1757.2984"/>
</g>
<!-- block_43 -->
<g id="node44" class="node">
<title>block_43</title>
<ellipse fill="none" stroke="#000000" cx="3534.5" cy="-1729.9026" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3534.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 136&#45;137</text>
</g>
<!-- section_35&#45;&gt;block_43 -->
<g id="edge43" class="edge">
<title>section_35&#45;&gt;block_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3534.5,-2680.8374C3534.5,-2563.0432 3534.5,-1904.5996 3534.5,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="3538.0001,-1758.234 3534.5,-1748.234 3531.0001,-1758.234 3538.0001,-1758.234"/>
</g>
<!-- block_44 -->
<g id="node45" class="node">
<title>block_44</title>
<ellipse fill="none" stroke="#000000" cx="3683.5" cy="-1729.9026" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="3683.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 138&#45;145</text>
</g>
<!-- section_35&#45;&gt;block_44 -->
<g id="edge44" class="edge">
<title>section_35&#45;&gt;block_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3537.278,-2680.8374C3555.409,-2562.9251 3656.8404,-1903.2796 3679.157,-1758.1467"/>
<polygon fill="#000000" stroke="#000000" points="3682.6207,-1758.6498 3680.6812,-1748.234 3675.702,-1757.5859 3682.6207,-1758.6498"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4182,-1820.3032 3767,-1820.3032 3767,-1639.502 4182,-1639.502 4182,-1820.3032"/>
<text text-anchor="middle" x="3974.5" y="-1804.9027" font-family="Inconsolata" font-size="14.00" fill="#000000">**** Sample Doc for REPLing</text>
<text text-anchor="middle" x="3974.5" y="-1773.5027" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="3974.5" y="-1758.1026" font-family="Inconsolata" font-size="14.00" fill="#000000">sample_doc = Doc(read(&quot;../orb/grym.orb&quot;)) or &quot;&quot;</text>
<text text-anchor="middle" x="3974.5" y="-1726.7026" font-family="Inconsolata" font-size="14.00" fill="#000000">dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
<text text-anchor="middle" x="3974.5" y="-1679.3026" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
<text text-anchor="middle" x="3974.5" y="-1647.9025" font-family="Inconsolata" font-size="14.00" fill="#000000">*</text>
</g>
<!-- section_35&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>section_35&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3542.7036,-2680.8374C3589.9067,-2576.8831 3828.3069,-2051.8603 3929.246,-1829.5644"/>
<polygon fill="#000000" stroke="#000000" points="3932.5618,-1830.7275 3933.5095,-1820.1751 3926.1881,-1827.8333 3932.5618,-1830.7275"/>
</g>
<!-- header_50 -->
<g id="node51" class="node">
<title>header_50</title>
<ellipse fill="none" stroke="#000000" cx="4360.5" cy="-1729.9026" rx="160.5556" ry="18"/>
<text text-anchor="middle" x="4360.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Run the samples and make dotfiles</text>
</g>
<!-- section_36&#45;&gt;header_50 -->
<g id="edge50" class="edge">
<title>section_36&#45;&gt;header_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4480.2254,-2680.8374C4465.3947,-2563.0432 4382.4948,-1904.5996 4364.1111,-1758.5841"/>
<polygon fill="#000000" stroke="#000000" points="4367.5298,-1757.7184 4362.808,-1748.234 4360.5846,-1758.5929 4367.5298,-1757.7184"/>
</g>
<!-- block_51 -->
<g id="node52" class="node">
<title>block_51</title>
<ellipse fill="none" stroke="#000000" cx="4604.5" cy="-1729.9026" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4604.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 146&#45;147</text>
</g>
<!-- section_36&#45;&gt;block_51 -->
<g id="edge51" class="edge">
<title>section_36&#45;&gt;block_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4484.7554,-2680.7457C4494.4697,-2602.564 4533.7311,-2286.8759 4566.5,-2027.6029 4579.0299,-1928.4639 4594.1134,-1810.7833 4600.8919,-1757.9847"/>
<polygon fill="#000000" stroke="#000000" points="4604.3688,-1758.3877 4602.1711,-1748.0234 4597.4258,-1757.4961 4604.3688,-1758.3877"/>
</g>
<!-- block_52 -->
<g id="node53" class="node">
<title>block_52</title>
<ellipse fill="none" stroke="#000000" cx="4753.5" cy="-1729.9026" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4753.5" y="-1725.7026" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 148&#45;167</text>
</g>
<!-- section_36&#45;&gt;block_52 -->
<g id="edge52" class="edge">
<title>section_36&#45;&gt;block_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4478.4661,-2680.6975C4460.7024,-2595.3893 4397.5828,-2230.8433 4566.5,-2027.6029 4600.1907,-1987.0664 4642.846,-2029.4811 4679.5,-1991.6029 4742.7779,-1926.2117 4752.7206,-1810.9599 4753.7698,-1757.9798"/>
<polygon fill="#000000" stroke="#000000" points="4757.2698,-1757.9893 4753.8745,-1747.9532 4750.2702,-1757.9161 4757.2698,-1757.9893"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="5273.5,-1895.9032 4837.5,-1895.9032 4837.5,-1563.902 5273.5,-1563.902 5273.5,-1895.9032"/>
<text text-anchor="middle" x="5055.5" y="-1880.7029" font-family="Inconsolata" font-size="14.00" fill="#000000">*** Run the samples and make dotfiles</text>
<text text-anchor="middle" x="5055.5" y="-1849.3029" font-family="Inconsolata" font-size="14.00" fill="#000000">#!lua</text>
<text text-anchor="middle" x="5055.5" y="-1833.9029" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="5055.5" y="-1818.5028" font-family="Inconsolata" font-size="14.00" fill="#000000">for _,v in ipairs(samples) do</text>
<text text-anchor="middle" x="5055.5" y="-1803.1028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if v:match(&quot;~&quot;) == nil then</text>
<text text-anchor="middle" x="5055.5" y="-1787.7028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if verbose then io.write(v) end</text>
<text text-anchor="middle" x="5055.5" y="-1772.3027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local sample = read(v)</text>
<text text-anchor="middle" x="5055.5" y="-1756.9027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45;io.write(v..&quot;\n&quot;)</text>
<text text-anchor="middle" x="5055.5" y="-1741.5027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(sample)</text>
<text text-anchor="middle" x="5055.5" y="-1726.1026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot = doc:dot()</text>
<text text-anchor="middle" x="5055.5" y="-1710.7026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local old_dot = read(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;)</text>
<text text-anchor="middle" x="5055.5" y="-1695.3026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if old_dot and old_dot ~= doc_dot then</text>
<text text-anchor="middle" x="5055.5" y="-1679.9025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot; &#160;&#160;&#45;&#45; changed dotfile: &quot; .. v)</text>
<text text-anchor="middle" x="5055.5" y="-1664.5025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;&#45;old.dot&quot;, old_dot)</text>
<text text-anchor="middle" x="5055.5" y="-1649.1025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5055.5" y="-1633.7024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;, doc:dot())</text>
<text text-anchor="middle" x="5055.5" y="-1618.3024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5055.5" y="-1602.9024" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="5055.5" y="-1587.5024" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
<text text-anchor="middle" x="5055.5" y="-1572.1023" font-family="Inconsolata" font-size="14.00" fill="#000000">#/lua</text>
</g>
<!-- section_36&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>section_36&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4477.9353,-2680.9005C4457.1373,-2594.2059 4380.1432,-2216.2221 4566.5,-2027.6029 4649.1094,-1943.9907 4725.149,-2047.584 4828.5,-1991.6029 4868.6936,-1969.8317 4905.0292,-1937.9214 4936.255,-1903.8112"/>
<polygon fill="#000000" stroke="#000000" points="4939.1632,-1905.8118 4943.2516,-1896.0375 4933.9602,-1901.1289 4939.1632,-1905.8118"/>
</g>
<!-- leaf_40 -->
<g id="node41" class="node">
<title>leaf_40</title>
<polygon fill="none" stroke="#c0c0c0" points="3290.5,-1432.4032 2784.5,-1432.4032 2784.5,-433.5996 3290.5,-433.5996 3290.5,-1432.4032"/>
<text text-anchor="middle" x="3037.5" y="-1417.0023" font-family="Inconsolata" font-size="14.00" fill="#000000">local pwd, verb = &quot;&quot;, &quot;&quot;</text>
<text text-anchor="middle" x="3037.5" y="-1385.6022" font-family="Inconsolata" font-size="14.00" fill="#000000">if (arg) then</text>
<text text-anchor="middle" x="3037.5" y="-1370.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;pwd = table.remove(arg, 1)</text>
<text text-anchor="middle" x="3037.5" y="-1354.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;verb = table.remove(arg, 1)</text>
<text text-anchor="middle" x="3037.5" y="-1339.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(arg) do</text>
<text text-anchor="middle" x="3037.5" y="-1324.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(ansi.yellow(v)..&quot;\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-1308.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3037.5" y="-1293.2021" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="3037.5" y="-1245.802" font-family="Inconsolata" font-size="14.00" fill="#000000">local grym = {}</text>
<text text-anchor="middle" x="3037.5" y="-1214.402" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.invert = invert</text>
<text text-anchor="middle" x="3037.5" y="-1199.002" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.knit &#160;&#160;= knit</text>
<text text-anchor="middle" x="3037.5" y="-1183.6019" font-family="Inconsolata" font-size="14.00" fill="#000000">grym.weave &#160;= weave</text>
<text text-anchor="middle" x="3037.5" y="-1152.2019" font-family="Inconsolata" font-size="14.00" fill="#000000">samples = getfiles(&quot;samples&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-1120.8019" font-family="Inconsolata" font-size="14.00" fill="#000000">local own = require &quot;grym/own&quot;</text>
<text text-anchor="middle" x="3037.5" y="-1089.4018" font-family="Inconsolata" font-size="14.00" fill="#000000">if verb == &quot;invert&quot; then</text>
<text text-anchor="middle" x="3037.5" y="-1074.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; If we allow inversion in its present no&#45;guards state,</text>
<text text-anchor="middle" x="3037.5" y="-1058.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; we will lose all commentary</text>
<text text-anchor="middle" x="3037.5" y="-1043.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;u.freeze(&quot;no&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-1027.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;invert:invert_all(pwd)</text>
<text text-anchor="middle" x="3037.5" y="-1012.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;knit&quot; then</text>
<text text-anchor="middle" x="3037.5" y="-997.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; knitter goes here</text>
<text text-anchor="middle" x="3037.5" y="-981.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="3037.5" y="-966.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;weave&quot; then</text>
<text text-anchor="middle" x="3037.5" y="-950.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; local weaved = weave:weaveMd(Doc(read(&quot;../orb/grym/block.gm&quot;)))</text>
<text text-anchor="middle" x="3037.5" y="-935.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; io.write(weaved)</text>
<text text-anchor="middle" x="3037.5" y="-920.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd) </text>
<text text-anchor="middle" x="3037.5" y="-904.6015" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif verb == &quot;spec&quot; then</text>
<text text-anchor="middle" x="3037.5" y="-889.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; This is just a shim to get us inside whatever</text>
<text text-anchor="middle" x="3037.5" y="-873.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; I&#39;m working on</text>
<text text-anchor="middle" x="3037.5" y="-858.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abstr = &quot;(form (inner form 23))&quot;</text>
<text text-anchor="middle" x="3037.5" y="-843.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local abNode = spec.clu(abstr)</text>
<text text-anchor="middle" x="3037.5" y="-827.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(abNode.isNode)</text>
<text text-anchor="middle" x="3037.5" y="-812.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode))</text>
<text text-anchor="middle" x="3037.5" y="-796.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(tostring(abNode:dot()))</text>
<text text-anchor="middle" x="3037.5" y="-781.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;nodewalker:\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-766.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walkDeep() do</text>
<text text-anchor="middle" x="3037.5" y="-750.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; &#45;&#45; &quot;)</text>
<text text-anchor="middle" x="3037.5" y="-735.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3037.5" y="-719.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-704.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:walk() do</text>
<text text-anchor="middle" x="3037.5" y="-689.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; ~~ &quot;)</text>
<text text-anchor="middle" x="3037.5" y="-673.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3037.5" y="-658.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-642.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for node in abNode:select(&quot;bmatch&quot;) do</text>
<text text-anchor="middle" x="3037.5" y="-627.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(node.id .. &quot; %% &quot;)</text>
<text text-anchor="middle" x="3037.5" y="-612.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3037.5" y="-596.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-581.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for tok in abNode:tokens() do</text>
<text text-anchor="middle" x="3037.5" y="-565.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(tok .. &quot; || &quot;)</text>
<text text-anchor="middle" x="3037.5" y="-550.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3037.5" y="-535.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;io.write(&quot;\n&quot;)</text>
<text text-anchor="middle" x="3037.5" y="-503.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">elseif not verb then</text>
<text text-anchor="middle" x="3037.5" y="-488.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; do the things</text>
<text text-anchor="middle" x="3037.5" y="-472.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;weave:weave_all(pwd)</text>
<text text-anchor="middle" x="3037.5" y="-457.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;knit:knit_all(pwd)</text>
<text text-anchor="middle" x="3037.5" y="-442.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_39&#45;&gt;leaf_40 -->
<g id="edge40" class="edge">
<title>codeblock_39&#45;&gt;leaf_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3037.5,-1711.7609C3037.5,-1670.5795 3037.5,-1564.1288 3037.5,-1442.6919"/>
<polygon fill="#000000" stroke="#000000" points="3041.0001,-1442.4157 3037.5,-1432.4158 3034.0001,-1442.4158 3041.0001,-1442.4157"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3561.5,-951.0014 3507.5,-951.0014 3507.5,-915.0014 3561.5,-915.0014 3561.5,-951.0014"/>
</g>
<!-- block_43&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>block_43&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3534.5,-1711.7609C3534.5,-1607.8696 3534.5,-1088.5793 3534.5,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="3538.0001,-961.1147 3534.5,-951.1148 3531.0001,-961.1148 3538.0001,-961.1147"/>
</g>
<!-- codeblock_46 -->
<g id="node47" class="node">
<title>codeblock_46</title>
<ellipse fill="none" stroke="#000000" cx="3674.5" cy="-933.0014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3674.5" y="-928.8014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 138&#45;144</text>
</g>
<!-- block_44&#45;&gt;codeblock_46 -->
<g id="edge46" class="edge">
<title>block_44&#45;&gt;codeblock_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3683.2951,-1711.7609C3682.1218,-1607.8696 3676.2571,-1088.5793 3674.8188,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="3678.3174,-961.0746 3674.7046,-951.1148 3671.3178,-961.1537 3678.3174,-961.0746"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="3833.5,-951.0014 3779.5,-951.0014 3779.5,-915.0014 3833.5,-915.0014 3833.5,-951.0014"/>
</g>
<!-- block_44&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>block_44&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3688.1744,-1711.6851C3699.2558,-1668.901 3728.3813,-1558.776 3757.5,-1468.2023 3762.7065,-1452.0074 3766.9661,-1448.8424 3770.5,-1432.2023 3807.8345,-1256.4061 3808.3408,-1038.8216 3807.1579,-961.7212"/>
<polygon fill="#000000" stroke="#000000" points="3810.6515,-961.3233 3806.9753,-951.3867 3803.6526,-961.447 3810.6515,-961.3233"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3882,-234.2006 3467,-234.2006 3467,-163.5999 3882,-163.5999 3882,-234.2006"/>
<text text-anchor="middle" x="3674.5" y="-219.1003" font-family="Inconsolata" font-size="14.00" fill="#000000">sample_doc = Doc(read(&quot;../orb/grym.orb&quot;)) or &quot;&quot;</text>
<text text-anchor="middle" x="3674.5" y="-187.7003" font-family="Inconsolata" font-size="14.00" fill="#000000">dot_sh = (require &quot;sh&quot;):clear_G().command(&#39;dot&#39;, &#39;&#45;Tsvg&#39;)</text>
</g>
<!-- codeblock_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>codeblock_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3674.5,-914.855C3674.5,-820.7245 3674.5,-386.9458 3674.5,-244.4196"/>
<polygon fill="#000000" stroke="#000000" points="3678.0001,-244.2765 3674.5,-234.2765 3671.0001,-244.2766 3678.0001,-244.2765"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="4631.5,-951.0014 4577.5,-951.0014 4577.5,-915.0014 4631.5,-915.0014 4631.5,-951.0014"/>
</g>
<!-- block_51&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>block_51&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4604.5,-1711.7609C4604.5,-1607.8696 4604.5,-1088.5793 4604.5,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="4608.0001,-961.1147 4604.5,-951.1148 4601.0001,-961.1148 4608.0001,-961.1147"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="4744.5" cy="-933.0014" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4744.5" y="-928.8014" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 148&#45;166</text>
</g>
<!-- block_52&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>block_52&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4753.2951,-1711.7609C4752.1218,-1607.8696 4746.2571,-1088.5793 4744.8188,-961.2309"/>
<polygon fill="#000000" stroke="#000000" points="4748.3174,-961.0746 4744.7046,-951.1148 4741.3178,-961.1537 4748.3174,-961.0746"/>
</g>
<!-- leaf_56 -->
<g id="node57" class="node">
<title>leaf_56</title>
<polygon fill="none" stroke="#c0c0c0" points="4903.5,-951.0014 4849.5,-951.0014 4849.5,-915.0014 4903.5,-915.0014 4903.5,-951.0014"/>
</g>
<!-- block_52&#45;&gt;leaf_56 -->
<g id="edge56" class="edge">
<title>block_52&#45;&gt;leaf_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4758.4183,-1711.7389C4770.0347,-1669.0695 4800.3171,-1559.1718 4828.5,-1468.2023 4833.491,-1452.0922 4837.2011,-1448.742 4840.5,-1432.2023 4875.6529,-1255.9569 4877.5027,-1038.649 4876.9165,-961.6714"/>
<polygon fill="#000000" stroke="#000000" points="4880.4133,-961.3193 4876.816,-951.3539 4873.4136,-961.3876 4880.4133,-961.3193"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="4962.5,-333.7009 4526.5,-333.7009 4526.5,-64.0997 4962.5,-64.0997 4962.5,-333.7009"/>
<text text-anchor="middle" x="4744.5" y="-318.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;&#45;[[</text>
<text text-anchor="middle" x="4744.5" y="-303.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">for _,v in ipairs(samples) do</text>
<text text-anchor="middle" x="4744.5" y="-287.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if v:match(&quot;~&quot;) == nil then</text>
<text text-anchor="middle" x="4744.5" y="-272.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if verbose then io.write(v) end</text>
<text text-anchor="middle" x="4744.5" y="-257.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local sample = read(v)</text>
<text text-anchor="middle" x="4744.5" y="-241.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45;io.write(v..&quot;\n&quot;)</text>
<text text-anchor="middle" x="4744.5" y="-226.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc = Doc(sample)</text>
<text text-anchor="middle" x="4744.5" y="-210.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local doc_dot = doc:dot()</text>
<text text-anchor="middle" x="4744.5" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local old_dot = read(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;)</text>
<text text-anchor="middle" x="4744.5" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if old_dot and old_dot ~= doc_dot then</text>
<text text-anchor="middle" x="4744.5" y="-164.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write(&quot; &#160;&#160;&#45;&#45; changed dotfile: &quot; .. v)</text>
<text text-anchor="middle" x="4744.5" y="-149.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;&#45;old.dot&quot;, old_dot)</text>
<text text-anchor="middle" x="4744.5" y="-133.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4744.5" y="-118.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(&quot;../orb/dot/&quot; .. v .. &quot;.dot&quot;, doc:dot())</text>
<text text-anchor="middle" x="4744.5" y="-103.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4744.5" y="-87.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4744.5" y="-72.2" font-family="Inconsolata" font-size="14.00" fill="#000000">&#45;&#45;]]</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>codeblock_54&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4744.5,-914.855C4744.5,-837.4021 4744.5,-529.9936 4744.5,-344.0952"/>
<polygon fill="#000000" stroke="#000000" points="4748.0001,-343.9598 4744.5,-333.9599 4741.0001,-343.9599 4748.0001,-343.9598"/>
</g>
</g>
</svg>