<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1098pt" height="867pt"
 viewBox="0.00 0.00 1098.00 867.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 863.0011)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-863.0011 1094,-863.0011 1094,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="224" cy="-841.0011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="224" y="-836.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 80</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="224" cy="-769.0011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="224" y="-764.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;80</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M224,-822.8325C224,-815.132 224,-805.9754 224,-797.4177"/>
<polygon fill="#000000" stroke="#000000" points="227.5001,-797.4143 224,-787.4144 220.5001,-797.4144 227.5001,-797.4143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="52" cy="-697.0011" rx="27" ry="18"/>
<text text-anchor="middle" x="52" y="-692.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M188.7782,-754.2571C158.226,-741.4678 114.3529,-723.1023 84.5968,-710.6463"/>
<polygon fill="#000000" stroke="#000000" points="85.6624,-707.2981 75.0865,-706.6652 82.9594,-713.7552 85.6624,-707.2981"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="156" cy="-697.0011" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="156" y="-692.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;3</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M207.5391,-751.5719C199.103,-742.6396 188.6831,-731.6067 179.425,-721.804"/>
<polygon fill="#000000" stroke="#000000" points="181.7201,-719.1367 172.3093,-714.2698 176.631,-723.9431 181.7201,-719.1367"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="299" cy="-697.0011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="299" y="-692.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;31</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M242.1554,-751.5719C251.483,-742.6175 263.0094,-731.5521 273.2394,-721.7312"/>
<polygon fill="#000000" stroke="#000000" points="275.9618,-723.9695 280.7518,-714.5193 271.1141,-718.9198 275.9618,-723.9695"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="627" cy="-697.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="627" y="-692.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;80</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M276.2721,-759.6622C347.4488,-746.9457 475.1421,-724.132 555.2433,-709.8211"/>
<polygon fill="#000000" stroke="#000000" points="556.0232,-713.2373 565.2517,-708.033 554.792,-706.3464 556.0232,-713.2373"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-339.5005 0,-339.5005 0,-303.5005 54,-303.5005 54,-339.5005"/>
</g>
<!-- header_2&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>header_2&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M50.7942,-678.8899C46.7771,-618.5531 33.8262,-424.0299 28.9137,-350.2442"/>
<polygon fill="#000000" stroke="#000000" points="32.3797,-349.6153 28.223,-339.8699 25.3951,-350.0803 32.3797,-349.6153"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="126,-339.5005 72,-339.5005 72,-303.5005 126,-303.5005 126,-339.5005"/>
</g>
<!-- block_3&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>block_3&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M147.5961,-678.8896C143.162,-668.5822 138.0275,-655.3085 135,-643.0011 108.9016,-536.9056 101.6794,-406.4076 99.7159,-349.8561"/>
<polygon fill="#000000" stroke="#000000" points="103.2047,-349.4448 99.3892,-339.5608 96.2082,-349.6668 103.2047,-349.4448"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="468,-527.4014 144,-527.4014 144,-115.5997 468,-115.5997 468,-527.4014"/>
<text text-anchor="middle" x="306" y="-512.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="306" y="-480.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="306" y="-465.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="306" y="-449.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="306" y="-434.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="306" y="-419.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="306" y="-403.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="306" y="-388.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="306" y="-372.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="306" y="-357.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="306" y="-342.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="306" y="-326.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="306" y="-311.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="306" y="-263.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="306" y="-248.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="306" y="-233.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="306" y="-217.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="306" y="-186.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="306" y="-170.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="306" y="-155.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="306" y="-124.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local inverter = require &quot;invert/inverter&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>codeblock_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M299.3376,-678.8899C299.8475,-651.5386 300.8714,-596.6133 301.9667,-537.8604"/>
<polygon fill="#000000" stroke="#000000" points="305.4703,-537.6933 302.1574,-527.6298 298.4715,-537.5628 305.4703,-537.6933"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1090,-643.0016 486,-643.0016 486,.0005 1090,.0005 1090,-643.0016"/>
<text text-anchor="middle" x="788" y="-627.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert_dir(inverter, pwd, depth)</text>
<text text-anchor="middle" x="788" y="-612.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="788" y="-597.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="788" y="-581.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="788" y="-566.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="788" y="-534.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="788" y="-519.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="788" y="-504.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="788" y="-488.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="788" y="-473.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (inverter.extension == extension(f)) then</text>
<text text-anchor="middle" x="788" y="-457.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local org_dir = subLastFor(&quot;/src&quot;, &quot;/org&quot;, dirname(f))</text>
<text text-anchor="middle" x="788" y="-442.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(org_dir)</text>
<text text-anchor="middle" x="788" y="-427.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;(#inverter.extension + 1))</text>
<text text-anchor="middle" x="788" y="-411.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = org_dir .. &quot;/&quot; .. bare_name .. &quot;.gm&quot;</text>
<text text-anchor="middle" x="788" y="-396.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_name, inverter:invert(read(f)))</text>
<text text-anchor="middle" x="788" y="-380.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_name .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="788" y="-365.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-350.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-334.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, d in ipairs(subdirs) do</text>
<text text-anchor="middle" x="788" y="-319.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;invert_dir(inverter, d, depth)</text>
<text text-anchor="middle" x="788" y="-303.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-288.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-273.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-257.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="788" y="-226.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert_all(inverter, pwd)</text>
<text text-anchor="middle" x="788" y="-210.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="788" y="-195.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="788" y="-180.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;src&quot;, dir) then</text>
<text text-anchor="middle" x="788" y="-148.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return invert_dir(inverter, dir, 0)</text>
<text text-anchor="middle" x="788" y="-133.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-117.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="788" y="-102.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="788" y="-87.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="788" y="-55.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">inverter.invert_all = invert_all</text>
<text text-anchor="middle" x="788" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return inverter</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_5&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M634.7654,-678.8899C637.8017,-671.8082 641.6307,-662.8779 646.0755,-652.5113"/>
<polygon fill="#000000" stroke="#000000" points="649.4117,-653.6119 650.1356,-643.0418 642.9781,-650.8534 649.4117,-653.6119"/>
</g>
</g>
</svg>