<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1026pt" height="943pt"
 viewBox="0.00 0.00 1026.00 943.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 939.0011)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-939.0011 1022,-939.0011 1022,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="172" cy="-917.0011" rx="42.1216" ry="18"/>
<text text-anchor="middle" x="172" y="-912.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 80</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="172" cy="-845.0011" rx="60.9826" ry="18"/>
<text text-anchor="middle" x="172" y="-840.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;80</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M172,-898.8325C172,-891.132 172,-881.9754 172,-873.4177"/>
<polygon fill="#000000" stroke="#000000" points="175.5001,-873.4143 172,-863.4144 168.5001,-873.4144 175.5001,-873.4143"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="34" cy="-773.0011" rx="27" ry="18"/>
<text text-anchor="middle" x="34" y="-768.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">0 : </text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M141.7153,-829.2004C118.8428,-817.2669 87.5786,-800.9551 64.6237,-788.9787"/>
<polygon fill="#000000" stroke="#000000" points="66.1374,-785.8208 55.6526,-784.2981 62.8994,-792.0269 66.1374,-785.8208"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="111" cy="-773.0011" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="111" y="-768.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M156.9213,-827.2033C149.3139,-818.224 139.9694,-807.1945 131.7003,-797.4342"/>
<polygon fill="#000000" stroke="#000000" points="134.2035,-794.9743 125.0688,-789.6069 128.8626,-799.4993 134.2035,-794.9743"/>
</g>
<!-- codeblock_4 -->
<g id="node5" class="node">
<title>codeblock_4</title>
<ellipse fill="none" stroke="#000000" cx="234" cy="-773.0011" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="234" y="-768.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 4&#45;31</text>
</g>
<!-- section_1&#45;&gt;codeblock_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;codeblock_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M187.3258,-827.2033C194.7779,-818.5494 203.8698,-807.9911 212.0427,-798.4999"/>
<polygon fill="#000000" stroke="#000000" points="214.7625,-800.7052 218.6356,-790.8436 209.4581,-796.1375 214.7625,-800.7052"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="559" cy="-773.0011" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="559" y="-768.8011" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 38&#45;80</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M223.791,-835.3656C291.8941,-822.6952 411.8395,-800.3798 488.2629,-786.1615"/>
<polygon fill="#000000" stroke="#000000" points="489.0938,-789.567 498.2848,-784.2969 487.8133,-782.6851 489.0938,-789.567"/>
</g>
<!-- raw_6 -->
<g id="node7" class="node">
<title>raw_6</title>
<ellipse fill="none" stroke="#000000" cx="27" cy="-397.5005" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-393.3005" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;raw_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M92.8668,-757.9117C82.2886,-748.0098 69.7374,-734.1255 63,-719.0011 18.2336,-618.5076 20.8965,-483.5781 24.6166,-425.7423"/>
<polygon fill="#000000" stroke="#000000" points="28.1232,-425.7722 25.3367,-415.5504 21.1406,-425.2789 28.1232,-425.7722"/>
</g>
<!-- leaf_8 -->
<g id="node9" class="node">
<title>leaf_8</title>
<polygon fill="none" stroke="#c0c0c0" points="396,-603.4014 72,-603.4014 72,-191.5997 396,-191.5997 396,-603.4014"/>
<text text-anchor="middle" x="234" y="-588.0009" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="234" y="-556.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="234" y="-541.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="234" y="-525.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="234" y="-510.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="234" y="-495.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="234" y="-479.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="234" y="-464.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="234" y="-448.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="234" y="-433.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="234" y="-418.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="234" y="-402.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="234" y="-387.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="234" y="-339.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = require &quot;walk&quot;</text>
<text text-anchor="middle" x="234" y="-324.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local strHas = walk.strHas</text>
<text text-anchor="middle" x="234" y="-309.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local endsWith = walk.endsWith</text>
<text text-anchor="middle" x="234" y="-293.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local subLastFor = walk.subLastFor</text>
<text text-anchor="middle" x="234" y="-262.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="234" y="-246.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="234" y="-231.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="234" y="-200.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local inverter = require &quot;invert/inverter&quot;</text>
</g>
<!-- codeblock_4&#45;&gt;leaf_8 -->
<g id="edge8" class="edge">
<title>codeblock_4&#45;&gt;leaf_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M234,-754.8899C234,-727.5386 234,-672.6133 234,-613.8604"/>
<polygon fill="#000000" stroke="#000000" points="237.5001,-613.6298 234,-603.6298 230.5001,-613.6298 237.5001,-613.6298"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="1018,-719.0016 414,-719.0016 414,-75.9995 1018,-75.9995 1018,-719.0016"/>
<text text-anchor="middle" x="716" y="-703.8011" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert_dir(inverter, pwd, depth)</text>
<text text-anchor="middle" x="716" y="-688.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local depth = depth + 1</text>
<text text-anchor="middle" x="716" y="-673.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="716" y="-657.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir)</text>
<text text-anchor="middle" x="716" y="-642.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and not strHas(&quot;src/lib&quot;, dir) then</text>
<text text-anchor="middle" x="716" y="-610.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local files = getfiles(dir)</text>
<text text-anchor="middle" x="716" y="-595.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write((&quot; &#160;&quot;):rep(depth) .. &quot;* &quot; .. dir .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="716" y="-580.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local subdirs = getdirectories(dir)</text>
<text text-anchor="middle" x="716" y="-564.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, f in ipairs(files) do</text>
<text text-anchor="middle" x="716" y="-549.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (inverter.extension == extension(f)) then</text>
<text text-anchor="middle" x="716" y="-533.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local org_dir = subLastFor(&quot;/src&quot;, &quot;/org&quot;, dirname(f))</text>
<text text-anchor="middle" x="716" y="-518.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;makepath(org_dir)</text>
<text text-anchor="middle" x="716" y="-503.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local bare_name = basename(f):sub(1, &#45;(#inverter.extension + 1))</text>
<text text-anchor="middle" x="716" y="-487.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local out_name = org_dir .. &quot;/&quot; .. bare_name .. &quot;.gm&quot;</text>
<text text-anchor="middle" x="716" y="-472.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;write(out_name, inverter:invert(read(f)))</text>
<text text-anchor="middle" x="716" y="-456.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;io.write((&quot; &#160;&quot;):rep(depth) .. &quot; &#160;&#45; &quot; .. out_name .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="716" y="-441.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-426.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-410.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for _, d in ipairs(subdirs) do</text>
<text text-anchor="middle" x="716" y="-395.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;invert_dir(inverter, d, depth)</text>
<text text-anchor="middle" x="716" y="-379.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-364.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-349.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-333.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="716" y="-302.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert_all(inverter, pwd)</text>
<text text-anchor="middle" x="716" y="-286.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for dir in pl_dir.walk(pwd, false, false) do</text>
<text text-anchor="middle" x="716" y="-271.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not strHas(&quot;.git&quot;, dir) and isdir(dir) </text>
<text text-anchor="middle" x="716" y="-256.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and endsWith(&quot;src&quot;, dir) then</text>
<text text-anchor="middle" x="716" y="-224.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return invert_dir(inverter, dir, 0)</text>
<text text-anchor="middle" x="716" y="-209.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-193.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="716" y="-178.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="716" y="-163.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="716" y="-131.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">inverter.invert_all = invert_all</text>
<text text-anchor="middle" x="716" y="-84.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return inverter</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>codeblock_5&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M566.5724,-754.8899C569.5334,-747.8082 573.2672,-738.8779 577.6016,-728.5113"/>
<polygon fill="#000000" stroke="#000000" points="580.9324,-729.618 581.5608,-719.0418 574.4742,-726.9177 580.9324,-729.618"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="54,-40 0,-40 0,0 54,0 54,-40"/>
</g>
<!-- raw_6&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>raw_6&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M27,-379.2929C27,-319.0717 27,-125.8859 27,-50.5186"/>
<polygon fill="#000000" stroke="#000000" points="30.5001,-50.2835 27,-40.2835 23.5001,-50.2836 30.5001,-50.2835"/>
</g>
</g>
</svg>