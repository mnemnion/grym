<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="6461pt" height="2498pt"
 viewBox="0.00 0.00 6461.00 2497.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2493.8037)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2493.8037 6457,-2493.8037 6457,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1437" cy="-2471.8037" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1437" y="-2467.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 290</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1437" cy="-2399.8037" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1437" y="-2395.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;205</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1437,-2453.635C1437,-2445.9346 1437,-2436.778 1437,-2428.2203"/>
<polygon fill="#000000" stroke="#000000" points="1440.5001,-2428.2169 1437,-2418.2169 1433.5001,-2428.217 1440.5001,-2428.2169"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="1002" cy="-2327.8037" rx="83.677" ry="18"/>
<text text-anchor="middle" x="1002" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Inverter module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1379.1096,-2391.2871C1311.0136,-2381.1247 1194.6108,-2363.302 1095,-2345.8037 1088.0402,-2344.581 1080.7966,-2343.2617 1073.5608,-2341.9127"/>
<polygon fill="#000000" stroke="#000000" points="1074.2007,-2338.4717 1063.7257,-2340.0608 1072.9054,-2345.3508 1074.2007,-2338.4717"/>
</g>
<!-- block_3 -->
<g id="node4" class="node">
<title>block_3</title>
<ellipse fill="none" stroke="#000000" cx="1150" cy="-2327.8037" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1150" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 1&#45;4</text>
</g>
<!-- section_1&#45;&gt;block_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;block_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1384.1462,-2388.8829C1336.9047,-2378.7945 1265.9378,-2362.8319 1205,-2345.8037 1201.6073,-2344.8556 1198.1121,-2343.8296 1194.6063,-2342.7647"/>
<polygon fill="#000000" stroke="#000000" points="1195.3628,-2339.3343 1184.774,-2339.6935 1193.2756,-2346.0159 1195.3628,-2339.3343"/>
</g>
<!-- block_4 -->
<g id="node5" class="node">
<title>block_4</title>
<ellipse fill="none" stroke="#000000" cx="1260" cy="-2327.8037" rx="45.9804" ry="18"/>
<text text-anchor="middle" x="1260" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 5&#45;8</text>
</g>
<!-- section_1&#45;&gt;block_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;block_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1399.895,-2384.7101C1371.0814,-2372.9893 1331.1448,-2356.7439 1301.3153,-2344.6099"/>
<polygon fill="#000000" stroke="#000000" points="1302.5943,-2341.3517 1292.0125,-2340.8257 1299.9567,-2347.8358 1302.5943,-2341.3517"/>
</g>
<!-- block_5 -->
<g id="node6" class="node">
<title>block_5</title>
<ellipse fill="none" stroke="#000000" cx="1375" cy="-2327.8037" rx="50.8172" ry="18"/>
<text text-anchor="middle" x="1375" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 9&#45;26</text>
</g>
<!-- section_1&#45;&gt;block_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;block_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1421.6742,-2382.0059C1414.1101,-2373.2218 1404.8564,-2362.4756 1396.5893,-2352.8751"/>
<polygon fill="#000000" stroke="#000000" points="1399.1131,-2350.4421 1389.9356,-2345.1482 1393.8087,-2355.0098 1399.1131,-2350.4421"/>
</g>
<!-- block_6 -->
<g id="node7" class="node">
<title>block_6</title>
<ellipse fill="none" stroke="#000000" cx="1500" cy="-2327.8037" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="1500" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 27&#45;28</text>
</g>
<!-- section_1&#45;&gt;block_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;block_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1452.573,-2382.0059C1460.2591,-2373.2218 1469.662,-2362.4756 1478.0625,-2352.8751"/>
<polygon fill="#000000" stroke="#000000" points="1480.8724,-2354.9788 1484.8235,-2345.1482 1475.6044,-2350.3692 1480.8724,-2354.9788"/>
</g>
<!-- block_7 -->
<g id="node8" class="node">
<title>block_7</title>
<ellipse fill="none" stroke="#000000" cx="1698" cy="-2327.8037" rx="60.9913" ry="18"/>
<text text-anchor="middle" x="1698" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 29&#45;205</text>
</g>
<!-- section_1&#45;&gt;block_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;block_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1483.3608,-2387.0145C1528.2177,-2374.6402 1596.1955,-2355.8877 1643.5923,-2342.8127"/>
<polygon fill="#000000" stroke="#000000" points="1644.669,-2346.1465 1653.3781,-2340.1131 1642.8074,-2339.3985 1644.669,-2346.1465"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2355" cy="-2327.8037" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2355" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;205</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1500.4601,-2394.8264C1663.9865,-2382.0008 2099.3663,-2347.8534 2277.4439,-2333.8865"/>
<polygon fill="#000000" stroke="#000000" points="2277.8243,-2337.3675 2287.52,-2333.0962 2277.2769,-2330.3889 2277.8243,-2337.3675"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="4556" cy="-2327.8037" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4556" y="-2323.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 206&#45;245</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1502.5041,-2398.2915C1902.897,-2389.0487 4017.9886,-2340.2233 4470.6751,-2329.7733"/>
<polygon fill="#000000" stroke="#000000" points="4470.8237,-2333.2709 4480.7402,-2329.541 4470.662,-2326.2728 4470.8237,-2333.2709"/>
</g>
<!-- prose_10 -->
<g id="node11" class="node">
<title>prose_10</title>
<ellipse fill="none" stroke="#000000" cx="688" cy="-2255.8037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="688" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_3&#45;&gt;prose_10 -->
<g id="edge10" class="edge">
<title>block_3&#45;&gt;prose_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1115.9472,-2315.5802C1109.0764,-2313.4205 1101.857,-2311.3665 1095,-2309.8037 963.8468,-2279.9105 804.882,-2264.7451 730.3837,-2258.8385"/>
<polygon fill="#000000" stroke="#000000" points="730.2594,-2255.3184 720.0184,-2258.0335 729.7173,-2262.2974 730.2594,-2255.3184"/>
</g>
<!-- prose_12 -->
<g id="node13" class="node">
<title>prose_12</title>
<ellipse fill="none" stroke="#000000" cx="1237" cy="-2255.8037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1237" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_4&#45;&gt;prose_12 -->
<g id="edge12" class="edge">
<title>block_4&#45;&gt;prose_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1254.1961,-2309.635C1251.6435,-2301.6443 1248.59,-2292.0855 1245.7692,-2283.2551"/>
<polygon fill="#000000" stroke="#000000" points="1249.0994,-2282.1778 1242.7223,-2273.7171 1242.4313,-2284.3079 1249.0994,-2282.1778"/>
</g>
<!-- codeblock_14 -->
<g id="node15" class="node">
<title>codeblock_14</title>
<ellipse fill="none" stroke="#000000" cx="1365" cy="-2255.8037" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="1365" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 9&#45;24</text>
</g>
<!-- block_5&#45;&gt;codeblock_14 -->
<g id="edge14" class="edge">
<title>block_5&#45;&gt;codeblock_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1372.4766,-2309.635C1371.4071,-2301.9346 1370.1353,-2292.778 1368.9468,-2284.2203"/>
<polygon fill="#000000" stroke="#000000" points="1372.3999,-2283.6403 1367.5574,-2274.2169 1365.4664,-2284.6034 1372.3999,-2283.6403"/>
</g>
<!-- prose_16 -->
<g id="node17" class="node">
<title>prose_16</title>
<ellipse fill="none" stroke="#000000" cx="1500" cy="-2255.8037" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1500" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_6&#45;&gt;prose_16 -->
<g id="edge16" class="edge">
<title>block_6&#45;&gt;prose_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1500,-2309.635C1500,-2301.9346 1500,-2292.778 1500,-2284.2203"/>
<polygon fill="#000000" stroke="#000000" points="1503.5001,-2284.2169 1500,-2274.2169 1496.5001,-2284.217 1503.5001,-2284.2169"/>
</g>
<!-- codeblock_18 -->
<g id="node19" class="node">
<title>codeblock_18</title>
<ellipse fill="none" stroke="#000000" cx="1748" cy="-2255.8037" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1748" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 29&#45;64</text>
</g>
<!-- block_7&#45;&gt;codeblock_18 -->
<g id="edge18" class="edge">
<title>block_7&#45;&gt;codeblock_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1710.3596,-2310.0059C1716.2491,-2301.525 1723.4087,-2291.2152 1729.8961,-2281.8732"/>
<polygon fill="#000000" stroke="#000000" points="1732.7801,-2283.8563 1735.6093,-2273.6462 1727.0305,-2279.8635 1732.7801,-2283.8563"/>
</g>
<!-- header_20 -->
<g id="node21" class="node">
<title>header_20</title>
<ellipse fill="none" stroke="#000000" cx="2002" cy="-2255.8037" rx="82.2492" ry="18"/>
<text text-anchor="middle" x="2002" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : matchLineType</text>
</g>
<!-- section_8&#45;&gt;header_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;header_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2299.8438,-2316.5537C2238.5173,-2304.0451 2139.3092,-2283.8101 2072.4184,-2270.1666"/>
<polygon fill="#000000" stroke="#000000" points="2072.8797,-2266.6887 2062.382,-2268.1195 2071.4807,-2273.5475 2072.8797,-2266.6887"/>
</g>
<!-- block_21 -->
<g id="node22" class="node">
<title>block_21</title>
<ellipse fill="none" stroke="#000000" cx="2158" cy="-2255.8037" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2158" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 66&#45;74</text>
</g>
<!-- section_8&#45;&gt;block_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;block_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2314.1815,-2312.8852C2282.2807,-2301.226 2237.917,-2285.0119 2204.6207,-2272.8427"/>
<polygon fill="#000000" stroke="#000000" points="2205.7005,-2269.5109 2195.1066,-2269.3655 2203.2975,-2276.0856 2205.7005,-2269.5109"/>
</g>
<!-- block_22 -->
<g id="node23" class="node">
<title>block_22</title>
<ellipse fill="none" stroke="#000000" cx="2288" cy="-2255.8037" rx="55.6542" ry="18"/>
<text text-anchor="middle" x="2288" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 75&#45;77</text>
</g>
<!-- section_8&#45;&gt;block_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;block_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2338.4382,-2310.0059C2330.1824,-2301.134 2320.064,-2290.2605 2311.0626,-2280.5874"/>
<polygon fill="#000000" stroke="#000000" points="2313.5147,-2278.0846 2304.1401,-2273.1482 2308.3902,-2282.8533 2313.5147,-2278.0846"/>
</g>
<!-- block_23 -->
<g id="node24" class="node">
<title>block_23</title>
<ellipse fill="none" stroke="#000000" cx="2422" cy="-2255.8037" rx="60.1864" ry="18"/>
<text text-anchor="middle" x="2422" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 78&#45;113</text>
</g>
<!-- section_8&#45;&gt;block_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;block_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2371.5618,-2310.0059C2379.8176,-2301.134 2389.936,-2290.2605 2398.9374,-2280.5874"/>
<polygon fill="#000000" stroke="#000000" points="2401.6098,-2282.8533 2405.8599,-2273.1482 2396.4853,-2278.0846 2401.6098,-2282.8533"/>
</g>
<!-- block_24 -->
<g id="node25" class="node">
<title>block_24</title>
<ellipse fill="none" stroke="#000000" cx="2564" cy="-2255.8037" rx="64.2191" ry="18"/>
<text text-anchor="middle" x="2564" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 114&#45;115</text>
</g>
<!-- section_8&#45;&gt;block_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;block_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2397.0429,-2313.32C2430.6019,-2301.759 2477.7349,-2285.5218 2513.3675,-2273.2464"/>
<polygon fill="#000000" stroke="#000000" points="2514.7772,-2276.4627 2523.0919,-2269.8964 2512.4972,-2269.8444 2514.7772,-2276.4627"/>
</g>
<!-- block_25 -->
<g id="node26" class="node">
<title>block_25</title>
<ellipse fill="none" stroke="#000000" cx="2870" cy="-2255.8037" rx="64.2191" ry="18"/>
<text text-anchor="middle" x="2870" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 116&#45;118</text>
</g>
<!-- section_8&#45;&gt;block_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;block_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2417.121,-2319.1188C2514.3716,-2305.5226 2701.8188,-2279.3164 2802.3622,-2265.2598"/>
<polygon fill="#000000" stroke="#000000" points="2802.9874,-2268.7065 2812.4065,-2263.8556 2802.0182,-2261.7739 2802.9874,-2268.7065"/>
</g>
<!-- block_26 -->
<g id="node27" class="node">
<title>block_26</title>
<ellipse fill="none" stroke="#000000" cx="3294" cy="-2255.8037" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="3294" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 119&#45;205</text>
</g>
<!-- section_8&#45;&gt;block_26 -->
<g id="edge26" class="edge">
<title>section_8&#45;&gt;block_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2422.9083,-2322.5966C2594.5115,-2309.4386 3044.433,-2274.9398 3221.1992,-2261.3858"/>
<polygon fill="#000000" stroke="#000000" points="3221.4777,-2264.8748 3231.1808,-2260.6205 3220.9425,-2257.8953 3221.4777,-2264.8748"/>
</g>
<!-- header_39 -->
<g id="node40" class="node">
<title>header_39</title>
<ellipse fill="none" stroke="#000000" cx="4240" cy="-2255.8037" rx="83.6081" ry="18"/>
<text text-anchor="middle" x="4240" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Grym:invert(str)</text>
</g>
<!-- section_9&#45;&gt;header_39 -->
<g id="edge39" class="edge">
<title>section_9&#45;&gt;header_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4501.3178,-2315.3444C4447.548,-2303.0931 4365.3503,-2284.3645 4307.5308,-2271.1904"/>
<polygon fill="#000000" stroke="#000000" points="4308.2787,-2267.7712 4297.7511,-2268.9621 4306.7236,-2274.5963 4308.2787,-2267.7712"/>
</g>
<!-- block_40 -->
<g id="node41" class="node">
<title>block_40</title>
<ellipse fill="none" stroke="#000000" cx="4407" cy="-2255.8037" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4407" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 206&#45;209</text>
</g>
<!-- section_9&#45;&gt;block_40 -->
<g id="edge40" class="edge">
<title>section_9&#45;&gt;block_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4522.5615,-2311.6454C4500.7677,-2301.1142 4472.1562,-2287.2885 4448.8553,-2276.029"/>
<polygon fill="#000000" stroke="#000000" points="4450.0851,-2272.7361 4439.5584,-2271.5366 4447.0395,-2279.0389 4450.0851,-2272.7361"/>
</g>
<!-- block_41 -->
<g id="node42" class="node">
<title>block_41</title>
<ellipse fill="none" stroke="#000000" cx="4556" cy="-2255.8037" rx="65.0229" ry="18"/>
<text text-anchor="middle" x="4556" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 210&#45;211</text>
</g>
<!-- section_9&#45;&gt;block_41 -->
<g id="edge41" class="edge">
<title>section_9&#45;&gt;block_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4556,-2309.635C4556,-2301.9346 4556,-2292.778 4556,-2284.2203"/>
<polygon fill="#000000" stroke="#000000" points="4559.5001,-2284.2169 4556,-2274.2169 4552.5001,-2284.217 4559.5001,-2284.2169"/>
</g>
<!-- block_42 -->
<g id="node43" class="node">
<title>block_42</title>
<ellipse fill="none" stroke="#000000" cx="4800" cy="-2255.8037" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="4800" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 212&#45;214</text>
</g>
<!-- section_9&#45;&gt;block_42 -->
<g id="edge42" class="edge">
<title>section_9&#45;&gt;block_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4603.6249,-2313.7504C4644.2833,-2301.7528 4702.7634,-2284.4964 4745.3262,-2271.9369"/>
<polygon fill="#000000" stroke="#000000" points="4746.3662,-2275.2793 4754.9667,-2269.0922 4744.385,-2268.5655 4746.3662,-2275.2793"/>
</g>
<!-- block_43 -->
<g id="node44" class="node">
<title>block_43</title>
<ellipse fill="none" stroke="#000000" cx="5010" cy="-2255.8037" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5010" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 215&#45;245</text>
</g>
<!-- section_9&#45;&gt;block_43 -->
<g id="edge43" class="edge">
<title>section_9&#45;&gt;block_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4619.1268,-2317.7924C4704.4362,-2304.2631 4855.864,-2280.2481 4943.0824,-2266.4161"/>
<polygon fill="#000000" stroke="#000000" points="4943.804,-2269.8455 4953.1323,-2264.8223 4942.7075,-2262.9319 4943.804,-2269.8455"/>
</g>
<!-- section_44 -->
<g id="node45" class="node">
<title>section_44</title>
<ellipse fill="none" stroke="#000000" cx="5541" cy="-2255.8037" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="5541" y="-2251.6037" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 246&#45;290</text>
</g>
<!-- section_9&#45;&gt;section_44 -->
<g id="edge44" class="edge">
<title>section_9&#45;&gt;section_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4628.4294,-2322.5093C4807.4042,-2309.4269 5269.6679,-2275.6371 5458.6475,-2261.8233"/>
<polygon fill="#000000" stroke="#000000" points="5459.0793,-2265.3012 5468.7975,-2261.0814 5458.569,-2258.3198 5459.0793,-2265.3012"/>
</g>
<!-- leaf_11 -->
<g id="node12" class="node">
<title>leaf_11</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1953.5038 0,-1953.5038 0,-1914.9026 450,-1914.9026 450,-1953.5038"/>
<text text-anchor="middle" x="225" y="-1938.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A work in progress, which also works well enough to invert,</text>
<text text-anchor="middle" x="225" y="-1923.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> I may hope, the whole of grym including this file.</text>
</g>
<!-- prose_10&#45;&gt;leaf_11 -->
<g id="edge11" class="edge">
<title>prose_10&#45;&gt;leaf_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M655.7016,-2254.3506C609.1279,-2250.9547 521.8151,-2239.622 459,-2201.8037 356.2893,-2139.9659 274.7152,-2017.885 241.3433,-1962.5982"/>
<polygon fill="#000000" stroke="#000000" points="244.1659,-1960.4975 236.0407,-1953.6982 238.1523,-1964.0805 244.1659,-1960.4975"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="939.5,-1961.5036 468.5,-1961.5036 468.5,-1906.9028 939.5,-1906.9028 939.5,-1961.5036"/>
<text text-anchor="middle" x="704" y="-1946.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> Hence I&#39;m eager to use it and then document it from the grimoire</text>
<text text-anchor="middle" x="704" y="-1931.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> side.</text>
</g>
<!-- prose_12&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>prose_12&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1205.0235,-2252.4187C1139.3861,-2245.0561 991.9247,-2226.2644 948,-2201.8037 845.5963,-2144.7773 762.94,-2028.8909 725.5777,-1970.1162"/>
<polygon fill="#000000" stroke="#000000" points="728.4683,-1968.138 720.1852,-1961.5318 722.5408,-1971.8615 728.4683,-1968.138"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1372.5,-2047.3038 957.5,-2047.3038 957.5,-1821.1026 1372.5,-1821.1026 1372.5,-2047.3038"/>
<text text-anchor="middle" x="1165" y="-2032.3034" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1165" y="-2000.9033" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="1165" y="-1969.5033" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="1165" y="-1938.1033" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1165" y="-1906.7032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isBlank(line)</text>
<text text-anchor="middle" x="1165" y="-1891.3032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local all_blanks = L.match((m.__TAB__ + m._)^0, line)</text>
<text text-anchor="middle" x="1165" y="-1875.9032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (all_blanks == (#line + 1) or line == &quot;&quot;)</text>
<text text-anchor="middle" x="1165" y="-1860.5031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1165" y="-1829.1031" font-family="Inconsolata" font-size="14.00" fill="#000000">local Inv, inv = u.inherit()</text>
</g>
<!-- codeblock_14&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_14&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1353.6741,-2237.5916C1332.0798,-2202.868 1283.3783,-2124.5558 1240.8659,-2056.1957"/>
<polygon fill="#000000" stroke="#000000" points="1243.7009,-2054.1267 1235.4477,-2047.4832 1237.7566,-2057.8235 1243.7009,-2054.1267"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1609.5,-1952.2032 1390.5,-1952.2032 1390.5,-1916.2032 1609.5,-1916.2032 1609.5,-1952.2032"/>
<text text-anchor="middle" x="1500" y="-1930.7032" font-family="Inconsolata" font-size="14.00" fill="#000000"> The default language is Lua.</text>
</g>
<!-- prose_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>prose_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1500,-2237.5916C1500,-2184.082 1500,-2027.0614 1500,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="1503.5001,-1962.2155 1500,-1952.2156 1496.5001,-1962.2156 1503.5001,-1962.2155"/>
</g>
<!-- leaf_19 -->
<g id="node20" class="node">
<title>leaf_19</title>
<polygon fill="none" stroke="#c0c0c0" points="2120,-2201.9041 1628,-2201.9041 1628,-1666.5023 2120,-1666.5023 2120,-2201.9041"/>
<text text-anchor="middle" x="1874" y="-2186.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.lang = &quot;lua&quot;</text>
<text text-anchor="middle" x="1874" y="-2171.2036" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.extension = &quot;.lua&quot;</text>
<text text-anchor="middle" x="1874" y="-2155.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment = L.P&quot;&#45;&#45;&quot;</text>
<text text-anchor="middle" x="1874" y="-2140.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment_len = 3</text>
<text text-anchor="middle" x="1874" y="-2125.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.tab_to_space = &quot; &#160;&#160;&quot;</text>
<text text-anchor="middle" x="1874" y="-2093.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">local lang_config = { lua = { lang = &quot;lua&quot;, </text>
<text text-anchor="middle" x="1874" y="-2078.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;extension = &quot;.lua&quot;,</text>
<text text-anchor="middle" x="1874" y="-2062.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment = L.P&quot;&#45;&#45;&quot;,</text>
<text text-anchor="middle" x="1874" y="-2047.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment_len = 3,</text>
<text text-anchor="middle" x="1874" y="-2032.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tab_to_space = &quot; &#160;&#160;&quot;}}</text>
<text text-anchor="middle" x="1874" y="-2000.6033" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_header(inverter)</text>
<text text-anchor="middle" x="1874" y="-1985.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#!&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1874" y="-1969.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1874" y="-1938.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_footer(inverter)</text>
<text text-anchor="middle" x="1874" y="-1923.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#/&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1874" y="-1907.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1874" y="-1876.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.filter(inverter, line)</text>
<text text-anchor="middle" x="1874" y="-1860.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if isBlank(line) then</text>
<text text-anchor="middle" x="1874" y="-1845.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1874" y="-1830.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1874" y="-1814.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return line:gsub(&quot;\t&quot;, inverter.tab_to_space):gsub(&quot;\r&quot;, &quot;&quot;)</text>
<text text-anchor="middle" x="1874" y="-1799.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1874" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1874" y="-1752.4029" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat_lines() end &#45;&#45;stub out</text>
<text text-anchor="middle" x="1874" y="-1721.0029" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.matchComment(inverter, line)</text>
<text text-anchor="middle" x="1874" y="-1705.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (L.match(inverter.comment * m._, line) </text>
<text text-anchor="middle" x="1874" y="-1690.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or (L.match(inverter.comment, line) and #line == 2))</text>
<text text-anchor="middle" x="1874" y="-1674.8028" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_18&#45;&gt;leaf_19 -->
<g id="edge19" class="edge">
<title>codeblock_18&#45;&gt;leaf_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1755.1353,-2237.5916C1757.9136,-2230.5003 1761.4041,-2221.5912 1765.4282,-2211.3203"/>
<polygon fill="#000000" stroke="#000000" points="1768.7082,-2212.5428 1769.0973,-2201.9552 1762.1905,-2209.9893 1768.7082,-2212.5428"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="2170" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2170" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_21&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>block_21&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2158.6796,-2237.5916C2160.6762,-2184.082 2166.5351,-2027.0614 2168.9456,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="2172.4525,-1962.3391 2169.3279,-1952.2156 2165.4574,-1962.0781 2172.4525,-1962.3391"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="2276" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2276" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_22&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>block_22&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2287.3204,-2237.5916C2285.3238,-2184.082 2279.4649,-2027.0614 2277.0544,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="2280.5426,-1962.0781 2276.6721,-1952.2156 2273.5475,-1962.3391 2280.5426,-1962.0781"/>
</g>
<!-- codeblock_31 -->
<g id="node32" class="node">
<title>codeblock_31</title>
<ellipse fill="none" stroke="#000000" cx="2421" cy="-1934.2032" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="2421" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;112</text>
</g>
<!-- block_23&#45;&gt;codeblock_31 -->
<g id="edge31" class="edge">
<title>block_23&#45;&gt;codeblock_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2421.9434,-2237.5916C2421.777,-2184.082 2421.2887,-2027.0614 2421.0879,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="2424.5872,-1962.2046 2421.056,-1952.2156 2417.5872,-1962.2264 2424.5872,-1962.2046"/>
</g>
<!-- prose_33 -->
<g id="node34" class="node">
<title>prose_33</title>
<ellipse fill="none" stroke="#000000" cx="2564" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2564" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_24&#45;&gt;prose_33 -->
<g id="edge33" class="edge">
<title>block_24&#45;&gt;prose_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2564,-2237.5916C2564,-2184.082 2564,-2027.0614 2564,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="2567.5001,-1962.2155 2564,-1952.2156 2560.5001,-1962.2156 2567.5001,-1962.2155"/>
</g>
<!-- prose_35 -->
<g id="node36" class="node">
<title>prose_35</title>
<ellipse fill="none" stroke="#000000" cx="2949" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2949" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_25&#45;&gt;prose_35 -->
<g id="edge35" class="edge">
<title>block_25&#45;&gt;prose_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2874.4737,-2237.5916C2887.6453,-2183.9714 2926.3492,-2026.4121 2942.1566,-1962.0621"/>
<polygon fill="#000000" stroke="#000000" points="2945.5887,-1962.7618 2944.5753,-1952.2156 2938.7908,-1961.0919 2945.5887,-1962.7618"/>
</g>
<!-- codeblock_37 -->
<g id="node38" class="node">
<title>codeblock_37</title>
<ellipse fill="none" stroke="#000000" cx="3433" cy="-1934.2032" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3433" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 125&#45;203</text>
</g>
<!-- block_26&#45;&gt;codeblock_37 -->
<g id="edge37" class="edge">
<title>block_26&#45;&gt;codeblock_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3301.8715,-2237.5916C3325.0946,-2183.8609 3393.4271,-2025.7619 3421.1306,-1961.6652"/>
<polygon fill="#000000" stroke="#000000" points="3424.4601,-1962.7835 3425.2148,-1952.2156 3418.0346,-1960.0063 3424.4601,-1962.7835"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1436.5,-1089.4026 979.5,-1089.4026 979.5,-972.6008 1436.5,-972.6008 1436.5,-1089.4026"/>
<text text-anchor="middle" x="1208" y="-1058.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Matches a line by type (comment, code, or blank) and either</text>
<text text-anchor="middle" x="1208" y="-1042.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> concatenates to an existing block of this type or starts a new</text>
<text text-anchor="middle" x="1208" y="-1027.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> one if the latest is different.</text>
<text text-anchor="middle" x="1208" y="-1011.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1208" y="-996.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: the latest block.</text>
<text text-anchor="middle" x="1208" y="-981.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line: line to be matched and added.</text>
</g>
<!-- prose_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>prose_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2173.9283,-1916.0753C2183.3328,-1867.2114 2201.3038,-1732.0513 2129,-1666.6028 2072.5772,-1615.5296 1506.786,-1675.038 1445,-1630.6028 1269.8142,-1504.6129 1224.0768,-1228.3559 1212.1706,-1099.593"/>
<polygon fill="#000000" stroke="#000000" points="1215.6422,-1099.1155 1211.2759,-1089.4623 1208.6693,-1099.7315 1215.6422,-1099.1155"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="1869.5,-1050.9038 1454.5,-1050.9038 1454.5,-1011.0996 1869.5,-1011.0996 1869.5,-1050.9038"/>
<text text-anchor="middle" x="1662" y="-1035.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the latest block, which may be created here.</text>
</g>
<!-- prose_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>prose_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2277.914,-1916.0737C2281.9573,-1867.2057 2285.5652,-1732.0361 2211,-1666.6028 2099.4422,-1568.7074 1995.7229,-1722.2784 1879,-1630.6028 1691.8668,-1483.626 1665.9984,-1160.7636 1662.5143,-1060.982"/>
<polygon fill="#000000" stroke="#000000" points="1666.005,-1060.6135 1662.2095,-1050.7219 1659.0081,-1060.8214 1666.005,-1060.6135"/>
</g>
<!-- leaf_32 -->
<g id="node33" class="node">
<title>leaf_32</title>
<polygon fill="none" stroke="#c0c0c0" points="2338,-1289.9028 1888,-1289.9028 1888,-772.1006 2338,-772.1006 2338,-1289.9028"/>
<text text-anchor="middle" x="2113" y="-1274.5022" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.sortLine(inverter, latest, line)</text>
<text text-anchor="middle" x="2113" y="-1259.1022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = latest or {}</text>
<text text-anchor="middle" x="2113" y="-1227.7021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter:matchComment(line) then</text>
<text text-anchor="middle" x="2113" y="-1212.3021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose</text>
<text text-anchor="middle" x="2113" y="-1196.9021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;prose&quot; then</text>
<text text-anchor="middle" x="2113" y="-1181.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new prose block</text>
<text text-anchor="middle" x="2113" y="-1166.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;prose&quot;}</text>
<text text-anchor="middle" x="2113" y="-1150.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2113" y="-1135.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2113" y="-1119.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2113" y="-1104.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2113" y="-1089.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif isBlank(line) then</text>
<text text-anchor="middle" x="2113" y="-1073.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank line</text>
<text text-anchor="middle" x="2113" y="-1058.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;blank&quot; then</text>
<text text-anchor="middle" x="2113" y="-1042.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;blank&quot;}</text>
<text text-anchor="middle" x="2113" y="-1027.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2113" y="-1012.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2113" y="-996.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2113" y="-981.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2113" y="-965.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2113" y="-950.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code line</text>
<text text-anchor="middle" x="2113" y="-935.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;code&quot; then</text>
<text text-anchor="middle" x="2113" y="-919.7015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new code block</text>
<text text-anchor="middle" x="2113" y="-904.3015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;code&quot; }</text>
<text text-anchor="middle" x="2113" y="-888.9015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2113" y="-873.5014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2113" y="-858.1014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2113" y="-842.7014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2113" y="-827.3013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2113" y="-795.9013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="2113" y="-780.5013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_31&#45;&gt;leaf_32 -->
<g id="edge32" class="edge">
<title>codeblock_31&#45;&gt;leaf_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2414.8476,-1916.1614C2388.558,-1839.0678 2283.4014,-1530.6991 2204.5469,-1299.4603"/>
<polygon fill="#000000" stroke="#000000" points="2207.8235,-1298.2249 2201.2832,-1289.8898 2201.1982,-1300.4842 2207.8235,-1298.2249"/>
</g>
<!-- leaf_34 -->
<g id="node35" class="node">
<title>leaf_34</title>
<polygon fill="none" stroke="#c0c0c0" points="2771.5,-1049.0017 2356.5,-1049.0017 2356.5,-1013.0017 2771.5,-1013.0017 2771.5,-1049.0017"/>
<text text-anchor="middle" x="2564" y="-1027.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> Takes blocks and concatenates them into a single string.</text>
</g>
<!-- prose_33&#45;&gt;leaf_34 -->
<g id="edge34" class="edge">
<title>prose_33&#45;&gt;leaf_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2564,-1916.1614C2564,-1803.598 2564,-1197.9898 2564,-1059.3072"/>
<polygon fill="#000000" stroke="#000000" points="2567.5001,-1059.0864 2564,-1049.0865 2560.5001,-1059.0865 2567.5001,-1059.0864"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3268,-1050.3023 2790,-1050.3023 2790,-1011.7011 3268,-1011.7011 3268,-1050.3023"/>
<text text-anchor="middle" x="3029" y="-1035.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> Also writes headers and footers, while doing its best to get the </text>
<text text-anchor="middle" x="3029" y="-1019.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> spacing right.</text>
</g>
<!-- prose_35&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>prose_35&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2950.598,-1916.1614C2960.5353,-1803.9698 3013.8554,-1201.9843 3026.3698,-1060.6964"/>
<polygon fill="#000000" stroke="#000000" points="3029.8673,-1060.8785 3027.2633,-1050.6087 3022.8946,-1060.2608 3029.8673,-1060.8785"/>
</g>
<!-- leaf_38 -->
<g id="node39" class="node">
<title>leaf_38</title>
<polygon fill="none" stroke="#c0c0c0" points="3855.5,-1630.7039 3286.5,-1630.7039 3286.5,-431.2996 3855.5,-431.2996 3855.5,-1630.7039"/>
<text text-anchor="middle" x="3571" y="-1615.4028" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.catBlocks(inverter, blocks)</text>
<text text-anchor="middle" x="3571" y="-1600.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="3571" y="-1584.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function toLines(block) </text>
<text text-anchor="middle" x="3571" y="-1569.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="3571" y="-1553.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for j = 1, #block do</text>
<text text-anchor="middle" x="3571" y="-1538.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="3571" y="-1523.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. block[j] .. &quot;\n&quot;</text>
<text text-anchor="middle" x="3571" y="-1507.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-1492.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="3571" y="-1476.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-1461.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="3571" y="-1446.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[1].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="3571" y="-1430.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_header()</text>
<text text-anchor="middle" x="3571" y="-1415.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-1399.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;phrase = phrase .. toLines(blocks[1]) </text>
<text text-anchor="middle" x="3571" y="-1384.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #blocks do</text>
<text text-anchor="middle" x="3571" y="-1369.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="3571" y="-1337.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="3571" y="-1322.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write blanks and code</text>
<text text-anchor="middle" x="3571" y="-1306.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="3571" y="-1291.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="3571" y="-1276.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-1244.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is </text>
<text text-anchor="middle" x="3571" y="-1229.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose or nothing, write blanks, header, and code</text>
<text text-anchor="middle" x="3571" y="-1213.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="3571" y="-1198.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="3571" y="-1183.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1])</text>
<text text-anchor="middle" x="3571" y="-1167.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. inverter:write_header()</text>
<text text-anchor="middle" x="3571" y="-1152.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-1120.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is prose, write a blank line, </text>
<text text-anchor="middle" x="3571" y="-1105.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; header, and code. </text>
<text text-anchor="middle" x="3571" y="-1090.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="3571" y="-1074.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. &quot;\n&quot; .. inverter:write_header() </text>
<text text-anchor="middle" x="3571" y="-1059.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-1043.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3571" y="-1028.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on code in catLines&quot;)</text>
<text text-anchor="middle" x="3571" y="-1013.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-997.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="3571" y="-966.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="3571" y="-950.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write footer, blanks, and prose</text>
<text text-anchor="middle" x="3571" y="-935.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="3571" y="-920.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="3571" y="-904.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer() </text>
<text text-anchor="middle" x="3571" y="-889.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-857.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is code, write a footer, newline,</text>
<text text-anchor="middle" x="3571" y="-842.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; and prose</text>
<text text-anchor="middle" x="3571" y="-827.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif (blocks[i &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="3571" y="-811.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="3571" y="-796.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;\n&quot; .. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-764.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding line is blank and before that is </text>
<text text-anchor="middle" x="3571" y="-749.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; nothing or more prose, write blanks, then prose.</text>
<text text-anchor="middle" x="3571" y="-734.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="3571" y="-718.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="3571" y="-703.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="3571" y="-671.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="3571" y="-656.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on prose in catLines&quot;)</text>
<text text-anchor="middle" x="3571" y="-641.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-625.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="3571" y="-594.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-578.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[#blocks].id == &quot;code&quot; or</text>
<text text-anchor="middle" x="3571" y="-563.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[#blocks].id == &quot;blank&quot; </text>
<text text-anchor="middle" x="3571" y="-548.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and blocks[#blocks &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="3571" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="3571" y="-517.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3571" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Note that there may be a final block of blank lines which we are</text>
<text text-anchor="middle" x="3571" y="-470.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; happy to simply drop. </text>
<text text-anchor="middle" x="3571" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase, linum</text>
<text text-anchor="middle" x="3571" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_37&#45;&gt;leaf_38 -->
<g id="edge38" class="edge">
<title>codeblock_37&#45;&gt;leaf_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3435.7566,-1916.1614C3442.0644,-1874.8771 3458.5057,-1767.2699 3477.8441,-1640.7011"/>
<polygon fill="#000000" stroke="#000000" points="3481.3107,-1641.1851 3479.3613,-1630.7712 3474.391,-1640.1278 3481.3107,-1641.1851"/>
</g>
<!-- prose_45 -->
<g id="node46" class="node">
<title>prose_45</title>
<ellipse fill="none" stroke="#000000" cx="4283" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4283" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_40&#45;&gt;prose_45 -->
<g id="edge45" class="edge">
<title>block_40&#45;&gt;prose_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4399.9779,-2237.5916C4379.2123,-2183.7347 4318.016,-2025.0191 4293.4151,-1961.2154"/>
<polygon fill="#000000" stroke="#000000" points="4296.6561,-1959.8921 4289.7928,-1951.8208 4290.1248,-1962.4104 4296.6561,-1959.8921"/>
</g>
<!-- prose_47 -->
<g id="node48" class="node">
<title>prose_47</title>
<ellipse fill="none" stroke="#000000" cx="4509" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4509" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_41&#45;&gt;prose_47 -->
<g id="edge47" class="edge">
<title>block_41&#45;&gt;prose_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4553.3384,-2237.5916C4545.5183,-2184.082 4522.5707,-2027.0614 4513.1297,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="4516.5418,-1961.6043 4511.6324,-1952.2156 4509.6153,-1962.6166 4516.5418,-1961.6043"/>
</g>
<!-- prose_49 -->
<g id="node50" class="node">
<title>prose_49</title>
<ellipse fill="none" stroke="#000000" cx="4824" cy="-1934.2032" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4824" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_42&#45;&gt;prose_49 -->
<g id="edge49" class="edge">
<title>block_42&#45;&gt;prose_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4801.3591,-2237.5916C4805.3524,-2184.082 4817.0703,-2027.0614 4821.8912,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="4825.4018,-1962.4483 4822.6558,-1952.2156 4818.4212,-1961.9273 4825.4018,-1962.4483"/>
</g>
<!-- codeblock_51 -->
<g id="node52" class="node">
<title>codeblock_51</title>
<ellipse fill="none" stroke="#000000" cx="5083" cy="-1934.2032" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="5083" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 215&#45;243</text>
</g>
<!-- block_43&#45;&gt;codeblock_51 -->
<g id="edge51" class="edge">
<title>block_43&#45;&gt;codeblock_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5014.134,-2237.5916C5026.3052,-2183.9714 5062.0695,-2026.4121 5076.6763,-1962.0621"/>
<polygon fill="#000000" stroke="#000000" points="5080.1109,-1962.7423 5078.9114,-1952.2156 5073.2845,-1961.1927 5080.1109,-1962.7423"/>
</g>
<!-- header_53 -->
<g id="node54" class="node">
<title>header_53</title>
<ellipse fill="none" stroke="#000000" cx="5389" cy="-1934.2032" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="5389" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Constructor</text>
</g>
<!-- section_44&#45;&gt;header_53 -->
<g id="edge53" class="edge">
<title>section_44&#45;&gt;header_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5508.9957,-2239.3738C5493.971,-2230.1813 5476.9922,-2217.4153 5466,-2201.8037 5412.8634,-2126.3365 5396.1568,-2014.5968 5391.0965,-1962.6613"/>
<polygon fill="#000000" stroke="#000000" points="5394.5663,-1962.1674 5390.1846,-1952.5211 5387.5945,-1962.7945 5394.5663,-1962.1674"/>
</g>
<!-- block_54 -->
<g id="node55" class="node">
<title>block_54</title>
<ellipse fill="none" stroke="#000000" cx="5541" cy="-1934.2032" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5541" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 246&#45;250</text>
</g>
<!-- section_44&#45;&gt;block_54 -->
<g id="edge54" class="edge">
<title>section_44&#45;&gt;block_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5541,-2237.5916C5541,-2184.082 5541,-2027.0614 5541,-1962.4613"/>
<polygon fill="#000000" stroke="#000000" points="5544.5001,-1962.2155 5541,-1952.2156 5537.5001,-1962.2156 5544.5001,-1962.2155"/>
</g>
<!-- block_55 -->
<g id="node56" class="node">
<title>block_55</title>
<ellipse fill="none" stroke="#000000" cx="5690" cy="-1934.2032" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="5690" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 251&#45;262</text>
</g>
<!-- section_44&#45;&gt;block_55 -->
<g id="edge55" class="edge">
<title>section_44&#45;&gt;block_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5573.0741,-2239.4227C5588.1159,-2230.2421 5605.089,-2217.4721 5616,-2201.8037 5668.5897,-2126.2832 5683.8966,-2014.5697 5688.2805,-1962.651"/>
<polygon fill="#000000" stroke="#000000" points="5691.7829,-1962.7531 5689.0597,-1952.5142 5684.8035,-1962.2165 5691.7829,-1962.7531"/>
</g>
<!-- block_56 -->
<g id="node57" class="node">
<title>block_56</title>
<ellipse fill="none" stroke="#000000" cx="6023" cy="-1934.2032" rx="65.8274" ry="18"/>
<text text-anchor="middle" x="6023" y="-1930.0032" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">block 263&#45;290</text>
</g>
<!-- section_44&#45;&gt;block_56 -->
<g id="edge56" class="edge">
<title>section_44&#45;&gt;block_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5611.3939,-2249.1541C5657.522,-2242.3915 5717.7901,-2228.8411 5765,-2201.8037 5875.0734,-2138.7638 5968.214,-2014.7721 6005.5332,-1960.5899"/>
<polygon fill="#000000" stroke="#000000" points="6008.5027,-1962.4476 6011.2402,-1952.2126 6002.7175,-1958.5065 6008.5027,-1962.4476"/>
</g>
<!-- leaf_46 -->
<g id="node47" class="node">
<title>leaf_46</title>
<polygon fill="none" stroke="#c0c0c0" points="4324,-1050.9038 3874,-1050.9038 3874,-1011.0996 4324,-1011.0996 4324,-1050.9038"/>
<text text-anchor="middle" x="4099" y="-1019.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> This takes a source file and inverts it into Grimoire format.</text>
</g>
<!-- prose_45&#45;&gt;leaf_46 -->
<g id="edge46" class="edge">
<title>prose_45&#45;&gt;leaf_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4279.3245,-1916.1614C4256.4936,-1804.0909 4134.0973,-1203.2839 4105.143,-1061.1557"/>
<polygon fill="#000000" stroke="#000000" points="4108.4995,-1060.0982 4103.0737,-1050.9982 4101.6404,-1061.4956 4108.4995,-1060.0982"/>
</g>
<!-- leaf_48 -->
<g id="node49" class="node">
<title>leaf_48</title>
<polygon fill="none" stroke="#c0c0c0" points="4652,-1049.0017 4342,-1049.0017 4342,-1013.0017 4652,-1013.0017 4652,-1049.0017"/>
<text text-anchor="middle" x="4497" y="-1027.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; str: The source file as a single string</text>
</g>
<!-- prose_47&#45;&gt;leaf_48 -->
<g id="edge48" class="edge">
<title>prose_47&#45;&gt;leaf_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4508.7603,-1916.1614C4507.2648,-1803.598 4499.2186,-1197.9898 4497.3761,-1059.3072"/>
<polygon fill="#000000" stroke="#000000" points="4500.8729,-1059.0391 4497.2403,-1049.0865 4493.8735,-1059.1321 4500.8729,-1059.0391"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="5001.5,-1050.9038 4670.5,-1050.9038 4670.5,-1011.0996 5001.5,-1011.0996 5001.5,-1050.9038"/>
<text text-anchor="middle" x="4836" y="-1035.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: The Grimoire document as a string</text>
</g>
<!-- prose_49&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>prose_49&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4824.2397,-1916.1614C4825.7287,-1804.0909 4833.711,-1203.2839 4835.5994,-1061.1557"/>
<polygon fill="#000000" stroke="#000000" points="4839.1011,-1061.0438 4835.7343,-1050.9982 4832.1017,-1060.9508 4839.1011,-1061.0438"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="5490.5,-1243.4027 5019.5,-1243.4027 5019.5,-818.6007 5490.5,-818.6007 5490.5,-1243.4027"/>
<text text-anchor="middle" x="5255" y="-1228.0021" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert(inverter, str)</text>
<text text-anchor="middle" x="5255" y="-1212.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local blocks = {}</text>
<text text-anchor="middle" x="5255" y="-1197.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="5255" y="-1181.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = nil</text>
<text text-anchor="middle" x="5255" y="-1166.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, line in ipairs(epeg.split(str, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="5255" y="-1151.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="5255" y="-1135.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;line = inverter:filter(line)</text>
<text text-anchor="middle" x="5255" y="-1120.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; each line is either comment, blank or code.</text>
<text text-anchor="middle" x="5255" y="-1104.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local this_block = inverter:sortLine(latest, line)</text>
<text text-anchor="middle" x="5255" y="-1089.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if this_block ~= latest then</text>
<text text-anchor="middle" x="5255" y="-1074.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blocks[#blocks + 1] = this_block</text>
<text text-anchor="middle" x="5255" y="-1058.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = this_block</text>
<text text-anchor="middle" x="5255" y="-1043.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5255" y="-1027.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5255" y="-1012.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local new_linum = 0</text>
<text text-anchor="middle" x="5255" y="-997.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;&#45;[[ This entire check should be wrapped in a utility assert</text>
<text text-anchor="middle" x="5255" y="-981.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(blocks) do</text>
<text text-anchor="middle" x="5255" y="-966.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for __, line in ipairs(v) do</text>
<text text-anchor="middle" x="5255" y="-950.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;new_linum = new_linum + 1</text>
<text text-anchor="middle" x="5255" y="-935.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5255" y="-920.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5255" y="-904.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="5255" y="-889.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(linum == new_linum)</text>
<text text-anchor="middle" x="5255" y="-857.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase, cat_linum = inverter:catBlocks(blocks)</text>
<text text-anchor="middle" x="5255" y="-842.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="5255" y="-827.0013" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_51&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>codeblock_51&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5086.4358,-1916.1614C5102.1191,-1833.8055 5168.0627,-1487.5241 5212.6698,-1253.2847"/>
<polygon fill="#000000" stroke="#000000" points="5216.146,-1253.7399 5214.5786,-1243.2616 5209.2695,-1252.4303 5216.146,-1253.7399"/>
</g>
<!-- prose_57 -->
<g id="node58" class="node">
<title>prose_57</title>
<ellipse fill="none" stroke="#000000" cx="5541" cy="-1031.0017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5541" y="-1026.8017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_54&#45;&gt;prose_57 -->
<g id="edge57" class="edge">
<title>block_54&#45;&gt;prose_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5541,-1916.1614C5541,-1803.598 5541,-1197.9898 5541,-1059.3072"/>
<polygon fill="#000000" stroke="#000000" points="5544.5001,-1059.0864 5541,-1049.0865 5537.5001,-1059.0865 5544.5001,-1059.0864"/>
</g>
<!-- prose_59 -->
<g id="node60" class="node">
<title>prose_59</title>
<ellipse fill="none" stroke="#000000" cx="5690" cy="-1031.0017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="5690" y="-1026.8017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- block_55&#45;&gt;prose_59 -->
<g id="edge59" class="edge">
<title>block_55&#45;&gt;prose_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5690,-1916.1614C5690,-1803.598 5690,-1197.9898 5690,-1059.3072"/>
<polygon fill="#000000" stroke="#000000" points="5693.5001,-1059.0864 5690,-1049.0865 5686.5001,-1059.0865 5693.5001,-1059.0864"/>
</g>
<!-- codeblock_61 -->
<g id="node62" class="node">
<title>codeblock_61</title>
<ellipse fill="none" stroke="#000000" cx="6115" cy="-1031.0017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6115" y="-1026.8017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 263&#45;289</text>
</g>
<!-- block_56&#45;&gt;codeblock_61 -->
<g id="edge61" class="edge">
<title>block_56&#45;&gt;codeblock_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6024.8377,-1916.1614C6036.3034,-1803.598 6097.9906,-1197.9898 6112.1168,-1059.3072"/>
<polygon fill="#000000" stroke="#000000" points="6115.6264,-1059.3897 6113.1579,-1049.0865 6108.6625,-1058.6803 6115.6264,-1059.3897"/>
</g>
<!-- leaf_58 -->
<g id="node59" class="node">
<title>leaf_58</title>
<polygon fill="none" stroke="#c0c0c0" points="5418.5,-225.0008 5199.5,-225.0008 5199.5,-170.3999 5418.5,-170.3999 5418.5,-225.0008"/>
<text text-anchor="middle" x="5309" y="-209.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5309" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Currently minimum&#45;viable. </text>
</g>
<!-- prose_57&#45;&gt;leaf_58 -->
<g id="edge58" class="edge">
<title>prose_57&#45;&gt;leaf_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5545.5616,-1013.0871C5564.1777,-935.6771 5627.4978,-625.099 5499,-431.4007 5479.4415,-401.9181 5453.9086,-419.4942 5428,-395.4007 5378.3619,-349.2399 5342.3547,-277.7328 5323.6443,-234.5501"/>
<polygon fill="#000000" stroke="#000000" points="5326.8296,-233.0965 5319.6975,-225.2616 5320.3871,-235.834 5326.8296,-233.0965"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="5943,-286.7006 5437,-286.7006 5437,-108.7 5943,-108.7 5943,-286.7006"/>
<text text-anchor="middle" x="5690" y="-271.5005" font-family="Inconsolata" font-size="14.00" fill="#000000"> Long term, lang can be other than nil, which gets you lua.</text>
<text text-anchor="middle" x="5690" y="-256.1005" font-family="Inconsolata" font-size="14.00" fill="#000000"> A string will return an inverter.lang of that string if such</text>
<text text-anchor="middle" x="5690" y="-240.7004" font-family="Inconsolata" font-size="14.00" fill="#000000"> exists.</text>
<text text-anchor="middle" x="5690" y="-225.3004" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5690" y="-209.9004" font-family="Inconsolata" font-size="14.00" fill="#000000"> A table will configure a lang, memoize it if it&#39;s new, and return</text>
<text text-anchor="middle" x="5690" y="-194.5003" font-family="Inconsolata" font-size="14.00" fill="#000000"> same. If one of that name already exists, memoization isn&#39;t repeated,</text>
<text text-anchor="middle" x="5690" y="-179.1003" font-family="Inconsolata" font-size="14.00" fill="#000000"> so for a default like lua or python, making a custom python inverter</text>
<text text-anchor="middle" x="5690" y="-163.7003" font-family="Inconsolata" font-size="14.00" fill="#000000"> wont affect the result of subsequent `invert(&quot;python&quot;)` calls. </text>
<text text-anchor="middle" x="5690" y="-148.3002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="5690" y="-132.9002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: an Inverter</text>
</g>
<!-- prose_59&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>prose_59&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5690,-1012.8221C5690,-919.7123 5690,-493.0284 5690,-296.8672"/>
<polygon fill="#000000" stroke="#000000" points="5693.5001,-296.8473 5690,-286.8473 5686.5001,-296.8473 5693.5001,-296.8473"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="6453,-395.6012 5961,-395.6012 5961,.2005 6453,.2005 6453,-395.6012"/>
<text text-anchor="middle" x="6207" y="-380.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Inverter, lang)</text>
<text text-anchor="middle" x="6207" y="-364.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local inverter = setmetatable({}, Inv)</text>
<text text-anchor="middle" x="6207" y="-349.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if lang and lang ~= &quot;lua&quot; then</text>
<text text-anchor="middle" x="6207" y="-334.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;configs not yet implemented&quot;)</text>
<text text-anchor="middle" x="6207" y="-318.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6207" y="-303.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return inverter</text>
<text text-anchor="middle" x="6207" y="-287.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6207" y="-256.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local inv_lua = new()</text>
<text text-anchor="middle" x="6207" y="-225.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.getLang(inverter, key)</text>
<text text-anchor="middle" x="6207" y="-209.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if key == &quot;lua&quot; then</text>
<text text-anchor="middle" x="6207" y="-194.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inv_lua</text>
<text text-anchor="middle" x="6207" y="-178.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6207" y="-163.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter.langs[key] then </text>
<text text-anchor="middle" x="6207" y="-148.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inverter.langs[key]</text>
<text text-anchor="middle" x="6207" y="-132.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6207" y="-117.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;No inverter found for language &quot; .. tostring(key))</text>
<text text-anchor="middle" x="6207" y="-101.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6207" y="-86.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="6207" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.__call = invert</text>
<text text-anchor="middle" x="6207" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.invert = invert</text>
<text text-anchor="middle" x="6207" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(inv, new)</text>
</g>
<!-- codeblock_61&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>codeblock_61&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6117.0071,-1012.8221C6125.6531,-934.5097 6160.3516,-620.2242 6184.0476,-405.5942"/>
<polygon fill="#000000" stroke="#000000" points="6187.549,-405.7741 6185.1676,-395.4504 6180.5912,-405.0059 6187.549,-405.7741"/>
</g>
</g>
</svg>