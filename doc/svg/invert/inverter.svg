<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="5132pt" height="2609pt"
 viewBox="0.00 0.00 5132.00 2609.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2605.0039)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2605.0039 5128,-2605.0039 5128,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2583.0039" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1043" y="-2578.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 290</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2511.0039" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1043" y="-2506.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;205</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1043,-2564.8353C1043,-2557.1349 1043,-2547.9782 1043,-2539.4205"/>
<polygon fill="#000000" stroke="#000000" points="1046.5001,-2539.4171 1043,-2529.4172 1039.5001,-2539.4172 1046.5001,-2539.4171"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="489" cy="-2439.0039" rx="83.677" ry="18"/>
<text text-anchor="middle" x="489" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Inverter module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M983.4493,-2503.2645C883.8913,-2490.3255 683.4982,-2464.2816 570.7908,-2449.6338"/>
<polygon fill="#000000" stroke="#000000" points="571.1985,-2446.1574 560.8307,-2448.3393 570.2962,-2453.099 571.1985,-2446.1574"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="674" cy="-2439.0039" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="674" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M985.4503,-2502.3272C924.2712,-2492.7355 824.8413,-2476.0927 740,-2457.0039 731.0761,-2454.9961 721.5481,-2452.5672 712.5873,-2450.1524"/>
<polygon fill="#000000" stroke="#000000" points="713.3436,-2446.7305 702.7736,-2447.4551 711.4884,-2453.4802 713.3436,-2446.7305"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="781" cy="-2439.0039" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="781" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M993.1478,-2499.0686C950.8478,-2488.7012 888.6594,-2472.8927 835,-2457.0039 829.5516,-2455.3906 823.8265,-2453.594 818.2238,-2451.7777"/>
<polygon fill="#000000" stroke="#000000" points="818.9505,-2448.3319 808.3574,-2448.5226 816.7573,-2454.9795 818.9505,-2448.3319"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="917" cy="-2439.0039" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="917" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 9&#45;24</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1014.4086,-2494.666C996.7326,-2484.5654 973.8435,-2471.4859 954.695,-2460.5439"/>
<polygon fill="#000000" stroke="#000000" points="956.3333,-2457.449 945.9144,-2455.5264 952.8603,-2463.5267 956.3333,-2457.449"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1075" cy="-2439.0039" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1075" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1051.075,-2492.8353C1054.6646,-2484.7586 1058.9662,-2475.08 1062.9259,-2466.1707"/>
<polygon fill="#000000" stroke="#000000" points="1066.1754,-2467.4769 1067.0385,-2456.9173 1059.7787,-2464.6339 1066.1754,-2467.4769"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1316" cy="-2439.0039" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1316" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 29&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1090.553,-2498.4625C1136.0015,-2486.476 1204.7516,-2468.3441 1254.3791,-2455.2556"/>
<polygon fill="#000000" stroke="#000000" points="1255.5731,-2458.5604 1264.3499,-2452.6259 1253.788,-2451.7919 1255.5731,-2458.5604"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2056" cy="-2439.0039" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2056" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;205</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1106.7514,-2506.4727C1284.242,-2493.8574 1783.7524,-2458.3542 1977.6655,-2444.5716"/>
<polygon fill="#000000" stroke="#000000" points="1978.0506,-2448.0532 1987.7772,-2443.8529 1977.5542,-2441.0708 1978.0506,-2448.0532"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3543" cy="-2439.0039" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3543" y="-2434.8039" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 206&#45;245</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1108.5839,-2509.1151C1454.7007,-2499.1469 3067.8027,-2452.6896 3457.9025,-2441.4547"/>
<polygon fill="#000000" stroke="#000000" points="3458.0943,-2444.9507 3467.9894,-2441.1642 3457.8927,-2437.9536 3458.0943,-2444.9507"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="515,-2135.4035 373,-2135.4035 373,-2099.4035 515,-2099.4035 515,-2135.4035"/>
<text text-anchor="middle" x="444" y="-2113.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Inverter module</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M486.4517,-2420.7918C478.9643,-2367.2822 456.9932,-2210.2616 447.954,-2145.6615"/>
<polygon fill="#000000" stroke="#000000" points="451.3724,-2144.8343 446.5204,-2135.4158 444.44,-2145.8044 451.3724,-2144.8343"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="560" cy="-2117.4035" rx="27" ry="18"/>
<text text-anchor="middle" x="560" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M648.2633,-2428.0924C630.5585,-2419.1783 608.1282,-2404.8083 596,-2385.0039 549.2599,-2308.6813 552.2127,-2197.3621 556.7348,-2145.6957"/>
<polygon fill="#000000" stroke="#000000" points="560.2312,-2145.8997 557.7062,-2135.6101 553.2635,-2145.2285 560.2312,-2145.8997"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="632" cy="-2117.4035" rx="27" ry="18"/>
<text text-anchor="middle" x="632" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M750.6089,-2432.9416C724.3591,-2426.0243 687.6459,-2411.9847 668,-2385.0039 614.9507,-2312.1482 621.2772,-2197.796 627.717,-2145.3648"/>
<polygon fill="#000000" stroke="#000000" points="631.1877,-2145.8167 629.0303,-2135.4439 624.2482,-2144.8981 631.1877,-2145.8167"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1092.5,-2230.5041 677.5,-2230.5041 677.5,-2004.3028 1092.5,-2004.3028 1092.5,-2230.5041"/>
<text text-anchor="middle" x="885" y="-2215.5036" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="885" y="-2184.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;epeg&quot;</text>
<text text-anchor="middle" x="885" y="-2152.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="885" y="-2121.3035" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="885" y="-2089.9035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isBlank(line)</text>
<text text-anchor="middle" x="885" y="-2074.5034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local all_blanks = L.match((m.__TAB__ + m._)^0, line)</text>
<text text-anchor="middle" x="885" y="-2059.1034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (all_blanks == (#line + 1) or line == &quot;&quot;)</text>
<text text-anchor="middle" x="885" y="-2043.7034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="885" y="-2012.3034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Inv, inv = u.inherit()</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_5&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M915.1879,-2420.7918C911.7539,-2386.2804 904.0356,-2308.7114 897.2633,-2240.6501"/>
<polygon fill="#000000" stroke="#000000" points="900.7447,-2240.2878 896.2716,-2230.6835 893.7791,-2240.9809 900.7447,-2240.2878"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1138" cy="-2117.4035" rx="27" ry="18"/>
<text text-anchor="middle" x="1138" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_6&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.1144,-2421.5669C1090.6525,-2411.2546 1097.1525,-2397.7546 1101,-2385.0039 1126.507,-2300.4729 1134.5084,-2195.5489 1136.9569,-2145.9409"/>
<polygon fill="#000000" stroke="#000000" points="1140.4661,-2145.8155 1137.4223,-2135.6673 1133.4732,-2145.4986 1140.4661,-2145.8155"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1675,-2385.1044 1183,-2385.1044 1183,-1849.7026 1675,-1849.7026 1675,-2385.1044"/>
<text text-anchor="middle" x="1429" y="-2369.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.lang = &quot;lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2354.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.extension = &quot;.lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2339.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment = L.P&quot;&#45;&#45;&quot;</text>
<text text-anchor="middle" x="1429" y="-2323.6038" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment_len = 3</text>
<text text-anchor="middle" x="1429" y="-2308.2038" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.tab_to_space = &quot; &#160;&#160;&quot;</text>
<text text-anchor="middle" x="1429" y="-2276.8037" font-family="Inconsolata" font-size="14.00" fill="#000000">local lang_config = { lua = { lang = &quot;lua&quot;, </text>
<text text-anchor="middle" x="1429" y="-2261.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;extension = &quot;.lua&quot;,</text>
<text text-anchor="middle" x="1429" y="-2246.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment = L.P&quot;&#45;&#45;&quot;,</text>
<text text-anchor="middle" x="1429" y="-2230.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment_len = 3,</text>
<text text-anchor="middle" x="1429" y="-2215.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tab_to_space = &quot; &#160;&#160;&quot;}}</text>
<text text-anchor="middle" x="1429" y="-2183.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_header(inverter)</text>
<text text-anchor="middle" x="1429" y="-2168.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#!&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2153.0035" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2121.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_footer(inverter)</text>
<text text-anchor="middle" x="1429" y="-2106.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#/&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2090.8034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2059.4034" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.filter(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-2044.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if isBlank(line) then</text>
<text text-anchor="middle" x="1429" y="-2028.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1429" y="-2013.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1429" y="-1997.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return line:gsub(&quot;\t&quot;, inverter.tab_to_space):gsub(&quot;\r&quot;, &quot;&quot;)</text>
<text text-anchor="middle" x="1429" y="-1982.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1429" y="-1967.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat_lines() end &#45;&#45;stub out</text>
<text text-anchor="middle" x="1429" y="-1904.2032" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.matchComment(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-1888.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (L.match(inverter.comment * m._, line) </text>
<text text-anchor="middle" x="1429" y="-1873.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or (L.match(inverter.comment, line) and #line == 2))</text>
<text text-anchor="middle" x="1429" y="-1858.0031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1322.3991,-2420.7918C1324.8656,-2413.7722 1327.958,-2404.9713 1331.5208,-2394.8313"/>
<polygon fill="#000000" stroke="#000000" points="1334.9077,-2395.7502 1334.9206,-2385.1554 1328.3035,-2393.4297 1334.9077,-2395.7502"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1775" cy="-2117.4035" rx="82.2492" ry="18"/>
<text text-anchor="middle" x="1775" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : matchLineType</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.032,-2428.5384C1949.751,-2418.7491 1885.9409,-2402.9696 1867,-2385.0039 1798.1396,-2319.6891 1780.8165,-2200.5563 1776.4612,-2146.0297"/>
<polygon fill="#000000" stroke="#000000" points="1779.9289,-2145.4473 1775.7331,-2135.7187 1772.9463,-2145.9404 1779.9289,-2145.4473"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1908" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1908" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.7175,-2425.7461C1986.4744,-2417.4587 1963.1759,-2404.5398 1949,-2385.0039 1896.0415,-2312.0216 1899.4328,-2198.1336 1904.4574,-2145.6415"/>
<polygon fill="#000000" stroke="#000000" points="1907.9684,-2145.7205 1905.5347,-2135.409 1901.0069,-2144.9875 1907.9684,-2145.7205"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1990" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1990" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2046.1137,-2421.0127C2040.8722,-2410.743 2034.7572,-2397.4669 2031,-2385.0039 2005.4599,-2300.286 1995.3109,-2195.4499 1991.7281,-2145.9016"/>
<polygon fill="#000000" stroke="#000000" points="1995.2005,-2145.3778 1991.0241,-2135.6409 1988.2169,-2145.8571 1995.2005,-2145.3778"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2122" cy="-2117.4035" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="2122" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;112</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2059.7375,-2420.7918C2070.7417,-2367.1717 2103.0766,-2209.6123 2116.2827,-2145.2623"/>
<polygon fill="#000000" stroke="#000000" points="2119.7216,-2145.9153 2118.3034,-2135.4158 2112.8645,-2144.508 2119.7216,-2145.9153"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2318" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2318" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2117.9819,-2430.3741C2149.8553,-2423.0663 2187.2976,-2409.633 2213,-2385.0039 2282.6138,-2318.2971 2306.9566,-2199.8733 2314.7111,-2145.7783"/>
<polygon fill="#000000" stroke="#000000" points="2318.2223,-2145.9292 2316.087,-2135.5518 2311.2848,-2144.9958 2318.2223,-2145.9292"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2124.9534,-2435.138C2203.578,-2429.3213 2325.5718,-2415.5529 2359,-2385.0039 2427.9853,-2321.9606 2434.3305,-2200.7215 2433.3627,-2145.7459"/>
<polygon fill="#000000" stroke="#000000" points="2436.8594,-2145.572 2433.088,-2135.6711 2429.862,-2145.7629 2436.8594,-2145.572"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2682" cy="-2117.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2682" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 125&#45;203</text>
</g>
<!-- section_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2125.9207,-2436.3252C2228.873,-2431.3219 2415.2932,-2417.9114 2473,-2385.0039 2573.7209,-2327.5675 2643.0462,-2200.4209 2669.7624,-2144.5896"/>
<polygon fill="#000000" stroke="#000000" points="2673.026,-2145.8739 2674.1114,-2135.3348 2666.6906,-2142.8968 2673.026,-2145.8739"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3327" cy="-2117.4035" rx="83.6081" ry="18"/>
<text text-anchor="middle" x="3327" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Grym:invert(str)</text>
</g>
<!-- section_9&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_9&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3489.6573,-2426.1535C3465.5651,-2417.9375 3438.436,-2404.9613 3420,-2385.0039 3355.6807,-2315.3767 3335.4965,-2198.9229 3329.448,-2145.6075"/>
<polygon fill="#000000" stroke="#000000" points="3332.9143,-2145.1031 3328.3893,-2135.5232 3325.9526,-2145.834 3332.9143,-2145.1031"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3461" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3461" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_9&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3526.0806,-2421.4584C3517.4909,-2411.5331 3507.6936,-2398.4437 3502,-2385.0039 3467.241,-2302.9551 3461.4789,-2195.6655 3460.8284,-2145.5215"/>
<polygon fill="#000000" stroke="#000000" points="3464.3279,-2145.4144 3460.7584,-2135.439 3457.3281,-2145.4631 3464.3279,-2145.4144"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3543" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3543" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_9&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3543,-2420.7918C3543,-2367.2822 3543,-2210.2616 3543,-2145.6615"/>
<polygon fill="#000000" stroke="#000000" points="3546.5001,-2145.4158 3543,-2135.4158 3539.5001,-2145.4158 3546.5001,-2145.4158"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3625" cy="-2117.4035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3625" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_9&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3559.9194,-2421.4584C3568.5091,-2411.5331 3578.3064,-2398.4437 3584,-2385.0039 3618.759,-2302.9551 3624.5211,-2195.6655 3625.1716,-2145.5215"/>
<polygon fill="#000000" stroke="#000000" points="3628.6719,-2145.4631 3625.2416,-2135.439 3621.6721,-2145.4144 3628.6719,-2145.4631"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3834" cy="-2117.4035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3834" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 215&#45;243</text>
</g>
<!-- section_9&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_9&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3591.716,-2425.1715C3615.9884,-2416.5114 3644.6355,-2403.4394 3666,-2385.0039 3746.3732,-2315.6497 3801.237,-2198.2248 3823.2278,-2145.0437"/>
<polygon fill="#000000" stroke="#000000" points="3826.5465,-2146.1739 3827.0681,-2135.5919 3820.0613,-2143.5389 3826.5465,-2146.1739"/>
</g>
<!-- section_42 -->
<g id="node43" class="node">
<title>section_42</title>
<ellipse fill="none" stroke="#000000" cx="4343" cy="-2117.4035" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4343" y="-2113.2035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 246&#45;290</text>
</g>
<!-- section_9&#45;&gt;section_42 -->
<g id="edge42" class="edge">
<title>section_9&#45;&gt;section_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3613.9365,-2432.8169C3709.3525,-2423.8603 3873.5849,-2406.0318 3930,-2385.0039 4090.1288,-2325.3183 4252.1563,-2195.5383 4315.3616,-2141.6334"/>
<polygon fill="#000000" stroke="#000000" points="4317.9611,-2144.0146 4323.2682,-2134.8448 4313.4011,-2138.7036 4317.9611,-2144.0146"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1241.5024 0,-1241.5024 0,-1186.9015 450,-1186.9015 450,-1241.5024"/>
<text text-anchor="middle" x="225" y="-1210.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A work in progress, which also works well enough to invert,</text>
<text text-anchor="middle" x="225" y="-1195.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> I may hope, the whole of grym including this file.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M562.7375,-2099.2209C568.6845,-2053.0169 578.2105,-1929.1503 524,-1849.803 505.3707,-1822.5355 480.7392,-1838.6622 459,-1813.803 306.43,-1639.3364 247.4816,-1353.9861 230.6006,-1251.9495"/>
<polygon fill="#000000" stroke="#000000" points="234.0141,-1251.1323 228.9642,-1241.8183 227.1036,-1252.2485 234.0141,-1251.1323"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="939.5,-1249.5023 468.5,-1249.5023 468.5,-1178.9016 939.5,-1178.9016 939.5,-1249.5023"/>
<text text-anchor="middle" x="704" y="-1218.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> Hence I&#39;m eager to use it and then document it from the grimoire</text>
<text text-anchor="middle" x="704" y="-1203.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> side.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M633.4382,-2099.3617C642.0782,-1990.9779 687.1574,-1425.4837 700.3621,-1259.8377"/>
<polygon fill="#000000" stroke="#000000" points="703.8792,-1259.7608 701.185,-1249.5142 696.9014,-1259.2044 703.8792,-1259.7608"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1247.5,-1234.104 1028.5,-1234.104 1028.5,-1194.2999 1247.5,-1194.2999 1247.5,-1234.104"/>
<text text-anchor="middle" x="1138" y="-1202.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> The default language is Lua.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1138,-2099.3617C1138,-1987.2912 1138,-1386.4842 1138,-1244.356"/>
<polygon fill="#000000" stroke="#000000" points="1141.5001,-1244.1984 1138,-1234.1984 1134.5001,-1244.1985 1141.5001,-1244.1984"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1719,-1232.202 1577,-1232.202 1577,-1196.202 1719,-1196.202 1719,-1232.202"/>
<text text-anchor="middle" x="1648" y="-1210.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** matchLineType</text>
</g>
<!-- header_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>header_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1772.0597,-2099.2866C1764.4536,-2052.2387 1743.6327,-1922.2885 1728,-1813.803 1696.3269,-1594.0025 1662.3957,-1328.2189 1651.5465,-1242.381"/>
<polygon fill="#000000" stroke="#000000" points="1655.008,-1241.8553 1650.2832,-1232.3724 1648.0632,-1242.732 1655.008,-1241.8553"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1764" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="1764" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_20&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2726,-2099.1582C1915.0494,-2052.8073 1921.509,-1928.6243 1866,-1849.803 1846.7611,-1822.4843 1817.91,-1842.0108 1800,-1813.803 1738.859,-1717.5076 1755.9233,-1347.9497 1762.1822,-1242.4645"/>
<polygon fill="#000000" stroke="#000000" points="1765.6879,-1242.4756 1762.8021,-1232.2813 1758.7008,-1242.0501 1765.6879,-1242.4756"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="1836" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="1836" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_21&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1992.6016,-2099.2974C1998.2604,-2052.7423 2006.8932,-1927.1157 1949,-1849.803 1926.3562,-1819.5637 1893.2283,-1845.0523 1872,-1813.803 1807.9033,-1719.4492 1827.0634,-1348.5146 1833.9945,-1242.5877"/>
<polygon fill="#000000" stroke="#000000" points="1837.5032,-1242.5732 1834.6802,-1232.3614 1830.5189,-1242.1048 1837.5032,-1242.5732"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2331,-1473.1031 1881,-1473.1031 1881,-955.3008 2331,-955.3008 2331,-1473.1031"/>
<text text-anchor="middle" x="2106" y="-1457.7024" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.sortLine(inverter, latest, line)</text>
<text text-anchor="middle" x="2106" y="-1442.3024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = latest or {}</text>
<text text-anchor="middle" x="2106" y="-1410.9024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter:matchComment(line) then</text>
<text text-anchor="middle" x="2106" y="-1395.5024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose</text>
<text text-anchor="middle" x="2106" y="-1380.1023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;prose&quot; then</text>
<text text-anchor="middle" x="2106" y="-1364.7023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new prose block</text>
<text text-anchor="middle" x="2106" y="-1349.3023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;prose&quot;}</text>
<text text-anchor="middle" x="2106" y="-1333.9022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1318.5022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1303.1022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1287.7021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1272.3021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif isBlank(line) then</text>
<text text-anchor="middle" x="2106" y="-1256.9021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank line</text>
<text text-anchor="middle" x="2106" y="-1241.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;blank&quot; then</text>
<text text-anchor="middle" x="2106" y="-1226.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;blank&quot;}</text>
<text text-anchor="middle" x="2106" y="-1210.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1195.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1179.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1164.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1149.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1133.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code line</text>
<text text-anchor="middle" x="2106" y="-1118.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;code&quot; then</text>
<text text-anchor="middle" x="2106" y="-1102.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new code block</text>
<text text-anchor="middle" x="2106" y="-1087.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;code&quot; }</text>
<text text-anchor="middle" x="2106" y="-1072.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1056.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1041.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1025.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1010.5016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-979.1015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="2106" y="-963.7015" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2121.6804,-2099.3617C2120.3161,-2022.3444 2114.8628,-1714.5097 2110.7679,-1483.3477"/>
<polygon fill="#000000" stroke="#000000" points="2114.2628,-1483.0264 2110.5861,-1473.09 2107.2639,-1483.1505 2114.2628,-1483.0264"/>
</g>
<!-- raw_32 -->
<g id="node33" class="node">
<title>raw_32</title>
<ellipse fill="none" stroke="#000000" cx="2376" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="2376" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_32 -->
<g id="edge32" class="edge">
<title>prose_23&#45;&gt;raw_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2319.3925,-2099.2722C2322.9913,-2052.1901 2332.8211,-1922.1653 2340,-1813.803 2354.5771,-1593.7687 2369.6348,-1328.1376 2374.4335,-1242.3598"/>
<polygon fill="#000000" stroke="#000000" points="2377.9289,-1242.5379 2374.9921,-1232.3583 2370.9398,-1242.1475 2377.9289,-1242.5379"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="2448" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="2448" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_24&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2432.3196,-2099.3617C2434.3136,-1986.7983 2445.0418,-1381.1901 2447.4986,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="2451.0019,-1242.3472 2447.6796,-1232.2867 2444.003,-1242.2231 2451.0019,-1242.3472"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3062.5,-1813.9041 2493.5,-1813.9041 2493.5,-614.4998 3062.5,-614.4998 3062.5,-1813.9041"/>
<text text-anchor="middle" x="2778" y="-1798.603" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.catBlocks(inverter, blocks)</text>
<text text-anchor="middle" x="2778" y="-1783.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="2778" y="-1767.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function toLines(block) </text>
<text text-anchor="middle" x="2778" y="-1752.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1737.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for j = 1, #block do</text>
<text text-anchor="middle" x="2778" y="-1721.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="2778" y="-1706.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. block[j] .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2778" y="-1690.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1675.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2778" y="-1660.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1644.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1629.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[1].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1613.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1598.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1583.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;phrase = phrase .. toLines(blocks[1]) </text>
<text text-anchor="middle" x="2778" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #blocks do</text>
<text text-anchor="middle" x="2778" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1520.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1505.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write blanks and code</text>
<text text-anchor="middle" x="2778" y="-1490.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1474.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1459.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1427.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-1412.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose or nothing, write blanks, header, and code</text>
<text text-anchor="middle" x="2778" y="-1397.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1381.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-1366.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1])</text>
<text text-anchor="middle" x="2778" y="-1350.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1335.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1304.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is prose, write a blank line, </text>
<text text-anchor="middle" x="2778" y="-1288.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; header, and code. </text>
<text text-anchor="middle" x="2778" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1257.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. &quot;\n&quot; .. inverter:write_header() </text>
<text text-anchor="middle" x="2778" y="-1242.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1227.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-1211.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on code in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1180.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1149.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1134.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write footer, blanks, and prose</text>
<text text-anchor="middle" x="2778" y="-1118.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1103.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer() </text>
<text text-anchor="middle" x="2778" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is code, write a footer, newline,</text>
<text text-anchor="middle" x="2778" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; and prose</text>
<text text-anchor="middle" x="2778" y="-1010.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif (blocks[i &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-994.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-979.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;\n&quot; .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-948.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding line is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-932.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; nothing or more prose, write blanks, then prose.</text>
<text text-anchor="middle" x="2778" y="-917.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-901.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-886.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-855.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-839.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on prose in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-824.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="2778" y="-777.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-762.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[#blocks].id == &quot;code&quot; or</text>
<text text-anchor="middle" x="2778" y="-746.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[#blocks].id == &quot;blank&quot; </text>
<text text-anchor="middle" x="2778" y="-731.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and blocks[#blocks &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-669.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Note that there may be a final block of blank lines which we are</text>
<text text-anchor="middle" x="2778" y="-653.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; happy to simply drop. </text>
<text text-anchor="middle" x="2778" y="-638.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase, linum</text>
<text text-anchor="middle" x="2778" y="-622.8009" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_25&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2683.9176,-2099.3617C2688.3013,-2058.1187 2699.7202,-1950.6857 2713.1555,-1824.2818"/>
<polygon fill="#000000" stroke="#000000" points="2716.6747,-1824.2854 2714.2514,-1813.9714 2709.7139,-1823.5455 2716.6747,-1824.2854"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1610.5,-447.3014 1153.5,-447.3014 1153.5,-314.4998 1610.5,-314.4998 1610.5,-447.3014"/>
<text text-anchor="middle" x="1382" y="-399.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Matches a line by type (comment, code, or blank) and either</text>
<text text-anchor="middle" x="1382" y="-384.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> concatenates to an existing block of this type or starts a new</text>
<text text-anchor="middle" x="1382" y="-369.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> one if the latest is different.</text>
<text text-anchor="middle" x="1382" y="-353.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1382" y="-338.3005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: the latest block.</text>
<text text-anchor="middle" x="1382" y="-322.9005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line: line to be matched and added.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.5215,-1196.1774C1772.7207,-1106.4235 1800.1056,-708.3016 1728,-614.6009 1696.886,-574.1685 1663.5976,-603.3784 1619,-578.6009 1558.7829,-545.1456 1499.2757,-495.4322 1454.9521,-454.2277"/>
<polygon fill="#000000" stroke="#000000" points="1457.1057,-451.4492 1447.4149,-447.1667 1452.3199,-456.5578 1457.1057,-451.4492"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2043.5,-408.8021 1628.5,-408.8021 1628.5,-352.9991 2043.5,-352.9991 2043.5,-408.8021"/>
<text text-anchor="middle" x="1836" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the latest block, which may be created here.</text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1836,-1196.0223C1836,-1091.4158 1836,-565.7733 1836,-419.0101"/>
<polygon fill="#000000" stroke="#000000" points="1839.5001,-418.7161 1836,-408.7162 1832.5001,-418.7162 1839.5001,-418.7161"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2476.5,-400.8027 2061.5,-400.8027 2061.5,-360.9985 2476.5,-360.9985 2476.5,-400.8027"/>
<text text-anchor="middle" x="2269" y="-369.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> Takes blocks and concatenates them into a single string.</text>
</g>
<!-- raw_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.4569,-1195.8663C2377.9659,-1122.2098 2380.5921,-840.9379 2340,-614.6009 2326.4929,-539.2868 2296.7522,-454.0356 2280.3735,-410.274"/>
<polygon fill="#000000" stroke="#000000" points="2283.6125,-408.9441 2276.8033,-400.8272 2277.0646,-411.4188 2283.6125,-408.9441"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2973,-408.201 2495,-408.201 2495,-353.6002 2973,-353.6002 2973,-408.201"/>
<text text-anchor="middle" x="2734" y="-377.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> Also writes headers and footers, while doing its best to get the </text>
<text text-anchor="middle" x="2734" y="-361.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> spacing right.</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2444.4768,-1196.1137C2430.6588,-1120.491 2385.6,-823.873 2484,-614.6009 2526.0475,-525.1763 2618.9833,-453.3042 2678.9362,-413.9229"/>
<polygon fill="#000000" stroke="#000000" points="2681.0454,-416.7268 2687.5324,-408.3501 2677.2375,-410.8531 2681.0454,-416.7268"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3405,-1232.202 3249,-1232.202 3249,-1196.202 3405,-1196.202 3405,-1232.202"/>
<text text-anchor="middle" x="3327" y="-1210.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Grym:invert(str)</text>
</g>
<!-- header_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>header_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3327,-2099.3617C3327,-1986.7983 3327,-1381.1901 3327,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="3330.5001,-1242.2867 3327,-1232.2867 3323.5001,-1242.2868 3330.5001,-1242.2867"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3456" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="3456" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3460.9001,-2099.3617C3460.277,-1986.7983 3456.9244,-1381.1901 3456.1567,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="3459.6555,-1242.2672 3456.1001,-1232.2867 3452.6556,-1242.306 3459.6555,-1242.2672"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3545" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="3545" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_39&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_39&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3543.04,-2099.3617C3543.2892,-1986.7983 3544.6302,-1381.1901 3544.9373,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="3548.4377,-1242.2945 3544.96,-1232.2867 3541.4377,-1242.2789 3548.4377,-1242.2945"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3622" cy="-1214.202" rx="27" ry="18"/>
<text text-anchor="middle" x="3622" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_40&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3624.9401,-2099.3617C3624.5662,-1986.7983 3622.5547,-1381.1901 3622.094,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="3625.5934,-1242.275 3622.0601,-1232.2867 3618.5934,-1242.2983 3625.5934,-1242.275"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4138.5,-1426.603 3667.5,-1426.603 3667.5,-1001.801 4138.5,-1001.801 4138.5,-1426.603"/>
<text text-anchor="middle" x="3903" y="-1411.2024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert(inverter, str)</text>
<text text-anchor="middle" x="3903" y="-1395.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local blocks = {}</text>
<text text-anchor="middle" x="3903" y="-1380.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="3903" y="-1365.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = nil</text>
<text text-anchor="middle" x="3903" y="-1349.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, line in ipairs(epeg.split(str, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="3903" y="-1334.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="3903" y="-1318.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;line = inverter:filter(line)</text>
<text text-anchor="middle" x="3903" y="-1303.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; each line is either comment, blank or code.</text>
<text text-anchor="middle" x="3903" y="-1288.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local this_block = inverter:sortLine(latest, line)</text>
<text text-anchor="middle" x="3903" y="-1272.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if this_block ~= latest then</text>
<text text-anchor="middle" x="3903" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blocks[#blocks + 1] = this_block</text>
<text text-anchor="middle" x="3903" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = this_block</text>
<text text-anchor="middle" x="3903" y="-1226.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3903" y="-1211.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3903" y="-1195.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local new_linum = 0</text>
<text text-anchor="middle" x="3903" y="-1180.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;&#45;[[ This entire check should be wrapped in a utility assert</text>
<text text-anchor="middle" x="3903" y="-1164.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(blocks) do</text>
<text text-anchor="middle" x="3903" y="-1149.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for __, line in ipairs(v) do</text>
<text text-anchor="middle" x="3903" y="-1134.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;new_linum = new_linum + 1</text>
<text text-anchor="middle" x="3903" y="-1118.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3903" y="-1103.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3903" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="3903" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(linum == new_linum)</text>
<text text-anchor="middle" x="3903" y="-1041.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase, cat_linum = inverter:catBlocks(blocks)</text>
<text text-anchor="middle" x="3903" y="-1025.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="3903" y="-1010.2016" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_41&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3835.3783,-2099.3617C3841.6699,-2017.0058 3868.124,-1670.7244 3886.0187,-1436.485"/>
<polygon fill="#000000" stroke="#000000" points="3889.5124,-1436.6995 3886.7844,-1426.4619 3882.5328,-1436.1662 3889.5124,-1436.6995"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="4225" cy="-1214.202" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="4225" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Constructor</text>
</g>
<!-- section_42&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_42&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4340.5095,-2099.2723C4334.0515,-2052.1904 4316.2747,-1922.1659 4302,-1813.803 4273.0156,-1593.776 4239.3782,-1328.1401 4228.5499,-1242.3604"/>
<polygon fill="#000000" stroke="#000000" points="4232.0123,-1241.8419 4227.2878,-1232.3587 4225.0674,-1242.7183 4232.0123,-1241.8419"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="4343" cy="-1214.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4343" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_42&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4343,-2099.3617C4343,-1986.7983 4343,-1381.1901 4343,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="4346.5001,-1242.2867 4343,-1232.2867 4339.5001,-1242.2868 4346.5001,-1242.2867"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="4466" cy="-1214.202" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4466" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_42&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4345.457,-2099.3617C4360.7861,-1986.7983 4443.2592,-1381.1901 4462.1453,-1242.5074"/>
<polygon fill="#000000" stroke="#000000" points="4465.6557,-1242.6676 4463.5372,-1232.2867 4458.7197,-1241.723 4465.6557,-1242.6676"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="4751" cy="-1214.202" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4751" y="-1210.002" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 263&#45;289</text>
</g>
<!-- section_42&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>section_42&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4353.6934,-2099.2804C4380.9542,-2052.7399 4454.5936,-1924.8692 4507,-1813.803 4608.8486,-1597.9529 4709.6314,-1327.5971 4741.0277,-1241.7083"/>
<polygon fill="#000000" stroke="#000000" points="4744.3702,-1242.7585 4744.508,-1232.1646 4737.7938,-1240.3603 4744.3702,-1242.7585"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3441,-408.8021 2991,-408.8021 2991,-352.9991 3441,-352.9991 3441,-408.8021"/>
<text text-anchor="middle" x="3216" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> This takes a source file and inverts it into Grimoire format.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3458.6634,-1196.1329C3468.9211,-1121.1867 3501.1091,-828.6991 3414,-614.6009 3380.3037,-531.7816 3305.4573,-456.9393 3258.051,-415.322"/>
<polygon fill="#000000" stroke="#000000" points="3260.2478,-412.5943 3250.4007,-408.6848 3255.6606,-417.8818 3260.2478,-412.5943"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3769,-400.8027 3459,-400.8027 3459,-360.9985 3769,-360.9985 3769,-400.8027"/>
<text text-anchor="middle" x="3614" y="-369.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; str: The source file as a single string</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3545.904,-1196.0234C3549.6089,-1122.9651 3564.4607,-843.6612 3586,-614.6009 3592.8917,-541.3107 3603.9494,-455.4427 3609.8972,-410.9914"/>
<polygon fill="#000000" stroke="#000000" points="3613.394,-411.2485 3611.259,-400.871 3606.4566,-410.3149 3613.394,-411.2485"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4118.5,-408.8021 3787.5,-408.8021 3787.5,-352.9991 4118.5,-352.9991 4118.5,-408.8021"/>
<text text-anchor="middle" x="3953" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: The Grimoire document as a string</text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3620.4283,-1196.1381C3612.9861,-1106.1946 3584.6111,-707.2999 3658,-614.6009 3692.5624,-570.9445 3731.0869,-608.5943 3778,-578.6009 3844.2569,-536.2403 3900.304,-461.8653 3930.0683,-417.4109"/>
<polygon fill="#000000" stroke="#000000" points="3933.0744,-419.2103 3935.666,-408.9374 3927.2337,-415.352 3933.0744,-419.2103"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="4268,-398.9006 4140,-398.9006 4140,-362.9006 4268,-362.9006 4268,-398.9006"/>
<text text-anchor="middle" x="4204" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** Constructor</text>
</g>
<!-- header_51&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>header_51&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4224.5419,-1196.0223C4221.8436,-1088.9519 4208.0291,-540.7777 4204.7152,-409.2805"/>
<polygon fill="#000000" stroke="#000000" points="4208.212,-409.106 4204.4611,-399.1974 4201.2142,-409.2824 4208.212,-409.106"/>
</g>
<!-- raw_56 -->
<g id="node57" class="node">
<title>raw_56</title>
<ellipse fill="none" stroke="#000000" cx="4313" cy="-380.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4313" y="-376.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_56 -->
<g id="edge56" class="edge">
<title>prose_52&#45;&gt;raw_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4342.3455,-1196.0223C4338.4908,-1088.9519 4318.7558,-540.7777 4314.0217,-409.2805"/>
<polygon fill="#000000" stroke="#000000" points="4317.5163,-409.0649 4313.6587,-399.1974 4310.5209,-409.3169 4317.5163,-409.0649"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="4385" cy="-380.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4385" y="-376.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_53&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4464.2329,-1196.0223C4453.8252,-1088.9519 4400.5406,-540.7777 4387.7586,-409.2805"/>
<polygon fill="#000000" stroke="#000000" points="4391.2297,-408.8118 4386.7785,-399.1974 4384.2625,-409.4891 4391.2297,-408.8118"/>
</g>
<!-- interpolated_59 -->
<g id="node60" class="node">
<title>interpolated_59</title>
<ellipse fill="none" stroke="#000000" cx="4486" cy="-380.9006" rx="56.1474" ry="18"/>
<text text-anchor="middle" x="4486" y="-376.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">interpolated</text>
</g>
<!-- prose_53&#45;&gt;interpolated_59 -->
<g id="edge59" class="edge">
<title>prose_53&#45;&gt;interpolated_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4466.4363,-1196.0223C4469.0061,-1088.9519 4482.1628,-540.7777 4485.3189,-409.2805"/>
<polygon fill="#000000" stroke="#000000" points="4488.8198,-409.2785 4485.5609,-399.1974 4481.8218,-409.1105 4488.8198,-409.2785"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="4587" cy="-380.9006" rx="27" ry="18"/>
<text text-anchor="middle" x="4587" y="-376.7006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_53&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4468.6398,-1196.0223C4484.2038,-1088.8361 4563.9571,-539.5919 4582.9408,-408.8555"/>
<polygon fill="#000000" stroke="#000000" points="4586.4216,-409.2401 4584.395,-398.8409 4579.4942,-408.2342 4586.4216,-409.2401"/>
</g>
<!-- leaf_64 -->
<g id="node65" class="node">
<title>leaf_64</title>
<polygon fill="none" stroke="#c0c0c0" points="5124,-578.8014 4632,-578.8014 4632,-182.9997 5124,-182.9997 5124,-578.8014"/>
<text text-anchor="middle" x="4878" y="-563.4009" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Inverter, lang)</text>
<text text-anchor="middle" x="4878" y="-548.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local inverter = setmetatable({}, Inv)</text>
<text text-anchor="middle" x="4878" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if lang and lang ~= &quot;lua&quot; then</text>
<text text-anchor="middle" x="4878" y="-517.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;configs not yet implemented&quot;)</text>
<text text-anchor="middle" x="4878" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4878" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return inverter</text>
<text text-anchor="middle" x="4878" y="-471.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4878" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local inv_lua = new()</text>
<text text-anchor="middle" x="4878" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.getLang(inverter, key)</text>
<text text-anchor="middle" x="4878" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if key == &quot;lua&quot; then</text>
<text text-anchor="middle" x="4878" y="-377.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inv_lua</text>
<text text-anchor="middle" x="4878" y="-362.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4878" y="-346.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter.langs[key] then </text>
<text text-anchor="middle" x="4878" y="-331.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inverter.langs[key]</text>
<text text-anchor="middle" x="4878" y="-315.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4878" y="-300.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;No inverter found for language &quot; .. tostring(key))</text>
<text text-anchor="middle" x="4878" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4878" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4878" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.__call = invert</text>
<text text-anchor="middle" x="4878" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.invert = invert</text>
<text text-anchor="middle" x="4878" y="-191.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(inv, new)</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_64 -->
<g id="edge64" class="edge">
<title>codeblock_54&#45;&gt;leaf_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4753.7707,-1196.0223C4765.706,-1117.7099 4813.6049,-803.4244 4846.3158,-588.7944"/>
<polygon fill="#000000" stroke="#000000" points="4849.815,-589.0638 4847.8617,-578.6506 4842.8949,-588.0091 4849.815,-589.0638"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="3996.5,-108.9005 3777.5,-108.9005 3777.5,-38.2998 3996.5,-38.2998 3996.5,-108.9005"/>
<text text-anchor="middle" x="3887" y="-77.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="3887" y="-62.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Currently minimum&#45;viable. </text>
</g>
<!-- raw_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4315.9151,-362.9854C4321.1334,-323.9929 4327.2567,-231.0982 4277,-183.2002 4233.0228,-141.287 4063.2128,-167.6309 4006,-147.2002 3983.9791,-139.3366 3961.6938,-126.9808 3942.4564,-114.6229"/>
<polygon fill="#000000" stroke="#000000" points="3944.1226,-111.5297 3933.8439,-108.9609 3940.2772,-117.3789 3944.1226,-111.5297"/>
</g>
<!-- leaf_61 -->
<g id="node62" class="node">
<title>leaf_61</title>
<polygon fill="none" stroke="#c0c0c0" points="4521,-147.3005 4015,-147.3005 4015,.1003 4521,.1003 4521,-147.3005"/>
<text text-anchor="middle" x="4268" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> Long term, lang can be other than nil, which gets you lua.</text>
<text text-anchor="middle" x="4268" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> A string will return an inverter.lang of that string if such</text>
<text text-anchor="middle" x="4268" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> exists.</text>
<text text-anchor="middle" x="4268" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4268" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> A table will configure a lang, memoize it if it&#39;s new, and return</text>
<text text-anchor="middle" x="4268" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> same. If one of that name already exists, memoization isn&#39;t repeated,</text>
<text text-anchor="middle" x="4268" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> so for a default like lua or python, making a custom python inverter</text>
<text text-anchor="middle" x="4268" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> wont affect the result of subsequent </text>
</g>
<!-- raw_58&#45;&gt;leaf_61 -->
<g id="edge61" class="edge">
<title>raw_58&#45;&gt;leaf_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4384.4166,-362.6598C4382.6903,-326.8241 4375.8722,-245.3185 4349,-183.2002 4345.0545,-174.0797 4340.2234,-165.0019 4334.9034,-156.1981"/>
<polygon fill="#000000" stroke="#000000" points="4337.7187,-154.0999 4329.4352,-147.4943 4331.7914,-157.8238 4337.7187,-154.0999"/>
</g>
<!-- leaf_62 -->
<g id="node63" class="node">
<title>leaf_62</title>
<polygon fill="none" stroke="#c0c0c0" points="4667,-91.6001 4539,-91.6001 4539,-55.6001 4667,-55.6001 4667,-91.6001"/>
<text text-anchor="middle" x="4603" y="-70.1001" font-family="Inconsolata" font-size="14.00" fill="#000000">invert(&quot;python&quot;)</text>
</g>
<!-- interpolated_59&#45;&gt;leaf_62 -->
<g id="edge62" class="edge">
<title>interpolated_59&#45;&gt;leaf_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4491.0904,-362.9109C4501.1916,-327.8487 4525.047,-248.1171 4551,-183.2002 4562.4415,-154.5814 4577.7949,-122.8666 4588.8487,-100.9478"/>
<polygon fill="#000000" stroke="#000000" points="4592.0353,-102.4028 4593.4469,-91.9024 4585.7953,-99.2306 4592.0353,-102.4028"/>
</g>
<!-- leaf_63 -->
<g id="node64" class="node">
<title>leaf_63</title>
<polygon fill="none" stroke="#c0c0c0" points="4862.5,-108.8005 4685.5,-108.8005 4685.5,-38.3997 4862.5,-38.3997 4862.5,-108.8005"/>
<text text-anchor="middle" x="4774" y="-93.5002" font-family="Inconsolata" font-size="14.00" fill="#000000"> calls. </text>
<text text-anchor="middle" x="4774" y="-78.1001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4774" y="-62.7001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: an Inverter</text>
</g>
<!-- raw_60&#45;&gt;leaf_63 -->
<g id="edge63" class="edge">
<title>raw_60&#45;&gt;leaf_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4585.8573,-362.8546C4584.4088,-325.9498 4585.6909,-240.5043 4623,-183.2002 4638.5369,-159.3367 4652.831,-163.7551 4676,-147.2002 4690.3274,-136.9629 4705.6331,-125.6529 4719.7871,-115.0336"/>
<polygon fill="#000000" stroke="#000000" points="4722.0861,-117.6839 4727.9717,-108.8742 4717.8769,-112.0908 4722.0861,-117.6839"/>
</g>
</g>
</svg>