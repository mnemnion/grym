<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4971pt" height="2656pt"
 viewBox="0.00 0.00 4971.00 2655.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2651.804)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2651.804 4967,-2651.804 4967,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2629.804" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1043" y="-2625.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 290</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2557.804" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1043" y="-2553.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;205</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1043,-2611.6353C1043,-2603.9349 1043,-2594.7783 1043,-2586.2206"/>
<polygon fill="#000000" stroke="#000000" points="1046.5001,-2586.2172 1043,-2576.2172 1039.5001,-2586.2173 1046.5001,-2586.2172"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="528" cy="-2485.804" rx="83.677" ry="18"/>
<text text-anchor="middle" x="528" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Inverter module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M983.7181,-2549.845C906.7593,-2539.47 768.2953,-2520.6574 650,-2503.804 636.1846,-2501.8357 621.4956,-2499.7029 607.2733,-2497.6168"/>
<polygon fill="#000000" stroke="#000000" points="607.4218,-2494.1011 597.019,-2496.1092 606.4035,-2501.0266 607.4218,-2494.1011"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="691" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="691" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M984.447,-2549.573C924.1766,-2540.5383 827.7937,-2524.5212 746,-2503.804 740.135,-2502.3184 733.986,-2500.5358 728.011,-2498.678"/>
<polygon fill="#000000" stroke="#000000" points="728.7923,-2495.2527 718.2009,-2495.5198 726.6472,-2501.9159 728.7923,-2495.2527"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="787" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="787" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M992.5672,-2546.2773C950.1818,-2536.2172 888.1782,-2520.6269 835,-2503.804 831.1484,-2502.5855 827.1536,-2501.2332 823.1874,-2499.8329"/>
<polygon fill="#000000" stroke="#000000" points="824.0797,-2496.4331 813.4857,-2496.302 821.6856,-2503.011 824.0797,-2496.4331"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="917" cy="-2485.804" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="917" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 9&#45;24</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1014.4086,-2541.466C996.7326,-2531.3654 973.8435,-2518.286 954.695,-2507.344"/>
<polygon fill="#000000" stroke="#000000" points="956.3333,-2504.249 945.9144,-2502.3265 952.8603,-2510.3267 956.3333,-2504.249"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1075" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1075" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1051.075,-2539.6353C1054.6646,-2531.5587 1058.9662,-2521.8801 1062.9259,-2512.9708"/>
<polygon fill="#000000" stroke="#000000" points="1066.1754,-2514.277 1067.0385,-2503.7174 1059.7787,-2511.434 1066.1754,-2514.277"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1316" cy="-2485.804" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1316" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 29&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1090.553,-2545.2625C1136.0015,-2533.2761 1204.7516,-2515.1442 1254.3791,-2502.0556"/>
<polygon fill="#000000" stroke="#000000" points="1255.5731,-2505.3605 1264.3499,-2499.426 1253.788,-2498.5919 1255.5731,-2505.3605"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2056" cy="-2485.804" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2056" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;205</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1106.7514,-2553.2728C1284.242,-2540.6574 1783.7524,-2505.1542 1977.6655,-2491.3717"/>
<polygon fill="#000000" stroke="#000000" points="1978.0506,-2494.8532 1987.7772,-2490.653 1977.5542,-2487.8708 1978.0506,-2494.8532"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3544" cy="-2485.804" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3544" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 206&#45;245</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1108.6101,-2555.9151C1454.8654,-2545.947 3068.6127,-2499.4896 3458.8685,-2488.2548"/>
<polygon fill="#000000" stroke="#000000" points="3459.0642,-2491.7507 3468.9594,-2487.9643 3458.8627,-2484.7536 3459.0642,-2491.7507"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="515,-2182.2035 461,-2182.2035 461,-2146.2035 515,-2146.2035 515,-2182.2035"/>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M525.7348,-2467.5919C519.0794,-2414.0823 499.5495,-2257.0617 491.5147,-2192.4616"/>
<polygon fill="#000000" stroke="#000000" points="494.9479,-2191.7074 490.2403,-2182.2159 488.0015,-2192.5714 494.9479,-2191.7074"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="560" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="560" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M662.4851,-2477.3423C640.612,-2469.292 611.6042,-2454.9176 596,-2431.804 545.8007,-2357.4465 550.539,-2244.7038 556.1287,-2192.5291"/>
<polygon fill="#000000" stroke="#000000" points="559.6338,-2192.6885 557.315,-2182.3505 552.6808,-2191.8781 559.6338,-2192.6885"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="632" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="632" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M759.073,-2476.6636C727.6348,-2465.7947 679.4374,-2447.1892 668,-2431.804 614.2321,-2359.477 620.9193,-2244.8593 627.5834,-2192.2632"/>
<polygon fill="#000000" stroke="#000000" points="631.0573,-2192.6911 628.9406,-2182.3099 624.1215,-2191.7453 631.0573,-2192.6911"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1092.5,-2277.3042 677.5,-2277.3042 677.5,-2051.1029 1092.5,-2051.1029 1092.5,-2277.3042"/>
<text text-anchor="middle" x="885" y="-2262.3037" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="885" y="-2230.9036" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="885" y="-2199.5036" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="885" y="-2168.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="885" y="-2136.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isBlank(line)</text>
<text text-anchor="middle" x="885" y="-2121.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local all_blanks = L.match((m.__TAB__ + m._)^0, line)</text>
<text text-anchor="middle" x="885" y="-2105.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (all_blanks == (#line + 1) or line == &quot;&quot;)</text>
<text text-anchor="middle" x="885" y="-2090.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="885" y="-2059.1034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Inv, inv = u.inherit()</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_5&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M915.1879,-2467.5919C911.7539,-2433.0804 904.0356,-2355.5115 897.2633,-2287.4501"/>
<polygon fill="#000000" stroke="#000000" points="900.7447,-2287.0878 896.2716,-2277.4836 893.7791,-2287.781 900.7447,-2287.0878"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1138" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="1138" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_6&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.1144,-2468.367C1090.6525,-2458.0546 1097.1525,-2444.5546 1101,-2431.804 1126.507,-2347.273 1134.5084,-2242.3489 1136.9569,-2192.741"/>
<polygon fill="#000000" stroke="#000000" points="1140.4661,-2192.6155 1137.4223,-2182.4673 1133.4732,-2192.2987 1140.4661,-2192.6155"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1675,-2431.9044 1183,-2431.9044 1183,-1896.5026 1675,-1896.5026 1675,-2431.9044"/>
<text text-anchor="middle" x="1429" y="-2416.604" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.lang = &quot;lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2401.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.extension = &quot;.lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2385.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment = L.P&quot;&#45;&#45;&quot;</text>
<text text-anchor="middle" x="1429" y="-2370.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment_len = 3</text>
<text text-anchor="middle" x="1429" y="-2355.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.tab_to_space = &quot; &#160;&#160;&quot;</text>
<text text-anchor="middle" x="1429" y="-2323.6038" font-family="Inconsolata" font-size="14.00" fill="#000000">local lang_config = { lua = { lang = &quot;lua&quot;, </text>
<text text-anchor="middle" x="1429" y="-2308.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;extension = &quot;.lua&quot;,</text>
<text text-anchor="middle" x="1429" y="-2292.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment = L.P&quot;&#45;&#45;&quot;,</text>
<text text-anchor="middle" x="1429" y="-2277.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment_len = 3,</text>
<text text-anchor="middle" x="1429" y="-2262.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tab_to_space = &quot; &#160;&#160;&quot;}}</text>
<text text-anchor="middle" x="1429" y="-2230.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_header(inverter)</text>
<text text-anchor="middle" x="1429" y="-2215.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#!&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2199.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2168.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_footer(inverter)</text>
<text text-anchor="middle" x="1429" y="-2153.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#/&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2137.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2106.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.filter(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-2090.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if isBlank(line) then</text>
<text text-anchor="middle" x="1429" y="-2075.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1429" y="-2060.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1429" y="-2044.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return line:gsub(&quot;\t&quot;, inverter.tab_to_space):gsub(&quot;\r&quot;, &quot;&quot;)</text>
<text text-anchor="middle" x="1429" y="-2029.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1429" y="-2013.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-1982.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat_lines() end &#45;&#45;stub out</text>
<text text-anchor="middle" x="1429" y="-1951.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.matchComment(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (L.match(inverter.comment * m._, line) </text>
<text text-anchor="middle" x="1429" y="-1920.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or (L.match(inverter.comment, line) and #line == 2))</text>
<text text-anchor="middle" x="1429" y="-1904.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1322.3991,-2467.5919C1324.8656,-2460.5723 1327.958,-2451.7714 1331.5208,-2441.6314"/>
<polygon fill="#000000" stroke="#000000" points="1334.9077,-2442.5503 1334.9206,-2431.9555 1328.3035,-2440.2298 1334.9077,-2442.5503"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1775" cy="-2164.2035" rx="82.2492" ry="18"/>
<text text-anchor="middle" x="1775" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : matchLineType</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.032,-2475.3384C1949.751,-2465.5491 1885.9409,-2449.7696 1867,-2431.804 1798.1396,-2366.4891 1780.8165,-2247.3564 1776.4612,-2192.8297"/>
<polygon fill="#000000" stroke="#000000" points="1779.9289,-2192.2474 1775.7331,-2182.5188 1772.9463,-2192.7405 1779.9289,-2192.2474"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1908" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1908" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.7175,-2472.5461C1986.4744,-2464.2588 1963.1759,-2451.3399 1949,-2431.804 1896.0415,-2358.8217 1899.4328,-2244.9336 1904.4574,-2192.4416"/>
<polygon fill="#000000" stroke="#000000" points="1907.9684,-2192.5206 1905.5347,-2182.2091 1901.0069,-2191.7876 1907.9684,-2192.5206"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1990" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1990" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2046.1137,-2467.8128C2040.8722,-2457.5431 2034.7572,-2444.2669 2031,-2431.804 2005.4599,-2347.086 1995.3109,-2242.25 1991.7281,-2192.7017"/>
<polygon fill="#000000" stroke="#000000" points="1995.2005,-2192.1779 1991.0241,-2182.441 1988.2169,-2192.6572 1995.2005,-2192.1779"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2122" cy="-2164.2035" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="2122" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;112</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2059.7375,-2467.5919C2070.7417,-2413.9717 2103.0766,-2256.4124 2116.2827,-2192.0624"/>
<polygon fill="#000000" stroke="#000000" points="2119.7216,-2192.7154 2118.3034,-2182.2159 2112.8645,-2191.3081 2119.7216,-2192.7154"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2318" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2318" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2117.9819,-2477.1742C2149.8553,-2469.8664 2187.2976,-2456.4331 2213,-2431.804 2282.6138,-2365.0972 2306.9566,-2246.6734 2314.7111,-2192.5783"/>
<polygon fill="#000000" stroke="#000000" points="2318.2223,-2192.7293 2316.087,-2182.3519 2311.2848,-2191.7959 2318.2223,-2192.7293"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2124.9534,-2481.9381C2203.578,-2476.1214 2325.5718,-2462.3529 2359,-2431.804 2427.9853,-2368.7606 2434.3305,-2247.5216 2433.3627,-2192.5459"/>
<polygon fill="#000000" stroke="#000000" points="2436.8594,-2192.3721 2433.088,-2182.4712 2429.862,-2192.5629 2436.8594,-2192.3721"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2682" cy="-2164.2035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2682" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 125&#45;203</text>
</g>
<!-- section_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2125.9207,-2483.1252C2228.873,-2478.1219 2415.2932,-2464.7115 2473,-2431.804 2573.7209,-2374.3676 2643.0462,-2247.2209 2669.7624,-2191.3896"/>
<polygon fill="#000000" stroke="#000000" points="2673.026,-2192.674 2674.1114,-2182.1349 2666.6906,-2189.6968 2673.026,-2192.674"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3328" cy="-2164.2035" rx="83.6081" ry="18"/>
<text text-anchor="middle" x="3328" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Grym:invert(str)</text>
</g>
<!-- section_9&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_9&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3490.6573,-2472.9535C3466.5651,-2464.7376 3439.436,-2451.7614 3421,-2431.804 3356.6807,-2362.1767 3336.4965,-2245.723 3330.448,-2192.4075"/>
<polygon fill="#000000" stroke="#000000" points="3333.9143,-2191.9031 3329.3893,-2182.3232 3326.9526,-2192.634 3333.9143,-2191.9031"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3462" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3462" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_9&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3527.0806,-2468.2584C3518.4909,-2458.3332 3508.6936,-2445.2438 3503,-2431.804 3468.241,-2349.7551 3462.4789,-2242.4656 3461.8284,-2192.3215"/>
<polygon fill="#000000" stroke="#000000" points="3465.3279,-2192.2145 3461.7584,-2182.2391 3458.3281,-2192.2632 3465.3279,-2192.2145"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3544" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3544" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_9&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3544,-2467.5919C3544,-2414.0823 3544,-2257.0617 3544,-2192.4616"/>
<polygon fill="#000000" stroke="#000000" points="3547.5001,-2192.2158 3544,-2182.2159 3540.5001,-2192.2159 3547.5001,-2192.2158"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3626" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3626" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_9&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3560.9194,-2468.2584C3569.5091,-2458.3332 3579.3064,-2445.2438 3585,-2431.804 3619.759,-2349.7551 3625.5211,-2242.4656 3626.1716,-2192.3215"/>
<polygon fill="#000000" stroke="#000000" points="3629.6719,-2192.2632 3626.2416,-2182.2391 3622.6721,-2192.2145 3629.6719,-2192.2632"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3835" cy="-2164.2035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3835" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 215&#45;243</text>
</g>
<!-- section_9&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_9&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3592.716,-2471.9716C3616.9884,-2463.3115 3645.6355,-2450.2395 3667,-2431.804 3747.3732,-2362.4498 3802.237,-2245.0248 3824.2278,-2191.8437"/>
<polygon fill="#000000" stroke="#000000" points="3827.5465,-2192.9739 3828.0681,-2182.3919 3821.0613,-2190.339 3827.5465,-2192.9739"/>
</g>
<!-- section_42 -->
<g id="node43" class="node">
<title>section_42</title>
<ellipse fill="none" stroke="#000000" cx="4344" cy="-2164.2035" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4344" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 246&#45;290</text>
</g>
<!-- section_9&#45;&gt;section_42 -->
<g id="edge42" class="edge">
<title>section_9&#45;&gt;section_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3614.9365,-2479.617C3710.3525,-2470.6603 3874.5849,-2452.8319 3931,-2431.804 4091.1288,-2372.1183 4253.1563,-2242.3384 4316.3616,-2188.4335"/>
<polygon fill="#000000" stroke="#000000" points="4318.9611,-2190.8147 4324.2682,-2181.6449 4314.4011,-2185.5037 4318.9611,-2190.8147"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1288.3025 0,-1288.3025 0,-1233.7016 450,-1233.7016 450,-1288.3025"/>
<text text-anchor="middle" x="225" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A work in progress, which also works well enough to invert,</text>
<text text-anchor="middle" x="225" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> I may hope, the whole of grym including this file.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M562.7375,-2146.0209C568.6845,-2099.817 578.2105,-1975.9504 524,-1896.6031 505.3707,-1869.3356 480.7392,-1885.4622 459,-1860.6031 306.43,-1686.1364 247.4816,-1400.7861 230.6006,-1298.7496"/>
<polygon fill="#000000" stroke="#000000" points="234.0141,-1297.9323 228.9642,-1288.6184 227.1036,-1299.0486 234.0141,-1297.9323"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="939.5,-1296.3024 468.5,-1296.3024 468.5,-1225.7017 939.5,-1225.7017 939.5,-1296.3024"/>
<text text-anchor="middle" x="704" y="-1265.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> Hence I&#39;m eager to use it and then document it from the grimoire</text>
<text text-anchor="middle" x="704" y="-1249.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> side.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M633.4382,-2146.1617C642.0782,-2037.7779 687.1574,-1472.2837 700.3621,-1306.6378"/>
<polygon fill="#000000" stroke="#000000" points="703.8792,-1306.5608 701.185,-1296.3143 696.9014,-1306.0045 703.8792,-1306.5608"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1247.5,-1280.9041 1028.5,-1280.9041 1028.5,-1241.0999 1247.5,-1241.0999 1247.5,-1280.9041"/>
<text text-anchor="middle" x="1138" y="-1249.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> The default language is Lua.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1138,-2146.1617C1138,-2034.0912 1138,-1433.2843 1138,-1291.156"/>
<polygon fill="#000000" stroke="#000000" points="1141.5001,-1290.9985 1138,-1280.9985 1134.5001,-1290.9985 1141.5001,-1290.9985"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1719,-1279.002 1665,-1279.002 1665,-1243.002 1719,-1243.002 1719,-1279.002"/>
</g>
<!-- header_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>header_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1771.5984,-2146.1446C1762.8946,-2099.2346 1739.6814,-1969.5849 1728,-1860.6031 1704.4982,-1641.3424 1695.2594,-1375.2068 1692.7559,-1289.2301"/>
<polygon fill="#000000" stroke="#000000" points="1696.2537,-1289.1014 1692.471,-1279.2049 1689.2566,-1289.3003 1696.2537,-1289.1014"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1764" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="1764" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_20&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2726,-2145.9583C1915.0494,-2099.6074 1921.509,-1975.4244 1866,-1896.6031 1846.7611,-1869.2844 1817.91,-1888.8108 1800,-1860.6031 1738.859,-1764.3076 1755.9233,-1394.7498 1762.1822,-1289.2645"/>
<polygon fill="#000000" stroke="#000000" points="1765.6879,-1289.2756 1762.8021,-1279.0814 1758.7008,-1288.8502 1765.6879,-1289.2756"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="1836" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="1836" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_21&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1992.6016,-2146.0975C1998.2604,-2099.5424 2006.8932,-1973.9158 1949,-1896.6031 1926.3562,-1866.3637 1893.2283,-1891.8524 1872,-1860.6031 1807.9033,-1766.2493 1827.0634,-1395.3147 1833.9945,-1289.3878"/>
<polygon fill="#000000" stroke="#000000" points="1837.5032,-1289.3733 1834.6802,-1279.1615 1830.5189,-1288.9049 1837.5032,-1289.3733"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2331,-1519.9032 1881,-1519.9032 1881,-1002.1009 2331,-1002.1009 2331,-1519.9032"/>
<text text-anchor="middle" x="2106" y="-1504.5025" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.sortLine(inverter, latest, line)</text>
<text text-anchor="middle" x="2106" y="-1489.1025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = latest or {}</text>
<text text-anchor="middle" x="2106" y="-1457.7024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter:matchComment(line) then</text>
<text text-anchor="middle" x="2106" y="-1442.3024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose</text>
<text text-anchor="middle" x="2106" y="-1426.9024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;prose&quot; then</text>
<text text-anchor="middle" x="2106" y="-1411.5024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new prose block</text>
<text text-anchor="middle" x="2106" y="-1396.1023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;prose&quot;}</text>
<text text-anchor="middle" x="2106" y="-1380.7023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1365.3023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1349.9022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1334.5022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1319.1022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif isBlank(line) then</text>
<text text-anchor="middle" x="2106" y="-1303.7021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank line</text>
<text text-anchor="middle" x="2106" y="-1288.3021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;blank&quot; then</text>
<text text-anchor="middle" x="2106" y="-1272.9021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;blank&quot;}</text>
<text text-anchor="middle" x="2106" y="-1257.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1242.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1226.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1211.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1195.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1180.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code line</text>
<text text-anchor="middle" x="2106" y="-1165.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;code&quot; then</text>
<text text-anchor="middle" x="2106" y="-1149.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new code block</text>
<text text-anchor="middle" x="2106" y="-1134.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;code&quot; }</text>
<text text-anchor="middle" x="2106" y="-1118.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1103.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1088.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1072.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1057.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1025.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="2106" y="-1010.5016" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2121.6804,-2146.1617C2120.3161,-2069.1445 2114.8628,-1761.3098 2110.7679,-1530.1477"/>
<polygon fill="#000000" stroke="#000000" points="2114.2628,-1529.8265 2110.5861,-1519.8901 2107.2639,-1529.9505 2114.2628,-1529.8265"/>
</g>
<!-- raw_32 -->
<g id="node33" class="node">
<title>raw_32</title>
<ellipse fill="none" stroke="#000000" cx="2376" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="2376" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_32 -->
<g id="edge32" class="edge">
<title>prose_23&#45;&gt;raw_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2319.3925,-2146.0723C2322.9913,-2098.9902 2332.8211,-1968.9653 2340,-1860.6031 2354.5771,-1640.5688 2369.6348,-1374.9376 2374.4335,-1289.1598"/>
<polygon fill="#000000" stroke="#000000" points="2377.9289,-1289.338 2374.9921,-1279.1584 2370.9398,-1288.9476 2377.9289,-1289.338"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="2448" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="2448" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_24&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2432.3196,-2146.1617C2434.3136,-2033.5984 2445.0418,-1427.9901 2447.4986,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="2451.0019,-1289.1472 2447.6796,-1279.0868 2444.003,-1289.0232 2451.0019,-1289.1472"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3062.5,-1860.7042 2493.5,-1860.7042 2493.5,-661.2999 3062.5,-661.2999 3062.5,-1860.7042"/>
<text text-anchor="middle" x="2778" y="-1845.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.catBlocks(inverter, blocks)</text>
<text text-anchor="middle" x="2778" y="-1830.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="2778" y="-1814.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function toLines(block) </text>
<text text-anchor="middle" x="2778" y="-1799.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for j = 1, #block do</text>
<text text-anchor="middle" x="2778" y="-1768.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="2778" y="-1753.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. block[j] .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2778" y="-1737.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1722.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2778" y="-1706.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1691.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1676.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[1].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1660.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1645.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1629.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;phrase = phrase .. toLines(blocks[1]) </text>
<text text-anchor="middle" x="2778" y="-1614.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #blocks do</text>
<text text-anchor="middle" x="2778" y="-1599.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write blanks and code</text>
<text text-anchor="middle" x="2778" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1474.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-1459.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose or nothing, write blanks, header, and code</text>
<text text-anchor="middle" x="2778" y="-1443.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1428.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-1413.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1])</text>
<text text-anchor="middle" x="2778" y="-1397.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1382.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1350.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is prose, write a blank line, </text>
<text text-anchor="middle" x="2778" y="-1335.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; header, and code. </text>
<text text-anchor="middle" x="2778" y="-1320.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1304.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. &quot;\n&quot; .. inverter:write_header() </text>
<text text-anchor="middle" x="2778" y="-1289.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1273.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-1258.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on code in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-1243.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1227.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1180.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write footer, blanks, and prose</text>
<text text-anchor="middle" x="2778" y="-1165.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1150.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1134.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer() </text>
<text text-anchor="middle" x="2778" y="-1119.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is code, write a footer, newline,</text>
<text text-anchor="middle" x="2778" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; and prose</text>
<text text-anchor="middle" x="2778" y="-1057.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif (blocks[i &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-1041.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-1026.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;\n&quot; .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-994.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding line is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-979.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; nothing or more prose, write blanks, then prose.</text>
<text text-anchor="middle" x="2778" y="-964.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-948.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-933.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-901.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-886.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on prose in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-871.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-855.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="2778" y="-824.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[#blocks].id == &quot;code&quot; or</text>
<text text-anchor="middle" x="2778" y="-793.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[#blocks].id == &quot;blank&quot; </text>
<text text-anchor="middle" x="2778" y="-778.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and blocks[#blocks &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Note that there may be a final block of blank lines which we are</text>
<text text-anchor="middle" x="2778" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; happy to simply drop. </text>
<text text-anchor="middle" x="2778" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase, linum</text>
<text text-anchor="middle" x="2778" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_25&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2683.9176,-2146.1617C2688.3013,-2104.9188 2699.7202,-1997.4858 2713.1555,-1871.0818"/>
<polygon fill="#000000" stroke="#000000" points="2716.6747,-1871.0854 2714.2514,-1860.7715 2709.7139,-1870.3455 2716.6747,-1871.0854"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1610.5,-494.1014 1153.5,-494.1014 1153.5,-361.2998 1610.5,-361.2998 1610.5,-494.1014"/>
<text text-anchor="middle" x="1382" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Matches a line by type (comment, code, or blank) and either</text>
<text text-anchor="middle" x="1382" y="-431.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> concatenates to an existing block of this type or starts a new</text>
<text text-anchor="middle" x="1382" y="-415.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> one if the latest is different.</text>
<text text-anchor="middle" x="1382" y="-400.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1382" y="-385.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: the latest block.</text>
<text text-anchor="middle" x="1382" y="-369.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line: line to be matched and added.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.5215,-1242.9774C1772.7207,-1153.2236 1800.1056,-755.1017 1728,-661.401 1696.886,-620.9685 1663.5976,-650.1784 1619,-625.401 1558.7829,-591.9456 1499.2757,-542.2322 1454.9521,-501.0278"/>
<polygon fill="#000000" stroke="#000000" points="1457.1057,-498.2493 1447.4149,-493.9668 1452.3199,-503.3578 1457.1057,-498.2493"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2043.5,-455.6021 1628.5,-455.6021 1628.5,-399.7992 2043.5,-399.7992 2043.5,-455.6021"/>
<text text-anchor="middle" x="1836" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the latest block, which may be created here.</text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1836,-1242.8224C1836,-1138.2158 1836,-612.5733 1836,-465.8101"/>
<polygon fill="#000000" stroke="#000000" points="1839.5001,-465.5162 1836,-455.5162 1832.5001,-465.5163 1839.5001,-465.5162"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2476.5,-447.6027 2061.5,-447.6027 2061.5,-407.7986 2476.5,-407.7986 2476.5,-447.6027"/>
<text text-anchor="middle" x="2269" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Takes blocks and concatenates them into a single string.</text>
</g>
<!-- raw_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.4569,-1242.6664C2377.9659,-1169.0098 2380.5921,-887.7379 2340,-661.401 2326.4929,-586.0868 2296.7522,-500.8356 2280.3735,-457.0741"/>
<polygon fill="#000000" stroke="#000000" points="2283.6125,-455.7441 2276.8033,-447.6272 2277.0646,-458.2189 2283.6125,-455.7441"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2973,-455.0011 2495,-455.0011 2495,-400.4002 2973,-400.4002 2973,-455.0011"/>
<text text-anchor="middle" x="2734" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Also writes headers and footers, while doing its best to get the </text>
<text text-anchor="middle" x="2734" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> spacing right.</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2444.4768,-1242.9137C2430.6588,-1167.2911 2385.6,-870.673 2484,-661.401 2526.0475,-571.9764 2618.9833,-500.1042 2678.9362,-460.723"/>
<polygon fill="#000000" stroke="#000000" points="2681.0454,-463.5269 2687.5324,-455.1502 2677.2375,-457.6532 2681.0454,-463.5269"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3355,-1279.002 3301,-1279.002 3301,-1243.002 3355,-1243.002 3355,-1279.002"/>
</g>
<!-- header_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>header_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3328,-2146.1617C3328,-2033.5984 3328,-1427.9901 3328,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3331.5001,-1289.0868 3328,-1279.0868 3324.5001,-1289.0868 3331.5001,-1289.0868"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3431" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3431" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3461.3808,-2146.1617C3457.5173,-2033.5984 3436.7314,-1427.9901 3431.9715,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3435.4618,-1288.9608 3431.6207,-1279.0868 3428.4659,-1289.201 3435.4618,-1288.9608"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3546" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3546" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_39&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_39&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3544.04,-2146.1617C3544.2892,-2033.5984 3545.6302,-1427.9901 3545.9373,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3549.4377,-1289.0945 3545.96,-1279.0868 3542.4377,-1289.079 3549.4377,-1289.0945"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3623" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3623" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_40&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3625.9401,-2146.1617C3625.5662,-2033.5984 3623.5547,-1427.9901 3623.094,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3626.5934,-1289.0751 3623.0601,-1279.0868 3619.5934,-1289.0984 3626.5934,-1289.0751"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4139.5,-1473.403 3668.5,-1473.403 3668.5,-1048.601 4139.5,-1048.601 4139.5,-1473.403"/>
<text text-anchor="middle" x="3904" y="-1458.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert(inverter, str)</text>
<text text-anchor="middle" x="3904" y="-1442.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local blocks = {}</text>
<text text-anchor="middle" x="3904" y="-1427.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="3904" y="-1411.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = nil</text>
<text text-anchor="middle" x="3904" y="-1396.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, line in ipairs(epeg.split(str, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="3904" y="-1381.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="3904" y="-1365.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;line = inverter:filter(line)</text>
<text text-anchor="middle" x="3904" y="-1350.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; each line is either comment, blank or code.</text>
<text text-anchor="middle" x="3904" y="-1334.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local this_block = inverter:sortLine(latest, line)</text>
<text text-anchor="middle" x="3904" y="-1319.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if this_block ~= latest then</text>
<text text-anchor="middle" x="3904" y="-1304.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blocks[#blocks + 1] = this_block</text>
<text text-anchor="middle" x="3904" y="-1288.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = this_block</text>
<text text-anchor="middle" x="3904" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3904" y="-1257.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3904" y="-1242.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local new_linum = 0</text>
<text text-anchor="middle" x="3904" y="-1227.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;&#45;[[ This entire check should be wrapped in a utility assert</text>
<text text-anchor="middle" x="3904" y="-1211.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(blocks) do</text>
<text text-anchor="middle" x="3904" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for __, line in ipairs(v) do</text>
<text text-anchor="middle" x="3904" y="-1180.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;new_linum = new_linum + 1</text>
<text text-anchor="middle" x="3904" y="-1165.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3904" y="-1150.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3904" y="-1134.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="3904" y="-1119.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(linum == new_linum)</text>
<text text-anchor="middle" x="3904" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase, cat_linum = inverter:catBlocks(blocks)</text>
<text text-anchor="middle" x="3904" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="3904" y="-1057.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_41&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3836.3783,-2146.1617C3842.6699,-2063.8059 3869.124,-1717.5244 3887.0187,-1483.285"/>
<polygon fill="#000000" stroke="#000000" points="3890.5124,-1483.4995 3887.7844,-1473.262 3883.5328,-1482.9663 3890.5124,-1483.4995"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="4226" cy="-1261.002" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="4226" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Constructor</text>
</g>
<!-- section_42&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_42&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4341.5095,-2146.0723C4335.0515,-2098.9904 4317.2747,-1968.9659 4303,-1860.6031 4274.0156,-1640.5761 4240.3782,-1374.9402 4229.5499,-1289.1605"/>
<polygon fill="#000000" stroke="#000000" points="4233.0123,-1288.6419 4228.2878,-1279.1588 4226.0674,-1289.5183 4233.0123,-1288.6419"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="4344" cy="-1261.002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4344" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_42&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4344,-2146.1617C4344,-2033.5984 4344,-1427.9901 4344,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="4347.5001,-1289.0868 4344,-1279.0868 4340.5001,-1289.0868 4347.5001,-1289.0868"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="4426" cy="-1261.002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4426" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_42&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4346.8672,-2146.1163C4354.2215,-2099.1389 4373.952,-1969.3423 4385,-1860.6031 4407.3018,-1641.0988 4420.7343,-1375.1221 4424.7337,-1289.208"/>
<polygon fill="#000000" stroke="#000000" points="4428.2312,-1289.3407 4425.195,-1279.1902 4421.2386,-1289.0186 4428.2312,-1289.3407"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="4641" cy="-1261.002" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4641" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 263&#45;289</text>
</g>
<!-- section_42&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>section_42&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4352.1536,-2145.9717C4372.9123,-2099.176 4428.8163,-1970.7558 4467,-1860.6031 4542.1453,-1643.8233 4611.9821,-1375.6013 4633.9147,-1289.2112"/>
<polygon fill="#000000" stroke="#000000" points="4637.3454,-1289.9205 4636.4059,-1279.3674 4630.5594,-1288.203 4637.3454,-1289.9205"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3441,-455.6021 2991,-455.6021 2991,-399.7992 3441,-399.7992 3441,-455.6021"/>
<text text-anchor="middle" x="3216" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> This takes a source file and inverts it into Grimoire format.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3431.8784,-1242.9429C3434.9027,-1168.6262 3440.8282,-880.0445 3364,-661.401 3337.0775,-584.7829 3281.1456,-507.4149 3246.2759,-463.7185"/>
<polygon fill="#000000" stroke="#000000" points="3248.8112,-461.2867 3239.8098,-455.6987 3243.3618,-465.6804 3248.8112,-461.2867"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3769,-447.6027 3459,-447.6027 3459,-407.7986 3769,-407.7986 3769,-447.6027"/>
<text text-anchor="middle" x="3614" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; str: The source file as a single string</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3546.9319,-1242.8261C3550.7429,-1169.7776 3565.9441,-890.5062 3587,-661.401 3593.7337,-588.1328 3604.3606,-502.2558 3610.0669,-457.7973"/>
<polygon fill="#000000" stroke="#000000" points="3613.5644,-458.0409 3611.3731,-447.6751 3606.622,-457.1449 3613.5644,-458.0409"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4118.5,-455.6021 3787.5,-455.6021 3787.5,-399.7992 4118.5,-399.7992 4118.5,-455.6021"/>
<text text-anchor="middle" x="3953" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: The Grimoire document as a string</text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3621.4325,-1242.9415C3614.0106,-1153.014 3585.7183,-754.1847 3659,-661.401 3693.2482,-618.0386 3731.4798,-655.2189 3778,-625.401 3844.2079,-582.9638 3900.2717,-508.6149 3930.0524,-464.186"/>
<polygon fill="#000000" stroke="#000000" points="3933.0561,-465.9891 3935.6533,-455.7175 3927.2175,-462.1275 3933.0561,-465.9891"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="4253,-445.7006 4199,-445.7006 4199,-409.7006 4253,-409.7006 4253,-445.7006"/>
</g>
<!-- header_51&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>header_51&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4226,-1242.8224C4226,-1135.7519 4226,-587.5777 4226,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4229.5001,-455.9974 4226,-445.9974 4222.5001,-455.9975 4229.5001,-455.9974"/>
</g>
<!-- raw_56 -->
<g id="node57" class="node">
<title>raw_56</title>
<ellipse fill="none" stroke="#000000" cx="4321" cy="-427.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="4321" y="-423.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_56 -->
<g id="edge56" class="edge">
<title>prose_52&#45;&gt;raw_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4343.4982,-1242.8224C4340.543,-1135.7519 4325.4128,-587.5777 4321.7833,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4325.2797,-455.897 4321.505,-445.9974 4318.2823,-456.0902 4325.2797,-455.897"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="4426" cy="-427.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="4426" y="-423.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_53&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4426,-1242.8224C4426,-1135.7519 4426,-587.5777 4426,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4429.5001,-455.9974 4426,-445.9974 4422.5001,-455.9975 4429.5001,-455.9974"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="4963,-625.6015 4471,-625.6015 4471,-229.7998 4963,-229.7998 4963,-625.6015"/>
<text text-anchor="middle" x="4717" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Inverter, lang)</text>
<text text-anchor="middle" x="4717" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local inverter = setmetatable({}, Inv)</text>
<text text-anchor="middle" x="4717" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if lang and lang ~= &quot;lua&quot; then</text>
<text text-anchor="middle" x="4717" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;configs not yet implemented&quot;)</text>
<text text-anchor="middle" x="4717" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4717" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return inverter</text>
<text text-anchor="middle" x="4717" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4717" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local inv_lua = new()</text>
<text text-anchor="middle" x="4717" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.getLang(inverter, key)</text>
<text text-anchor="middle" x="4717" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if key == &quot;lua&quot; then</text>
<text text-anchor="middle" x="4717" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inv_lua</text>
<text text-anchor="middle" x="4717" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4717" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter.langs[key] then </text>
<text text-anchor="middle" x="4717" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inverter.langs[key]</text>
<text text-anchor="middle" x="4717" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4717" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;No inverter found for language &quot; .. tostring(key))</text>
<text text-anchor="middle" x="4717" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4717" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4717" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.__call = invert</text>
<text text-anchor="middle" x="4717" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.invert = invert</text>
<text text-anchor="middle" x="4717" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(inv, new)</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_54&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4642.658,-1242.8224C4649.8004,-1164.51 4678.4643,-850.2245 4698.0394,-635.5945"/>
<polygon fill="#000000" stroke="#000000" points="4701.5417,-635.7273 4698.9645,-625.4507 4694.5706,-635.0914 4701.5417,-635.7273"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4292.5,-132.3005 4073.5,-132.3005 4073.5,-61.6998 4292.5,-61.6998 4292.5,-132.3005"/>
<text text-anchor="middle" x="4183" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4183" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Currently minimum&#45;viable. </text>
</g>
<!-- raw_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4317.202,-409.7287C4309.3917,-374.3641 4289.8899,-293.6462 4262,-230.0003 4248.4044,-198.9746 4229.0289,-166.236 4212.8691,-141.0037"/>
<polygon fill="#000000" stroke="#000000" points="4215.6754,-138.8982 4207.302,-132.4069 4209.7998,-142.7031 4215.6754,-138.8982"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4817,-194.0005 4311,-194.0005 4311,.0002 4817,.0002 4817,-194.0005"/>
<text text-anchor="middle" x="4564" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> Long term, lang can be other than nil, which gets you lua.</text>
<text text-anchor="middle" x="4564" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> A string will return an inverter.lang of that string if such</text>
<text text-anchor="middle" x="4564" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> exists.</text>
<text text-anchor="middle" x="4564" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4564" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> A table will configure a lang, memoize it if it&#39;s new, and return</text>
<text text-anchor="middle" x="4564" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> same. If one of that name already exists, memoization isn&#39;t repeated,</text>
<text text-anchor="middle" x="4564" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> so for a default like lua or python, making a custom python inverter</text>
<text text-anchor="middle" x="4564" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> wont affect the result of subsequent `invert(&quot;python&quot;)` calls. </text>
<text text-anchor="middle" x="4564" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4564" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: an Inverter</text>
</g>
<!-- raw_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>raw_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4426.4744,-409.6941C4428.0091,-373.9281 4434.5059,-292.0366 4462,-230.0003 4466.0235,-220.922 4470.7867,-211.9006 4476.0211,-203.0824"/>
<polygon fill="#000000" stroke="#000000" points="4479.1424,-204.6883 4481.4025,-194.3373 4473.1807,-201.0197 4479.1424,-204.6883"/>
</g>
</g>
</svg>