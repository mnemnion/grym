<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="4990pt" height="2656pt"
 viewBox="0.00 0.00 4990.00 2655.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2651.804)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-2651.804 4986,-2651.804 4986,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2629.804" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1043" y="-2625.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 290</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1043" cy="-2557.804" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="1043" y="-2553.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;205</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1043,-2611.6353C1043,-2603.9349 1043,-2594.7783 1043,-2586.2206"/>
<polygon fill="#000000" stroke="#000000" points="1046.5001,-2586.2172 1043,-2576.2172 1039.5001,-2586.2173 1046.5001,-2586.2172"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="489" cy="-2485.804" rx="83.677" ry="18"/>
<text text-anchor="middle" x="489" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Inverter module</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M983.4493,-2550.0645C883.8913,-2537.1256 683.4982,-2511.0817 570.7908,-2496.4338"/>
<polygon fill="#000000" stroke="#000000" points="571.1985,-2492.9574 560.8307,-2495.1394 570.2962,-2499.8991 571.1985,-2492.9574"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="674" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="674" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M985.4503,-2549.1273C924.2712,-2539.5355 824.8413,-2522.8928 740,-2503.804 731.0761,-2501.7961 721.5481,-2499.3673 712.5873,-2496.9524"/>
<polygon fill="#000000" stroke="#000000" points="713.3436,-2493.5306 702.7736,-2494.2551 711.4884,-2500.2803 713.3436,-2493.5306"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="781" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="781" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M993.1478,-2545.8686C950.8478,-2535.5013 888.6594,-2519.6927 835,-2503.804 829.5516,-2502.1907 823.8265,-2500.394 818.2238,-2498.5777"/>
<polygon fill="#000000" stroke="#000000" points="818.9505,-2495.132 808.3574,-2495.3227 816.7573,-2501.7796 818.9505,-2495.132"/>
</g>
<!-- codeblock_5 -->
<g id="node6" class="node">
<title>codeblock_5</title>
<ellipse fill="none" stroke="#000000" cx="917" cy="-2485.804" rx="72.5844" ry="18"/>
<text text-anchor="middle" x="917" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 9&#45;24</text>
</g>
<!-- section_1&#45;&gt;codeblock_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;codeblock_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1014.4086,-2541.466C996.7326,-2531.3654 973.8435,-2518.286 954.695,-2507.344"/>
<polygon fill="#000000" stroke="#000000" points="956.3333,-2504.249 945.9144,-2502.3265 952.8603,-2510.3267 956.3333,-2504.249"/>
</g>
<!-- prose_6 -->
<g id="node7" class="node">
<title>prose_6</title>
<ellipse fill="none" stroke="#000000" cx="1075" cy="-2485.804" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1075" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;prose_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1051.075,-2539.6353C1054.6646,-2531.5587 1058.9662,-2521.8801 1062.9259,-2512.9708"/>
<polygon fill="#000000" stroke="#000000" points="1066.1754,-2514.277 1067.0385,-2503.7174 1059.7787,-2511.434 1066.1754,-2514.277"/>
</g>
<!-- codeblock_7 -->
<g id="node8" class="node">
<title>codeblock_7</title>
<ellipse fill="none" stroke="#000000" cx="1316" cy="-2485.804" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1316" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 29&#45;64</text>
</g>
<!-- section_1&#45;&gt;codeblock_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;codeblock_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1090.553,-2545.2625C1136.0015,-2533.2761 1204.7516,-2515.1442 1254.3791,-2502.0556"/>
<polygon fill="#000000" stroke="#000000" points="1255.5731,-2505.3605 1264.3499,-2499.426 1253.788,-2498.5919 1255.5731,-2505.3605"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="2056" cy="-2485.804" rx="70.655" ry="18"/>
<text text-anchor="middle" x="2056" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 66&#45;205</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1106.7514,-2553.2728C1284.242,-2540.6574 1783.7524,-2505.1542 1977.6655,-2491.3717"/>
<polygon fill="#000000" stroke="#000000" points="1978.0506,-2494.8532 1987.7772,-2490.653 1977.5542,-2487.8708 1978.0506,-2494.8532"/>
</g>
<!-- section_9 -->
<g id="node10" class="node">
<title>section_9</title>
<ellipse fill="none" stroke="#000000" cx="3563" cy="-2485.804" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="3563" y="-2481.604" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 206&#45;245</text>
</g>
<!-- section_1&#45;&gt;section_9 -->
<g id="edge9" class="edge">
<title>section_1&#45;&gt;section_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1108.4653,-2555.9335C1456.156,-2545.9995 3085.3092,-2499.4523 3477.7829,-2488.2387"/>
<polygon fill="#000000" stroke="#000000" points="3478.0337,-2491.7331 3487.9296,-2487.9488 3477.8337,-2484.736 3478.0337,-2491.7331"/>
</g>
<!-- leaf_10 -->
<g id="node11" class="node">
<title>leaf_10</title>
<polygon fill="none" stroke="#c0c0c0" points="515,-2182.2035 373,-2182.2035 373,-2146.2035 515,-2146.2035 515,-2182.2035"/>
<text text-anchor="middle" x="444" y="-2160.7035" font-family="Inconsolata" font-size="14.00" fill="#000000"> * Inverter module</text>
</g>
<!-- header_2&#45;&gt;leaf_10 -->
<g id="edge10" class="edge">
<title>header_2&#45;&gt;leaf_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M486.4517,-2467.5919C478.9643,-2414.0823 456.9932,-2257.0617 447.954,-2192.4616"/>
<polygon fill="#000000" stroke="#000000" points="451.3724,-2191.6343 446.5204,-2182.2159 444.44,-2192.6044 451.3724,-2191.6343"/>
</g>
<!-- raw_11 -->
<g id="node12" class="node">
<title>raw_11</title>
<ellipse fill="none" stroke="#000000" cx="560" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="560" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;raw_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M648.2633,-2474.8925C630.5585,-2465.9784 608.1282,-2451.6083 596,-2431.804 549.2599,-2355.4813 552.2127,-2244.1622 556.7348,-2192.4958"/>
<polygon fill="#000000" stroke="#000000" points="560.2312,-2192.6997 557.7062,-2182.4102 553.2635,-2192.0285 560.2312,-2192.6997"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="632" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="632" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_4&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M750.6089,-2479.7417C724.3591,-2472.8244 687.6459,-2458.7848 668,-2431.804 614.9507,-2358.9483 621.2772,-2244.596 627.717,-2192.1649"/>
<polygon fill="#000000" stroke="#000000" points="631.1877,-2192.6168 629.0303,-2182.2439 624.2482,-2191.6981 631.1877,-2192.6168"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="1092.5,-2277.3042 677.5,-2277.3042 677.5,-2051.1029 1092.5,-2051.1029 1092.5,-2277.3042"/>
<text text-anchor="middle" x="885" y="-2262.3037" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="885" y="-2230.9036" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="885" y="-2199.5036" font-family="Inconsolata" font-size="14.00" fill="#000000">local m = require &quot;grym/morphemes&quot;</text>
<text text-anchor="middle" x="885" y="-2168.1036" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="885" y="-2136.7035" font-family="Inconsolata" font-size="14.00" fill="#000000">local function isBlank(line)</text>
<text text-anchor="middle" x="885" y="-2121.3035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local all_blanks = L.match((m.__TAB__ + m._)^0, line)</text>
<text text-anchor="middle" x="885" y="-2105.9035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (all_blanks == (#line + 1) or line == &quot;&quot;)</text>
<text text-anchor="middle" x="885" y="-2090.5034" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="885" y="-2059.1034" font-family="Inconsolata" font-size="14.00" fill="#000000">local Inv, inv = u.inherit()</text>
</g>
<!-- codeblock_5&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>codeblock_5&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M915.1879,-2467.5919C911.7539,-2433.0804 904.0356,-2355.5115 897.2633,-2287.4501"/>
<polygon fill="#000000" stroke="#000000" points="900.7447,-2287.0878 896.2716,-2277.4836 893.7791,-2287.781 900.7447,-2287.0878"/>
</g>
<!-- raw_16 -->
<g id="node17" class="node">
<title>raw_16</title>
<ellipse fill="none" stroke="#000000" cx="1138" cy="-2164.2035" rx="27" ry="18"/>
<text text-anchor="middle" x="1138" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_6&#45;&gt;raw_16 -->
<g id="edge16" class="edge">
<title>prose_6&#45;&gt;raw_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1085.1144,-2468.367C1090.6525,-2458.0546 1097.1525,-2444.5546 1101,-2431.804 1126.507,-2347.273 1134.5084,-2242.3489 1136.9569,-2192.741"/>
<polygon fill="#000000" stroke="#000000" points="1140.4661,-2192.6155 1137.4223,-2182.4673 1133.4732,-2192.2987 1140.4661,-2192.6155"/>
</g>
<!-- leaf_18 -->
<g id="node19" class="node">
<title>leaf_18</title>
<polygon fill="none" stroke="#c0c0c0" points="1675,-2431.9044 1183,-2431.9044 1183,-1896.5026 1675,-1896.5026 1675,-2431.9044"/>
<text text-anchor="middle" x="1429" y="-2416.604" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.lang = &quot;lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2401.2039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.extension = &quot;.lua&quot;</text>
<text text-anchor="middle" x="1429" y="-2385.8039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment = L.P&quot;&#45;&#45;&quot;</text>
<text text-anchor="middle" x="1429" y="-2370.4039" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.comment_len = 3</text>
<text text-anchor="middle" x="1429" y="-2355.0038" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.tab_to_space = &quot; &#160;&#160;&quot;</text>
<text text-anchor="middle" x="1429" y="-2323.6038" font-family="Inconsolata" font-size="14.00" fill="#000000">local lang_config = { lua = { lang = &quot;lua&quot;, </text>
<text text-anchor="middle" x="1429" y="-2308.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;extension = &quot;.lua&quot;,</text>
<text text-anchor="middle" x="1429" y="-2292.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment = L.P&quot;&#45;&#45;&quot;,</text>
<text text-anchor="middle" x="1429" y="-2277.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;comment_len = 3,</text>
<text text-anchor="middle" x="1429" y="-2262.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;tab_to_space = &quot; &#160;&#160;&quot;}}</text>
<text text-anchor="middle" x="1429" y="-2230.6037" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_header(inverter)</text>
<text text-anchor="middle" x="1429" y="-2215.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#!&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2199.8036" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2168.4036" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.write_footer(inverter)</text>
<text text-anchor="middle" x="1429" y="-2153.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return &quot;#/&quot; .. inverter.lang .. &quot;\n&quot;</text>
<text text-anchor="middle" x="1429" y="-2137.6035" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-2106.2035" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.filter(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-2090.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if isBlank(line) then</text>
<text text-anchor="middle" x="1429" y="-2075.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return &quot;&quot;</text>
<text text-anchor="middle" x="1429" y="-2060.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else </text>
<text text-anchor="middle" x="1429" y="-2044.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return line:gsub(&quot;\t&quot;, inverter.tab_to_space):gsub(&quot;\r&quot;, &quot;&quot;)</text>
<text text-anchor="middle" x="1429" y="-2029.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1429" y="-2013.8033" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1429" y="-1982.4032" font-family="Inconsolata" font-size="14.00" fill="#000000">local function cat_lines() end &#45;&#45;stub out</text>
<text text-anchor="middle" x="1429" y="-1951.0032" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.matchComment(inverter, line)</text>
<text text-anchor="middle" x="1429" y="-1935.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return (L.match(inverter.comment * m._, line) </text>
<text text-anchor="middle" x="1429" y="-1920.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;or (L.match(inverter.comment, line) and #line == 2))</text>
<text text-anchor="middle" x="1429" y="-1904.8031" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_7&#45;&gt;leaf_18 -->
<g id="edge18" class="edge">
<title>codeblock_7&#45;&gt;leaf_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1322.3991,-2467.5919C1324.8656,-2460.5723 1327.958,-2451.7714 1331.5208,-2441.6314"/>
<polygon fill="#000000" stroke="#000000" points="1334.9077,-2442.5503 1334.9206,-2431.9555 1328.3035,-2440.2298 1334.9077,-2442.5503"/>
</g>
<!-- header_19 -->
<g id="node20" class="node">
<title>header_19</title>
<ellipse fill="none" stroke="#000000" cx="1775" cy="-2164.2035" rx="82.2492" ry="18"/>
<text text-anchor="middle" x="1775" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : matchLineType</text>
</g>
<!-- section_8&#45;&gt;header_19 -->
<g id="edge19" class="edge">
<title>section_8&#45;&gt;header_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1998.032,-2475.3384C1949.751,-2465.5491 1885.9409,-2449.7696 1867,-2431.804 1798.1396,-2366.4891 1780.8165,-2247.3564 1776.4612,-2192.8297"/>
<polygon fill="#000000" stroke="#000000" points="1779.9289,-2192.2474 1775.7331,-2182.5188 1772.9463,-2192.7405 1779.9289,-2192.2474"/>
</g>
<!-- prose_20 -->
<g id="node21" class="node">
<title>prose_20</title>
<ellipse fill="none" stroke="#000000" cx="1908" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1908" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_20 -->
<g id="edge20" class="edge">
<title>section_8&#45;&gt;prose_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2007.7175,-2472.5461C1986.4744,-2464.2588 1963.1759,-2451.3399 1949,-2431.804 1896.0415,-2358.8217 1899.4328,-2244.9336 1904.4574,-2192.4416"/>
<polygon fill="#000000" stroke="#000000" points="1907.9684,-2192.5206 1905.5347,-2182.2091 1901.0069,-2191.7876 1907.9684,-2192.5206"/>
</g>
<!-- prose_21 -->
<g id="node22" class="node">
<title>prose_21</title>
<ellipse fill="none" stroke="#000000" cx="1990" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1990" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_21 -->
<g id="edge21" class="edge">
<title>section_8&#45;&gt;prose_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2046.1137,-2467.8128C2040.8722,-2457.5431 2034.7572,-2444.2669 2031,-2431.804 2005.4599,-2347.086 1995.3109,-2242.25 1991.7281,-2192.7017"/>
<polygon fill="#000000" stroke="#000000" points="1995.2005,-2192.1779 1991.0241,-2182.441 1988.2169,-2192.6572 1995.2005,-2192.1779"/>
</g>
<!-- codeblock_22 -->
<g id="node23" class="node">
<title>codeblock_22</title>
<ellipse fill="none" stroke="#000000" cx="2122" cy="-2164.2035" rx="81.9542" ry="18"/>
<text text-anchor="middle" x="2122" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 78&#45;112</text>
</g>
<!-- section_8&#45;&gt;codeblock_22 -->
<g id="edge22" class="edge">
<title>section_8&#45;&gt;codeblock_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2059.7375,-2467.5919C2070.7417,-2413.9717 2103.0766,-2256.4124 2116.2827,-2192.0624"/>
<polygon fill="#000000" stroke="#000000" points="2119.7216,-2192.7154 2118.3034,-2182.2159 2112.8645,-2191.3081 2119.7216,-2192.7154"/>
</g>
<!-- prose_23 -->
<g id="node24" class="node">
<title>prose_23</title>
<ellipse fill="none" stroke="#000000" cx="2318" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2318" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_23 -->
<g id="edge23" class="edge">
<title>section_8&#45;&gt;prose_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2117.9819,-2477.1742C2149.8553,-2469.8664 2187.2976,-2456.4331 2213,-2431.804 2282.6138,-2365.0972 2306.9566,-2246.6734 2314.7111,-2192.5783"/>
<polygon fill="#000000" stroke="#000000" points="2318.2223,-2192.7293 2316.087,-2182.3519 2311.2848,-2191.7959 2318.2223,-2192.7293"/>
</g>
<!-- prose_24 -->
<g id="node25" class="node">
<title>prose_24</title>
<ellipse fill="none" stroke="#000000" cx="2432" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2432" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_24 -->
<g id="edge24" class="edge">
<title>section_8&#45;&gt;prose_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2124.9534,-2481.9381C2203.578,-2476.1214 2325.5718,-2462.3529 2359,-2431.804 2427.9853,-2368.7606 2434.3305,-2247.5216 2433.3627,-2192.5459"/>
<polygon fill="#000000" stroke="#000000" points="2436.8594,-2192.3721 2433.088,-2182.4712 2429.862,-2192.5629 2436.8594,-2192.3721"/>
</g>
<!-- codeblock_25 -->
<g id="node26" class="node">
<title>codeblock_25</title>
<ellipse fill="none" stroke="#000000" cx="2682" cy="-2164.2035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="2682" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 125&#45;203</text>
</g>
<!-- section_8&#45;&gt;codeblock_25 -->
<g id="edge25" class="edge">
<title>section_8&#45;&gt;codeblock_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2125.9207,-2483.1252C2228.873,-2478.1219 2415.2932,-2464.7115 2473,-2431.804 2573.7209,-2374.3676 2643.0462,-2247.2209 2669.7624,-2191.3896"/>
<polygon fill="#000000" stroke="#000000" points="2673.026,-2192.674 2674.1114,-2182.1349 2666.6906,-2189.6968 2673.026,-2192.674"/>
</g>
<!-- header_37 -->
<g id="node38" class="node">
<title>header_37</title>
<ellipse fill="none" stroke="#000000" cx="3347" cy="-2164.2035" rx="83.6081" ry="18"/>
<text text-anchor="middle" x="3347" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Grym:invert(str)</text>
</g>
<!-- section_9&#45;&gt;header_37 -->
<g id="edge37" class="edge">
<title>section_9&#45;&gt;header_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3509.6573,-2472.9535C3485.5651,-2464.7376 3458.436,-2451.7614 3440,-2431.804 3375.6807,-2362.1767 3355.4965,-2245.723 3349.448,-2192.4075"/>
<polygon fill="#000000" stroke="#000000" points="3352.9143,-2191.9031 3348.3893,-2182.3232 3345.9526,-2192.634 3352.9143,-2191.9031"/>
</g>
<!-- prose_38 -->
<g id="node39" class="node">
<title>prose_38</title>
<ellipse fill="none" stroke="#000000" cx="3481" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3481" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_38 -->
<g id="edge38" class="edge">
<title>section_9&#45;&gt;prose_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3546.0806,-2468.2584C3537.4909,-2458.3332 3527.6936,-2445.2438 3522,-2431.804 3487.241,-2349.7551 3481.4789,-2242.4656 3480.8284,-2192.3215"/>
<polygon fill="#000000" stroke="#000000" points="3484.3279,-2192.2145 3480.7584,-2182.2391 3477.3281,-2192.2632 3484.3279,-2192.2145"/>
</g>
<!-- prose_39 -->
<g id="node40" class="node">
<title>prose_39</title>
<ellipse fill="none" stroke="#000000" cx="3563" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3563" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_39 -->
<g id="edge39" class="edge">
<title>section_9&#45;&gt;prose_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3563,-2467.5919C3563,-2414.0823 3563,-2257.0617 3563,-2192.4616"/>
<polygon fill="#000000" stroke="#000000" points="3566.5001,-2192.2158 3563,-2182.2159 3559.5001,-2192.2159 3566.5001,-2192.2158"/>
</g>
<!-- prose_40 -->
<g id="node41" class="node">
<title>prose_40</title>
<ellipse fill="none" stroke="#000000" cx="3645" cy="-2164.2035" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3645" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_9&#45;&gt;prose_40 -->
<g id="edge40" class="edge">
<title>section_9&#45;&gt;prose_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3579.9194,-2468.2584C3588.5091,-2458.3332 3598.3064,-2445.2438 3604,-2431.804 3638.759,-2349.7551 3644.5211,-2242.4656 3645.1716,-2192.3215"/>
<polygon fill="#000000" stroke="#000000" points="3648.6719,-2192.2632 3645.2416,-2182.2391 3641.6721,-2192.2145 3648.6719,-2192.2632"/>
</g>
<!-- codeblock_41 -->
<g id="node42" class="node">
<title>codeblock_41</title>
<ellipse fill="none" stroke="#000000" cx="3854" cy="-2164.2035" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="3854" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 215&#45;243</text>
</g>
<!-- section_9&#45;&gt;codeblock_41 -->
<g id="edge41" class="edge">
<title>section_9&#45;&gt;codeblock_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3611.716,-2471.9716C3635.9884,-2463.3115 3664.6355,-2450.2395 3686,-2431.804 3766.3732,-2362.4498 3821.237,-2245.0248 3843.2278,-2191.8437"/>
<polygon fill="#000000" stroke="#000000" points="3846.5465,-2192.9739 3847.0681,-2182.3919 3840.0613,-2190.339 3846.5465,-2192.9739"/>
</g>
<!-- section_42 -->
<g id="node43" class="node">
<title>section_42</title>
<ellipse fill="none" stroke="#000000" cx="4363" cy="-2164.2035" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="4363" y="-2160.0035" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 246&#45;290</text>
</g>
<!-- section_9&#45;&gt;section_42 -->
<g id="edge42" class="edge">
<title>section_9&#45;&gt;section_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3633.9365,-2479.617C3729.3525,-2470.6603 3893.5849,-2452.8319 3950,-2431.804 4110.1288,-2372.1183 4272.1563,-2242.3384 4335.3616,-2188.4335"/>
<polygon fill="#000000" stroke="#000000" points="4337.9611,-2190.8147 4343.2682,-2181.6449 4333.4011,-2185.5037 4337.9611,-2190.8147"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="450,-1288.3025 0,-1288.3025 0,-1233.7016 450,-1233.7016 450,-1288.3025"/>
<text text-anchor="middle" x="225" y="-1257.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;A work in progress, which also works well enough to invert,</text>
<text text-anchor="middle" x="225" y="-1241.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> I may hope, the whole of grym including this file.</text>
</g>
<!-- raw_11&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>raw_11&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M562.7375,-2146.0209C568.6845,-2099.817 578.2105,-1975.9504 524,-1896.6031 505.3707,-1869.3356 480.7392,-1885.4622 459,-1860.6031 306.43,-1686.1364 247.4816,-1400.7861 230.6006,-1298.7496"/>
<polygon fill="#000000" stroke="#000000" points="234.0141,-1297.9323 228.9642,-1288.6184 227.1036,-1299.0486 234.0141,-1297.9323"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="939.5,-1296.3024 468.5,-1296.3024 468.5,-1225.7017 939.5,-1225.7017 939.5,-1296.3024"/>
<text text-anchor="middle" x="704" y="-1265.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> Hence I&#39;m eager to use it and then document it from the grimoire</text>
<text text-anchor="middle" x="704" y="-1249.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> side.</text>
</g>
<!-- raw_13&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_13&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M633.4382,-2146.1617C642.0782,-2037.7779 687.1574,-1472.2837 700.3621,-1306.6378"/>
<polygon fill="#000000" stroke="#000000" points="703.8792,-1306.5608 701.185,-1296.3143 696.9014,-1306.0045 703.8792,-1306.5608"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="1247.5,-1280.9041 1028.5,-1280.9041 1028.5,-1241.0999 1247.5,-1241.0999 1247.5,-1280.9041"/>
<text text-anchor="middle" x="1138" y="-1249.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> The default language is Lua.</text>
</g>
<!-- raw_16&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_16&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1138,-2146.1617C1138,-2034.0912 1138,-1433.2843 1138,-1291.156"/>
<polygon fill="#000000" stroke="#000000" points="1141.5001,-1290.9985 1138,-1280.9985 1134.5001,-1290.9985 1141.5001,-1290.9985"/>
</g>
<!-- leaf_26 -->
<g id="node27" class="node">
<title>leaf_26</title>
<polygon fill="none" stroke="#c0c0c0" points="1719,-1279.002 1577,-1279.002 1577,-1243.002 1719,-1243.002 1719,-1279.002"/>
<text text-anchor="middle" x="1648" y="-1257.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** matchLineType</text>
</g>
<!-- header_19&#45;&gt;leaf_26 -->
<g id="edge26" class="edge">
<title>header_19&#45;&gt;leaf_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1772.0597,-2146.0867C1764.4536,-2099.0388 1743.6327,-1969.0886 1728,-1860.6031 1696.3269,-1640.8025 1662.3957,-1375.019 1651.5465,-1289.1811"/>
<polygon fill="#000000" stroke="#000000" points="1655.008,-1288.6553 1650.2832,-1279.1724 1648.0632,-1289.532 1655.008,-1288.6553"/>
</g>
<!-- raw_27 -->
<g id="node28" class="node">
<title>raw_27</title>
<ellipse fill="none" stroke="#000000" cx="1764" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="1764" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_20&#45;&gt;raw_27 -->
<g id="edge27" class="edge">
<title>prose_20&#45;&gt;raw_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1910.2726,-2145.9583C1915.0494,-2099.6074 1921.509,-1975.4244 1866,-1896.6031 1846.7611,-1869.2844 1817.91,-1888.8108 1800,-1860.6031 1738.859,-1764.3076 1755.9233,-1394.7498 1762.1822,-1289.2645"/>
<polygon fill="#000000" stroke="#000000" points="1765.6879,-1289.2756 1762.8021,-1279.0814 1758.7008,-1288.8502 1765.6879,-1289.2756"/>
</g>
<!-- raw_29 -->
<g id="node30" class="node">
<title>raw_29</title>
<ellipse fill="none" stroke="#000000" cx="1836" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="1836" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_21&#45;&gt;raw_29 -->
<g id="edge29" class="edge">
<title>prose_21&#45;&gt;raw_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1992.6016,-2146.0975C1998.2604,-2099.5424 2006.8932,-1973.9158 1949,-1896.6031 1926.3562,-1866.3637 1893.2283,-1891.8524 1872,-1860.6031 1807.9033,-1766.2493 1827.0634,-1395.3147 1833.9945,-1289.3878"/>
<polygon fill="#000000" stroke="#000000" points="1837.5032,-1289.3733 1834.6802,-1279.1615 1830.5189,-1288.9049 1837.5032,-1289.3733"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="2331,-1519.9032 1881,-1519.9032 1881,-1002.1009 2331,-1002.1009 2331,-1519.9032"/>
<text text-anchor="middle" x="2106" y="-1504.5025" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.sortLine(inverter, latest, line)</text>
<text text-anchor="middle" x="2106" y="-1489.1025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local block = latest or {}</text>
<text text-anchor="middle" x="2106" y="-1457.7024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter:matchComment(line) then</text>
<text text-anchor="middle" x="2106" y="-1442.3024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose</text>
<text text-anchor="middle" x="2106" y="-1426.9024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;prose&quot; then</text>
<text text-anchor="middle" x="2106" y="-1411.5024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new prose block</text>
<text text-anchor="middle" x="2106" y="-1396.1023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;prose&quot;}</text>
<text text-anchor="middle" x="2106" y="-1380.7023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1365.3023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1349.9022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line:sub(inverter.comment_len)</text>
<text text-anchor="middle" x="2106" y="-1334.5022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1319.1022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;elseif isBlank(line) then</text>
<text text-anchor="middle" x="2106" y="-1303.7021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; blank line</text>
<text text-anchor="middle" x="2106" y="-1288.3021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;blank&quot; then</text>
<text text-anchor="middle" x="2106" y="-1272.9021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;blank&quot;}</text>
<text text-anchor="middle" x="2106" y="-1257.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1242.102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1226.702" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1211.302" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1195.9019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1180.5019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code line</text>
<text text-anchor="middle" x="2106" y="-1165.1019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if not block.id or block.id ~= &quot;code&quot; then</text>
<text text-anchor="middle" x="2106" y="-1149.7018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; new code block</text>
<text text-anchor="middle" x="2106" y="-1134.3018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block = { id = &quot;code&quot; }</text>
<text text-anchor="middle" x="2106" y="-1118.9018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1103.5017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2106" y="-1088.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;block[#block + 1] = line</text>
<text text-anchor="middle" x="2106" y="-1072.7017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1057.3016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2106" y="-1025.9016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return block</text>
<text text-anchor="middle" x="2106" y="-1010.5016" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_22&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>codeblock_22&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2121.6804,-2146.1617C2120.3161,-2069.1445 2114.8628,-1761.3098 2110.7679,-1530.1477"/>
<polygon fill="#000000" stroke="#000000" points="2114.2628,-1529.8265 2110.5861,-1519.8901 2107.2639,-1529.9505 2114.2628,-1529.8265"/>
</g>
<!-- raw_32 -->
<g id="node33" class="node">
<title>raw_32</title>
<ellipse fill="none" stroke="#000000" cx="2376" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="2376" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_23&#45;&gt;raw_32 -->
<g id="edge32" class="edge">
<title>prose_23&#45;&gt;raw_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2319.3925,-2146.0723C2322.9913,-2098.9902 2332.8211,-1968.9653 2340,-1860.6031 2354.5771,-1640.5688 2369.6348,-1374.9376 2374.4335,-1289.1598"/>
<polygon fill="#000000" stroke="#000000" points="2377.9289,-1289.338 2374.9921,-1279.1584 2370.9398,-1288.9476 2377.9289,-1289.338"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="2448" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="2448" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_24&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_24&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2432.3196,-2146.1617C2434.3136,-2033.5984 2445.0418,-1427.9901 2447.4986,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="2451.0019,-1289.1472 2447.6796,-1279.0868 2444.003,-1289.0232 2451.0019,-1289.1472"/>
</g>
<!-- leaf_36 -->
<g id="node37" class="node">
<title>leaf_36</title>
<polygon fill="none" stroke="#c0c0c0" points="3062.5,-1860.7042 2493.5,-1860.7042 2493.5,-661.2999 3062.5,-661.2999 3062.5,-1860.7042"/>
<text text-anchor="middle" x="2778" y="-1845.4031" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.catBlocks(inverter, blocks)</text>
<text text-anchor="middle" x="2778" y="-1830.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="2778" y="-1814.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local function toLines(block) </text>
<text text-anchor="middle" x="2778" y="-1799.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1783.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for j = 1, #block do</text>
<text text-anchor="middle" x="2778" y="-1768.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="2778" y="-1753.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. block[j] .. &quot;\n&quot;</text>
<text text-anchor="middle" x="2778" y="-1737.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1722.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="2778" y="-1706.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1691.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase = &quot;&quot;</text>
<text text-anchor="middle" x="2778" y="-1676.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[1].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1660.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1645.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1629.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;phrase = phrase .. toLines(blocks[1]) </text>
<text text-anchor="middle" x="2778" y="-1614.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for i = 2, #blocks do</text>
<text text-anchor="middle" x="2778" y="-1599.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1567.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1552.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write blanks and code</text>
<text text-anchor="middle" x="2778" y="-1536.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1521.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1506.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1474.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-1459.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; prose or nothing, write blanks, header, and code</text>
<text text-anchor="middle" x="2778" y="-1443.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1428.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-1413.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1])</text>
<text text-anchor="middle" x="2778" y="-1397.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. inverter:write_header()</text>
<text text-anchor="middle" x="2778" y="-1382.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1350.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is prose, write a blank line, </text>
<text text-anchor="middle" x="2778" y="-1335.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; header, and code. </text>
<text text-anchor="middle" x="2778" y="-1320.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1304.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. &quot;\n&quot; .. inverter:write_header() </text>
<text text-anchor="middle" x="2778" y="-1289.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1273.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-1258.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on code in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-1243.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-1227.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i].id == &quot;prose&quot; then</text>
<text text-anchor="middle" x="2778" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is blank and before that is</text>
<text text-anchor="middle" x="2778" y="-1180.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; code, write footer, blanks, and prose</text>
<text text-anchor="middle" x="2778" y="-1165.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-1150.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i &gt; 2 and blocks[i &#45; 2].id == &quot;code&quot; then</text>
<text text-anchor="middle" x="2778" y="-1134.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer() </text>
<text text-anchor="middle" x="2778" y="-1119.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding block is code, write a footer, newline,</text>
<text text-anchor="middle" x="2778" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; and prose</text>
<text text-anchor="middle" x="2778" y="-1057.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif (blocks[i &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-1041.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-1026.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. &quot;\n&quot; .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-994.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; if preceding line is blank and before that is </text>
<text text-anchor="middle" x="2778" y="-979.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; nothing or more prose, write blanks, then prose.</text>
<text text-anchor="middle" x="2778" y="-964.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif blocks[i &#45; 1].id == &quot;blank&quot; and </text>
<text text-anchor="middle" x="2778" y="-948.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[i &#45; 2] == nil or blocks[i &#45; 2].id == &quot;prose&quot;) then</text>
<text text-anchor="middle" x="2778" y="-933.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. toLines(blocks[i &#45; 1]) .. toLines(blocks[i])</text>
<text text-anchor="middle" x="2778" y="-901.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="2778" y="-886.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;Reached a bad state on prose in catLines&quot;)</text>
<text text-anchor="middle" x="2778" y="-871.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-855.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end </text>
<text text-anchor="middle" x="2778" y="-824.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-808.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if blocks[#blocks].id == &quot;code&quot; or</text>
<text text-anchor="middle" x="2778" y="-793.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(blocks[#blocks].id == &quot;blank&quot; </text>
<text text-anchor="middle" x="2778" y="-778.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;and blocks[#blocks &#45; 1].id == &quot;code&quot;) then</text>
<text text-anchor="middle" x="2778" y="-762.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;phrase = phrase .. inverter:write_footer()</text>
<text text-anchor="middle" x="2778" y="-747.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="2778" y="-715.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; Note that there may be a final block of blank lines which we are</text>
<text text-anchor="middle" x="2778" y="-700.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45; happy to simply drop. </text>
<text text-anchor="middle" x="2778" y="-685.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase, linum</text>
<text text-anchor="middle" x="2778" y="-669.601" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_25&#45;&gt;leaf_36 -->
<g id="edge36" class="edge">
<title>codeblock_25&#45;&gt;leaf_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2683.9176,-2146.1617C2688.3013,-2104.9188 2699.7202,-1997.4858 2713.1555,-1871.0818"/>
<polygon fill="#000000" stroke="#000000" points="2716.6747,-1871.0854 2714.2514,-1860.7715 2709.7139,-1870.3455 2716.6747,-1871.0854"/>
</g>
<!-- leaf_28 -->
<g id="node29" class="node">
<title>leaf_28</title>
<polygon fill="none" stroke="#c0c0c0" points="1610.5,-494.1014 1153.5,-494.1014 1153.5,-361.2998 1610.5,-361.2998 1610.5,-494.1014"/>
<text text-anchor="middle" x="1382" y="-446.7007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Matches a line by type (comment, code, or blank) and either</text>
<text text-anchor="middle" x="1382" y="-431.3007" font-family="Inconsolata" font-size="14.00" fill="#000000"> concatenates to an existing block of this type or starts a new</text>
<text text-anchor="middle" x="1382" y="-415.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> one if the latest is different.</text>
<text text-anchor="middle" x="1382" y="-400.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="1382" y="-385.1006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; latest: the latest block.</text>
<text text-anchor="middle" x="1382" y="-369.7006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; line: line to be matched and added.</text>
</g>
<!-- raw_27&#45;&gt;leaf_28 -->
<g id="edge28" class="edge">
<title>raw_27&#45;&gt;leaf_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1765.5215,-1242.9774C1772.7207,-1153.2236 1800.1056,-755.1017 1728,-661.401 1696.886,-620.9685 1663.5976,-650.1784 1619,-625.401 1558.7829,-591.9456 1499.2757,-542.2322 1454.9521,-501.0278"/>
<polygon fill="#000000" stroke="#000000" points="1457.1057,-498.2493 1447.4149,-493.9668 1452.3199,-503.3578 1457.1057,-498.2493"/>
</g>
<!-- leaf_30 -->
<g id="node31" class="node">
<title>leaf_30</title>
<polygon fill="none" stroke="#c0c0c0" points="2043.5,-455.6021 1628.5,-455.6021 1628.5,-399.7992 2043.5,-399.7992 2043.5,-455.6021"/>
<text text-anchor="middle" x="1836" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return : the latest block, which may be created here.</text>
</g>
<!-- raw_29&#45;&gt;leaf_30 -->
<g id="edge30" class="edge">
<title>raw_29&#45;&gt;leaf_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1836,-1242.8224C1836,-1138.2158 1836,-612.5733 1836,-465.8101"/>
<polygon fill="#000000" stroke="#000000" points="1839.5001,-465.5162 1836,-455.5162 1832.5001,-465.5163 1839.5001,-465.5162"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="2476.5,-447.6027 2061.5,-447.6027 2061.5,-407.7986 2476.5,-407.7986 2476.5,-447.6027"/>
<text text-anchor="middle" x="2269" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Takes blocks and concatenates them into a single string.</text>
</g>
<!-- raw_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2376.4569,-1242.6664C2377.9659,-1169.0098 2380.5921,-887.7379 2340,-661.401 2326.4929,-586.0868 2296.7522,-500.8356 2280.3735,-457.0741"/>
<polygon fill="#000000" stroke="#000000" points="2283.6125,-455.7441 2276.8033,-447.6272 2277.0646,-458.2189 2283.6125,-455.7441"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="2973,-455.0011 2495,-455.0011 2495,-400.4002 2973,-400.4002 2973,-455.0011"/>
<text text-anchor="middle" x="2734" y="-423.9007" font-family="Inconsolata" font-size="14.00" fill="#000000"> Also writes headers and footers, while doing its best to get the </text>
<text text-anchor="middle" x="2734" y="-408.5006" font-family="Inconsolata" font-size="14.00" fill="#000000"> spacing right.</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2444.4768,-1242.9137C2430.6588,-1167.2911 2385.6,-870.673 2484,-661.401 2526.0475,-571.9764 2618.9833,-500.1042 2678.9362,-460.723"/>
<polygon fill="#000000" stroke="#000000" points="2681.0454,-463.5269 2687.5324,-455.1502 2677.2375,-457.6532 2681.0454,-463.5269"/>
</g>
<!-- leaf_43 -->
<g id="node44" class="node">
<title>leaf_43</title>
<polygon fill="none" stroke="#c0c0c0" points="3425,-1279.002 3269,-1279.002 3269,-1243.002 3425,-1243.002 3425,-1279.002"/>
<text text-anchor="middle" x="3347" y="-1257.502" font-family="Inconsolata" font-size="14.00" fill="#000000"> ** Grym:invert(str)</text>
</g>
<!-- header_37&#45;&gt;leaf_43 -->
<g id="edge43" class="edge">
<title>header_37&#45;&gt;leaf_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3347,-2146.1617C3347,-2033.5984 3347,-1427.9901 3347,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3350.5001,-1289.0868 3347,-1279.0868 3343.5001,-1289.0868 3350.5001,-1289.0868"/>
</g>
<!-- raw_44 -->
<g id="node45" class="node">
<title>raw_44</title>
<ellipse fill="none" stroke="#000000" cx="3476" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3476" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_38&#45;&gt;raw_44 -->
<g id="edge44" class="edge">
<title>prose_38&#45;&gt;raw_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3480.9001,-2146.1617C3480.277,-2033.5984 3476.9244,-1427.9901 3476.1567,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3479.6555,-1289.0672 3476.1001,-1279.0868 3472.6556,-1289.106 3479.6555,-1289.0672"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="3565" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3565" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_39&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_39&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3563.04,-2146.1617C3563.2892,-2033.5984 3564.6302,-1427.9901 3564.9373,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3568.4377,-1289.0945 3564.96,-1279.0868 3561.4377,-1289.079 3568.4377,-1289.0945"/>
</g>
<!-- raw_48 -->
<g id="node49" class="node">
<title>raw_48</title>
<ellipse fill="none" stroke="#000000" cx="3642" cy="-1261.002" rx="27" ry="18"/>
<text text-anchor="middle" x="3642" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_40&#45;&gt;raw_48 -->
<g id="edge48" class="edge">
<title>prose_40&#45;&gt;raw_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3644.9401,-2146.1617C3644.5662,-2033.5984 3642.5547,-1427.9901 3642.094,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="3645.5934,-1289.0751 3642.0601,-1279.0868 3638.5934,-1289.0984 3645.5934,-1289.0751"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="4158.5,-1473.403 3687.5,-1473.403 3687.5,-1048.601 4158.5,-1048.601 4158.5,-1473.403"/>
<text text-anchor="middle" x="3923" y="-1458.0024" font-family="Inconsolata" font-size="14.00" fill="#000000">local function invert(inverter, str)</text>
<text text-anchor="middle" x="3923" y="-1442.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local blocks = {}</text>
<text text-anchor="middle" x="3923" y="-1427.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local linum = 0</text>
<text text-anchor="middle" x="3923" y="-1411.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local latest = nil</text>
<text text-anchor="middle" x="3923" y="-1396.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, line in ipairs(epeg.split(str, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="3923" y="-1381.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;linum = linum + 1</text>
<text text-anchor="middle" x="3923" y="-1365.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;line = inverter:filter(line)</text>
<text text-anchor="middle" x="3923" y="-1350.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; each line is either comment, blank or code.</text>
<text text-anchor="middle" x="3923" y="-1334.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;local this_block = inverter:sortLine(latest, line)</text>
<text text-anchor="middle" x="3923" y="-1319.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;if this_block ~= latest then</text>
<text text-anchor="middle" x="3923" y="-1304.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;blocks[#blocks + 1] = this_block</text>
<text text-anchor="middle" x="3923" y="-1288.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;latest = this_block</text>
<text text-anchor="middle" x="3923" y="-1273.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3923" y="-1257.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3923" y="-1242.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local new_linum = 0</text>
<text text-anchor="middle" x="3923" y="-1227.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;&#45;[[ This entire check should be wrapped in a utility assert</text>
<text text-anchor="middle" x="3923" y="-1211.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;for _, v in ipairs(blocks) do</text>
<text text-anchor="middle" x="3923" y="-1196.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;for __, line in ipairs(v) do</text>
<text text-anchor="middle" x="3923" y="-1180.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;new_linum = new_linum + 1</text>
<text text-anchor="middle" x="3923" y="-1165.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3923" y="-1150.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="3923" y="-1134.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#45;&#45;]]</text>
<text text-anchor="middle" x="3923" y="-1119.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;assert(linum == new_linum)</text>
<text text-anchor="middle" x="3923" y="-1087.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local phrase, cat_linum = inverter:catBlocks(blocks)</text>
<text text-anchor="middle" x="3923" y="-1072.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return phrase</text>
<text text-anchor="middle" x="3923" y="-1057.0017" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_41&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>codeblock_41&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3855.3783,-2146.1617C3861.6699,-2063.8059 3888.124,-1717.5244 3906.0187,-1483.285"/>
<polygon fill="#000000" stroke="#000000" points="3909.5124,-1483.4995 3906.7844,-1473.262 3902.5328,-1482.9663 3909.5124,-1483.4995"/>
</g>
<!-- header_51 -->
<g id="node52" class="node">
<title>header_51</title>
<ellipse fill="none" stroke="#000000" cx="4245" cy="-1261.002" rx="68.2066" ry="18"/>
<text text-anchor="middle" x="4245" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : Constructor</text>
</g>
<!-- section_42&#45;&gt;header_51 -->
<g id="edge51" class="edge">
<title>section_42&#45;&gt;header_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4360.5095,-2146.0723C4354.0515,-2098.9904 4336.2747,-1968.9659 4322,-1860.6031 4293.0156,-1640.5761 4259.3782,-1374.9402 4248.5499,-1289.1605"/>
<polygon fill="#000000" stroke="#000000" points="4252.0123,-1288.6419 4247.2878,-1279.1588 4245.0674,-1289.5183 4252.0123,-1288.6419"/>
</g>
<!-- prose_52 -->
<g id="node53" class="node">
<title>prose_52</title>
<ellipse fill="none" stroke="#000000" cx="4363" cy="-1261.002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4363" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_52 -->
<g id="edge52" class="edge">
<title>section_42&#45;&gt;prose_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4363,-2146.1617C4363,-2033.5984 4363,-1427.9901 4363,-1289.3075"/>
<polygon fill="#000000" stroke="#000000" points="4366.5001,-1289.0868 4363,-1279.0868 4359.5001,-1289.0868 4366.5001,-1289.0868"/>
</g>
<!-- prose_53 -->
<g id="node54" class="node">
<title>prose_53</title>
<ellipse fill="none" stroke="#000000" cx="4445" cy="-1261.002" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4445" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_42&#45;&gt;prose_53 -->
<g id="edge53" class="edge">
<title>section_42&#45;&gt;prose_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4365.8672,-2146.1163C4373.2215,-2099.1389 4392.952,-1969.3423 4404,-1860.6031 4426.3018,-1641.0988 4439.7343,-1375.1221 4443.7337,-1289.208"/>
<polygon fill="#000000" stroke="#000000" points="4447.2312,-1289.3407 4444.195,-1279.1902 4440.2386,-1289.0186 4447.2312,-1289.3407"/>
</g>
<!-- codeblock_54 -->
<g id="node55" class="node">
<title>codeblock_54</title>
<ellipse fill="none" stroke="#000000" cx="4660" cy="-1261.002" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="4660" y="-1256.802" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 263&#45;289</text>
</g>
<!-- section_42&#45;&gt;codeblock_54 -->
<g id="edge54" class="edge">
<title>section_42&#45;&gt;codeblock_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4371.1536,-2145.9717C4391.9123,-2099.176 4447.8163,-1970.7558 4486,-1860.6031 4561.1453,-1643.8233 4630.9821,-1375.6013 4652.9147,-1289.2112"/>
<polygon fill="#000000" stroke="#000000" points="4656.3454,-1289.9205 4655.4059,-1279.3674 4649.5594,-1288.203 4656.3454,-1289.9205"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="3441,-455.6021 2991,-455.6021 2991,-399.7992 3441,-399.7992 3441,-455.6021"/>
<text text-anchor="middle" x="3216" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> This takes a source file and inverts it into Grimoire format.</text>
</g>
<!-- raw_44&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>raw_44&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3478.9023,-1243.0708C3490.2112,-1168.0735 3526.301,-873.5972 3434,-661.401 3397.0262,-576.3997 3315.4698,-502.8139 3263.2651,-461.9439"/>
<polygon fill="#000000" stroke="#000000" points="3265.2017,-459.017 3255.1499,-455.6686 3260.9196,-464.5546 3265.2017,-459.017"/>
</g>
<!-- leaf_47 -->
<g id="node48" class="node">
<title>leaf_47</title>
<polygon fill="none" stroke="#c0c0c0" points="3769,-447.6027 3459,-447.6027 3459,-407.7986 3769,-407.7986 3769,-447.6027"/>
<text text-anchor="middle" x="3614" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; str: The source file as a single string</text>
</g>
<!-- raw_46&#45;&gt;leaf_47 -->
<g id="edge47" class="edge">
<title>raw_46&#45;&gt;leaf_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3566.069,-1242.8224C3572.3378,-1136.2149 3604.3206,-592.3104 3612.2295,-457.8098"/>
<polygon fill="#000000" stroke="#000000" points="3615.7452,-457.6441 3612.8383,-447.4559 3608.7573,-457.2331 3615.7452,-457.6441"/>
</g>
<!-- leaf_49 -->
<g id="node50" class="node">
<title>leaf_49</title>
<polygon fill="none" stroke="#c0c0c0" points="4118.5,-455.6021 3787.5,-455.6021 3787.5,-399.7992 4118.5,-399.7992 4118.5,-455.6021"/>
<text text-anchor="middle" x="3953" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: The Grimoire document as a string</text>
</g>
<!-- raw_48&#45;&gt;leaf_49 -->
<g id="edge49" class="edge">
<title>raw_48&#45;&gt;leaf_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3640.5275,-1243.0146C3633.5651,-1153.4405 3607.1451,-756.0509 3678,-661.401 3706.3081,-623.5862 3738.9046,-651.9125 3778,-625.401 3842.9092,-581.3845 3899.2237,-507.8964 3929.4388,-463.9914"/>
<polygon fill="#000000" stroke="#000000" points="3932.4006,-465.86 3935.1286,-455.6223 3926.6118,-461.9243 3932.4006,-465.86"/>
</g>
<!-- leaf_55 -->
<g id="node56" class="node">
<title>leaf_55</title>
<polygon fill="none" stroke="#c0c0c0" points="4309,-445.7006 4181,-445.7006 4181,-409.7006 4309,-409.7006 4309,-445.7006"/>
<text text-anchor="middle" x="4245" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> *** Constructor</text>
</g>
<!-- header_51&#45;&gt;leaf_55 -->
<g id="edge55" class="edge">
<title>header_51&#45;&gt;leaf_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4245,-1242.8224C4245,-1135.7519 4245,-587.5777 4245,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4248.5001,-455.9974 4245,-445.9974 4241.5001,-455.9975 4248.5001,-455.9974"/>
</g>
<!-- raw_56 -->
<g id="node57" class="node">
<title>raw_56</title>
<ellipse fill="none" stroke="#000000" cx="4359" cy="-427.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="4359" y="-423.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_52&#45;&gt;raw_56 -->
<g id="edge56" class="edge">
<title>prose_52&#45;&gt;raw_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4362.9127,-1242.8224C4362.3988,-1135.7519 4359.7674,-587.5777 4359.1362,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4362.6359,-455.9805 4359.0878,-445.9974 4355.636,-456.0142 4362.6359,-455.9805"/>
</g>
<!-- raw_58 -->
<g id="node59" class="node">
<title>raw_58</title>
<ellipse fill="none" stroke="#000000" cx="4445" cy="-427.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="4445" y="-423.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_53&#45;&gt;raw_58 -->
<g id="edge58" class="edge">
<title>prose_53&#45;&gt;raw_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4445,-1242.8224C4445,-1135.7519 4445,-587.5777 4445,-456.0806"/>
<polygon fill="#000000" stroke="#000000" points="4448.5001,-455.9974 4445,-445.9974 4441.5001,-455.9975 4448.5001,-455.9974"/>
</g>
<!-- leaf_60 -->
<g id="node61" class="node">
<title>leaf_60</title>
<polygon fill="none" stroke="#c0c0c0" points="4982,-625.6015 4490,-625.6015 4490,-229.7998 4982,-229.7998 4982,-625.6015"/>
<text text-anchor="middle" x="4736" y="-610.201" font-family="Inconsolata" font-size="14.00" fill="#000000">local function new(Inverter, lang)</text>
<text text-anchor="middle" x="4736" y="-594.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;local inverter = setmetatable({}, Inv)</text>
<text text-anchor="middle" x="4736" y="-579.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if lang and lang ~= &quot;lua&quot; then</text>
<text text-anchor="middle" x="4736" y="-564.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;configs not yet implemented&quot;)</text>
<text text-anchor="middle" x="4736" y="-548.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4736" y="-533.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;return inverter</text>
<text text-anchor="middle" x="4736" y="-517.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4736" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local inv_lua = new()</text>
<text text-anchor="middle" x="4736" y="-455.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">function Inv.getLang(inverter, key)</text>
<text text-anchor="middle" x="4736" y="-439.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if key == &quot;lua&quot; then</text>
<text text-anchor="middle" x="4736" y="-424.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inv_lua</text>
<text text-anchor="middle" x="4736" y="-408.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4736" y="-393.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if inverter.langs[key] then </text>
<text text-anchor="middle" x="4736" y="-378.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;return inverter.langs[key]</text>
<text text-anchor="middle" x="4736" y="-362.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;else</text>
<text text-anchor="middle" x="4736" y="-347.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;u.freeze(&quot;No inverter found for language &quot; .. tostring(key))</text>
<text text-anchor="middle" x="4736" y="-331.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="4736" y="-316.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="4736" y="-285.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.__call = invert</text>
<text text-anchor="middle" x="4736" y="-269.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">Inv.invert = invert</text>
<text text-anchor="middle" x="4736" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">return u.export(inv, new)</text>
</g>
<!-- codeblock_54&#45;&gt;leaf_60 -->
<g id="edge60" class="edge">
<title>codeblock_54&#45;&gt;leaf_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4661.658,-1242.8224C4668.8004,-1164.51 4697.4643,-850.2245 4717.0394,-635.5945"/>
<polygon fill="#000000" stroke="#000000" points="4720.5417,-635.7273 4717.9645,-625.4507 4713.5706,-635.0914 4720.5417,-635.7273"/>
</g>
<!-- leaf_57 -->
<g id="node58" class="node">
<title>leaf_57</title>
<polygon fill="none" stroke="#c0c0c0" points="4321.5,-132.3005 4102.5,-132.3005 4102.5,-61.6998 4321.5,-61.6998 4321.5,-132.3005"/>
<text text-anchor="middle" x="4212" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4212" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;Currently minimum&#45;viable. </text>
</g>
<!-- raw_56&#45;&gt;leaf_57 -->
<g id="edge57" class="edge">
<title>raw_56&#45;&gt;leaf_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4358.0522,-409.6398C4355.5811,-373.7774 4346.9594,-291.7229 4318,-230.0003 4302.4392,-196.8349 4277.0631,-164.5765 4255.0409,-140.1361"/>
<polygon fill="#000000" stroke="#000000" points="4257.3633,-137.49 4248.0254,-132.4845 4252.2036,-142.2206 4257.3633,-137.49"/>
</g>
<!-- leaf_59 -->
<g id="node60" class="node">
<title>leaf_59</title>
<polygon fill="none" stroke="#c0c0c0" points="4846,-194.0005 4340,-194.0005 4340,.0002 4846,.0002 4846,-194.0005"/>
<text text-anchor="middle" x="4593" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> Long term, lang can be other than nil, which gets you lua.</text>
<text text-anchor="middle" x="4593" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> A string will return an inverter.lang of that string if such</text>
<text text-anchor="middle" x="4593" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> exists.</text>
<text text-anchor="middle" x="4593" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4593" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> A table will configure a lang, memoize it if it&#39;s new, and return</text>
<text text-anchor="middle" x="4593" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> same. If one of that name already exists, memoization isn&#39;t repeated,</text>
<text text-anchor="middle" x="4593" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> so for a default like lua or python, making a custom python inverter</text>
<text text-anchor="middle" x="4593" y="-55.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> wont affect the result of subsequent `invert(&quot;python&quot;)` calls. </text>
<text text-anchor="middle" x="4593" y="-39.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
<text text-anchor="middle" x="4593" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#45; #return: an Inverter</text>
</g>
<!-- raw_58&#45;&gt;leaf_59 -->
<g id="edge59" class="edge">
<title>raw_58&#45;&gt;leaf_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4445.2305,-409.5827C4446.3323,-373.6188 4452.0971,-291.3929 4481,-230.0003 4485.3848,-220.6866 4490.5888,-211.4943 4496.3159,-202.5561"/>
<polygon fill="#000000" stroke="#000000" points="4499.3366,-204.3343 4501.9575,-194.0688 4493.5069,-200.4593 4499.3366,-204.3343"/>
</g>
</g>
</svg>