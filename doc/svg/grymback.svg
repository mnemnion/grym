<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: hierarchy Pages: 1 -->
<svg width="1982pt" height="772pt"
 viewBox="0.00 0.00 1981.50 772.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 768.4008)">
<title>hierarchy</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-768.4008 1977.5,-768.4008 1977.5,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="757.5" cy="-746.4008" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="757.5" y="-742.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 103</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="757.5" cy="-674.4008" rx="60.1778" ry="18"/>
<text text-anchor="middle" x="757.5" y="-670.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;11</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M757.5,-728.2322C757.5,-720.5318 757.5,-711.3752 757.5,-702.8174"/>
<polygon fill="#000000" stroke="#000000" points="761.0001,-702.814 757.5,-692.8141 754.0001,-702.8141 761.0001,-702.814"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="603.5" cy="-602.4008" rx="62.8772" ry="18"/>
<text text-anchor="middle" x="603.5" y="-598.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : Grymback</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M724.8406,-659.1315C701.7451,-648.3336 670.5762,-633.7611 645.6118,-622.0894"/>
<polygon fill="#000000" stroke="#000000" points="646.9187,-618.8369 636.3775,-617.7721 643.9539,-625.178 646.9187,-618.8369"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="716.5" cy="-602.4008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="716.5" y="-598.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M747.3652,-656.6031C742.5632,-648.1703 736.7315,-637.9294 731.4358,-628.6296"/>
<polygon fill="#000000" stroke="#000000" points="734.3667,-626.7033 726.3768,-619.7454 728.2838,-630.1672 734.3667,-626.7033"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="798.5" cy="-602.4008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="798.5" y="-598.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M767.6348,-656.6031C772.4368,-648.1703 778.2685,-637.9294 783.5642,-628.6296"/>
<polygon fill="#000000" stroke="#000000" points="786.7162,-630.1672 788.6232,-619.7454 780.6333,-626.7033 786.7162,-630.1672"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-602.4008" rx="70.655" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-598.2008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 12&#45;103</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M811.3674,-666.4205C899.326,-653.3896 1073.8067,-627.5406 1172.0203,-612.9904"/>
<polygon fill="#000000" stroke="#000000" points="1172.7745,-616.4169 1182.1536,-611.4892 1171.7486,-609.4925 1172.7745,-616.4169"/>
</g>
<!-- leaf_6 -->
<g id="node7" class="node">
<title>leaf_6</title>
<polygon fill="none" stroke="#c0c0c0" points="513,-548.3011 0,-548.3011 0,-477.7004 513,-477.7004 513,-548.3011"/>
<text text-anchor="middle" x="256.5" y="-501.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;This is a standalone program to restore grym in the event that a knit</text>
<text text-anchor="middle" x="256.5" y="-485.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">results in an unusable grym module.</text>
</g>
<!-- prose_3&#45;&gt;leaf_6 -->
<g id="edge6" class="edge">
<title>prose_3&#45;&gt;leaf_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M692.1523,-590.548C686.7609,-588.2535 681.0104,-586.0526 675.5,-584.4008 641.6611,-574.2573 574.5232,-561.7136 503.7281,-549.9841"/>
<polygon fill="#000000" stroke="#000000" points="504.1534,-546.507 493.7174,-548.3347 503.0154,-553.4139 504.1534,-546.507"/>
</g>
<!-- leaf_7 -->
<g id="node8" class="node">
<title>leaf_7</title>
<polygon fill="none" stroke="#c0c0c0" points="1065.5,-547.602 531.5,-547.602 531.5,-478.3995 1065.5,-478.3995 1065.5,-547.602"/>
<text text-anchor="middle" x="798.5" y="-532.6008" font-family="Inconsolata" font-size="14.00" fill="#000000">The plan: A =.grym= file in the root directory will contain any</text>
<text text-anchor="middle" x="798.5" y="-517.2008" font-family="Inconsolata" font-size="14.00" fill="#000000">knit&#45;modified files from the last pass. &#160;=grym= itself will read and write</text>
<text text-anchor="middle" x="798.5" y="-501.8008" font-family="Inconsolata" font-size="14.00" fill="#000000">to the .grym file, maintaining a data structure in the meantime; this will</text>
<text text-anchor="middle" x="798.5" y="-486.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">be in Lua&#45;native table format, at first, eventually Clu(den).</text>
</g>
<!-- prose_4&#45;&gt;leaf_7 -->
<g id="edge7" class="edge">
<title>prose_4&#45;&gt;leaf_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M798.5,-584.3094C798.5,-576.5908 798.5,-567.208 798.5,-557.8183"/>
<polygon fill="#000000" stroke="#000000" points="802.0001,-557.7051 798.5,-547.7051 795.0001,-557.7052 802.0001,-557.7051"/>
</g>
<!-- header_8 -->
<g id="node9" class="node">
<title>header_8</title>
<ellipse fill="none" stroke="#000000" cx="1138.5" cy="-513.0008" rx="54.6851" ry="18"/>
<text text-anchor="middle" x="1138.5" y="-508.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : includes</text>
</g>
<!-- section_5&#45;&gt;header_8 -->
<g id="edge8" class="edge">
<title>section_5&#45;&gt;header_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1223.0057,-584.9514C1206.7546,-571.1147 1183.8873,-551.6448 1166.0377,-536.4472"/>
<polygon fill="#000000" stroke="#000000" points="1168.1144,-533.6186 1158.2314,-529.8007 1163.5765,-538.9484 1168.1144,-533.6186"/>
</g>
<!-- prose_9 -->
<g id="node10" class="node">
<title>prose_9</title>
<ellipse fill="none" stroke="#000000" cx="1243.5" cy="-513.0008" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1243.5" y="-508.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_9 -->
<g id="edge9" class="edge">
<title>section_5&#45;&gt;prose_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1243.5,-584.3094C1243.5,-571.9494 1243.5,-555.322 1243.5,-541.2324"/>
<polygon fill="#000000" stroke="#000000" points="1247.0001,-541.0653 1243.5,-531.0653 1240.0001,-541.0653 1247.0001,-541.0653"/>
</g>
<!-- codeblock_10 -->
<g id="node11" class="node">
<title>codeblock_10</title>
<ellipse fill="none" stroke="#000000" cx="1371.5" cy="-513.0008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1371.5" y="-508.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 14&#45;39</text>
</g>
<!-- section_5&#45;&gt;codeblock_10 -->
<g id="edge10" class="edge">
<title>section_5&#45;&gt;codeblock_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1267.8771,-585.3749C1287.856,-571.4209 1316.3281,-551.5349 1338.3732,-536.1378"/>
<polygon fill="#000000" stroke="#000000" points="1340.5834,-538.8633 1346.7777,-530.2678 1336.5752,-533.1244 1340.5834,-538.8633"/>
</g>
<!-- codeblock_11 -->
<g id="node12" class="node">
<title>codeblock_11</title>
<ellipse fill="none" stroke="#000000" cx="1653.5" cy="-513.0008" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="1653.5" y="-508.8008" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 43&#45;72</text>
</g>
<!-- section_5&#45;&gt;codeblock_11 -->
<g id="edge11" class="edge">
<title>section_5&#45;&gt;codeblock_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1297.5219,-590.6214C1371.9665,-574.3888 1506.0171,-545.1593 1586.6752,-527.5718"/>
<polygon fill="#000000" stroke="#000000" points="1587.6979,-530.9312 1596.7226,-525.381 1586.2065,-524.0919 1587.6979,-530.9312"/>
</g>
<!-- leaf_12 -->
<g id="node13" class="node">
<title>leaf_12</title>
<polygon fill="none" stroke="#c0c0c0" points="1191.5,-238.8004 1137.5,-238.8004 1137.5,-202.8004 1191.5,-202.8004 1191.5,-238.8004"/>
</g>
<!-- prose_9&#45;&gt;leaf_12 -->
<g id="edge12" class="edge">
<title>prose_9&#45;&gt;leaf_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1230.9388,-496.3341C1221.0992,-482.4274 1207.8805,-461.7047 1200.5,-441.6007 1176.1811,-375.3582 1168.2482,-291.9279 1165.6918,-249.0715"/>
<polygon fill="#000000" stroke="#000000" points="1169.1735,-248.6368 1165.1391,-238.8402 1162.1837,-249.0144 1169.1735,-248.6368"/>
</g>
<!-- leaf_13 -->
<g id="node14" class="node">
<title>leaf_13</title>
<polygon fill="none" stroke="#c0c0c0" points="1533.5,-410.801 1209.5,-410.801 1209.5,-30.7998 1533.5,-30.7998 1533.5,-410.801"/>
<text text-anchor="middle" x="1371.5" y="-395.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">local L = require &quot;lpeg&quot;</text>
<text text-anchor="middle" x="1371.5" y="-364.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">local s = require &quot;lib/status&quot;</text>
<text text-anchor="middle" x="1371.5" y="-348.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">local u = require &quot;lib/util&quot;</text>
<text text-anchor="middle" x="1371.5" y="-333.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">local a = require &quot;lib/ansi&quot;</text>
<text text-anchor="middle" x="1371.5" y="-318.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">s.chatty = true</text>
<text text-anchor="middle" x="1371.5" y="-286.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local epeg = require &quot;peg/epeg&quot;</text>
<text text-anchor="middle" x="1371.5" y="-255.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_file = require &quot;pl.file&quot;</text>
<text text-anchor="middle" x="1371.5" y="-239.8005" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_dir = require &quot;pl.dir&quot;</text>
<text text-anchor="middle" x="1371.5" y="-224.4004" font-family="Inconsolata" font-size="14.00" fill="#000000">local pl_path = require &quot;pl.path&quot;</text>
<text text-anchor="middle" x="1371.5" y="-209.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">local getfiles = pl_dir.getfiles</text>
<text text-anchor="middle" x="1371.5" y="-193.6004" font-family="Inconsolata" font-size="14.00" fill="#000000">local getdirectories = pl_dir.getdirectories</text>
<text text-anchor="middle" x="1371.5" y="-178.2003" font-family="Inconsolata" font-size="14.00" fill="#000000">local makepath = pl_dir.makepath</text>
<text text-anchor="middle" x="1371.5" y="-162.8003" font-family="Inconsolata" font-size="14.00" fill="#000000">local extension = pl_path.extension</text>
<text text-anchor="middle" x="1371.5" y="-147.4003" font-family="Inconsolata" font-size="14.00" fill="#000000">local dirname = pl_path.dirname</text>
<text text-anchor="middle" x="1371.5" y="-132.0002" font-family="Inconsolata" font-size="14.00" fill="#000000">local basename = pl_path.basename</text>
<text text-anchor="middle" x="1371.5" y="-116.6002" font-family="Inconsolata" font-size="14.00" fill="#000000">local read = pl_file.read</text>
<text text-anchor="middle" x="1371.5" y="-101.2002" font-family="Inconsolata" font-size="14.00" fill="#000000">local write = pl_file.write</text>
<text text-anchor="middle" x="1371.5" y="-85.8002" font-family="Inconsolata" font-size="14.00" fill="#000000">local delete = pl_file.delete</text>
<text text-anchor="middle" x="1371.5" y="-70.4001" font-family="Inconsolata" font-size="14.00" fill="#000000">local isdir = pl_path.isdir</text>
<text text-anchor="middle" x="1371.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000">local walk = &quot;walk&quot;</text>
</g>
<!-- codeblock_10&#45;&gt;leaf_13 -->
<g id="edge13" class="edge">
<title>codeblock_10&#45;&gt;leaf_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1371.5,-494.7223C1371.5,-478.053 1371.5,-451.4709 1371.5,-421.2743"/>
<polygon fill="#000000" stroke="#000000" points="1375.0001,-420.9042 1371.5,-410.9042 1368.0001,-420.9043 1375.0001,-420.9042"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="1973.5,-441.4013 1551.5,-441.4013 1551.5,-.1994 1973.5,-.1994 1973.5,-441.4013"/>
<text text-anchor="middle" x="1762.5" y="-410.4007" font-family="Inconsolata" font-size="14.00" fill="#000000">local pwd = &quot;&quot;</text>
<text text-anchor="middle" x="1762.5" y="-379.0007" font-family="Inconsolata" font-size="14.00" fill="#000000">if (arg) then</text>
<text text-anchor="middle" x="1762.5" y="-363.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;pwd = table.remove(arg, 1)</text>
<text text-anchor="middle" x="1762.5" y="-348.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="1762.5" y="-332.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;os.exit(&quot;Must be called with a root codex directory&quot;, 1)</text>
<text text-anchor="middle" x="1762.5" y="-317.4006" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="1762.5" y="-286.0006" font-family="Inconsolata" font-size="14.00" fill="#000000">io.write(&quot;pwd: &quot; .. pwd .. &quot;\n&quot;)</text>
<text text-anchor="middle" x="1762.5" y="-254.6005" font-family="Inconsolata" font-size="14.00" fill="#000000">local grymback_rc = read(pwd .. &quot;/.grymback&quot;)</text>
<text text-anchor="middle" x="1762.5" y="-239.2005" font-family="Inconsolata" font-size="14.00" fill="#000000">if not grymback_rc then</text>
<text text-anchor="middle" x="1762.5" y="-223.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;s:chat(&quot;No contents in grymback. &#160;No action taken.&quot;)</text>
<text text-anchor="middle" x="1762.5" y="-208.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;os.exit()</text>
<text text-anchor="middle" x="1762.5" y="-193.0004" font-family="Inconsolata" font-size="14.00" fill="#000000">else</text>
<text text-anchor="middle" x="1762.5" y="-177.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;for _,v in ipairs(epeg.split(grymback_rc, &quot;\n&quot;)) do</text>
<text text-anchor="middle" x="1762.5" y="-162.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;if v ~= &quot;&quot; then</text>
<text text-anchor="middle" x="1762.5" y="-146.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;s:chat(&quot;Reverting &quot; .. a.cyan(grymback_rc))</text>
<text text-anchor="middle" x="1762.5" y="-131.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;s:chat(&quot;Reading &quot; .. a.green(pwd .. &quot;/tmp&quot; .. v))</text>
<text text-anchor="middle" x="1762.5" y="-116.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local new_tmp = read(pwd .. &quot;/tmp&quot; .. v)</text>
<text text-anchor="middle" x="1762.5" y="-100.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if new_tmp then</text>
<text text-anchor="middle" x="1762.5" y="-85.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;s:chat(&quot; &#160;&#45; writing&quot;)</text>
<text text-anchor="middle" x="1762.5" y="-69.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;write(v, read(pwd .. &quot;/tmp&quot; .. v))</text>
<text text-anchor="middle" x="1762.5" y="-54.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1762.5" y="-39.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;end</text>
<text text-anchor="middle" x="1762.5" y="-23.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;end</text>
<text text-anchor="middle" x="1762.5" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
</g>
<!-- codeblock_11&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>codeblock_11&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1660.3184,-494.7223C1664.3865,-483.8168 1670.0373,-468.6687 1676.6128,-451.0413"/>
<polygon fill="#000000" stroke="#000000" points="1679.9164,-452.1993 1680.1323,-441.6067 1673.3579,-449.7527 1679.9164,-452.1993"/>
</g>
</g>
</svg>