digraph lpegNode {

node [fontname=Helvetica]
edge [style=dashed]

doc_0 [label="doc - 48"]


doc_0 -> { section_1}
{rank=same; section_1}

section_1 [label="section: 1-48"]


// END RANK doc_0

section_1 -> { header_2 prose_3 prose_4 structure_5 codeblock_6}
{rank=same; header_2 prose_3 prose_4 structure_5 codeblock_6}

header_2 [label="1 : Orb Serve"]

prose_3 [label="prose"]

prose_4 [label="prose"]

structure_5 [label="structure"]

codeblock_6 [label="code block 12-48"]


// END RANK section_1

header_2 -> leaf_7
leaf_7  [color=Gray,shape=rectangle,fontname=Inconsolata,label="* Orb Serve"]
// END RANK header_2

prose_3 -> { raw_8}
{rank=same; raw_8}

raw_8 [label="raw"]


// END RANK prose_3

raw_8 -> leaf_9
leaf_9  [color=Gray,shape=rectangle,fontname=Inconsolata,label="


This requires \"luv\".
"]
// END RANK raw_8

prose_4 -> { raw_10 prespace_11 literal_12 raw_13}
{rank=same; raw_10 prespace_11 literal_12 raw_13}

raw_10 [label="raw"]

prespace_11 [label="prespace"]

literal_12 [label="literal"]

raw_13 [label="raw"]


// END RANK prose_4

raw_10 -> leaf_14
leaf_14  [color=Gray,shape=rectangle,fontname=Inconsolata,label="
I suspect"]
// END RANK raw_10

prespace_11 -> leaf_15
leaf_15  [color=Gray,shape=rectangle,fontname=Inconsolata,label=" "]
// END RANK prespace_11

literal_12 -> leaf_16
leaf_16  [color=Gray,shape=rectangle,fontname=Inconsolata,label="orb"]
// END RANK literal_12

raw_13 -> leaf_17
leaf_17  [color=Gray,shape=rectangle,fontname=Inconsolata,label=" will accrete enough LuaJIT dependencies in the near future
as to be incompatible with PUC Lua. I'll stave that off as long as I can.
"]
// END RANK raw_13

structure_5 -> { hashline_18}
{rank=same; hashline_18}

hashline_18 [label="hashline"]


// END RANK structure_5

hashline_18 -> { hashtag_19}
{rank=same; hashtag_19}

hashtag_19 [label="hashtag"]


// END RANK hashline_18

hashtag_19 -> leaf_20
leaf_20  [color=Gray,shape=rectangle,fontname=Inconsolata,label="todo"]
// END RANK hashtag_19

codeblock_6 -> leaf_21
leaf_21  [color=Gray,shape=rectangle,fontname=Inconsolata,label="local uv = require \"luv\"
local Watcher = require \"femto/watcher\"

local Server = {}
Server.__index = Server


function Server.serve(server, pwd)
   print (\"serving \" .. pwd)
end

local function onchange(server, fname)
   if type(fname) == 'string' then
      print (\"Changed \" .. fname)
   end
end


function Server.start(server)
   server(server.dir)
   uv.run(\"default\")
end


function Server.stop(server)
   server:stop()
   uv.stop()
end

local function new(dir)
   local serve = Watcher {onchange = onchange}
   return serve
end

return new"]
// END RANK codeblock_6


}
